var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
import { defineComponent, onMounted, watch, onBeforeUnmount, computed, ref, getCurrentInstance, onBeforeMount, reactive } from "vue-demi";
import { openBlock, createElementBlock, renderSlot, normalizeClass, withDirectives, createElementVNode, vShow, createTextVNode, Fragment, renderList, toDisplayString } from "vue";
const _sfc_main$a = defineComponent({
  name: "GySjmap",
  props: {
    id: {
      type: String,
      default: "map"
    },
    center: {
      type: Array,
      default: () => []
    },
    zoom: {
      type: Number,
      default: 0
    },
    pitch: {
      type: Number,
      default: 0
    },
    bearing: {
      type: Number,
      default: 0
    },
    mapOpt: {
      type: Object,
      default: () => ({})
    },
    animDuration: {
      type: Number,
      default: 1e3
    }
  },
  setup(props) {
    const gySjmapObj = gySjMap(props.id).value;
    onMounted(() => {
      gySjmapObj.init(props.id, {
        ...props.mapOpt,
        zoom: props.zoom,
        centerPoint: props.center,
        pitch: props.pitch,
        bearing: props.bearing
      });
    });
    const mouseenterFun = () => {
      const contentIdDom = document.getElementById(props.id);
      if (contentIdDom) {
        contentIdDom.focus();
      }
    };
    watch([
      () => props.zoom,
      () => props.center,
      () => props.pitch,
      () => props.bearing
    ], () => {
      gySjmapObj && gySjmapObj.map && gySjmapObj.map.easeTo({
        zoom: props.zoom,
        center: props.center,
        pitch: props.pitch,
        bearing: props.bearing,
        easing(t) {
          return t;
        },
        duration: props.animDuration
      });
    });
    onBeforeUnmount(() => {
      gySjmapObj && gySjmapObj.destory();
    });
    return {
      id: props.id,
      gySjmapObj,
      mouseenterFun
    };
  }
});
const GySjmap_vue_vue_type_style_index_0_scoped_f67e076f_lang = "";
const GySjmap_vue_vue_type_style_index_1_lang = "";
const _export_sfc = (sfc, props) => {
  const target = sfc.__vccOpts || sfc;
  for (const [key, val] of props) {
    target[key] = val;
  }
  return target;
};
const _hoisted_1$1 = ["id"];
function _sfc_render$a(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", {
    id: _ctx.id,
    class: "map divMap",
    tabindex: "0",
    onMouseenter: _cache[0] || (_cache[0] = (...args) => _ctx.mouseenterFun && _ctx.mouseenterFun(...args))
  }, [
    renderSlot(_ctx.$slots, "default", {}, void 0, true)
  ], 40, _hoisted_1$1);
}
const GySjmap = /* @__PURE__ */ _export_sfc(_sfc_main$a, [["render", _sfc_render$a], ["__scopeId", "data-v-f67e076f"], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmap/src/GySjmap.vue"]]);
class createOlLayer {
  constructor(id2, layerType, propsObj) {
    __publicField(this, "position");
    __publicField(this, "layout");
    __publicField(this, "paint");
    __publicField(this, "feature");
    __publicField(this, "mapId");
    __publicField(this, "layerType");
    __publicField(this, "source");
    __publicField(this, "layer");
    __publicField(this, "layerObj");
    __publicField(this, "minZoom");
    __publicField(this, "maxZoom");
    __publicField(this, "opacity");
    __publicField(this, "zIndex");
    __publicField(this, "propsObj");
    __publicField(this, "gySjmapObj");
    __publicField(this, "mapFinish");
    __publicField(this, "isDraw");
    __publicField(this, "finishDraw");
    __publicField(this, "needLoad");
    __publicField(this, "mediaNameStr");
    __publicField(this, "mediaSrc");
    __publicField(this, "mediaName");
    __publicField(this, "nextPosition");
    this.layout = null;
    this.paint = null;
    this.feature = null;
    this.mapId = "";
    this.source = null;
    this.layer = null;
    this.layerObj = null;
    this.layerType = layerType || "symbol";
    this.minZoom = computed(() => propsObj.minZoom);
    this.maxZoom = computed(() => propsObj.maxZoom);
    this.opacity = computed(() => propsObj.opacity);
    this.nextPosition = ref(null);
    this.position = computed(() => this.nextPosition.value || propsObj.position);
    this.propsObj = propsObj;
    this.zIndex = void 0;
    this.gySjmapObj = gySjMap(id2);
    this.mapFinish = computed(() => this.gySjmapObj.value && this.gySjmapObj.value.mapFinish);
    this.isDraw = false;
    this.needLoad = false;
    this.finishDraw = ref(false);
    this.mediaNameStr = "mediaNameStr";
    this.mediaSrc = "";
    this.mediaName = "";
  }
  init() {
  }
  draw() {
    if (!this.needLoad) {
      this.addFeature();
      this.setStyle();
      this.addSource();
      this.addLayer();
    }
    this.addWatchFun();
    this.addLayerToMap();
  }
  addFeature() {
    this.feature = {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: this.position.value
      },
      properties: {
        text: "\u6D4B\u8BD5\u70B9"
      }
    };
  }
  addSource() {
    this.source = {
      type: "geojson",
      data: {
        type: "FeatureCollection",
        features: [this.feature]
      }
    };
  }
  addLayer() {
    this.layer = {
      id: `myLayer${this.gySjmapObj.value.layerIndex}`,
      type: this.layerType,
      source: this.source,
      paint: this.paint,
      layout: this.layout,
      minzoom: this.minZoom.value || 1,
      maxzoom: this.maxZoom.value || 18
    };
    this.gySjmapObj.value.addLayerIndex();
  }
  addLayerToMap() {
    var _a, _b, _c, _d;
    if (!this.isDraw && this.mapFinish.value) {
      this.isDraw = true;
      if (this.needLoad) {
        this.loadMediaAddLayer();
      } else {
        (_b = (_a = this.gySjmapObj.value) == null ? void 0 : _a.map) == null ? void 0 : _b.addLayer(this.layer);
        this.layerObj = (_d = (_c = this.gySjmapObj.value) == null ? void 0 : _c.map) == null ? void 0 : _d.getLayer(this.layer.id);
        this.finishDraw.value = true;
      }
    }
  }
  loadMedia() {
    return new Promise((resolve) => {
      this.gySjmapObj.value.map.loadImage(this.mediaSrc, (error, image) => {
        this.gySjmapObj.value.setMapMediaArr(this.mediaSrc);
        let index2 = this.gySjmapObj.value.mapMediaArr.length;
        let mediaName = this.mediaNameStr + index2;
        const bool = this.gySjmapObj.value.map.hasImage(mediaName);
        if (!bool) {
          this.gySjmapObj.value.map.addImage(mediaName, image);
        }
        resolve(mediaName);
      });
    });
  }
  loadMediaAddLayer() {
    if (!this.mediaSrc) {
      return;
    }
    let index2 = this.gySjmapObj.value.mapMediaArr.findIndex((v) => v === this.mediaSrc);
    if (index2 === -1) {
      this.loadMedia().then((mediaName) => {
        this.loadMediaSuccess(mediaName);
      });
    } else {
      let mediaName = this.mediaNameStr + index2;
      this.loadMediaSuccess(mediaName);
    }
  }
  loadMediaSuccess(mediaName) {
    var _a, _b, _c, _d;
    this.mediaName = mediaName;
    this.addFeature();
    this.setStyle();
    this.addSource();
    this.addLayer();
    (_b = (_a = this.gySjmapObj.value) == null ? void 0 : _a.map) == null ? void 0 : _b.addLayer(this.layer);
    this.layerObj = (_d = (_c = this.gySjmapObj.value) == null ? void 0 : _c.map) == null ? void 0 : _d.getLayer(this.layer.id);
    this.finishDraw.value = true;
  }
  addWatchFun() {
    watch(this.mapFinish, (n) => {
      this.addLayerToMap();
    });
    this.addLayerWatch();
  }
  addLayerWatch() {
    watch(this.position, (n) => {
      this.setGeoPosition();
    });
  }
  setGeoPosition() {
    var _a, _b, _c;
    this.addFeature();
    this.addSource();
    (_c = (_b = (_a = this.gySjmapObj.value) == null ? void 0 : _a.map) == null ? void 0 : _b.getSource(this.layer.id)) == null ? void 0 : _c.setData(this.source.data);
  }
  setStyle() {
    this.layout = {};
    this.paint = {};
  }
  destory() {
    var _a, _b;
    (_b = (_a = this.gySjmapObj.value) == null ? void 0 : _a.map) == null ? void 0 : _b.removeLayer(this.layer.id);
    this.layer = null;
    this.isDraw = false;
  }
}
const layerProps$6 = {
  minZoom: {
    type: Number,
    default: 1
  },
  maxZoom: {
    type: Number,
    default: 20
  }
};
class CreateTextLayer$1 extends createOlLayer {
  constructor(id2, propsObj, symbolPlacement = "Point") {
    super(id2, "symbol", propsObj);
    __publicField(this, "text");
    __publicField(this, "symbolPlacement");
    this.text = computed(() => propsObj.text);
    this.symbolPlacement = symbolPlacement;
    this.draw();
  }
  addFeature() {
    let symbolPlacementArr = [
      "Point",
      "LineString",
      "Polygon"
    ];
    symbolPlacementArr.includes(this.symbolPlacement);
    this.feature = {
      type: "Feature",
      geometry: {
        type: this.symbolPlacement,
        coordinates: this.position.value
      },
      properties: {
        text: this.text.value
      }
    };
  }
  setStyle() {
    this.layout = {
      "text-font": ["Microsoft YaHei Regular"],
      "symbol-placement": this.symbolPlacement === "LineString" ? "line" : "point",
      "text-allow-overlap": true,
      "text-ignore-placement": true,
      ...this.propsObj.layout,
      "text-field": "{text}",
      "text-size": this.propsObj.textSize
    };
    this.paint = {
      "text-color": this.propsObj.textColor || "#f00",
      "text-opacity": this.propsObj.textOpacity || 1,
      "text-halo-color": this.propsObj.textHaloColor || "rgba(0, 0, 0, 1)",
      "text-halo-width": this.propsObj.textHaloWidth || 0,
      "text-halo-blur": this.propsObj.textHaloBlur || 0,
      "text-translate": this.propsObj.textTranslate || [0, 0],
      "text-translate-anchor": this.propsObj.textTranslateAnchor || "map"
    };
  }
}
const layerProps$5 = {
  position: {
    type: Array,
    default: () => []
  },
  text: {
    type: String,
    default: ""
  },
  textSize: {
    type: Number,
    default: 20
  },
  textColor: {
    type: String,
    default: "#ff0000"
  },
  textOpacity: {
    type: Number,
    default: 1
  },
  textHaloColor: {
    type: String,
    default: "rgba(0, 0, 0, 1)"
  },
  textHaloWidth: {
    type: Number,
    default: 0
  },
  textHaloBlur: {
    type: Number,
    default: 0
  },
  textTranslate: {
    type: Array,
    default: () => [0, 0]
  },
  textTranslateAnchor: {
    type: String,
    default: "map"
  },
  layout: {
    type: Object,
    default: () => ({})
  },
  ...layerProps$6
};
const _sfc_main$9 = defineComponent({
  name: "GySjmapText",
  props: {
    ...layerProps$5
  },
  setup(props) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    let layerObj = null;
    onMounted(() => {
      layerObj = new CreateTextLayer$1(mapId, props);
      watch(layerObj.finishDraw, () => {
        const runTask = proxy.$parent.runTask;
        if (runTask) {
          runTask(layerObj, props);
        }
      });
    });
    const destory = () => {
      layerObj.destory();
      layerObj = null;
    };
    onBeforeUnmount(() => {
      destory();
      const destoryTask = proxy.$parent.destory;
      if (destoryTask) {
        destoryTask();
      }
    });
    return {
      layerObj
    };
  }
});
function _sfc_render$9(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
const GySjmapText = /* @__PURE__ */ _export_sfc(_sfc_main$9, [["render", _sfc_render$9], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapText/src/GySjmapText.vue"]]);
class CreateTextLayer extends createOlLayer {
  constructor(id2, propsObj) {
    super(id2, "circle", propsObj);
    this.draw();
  }
  addFeature() {
    this.feature = {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: this.position.value
      }
    };
  }
  setStyle() {
    this.layout = {
      ...this.propsObj.layout
    };
    this.paint = {
      "circle-radius": this.propsObj.circleRadius,
      "circle-color": this.propsObj.circleColor,
      "circle-blur": this.propsObj.circleBlur,
      "circle-opacity": this.propsObj.circleOpacity,
      "circle-translate": this.propsObj.circleTranslate,
      "circle-translate-anchor": this.propsObj.circleTranslateAnchor,
      "circle-pitch-scale": this.propsObj.circlePitchScale,
      "circle-pitch-alignment": this.propsObj.circlePitchAlignment,
      "circle-stroke-width": this.propsObj.circleStrokeWidth,
      "circle-stroke-color": this.propsObj.circleStrokeColor,
      "circle-stroke-opacity": this.propsObj.circleStrokeOpacity
    };
  }
}
const layerProps$4 = {
  ...layerProps$6,
  position: {
    type: Array,
    default: () => []
  },
  circleRadius: {
    type: Number,
    default: 10
  },
  circleColor: {
    type: String,
    default: "#000"
  },
  circleBlur: {
    type: Number,
    default: 0
  },
  circleOpacity: {
    type: Number,
    default: 1
  },
  circleTranslate: {
    type: Array,
    default: () => [0, 0]
  },
  circleTranslateAnchor: {
    type: String,
    default: "map"
  },
  circlePitchScale: {
    type: String,
    default: "map"
  },
  circlePitchAlignment: {
    type: String,
    default: "map"
  },
  circleStrokeWidth: {
    type: Number,
    default: 0
  },
  circleStrokeColor: {
    type: String,
    default: "#000"
  },
  circleStrokeOpacity: {
    type: Number,
    default: 1
  },
  layout: {
    type: Object,
    default: () => ({})
  }
};
const _sfc_main$8 = defineComponent({
  name: "GySjmapCircle",
  props: {
    ...layerProps$4
  },
  setup(props) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    let layerObj = null;
    onMounted(() => {
      layerObj = new CreateTextLayer(mapId, props);
      watch(layerObj.finishDraw, () => {
        const runTask = proxy.$parent.runTask;
        if (runTask) {
          runTask(layerObj, props);
        }
      });
    });
    const destory = () => {
      layerObj.destory();
      layerObj = null;
    };
    onBeforeUnmount(() => {
      destory();
      const destoryTask = proxy.$parent.destory;
      if (destoryTask) {
        destoryTask();
      }
    });
  }
});
function _sfc_render$8(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
const GySjmapCircle = /* @__PURE__ */ _export_sfc(_sfc_main$8, [["render", _sfc_render$8], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapCircle/src/GySjmapCircle.vue"]]);
class CreateImageLayer extends createOlLayer {
  constructor(id2, propsObj) {
    super(id2, "symbol", propsObj);
    this.mediaSrc = propsObj.imgSrc;
    this.needLoad = true;
    this.draw();
  }
  addFeature() {
    this.feature = {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: this.position.value
      }
    };
  }
  setStyle() {
    this.layout = {
      ...this.propsObj.layout,
      "icon-image": this.mediaName,
      "icon-size": this.propsObj.iconSize,
      "icon-rotate": this.propsObj.iconRotate
    };
    this.paint = {
      "icon-opacity": this.propsObj.iconOpacity,
      "icon-color": this.propsObj.iconColor,
      "icon-halo-color": this.propsObj.iconHaloColor,
      "icon-halo-width": this.propsObj.iconHaloWidth,
      "icon-halo-blur": this.propsObj.iconHaloBlur,
      "icon-translate": this.propsObj.iconTranslate,
      "icon-translate-anchor": this.propsObj.iconTranslateAnchor
    };
  }
}
const layerProps$3 = {
  ...layerProps$6,
  position: {
    type: Array,
    default: () => []
  },
  imgSrc: {
    type: String,
    default: ""
  },
  iconOpacity: {
    type: Number,
    default: 1
  },
  iconColor: {
    type: String,
    default: "#000"
  },
  iconSize: {
    type: Number,
    default: 1
  },
  iconRotate: {
    type: Number,
    default: 0
  },
  iconHaloColor: {
    type: String,
    default: "#000"
  },
  iconHaloWidth: {
    type: Number,
    default: 0
  },
  iconHaloBlur: {
    type: Number,
    default: 0
  },
  iconTranslate: {
    type: Array,
    default: () => [0, 0]
  },
  iconTranslateAnchor: {
    type: String,
    default: "map"
  },
  layout: {
    type: Object,
    default: () => ({
      "icon-allow-overlap": true
    })
  }
};
const _sfc_main$7 = defineComponent({
  name: "GySjmapImage",
  props: {
    ...layerProps$3
  },
  setup(props) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    let layerObj = null;
    onMounted(() => {
      layerObj = new CreateImageLayer(mapId, props);
      watch(layerObj.finishDraw, () => {
        console.log(layerObj.finishDraw);
        const runTask = proxy.$parent.runTask;
        if (runTask) {
          runTask(layerObj, props);
        }
      });
    });
    const destory = () => {
      layerObj.destory();
      layerObj = null;
    };
    onBeforeUnmount(() => {
      destory();
      const destoryTask = proxy.$parent.destory;
      if (destoryTask) {
        destoryTask();
      }
    });
  }
});
function _sfc_render$7(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
const GySjmapImage = /* @__PURE__ */ _export_sfc(_sfc_main$7, [["render", _sfc_render$7], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapImage/src/GySjmapImage.vue"]]);
const _sfc_main$6 = defineComponent({
  name: "GySjmapHtml",
  props: {
    position: {
      type: Array,
      default: () => []
    },
    className: {
      type: String,
      default: ""
    }
  },
  setup(props) {
    const htmlDom = ref(null);
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    const gySjmapObj = gySjMap(mapId);
    const mapFinish = computed(() => gySjmapObj.value && gySjmapObj.value.mapFinish);
    let isDraw = false;
    watch(mapFinish, () => {
      drawDom();
    });
    let htmlMarker = null;
    const drawDom = () => {
      if (mapFinish.value && !isDraw) {
        isDraw = true;
        htmlMarker = new SGMap.Marker(htmlDom.value, { anchor: "bottom" }).setLngLat(props.position).addTo(gySjmapObj.value.map);
        htmlDom.value.style.display = "block";
        const runTask = proxy.$parent.runTask;
        if (runTask) {
          runTask(htmlMarker, props);
        }
      }
    };
    onMounted(() => {
      drawDom();
    });
    watch(() => props.position, (p) => {
      htmlMarker && htmlMarker.setLngLat(p);
    });
    onBeforeUnmount(() => {
      htmlMarker && htmlMarker.remove();
      const destoryTask = proxy.$parent.destory;
      if (destoryTask) {
        destoryTask();
      }
    });
    return {
      htmlDom,
      mapId,
      gySjmapObj,
      mapFinish
    };
  }
});
function _sfc_render$6(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", {
    class: normalizeClass("GymapHtml " + _ctx.className),
    ref: "htmlDom",
    style: { "display": "none" }
  }, [
    renderSlot(_ctx.$slots, "default")
  ], 2);
}
const GySjmapHtml = /* @__PURE__ */ _export_sfc(_sfc_main$6, [["render", _sfc_render$6], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapHtml/src/GySjmapHtml.vue"]]);
class CreateLineLayer$1 extends createOlLayer {
  constructor(id2, propsObj) {
    super(id2, "line", propsObj);
    __publicField(this, "positionList");
    __publicField(this, "text");
    this.positionList = computed(() => propsObj.positionList);
    this.text = computed(() => propsObj.text);
    if (this.propsObj.imgSrc) {
      this.mediaSrc = propsObj.imgSrc;
      this.needLoad = true;
      this.draw();
    }
    this.draw();
  }
  addFeature() {
    this.feature = {
      type: "Feature",
      geometry: {
        "type": "LineString",
        "coordinates": this.positionList.value
      },
      properties: {
        text: this.text.value
      }
    };
  }
  setStyle() {
    this.layout = {
      "line-cap": this.propsObj.lineCap,
      "line-join": this.propsObj.lineJoin,
      "line-miter-limit": this.propsObj.lineMiterLimit,
      "line-round-limit": this.propsObj.lineRoundLimit,
      "visibility": this.propsObj.visibility
    };
    let obj = {
      "line-opacity": this.propsObj.lineOpacity,
      "line-color": this.propsObj.lineColor,
      "line-width": this.propsObj.lineWidth,
      "line-translate": this.propsObj.lineTranslate,
      "line-translate-anchor": this.propsObj.lineTranslateAnchor,
      "line-gap-width": this.propsObj.lineGapWidth,
      "line-offset": this.propsObj.lineOffset,
      "line-blur": this.propsObj.lineBlur,
      "line-dasharray": this.propsObj.lineDasharray
    };
    if (this.propsObj.imgSrc) {
      obj["line-pattern"] = this.mediaName;
    }
    this.paint = obj;
  }
}
const layerProps$2 = {
  ...layerProps$6,
  positionList: {
    type: Array,
    default: () => []
  },
  lineCap: {
    type: String,
    default: "round"
  },
  lineJoin: {
    type: String,
    default: "miter"
  },
  lineMiterLimit: {
    type: Number,
    default: 2
  },
  lineRoundLimit: {
    type: Number,
    default: 1.05
  },
  visibility: {
    type: String,
    default: "visible"
  },
  lineOpacity: {
    type: Number,
    default: 1
  },
  lineColor: {
    type: String,
    default: "#000"
  },
  lineTranslate: {
    type: Array,
    default: () => [0, 0]
  },
  lineTranslateAnchor: {
    type: String,
    default: "map"
  },
  lineWidth: {
    type: Number,
    default: 5
  },
  lineGapWidth: {
    type: Number,
    default: 0
  },
  lineOffset: {
    type: Number,
    default: 0
  },
  lineBlur: {
    type: Number,
    default: 0
  },
  lineDasharray: {
    type: Array,
    default: () => []
  },
  imgSrc: {
    type: String,
    default: ""
  },
  lineGradient: {
    type: String,
    default: ""
  },
  text: {
    type: String,
    default: ""
  },
  layout: {
    type: Object,
    default: () => ({})
  },
  paint: {
    type: Object,
    default: () => ({})
  }
};
const _sfc_main$5 = defineComponent({
  name: "GySjmapLine",
  props: {
    ...layerProps$2
  },
  setup(props) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    let layerObj = null;
    onMounted(() => {
      layerObj = new CreateLineLayer$1(mapId, props);
      if (props.text) {
        new CreateTextLayer$1(mapId, {
          layout: props.layout,
          textSize: props.layout["text-size"] || 50,
          ...props.paint,
          text: props.text,
          position: props.positionList
        }, "LineString");
      }
      const runTask = proxy.$parent.runTask;
      if (runTask) {
        runTask(layerObj, props);
      }
    });
    const destory = () => {
      layerObj.destory();
      layerObj = null;
    };
    onBeforeUnmount(() => {
      destory();
      const destoryTask = proxy.$parent.destory;
      if (destoryTask) {
        destoryTask();
      }
    });
  }
});
function _sfc_render$5(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
const GySjmapLine = /* @__PURE__ */ _export_sfc(_sfc_main$5, [["render", _sfc_render$5], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapLine/src/GySjmapLine.vue"]]);
class CreateLineLayer extends createOlLayer {
  constructor(id2, propsObj) {
    super(id2, "fill", propsObj);
    __publicField(this, "positionList");
    __publicField(this, "text");
    this.positionList = computed(() => propsObj.positionList);
    this.text = computed(() => propsObj.text);
    if (this.propsObj.imgSrc) {
      this.mediaSrc = propsObj.imgSrc;
      this.needLoad = true;
      this.draw();
    }
    this.draw();
  }
  addFeature() {
    this.feature = {
      type: "Feature",
      geometry: {
        "type": "LineString",
        "coordinates": this.positionList.value
      },
      properties: {
        text: this.text.value
      }
    };
  }
  setStyle() {
    this.layout = {};
    let obj = {
      "fill-color": this.propsObj.fillColor,
      "fill-antialias": this.propsObj.fillAntialias,
      "fill-opacity": this.propsObj.fillOpacity,
      "fill-translate": this.propsObj.fillTranslate,
      "fill-translate-anchor": this.propsObj.fillTranslateAnchor
    };
    if (this.propsObj.imgSrc) {
      obj["fill-pattern"] = this.mediaName;
    }
    if (this.propsObj.fillOutlineColor) {
      obj["fill-outline-color"] = this.propsObj.fillOutlineColor;
    }
    this.paint = obj;
  }
}
const layerProps$1 = {
  ...layerProps$6,
  positionList: {
    type: Array,
    default: () => []
  },
  text: {
    type: String,
    default: ""
  },
  textType: {
    type: String,
    default: "Polygon"
  },
  fillColor: {
    type: String,
    default: "#f00"
  },
  fillAntialias: {
    type: Boolean,
    default: true
  },
  fillOpacity: {
    type: Number,
    default: 1
  },
  fillOutlineColor: {
    type: String,
    default: ""
  },
  fillTranslate: {
    type: Array,
    default: () => [0, 0]
  },
  fillTranslateAnchor: {
    type: String,
    default: "map"
  },
  imgSrc: {
    type: String,
    default: ""
  },
  layout: {
    type: Object,
    default: () => ({})
  },
  paint: {
    type: Object,
    default: () => ({
      textColor: "#000"
    })
  }
};
const _sfc_main$4 = defineComponent({
  name: "GySjmapPolygon",
  props: {
    ...layerProps$1
  },
  setup(props) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    let layerObj = null;
    onMounted(() => {
      layerObj = new CreateLineLayer(mapId, props);
      if (props.text) {
        new CreateTextLayer$1(mapId, {
          layout: props.layout,
          textSize: props.layout["text-size"] || 20,
          ...props.paint,
          text: props.text,
          position: props.textType === "Polygon" ? [props.positionList] : props.positionList
        }, props.textType);
      }
      const runTask = proxy.$parent.runTask;
      if (runTask) {
        runTask(layerObj, props);
      }
    });
    const destory = () => {
      layerObj.destory();
      layerObj = null;
    };
    onBeforeUnmount(() => {
      destory();
      const destoryTask = proxy.$parent.destory;
      if (destoryTask) {
        destoryTask();
      }
    });
  }
});
function _sfc_render$4(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
const GySjmapPolygon = /* @__PURE__ */ _export_sfc(_sfc_main$4, [["render", _sfc_render$4], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapPolygon/src/GySjmapPolygon.vue"]]);
const _sfc_main$3 = defineComponent({
  name: "GySjmapTask",
  props: {
    positionList: {
      type: Array,
      default: () => []
    },
    loop: {
      type: Boolean,
      default: false
    },
    step: {
      type: Number,
      default: 1e-3
    },
    taskStatus: {
      type: String,
      default: "play"
    },
    delay: {
      type: Number,
      default: 3e3
    }
  },
  emits: ["animate"],
  setup(props, { emit }) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    let canPlay = true;
    let noComponents = false;
    let childrenWatch = null;
    let layer = null;
    let timer = void 0;
    const runTask = (childLayerObj, childProps) => {
      if (!canPlay) {
        return;
      }
      if (!noComponents) {
        if (!childrenWatch) {
          childrenWatch = watch(() => childProps.position, () => {
            animIndex = 0;
            destory();
          });
        }
        layer = childLayerObj;
      }
      if (props.taskStatus === "play") {
        startTask();
      }
      if (props.delay !== 0) {
        timer = setTimeout(() => {
          startTask();
        }, props.delay);
      }
    };
    watch(() => props.taskStatus, (n) => {
      if (n === "play") {
        startTask();
      } else if (n === "stop") {
        animIndex = 0;
        stopTask();
      } else if (n === "pause") {
        stopTask();
      }
    });
    const getAllLonlat = (positions) => {
      let linestring = TURF.lineString(positions);
      let step = Math.min(props.step, 0.5);
      let chunk = TURF.lineChunk(linestring, step, {
        units: "kilometers"
      });
      let positionsList = chunk.features.map((v) => {
        return v.geometry.coordinates[0];
      });
      positionsList.push(chunk.features.slice(-1)[0].geometry.coordinates[0]);
      return positionsList;
    };
    let lineGeometry = null;
    const startTask = () => {
      if (timer) {
        clearTimeout(timer);
        timer = null;
      }
      if (noComponents ? false : !layer) {
        return;
      }
      if (aId) {
        return;
      }
      if (!lineGeometry) {
        lineGeometry = getAllLonlat(props.positionList);
      }
      animate();
    };
    let animIndex = 0;
    let aId = null;
    const animate = () => {
      let coordinate = lineGeometry[animIndex];
      if (!noComponents) {
        if (layer instanceof SGMap.Marker) {
          layer && layer.setLngLat(coordinate);
        } else {
          layer.nextPosition.value = coordinate;
        }
      }
      emit("animate", coordinate, animIndex);
      if (animIndex >= lineGeometry.length - 1) {
        stopTask();
        if (props.loop) {
          animIndex = 0;
          animate();
        }
        return;
      }
      props.step;
      animIndex++;
      aId = window.requestAnimationFrame(animate);
    };
    const stopTask = () => {
      childrenWatch && childrenWatch();
      aId && window.cancelAnimationFrame(aId);
      aId = null;
    };
    const destory = () => {
      if (timer) {
        clearTimeout(timer);
        timer = null;
      }
      stopTask();
    };
    onBeforeMount(() => {
      let defaultStr = proxy.$slots.default;
      if (defaultStr) {
        let children = proxy.$slots.default();
        let len = 0;
        for (let i2 = 0; i2 < children.length; i2++) {
          let child = children[i2];
          if (typeof child.type !== "symbol") {
            len++;
            if (len > 1) {
              canPlay = false;
              console.error("GymapTask\u7EC4\u4EF6\u4E2D\u53EA\u5141\u8BB8\u5B58\u5728\u4E00\u4E2A\u9700\u8981\u6267\u884C\u52A8\u753B\u7684\u7EC4\u4EF6\u3002");
              break;
            }
          }
        }
      } else if (!defaultStr) {
        noComponents = true;
        runTask();
      }
    });
    onMounted(() => {
      if (noComponents) {
        runTask();
      }
    });
    return {
      id: mapId,
      runTask,
      destory
    };
  }
});
function _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, [
    renderSlot(_ctx.$slots, "default")
  ]);
}
const GySjmapTask = /* @__PURE__ */ _export_sfc(_sfc_main$3, [["render", _sfc_render$3], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapTask/src/GySjmapTask.vue"]]);
const _sfc_main$2 = defineComponent({
  name: "GySjmapDraw",
  props: {
    oldDataList: {
      type: Array,
      default: () => []
    },
    drawTypeList: {
      type: Array,
      default: () => {
        return [
          "Point",
          "Line",
          "Circle",
          "Rect",
          "Polygon"
        ];
      }
    },
    drawTypeCnameList: {
      type: Array,
      default: () => {
        return [
          "\u70B9",
          "\u7EBF",
          "\u5706",
          "\u77E9\u5F62",
          "\u591A\u8FB9\u5F62"
        ];
      }
    },
    btnBackground: {
      type: String,
      default: "rgb(102, 102, 102)"
    },
    btnColor: {
      type: String,
      default: "#fff"
    },
    btnActiveBackground: {
      type: String,
      default: "rgb(142, 142, 142)"
    },
    btnActiveColor: {
      type: String,
      default: "#fff"
    }
  },
  emits: ["drawFinish"],
  setup(props, { emit }) {
    const drawCon = ref(null);
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    const gySjmapObj = gySjMap(mapId);
    const mapFinish = computed(() => gySjmapObj.value && gySjmapObj.value.mapFinish);
    let drawObj = ref(null);
    const drawType = ref("Point");
    const status = ref("");
    const drawListObj = reactive({
      Point: null,
      LineString: null,
      Circle: null,
      Polygon: null
    });
    let pluginObj = {
      "Point": "DrawPointHandler",
      "Line": "DrawPolylineHandler",
      "Circle": "DrawCircleHandler",
      "Rect": "DrawRectangleHandler",
      "Polygon": "DrawPolygonHandler"
    };
    const drawStatus = ref("");
    const addDrawPlugin = (typeStr) => {
      return new Promise((resolve) => {
        let type = pluginObj[typeStr || drawType.value];
        SGMap.plugin([`SGMap.${type}`]).then((data2) => {
          resolve(typeStr);
        });
      });
    };
    const startDraw = async () => {
      gySjmapObj.value.map.doubleClickZoom.disable();
      if (status.value === "start") {
        return;
      }
      status.value = "start";
      if (drawListObj[drawType.value]) {
        drawObj.value = drawListObj[drawType.value];
      } else {
        await addDrawPlugin();
        let type = pluginObj[drawType.value];
        drawObj.value = new SGMap[type]({
          drawColor: "rgb(0, 153, 255)",
          editColor: "rgb(255, 204, 51)",
          map: gySjmapObj.value.map,
          enableEdit: true,
          featuresList: []
        });
        drawListObj[drawType.value] = drawObj.value;
        addDrawEvent();
      }
      drawObj.value.startDraw();
    };
    const addDrawEvent = () => {
      let drawTypeObj = {
        "Point": "point",
        "Line": "polyline",
        "Circle": "circle",
        "Rect": "rectangle",
        "Polygon": "polygon"
      };
      let type = drawTypeObj[drawType.value];
      {
        drawObj.value.on(`draw.${type}.start`, function(data2) {
          drawStatus.value = "drawStart";
        });
        drawObj.value.on(`edit.${type}.start`, function(data2) {
          drawStatus.value = "drawEdit";
        });
        drawObj.value.on(`edit.${type}.end`, function(data2) {
          drawStatus.value = "editEnd";
        });
        drawObj.value.on(`draw.${type}.end`, function(data2) {
          drawStatus.value = "editEnd";
        });
      }
    };
    const goOnstartDraw = () => {
      drawObj.value.exitEdit();
      drawStatus.value = "drawStart";
      drawObj.value.startDraw();
    };
    const deleteDraw = () => {
      if (status.value === "start") {
        endDraw();
      }
      status.value = "delete";
    };
    const changeDrawType = (type) => {
      if (drawStatus.value === "drawStart") {
        return;
      }
      drawType.value = type;
      if (status.value !== "end") {
        endDraw();
        startDraw();
      }
    };
    const endDraw = (finish) => {
      if (status.value !== "end") {
        drawStatus.value = "drawStart";
        status.value = "end";
        drawObj.value.endDraw();
        finish && submitData();
      }
    };
    const submitData = () => {
      if (drawStatus.value === "drawStart") {
        return;
      }
      let data2 = [];
      let keys = Object.keys(drawListObj);
      keys.forEach((v) => {
        if (drawListObj[v]) {
          let features = drawListObj[v].getFeatures();
          features.forEach((val) => {
            let coordinates = val.geometry.coordinates;
            switch (v) {
              case "Circle":
                coordinates = val.properties.centerPoint;
                break;
              case "Point":
                coordinates = coordinates;
                break;
              case "Polygon":
                coordinates = coordinates[0];
                break;
            }
            let obj = {
              type: v,
              coordinates
            };
            if (v === "Circle") {
              let radius = val.properties.radius;
              obj.radius = radius;
              obj.geometry = val.geometry;
            }
            data2.push(obj);
          });
        }
      });
      emit("drawFinish", data2);
    };
    const destory = () => {
    };
    let isInitData = false;
    const initOldData = () => {
      if (mapFinish.value && !isInitData) {
        let oldDataList = props.oldDataList;
        if (oldDataList.length === 0) {
          return;
        }
        isInitData = true;
        let typeArr = [...new Set(oldDataList.map((v) => {
          return v.type;
        }))];
        let typePluginArr = typeArr.map((v) => {
          return "SGMap." + pluginObj[v];
        });
        SGMap.plugin(typePluginArr).then(() => {
          typeArr.forEach((type) => {
            if (props.drawTypeList.includes(type)) {
              let pointArr = oldDataList.filter((v) => v.type === type);
              let featuresList = [];
              pointArr.forEach((v, i2) => {
                let obj = {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: v.coordinates
                  },
                  properties: {
                    id: `drawPointId_${type}_${i2}`
                  }
                };
                switch (type) {
                  case "Line":
                    obj.geometry.type = "LineString";
                    break;
                  case "Circle":
                    if (v.geometry) {
                      obj.geometry = v.geometry;
                      obj.properties.centerPoint = v.coordinates;
                      obj.properties.radius = v.radius;
                    }
                    break;
                  case "Polygon":
                    let coor = [v.coordinates];
                    obj.geometry = {
                      type: "Polygon",
                      coordinates: coor
                    };
                    break;
                  case "Rect":
                    let coor1 = [v.coordinates];
                    obj.geometry = {
                      type: "Polygon",
                      coordinates: coor1
                    };
                    break;
                }
                if (obj) {
                  featuresList.push(obj);
                }
              });
              let pluginType = pluginObj[type];
              drawListObj[type] = new SGMap[pluginType]({
                drawColor: "rgb(0, 153, 255)",
                editColor: "rgb(255, 204, 51)",
                map: gySjmapObj.value.map,
                enableEdit: true,
                featuresList
              });
            } else {
              console.error(type + " \u7C7B\u578B\u4E0D\u6B63\u786E");
            }
          });
        });
      }
    };
    watch(() => props.oldDataList, () => {
      initOldData();
    });
    watch(mapFinish, () => {
      initOldData();
    });
    onMounted(() => {
      initOldData();
      drawCon.value.style.setProperty("--btnBackground", props.btnBackground);
      drawCon.value.style.setProperty("--btnColor", props.btnColor);
      drawCon.value.style.setProperty("--deleteActiveBackground", props.deleteActiveBackground);
      drawCon.value.style.setProperty("--deleteActiveColor", props.deleteActiveColor);
      drawCon.value.style.setProperty("--btnActiveBackground", props.btnActiveBackground);
      drawCon.value.style.setProperty("--btnActiveColor", props.btnActiveColor);
    });
    onBeforeUnmount(() => {
    });
    return {
      drawListObj,
      drawStatus,
      drawCon,
      drawType,
      status,
      gySjmapObj,
      mapFinish,
      startDraw,
      goOnstartDraw,
      deleteDraw,
      changeDrawType,
      endDraw,
      submitData,
      destory
    };
  }
});
const GySjmapDraw_vue_vue_type_style_index_0_scoped_39b18afa_lang = "";
const _hoisted_1 = {
  class: "draw-btns-list",
  ref: "drawCon"
};
const _hoisted_2 = { class: "draw-type draw-btn draw-type-select" };
const _hoisted_3 = { class: "draw-type-select-con" };
const _hoisted_4 = ["onClick"];
function _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {
  return withDirectives((openBlock(), createElementBlock("div", _hoisted_1, [
    withDirectives(createElementVNode("div", {
      class: "draw-start draw-btn",
      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.startDraw && _ctx.startDraw(...args))
    }, "\u5F00\u59CB\u7ED8\u5236", 512), [
      [vShow, !_ctx.status || _ctx.status === "end"]
    ]),
    withDirectives(createElementVNode("div", _hoisted_2, [
      createTextVNode(" \u7ED8\u5236\u7C7B\u578B "),
      createElementVNode("div", _hoisted_3, [
        (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.drawTypeList, (item, index2) => {
          return openBlock(), createElementBlock("div", {
            key: "type" + index2,
            class: normalizeClass(["draw-type-option", { "active": _ctx.drawType === item }]),
            onClick: ($event) => _ctx.changeDrawType(item)
          }, toDisplayString(_ctx.drawTypeCnameList[index2] || "\u5F85\u5B9A"), 11, _hoisted_4);
        }), 128))
      ])
    ], 512), [
      [vShow, _ctx.status && _ctx.status !== "end"]
    ]),
    withDirectives(createElementVNode("div", {
      class: "draw-end draw-btn",
      onClick: _cache[1] || (_cache[1] = (...args) => _ctx.goOnstartDraw && _ctx.goOnstartDraw(...args))
    }, " \u7EE7\u7EED\u6DFB\u52A0 ", 512), [
      [vShow, _ctx.drawStatus && _ctx.drawStatus !== "drawStart"]
    ]),
    withDirectives(createElementVNode("div", {
      class: "draw-end draw-btn",
      onClick: _cache[2] || (_cache[2] = ($event) => _ctx.endDraw(true))
    }, "\u7ED8\u5236\u5B8C\u6210", 512), [
      [vShow, _ctx.status && _ctx.status !== "end"]
    ])
  ], 512)), [
    [vShow, _ctx.mapFinish]
  ]);
}
const GySjmapDraw = /* @__PURE__ */ _export_sfc(_sfc_main$2, [["render", _sfc_render$2], ["__scopeId", "data-v-39b18afa"], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapDraw/src/GySjmapDraw.vue"]]);
class CreateHeatLayer extends createOlLayer {
  constructor(id2, propsObj) {
    super(id2, "heatmap", propsObj);
    __publicField(this, "heatData");
    this.heatData = computed(() => propsObj.heatData);
    this.draw();
  }
  addSource() {
    this.source = {
      type: "geojson",
      data: {
        type: "FeatureCollection",
        features: this.feature
      }
    };
  }
  addFeature() {
    let feature = [];
    this.heatData.value.forEach((d) => {
      if (d.length === 3) {
        feature.push({
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [d[0], d[1]]
          },
          properties: {
            value: d[2]
          }
        });
      }
    });
    this.feature = feature;
  }
  setStyle() {
    this.layout = {};
    this.paint = {
      "heatmap-weight": this.propsObj.heatmapWeight,
      "heatmap-intensity": this.propsObj.heatmapIntensity,
      "heatmap-color": this.propsObj.heatmapColor,
      "heatmap-radius": this.propsObj.heatmapRadius,
      "heatmap-opacity": this.propsObj.heatmapOpacity
    };
  }
  addLayerWatch() {
    watch(this.heatData, () => {
      this.setGeoPosition();
    });
  }
}
const layerProps = {
  heatData: {
    type: Array,
    default: () => []
  },
  heatmapColor: {
    type: Array,
    default: () => {
      return [
        "interpolate",
        ["linear"],
        ["heatmap-density"],
        0,
        "rgba(255, 0, 0, 0)",
        0.1,
        "rgba(0, 30, 255, .6)",
        0.2,
        "rgba(7, 208, 255, .6)",
        0.3,
        "#2cc946",
        0.4,
        "#d5fb0c",
        0.8,
        "#e04e4e",
        1,
        "#f33900"
      ];
    }
  },
  heatmapWeight: {
    type: [Number, Array],
    default: () => {
      return [
        "interpolate",
        ["linear"],
        ["get", "value"],
        0,
        0,
        10,
        8
      ];
    }
  },
  heatmapIntensity: {
    type: [Number, Array],
    default: 1
  },
  heatmapRadius: {
    type: [Number, Array],
    default: 100
  },
  heatmapOpacity: {
    type: [Number, Array],
    default: 1
  },
  ...layerProps$6
};
const _sfc_main$1 = defineComponent({
  name: "GySjmapHeat",
  props: {
    ...layerProps
  },
  setup(props) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    let layerObj = null;
    onMounted(() => {
      layerObj = new CreateHeatLayer(mapId, props);
    });
    const destory = () => {
      layerObj.destory();
      layerObj = null;
    };
    onBeforeUnmount(() => {
      destory();
    });
    return {
      layerObj
    };
  }
});
function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
  return null;
}
const GySjmapHeat = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["render", _sfc_render$1], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapHeat/src/GySjmapHeat.vue"]]);
const _sfc_main = defineComponent({
  name: "GySjmapLonlat",
  props: {
    showCon: {
      type: Boolean,
      default: true
    },
    className: {
      type: String,
      default: ""
    }
  },
  emits: ["getLonlat"],
  setup(props, { emit }) {
    const { proxy } = getCurrentInstance();
    const mapId = proxy.$parent.id;
    const gySjmapObj = gySjMap(mapId);
    const mapFinish = computed(() => gySjmapObj.value && gySjmapObj.value.mapFinish);
    let isOn = false;
    const lonlat = ref("");
    const getLonLat = (e) => {
      lonlat.value = `${e.lngLat.lng},${e.lngLat.lat}`;
      emit("getLonlat", lonlat.value);
    };
    const addEvent = () => {
      if (mapFinish.value && !isOn) {
        gySjmapObj.value.map.on("click", getLonLat);
      }
    };
    watch(mapFinish, () => {
      addEvent();
    });
    onMounted(() => {
      addEvent();
    });
    const destory = () => {
      gySjmapObj.value.map && gySjmapObj.value.map.off("click", getLonLat);
    };
    onBeforeUnmount(() => {
      destory();
    });
    return {
      className: props.className,
      lonlat
    };
  }
});
const GySjmapLonlat_vue_vue_type_style_index_0_scoped_62b6ba7e_lang = "";
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", {
    class: normalizeClass(["GySjmapLonlat-con", _ctx.className])
  }, toDisplayString(_ctx.lonlat), 3);
}
const GySjmapLonlat = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render], ["__scopeId", "data-v-62b6ba7e"], ["__file", "D:/gy-map-ts/packages/gy-sjmap/components/GySjmapLonlat/src/GySjmapLonlat.vue"]]);
const components = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  GySjmap,
  GySjmapText,
  GySjmapCircle,
  GySjmapImage,
  GySjmapHtml,
  GySjmapLine,
  GySjmapPolygon,
  GySjmapTask,
  GySjmapDraw,
  GySjmapHeat,
  GySjmapLonlat
}, Symbol.toStringTag, { value: "Module" }));
(function(global2, factory) {
  typeof exports === "object" && typeof module !== "undefined" ? module.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (global2 = global2 || self, global2.SGMap = factory());
})(globalThis, function() {
  var shared, worker, sgmap;
  function define2(_2, chunk) {
    if (!shared) {
      shared = chunk;
    } else if (!worker) {
      worker = chunk;
    } else {
      var workerBundleString = "var sharedChunk = {}; (" + shared + ")(sharedChunk); (" + worker + ")(sharedChunk);";
      var sharedChunk = {};
      shared(sharedChunk);
      sgmap = chunk(sharedChunk);
      sgmap.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], { type: "text/javascript" }));
    }
  }
  define2(["exports"], function(t) {
    function e(t2, e2) {
      return t2(e2 = { exports: {} }, e2.exports), e2.exports;
    }
    var r = n;
    function n(t2, e2, r2, n2) {
      this.cx = 3 * t2, this.bx = 3 * (r2 - t2) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e2, this.by = 3 * (n2 - e2) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t2, this.p1y = n2, this.p2x = r2, this.p2y = n2;
    }
    n.prototype.sampleCurveX = function(t2) {
      return ((this.ax * t2 + this.bx) * t2 + this.cx) * t2;
    }, n.prototype.sampleCurveY = function(t2) {
      return ((this.ay * t2 + this.by) * t2 + this.cy) * t2;
    }, n.prototype.sampleCurveDerivativeX = function(t2) {
      return (3 * this.ax * t2 + 2 * this.bx) * t2 + this.cx;
    }, n.prototype.solveCurveX = function(t2, e2) {
      var r2, n2, i3, a2, o2;
      for (void 0 === e2 && (e2 = 1e-6), i3 = t2, o2 = 0; o2 < 8; o2++) {
        if (a2 = this.sampleCurveX(i3) - t2, Math.abs(a2) < e2)
          return i3;
        var s2 = this.sampleCurveDerivativeX(i3);
        if (Math.abs(s2) < 1e-6)
          break;
        i3 -= a2 / s2;
      }
      if ((i3 = t2) < (r2 = 0))
        return r2;
      if (i3 > (n2 = 1))
        return n2;
      for (; r2 < n2; ) {
        if (a2 = this.sampleCurveX(i3), Math.abs(a2 - t2) < e2)
          return i3;
        t2 > a2 ? r2 = i3 : n2 = i3, i3 = 0.5 * (n2 - r2) + r2;
      }
      return i3;
    }, n.prototype.solve = function(t2, e2) {
      return this.sampleCurveY(this.solveCurveX(t2, e2));
    };
    var i2 = a;
    function a(t2, e2) {
      this.x = t2, this.y = e2;
    }
    function o(t2, e2, n2, i3) {
      var a2 = new r(t2, e2, n2, i3);
      return function(t3) {
        return a2.solve(t3);
      };
    }
    a.prototype = { clone: function() {
      return new a(this.x, this.y);
    }, add: function(t2) {
      return this.clone()._add(t2);
    }, sub: function(t2) {
      return this.clone()._sub(t2);
    }, multByPoint: function(t2) {
      return this.clone()._multByPoint(t2);
    }, divByPoint: function(t2) {
      return this.clone()._divByPoint(t2);
    }, mult: function(t2) {
      return this.clone()._mult(t2);
    }, div: function(t2) {
      return this.clone()._div(t2);
    }, rotate: function(t2) {
      return this.clone()._rotate(t2);
    }, rotateAround: function(t2, e2) {
      return this.clone()._rotateAround(t2, e2);
    }, matMult: function(t2) {
      return this.clone()._matMult(t2);
    }, unit: function() {
      return this.clone()._unit();
    }, perp: function() {
      return this.clone()._perp();
    }, round: function() {
      return this.clone()._round();
    }, mag: function() {
      return Math.sqrt(this.x * this.x + this.y * this.y);
    }, equals: function(t2) {
      return this.x === t2.x && this.y === t2.y;
    }, dist: function(t2) {
      return Math.sqrt(this.distSqr(t2));
    }, distSqr: function(t2) {
      var e2 = t2.x - this.x, r2 = t2.y - this.y;
      return e2 * e2 + r2 * r2;
    }, angle: function() {
      return Math.atan2(this.y, this.x);
    }, angleTo: function(t2) {
      return Math.atan2(this.y - t2.y, this.x - t2.x);
    }, angleWith: function(t2) {
      return this.angleWithSep(t2.x, t2.y);
    }, angleWithSep: function(t2, e2) {
      return Math.atan2(this.x * e2 - this.y * t2, this.x * t2 + this.y * e2);
    }, _matMult: function(t2) {
      var e2 = t2[2] * this.x + t2[3] * this.y;
      return this.x = t2[0] * this.x + t2[1] * this.y, this.y = e2, this;
    }, _add: function(t2) {
      return this.x += t2.x, this.y += t2.y, this;
    }, _sub: function(t2) {
      return this.x -= t2.x, this.y -= t2.y, this;
    }, _mult: function(t2) {
      return this.x *= t2, this.y *= t2, this;
    }, _div: function(t2) {
      return this.x /= t2, this.y /= t2, this;
    }, _multByPoint: function(t2) {
      return this.x *= t2.x, this.y *= t2.y, this;
    }, _divByPoint: function(t2) {
      return this.x /= t2.x, this.y /= t2.y, this;
    }, _unit: function() {
      return this._div(this.mag()), this;
    }, _perp: function() {
      var t2 = this.y;
      return this.y = this.x, this.x = -t2, this;
    }, _rotate: function(t2) {
      var e2 = Math.cos(t2), r2 = Math.sin(t2), n2 = r2 * this.x + e2 * this.y;
      return this.x = e2 * this.x - r2 * this.y, this.y = n2, this;
    }, _rotateAround: function(t2, e2) {
      var r2 = Math.cos(t2), n2 = Math.sin(t2), i3 = e2.y + n2 * (this.x - e2.x) + r2 * (this.y - e2.y);
      return this.x = e2.x + r2 * (this.x - e2.x) - n2 * (this.y - e2.y), this.y = i3, this;
    }, _round: function() {
      return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
    } }, a.convert = function(t2) {
      return t2 instanceof a ? t2 : Array.isArray(t2) ? new a(t2[0], t2[1]) : t2;
    };
    var s = o(0.25, 0.1, 0.25, 1);
    function u(t2, e2, r2) {
      return Math.min(r2, Math.max(e2, t2));
    }
    function l(t2, e2, r2) {
      var n2 = r2 - e2, i3 = ((t2 - e2) % n2 + n2) % n2 + e2;
      return i3 === e2 ? r2 : i3;
    }
    function p(t2, e2, r2) {
      if (!t2.length)
        return r2(null, []);
      var n2 = t2.length, i3 = new Array(t2.length), a2 = null;
      t2.forEach(function(t3, o2) {
        e2(t3, function(t4, e3) {
          t4 && (a2 = t4), i3[o2] = e3, 0 == --n2 && r2(a2, i3);
        });
      });
    }
    function h(t2) {
      var e2 = [];
      for (var r2 in t2)
        e2.push(t2[r2]);
      return e2;
    }
    function c(t2) {
      for (var e2 = [], r2 = arguments.length - 1; r2-- > 0; )
        e2[r2] = arguments[r2 + 1];
      for (var n2 = 0, i3 = e2; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2];
        for (var o2 in a2)
          t2[o2] = a2[o2];
      }
      return t2;
    }
    var f = 1;
    function y() {
      return f++;
    }
    function d() {
      return function t2(e2) {
        return e2 ? (e2 ^ 16 * Math.random() >> e2 / 4).toString(16) : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, t2);
      }();
    }
    function m(t2) {
      return !!t2 && /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t2);
    }
    function v(t2, e2) {
      t2.forEach(function(t3) {
        e2[t3] && (e2[t3] = e2[t3].bind(e2));
      });
    }
    function g(t2, e2) {
      return -1 !== t2.indexOf(e2, t2.length - e2.length);
    }
    function x(t2, e2, r2) {
      var n2 = {};
      for (var i3 in t2)
        n2[i3] = e2.call(r2 || this, t2[i3], i3, t2);
      return n2;
    }
    function b(t2, e2, r2) {
      var n2 = {};
      for (var i3 in t2)
        e2.call(r2 || this, t2[i3], i3, t2) && (n2[i3] = t2[i3]);
      return n2;
    }
    function w(t2) {
      return Array.isArray(t2) ? t2.map(w) : "object" == typeof t2 && t2 ? x(t2, w) : t2;
    }
    var A = {};
    function S(t2) {
      A[t2] || ("undefined" != typeof console && console.warn(t2), A[t2] = true);
    }
    function z(t2, e2, r2) {
      return (r2.y - t2.y) * (e2.x - t2.x) > (e2.y - t2.y) * (r2.x - t2.x);
    }
    function I(t2) {
      for (var e2 = 0, r2 = 0, n2 = t2.length, i3 = n2 - 1, a2 = void 0, o2 = void 0; r2 < n2; i3 = r2++)
        e2 += ((o2 = t2[i3]).x - (a2 = t2[r2]).x) * (a2.y + o2.y);
      return e2;
    }
    function k() {
      return "undefined" != typeof WorkerGlobalScope && "undefined" != typeof self && self instanceof WorkerGlobalScope;
    }
    function M(t2) {
      var e2 = {};
      if (t2.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g, function(t3, r3, n2, i3) {
        var a2 = n2 || i3;
        return e2[r3] = !a2 || a2.toLowerCase(), "";
      }), e2["max-age"]) {
        var r2 = parseInt(e2["max-age"], 10);
        isNaN(r2) ? delete e2["max-age"] : e2["max-age"] = r2;
      }
      return e2;
    }
    var P = null;
    function V(t2) {
      if (null == P) {
        var e2 = t2.navigator ? t2.navigator.userAgent : null;
        P = !!t2.safari || !(!e2 || !(/\b(iPad|iPhone|iPod)\b/.test(e2) || e2.match("Safari") && !e2.match("Chrome")));
      }
      return P;
    }
    function C(t2) {
      try {
        var e2 = self[t2];
        return e2.setItem("_sgmap_test_", 1), e2.removeItem("_sgmap_test_"), true;
      } catch (t3) {
        return false;
      }
    }
    function T() {
      var t2 = navigator.userAgent;
      return t2.indexOf("Trident") > -1 && t2.indexOf("rv:11.0") > -1;
    }
    function E(t2, e2, r2, n2) {
      if (!n2 || !e2 || null == r2 || null == r2)
        return t2 || {};
      var i3 = t2.styleid, a2 = t2.shieldType, o2 = 0;
      if (!i3 && !a2)
        return t2 || {};
      if (!e2[i3] && !e2["40001:" + a2])
        return null;
      var s2 = r2 + 1;
      if (s2 = s2 <= 3 ? 3 : s2 >= 20 ? 20 : s2, i3 && e2[i3])
        for (var u2 = Object.keys(e2[i3]), l2 = 0; l2 < u2.length; l2++) {
          var p2 = u2[l2];
          if ("type" != p2 && ((p2 = p2.split(",")).indexOf(s2) >= 0 || p2.indexOf(String(s2)) >= 0)) {
            o2 = 1, t2 = c(t2, e2[i3][u2[l2]]);
            break;
          }
        }
      if (a2 && e2["40001:" + a2])
        for (var h2 = Object.keys(e2["40001:" + a2]), f2 = 0; f2 < h2.length; f2++) {
          var y2 = h2[f2];
          if ("type" != y2 && ((y2 = y2.split(",")).indexOf(s2) >= 0 || y2.indexOf(String(s2)) >= 0)) {
            o2 = 1, t2 = c(t2, e2["40001:" + a2][h2[f2]]);
            break;
          }
        }
      return 0 == o2 ? null : t2;
    }
    var B, D, L, F, R = self.performance && self.performance.now ? self.performance.now.bind(self.performance) : Date.now.bind(Date), O = self.requestAnimationFrame || self.mozRequestAnimationFrame || self.webkitRequestAnimationFrame || self.msRequestAnimationFrame, j = self.cancelAnimationFrame || self.mozCancelAnimationFrame || self.webkitCancelAnimationFrame || self.msCancelAnimationFrame, U = { now: R, frame: function(t2) {
      var e2 = O(t2);
      return { cancel: function() {
        return j(e2);
      } };
    }, getImageData: function(t2, e2) {
      void 0 === e2 && (e2 = 0);
      var r2 = self.document.createElement("canvas"), n2 = r2.getContext("2d");
      if (!n2)
        throw new Error("failed to create canvas 2d context");
      return r2.width = t2.width, r2.height = t2.height, n2.drawImage(t2, 0, 0, t2.width, t2.height), n2.getImageData(-e2, -e2, t2.width + 2 * e2, t2.height + 2 * e2);
    }, resolveURL: function(t2) {
      return B || (B = self.document.createElement("a")), B.href = t2, B.href;
    }, hardwareConcurrency: self.navigator.hardwareConcurrency || 4, get devicePixelRatio() {
      return self.devicePixelRatio;
    }, get prefersReducedMotion() {
      return !!self.matchMedia && (null == D && (D = self.matchMedia("(prefers-reduced-motion: reduce)")), D.matches);
    } }, q = { API_URL: "", EVENTS_URL: "", FEEDBACK_URL: "", REQUIRE_ACCESS_TOKEN: true, ACCESS_TOKEN: null, MAX_PARALLEL_IMAGE_REQUESTS: 16, version: "2.1.0.20", LOG_PLUGIN: false }, N = { supported: false, testSupport: function(t2) {
      !Z && F && (G ? Y(t2) : L = t2);
    } }, Z = false, G = false;
    function Y(t2) {
      var e2 = t2.createTexture();
      t2.bindTexture(t2.TEXTURE_2D, e2);
      try {
        if (t2.texImage2D(t2.TEXTURE_2D, 0, t2.RGBA, t2.RGBA, t2.UNSIGNED_BYTE, F), t2.isContextLost())
          return;
        N.supported = true;
      } catch (t3) {
      }
      t2.deleteTexture(e2), Z = true;
    }
    self.document && ((F = self.document.createElement("img")).onload = function() {
      L && Y(L), L = null, G = true;
    }, F.onerror = function() {
      Z = true, L = null;
    }, F.src = "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");
    var X = "01", K = function(t2, e2) {
      this._transformRequestFn = t2, this._customAccessToken = e2, this._createSkuToken();
    };
    function J(t2) {
      return 0 === t2.indexOf("aegis:") || /aegis\./;
    }
    K.prototype._createSkuToken = function() {
      var t2 = function() {
        for (var t3 = "", e2 = 0; e2 < 10; e2++)
          t3 += "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62 * Math.random())];
        return { token: ["1", X, t3].join(""), tokenExpiresAt: Date.now() + 432e5 };
      }();
      this._skuToken = t2.token, this._skuTokenExpiresAt = t2.tokenExpiresAt;
    }, K.prototype._isSkuTokenExpired = function() {
      return Date.now() > this._skuTokenExpiresAt;
    }, K.prototype.transformRequest = function(t2, e2) {
      return this._transformRequestFn && this._transformRequestFn(t2, e2) || { url: t2 };
    }, K.prototype.normalizeStyleURL = function(t2, e2) {
      if (!J(t2))
        return t2;
      var r2 = $(t2);
      return r2.path = "/styles/v1" + r2.path, this._makeAPIURL(r2, this._customAccessToken || e2);
    }, K.prototype.normalizeGlyphsURL = function(t2, e2) {
      if (!J(t2))
        return t2;
      var r2 = $(t2);
      return r2.path = "/fonts/v1" + r2.path, this._makeAPIURL(r2, this._customAccessToken || e2);
    }, K.prototype.normalizeSourceURL = function(t2, e2) {
      if (!J(t2))
        return t2;
      var r2 = $(t2);
      return r2.path = "/v1/" + r2.authority + ".json", this._makeAPIURL(r2, this._customAccessToken || e2);
    }, K.prototype.normalizeSpriteURL = function(t2, e2, r2, n2) {
      var i3 = $(t2);
      return J(t2) ? (i3.path = "/styles/v1" + i3.path + "/sprite" + e2 + r2, this._makeAPIURL(i3, this._customAccessToken || n2)) : (i3.path += "" + e2 + r2, tt(i3));
    }, K.prototype.normalizeTileURL = function(t2, e2) {
      if (t2 && !J(t2) && !Q(t2))
        return t2;
      var r2 = $(t2);
      r2.path = r2.path.replace(/(\.(png|jpg)\d*)(?=$)/, "$1"), r2.path = "" + r2.path;
      var n2 = this._customAccessToken || function(t3) {
        for (var e3 = 0, r3 = t3; e3 < r3.length; e3 += 1) {
          var n3 = r3[e3].match(/^access_token=(.*)$/);
          if (n3)
            return n3[1];
        }
        return null;
      }(r2.params) || q.ACCESS_TOKEN;
      return r2.params.push("access_token=" + n2), tt(r2);
    }, K.prototype.canonicalizeTileURL = function(t2, e2) {
      var r2 = $(t2);
      if (!r2.path.match(/(^\/v4\/)/) || !r2.path.match(/\.[\w]+$/))
        return t2;
      var n2 = "sgmap://tiles/";
      n2 += r2.path.replace("/v4/", "");
      var i3 = r2.params;
      return e2 && (i3 = i3.filter(function(t3) {
        return !t3.match(/^access_token=/);
      })), i3.length && (n2 += "?" + i3.join("&")), n2;
    }, K.prototype.canonicalizeTileset = function(t2, e2) {
      for (var r2 = !!e2 && J(e2), n2 = [], i3 = 0, a2 = t2.tiles || []; i3 < a2.length; i3 += 1) {
        var o2 = a2[i3];
        Q(o2) ? n2.push("Sg4326" == t2.reference ? this.normalizeTilesURL(o2, r2) : this.canonicalizeTileURL(o2, r2)) : n2.push(o2);
      }
      return n2;
    }, K.prototype.normalizeTilesURL = function(t2, e2) {
      if (0 !== t2.indexOf("aegis:"))
        return t2;
      var r2 = $(t2);
      r2.path = "/v1" + r2.path;
      var n2 = $(q.API_URL);
      return r2.protocol = n2.protocol, r2.authority = n2.authority, tt(r2);
    }, K.prototype._makeAPIURL = function(t2, e2) {
      var r2 = $(q.API_URL);
      if (t2.protocol = r2.protocol, t2.authority = r2.authority, "/" !== r2.path && (t2.path = "" + r2.path + t2.path), !q.REQUIRE_ACCESS_TOKEN)
        return tt(t2);
      if (!(e2 = e2 || q.ACCESS_TOKEN))
        throw new Error("\u8BF7\u53C2\u8003. See https://lbs.sgmap.cn/products/docs/#/guide/quick-quickstart \u8FDB\u884C\u767B\u9646\u540E\u83B7\u53D6\u8D44\u6E90");
      return t2.params = t2.params.filter(function(t3) {
        return -1 === t3.indexOf("access_token");
      }), t2.params.push("access_token=" + e2), tt(t2);
    };
    var H = /^((https?:)?\/\/)?([^\/]+\.)?(epgis|sgcc)\.c(n|om)(\.cn)?|^aegis:\/\//i;
    function Q(t2) {
      return H.test(t2);
    }
    var W = /^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;
    function $(t2) {
      var e2 = /^blob/.test(t2);
      e2 && (t2 = t2.slice(5));
      var r2 = t2.match(W);
      if (!r2)
        throw new Error("Unable to parse URL object");
      return { protocol: r2[1], authority: r2[2], path: r2[3] || "/", params: r2[4] ? r2[4].split("&") : [], blob: e2 ? "blob:" : "" };
    }
    function tt(t2) {
      var e2 = t2.params.length ? "?" + t2.params.join("&") : "";
      return "" + t2.blob + t2.protocol + "://" + t2.authority + t2.path + e2;
    }
    function et(t2) {
      if (!t2)
        return null;
      var e2 = t2.split(".");
      if (!e2 || 3 !== e2.length)
        return null;
      try {
        return JSON.parse(decodeURIComponent(self.atob(e2[1]).split("").map(function(t3) {
          return "%" + ("00" + t3.charCodeAt(0).toString(16)).slice(-2);
        }).join("")));
      } catch (t3) {
        return null;
      }
    }
    var rt = function(t2) {
      this.type = t2, this.anonId = null, this.eventData = {}, this.queue = [], this.pendingRequest = null;
    };
    rt.prototype.getStorageKey = function(t2) {
      var e2, r2 = et(q.ACCESS_TOKEN);
      return e2 = r2 && r2.u ? self.btoa(encodeURIComponent(r2.u).replace(/%([0-9A-F]{2})/g, function(t3, e3) {
        return String.fromCharCode(Number("0x" + e3));
      })) : q.ACCESS_TOKEN || "", t2 ? "sgmap.eventData." + t2 + ":" + e2 : "sgmap.eventData:" + e2;
    }, rt.prototype.fetchEventData = function() {
      var t2 = C("localStorage"), e2 = this.getStorageKey(), r2 = this.getStorageKey("uuid");
      if (t2)
        try {
          var n2 = self.localStorage.getItem(e2);
          n2 && (this.eventData = JSON.parse(n2));
          var i3 = self.localStorage.getItem(r2);
          i3 && (this.anonId = i3);
        } catch (t3) {
          S("Unable to read from LocalStorage");
        }
    }, rt.prototype.saveEventData = function() {
      var t2 = C("localStorage"), e2 = this.getStorageKey(), r2 = this.getStorageKey("uuid");
      if (t2)
        try {
          self.localStorage.setItem(r2, this.anonId), Object.keys(this.eventData).length >= 1 && self.localStorage.setItem(e2, JSON.stringify(this.eventData));
        } catch (t3) {
          S("Unable to write to LocalStorage");
        }
    }, rt.prototype.processRequests = function(t2) {
    }, rt.prototype.postEvent = function(t2, e2, r2, n2) {
      var i3 = this;
      if (q.EVENTS_URL) {
        var a2 = $(q.EVENTS_URL);
        a2.params.push("access_token=" + (n2 || q.ACCESS_TOKEN || ""));
        var o2 = { event: this.type, created: new Date(t2).toISOString(), sdkIdentifier: "sgmap-js", sdkVersion: "3.0.0", skuId: X, userId: this.anonId }, s2 = e2 ? c(o2, e2) : o2, u2 = { url: tt(a2), headers: { "Content-Type": "text/plain" }, body: JSON.stringify([s2]) };
        this.pendingRequest = Rt(u2, function(t3) {
          i3.pendingRequest = null, r2(t3), i3.saveEventData(), i3.processRequests(n2);
        });
      }
    }, rt.prototype.queueRequest = function(t2, e2) {
      this.queue.push(t2), this.processRequests(e2);
    };
    var nt, it, at = function(t2) {
      function e2() {
        t2.call(this, "map.load"), this.success = {}, this.skuToken = "";
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.postMapLoadEvent = function(t3, e3, r2, n2) {
        this.skuToken = r2, (q.EVENTS_URL && n2 || q.ACCESS_TOKEN && Array.isArray(t3) && t3.some(function(t4) {
          return J(t4) || Q(t4);
        })) && this.queueRequest({ id: e3, timestamp: Date.now() }, n2);
      }, e2.prototype.processRequests = function(t3) {
        var e3 = this;
        if (!this.pendingRequest && 0 !== this.queue.length) {
          var r2 = this.queue.shift(), n2 = r2.id, i3 = r2.timestamp;
          n2 && this.success[n2] || (this.anonId || this.fetchEventData(), m(this.anonId) || (this.anonId = d()), this.postEvent(i3, { skuToken: this.skuToken }, function(t4) {
            t4 || n2 && (e3.success[n2] = true);
          }, t3));
        }
      }, e2;
    }(rt), ot = new (function(t2) {
      function e2(e3) {
        t2.call(this, "appUserTurnstile"), this._customAccessToken = e3;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.postTurnstileEvent = function(t3, e3) {
        q.EVENTS_URL && q.ACCESS_TOKEN && Array.isArray(t3) && t3.some(function(t4) {
          return J(t4) || Q(t4);
        }) && this.queueRequest(Date.now(), e3);
      }, e2.prototype.processRequests = function(t3) {
        var e3 = this;
        if (!this.pendingRequest && 0 !== this.queue.length) {
          this.anonId && this.eventData.lastSuccess && this.eventData.tokenU || this.fetchEventData();
          var r2 = et(q.ACCESS_TOKEN), n2 = r2 ? r2.u : q.ACCESS_TOKEN, i3 = n2 !== this.eventData.tokenU;
          m(this.anonId) || (this.anonId = d(), i3 = true);
          var a2 = this.queue.shift();
          if (this.eventData.lastSuccess) {
            var o2 = new Date(this.eventData.lastSuccess), s2 = new Date(a2), u2 = (a2 - this.eventData.lastSuccess) / 864e5;
            i3 = i3 || u2 >= 1 || u2 < -1 || o2.getDate() !== s2.getDate();
          } else
            i3 = true;
          if (!i3)
            return this.processRequests();
          this.postEvent(a2, { "enabled.telemetry": false }, function(t4) {
            t4 || (e3.eventData.lastSuccess = a2, e3.eventData.tokenU = n2);
          }, t3);
        }
      }, e2;
    }(rt))(), st = ot.postTurnstileEvent.bind(ot), ut = new at(), lt = ut.postMapLoadEvent.bind(ut), pt = 500, ht = 50;
    function ct() {
      self.caches && !nt && (nt = self.caches.open("sgmap-tiles"));
    }
    function ft(t2) {
      var e2 = t2.indexOf("?");
      return e2 < 0 ? t2 : t2.slice(0, e2);
    }
    var yt, dt = 1 / 0;
    function mt() {
      return null == yt && (yt = self.OffscreenCanvas && new self.OffscreenCanvas(1, 1).getContext("2d") && "function" == typeof self.createImageBitmap), yt;
    }
    var vt = Object.prototype.hasOwnProperty, gt = Array.isArray, xt = function() {
      for (var t2 = [], e2 = 0; e2 < 256; ++e2)
        t2.push("%" + ((e2 < 16 ? "0" : "") + e2.toString(16)).toUpperCase());
      return t2;
    }(), bt = function(t2, e2) {
      for (var r2 = e2 && e2.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, n2 = 0; n2 < t2.length; ++n2)
        void 0 !== t2[n2] && (r2[n2] = t2[n2]);
      return r2;
    }, wt = { arrayToObject: bt, assign: function(t2, e2) {
      return Object.keys(e2).reduce(function(t3, r2) {
        return t3[r2] = e2[r2], t3;
      }, t2);
    }, combine: function(t2, e2) {
      return [].concat(t2, e2);
    }, compact: function(t2) {
      for (var e2 = [{ obj: { o: t2 }, prop: "o" }], r2 = [], n2 = 0; n2 < e2.length; ++n2)
        for (var i3 = e2[n2], a2 = i3.obj[i3.prop], o2 = Object.keys(a2), s2 = 0; s2 < o2.length; ++s2) {
          var u2 = o2[s2], l2 = a2[u2];
          "object" == typeof l2 && null !== l2 && -1 === r2.indexOf(l2) && (e2.push({ obj: a2, prop: u2 }), r2.push(l2));
        }
      return function(t3) {
        for (; t3.length > 1; ) {
          var e3 = t3.pop(), r3 = e3.obj[e3.prop];
          if (gt(r3)) {
            for (var n3 = [], i4 = 0; i4 < r3.length; ++i4)
              void 0 !== r3[i4] && n3.push(r3[i4]);
            e3.obj[e3.prop] = n3;
          }
        }
      }(e2), t2;
    }, decode: function(t2, e2, r2) {
      var n2 = t2.replace(/\+/g, " ");
      if ("iso-8859-1" === r2)
        return n2.replace(/%[0-9a-f]{2}/gi, unescape);
      try {
        return decodeURIComponent(n2);
      } catch (t3) {
        return n2;
      }
    }, encode: function(t2, e2, r2) {
      if (0 === t2.length)
        return t2;
      var n2 = "string" == typeof t2 ? t2 : String(t2);
      if ("iso-8859-1" === r2)
        return escape(n2).replace(/%u[0-9a-f]{4}/gi, function(t3) {
          return "%26%23" + parseInt(t3.slice(2), 16) + "%3B";
        });
      for (var i3 = "", a2 = 0; a2 < n2.length; ++a2) {
        var o2 = n2.charCodeAt(a2);
        45 === o2 || 46 === o2 || 95 === o2 || 126 === o2 || o2 >= 48 && o2 <= 57 || o2 >= 65 && o2 <= 90 || o2 >= 97 && o2 <= 122 ? i3 += n2.charAt(a2) : o2 < 128 ? i3 += xt[o2] : o2 < 2048 ? i3 += xt[192 | o2 >> 6] + xt[128 | 63 & o2] : o2 < 55296 || o2 >= 57344 ? i3 += xt[224 | o2 >> 12] + xt[128 | o2 >> 6 & 63] + xt[128 | 63 & o2] : (o2 = 65536 + ((1023 & o2) << 10 | 1023 & n2.charCodeAt(a2 += 1)), i3 += xt[240 | o2 >> 18] + xt[128 | o2 >> 12 & 63] + xt[128 | o2 >> 6 & 63] + xt[128 | 63 & o2]);
      }
      return i3;
    }, isBuffer: function(t2) {
      return !(!t2 || "object" != typeof t2 || !(t2.constructor && t2.constructor.isBuffer && t2.constructor.isBuffer(t2)));
    }, isRegExp: function(t2) {
      return "[object RegExp]" === Object.prototype.toString.call(t2);
    }, merge: function t2(e2, r2, n2) {
      if (!r2)
        return e2;
      if ("object" != typeof r2) {
        if (gt(e2))
          e2.push(r2);
        else {
          if (!e2 || "object" != typeof e2)
            return [e2, r2];
          (n2 && (n2.plainObjects || n2.allowPrototypes) || !vt.call(Object.prototype, r2)) && (e2[r2] = true);
        }
        return e2;
      }
      if (!e2 || "object" != typeof e2)
        return [e2].concat(r2);
      var i3 = e2;
      return gt(e2) && !gt(r2) && (i3 = bt(e2, n2)), gt(e2) && gt(r2) ? (r2.forEach(function(r3, i4) {
        if (vt.call(e2, i4)) {
          var a2 = e2[i4];
          a2 && "object" == typeof a2 && r3 && "object" == typeof r3 ? e2[i4] = t2(a2, r3, n2) : e2.push(r3);
        } else
          e2[i4] = r3;
      }), e2) : Object.keys(r2).reduce(function(e3, i4) {
        var a2 = r2[i4];
        return e3[i4] = vt.call(e3, i4) ? t2(e3[i4], a2, n2) : a2, e3;
      }, i3);
    } }, _t = Object.prototype.hasOwnProperty, At = { allowDots: false, allowPrototypes: false, arrayLimit: 20, charset: "utf-8", charsetSentinel: false, comma: false, decoder: wt.decode, delimiter: "&", depth: 5, ignoreQueryPrefix: false, interpretNumericEntities: false, parameterLimit: 1e3, parseArrays: true, plainObjects: false, strictNullHandling: false }, St = function(t2) {
      return t2.replace(/&#(\d+);/g, function(t3, e2) {
        return String.fromCharCode(parseInt(e2, 10));
      });
    }, zt = function(t2, e2, r2) {
      if (t2) {
        var n2 = r2.allowDots ? t2.replace(/\.([^.[]+)/g, "[$1]") : t2, i3 = /(\[[^[\]]*])/g, a2 = /(\[[^[\]]*])/.exec(n2), o2 = a2 ? n2.slice(0, a2.index) : n2, s2 = [];
        if (o2) {
          if (!r2.plainObjects && _t.call(Object.prototype, o2) && !r2.allowPrototypes)
            return;
          s2.push(o2);
        }
        for (var u2 = 0; null !== (a2 = i3.exec(n2)) && u2 < r2.depth; ) {
          if (u2 += 1, !r2.plainObjects && _t.call(Object.prototype, a2[1].slice(1, -1)) && !r2.allowPrototypes)
            return;
          s2.push(a2[1]);
        }
        return a2 && s2.push("[" + n2.slice(a2.index) + "]"), function(t3, e3, r3) {
          for (var n3 = e3, i4 = t3.length - 1; i4 >= 0; --i4) {
            var a3, o3 = t3[i4];
            if ("[]" === o3 && r3.parseArrays)
              a3 = [].concat(n3);
            else {
              a3 = r3.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
              var s3 = "[" === o3.charAt(0) && "]" === o3.charAt(o3.length - 1) ? o3.slice(1, -1) : o3, u3 = parseInt(s3, 10);
              r3.parseArrays || "" !== s3 ? !isNaN(u3) && o3 !== s3 && String(u3) === s3 && u3 >= 0 && r3.parseArrays && u3 <= r3.arrayLimit ? (a3 = [])[u3] = n3 : a3[s3] = n3 : a3 = { 0: n3 };
            }
            n3 = a3;
          }
          return n3;
        }(s2, e2, r2);
      }
    }, It = function(t2) {
      var e2 = t2.url, r2 = t2.params;
      if (!r2 || 0 === Object.keys(r2).length)
        return e2;
      var n2 = -1 !== e2.indexOf("?");
      return e2 + (n2 ? "&" : "?") + function(t3) {
        var e3 = [];
        for (var r3 in t3)
          e3.push(r3 + "=" + t3[r3]);
        return e3.join("&");
      }(r2);
    }, kt = function(t2) {
      window.__MAP_ISDEV && console.log(t2);
    }, Mt = { _Jm: function(t2, e2) {
      for (var r2, n2 = [], i3 = [0, 0], a2 = 0, o2 = Mt._w(t2); a2 < o2; ++a2)
        r2 = e2 ? e2(t2[a2]) : t2[a2], Mt._zh(r2[0] - i3[0], n2), Mt._zh(r2[1] - i3[1], n2), i3 = r2;
      return n2.join("");
    }, _zh: function(t2, e2) {
      return Mt._Km(0 > t2 ? ~(t2 << 1) : t2 << 1, e2);
    }, _Km: function(t2, e2) {
      for (; 32 <= t2; )
        e2.push(String.fromCharCode(63 + (32 | 31 & t2))), t2 >>= 5;
      return e2.push(String.fromCharCode(t2 + 63)), e2;
    }, _w: function(t2) {
      return t2 ? t2.length : 0;
    }, _F: function(t2, e2, r2) {
      if (t2 && (void 0 !== t2.lat || void 0 !== t2.lng))
        try {
          Ac(t2), e2 = t2.lng, t2 = t2.lat, r2 = false;
        } catch (t3) {
          _.oc(t3);
        }
      return t2 -= 0, e2 -= 0, r2 || (t2 = Mt._fb(t2, -90, 90), 180 != e2 && (e2 = Mt._gb(e2, -180, 180))), t2 || e2;
    }, _fb: function(t2, e2, r2) {
      return null != e2 && (t2 = Math.max(t2, e2)), null != r2 && (t2 = Math.min(t2, r2)), t2;
    }, _gb: function(t2, e2, r2) {
      return ((t2 - e2) % (r2 -= e2) + r2) % r2 + e2;
    } }, Pt = function(t2) {
      for (var e2 = [], r2 = Mt._w(t2), n2 = Array(Math.floor(t2.length / 2)), i3 = 0, a2 = 0, o2 = 0, s2 = 0; i3 < r2; ++s2) {
        var u2 = 1, l2 = 0;
        do {
          var p2 = t2.charCodeAt(i3++) - 63 - 1;
          u2 += p2 << l2, l2 += 5;
        } while (31 <= p2);
        a2 += 1 & u2 ? ~(u2 >> 1) : u2 >> 1, u2 = 1, l2 = 0;
        do {
          u2 += (p2 = t2.charCodeAt(i3++) - 63 - 1) << l2, l2 += 5;
        } while (31 <= p2);
        n2[s2] = Mt._F(1e-5 * a2, 1e-5 * (o2 += 1 & u2 ? ~(u2 >> 1) : u2 >> 1), true), e2.push([1e-5 * o2, 1e-5 * a2]);
      }
      return n2.length = s2, e2.length > 1 ? e2 : e2[0];
    }, Vt = function() {
      this.layers = {}, this.layersidx = [], this.sources = {}, this.images = {};
    };
    Vt.prototype.clear = function() {
      this.layers = {}, this.layersidx = [], this.sources = {}, this.images = {};
    }, Vt.prototype.addLayer = function(t2, e2) {
      this.layers[t2.id] || (this.layers[t2.id] = [t2, e2], this.layersidx.push(t2.id));
    }, Vt.prototype.removeLayer = function(t2) {
      var e2 = this.layersidx.indexOf(t2);
      -1 != e2 && (this.layersidx.splice(e2, 1), delete this.layers[t2]);
    }, Vt.prototype.addSource = function(t2, e2) {
      this.sources[t2] || (this.sources[t2] = e2);
    }, Vt.prototype.removeSource = function(t2) {
      delete this.sources[t2];
    }, Vt.prototype.addImage = function(t2, e2, r2) {
      this.images[t2] || (this.images[t2] = [t2, e2, r2]);
    }, Vt.prototype.removeImage = function(t2) {
      delete this.images[t2];
    }, Vt.prototype.pre_getLayer = function(t2) {
      var e2 = this, r2 = [];
      t2.style._serializeLayers(t2.style._order).forEach(function(t3) {
        e2.layersidx.indexOf(t3.id) >= 0 && (r2.push(t3.id), e2.layers[t3.id] = [t3]);
      }), this.layersidx = r2;
    }, Vt.prototype.pre_getSource = function(t2) {
      var e2 = this.layers;
      for (var r2 in e2) {
        var n2 = t2.getLayer(e2[r2][0].id);
        if (n2) {
          var i3 = n2.source;
          if ("string" == typeof i3) {
            var a2 = t2.getSource(i3);
            a2 && (this.sources[i3] = a2.serialize());
          }
        }
      }
    }, Vt.prototype.render = function(t2) {
      var e2 = this;
      Object.keys(this.sources).forEach(function(r2) {
        var n2 = e2.sources[r2];
        !t2.getSource(r2) && t2.addSource(r2, n2);
      }), Object.keys(this.images).forEach(function(r2) {
        var n2 = e2.images[r2];
        !t2.hasImage(n2[0]) && t2.addImage.apply(t2, n2);
      }), this.layersidx.forEach(function(r2) {
        var n2 = e2.layers[r2];
        t2.getLayer(r2) || (n2[1] && !t2.getLayer(n2[1]) ? t2.addLayer.apply(t2, [n2[0]]) : t2.addLayer.apply(t2, n2));
      });
    };
    var Ct = { Unknown: "Unknown", Style: "Style", Source: "Source", Tile: "Tile", Glyphs: "Glyphs", SpriteImage: "SpriteImage", SpriteJSON: "SpriteJSON", Image: "Image" };
    "function" == typeof Object.freeze && Object.freeze(Ct);
    var Tt = function(t2) {
      function e2(e3, r2, n2) {
        401 === r2 && Q(n2) && (e3 += ": you may have provided an invalid sgmap access token. See https://www.sgmap.com/api-documentation/#access-tokens-and-token-scopes"), t2.call(this, e3), this.status = r2, this.url = n2, this.name = this.constructor.name, this.message = e3;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.toString = function() {
        return this.name + ": " + this.message + " (" + this.status + "): " + this.url;
      }, e2;
    }(Error), Et = k() ? function() {
      return self.worker && self.worker.referrer;
    } : function() {
      return ("blob:" === self.location.protocol ? self.parent : self).location.href;
    };
    var Bt, Dt, Lt = function(t2, e2) {
      var r2, n2 = function(t3) {
        var e3 = {};
        if (-1 !== t3.indexOf("?")) {
          var r3 = t3.split("?");
          e3.url = r3[0], e3.params = function(t4, e4) {
            var r4 = At;
            if ("" === t4 || null == t4)
              return r4.plainObjects ? /* @__PURE__ */ Object.create(null) : {};
            for (var n3 = "string" == typeof t4 ? function(t5, e5) {
              var r5, n4 = {}, i5 = (e5.ignoreQueryPrefix ? t5.replace(/^\?/, "") : t5).split(e5.delimiter, e5.parameterLimit === 1 / 0 ? void 0 : e5.parameterLimit), a3 = -1, o3 = e5.charset;
              if (e5.charsetSentinel)
                for (r5 = 0; r5 < i5.length; ++r5)
                  0 === i5[r5].indexOf("utf8=") && ("utf8=%E2%9C%93" === i5[r5] ? o3 = "utf-8" : "utf8=%26%2310003%3B" === i5[r5] && (o3 = "iso-8859-1"), a3 = r5, r5 = i5.length);
              for (r5 = 0; r5 < i5.length; ++r5)
                if (r5 !== a3) {
                  var s3, u3, l2 = i5[r5], p2 = l2.indexOf("]="), h2 = -1 === p2 ? l2.indexOf("=") : p2 + 1;
                  -1 === h2 ? (s3 = e5.decoder(l2, At.decoder, o3), u3 = e5.strictNullHandling ? null : "") : (s3 = e5.decoder(l2.slice(0, h2), At.decoder, o3), u3 = e5.decoder(l2.slice(h2 + 1), At.decoder, o3)), u3 && e5.interpretNumericEntities && "iso-8859-1" === o3 && (u3 = St(u3)), u3 && e5.comma && u3.indexOf(",") > -1 && (u3 = u3.split(",")), n4[s3] = _t.call(n4, s3) ? wt.combine(n4[s3], u3) : u3;
                }
              return n4;
            }(t4, r4) : t4, i4 = r4.plainObjects ? /* @__PURE__ */ Object.create(null) : {}, a2 = Object.keys(n3), o2 = 0; o2 < a2.length; ++o2) {
              var s2 = a2[o2], u2 = zt(s2, n3[s2], r4);
              i4 = wt.merge(i4, u2, r4);
            }
            return wt.compact(i4);
          }(r3[1]);
        } else
          e3.url = t3, e3.params = {};
        return e3;
      }(t2.url), i3 = n2.params.access_token;
      if (void 0 === t2.cache && (t2.cache = true), i3 && (delete n2.params.access_token, t2.headers || (t2.headers = {}), t2.headers.Authorization = i3), t2.url = It(n2), !(/^file:/.test(r2 = t2.url) || /^file:/.test(Et()) && !/^\w+:/.test(r2))) {
        if (self.fetch && self.Request && self.AbortController && self.Request.prototype.hasOwnProperty("signal"))
          return function(t3, e3) {
            var r3, n3 = new self.AbortController(), i4 = new self.Request(encodeURI(t3.url), { method: t3.method || "GET", body: t3.body, credentials: t3.credentials, headers: t3.headers, referrer: Et(), signal: n3.signal }), a2 = false, o2 = false, s2 = (r3 = i4.url).indexOf("sku=") > 0 && Q(r3);
            "json" === t3.type && i4.headers.set("Accept", "application/json");
            var u2 = function(r4, n4, a3) {
              if (!o2) {
                if (r4 && "SecurityError" !== r4.message && S(r4), n4 && a3)
                  return l2(n4);
                var u3 = Date.now();
                self.fetch(i4).then(function(r5) {
                  if (r5.ok) {
                    var n5 = s2 ? r5.clone() : null;
                    return l2(r5, n5, u3);
                  }
                  return e3(new Tt(r5.statusText, r5.status, t3.url));
                }).catch(function(t4) {
                  20 !== t4.code && e3(new Error(t4.message));
                });
              }
            }, l2 = function(r4, n4, s3) {
              ("arrayBuffer" === t3.type ? r4.arrayBuffer() : "json" === t3.type ? r4.json() : r4.text()).then(function(t4) {
                o2 || (n4 && s3 && function(t5, e4, r5) {
                  if (ct(), nt) {
                    var n5 = { status: e4.status, statusText: e4.statusText, headers: new self.Headers() };
                    e4.headers.forEach(function(t6, e5) {
                      return n5.headers.set(e5, t6);
                    });
                    var i5 = M(e4.headers.get("Cache-Control") || "");
                    i5["no-store"] || (i5["max-age"] && n5.headers.set("Expires", new Date(r5 + 1e3 * i5["max-age"]).toUTCString()), new Date(n5.headers.get("Expires")).getTime() - r5 < 42e4 || function(t6, e5) {
                      if (void 0 === it)
                        try {
                          new Response(new ReadableStream()), it = true;
                        } catch (t7) {
                          it = false;
                        }
                      it ? e5(t6.body) : t6.blob().then(e5);
                    }(e4, function(e5) {
                      var r6 = new self.Response(e5, n5);
                      ct(), nt && nt.then(function(e6) {
                        return e6.put(ft(t5.url), r6);
                      }).catch(function(t6) {
                        return S(t6.message);
                      });
                    }));
                  }
                }(i4, n4, s3), a2 = true, e3(null, t4, r4.headers.get("Cache-Control"), r4.headers.get("Expires")));
              }).catch(function(t4) {
                o2 || e3(new Error(t4.message));
              });
            };
            return s2 ? function(t4, e4) {
              if (ct(), !nt)
                return e4(null);
              var r4 = ft(t4.url);
              nt.then(function(t5) {
                t5.match(r4).then(function(n4) {
                  var i5 = function(t6) {
                    if (!t6)
                      return false;
                    var e5 = new Date(t6.headers.get("Expires") || 0), r5 = M(t6.headers.get("Cache-Control") || "");
                    return e5 > Date.now() && !r5["no-cache"];
                  }(n4);
                  t5.delete(r4), i5 && t5.put(r4, n4.clone()), e4(null, n4, i5);
                }).catch(e4);
              }).catch(e4);
            }(i4, u2) : u2(null, null), { cancel: function() {
              o2 = true, a2 || n3.abort();
            } };
          }(t2, e2);
        if (k() && self.worker && self.worker.actor)
          return self.worker.actor.send("getResource", t2, e2, void 0, true);
      }
      return function(t3, e3) {
        var r3 = new self.XMLHttpRequest();
        for (var n3 in r3.open(t3.method || "GET", encodeURI(t3.url), true), "arrayBuffer" === t3.type && (r3.responseType = "arraybuffer"), t3.headers)
          r3.setRequestHeader(n3, t3.headers[n3]);
        return "json" === t3.type && (r3.responseType = "text", r3.setRequestHeader("Accept", "application/json")), r3.withCredentials = "include" === t3.credentials, r3.onerror = function() {
          e3(new Error(r3.statusText));
        }, r3.onload = function() {
          if ((r3.status >= 200 && r3.status < 300 || 0 === r3.status) && null !== r3.response) {
            var n4 = r3.response;
            if ("json" === t3.type)
              try {
                n4 = JSON.parse(r3.response);
              } catch (t4) {
                return e3(t4);
              }
            e3(null, n4, r3.getResponseHeader("Cache-Control"), r3.getResponseHeader("Expires"));
          } else
            e3(new Tt(r3.statusText, r3.status, t3.url));
        }, r3.send(t3.body), { cancel: function() {
          return r3.abort();
        } };
      }(t2, e2);
    }, Ft = function(t2, e2) {
      var r2 = t2.tilesecurity, n2 = t2.zxy;
      return delete t2.zxy, delete t2.tilesecurity, Lt(c(t2, { type: "arrayBuffer" }), function(t3, i3, a2, o2) {
        !t3 && i3 && r2 && (i3 = function(t4, e3) {
          var r3, n3, i4, a3 = t4.z % 8, o3 = t4.x % 8, s2 = t4.y % 8, u2 = e3, l2 = u2.byteLength - a3 - o3 - s2, p2 = Math.floor(l2 / 3), h2 = Math.floor(l2 / 3), c2 = l2 - p2 - h2;
          s2 <= o3 && o3 <= a3 && s2 <= a3 ? (i4 = new Uint8Array(u2.slice(s2, c2 + s2)), n3 = new Uint8Array(u2.slice(c2 + o3 + s2, c2 + h2 + o3 + s2)), r3 = new Uint8Array(u2.slice(c2 + h2 + o3 + s2 + a3, l2 + a3 + o3 + s2))) : s2 <= o3 && a3 <= o3 && s2 <= a3 ? (i4 = new Uint8Array(u2.slice(s2, c2 + s2)), r3 = new Uint8Array(u2.slice(c2 + a3 + s2, c2 + p2 + a3 + s2)), n3 = new Uint8Array(u2.slice(c2 + p2 + a3 + s2 + o3, l2 + a3 + o3 + s2))) : o3 <= s2 && s2 <= a3 && o3 <= a3 ? (n3 = new Uint8Array(u2.slice(o3, h2 + o3)), i4 = new Uint8Array(u2.slice(h2 + o3 + s2, c2 + h2 + o3 + s2)), r3 = new Uint8Array(u2.slice(c2 + h2 + a3 + s2 + o3, l2 + a3 + o3 + s2))) : o3 <= a3 && a3 <= s2 && o3 <= s2 ? (n3 = new Uint8Array(u2.slice(o3, h2 + o3)), r3 = new Uint8Array(u2.slice(h2 + o3 + a3, h2 + p2 + o3 + a3)), i4 = new Uint8Array(u2.slice(h2 + p2 + a3 + s2 + o3, l2 + a3 + o3 + s2))) : a3 <= s2 && s2 <= o3 && a3 <= o3 ? (r3 = new Uint8Array(u2.slice(a3, p2 + a3)), i4 = new Uint8Array(u2.slice(p2 + a3 + s2, c2 + p2 + a3 + s2)), n3 = new Uint8Array(u2.slice(c2 + p2 + a3 + s2 + o3, l2 + a3 + o3 + s2))) : a3 <= o3 && o3 <= s2 && a3 <= s2 && (r3 = new Uint8Array(u2.slice(a3, p2 + a3)), n3 = new Uint8Array(u2.slice(p2 + a3 + o3, p2 + h2 + a3 + o3)), i4 = new Uint8Array(u2.slice(p2 + h2 + a3 + s2 + o3, l2 + a3 + o3 + s2)));
          var f2 = new Uint8Array(l2);
          return f2.set(r3, 0), f2.set(n3, p2), f2.set(i4, h2 + p2), T() ? [].slice.call(f2) : f2.buffer;
        }(n2, i3)), e2(t3, i3, a2, o2);
      });
    }, Rt = function(t2, e2) {
      return Lt(c(t2, { method: "POST" }), e2);
    };
    Bt = [], Dt = 0;
    var Ot = function(t2, e2) {
      if (N.supported && (t2.headers || (t2.headers = {}), t2.headers.accept = "image/webp,*/*"), Dt >= q.MAX_PARALLEL_IMAGE_REQUESTS) {
        var r2 = { requestParameters: t2, callback: e2, cancelled: false, cancel: function() {
          this.cancelled = true;
        } };
        return Bt.push(r2), r2;
      }
      Dt++;
      var n2 = false, i3 = function() {
        if (!n2)
          for (n2 = true, Dt--; Bt.length && Dt < q.MAX_PARALLEL_IMAGE_REQUESTS; ) {
            var t3 = Bt.shift();
            t3.cancelled || (t3.cancel = Ot(t3.requestParameters, t3.callback).cancel);
          }
      }, a2 = Ft(t2, function(t3, r3, n3, a3) {
        i3(), t3 ? e2(t3) : r3 && (mt() ? function(t4, e3) {
          var r4 = new self.Blob([new Uint8Array(t4)], { type: "image/png" });
          self.createImageBitmap(r4).then(function(t5) {
            e3(null, t5);
          }).catch(function(t5) {
            e3(new Error("Could not load image because of " + t5.message + ". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));
          });
        }(r3, e2) : function(t4, e3, r4, n4) {
          var i4 = new self.Image(), a4 = self.URL;
          i4.onload = function() {
            e3(null, i4), a4.revokeObjectURL(i4.src);
          }, i4.onerror = function() {
            return e3(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));
          };
          var o2 = new self.Blob([new Uint8Array(t4)], { type: "image/png" });
          i4.cacheControl = r4, i4.expires = n4, i4.src = o2.size ? a4.createObjectURL(o2) : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";
        }(r3, e2, n3, a3));
      });
      return { cancel: function() {
        a2.cancel(), i3();
      } };
    };
    function jt(t2, e2, r2) {
      r2[t2] && -1 !== r2[t2].indexOf(e2) || (r2[t2] = r2[t2] || [], r2[t2].push(e2));
    }
    function Ut(t2, e2, r2) {
      if (r2 && r2[t2]) {
        var n2 = r2[t2].indexOf(e2);
        -1 !== n2 && r2[t2].splice(n2, 1);
      }
    }
    var qt = function(t2, e2) {
      void 0 === e2 && (e2 = {}), c(this, e2), this.type = t2;
    }, Nt = function(t2) {
      function e2(e3, r2) {
        void 0 === r2 && (r2 = {}), t2.call(this, "error", c({ error: e3 }, r2));
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2;
    }(qt), Zt = function() {
    };
    Zt.prototype.on = function(t2, e2) {
      return this._listeners = this._listeners || {}, jt(t2, e2, this._listeners), this;
    }, Zt.prototype.off = function(t2, e2) {
      return Ut(t2, e2, this._listeners), Ut(t2, e2, this._oneTimeListeners), this;
    }, Zt.prototype.once = function(t2, e2) {
      return this._oneTimeListeners = this._oneTimeListeners || {}, jt(t2, e2, this._oneTimeListeners), this;
    }, Zt.prototype.fire = function(t2, e2) {
      "string" == typeof t2 && (t2 = new qt(t2, e2 || {}));
      var r2 = t2.type;
      if (this.listens(r2)) {
        t2.target = this;
        for (var n2 = 0, i3 = this._listeners && this._listeners[r2] ? this._listeners[r2].slice() : []; n2 < i3.length; n2 += 1)
          i3[n2].call(this, t2);
        for (var a2 = 0, o2 = this._oneTimeListeners && this._oneTimeListeners[r2] ? this._oneTimeListeners[r2].slice() : []; a2 < o2.length; a2 += 1) {
          var s2 = o2[a2];
          Ut(r2, s2, this._oneTimeListeners), s2.call(this, t2);
        }
        var u2 = this._eventedParent;
        u2 && (c(t2, "function" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), u2.fire(t2));
      } else
        t2 instanceof Nt && console.error(t2.error);
      return this;
    }, Zt.prototype.listens = function(t2) {
      return this._listeners && this._listeners[t2] && this._listeners[t2].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t2] && this._oneTimeListeners[t2].length > 0 || this._eventedParent && this._eventedParent.listens(t2);
    }, Zt.prototype.setEventedParent = function(t2, e2) {
      return this._eventedParent = t2, this._eventedParentData = e2, this;
    };
    var Gt = { $version: 8, $root: { version: { required: true, type: "enum", values: [8] }, name: { type: "string" }, metadata: { type: "*" }, center: { type: "array", value: "number" }, zoom: { type: "number" }, bearing: { type: "number", default: 0, period: 360, units: "degrees" }, pitch: { type: "number", default: 0, units: "degrees" }, light: { type: "light" }, sources: { required: true, type: "sources" }, sprite: { type: "string" }, glyphs: { type: "string" }, transition: { type: "transition" }, layers: { required: true, type: "array", value: "layer" } }, sources: { "*": { type: "source" } }, source: ["source_vector", "source_raster", "source_raster_dem", "source_geojson", "source_video", "source_image"], source_vector: { type: { required: true, type: "enum", values: { vector: {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, scheme: { type: "enum", values: { xyz: {}, tms: {} }, default: "xyz" }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, attribution: { type: "string" }, promoteId: { type: "promoteId" }, "*": { type: "*" } }, source_raster: { type: { required: true, type: "enum", values: { raster: {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, tileSize: { type: "number", default: 512, units: "pixels" }, scheme: { type: "enum", values: { xyz: {}, tms: {} }, default: "xyz" }, attribution: { type: "string" }, "*": { type: "*" } }, source_raster_dem: { type: { required: true, type: "enum", values: { "raster-dem": {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, tileSize: { type: "number", default: 512, units: "pixels" }, attribution: { type: "string" }, encoding: { type: "enum", values: { terrarium: {}, sgmap: {} }, default: "sgmap" }, "*": { type: "*" } }, source_geojson: { type: { required: true, type: "enum", values: { geojson: {} } }, data: { type: "*" }, maxzoom: { type: "number", default: 18 }, attribution: { type: "string" }, buffer: { type: "number", default: 128, maximum: 512, minimum: 0 }, tolerance: { type: "number", default: 0.375 }, cluster: { type: "boolean", default: false }, clusterRadius: { type: "number", default: 50, minimum: 0 }, clusterMaxZoom: { type: "number" }, clusterProperties: { type: "*" }, lineMetrics: { type: "boolean", default: false }, generateId: { type: "boolean", default: false }, promoteId: { type: "promoteId" } }, source_video: { type: { required: true, type: "enum", values: { video: {} } }, urls: { required: true, type: "array", value: "string" }, coordinates: { required: true, type: "array", length: 4, value: { type: "array", length: 2, value: "number" } } }, source_image: { type: { required: true, type: "enum", values: { image: {} } }, url: { required: true, type: "string" }, coordinates: { required: true, type: "array", length: 4, value: { type: "array", length: 2, value: "number" } } }, layer: { id: { type: "string", required: true }, type: { type: "enum", values: { fill: {}, line: {}, symbol: {}, circle: {}, esymbol: {}, eline: {}, heatmap: {}, "fill-extrusion": {}, raster: {}, hillshade: {}, background: {} }, required: true }, metadata: { type: "*" }, source: { type: "string" }, "source-layer": { type: "string" }, minzoom: { type: "number", minimum: 0, maximum: 24 }, maxzoom: { type: "number", minimum: 0, maximum: 24 }, filter: { type: "filter" }, layout: { type: "layout" }, paint: { type: "paint" } }, layout: ["layout_fill", "layout_line", "layout_circle", "layout_heatmap", "layout_fill-extrusion", "layout_symbol", "layout_raster", "layout_hillshade", "layout_background", "layout_esymbol"], layout_background: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_fill: { "allow-clip": { type: "boolean", value: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_circle: { "allow-clip": { type: "boolean", value: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_heatmap: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, "layout_fill-extrusion": { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_line: { "esymbol-id": { type: "string", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "allow-clip": { type: "boolean", value: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-cap": { type: "enum", values: { butt: {}, round: {}, square: {} }, default: "butt", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "line-join": { type: "enum", values: { bevel: {}, round: {}, miter: {} }, default: "miter", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "line-miter-limit": { type: "number", default: 2, requires: [{ "line-join": "miter" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-round-limit": { type: "number", default: 1.05, requires: [{ "line-join": "round" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_symbol: { "allow-clip": { type: "boolean", value: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-scaleable": { type: "boolean", default: false, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "symbol-placement": { type: "enum", values: { point: {}, line: {}, "line-center": {} }, default: "point", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-spacing": { type: "number", default: 250, minimum: 1, units: "pixels", requires: [{ "symbol-placement": "line" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-avoid-edges": { type: "boolean", default: false, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "symbol-z-order": { type: "enum", values: { auto: {}, "viewport-y": {}, source: {} }, default: "auto", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-allow-overlap": { type: "boolean", default: false, requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-ignore-placement": { type: "boolean", default: false, requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-optional": { type: "boolean", default: false, requires: ["icon-image", "text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-rotation-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-size": { type: "number", default: 1, minimum: 0, units: "factor of the original icon size", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-text-fit": { type: "enum", values: { none: {}, width: {}, height: {}, both: {} }, default: "none", requires: ["icon-image", "text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-text-fit-padding": { type: "array", value: "number", length: 4, default: [0, 0, 0, 0], units: "pixels", requires: ["icon-image", "text-field", { "icon-text-fit": ["both", "width", "height"] }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-image": { type: "resolvedImage", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-rotate": { type: "number", default: 0, period: 360, units: "degrees", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-padding": { type: "number", default: 2, minimum: 0, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-keep-upright": { type: "boolean", default: false, requires: ["icon-image", { "icon-rotation-alignment": "map" }, { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-offset": { type: "array", value: "number", length: 2, default: [0, 0], requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-anchor": { type: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, default: "center", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-pitch-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-pitch-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-rotation-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-field": { type: "formatted", default: "", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-font": { type: "array", value: "string", default: ["Microsoft YaHei Regular"], requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-size": { type: "number", default: 16, minimum: 0, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-max-width": { type: "number", default: 10, minimum: 0, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-line-height": { type: "number", default: 1.2, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-letter-spacing": { type: "number", default: 0, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-justify": { type: "enum", values: { auto: {}, left: {}, center: {}, right: {} }, default: "center", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-radial-offset": { type: "number", units: "ems", default: 0, requires: ["text-field"], "property-type": "data-driven", expression: { interpolated: true, parameters: ["zoom", "feature"] } }, "text-variable-anchor": { type: "array", value: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, requires: ["text-field", { "symbol-placement": ["point"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-anchor": { type: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, default: "center", requires: ["text-field", { "!": "text-variable-anchor" }], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-max-angle": { type: "number", default: 45, units: "degrees", requires: ["text-field", { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-writing-mode": { type: "array", value: "enum", values: { horizontal: {}, vertical: {} }, requires: ["text-field", { "symbol-placement": ["point"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-rotate": { type: "number", default: 0, period: 360, units: "degrees", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-padding": { type: "number", default: 2, minimum: 0, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-keep-upright": { type: "boolean", default: true, requires: ["text-field", { "text-rotation-alignment": "map" }, { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-transform": { type: "enum", values: { none: {}, uppercase: {}, lowercase: {} }, default: "none", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-offset": { type: "array", value: "number", units: "ems", length: 2, default: [0, 0], requires: ["text-field", { "!": "text-radial-offset" }], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-allow-overlap": { type: "boolean", default: false, requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-ignore-placement": { type: "boolean", default: false, requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-optional": { type: "boolean", default: false, requires: ["text-field", "icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_esymbol: { "allow-clip": { type: "boolean", value: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "esymbol-scaleable": { type: "boolean", default: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-size": { type: "number", default: 1, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-rotate": { type: "number", default: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-id": { type: "string", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "esymbol-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_raster: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_hillshade: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, filter: { type: "array", value: "*" }, filter_operator: { type: "enum", values: { "==": {}, "!=": {}, ">": {}, ">=": {}, "<": {}, "<=": {}, in: {}, "!in": {}, all: {}, any: {}, none: {}, has: {}, "!has": {}, within: {} } }, geometry_type: { type: "enum", values: { Point: {}, LineString: {}, Polygon: {} } }, function: { expression: { type: "expression" }, stops: { type: "array", value: "function_stop" }, base: { type: "number", default: 1, minimum: 0 }, property: { type: "string", default: "$zoom" }, type: { type: "enum", values: { identity: {}, exponential: {}, interval: {}, categorical: {} }, default: "exponential" }, colorSpace: { type: "enum", values: { rgb: {}, lab: {}, hcl: {} }, default: "rgb" }, default: { type: "*", required: false } }, function_stop: { type: "array", minimum: 0, maximum: 24, value: ["number", "color"], length: 2 }, expression: { type: "array", value: "*", minimum: 1 }, expression_name: { type: "enum", values: { let: { group: "Variable binding" }, var: { group: "Variable binding" }, literal: { group: "Types" }, array: { group: "Types" }, at: { group: "Lookup" }, in: { group: "Lookup" }, "index-of": { group: "Lookup" }, slice: { group: "Lookup" }, case: { group: "Decision" }, match: { group: "Decision" }, coalesce: { group: "Decision" }, step: { group: "Ramps, scales, curves" }, interpolate: { group: "Ramps, scales, curves" }, "interpolate-hcl": { group: "Ramps, scales, curves" }, "interpolate-lab": { group: "Ramps, scales, curves" }, ln2: { group: "Math" }, pi: { group: "Math" }, e: { group: "Math" }, typeof: { group: "Types" }, string: { group: "Types" }, number: { group: "Types" }, boolean: { group: "Types" }, object: { group: "Types" }, collator: { group: "Types" }, format: { group: "Types" }, image: { group: "Types" }, "number-format": { group: "Types" }, "to-string": { group: "Types" }, "to-number": { group: "Types" }, "to-boolean": { group: "Types" }, "to-rgba": { group: "Color" }, "to-color": { group: "Types" }, rgb: { group: "Color" }, rgba: { group: "Color" }, get: { group: "Lookup" }, has: { group: "Lookup" }, length: { group: "Lookup" }, properties: { group: "Feature data" }, "feature-state": { group: "Feature data" }, "geometry-type": { group: "Feature data" }, id: { group: "Feature data" }, zoom: { group: "Zoom" }, "heatmap-density": { group: "Heatmap" }, "line-progress": { group: "Feature data" }, accumulated: { group: "Feature data" }, "+": { group: "Math" }, "*": { group: "Math" }, "-": { group: "Math" }, "/": { group: "Math" }, "%": { group: "Math" }, "^": { group: "Math" }, sqrt: { group: "Math" }, log10: { group: "Math" }, ln: { group: "Math" }, log2: { group: "Math" }, sin: { group: "Math" }, cos: { group: "Math" }, tan: { group: "Math" }, asin: { group: "Math" }, acos: { group: "Math" }, atan: { group: "Math" }, min: { group: "Math" }, max: { group: "Math" }, round: { group: "Math" }, abs: { group: "Math" }, ceil: { group: "Math" }, floor: { group: "Math" }, distance: { group: "Math" }, "==": { group: "Decision" }, "!=": { group: "Decision" }, ">": { group: "Decision" }, "<": { group: "Decision" }, ">=": { group: "Decision" }, "<=": { group: "Decision" }, all: { group: "Decision" }, any: { group: "Decision" }, "!": { group: "Decision" }, within: { group: "Decision" }, "is-supported-script": { group: "String" }, upcase: { group: "String" }, downcase: { group: "String" }, concat: { group: "String" }, "resolved-locale": { group: "String" } } }, light: { anchor: { type: "enum", default: "viewport", values: { map: {}, viewport: {} }, "property-type": "data-constant", transition: false, expression: { interpolated: false, parameters: ["zoom"] } }, position: { type: "array", default: [1.15, 210, 30], length: 3, value: "number", "property-type": "data-constant", transition: true, expression: { interpolated: true, parameters: ["zoom"] } }, color: { type: "color", "property-type": "data-constant", default: "#ffffff", expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, intensity: { type: "number", "property-type": "data-constant", default: 0.5, minimum: 0, maximum: 1, expression: { interpolated: true, parameters: ["zoom"] }, transition: true } }, paint: ["paint_fill", "paint_line", "paint_circle", "paint_heatmap", "paint_fill-extrusion", "paint_symbol", "paint_raster", "paint_hillshade", "paint_background", "paint_esymbol"], paint_fill: { "fill-minzoom": { type: "number", default: 0, minimum: 0, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-maxzoom": { type: "number", default: 24, minimum: 1, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-antialias": { type: "boolean", default: true, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "fill-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-outline-color": { type: "color", transition: true, requires: [{ "!": "fill-pattern" }, { "fill-antialias": true }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["fill-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" } }, "paint_fill-extrusion": { "fill-extrusion-minzoom": { type: "number", default: 0, minimum: 0, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-maxzoom": { type: "number", default: 24, minimum: 1, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "fill-extrusion-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-topcolor": { type: "color", default: "rgba(0,0,0,0)", transition: true, requires: [{ "!": "fill-extrusion-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["fill-extrusion-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "fill-extrusion-height": { type: "number", default: 0, minimum: 0, units: "meters", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-base": { type: "number", default: 0, minimum: 0, units: "meters", transition: true, requires: ["fill-extrusion-height"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-vertical-gradient": { type: "boolean", default: true, transition: false, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_line: { "line-minzoom": { type: "number", default: 0, minimum: 0, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-maxzoom": { type: "number", default: 24, minimum: 1, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "line-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-outline-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "line-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["line-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-width": { type: "number", default: 1, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-outline-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-gap-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-offset": { type: "number", default: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-dasharray": { type: "array", value: "number", minimum: 0, transition: true, units: "line widths", requires: [{ "!": "line-pattern" }], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "line-outline-dasharray": { type: "array", value: "number", minimum: 0, transition: true, units: "line widths", requires: [{ "!": "line-pattern" }], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "line-outline-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "line-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "line-pattern-mode": { type: "number", default: 0, requires: [{ "!": "line-outline-pattern" }], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "line-pattern-color": { type: "boolean", default: false, requires: ["line-pattern", "line-color"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-gradient": { type: "color", transition: false, requires: [{ "!": "line-dasharray" }, { "!": "line-pattern" }, { source: "geojson", has: { lineMetrics: true } }], expression: { interpolated: true, parameters: ["line-progress"] }, "property-type": "color-ramp" } }, paint_circle: { "circle-minzoom": { type: "number", default: 0, minimum: 0, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-maxzoom": { type: "number", default: 24, minimum: 1, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-radius": { type: "number", default: 5, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-blur": { type: "number", default: 0, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["circle-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-pitch-scale": { type: "enum", values: { map: {}, viewport: {} }, default: "map", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-pitch-alignment": { type: "enum", values: { map: {}, viewport: {} }, default: "viewport", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-stroke-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-stroke-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-stroke-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" } }, paint_esymbol: { "esymbol-minzoom": { type: "number", default: 0, minimum: 0, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-maxzoom": { type: "number", default: 24, minimum: 1, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-radius": { type: "number", default: 40, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-color": { type: "color", default: "#b84842", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-blur": { type: "number", default: 0, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "esymbol-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["circle-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "esymbol-pitch-scale": { type: "enum", values: { map: {}, viewport: {} }, default: "map", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "esymbol-pitch-alignment": { type: "enum", values: { map: {}, viewport: {} }, default: "map", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "esymbol-stroke-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-stroke-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "esymbol-stroke-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" } }, paint_heatmap: { "heatmap-radius": { type: "number", default: 30, minimum: 1, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "heatmap-weight": { type: "number", default: 1, minimum: 0, transition: false, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "heatmap-intensity": { type: "number", default: 1, minimum: 0, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "heatmap-color": { type: "color", default: ["interpolate", ["linear"], ["heatmap-density"], 0, "rgba(0, 0, 255, 0)", 0.1, "royalblue", 0.3, "cyan", 0.5, "lime", 0.7, "yellow", 1, "red"], transition: false, expression: { interpolated: true, parameters: ["heatmap-density"] }, "property-type": "color-ramp" }, "heatmap-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_symbol: { "symbol-minzoom": { type: "number", default: 0, minimum: 0, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "symbol-maxzoom": { type: "number", default: 24, minimum: 1, maximum: 24, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-color": { type: "color", default: "#000000", transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-color": { type: "color", default: "rgba(0, 0, 0, 0)", transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["icon-image", "icon-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-color": { type: "color", default: "#000000", transition: true, overridable: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-color": { type: "color", default: "rgba(0, 0, 0, 0)", transition: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["text-field", "text-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_raster: { "raster-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-hue-rotate": { type: "number", default: 0, period: 360, transition: true, units: "degrees", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-brightness-min": { type: "number", default: 0, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-brightness-max": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-saturation": { type: "number", default: 0, minimum: -1, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-contrast": { type: "number", default: 0, minimum: -1, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-resampling": { type: "enum", values: { linear: {}, nearest: {} }, default: "linear", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-fade-duration": { type: "number", default: 300, minimum: 0, transition: false, units: "milliseconds", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_hillshade: { "hillshade-illumination-direction": { type: "number", default: 335, minimum: 0, maximum: 359, transition: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-illumination-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "viewport", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-exaggeration": { type: "number", default: 0.5, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-shadow-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-highlight-color": { type: "color", default: "#FFFFFF", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-accent-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_background: { "background-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "background-pattern" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "background-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "cross-faded" }, "background-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, transition: { duration: { type: "number", default: 300, minimum: 0, units: "milliseconds" }, delay: { type: "number", default: 0, minimum: 0, units: "milliseconds" } }, "property-type": { "data-driven": { type: "property-type" }, "cross-faded": { type: "property-type" }, "cross-faded-data-driven": { type: "property-type" }, "color-ramp": { type: "property-type" }, "data-constant": { type: "property-type" }, constant: { type: "property-type" } }, promoteId: { "*": { type: "string" } } }, Yt = function(t2, e2, r2, n2) {
      this.message = (t2 ? t2 + ": " : "") + r2, n2 && (this.identifier = n2), null != e2 && e2.__line__ && (this.line = e2.__line__);
    };
    function Xt(t2) {
      var e2 = t2.value;
      return e2 ? [new Yt(t2.key, e2, "constants have been deprecated as of v8")] : [];
    }
    function Kt(t2) {
      for (var e2 = [], r2 = arguments.length - 1; r2-- > 0; )
        e2[r2] = arguments[r2 + 1];
      for (var n2 = 0, i3 = e2; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2];
        for (var o2 in a2)
          t2[o2] = a2[o2];
      }
      return t2;
    }
    function Jt(t2) {
      return t2 instanceof Number || t2 instanceof String || t2 instanceof Boolean ? t2.valueOf() : t2;
    }
    function Ht(t2) {
      if (Array.isArray(t2))
        return t2.map(Ht);
      if (t2 instanceof Object && !(t2 instanceof Number || t2 instanceof String || t2 instanceof Boolean)) {
        var e2 = {};
        for (var r2 in t2)
          e2[r2] = Ht(t2[r2]);
        return e2;
      }
      return Jt(t2);
    }
    var Qt = function(t2) {
      function e2(e3, r2) {
        t2.call(this, r2), this.message = r2, this.key = e3;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2;
    }(Error), Wt = function(t2, e2) {
      void 0 === e2 && (e2 = []), this.parent = t2, this.bindings = {};
      for (var r2 = 0, n2 = e2; r2 < n2.length; r2 += 1) {
        var i3 = n2[r2];
        this.bindings[i3[0]] = i3[1];
      }
    };
    Wt.prototype.concat = function(t2) {
      return new Wt(this, t2);
    }, Wt.prototype.get = function(t2) {
      if (this.bindings[t2])
        return this.bindings[t2];
      if (this.parent)
        return this.parent.get(t2);
      throw new Error(t2 + " not found in scope.");
    }, Wt.prototype.has = function(t2) {
      return !!this.bindings[t2] || !!this.parent && this.parent.has(t2);
    };
    var $t = { kind: "null" }, te = { kind: "number" }, ee = { kind: "string" }, re = { kind: "boolean" }, ne = { kind: "color" }, ie = { kind: "object" }, ae = { kind: "value" }, oe = { kind: "collator" }, se = { kind: "formatted" }, ue = { kind: "resolvedImage" };
    function le(t2, e2) {
      return { kind: "array", itemType: t2, N: e2 };
    }
    function pe(t2) {
      if ("array" === t2.kind) {
        var e2 = pe(t2.itemType);
        return "number" == typeof t2.N ? "array<" + e2 + ", " + t2.N + ">" : "value" === t2.itemType.kind ? "array" : "array<" + e2 + ">";
      }
      return t2.kind;
    }
    var he = [$t, te, ee, re, ne, se, ie, le(ae), ue];
    function ce(t2, e2) {
      if ("error" === e2.kind)
        return null;
      if ("array" === t2.kind) {
        if ("array" === e2.kind && (0 === e2.N && "value" === e2.itemType.kind || !ce(t2.itemType, e2.itemType)) && ("number" != typeof t2.N || t2.N === e2.N))
          return null;
      } else {
        if (t2.kind === e2.kind)
          return null;
        if ("value" === t2.kind) {
          for (var r2 = 0, n2 = he; r2 < n2.length; r2 += 1)
            if (!ce(n2[r2], e2))
              return null;
        }
      }
      return "Expected " + pe(t2) + " but found " + pe(e2) + " instead.";
    }
    function fe(t2, e2) {
      return e2.some(function(e3) {
        return e3.kind === t2.kind;
      });
    }
    function ye(t2, e2) {
      return e2.some(function(e3) {
        return "null" === e3 ? null === t2 : "array" === e3 ? Array.isArray(t2) : "object" === e3 ? t2 && !Array.isArray(t2) && "object" == typeof t2 : e3 === typeof t2;
      });
    }
    var de = e(function(t2, e2) {
      var r2 = { transparent: [0, 0, 0, 0], aliceblue: [240, 248, 255, 1], antiquewhite: [250, 235, 215, 1], aqua: [0, 255, 255, 1], aquamarine: [127, 255, 212, 1], azure: [240, 255, 255, 1], beige: [245, 245, 220, 1], bisque: [255, 228, 196, 1], black: [0, 0, 0, 1], blanchedalmond: [255, 235, 205, 1], blue: [0, 0, 255, 1], blueviolet: [138, 43, 226, 1], brown: [165, 42, 42, 1], burlywood: [222, 184, 135, 1], cadetblue: [95, 158, 160, 1], chartreuse: [127, 255, 0, 1], chocolate: [210, 105, 30, 1], coral: [255, 127, 80, 1], cornflowerblue: [100, 149, 237, 1], cornsilk: [255, 248, 220, 1], crimson: [220, 20, 60, 1], cyan: [0, 255, 255, 1], darkblue: [0, 0, 139, 1], darkcyan: [0, 139, 139, 1], darkgoldenrod: [184, 134, 11, 1], darkgray: [169, 169, 169, 1], darkgreen: [0, 100, 0, 1], darkgrey: [169, 169, 169, 1], darkkhaki: [189, 183, 107, 1], darkmagenta: [139, 0, 139, 1], darkolivegreen: [85, 107, 47, 1], darkorange: [255, 140, 0, 1], darkorchid: [153, 50, 204, 1], darkred: [139, 0, 0, 1], darksalmon: [233, 150, 122, 1], darkseagreen: [143, 188, 143, 1], darkslateblue: [72, 61, 139, 1], darkslategray: [47, 79, 79, 1], darkslategrey: [47, 79, 79, 1], darkturquoise: [0, 206, 209, 1], darkviolet: [148, 0, 211, 1], deeppink: [255, 20, 147, 1], deepskyblue: [0, 191, 255, 1], dimgray: [105, 105, 105, 1], dimgrey: [105, 105, 105, 1], dodgerblue: [30, 144, 255, 1], firebrick: [178, 34, 34, 1], floralwhite: [255, 250, 240, 1], forestgreen: [34, 139, 34, 1], fuchsia: [255, 0, 255, 1], gainsboro: [220, 220, 220, 1], ghostwhite: [248, 248, 255, 1], gold: [255, 215, 0, 1], goldenrod: [218, 165, 32, 1], gray: [128, 128, 128, 1], green: [0, 128, 0, 1], greenyellow: [173, 255, 47, 1], grey: [128, 128, 128, 1], honeydew: [240, 255, 240, 1], hotpink: [255, 105, 180, 1], indianred: [205, 92, 92, 1], indigo: [75, 0, 130, 1], ivory: [255, 255, 240, 1], khaki: [240, 230, 140, 1], lavender: [230, 230, 250, 1], lavenderblush: [255, 240, 245, 1], lawngreen: [124, 252, 0, 1], lemonchiffon: [255, 250, 205, 1], lightblue: [173, 216, 230, 1], lightcoral: [240, 128, 128, 1], lightcyan: [224, 255, 255, 1], lightgoldenrodyellow: [250, 250, 210, 1], lightgray: [211, 211, 211, 1], lightgreen: [144, 238, 144, 1], lightgrey: [211, 211, 211, 1], lightpink: [255, 182, 193, 1], lightsalmon: [255, 160, 122, 1], lightseagreen: [32, 178, 170, 1], lightskyblue: [135, 206, 250, 1], lightslategray: [119, 136, 153, 1], lightslategrey: [119, 136, 153, 1], lightsteelblue: [176, 196, 222, 1], lightyellow: [255, 255, 224, 1], lime: [0, 255, 0, 1], limegreen: [50, 205, 50, 1], linen: [250, 240, 230, 1], magenta: [255, 0, 255, 1], maroon: [128, 0, 0, 1], mediumaquamarine: [102, 205, 170, 1], mediumblue: [0, 0, 205, 1], mediumorchid: [186, 85, 211, 1], mediumpurple: [147, 112, 219, 1], mediumseagreen: [60, 179, 113, 1], mediumslateblue: [123, 104, 238, 1], mediumspringgreen: [0, 250, 154, 1], mediumturquoise: [72, 209, 204, 1], mediumvioletred: [199, 21, 133, 1], midnightblue: [25, 25, 112, 1], mintcream: [245, 255, 250, 1], mistyrose: [255, 228, 225, 1], moccasin: [255, 228, 181, 1], navajowhite: [255, 222, 173, 1], navy: [0, 0, 128, 1], oldlace: [253, 245, 230, 1], olive: [128, 128, 0, 1], olivedrab: [107, 142, 35, 1], orange: [255, 165, 0, 1], orangered: [255, 69, 0, 1], orchid: [218, 112, 214, 1], palegoldenrod: [238, 232, 170, 1], palegreen: [152, 251, 152, 1], paleturquoise: [175, 238, 238, 1], palevioletred: [219, 112, 147, 1], papayawhip: [255, 239, 213, 1], peachpuff: [255, 218, 185, 1], peru: [205, 133, 63, 1], pink: [255, 192, 203, 1], plum: [221, 160, 221, 1], powderblue: [176, 224, 230, 1], purple: [128, 0, 128, 1], rebeccapurple: [102, 51, 153, 1], red: [255, 0, 0, 1], rosybrown: [188, 143, 143, 1], royalblue: [65, 105, 225, 1], saddlebrown: [139, 69, 19, 1], salmon: [250, 128, 114, 1], sandybrown: [244, 164, 96, 1], seagreen: [46, 139, 87, 1], seashell: [255, 245, 238, 1], sienna: [160, 82, 45, 1], silver: [192, 192, 192, 1], skyblue: [135, 206, 235, 1], slateblue: [106, 90, 205, 1], slategray: [112, 128, 144, 1], slategrey: [112, 128, 144, 1], snow: [255, 250, 250, 1], springgreen: [0, 255, 127, 1], steelblue: [70, 130, 180, 1], tan: [210, 180, 140, 1], teal: [0, 128, 128, 1], thistle: [216, 191, 216, 1], tomato: [255, 99, 71, 1], turquoise: [64, 224, 208, 1], violet: [238, 130, 238, 1], wheat: [245, 222, 179, 1], white: [255, 255, 255, 1], whitesmoke: [245, 245, 245, 1], yellow: [255, 255, 0, 1], yellowgreen: [154, 205, 50, 1] };
      function n2(t3) {
        return (t3 = Math.round(t3)) < 0 ? 0 : t3 > 255 ? 255 : t3;
      }
      function i3(t3) {
        return n2("%" === t3[t3.length - 1] ? parseFloat(t3) / 100 * 255 : parseInt(t3));
      }
      function a2(t3) {
        return (e3 = "%" === t3[t3.length - 1] ? parseFloat(t3) / 100 : parseFloat(t3)) < 0 ? 0 : e3 > 1 ? 1 : e3;
        var e3;
      }
      function o2(t3, e3, r3) {
        return r3 < 0 ? r3 += 1 : r3 > 1 && (r3 -= 1), 6 * r3 < 1 ? t3 + (e3 - t3) * r3 * 6 : 2 * r3 < 1 ? e3 : 3 * r3 < 2 ? t3 + (e3 - t3) * (2 / 3 - r3) * 6 : t3;
      }
      try {
        e2.parseCSSColor = function(t3) {
          var e3, s2 = t3.replace(/ /g, "").toLowerCase();
          if (s2 in r2)
            return r2[s2].slice();
          if ("#" === s2[0])
            return 4 === s2.length ? (e3 = parseInt(s2.substr(1), 16)) >= 0 && e3 <= 4095 ? [(3840 & e3) >> 4 | (3840 & e3) >> 8, 240 & e3 | (240 & e3) >> 4, 15 & e3 | (15 & e3) << 4, 1] : null : 7 === s2.length && (e3 = parseInt(s2.substr(1), 16)) >= 0 && e3 <= 16777215 ? [(16711680 & e3) >> 16, (65280 & e3) >> 8, 255 & e3, 1] : null;
          var u2 = s2.indexOf("("), l2 = s2.indexOf(")");
          if (-1 !== u2 && l2 + 1 === s2.length) {
            var p2 = s2.substr(0, u2), h2 = s2.substr(u2 + 1, l2 - (u2 + 1)).split(","), c2 = 1;
            switch (p2) {
              case "rgba":
                if (4 !== h2.length)
                  return null;
                c2 = a2(h2.pop());
              case "rgb":
                return 3 !== h2.length ? null : [i3(h2[0]), i3(h2[1]), i3(h2[2]), c2];
              case "hsla":
                if (4 !== h2.length)
                  return null;
                c2 = a2(h2.pop());
              case "hsl":
                if (3 !== h2.length)
                  return null;
                var f2 = (parseFloat(h2[0]) % 360 + 360) % 360 / 360, y2 = a2(h2[1]), d2 = a2(h2[2]), m2 = d2 <= 0.5 ? d2 * (y2 + 1) : d2 + y2 - d2 * y2, v2 = 2 * d2 - m2;
                return [n2(255 * o2(v2, m2, f2 + 1 / 3)), n2(255 * o2(v2, m2, f2)), n2(255 * o2(v2, m2, f2 - 1 / 3)), c2];
              default:
                return null;
            }
          }
          return null;
        };
      } catch (t3) {
      }
    }).parseCSSColor, me = function(t2, e2, r2, n2) {
      void 0 === n2 && (n2 = 1), this.r = t2, this.g = e2, this.b = r2, this.a = n2;
    };
    me.parse = function(t2) {
      if (t2) {
        if (t2 instanceof me)
          return t2;
        if ("string" == typeof t2) {
          var e2 = de(t2);
          if (e2)
            return new me(e2[0] / 255 * e2[3], e2[1] / 255 * e2[3], e2[2] / 255 * e2[3], e2[3]);
        }
      }
    }, me.prototype.toString = function() {
      var t2 = this.toArray(), e2 = t2[1], r2 = t2[2], n2 = t2[3];
      return "rgba(" + Math.round(t2[0]) + "," + Math.round(e2) + "," + Math.round(r2) + "," + n2 + ")";
    }, me.prototype.toArray = function() {
      var t2 = this.a;
      return 0 === t2 ? [0, 0, 0, 0] : [255 * this.r / t2, 255 * this.g / t2, 255 * this.b / t2, t2];
    }, me.black = new me(0, 0, 0, 1), me.white = new me(1, 1, 1, 1), me.transparent = new me(0, 0, 0, 0), me.red = new me(1, 0, 0, 1);
    var ve = function(t2, e2, r2) {
      this.sensitivity = t2 ? e2 ? "variant" : "case" : e2 ? "accent" : "base", this.locale = r2, this.collator = new Intl.Collator(this.locale ? this.locale : [], { sensitivity: this.sensitivity, usage: "search" });
    };
    ve.prototype.compare = function(t2, e2) {
      return this.collator.compare(t2, e2);
    }, ve.prototype.resolvedLocale = function() {
      return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;
    };
    var ge = function(t2, e2, r2, n2, i3) {
      this.text = t2, this.image = e2, this.scale = r2, this.fontStack = n2, this.textColor = i3;
    }, xe = function(t2) {
      this.sections = t2;
    };
    xe.fromString = function(t2) {
      return new xe([new ge(t2, null, null, null, null)]);
    }, xe.prototype.isEmpty = function() {
      return 0 === this.sections.length || !this.sections.some(function(t2) {
        return 0 !== t2.text.length || t2.image && 0 !== t2.image.name.length;
      });
    }, xe.factory = function(t2) {
      return t2 instanceof xe ? t2 : xe.fromString(t2);
    }, xe.prototype.toString = function() {
      return 0 === this.sections.length ? "" : this.sections.map(function(t2) {
        return t2.text;
      }).join("");
    }, xe.prototype.serialize = function() {
      for (var t2 = ["format"], e2 = 0, r2 = this.sections; e2 < r2.length; e2 += 1) {
        var n2 = r2[e2];
        if (n2.image)
          t2.push(["image", n2.image.name]);
        else {
          t2.push(n2.text);
          var i3 = {};
          n2.fontStack && (i3["text-font"] = ["literal", n2.fontStack.split(",")]), n2.scale && (i3["font-scale"] = n2.scale), n2.textColor && (i3["text-color"] = ["rgba"].concat(n2.textColor.toArray())), t2.push(i3);
        }
      }
      return t2;
    };
    var be = function(t2) {
      this.name = t2.name, this.available = t2.available;
    };
    function we(t2, e2, r2, n2) {
      return "number" == typeof t2 && t2 >= 0 && t2 <= 255 && "number" == typeof e2 && e2 >= 0 && e2 <= 255 && "number" == typeof r2 && r2 >= 0 && r2 <= 255 ? void 0 === n2 || "number" == typeof n2 && n2 >= 0 && n2 <= 1 ? null : "Invalid rgba value [" + [t2, e2, r2, n2].join(", ") + "]: 'a' must be between 0 and 1." : "Invalid rgba value [" + ("number" == typeof n2 ? [t2, e2, r2, n2] : [t2, e2, r2]).join(", ") + "]: 'r', 'g', and 'b' must be between 0 and 255.";
    }
    function _e(t2) {
      if (null === t2)
        return true;
      if ("string" == typeof t2)
        return true;
      if ("boolean" == typeof t2)
        return true;
      if ("number" == typeof t2)
        return true;
      if (t2 instanceof me)
        return true;
      if (t2 instanceof ve)
        return true;
      if (t2 instanceof xe)
        return true;
      if (t2 instanceof be)
        return true;
      if (Array.isArray(t2)) {
        for (var e2 = 0, r2 = t2; e2 < r2.length; e2 += 1)
          if (!_e(r2[e2]))
            return false;
        return true;
      }
      if ("object" == typeof t2) {
        for (var n2 in t2)
          if (!_e(t2[n2]))
            return false;
        return true;
      }
      return false;
    }
    function Ae(t2) {
      if (null === t2)
        return $t;
      if ("string" == typeof t2)
        return ee;
      if ("boolean" == typeof t2)
        return re;
      if ("number" == typeof t2)
        return te;
      if (t2 instanceof me)
        return ne;
      if (t2 instanceof ve)
        return oe;
      if (t2 instanceof xe)
        return se;
      if (t2 instanceof be)
        return ue;
      if (Array.isArray(t2)) {
        for (var e2, r2 = t2.length, n2 = 0, i3 = t2; n2 < i3.length; n2 += 1) {
          var a2 = Ae(i3[n2]);
          if (e2) {
            if (e2 === a2)
              continue;
            e2 = ae;
            break;
          }
          e2 = a2;
        }
        return le(e2 || ae, r2);
      }
      return ie;
    }
    function Se(t2) {
      var e2 = typeof t2;
      return null === t2 ? "" : "string" === e2 || "number" === e2 || "boolean" === e2 ? String(t2) : t2 instanceof me || t2 instanceof xe || t2 instanceof be ? t2.toString() : JSON.stringify(t2);
    }
    be.prototype.toString = function() {
      return this.name;
    }, be.fromString = function(t2) {
      return t2 ? new be({ name: t2, available: false }) : null;
    }, be.prototype.serialize = function() {
      return ["image", this.name];
    };
    var ze = function(t2, e2) {
      this.type = t2, this.value = e2;
    };
    ze.parse = function(t2, e2) {
      if (2 !== t2.length)
        return e2.error("'literal' expression requires exactly one argument, but found " + (t2.length - 1) + " instead.");
      if (!_e(t2[1]))
        return e2.error("invalid value");
      var r2 = t2[1], n2 = Ae(r2), i3 = e2.expectedType;
      return "array" !== n2.kind || 0 !== n2.N || !i3 || "array" !== i3.kind || "number" == typeof i3.N && 0 !== i3.N || (n2 = i3), new ze(n2, r2);
    }, ze.prototype.evaluate = function() {
      return this.value;
    }, ze.prototype.eachChild = function() {
    }, ze.prototype.outputDefined = function() {
      return true;
    }, ze.prototype.serialize = function() {
      return "array" === this.type.kind || "object" === this.type.kind ? ["literal", this.value] : this.value instanceof me ? ["rgba"].concat(this.value.toArray()) : this.value instanceof xe ? this.value.serialize() : this.value;
    };
    var Ie = function(t2) {
      this.name = "ExpressionEvaluationError", this.message = t2;
    };
    Ie.prototype.toJSON = function() {
      return this.message;
    };
    var ke = { string: ee, number: te, boolean: re, object: ie }, Me = function(t2, e2) {
      this.type = t2, this.args = e2;
    };
    Me.parse = function(t2, e2) {
      if (t2.length < 2)
        return e2.error("Expected at least one argument.");
      var r2, n2 = 1, i3 = t2[0];
      if ("array" === i3) {
        var a2, o2;
        if (t2.length > 2) {
          var s2 = t2[1];
          if ("string" != typeof s2 || !(s2 in ke) || "object" === s2)
            return e2.error('The item type argument of "array" must be one of string, number, boolean', 1);
          a2 = ke[s2], n2++;
        } else
          a2 = ae;
        if (t2.length > 3) {
          if (null !== t2[2] && ("number" != typeof t2[2] || t2[2] < 0 || t2[2] !== Math.floor(t2[2])))
            return e2.error('The length argument to "array" must be a positive integer literal', 2);
          o2 = t2[2], n2++;
        }
        r2 = le(a2, o2);
      } else
        r2 = ke[i3];
      for (var u2 = []; n2 < t2.length; n2++) {
        var l2 = e2.parse(t2[n2], n2, ae);
        if (!l2)
          return null;
        u2.push(l2);
      }
      return new Me(r2, u2);
    }, Me.prototype.evaluate = function(t2) {
      for (var e2 = 0; e2 < this.args.length; e2++) {
        var r2 = this.args[e2].evaluate(t2);
        if (!ce(this.type, Ae(r2)))
          return r2;
        if (e2 === this.args.length - 1)
          throw new Ie("Expected value to be of type " + pe(this.type) + ", but found " + pe(Ae(r2)) + " instead.");
      }
      return null;
    }, Me.prototype.eachChild = function(t2) {
      this.args.forEach(t2);
    }, Me.prototype.outputDefined = function() {
      return this.args.every(function(t2) {
        return t2.outputDefined();
      });
    }, Me.prototype.serialize = function() {
      var t2 = this.type, e2 = [t2.kind];
      if ("array" === t2.kind) {
        var r2 = t2.itemType;
        if ("string" === r2.kind || "number" === r2.kind || "boolean" === r2.kind) {
          e2.push(r2.kind);
          var n2 = t2.N;
          ("number" == typeof n2 || this.args.length > 1) && e2.push(n2);
        }
      }
      return e2.concat(this.args.map(function(t3) {
        return t3.serialize();
      }));
    };
    var Pe = function(t2) {
      this.type = se, this.sections = t2;
    };
    Pe.parse = function(t2, e2) {
      if (t2.length < 2)
        return e2.error("Expected at least one argument.");
      var r2 = t2[1];
      if (!Array.isArray(r2) && "object" == typeof r2)
        return e2.error("First argument must be an image or text section.");
      for (var n2 = [], i3 = false, a2 = 1; a2 <= t2.length - 1; ++a2) {
        var o2 = t2[a2];
        if (i3 && "object" == typeof o2 && !Array.isArray(o2)) {
          i3 = false;
          var s2 = null;
          if (o2["font-scale"] && !(s2 = e2.parse(o2["font-scale"], 1, te)))
            return null;
          var u2 = null;
          if (o2["text-font"] && !(u2 = e2.parse(o2["text-font"], 1, le(ee))))
            return null;
          var l2 = null;
          if (o2["text-color"] && !(l2 = e2.parse(o2["text-color"], 1, ne)))
            return null;
          var p2 = n2[n2.length - 1];
          p2.scale = s2, p2.font = u2, p2.textColor = l2;
        } else {
          var h2 = e2.parse(t2[a2], 1, ae);
          if (!h2)
            return null;
          var c2 = h2.type.kind;
          if ("string" !== c2 && "value" !== c2 && "null" !== c2 && "resolvedImage" !== c2)
            return e2.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");
          i3 = true, n2.push({ content: h2, scale: null, font: null, textColor: null });
        }
      }
      return new Pe(n2);
    }, Pe.prototype.evaluate = function(t2) {
      return new xe(this.sections.map(function(e2) {
        var r2 = e2.content.evaluate(t2);
        return Ae(r2) === ue ? new ge("", r2, null, null, null) : new ge(Se(r2), null, e2.scale ? e2.scale.evaluate(t2) : null, e2.font ? e2.font.evaluate(t2).join(",") : null, e2.textColor ? e2.textColor.evaluate(t2) : null);
      }));
    }, Pe.prototype.eachChild = function(t2) {
      for (var e2 = 0, r2 = this.sections; e2 < r2.length; e2 += 1) {
        var n2 = r2[e2];
        t2(n2.content), n2.scale && t2(n2.scale), n2.font && t2(n2.font), n2.textColor && t2(n2.textColor);
      }
    }, Pe.prototype.outputDefined = function() {
      return false;
    }, Pe.prototype.serialize = function() {
      for (var t2 = ["format"], e2 = 0, r2 = this.sections; e2 < r2.length; e2 += 1) {
        var n2 = r2[e2];
        t2.push(n2.content.serialize());
        var i3 = {};
        n2.scale && (i3["font-scale"] = n2.scale.serialize()), n2.font && (i3["text-font"] = n2.font.serialize()), n2.textColor && (i3["text-color"] = n2.textColor.serialize()), t2.push(i3);
      }
      return t2;
    };
    var Ve = function(t2) {
      this.type = ue, this.input = t2;
    };
    Ve.parse = function(t2, e2) {
      if (2 !== t2.length)
        return e2.error("Expected two arguments.");
      var r2 = e2.parse(t2[1], 1, ee);
      return r2 ? new Ve(r2) : e2.error("No image name provided.");
    }, Ve.prototype.evaluate = function(t2) {
      var e2 = this.input.evaluate(t2), r2 = be.fromString(e2);
      return r2 && t2.availableImages && (r2.available = t2.availableImages.indexOf(e2) > -1), r2;
    }, Ve.prototype.eachChild = function(t2) {
      t2(this.input);
    }, Ve.prototype.outputDefined = function() {
      return false;
    }, Ve.prototype.serialize = function() {
      return ["image", this.input.serialize()];
    };
    var Ce = { "to-boolean": re, "to-color": ne, "to-number": te, "to-string": ee }, Te = function(t2, e2) {
      this.type = t2, this.args = e2;
    };
    Te.parse = function(t2, e2) {
      if (t2.length < 2)
        return e2.error("Expected at least one argument.");
      var r2 = t2[0];
      if (("to-boolean" === r2 || "to-string" === r2) && 2 !== t2.length)
        return e2.error("Expected one argument.");
      for (var n2 = Ce[r2], i3 = [], a2 = 1; a2 < t2.length; a2++) {
        var o2 = e2.parse(t2[a2], a2, ae);
        if (!o2)
          return null;
        i3.push(o2);
      }
      return new Te(n2, i3);
    }, Te.prototype.evaluate = function(t2) {
      if ("boolean" === this.type.kind)
        return Boolean(this.args[0].evaluate(t2));
      if ("color" === this.type.kind) {
        for (var e2, r2, n2 = 0, i3 = this.args; n2 < i3.length; n2 += 1) {
          if (r2 = null, (e2 = i3[n2].evaluate(t2)) instanceof me)
            return e2;
          if ("string" == typeof e2) {
            var a2 = t2.parseColor(e2);
            if (a2)
              return a2;
          } else if (Array.isArray(e2) && !(r2 = e2.length < 3 || e2.length > 4 ? "Invalid rbga value " + JSON.stringify(e2) + ": expected an array containing either three or four numeric values." : we(e2[0], e2[1], e2[2], e2[3])))
            return new me(e2[0] / 255, e2[1] / 255, e2[2] / 255, e2[3]);
        }
        throw new Ie(r2 || "Could not parse color from value '" + ("string" == typeof e2 ? e2 : String(JSON.stringify(e2))) + "'");
      }
      if ("number" === this.type.kind) {
        for (var o2 = null, s2 = 0, u2 = this.args; s2 < u2.length; s2 += 1) {
          if (null === (o2 = u2[s2].evaluate(t2)))
            return 0;
          var l2 = Number(o2);
          if (!isNaN(l2))
            return l2;
        }
        throw new Ie("Could not convert " + JSON.stringify(o2) + " to number.");
      }
      return "formatted" === this.type.kind ? xe.fromString(Se(this.args[0].evaluate(t2))) : "resolvedImage" === this.type.kind ? be.fromString(Se(this.args[0].evaluate(t2))) : Se(this.args[0].evaluate(t2));
    }, Te.prototype.eachChild = function(t2) {
      this.args.forEach(t2);
    }, Te.prototype.outputDefined = function() {
      return this.args.every(function(t2) {
        return t2.outputDefined();
      });
    }, Te.prototype.serialize = function() {
      if ("formatted" === this.type.kind)
        return new Pe([{ content: this.args[0], scale: null, font: null, textColor: null }]).serialize();
      if ("resolvedImage" === this.type.kind)
        return new Ve(this.args[0]).serialize();
      var t2 = ["to-" + this.type.kind];
      return this.eachChild(function(e2) {
        t2.push(e2.serialize());
      }), t2;
    };
    var Ee = ["Unknown", "Point", "LineString", "Polygon"], Be = function() {
      this.globals = null, this.feature = null, this.featureState = null, this.formattedSection = null, this._parseColorCache = {}, this.availableImages = null, this.canonical = null;
    };
    Be.prototype.id = function() {
      return this.feature && "id" in this.feature ? this.feature.id : null;
    }, Be.prototype.geometryType = function() {
      return this.feature ? "number" == typeof this.feature.type ? Ee[this.feature.type] : this.feature.type : null;
    }, Be.prototype.geometry = function() {
      return this.feature && "geometry" in this.feature ? this.feature.geometry : null;
    }, Be.prototype.canonicalID = function() {
      return this.canonical;
    }, Be.prototype.properties = function() {
      return this.feature && this.feature.properties || {};
    }, Be.prototype.parseColor = function(t2) {
      var e2 = this._parseColorCache[t2];
      return e2 || (e2 = this._parseColorCache[t2] = me.parse(t2)), e2;
    };
    var De = function(t2, e2, r2, n2) {
      this.name = t2, this.type = e2, this._evaluate = r2, this.args = n2;
    };
    De.prototype.evaluate = function(t2) {
      return this._evaluate(t2, this.args);
    }, De.prototype.eachChild = function(t2) {
      this.args.forEach(t2);
    }, De.prototype.outputDefined = function() {
      return false;
    }, De.prototype.serialize = function() {
      return [this.name].concat(this.args.map(function(t2) {
        return t2.serialize();
      }));
    }, De.parse = function(t2, e2) {
      var r2, n2 = t2[0], i3 = De.definitions[n2];
      if (!i3)
        return e2.error('Unknown expression "' + n2 + '". If you wanted a literal array, use ["literal", [...]].', 0);
      for (var a2 = Array.isArray(i3) ? i3[0] : i3.type, o2 = Array.isArray(i3) ? [[i3[1], i3[2]]] : i3.overloads, s2 = o2.filter(function(e3) {
        var r3 = e3[0];
        return !Array.isArray(r3) || r3.length === t2.length - 1;
      }), u2 = null, l2 = 0, p2 = s2; l2 < p2.length; l2 += 1) {
        var h2 = p2[l2], c2 = h2[0], f2 = h2[1];
        u2 = new nr(e2.registry, e2.path, null, e2.scope);
        for (var y2 = [], d2 = false, m2 = 1; m2 < t2.length; m2++) {
          var v2 = t2[m2], g2 = Array.isArray(c2) ? c2[m2 - 1] : c2.type, x2 = u2.parse(v2, 1 + y2.length, g2);
          if (!x2) {
            d2 = true;
            break;
          }
          y2.push(x2);
        }
        if (!d2)
          if (Array.isArray(c2) && c2.length !== y2.length)
            u2.error("Expected " + c2.length + " arguments, but found " + y2.length + " instead.");
          else {
            for (var b2 = 0; b2 < y2.length; b2++) {
              var w2 = Array.isArray(c2) ? c2[b2] : c2.type, _2 = y2[b2];
              u2.concat(b2 + 1).checkSubtype(w2, _2.type);
            }
            if (0 === u2.errors.length)
              return new De(n2, a2, f2, y2);
          }
      }
      if (1 === s2.length)
        (r2 = e2.errors).push.apply(r2, u2.errors);
      else {
        for (var A2 = (s2.length ? s2 : o2).map(function(t3) {
          var e3;
          return e3 = t3[0], Array.isArray(e3) ? "(" + e3.map(pe).join(", ") + ")" : "(" + pe(e3.type) + "...)";
        }).join(" | "), S2 = [], z2 = 1; z2 < t2.length; z2++) {
          var I2 = e2.parse(t2[z2], 1 + S2.length);
          if (!I2)
            return null;
          S2.push(pe(I2.type));
        }
        e2.error("Expected arguments of type " + A2 + ", but found (" + S2.join(", ") + ") instead.");
      }
      return null;
    }, De.register = function(t2, e2) {
      for (var r2 in De.definitions = e2, e2)
        t2[r2] = De;
    };
    var Le = function(t2, e2, r2) {
      this.type = oe, this.locale = r2, this.caseSensitive = t2, this.diacriticSensitive = e2;
    };
    function Fe(t2, e2) {
      t2[0] = Math.min(t2[0], e2[0]), t2[1] = Math.min(t2[1], e2[1]), t2[2] = Math.max(t2[2], e2[0]), t2[3] = Math.max(t2[3], e2[1]);
    }
    function Re(t2, e2) {
      return !(t2[0] <= e2[0] || t2[2] >= e2[2] || t2[1] <= e2[1] || t2[3] >= e2[3]);
    }
    function Oe(t2, e2) {
      var r2 = (180 + t2[0]) / 360, n2 = (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t2[1] * Math.PI / 360))) / 360, i3 = Math.pow(2, e2.z);
      return [Math.round(r2 * i3 * 8192), Math.round(n2 * i3 * 8192)];
    }
    function je(t2, e2, r2) {
      return e2[1] > t2[1] != r2[1] > t2[1] && t2[0] < (r2[0] - e2[0]) * (t2[1] - e2[1]) / (r2[1] - e2[1]) + e2[0];
    }
    function Ue(t2, e2) {
      for (var r2, n2, i3, a2, o2, s2, u2, l2 = false, p2 = 0, h2 = e2.length; p2 < h2; p2++)
        for (var c2 = e2[p2], f2 = 0, y2 = c2.length; f2 < y2 - 1; f2++) {
          if ((a2 = (r2 = t2)[0] - (n2 = c2[f2])[0]) * (u2 = r2[1] - (i3 = c2[f2 + 1])[1]) - (s2 = r2[0] - i3[0]) * (o2 = r2[1] - n2[1]) == 0 && a2 * s2 <= 0 && o2 * u2 <= 0)
            return false;
          je(t2, c2[f2], c2[f2 + 1]) && (l2 = !l2);
        }
      return l2;
    }
    function qe(t2, e2) {
      for (var r2 = 0; r2 < e2.length; r2++)
        if (Ue(t2, e2[r2]))
          return true;
      return false;
    }
    function Ne(t2, e2, r2, n2) {
      var i3 = n2[0] - r2[0], a2 = n2[1] - r2[1], o2 = (t2[0] - r2[0]) * a2 - i3 * (t2[1] - r2[1]), s2 = (e2[0] - r2[0]) * a2 - i3 * (e2[1] - r2[1]);
      return o2 > 0 && s2 < 0 || o2 < 0 && s2 > 0;
    }
    function Ze(t2, e2, r2) {
      for (var n2 = 0, i3 = r2; n2 < i3.length; n2 += 1)
        for (var a2 = i3[n2], o2 = 0; o2 < a2.length - 1; ++o2)
          if (0 != (h2 = [(p2 = a2[o2 + 1])[0] - (l2 = a2[o2])[0], p2[1] - l2[1]])[0] * (c2 = [(u2 = e2)[0] - (s2 = t2)[0], u2[1] - s2[1]])[1] - h2[1] * c2[0] && Ne(s2, u2, l2, p2) && Ne(l2, p2, s2, u2))
            return true;
      var s2, u2, l2, p2, h2, c2;
      return false;
    }
    function Ge(t2, e2) {
      for (var r2 = 0; r2 < t2.length; ++r2)
        if (!Ue(t2[r2], e2))
          return false;
      for (var n2 = 0; n2 < t2.length - 1; ++n2)
        if (Ze(t2[n2], t2[n2 + 1], e2))
          return false;
      return true;
    }
    function Ye(t2, e2) {
      for (var r2 = 0; r2 < e2.length; r2++)
        if (Ge(t2, e2[r2]))
          return true;
      return false;
    }
    function Xe(t2, e2, r2) {
      for (var n2 = [], i3 = 0; i3 < t2.length; i3++) {
        for (var a2 = [], o2 = 0; o2 < t2[i3].length; o2++) {
          var s2 = Oe(t2[i3][o2], r2);
          Fe(e2, s2), a2.push(s2);
        }
        n2.push(a2);
      }
      return n2;
    }
    function Ke(t2, e2, r2) {
      for (var n2 = [], i3 = 0; i3 < t2.length; i3++) {
        var a2 = Xe(t2[i3], e2, r2);
        n2.push(a2);
      }
      return n2;
    }
    function Je(t2, e2, r2, n2) {
      if (t2[0] < r2[0] || t2[0] > r2[2]) {
        var i3 = 0.5 * n2, a2 = t2[0] - r2[0] > i3 ? -n2 : r2[0] - t2[0] > i3 ? n2 : 0;
        0 === a2 && (a2 = t2[0] - r2[2] > i3 ? -n2 : r2[2] - t2[0] > i3 ? n2 : 0), t2[0] += a2;
      }
      Fe(e2, t2);
    }
    function He(t2, e2, r2, n2) {
      for (var i3 = 8192 * Math.pow(2, n2.z), a2 = [8192 * n2.x, 8192 * n2.y], o2 = [], s2 = 0, u2 = t2; s2 < u2.length; s2 += 1)
        for (var l2 = 0, p2 = u2[s2]; l2 < p2.length; l2 += 1) {
          var h2 = p2[l2], c2 = [h2.x + a2[0], h2.y + a2[1]];
          Je(c2, e2, r2, i3), o2.push(c2);
        }
      return o2;
    }
    function Qe(t2, e2, r2, n2) {
      for (var i3, a2 = 8192 * Math.pow(2, n2.z), o2 = [8192 * n2.x, 8192 * n2.y], s2 = [], u2 = 0, l2 = t2; u2 < l2.length; u2 += 1) {
        for (var p2 = [], h2 = 0, c2 = l2[u2]; h2 < c2.length; h2 += 1) {
          var f2 = c2[h2], y2 = [f2.x + o2[0], f2.y + o2[1]];
          Fe(e2, y2), p2.push(y2);
        }
        s2.push(p2);
      }
      if (e2[2] - e2[0] <= a2 / 2) {
        (i3 = e2)[0] = i3[1] = 1 / 0, i3[2] = i3[3] = -1 / 0;
        for (var d2 = 0, m2 = s2; d2 < m2.length; d2 += 1)
          for (var v2 = 0, g2 = m2[d2]; v2 < g2.length; v2 += 1)
            Je(g2[v2], e2, r2, a2);
      }
      return s2;
    }
    Le.parse = function(t2, e2) {
      if (2 !== t2.length)
        return e2.error("Expected one argument.");
      var r2 = t2[1];
      if ("object" != typeof r2 || Array.isArray(r2))
        return e2.error("Collator options argument must be an object.");
      var n2 = e2.parse(void 0 !== r2["case-sensitive"] && r2["case-sensitive"], 1, re);
      if (!n2)
        return null;
      var i3 = e2.parse(void 0 !== r2["diacritic-sensitive"] && r2["diacritic-sensitive"], 1, re);
      if (!i3)
        return null;
      var a2 = null;
      return r2.locale && !(a2 = e2.parse(r2.locale, 1, ee)) ? null : new Le(n2, i3, a2);
    }, Le.prototype.evaluate = function(t2) {
      return new ve(this.caseSensitive.evaluate(t2), this.diacriticSensitive.evaluate(t2), this.locale ? this.locale.evaluate(t2) : null);
    }, Le.prototype.eachChild = function(t2) {
      t2(this.caseSensitive), t2(this.diacriticSensitive), this.locale && t2(this.locale);
    }, Le.prototype.outputDefined = function() {
      return false;
    }, Le.prototype.serialize = function() {
      var t2 = {};
      return t2["case-sensitive"] = this.caseSensitive.serialize(), t2["diacritic-sensitive"] = this.diacriticSensitive.serialize(), this.locale && (t2.locale = this.locale.serialize()), ["collator", t2];
    };
    var We = function(t2, e2) {
      this.type = re, this.geojson = t2, this.geometries = e2;
    };
    function $e(t2) {
      if (t2 instanceof De) {
        if ("get" === t2.name && 1 === t2.args.length)
          return false;
        if ("feature-state" === t2.name)
          return false;
        if ("has" === t2.name && 1 === t2.args.length)
          return false;
        if ("properties" === t2.name || "geometry-type" === t2.name || "id" === t2.name)
          return false;
        if (/^filter-/.test(t2.name))
          return false;
      }
      if (t2 instanceof We)
        return false;
      var e2 = true;
      return t2.eachChild(function(t3) {
        e2 && !$e(t3) && (e2 = false);
      }), e2;
    }
    function tr(t2) {
      if (t2 instanceof De && "feature-state" === t2.name)
        return false;
      var e2 = true;
      return t2.eachChild(function(t3) {
        e2 && !tr(t3) && (e2 = false);
      }), e2;
    }
    function er(t2, e2) {
      if (t2 instanceof De && e2.indexOf(t2.name) >= 0)
        return false;
      var r2 = true;
      return t2.eachChild(function(t3) {
        r2 && !er(t3, e2) && (r2 = false);
      }), r2;
    }
    We.parse = function(t2, e2) {
      if (2 !== t2.length)
        return e2.error("'within' expression requires exactly one argument, but found " + (t2.length - 1) + " instead.");
      if (_e(t2[1])) {
        var r2 = t2[1];
        if ("FeatureCollection" === r2.type)
          for (var n2 = 0; n2 < r2.features.length; ++n2) {
            var i3 = r2.features[n2].geometry.type;
            if ("Polygon" === i3 || "MultiPolygon" === i3)
              return new We(r2, r2.features[n2].geometry);
          }
        else if ("Feature" === r2.type) {
          var a2 = r2.geometry.type;
          if ("Polygon" === a2 || "MultiPolygon" === a2)
            return new We(r2, r2.geometry);
        } else if ("Polygon" === r2.type || "MultiPolygon" === r2.type)
          return new We(r2, r2);
      }
      return e2.error("'within' expression requires valid geojson object that contains polygon geometry type.");
    }, We.prototype.evaluate = function(t2) {
      if (null != t2.geometry() && null != t2.canonicalID()) {
        if ("Point" === t2.geometryType())
          return function(t3, e2) {
            var r2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], n2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], i3 = t3.canonicalID();
            if ("Polygon" === e2.type) {
              var a2 = Xe(e2.coordinates, n2, i3), o2 = He(t3.geometry(), r2, n2, i3);
              if (!Re(r2, n2))
                return false;
              for (var s2 = 0, u2 = o2; s2 < u2.length; s2 += 1)
                if (!Ue(u2[s2], a2))
                  return false;
            }
            if ("MultiPolygon" === e2.type) {
              var l2 = Ke(e2.coordinates, n2, i3), p2 = He(t3.geometry(), r2, n2, i3);
              if (!Re(r2, n2))
                return false;
              for (var h2 = 0, c2 = p2; h2 < c2.length; h2 += 1)
                if (!qe(c2[h2], l2))
                  return false;
            }
            return true;
          }(t2, this.geometries);
        if ("LineString" === t2.geometryType())
          return function(t3, e2) {
            var r2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], n2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], i3 = t3.canonicalID();
            if ("Polygon" === e2.type) {
              var a2 = Xe(e2.coordinates, n2, i3), o2 = Qe(t3.geometry(), r2, n2, i3);
              if (!Re(r2, n2))
                return false;
              for (var s2 = 0, u2 = o2; s2 < u2.length; s2 += 1)
                if (!Ge(u2[s2], a2))
                  return false;
            }
            if ("MultiPolygon" === e2.type) {
              var l2 = Ke(e2.coordinates, n2, i3), p2 = Qe(t3.geometry(), r2, n2, i3);
              if (!Re(r2, n2))
                return false;
              for (var h2 = 0, c2 = p2; h2 < c2.length; h2 += 1)
                if (!Ye(c2[h2], l2))
                  return false;
            }
            return true;
          }(t2, this.geometries);
      }
      return false;
    }, We.prototype.eachChild = function() {
    }, We.prototype.outputDefined = function() {
      return true;
    }, We.prototype.serialize = function() {
      return ["within", this.geojson];
    };
    var rr = function(t2, e2) {
      this.type = e2.type, this.name = t2, this.boundExpression = e2;
    };
    rr.parse = function(t2, e2) {
      if (2 !== t2.length || "string" != typeof t2[1])
        return e2.error("'var' expression requires exactly one string literal argument.");
      var r2 = t2[1];
      return e2.scope.has(r2) ? new rr(r2, e2.scope.get(r2)) : e2.error('Unknown variable "' + r2 + '". Make sure "' + r2 + '" has been bound in an enclosing "let" expression before using it.', 1);
    }, rr.prototype.evaluate = function(t2) {
      return this.boundExpression.evaluate(t2);
    }, rr.prototype.eachChild = function() {
    }, rr.prototype.outputDefined = function() {
      return false;
    }, rr.prototype.serialize = function() {
      return ["var", this.name];
    };
    var nr = function(t2, e2, r2, n2, i3) {
      void 0 === e2 && (e2 = []), void 0 === n2 && (n2 = new Wt()), void 0 === i3 && (i3 = []), this.registry = t2, this.path = e2, this.key = e2.map(function(t3) {
        return "[" + t3 + "]";
      }).join(""), this.scope = n2, this.errors = i3, this.expectedType = r2;
    };
    function ir(t2, e2) {
      for (var r2, n2 = t2.length - 1, i3 = 0, a2 = n2, o2 = 0; i3 <= a2; )
        if ((r2 = t2[o2 = Math.floor((i3 + a2) / 2)]) <= e2) {
          if (o2 === n2 || e2 < t2[o2 + 1])
            return o2;
          i3 = o2 + 1;
        } else {
          if (!(r2 > e2))
            throw new Ie("Input is not a number.");
          a2 = o2 - 1;
        }
      return 0;
    }
    nr.prototype.parse = function(t2, e2, r2, n2, i3) {
      return void 0 === i3 && (i3 = {}), e2 ? this.concat(e2, r2, n2)._parse(t2, i3) : this._parse(t2, i3);
    }, nr.prototype._parse = function(t2, e2) {
      function r2(t3, e3, r3) {
        return "assert" === r3 ? new Me(e3, [t3]) : "coerce" === r3 ? new Te(e3, [t3]) : t3;
      }
      if (null !== t2 && "string" != typeof t2 && "boolean" != typeof t2 && "number" != typeof t2 || (t2 = ["literal", t2]), Array.isArray(t2)) {
        if (0 === t2.length)
          return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
        var n2 = t2[0];
        if ("string" != typeof n2)
          return this.error("Expression name must be a string, but found " + typeof n2 + ' instead. If you wanted a literal array, use ["literal", [...]].', 0), null;
        var i3 = this.registry[n2];
        if (i3) {
          var a2 = i3.parse(t2, this);
          if (!a2)
            return null;
          if (this.expectedType) {
            var o2 = this.expectedType, s2 = a2.type;
            if ("string" !== o2.kind && "number" !== o2.kind && "boolean" !== o2.kind && "object" !== o2.kind && "array" !== o2.kind || "value" !== s2.kind)
              if ("color" !== o2.kind && "formatted" !== o2.kind && "resolvedImage" !== o2.kind || "value" !== s2.kind && "string" !== s2.kind) {
                if (this.checkSubtype(o2, s2))
                  return null;
              } else
                a2 = r2(a2, o2, e2.typeAnnotation || "coerce");
            else
              a2 = r2(a2, o2, e2.typeAnnotation || "assert");
          }
          if (!(a2 instanceof ze) && "resolvedImage" !== a2.type.kind && function t3(e3) {
            if (e3 instanceof rr)
              return t3(e3.boundExpression);
            if (e3 instanceof De && "error" === e3.name)
              return false;
            if (e3 instanceof Le)
              return false;
            if (e3 instanceof We)
              return false;
            var r3 = e3 instanceof Te || e3 instanceof Me, n3 = true;
            return e3.eachChild(function(e4) {
              n3 = r3 ? n3 && t3(e4) : n3 && e4 instanceof ze;
            }), !!n3 && $e(e3) && er(e3, ["zoom", "heatmap-density", "line-progress", "accumulated", "is-supported-script"]);
          }(a2)) {
            var u2 = new Be();
            try {
              a2 = new ze(a2.type, a2.evaluate(u2));
            } catch (t3) {
              return this.error(t3.message), null;
            }
          }
          return a2;
        }
        return this.error('Unknown expression "' + n2 + '". If you wanted a literal array, use ["literal", [...]].', 0);
      }
      return this.error(void 0 === t2 ? "'undefined' value invalid. Use null instead." : "object" == typeof t2 ? 'Bare objects invalid. Use ["literal", {...}] instead.' : "Expected an array, but found " + typeof t2 + " instead.");
    }, nr.prototype.concat = function(t2, e2, r2) {
      var n2 = "number" == typeof t2 ? this.path.concat(t2) : this.path, i3 = r2 ? this.scope.concat(r2) : this.scope;
      return new nr(this.registry, n2, e2 || null, i3, this.errors);
    }, nr.prototype.error = function(t2) {
      for (var e2 = [], r2 = arguments.length - 1; r2-- > 0; )
        e2[r2] = arguments[r2 + 1];
      var n2 = "" + this.key + e2.map(function(t3) {
        return "[" + t3 + "]";
      }).join("");
      this.errors.push(new Qt(n2, t2));
    }, nr.prototype.checkSubtype = function(t2, e2) {
      var r2 = ce(t2, e2);
      return r2 && this.error(r2), r2;
    };
    var ar = function(t2, e2, r2) {
      this.type = t2, this.input = e2, this.labels = [], this.outputs = [];
      for (var n2 = 0, i3 = r2; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2], o2 = a2[1];
        this.labels.push(a2[0]), this.outputs.push(o2);
      }
    };
    function or(t2, e2, r2) {
      return t2 * (1 - r2) + e2 * r2;
    }
    ar.parse = function(t2, e2) {
      if (t2.length - 1 < 4)
        return e2.error("Expected at least 4 arguments, but found only " + (t2.length - 1) + ".");
      if ((t2.length - 1) % 2 != 0)
        return e2.error("Expected an even number of arguments.");
      var r2 = e2.parse(t2[1], 1, te);
      if (!r2)
        return null;
      var n2 = [], i3 = null;
      e2.expectedType && "value" !== e2.expectedType.kind && (i3 = e2.expectedType);
      for (var a2 = 1; a2 < t2.length; a2 += 2) {
        var o2 = 1 === a2 ? -1 / 0 : t2[a2], s2 = t2[a2 + 1], u2 = a2, l2 = a2 + 1;
        if ("number" != typeof o2)
          return e2.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.', u2);
        if (n2.length && n2[n2.length - 1][0] >= o2)
          return e2.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.', u2);
        var p2 = e2.parse(s2, l2, i3);
        if (!p2)
          return null;
        i3 = i3 || p2.type, n2.push([o2, p2]);
      }
      return new ar(i3, r2, n2);
    }, ar.prototype.evaluate = function(t2) {
      var e2 = this.labels, r2 = this.outputs;
      if (1 === e2.length)
        return r2[0].evaluate(t2);
      var n2 = this.input.evaluate(t2);
      if (n2 <= e2[0])
        return r2[0].evaluate(t2);
      var i3 = e2.length;
      return n2 >= e2[i3 - 1] ? r2[i3 - 1].evaluate(t2) : r2[ir(e2, n2)].evaluate(t2);
    }, ar.prototype.eachChild = function(t2) {
      t2(this.input);
      for (var e2 = 0, r2 = this.outputs; e2 < r2.length; e2 += 1)
        t2(r2[e2]);
    }, ar.prototype.outputDefined = function() {
      return this.outputs.every(function(t2) {
        return t2.outputDefined();
      });
    }, ar.prototype.serialize = function() {
      for (var t2 = ["step", this.input.serialize()], e2 = 0; e2 < this.labels.length; e2++)
        e2 > 0 && t2.push(this.labels[e2]), t2.push(this.outputs[e2].serialize());
      return t2;
    };
    var sr = Object.freeze({ __proto__: null, number: or, color: function(t2, e2, r2) {
      return new me(or(t2.r, e2.r, r2), or(t2.g, e2.g, r2), or(t2.b, e2.b, r2), or(t2.a, e2.a, r2));
    }, array: function(t2, e2, r2) {
      return t2.map(function(t3, n2) {
        return or(t3, e2[n2], r2);
      });
    } }), ur = 6 / 29 * 3 * (6 / 29), lr = Math.PI / 180, pr = 180 / Math.PI;
    function hr(t2) {
      return t2 > 0.008856451679035631 ? Math.pow(t2, 1 / 3) : t2 / ur + 4 / 29;
    }
    function cr(t2) {
      return t2 > 6 / 29 ? t2 * t2 * t2 : ur * (t2 - 4 / 29);
    }
    function fr(t2) {
      return 255 * (t2 <= 31308e-7 ? 12.92 * t2 : 1.055 * Math.pow(t2, 1 / 2.4) - 0.055);
    }
    function yr(t2) {
      return (t2 /= 255) <= 0.04045 ? t2 / 12.92 : Math.pow((t2 + 0.055) / 1.055, 2.4);
    }
    function dr(t2) {
      var e2 = yr(t2.r), r2 = yr(t2.g), n2 = yr(t2.b), i3 = hr((0.4124564 * e2 + 0.3575761 * r2 + 0.1804375 * n2) / 0.95047), a2 = hr((0.2126729 * e2 + 0.7151522 * r2 + 0.072175 * n2) / 1);
      return { l: 116 * a2 - 16, a: 500 * (i3 - a2), b: 200 * (a2 - hr((0.0193339 * e2 + 0.119192 * r2 + 0.9503041 * n2) / 1.08883)), alpha: t2.a };
    }
    function mr(t2) {
      var e2 = (t2.l + 16) / 116, r2 = isNaN(t2.a) ? e2 : e2 + t2.a / 500, n2 = isNaN(t2.b) ? e2 : e2 - t2.b / 200;
      return e2 = 1 * cr(e2), r2 = 0.95047 * cr(r2), n2 = 1.08883 * cr(n2), new me(fr(3.2404542 * r2 - 1.5371385 * e2 - 0.4985314 * n2), fr(-0.969266 * r2 + 1.8760108 * e2 + 0.041556 * n2), fr(0.0556434 * r2 - 0.2040259 * e2 + 1.0572252 * n2), t2.alpha);
    }
    function vr(t2, e2, r2) {
      var n2 = e2 - t2;
      return t2 + r2 * (n2 > 180 || n2 < -180 ? n2 - 360 * Math.round(n2 / 360) : n2);
    }
    var gr = { forward: dr, reverse: mr, interpolate: function(t2, e2, r2) {
      return { l: or(t2.l, e2.l, r2), a: or(t2.a, e2.a, r2), b: or(t2.b, e2.b, r2), alpha: or(t2.alpha, e2.alpha, r2) };
    } }, xr = { forward: function(t2) {
      var e2 = dr(t2), r2 = e2.l, n2 = e2.a, i3 = e2.b, a2 = Math.atan2(i3, n2) * pr;
      return { h: a2 < 0 ? a2 + 360 : a2, c: Math.sqrt(n2 * n2 + i3 * i3), l: r2, alpha: t2.a };
    }, reverse: function(t2) {
      var e2 = t2.h * lr, r2 = t2.c;
      return mr({ l: t2.l, a: Math.cos(e2) * r2, b: Math.sin(e2) * r2, alpha: t2.alpha });
    }, interpolate: function(t2, e2, r2) {
      return { h: vr(t2.h, e2.h, r2), c: or(t2.c, e2.c, r2), l: or(t2.l, e2.l, r2), alpha: or(t2.alpha, e2.alpha, r2) };
    } }, br = Object.freeze({ __proto__: null, lab: gr, hcl: xr }), wr = function(t2, e2, r2, n2, i3) {
      this.type = t2, this.operator = e2, this.interpolation = r2, this.input = n2, this.labels = [], this.outputs = [];
      for (var a2 = 0, o2 = i3; a2 < o2.length; a2 += 1) {
        var s2 = o2[a2], u2 = s2[1];
        this.labels.push(s2[0]), this.outputs.push(u2);
      }
    };
    function _r(t2, e2, r2, n2) {
      var i3 = n2 - r2, a2 = t2 - r2;
      return 0 === i3 ? 0 : 1 === e2 ? a2 / i3 : (Math.pow(e2, a2) - 1) / (Math.pow(e2, i3) - 1);
    }
    wr.interpolationFactor = function(t2, e2, n2, i3) {
      var a2 = 0;
      if ("exponential" === t2.name)
        a2 = _r(e2, t2.base, n2, i3);
      else if ("linear" === t2.name)
        a2 = _r(e2, 1, n2, i3);
      else if ("cubic-bezier" === t2.name) {
        var o2 = t2.controlPoints;
        a2 = new r(o2[0], o2[1], o2[2], o2[3]).solve(_r(e2, 1, n2, i3));
      }
      return a2;
    }, wr.parse = function(t2, e2) {
      var r2 = t2[0], n2 = t2[1], i3 = t2[2], a2 = t2.slice(3);
      if (!Array.isArray(n2) || 0 === n2.length)
        return e2.error("Expected an interpolation type expression.", 1);
      if ("linear" === n2[0])
        n2 = { name: "linear" };
      else if ("exponential" === n2[0]) {
        var o2 = n2[1];
        if ("number" != typeof o2)
          return e2.error("Exponential interpolation requires a numeric base.", 1, 1);
        n2 = { name: "exponential", base: o2 };
      } else {
        if ("cubic-bezier" !== n2[0])
          return e2.error("Unknown interpolation type " + String(n2[0]), 1, 0);
        var s2 = n2.slice(1);
        if (4 !== s2.length || s2.some(function(t3) {
          return "number" != typeof t3 || t3 < 0 || t3 > 1;
        }))
          return e2.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.", 1);
        n2 = { name: "cubic-bezier", controlPoints: s2 };
      }
      if (t2.length - 1 < 4)
        return e2.error("Expected at least 4 arguments, but found only " + (t2.length - 1) + ".");
      if ((t2.length - 1) % 2 != 0)
        return e2.error("Expected an even number of arguments.");
      if (!(i3 = e2.parse(i3, 2, te)))
        return null;
      var u2 = [], l2 = null;
      "interpolate-hcl" === r2 || "interpolate-lab" === r2 ? l2 = ne : e2.expectedType && "value" !== e2.expectedType.kind && (l2 = e2.expectedType);
      for (var p2 = 0; p2 < a2.length; p2 += 2) {
        var h2 = a2[p2], c2 = a2[p2 + 1], f2 = p2 + 3, y2 = p2 + 4;
        if ("number" != typeof h2)
          return e2.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.', f2);
        if (u2.length && u2[u2.length - 1][0] >= h2)
          return e2.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.', f2);
        var d2 = e2.parse(c2, y2, l2);
        if (!d2)
          return null;
        l2 = l2 || d2.type, u2.push([h2, d2]);
      }
      return "number" === l2.kind || "color" === l2.kind || "array" === l2.kind && "number" === l2.itemType.kind && "number" == typeof l2.N ? new wr(l2, r2, n2, i3, u2) : e2.error("Type " + pe(l2) + " is not interpolatable.");
    }, wr.prototype.evaluate = function(t2) {
      var e2 = this.labels, r2 = this.outputs;
      if (1 === e2.length)
        return r2[0].evaluate(t2);
      var n2 = this.input.evaluate(t2);
      if (n2 <= e2[0])
        return r2[0].evaluate(t2);
      var i3 = e2.length;
      if (n2 >= e2[i3 - 1])
        return r2[i3 - 1].evaluate(t2);
      var a2 = ir(e2, n2), o2 = wr.interpolationFactor(this.interpolation, n2, e2[a2], e2[a2 + 1]), s2 = r2[a2].evaluate(t2), u2 = r2[a2 + 1].evaluate(t2);
      return "interpolate" === this.operator ? sr[this.type.kind.toLowerCase()](s2, u2, o2) : "interpolate-hcl" === this.operator ? xr.reverse(xr.interpolate(xr.forward(s2), xr.forward(u2), o2)) : gr.reverse(gr.interpolate(gr.forward(s2), gr.forward(u2), o2));
    }, wr.prototype.eachChild = function(t2) {
      t2(this.input);
      for (var e2 = 0, r2 = this.outputs; e2 < r2.length; e2 += 1)
        t2(r2[e2]);
    }, wr.prototype.outputDefined = function() {
      return this.outputs.every(function(t2) {
        return t2.outputDefined();
      });
    }, wr.prototype.serialize = function() {
      var t2;
      t2 = "linear" === this.interpolation.name ? ["linear"] : "exponential" === this.interpolation.name ? 1 === this.interpolation.base ? ["linear"] : ["exponential", this.interpolation.base] : ["cubic-bezier"].concat(this.interpolation.controlPoints);
      for (var e2 = [this.operator, t2, this.input.serialize()], r2 = 0; r2 < this.labels.length; r2++)
        e2.push(this.labels[r2], this.outputs[r2].serialize());
      return e2;
    };
    var Ar = function(t2, e2) {
      this.type = t2, this.args = e2;
    };
    Ar.parse = function(t2, e2) {
      if (t2.length < 2)
        return e2.error("Expectected at least one argument.");
      var r2 = null, n2 = e2.expectedType;
      n2 && "value" !== n2.kind && (r2 = n2);
      for (var i3 = [], a2 = 0, o2 = t2.slice(1); a2 < o2.length; a2 += 1) {
        var s2 = e2.parse(o2[a2], 1 + i3.length, r2, void 0, { typeAnnotation: "omit" });
        if (!s2)
          return null;
        r2 = r2 || s2.type, i3.push(s2);
      }
      var u2 = n2 && i3.some(function(t3) {
        return ce(n2, t3.type);
      });
      return new Ar(u2 ? ae : r2, i3);
    }, Ar.prototype.evaluate = function(t2) {
      for (var e2, r2 = null, n2 = 0, i3 = 0, a2 = this.args; i3 < a2.length && (n2++, (r2 = a2[i3].evaluate(t2)) && r2 instanceof be && !r2.available && (e2 || (e2 = r2.name), r2 = null, n2 === this.args.length && (r2 = e2)), null === r2); i3 += 1)
        ;
      return r2;
    }, Ar.prototype.eachChild = function(t2) {
      this.args.forEach(t2);
    }, Ar.prototype.outputDefined = function() {
      return this.args.every(function(t2) {
        return t2.outputDefined();
      });
    }, Ar.prototype.serialize = function() {
      var t2 = ["coalesce"];
      return this.eachChild(function(e2) {
        t2.push(e2.serialize());
      }), t2;
    };
    var Sr = function(t2, e2) {
      this.type = e2.type, this.bindings = [].concat(t2), this.result = e2;
    };
    Sr.prototype.evaluate = function(t2) {
      return this.result.evaluate(t2);
    }, Sr.prototype.eachChild = function(t2) {
      for (var e2 = 0, r2 = this.bindings; e2 < r2.length; e2 += 1)
        t2(r2[e2][1]);
      t2(this.result);
    }, Sr.parse = function(t2, e2) {
      if (t2.length < 4)
        return e2.error("Expected at least 3 arguments, but found " + (t2.length - 1) + " instead.");
      for (var r2 = [], n2 = 1; n2 < t2.length - 1; n2 += 2) {
        var i3 = t2[n2];
        if ("string" != typeof i3)
          return e2.error("Expected string, but found " + typeof i3 + " instead.", n2);
        if (/[^a-zA-Z0-9_]/.test(i3))
          return e2.error("Variable names must contain only alphanumeric characters or '_'.", n2);
        var a2 = e2.parse(t2[n2 + 1], n2 + 1);
        if (!a2)
          return null;
        r2.push([i3, a2]);
      }
      var o2 = e2.parse(t2[t2.length - 1], t2.length - 1, e2.expectedType, r2);
      return o2 ? new Sr(r2, o2) : null;
    }, Sr.prototype.outputDefined = function() {
      return this.result.outputDefined();
    }, Sr.prototype.serialize = function() {
      for (var t2 = ["let"], e2 = 0, r2 = this.bindings; e2 < r2.length; e2 += 1) {
        var n2 = r2[e2];
        t2.push(n2[0], n2[1].serialize());
      }
      return t2.push(this.result.serialize()), t2;
    };
    var zr = function(t2, e2, r2) {
      this.type = t2, this.index = e2, this.input = r2;
    };
    zr.parse = function(t2, e2) {
      if (3 !== t2.length)
        return e2.error("Expected 2 arguments, but found " + (t2.length - 1) + " instead.");
      var r2 = e2.parse(t2[1], 1, te), n2 = e2.parse(t2[2], 2, le(e2.expectedType || ae));
      return r2 && n2 ? new zr(n2.type.itemType, r2, n2) : null;
    }, zr.prototype.evaluate = function(t2) {
      var e2 = this.index.evaluate(t2), r2 = this.input.evaluate(t2);
      if (e2 < 0)
        throw new Ie("Array index out of bounds: " + e2 + " < 0.");
      if (e2 >= r2.length)
        throw new Ie("Array index out of bounds: " + e2 + " > " + (r2.length - 1) + ".");
      if (e2 !== Math.floor(e2))
        throw new Ie("Array index must be an integer, but found " + e2 + " instead.");
      return r2[e2];
    }, zr.prototype.eachChild = function(t2) {
      t2(this.index), t2(this.input);
    }, zr.prototype.outputDefined = function() {
      return false;
    }, zr.prototype.serialize = function() {
      return ["at", this.index.serialize(), this.input.serialize()];
    };
    var Ir = function(t2, e2) {
      this.type = re, this.needle = t2, this.haystack = e2;
    };
    Ir.parse = function(t2, e2) {
      if (3 !== t2.length)
        return e2.error("Expected 2 arguments, but found " + (t2.length - 1) + " instead.");
      var r2 = e2.parse(t2[1], 1, ae), n2 = e2.parse(t2[2], 2, ae);
      return r2 && n2 ? fe(r2.type, [re, ee, te, $t, ae]) ? new Ir(r2, n2) : e2.error("Expected first argument to be of type boolean, string, number or null, but found " + pe(r2.type) + " instead") : null;
    }, Ir.prototype.evaluate = function(t2) {
      var e2 = this.needle.evaluate(t2), r2 = this.haystack.evaluate(t2);
      if (!r2)
        return false;
      if (!ye(e2, ["boolean", "string", "number", "null"]))
        throw new Ie("Expected first argument to be of type boolean, string, number or null, but found " + pe(Ae(e2)) + " instead.");
      if (!ye(r2, ["string", "array"]))
        throw new Ie("Expected second argument to be of type array or string, but found " + pe(Ae(r2)) + " instead.");
      return r2.indexOf(e2) >= 0;
    }, Ir.prototype.eachChild = function(t2) {
      t2(this.needle), t2(this.haystack);
    }, Ir.prototype.outputDefined = function() {
      return true;
    }, Ir.prototype.serialize = function() {
      return ["in", this.needle.serialize(), this.haystack.serialize()];
    };
    var kr = function(t2, e2, r2) {
      this.type = te, this.needle = t2, this.haystack = e2, this.fromIndex = r2;
    };
    kr.parse = function(t2, e2) {
      if (t2.length <= 2 || t2.length >= 5)
        return e2.error("Expected 3 or 4 arguments, but found " + (t2.length - 1) + " instead.");
      var r2 = e2.parse(t2[1], 1, ae), n2 = e2.parse(t2[2], 2, ae);
      if (!r2 || !n2)
        return null;
      if (!fe(r2.type, [re, ee, te, $t, ae]))
        return e2.error("Expected first argument to be of type boolean, string, number or null, but found " + pe(r2.type) + " instead");
      if (4 === t2.length) {
        var i3 = e2.parse(t2[3], 3, te);
        return i3 ? new kr(r2, n2, i3) : null;
      }
      return new kr(r2, n2);
    }, kr.prototype.evaluate = function(t2) {
      var e2 = this.needle.evaluate(t2), r2 = this.haystack.evaluate(t2);
      if (!ye(e2, ["boolean", "string", "number", "null"]))
        throw new Ie("Expected first argument to be of type boolean, string, number or null, but found " + pe(Ae(e2)) + " instead.");
      if (!ye(r2, ["string", "array"]))
        throw new Ie("Expected second argument to be of type array or string, but found " + pe(Ae(r2)) + " instead.");
      if (this.fromIndex) {
        var n2 = this.fromIndex.evaluate(t2);
        return r2.indexOf(e2, n2);
      }
      return r2.indexOf(e2);
    }, kr.prototype.eachChild = function(t2) {
      t2(this.needle), t2(this.haystack), this.fromIndex && t2(this.fromIndex);
    }, kr.prototype.outputDefined = function() {
      return false;
    }, kr.prototype.serialize = function() {
      if (null != this.fromIndex && void 0 !== this.fromIndex) {
        var t2 = this.fromIndex.serialize();
        return ["index-of", this.needle.serialize(), this.haystack.serialize(), t2];
      }
      return ["index-of", this.needle.serialize(), this.haystack.serialize()];
    };
    var Mr = function(t2, e2, r2, n2, i3, a2) {
      this.inputType = t2, this.type = e2, this.input = r2, this.cases = n2, this.outputs = i3, this.otherwise = a2;
    };
    Mr.parse = function(t2, e2) {
      if (t2.length < 5)
        return e2.error("Expected at least 4 arguments, but found only " + (t2.length - 1) + ".");
      if (t2.length % 2 != 1)
        return e2.error("Expected an even number of arguments.");
      var r2, n2;
      e2.expectedType && "value" !== e2.expectedType.kind && (n2 = e2.expectedType);
      for (var i3 = {}, a2 = [], o2 = 2; o2 < t2.length - 1; o2 += 2) {
        var s2 = t2[o2], u2 = t2[o2 + 1];
        Array.isArray(s2) || (s2 = [s2]);
        var l2 = e2.concat(o2);
        if (0 === s2.length)
          return l2.error("Expected at least one branch label.");
        for (var p2 = 0, h2 = s2; p2 < h2.length; p2 += 1) {
          var c2 = h2[p2];
          if ("number" != typeof c2 && "string" != typeof c2)
            return l2.error("Branch labels must be numbers or strings.");
          if ("number" == typeof c2 && Math.abs(c2) > Number.MAX_SAFE_INTEGER)
            return l2.error("Branch labels must be integers no larger than " + Number.MAX_SAFE_INTEGER + ".");
          if ("number" == typeof c2 && Math.floor(c2) !== c2)
            return l2.error("Numeric branch labels must be integer values.");
          if (r2) {
            if (l2.checkSubtype(r2, Ae(c2)))
              return null;
          } else
            r2 = Ae(c2);
          if (void 0 !== i3[String(c2)])
            return l2.error("Branch labels must be unique.");
          i3[String(c2)] = a2.length;
        }
        var f2 = e2.parse(u2, o2, n2);
        if (!f2)
          return null;
        n2 = n2 || f2.type, a2.push(f2);
      }
      var y2 = e2.parse(t2[1], 1, ae);
      if (!y2)
        return null;
      var d2 = e2.parse(t2[t2.length - 1], t2.length - 1, n2);
      return d2 ? "value" !== y2.type.kind && e2.concat(1).checkSubtype(r2, y2.type) ? null : new Mr(r2, n2, y2, i3, a2, d2) : null;
    }, Mr.prototype.evaluate = function(t2) {
      var e2 = this.input.evaluate(t2);
      return (Ae(e2) === this.inputType && this.outputs[this.cases[e2]] || this.otherwise).evaluate(t2);
    }, Mr.prototype.eachChild = function(t2) {
      t2(this.input), this.outputs.forEach(t2), t2(this.otherwise);
    }, Mr.prototype.outputDefined = function() {
      return this.outputs.every(function(t2) {
        return t2.outputDefined();
      }) && this.otherwise.outputDefined();
    }, Mr.prototype.serialize = function() {
      for (var t2 = this, e2 = ["match", this.input.serialize()], r2 = [], n2 = {}, i3 = 0, a2 = Object.keys(this.cases).sort(); i3 < a2.length; i3 += 1) {
        var o2 = a2[i3];
        void 0 === (h2 = n2[this.cases[o2]]) ? (n2[this.cases[o2]] = r2.length, r2.push([this.cases[o2], [o2]])) : r2[h2][1].push(o2);
      }
      for (var s2 = function(e3) {
        return "number" === t2.inputType.kind ? Number(e3) : e3;
      }, u2 = 0, l2 = r2; u2 < l2.length; u2 += 1) {
        var p2 = l2[u2], h2 = p2[0], c2 = p2[1];
        e2.push(1 === c2.length ? s2(c2[0]) : c2.map(s2)), e2.push(this.outputs[outputIndex$1].serialize());
      }
      return e2.push(this.otherwise.serialize()), e2;
    };
    var Pr = function(t2, e2, r2) {
      this.type = t2, this.branches = e2, this.otherwise = r2;
    };
    Pr.parse = function(t2, e2) {
      if (t2.length < 4)
        return e2.error("Expected at least 3 arguments, but found only " + (t2.length - 1) + ".");
      if (t2.length % 2 != 0)
        return e2.error("Expected an odd number of arguments.");
      var r2;
      e2.expectedType && "value" !== e2.expectedType.kind && (r2 = e2.expectedType);
      for (var n2 = [], i3 = 1; i3 < t2.length - 1; i3 += 2) {
        var a2 = e2.parse(t2[i3], i3, re);
        if (!a2)
          return null;
        var o2 = e2.parse(t2[i3 + 1], i3 + 1, r2);
        if (!o2)
          return null;
        n2.push([a2, o2]), r2 = r2 || o2.type;
      }
      var s2 = e2.parse(t2[t2.length - 1], t2.length - 1, r2);
      return s2 ? new Pr(r2, n2, s2) : null;
    }, Pr.prototype.evaluate = function(t2) {
      for (var e2 = 0, r2 = this.branches; e2 < r2.length; e2 += 1) {
        var n2 = r2[e2], i3 = n2[1];
        if (n2[0].evaluate(t2))
          return i3.evaluate(t2);
      }
      return this.otherwise.evaluate(t2);
    }, Pr.prototype.eachChild = function(t2) {
      for (var e2 = 0, r2 = this.branches; e2 < r2.length; e2 += 1) {
        var n2 = r2[e2], i3 = n2[1];
        t2(n2[0]), t2(i3);
      }
      t2(this.otherwise);
    }, Pr.prototype.outputDefined = function() {
      return this.branches.every(function(t2) {
        return t2[1].outputDefined();
      }) && this.otherwise.outputDefined();
    }, Pr.prototype.serialize = function() {
      var t2 = ["case"];
      return this.eachChild(function(e2) {
        t2.push(e2.serialize());
      }), t2;
    };
    var Vr = function(t2, e2, r2, n2) {
      this.type = t2, this.input = e2, this.beginIndex = r2, this.endIndex = n2;
    };
    function Cr(t2, e2) {
      return "==" === t2 || "!=" === t2 ? "boolean" === e2.kind || "string" === e2.kind || "number" === e2.kind || "null" === e2.kind || "value" === e2.kind : "string" === e2.kind || "number" === e2.kind || "value" === e2.kind;
    }
    function Tr(t2, e2, r2, n2) {
      return 0 === n2.compare(e2, r2);
    }
    function Er(t2, e2, r2) {
      var n2 = "==" !== t2 && "!=" !== t2;
      return function() {
        function i3(t3, e3, r3) {
          this.type = re, this.lhs = t3, this.rhs = e3, this.collator = r3, this.hasUntypedArgument = "value" === t3.type.kind || "value" === e3.type.kind;
        }
        return i3.parse = function(t3, e3) {
          if (3 !== t3.length && 4 !== t3.length)
            return e3.error("Expected two or three arguments.");
          var r3 = t3[0], a2 = e3.parse(t3[1], 1, ae);
          if (!a2)
            return null;
          if (!Cr(r3, a2.type))
            return e3.concat(1).error('"' + r3 + `" comparisons are not supported for type '` + pe(a2.type) + "'.");
          var o2 = e3.parse(t3[2], 2, ae);
          if (!o2)
            return null;
          if (!Cr(r3, o2.type))
            return e3.concat(2).error('"' + r3 + `" comparisons are not supported for type '` + pe(o2.type) + "'.");
          if (a2.type.kind !== o2.type.kind && "value" !== a2.type.kind && "value" !== o2.type.kind)
            return e3.error("Cannot compare types '" + pe(a2.type) + "' and '" + pe(o2.type) + "'.");
          n2 && ("value" === a2.type.kind && "value" !== o2.type.kind ? a2 = new Me(o2.type, [a2]) : "value" !== a2.type.kind && "value" === o2.type.kind && (o2 = new Me(a2.type, [o2])));
          var s2 = null;
          if (4 === t3.length) {
            if ("string" !== a2.type.kind && "string" !== o2.type.kind && "value" !== a2.type.kind && "value" !== o2.type.kind)
              return e3.error("Cannot use collator to compare non-string types.");
            if (!(s2 = e3.parse(t3[3], 3, oe)))
              return null;
          }
          return new i3(a2, o2, s2);
        }, i3.prototype.evaluate = function(i4) {
          var a2 = this.lhs.evaluate(i4), o2 = this.rhs.evaluate(i4);
          if (n2 && this.hasUntypedArgument) {
            var s2 = Ae(a2), u2 = Ae(o2);
            if (s2.kind !== u2.kind || "string" !== s2.kind && "number" !== s2.kind)
              throw new Ie('Expected arguments for "' + t2 + '" to be (string, string) or (number, number), but found (' + s2.kind + ", " + u2.kind + ") instead.");
          }
          if (this.collator && !n2 && this.hasUntypedArgument) {
            var l2 = Ae(a2), p2 = Ae(o2);
            if ("string" !== l2.kind || "string" !== p2.kind)
              return e2(i4, a2, o2);
          }
          return this.collator ? r2(i4, a2, o2, this.collator.evaluate(i4)) : e2(i4, a2, o2);
        }, i3.prototype.eachChild = function(t3) {
          t3(this.lhs), t3(this.rhs), this.collator && t3(this.collator);
        }, i3.prototype.outputDefined = function() {
          return true;
        }, i3.prototype.serialize = function() {
          var e3 = [t2];
          return this.eachChild(function(t3) {
            e3.push(t3.serialize());
          }), e3;
        }, i3;
      }();
    }
    Vr.parse = function(t2, e2) {
      if (t2.length <= 2 || t2.length >= 5)
        return e2.error("Expected 3 or 4 arguments, but found " + (t2.length - 1) + " instead.");
      var r2 = e2.parse(t2[1], 1, ae), n2 = e2.parse(t2[2], 2, te);
      if (!r2 || !n2)
        return null;
      if (!fe(r2.type, [le(ae), ee, ae]))
        return e2.error("Expected first argument to be of type array or string, but found " + pe(r2.type) + " instead");
      if (4 === t2.length) {
        var i3 = e2.parse(t2[3], 3, te);
        return i3 ? new Vr(r2.type, r2, n2, i3) : null;
      }
      return new Vr(r2.type, r2, n2);
    }, Vr.prototype.evaluate = function(t2) {
      var e2 = this.input.evaluate(t2), r2 = this.beginIndex.evaluate(t2);
      if (!ye(e2, ["string", "array"]))
        throw new Ie("Expected first argument to be of type array or string, but found " + pe(Ae(e2)) + " instead.");
      if (this.endIndex) {
        var n2 = this.endIndex.evaluate(t2);
        return e2.slice(r2, n2);
      }
      return e2.slice(r2);
    }, Vr.prototype.eachChild = function(t2) {
      t2(this.input), t2(this.beginIndex), this.endIndex && t2(this.endIndex);
    }, Vr.prototype.outputDefined = function() {
      return false;
    }, Vr.prototype.serialize = function() {
      if (null != this.endIndex && void 0 !== this.endIndex) {
        var t2 = this.endIndex.serialize();
        return ["slice", this.input.serialize(), this.beginIndex.serialize(), t2];
      }
      return ["slice", this.input.serialize(), this.beginIndex.serialize()];
    };
    var Br = Er("==", function(t2, e2, r2) {
      return e2 === r2;
    }, Tr), Dr = Er("!=", function(t2, e2, r2) {
      return e2 !== r2;
    }, function(t2, e2, r2, n2) {
      return !Tr(0, e2, r2, n2);
    }), Lr = Er("<", function(t2, e2, r2) {
      return e2 < r2;
    }, function(t2, e2, r2, n2) {
      return n2.compare(e2, r2) < 0;
    }), Fr = Er(">", function(t2, e2, r2) {
      return e2 > r2;
    }, function(t2, e2, r2, n2) {
      return n2.compare(e2, r2) > 0;
    }), Rr = Er("<=", function(t2, e2, r2) {
      return e2 <= r2;
    }, function(t2, e2, r2, n2) {
      return n2.compare(e2, r2) <= 0;
    }), Or = Er(">=", function(t2, e2, r2) {
      return e2 >= r2;
    }, function(t2, e2, r2, n2) {
      return n2.compare(e2, r2) >= 0;
    }), jr = function(t2, e2, r2, n2, i3) {
      this.type = ee, this.number = t2, this.locale = e2, this.currency = r2, this.minFractionDigits = n2, this.maxFractionDigits = i3;
    };
    jr.parse = function(t2, e2) {
      if (3 !== t2.length)
        return e2.error("Expected two arguments.");
      var r2 = e2.parse(t2[1], 1, te);
      if (!r2)
        return null;
      var n2 = t2[2];
      if ("object" != typeof n2 || Array.isArray(n2))
        return e2.error("NumberFormat options argument must be an object.");
      var i3 = null;
      if (n2.locale && !(i3 = e2.parse(n2.locale, 1, ee)))
        return null;
      var a2 = null;
      if (n2.currency && !(a2 = e2.parse(n2.currency, 1, ee)))
        return null;
      var o2 = null;
      if (n2["min-fraction-digits"] && !(o2 = e2.parse(n2["min-fraction-digits"], 1, te)))
        return null;
      var s2 = null;
      return n2["max-fraction-digits"] && !(s2 = e2.parse(n2["max-fraction-digits"], 1, te)) ? null : new jr(r2, i3, a2, o2, s2);
    }, jr.prototype.evaluate = function(t2) {
      return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t2) : [], { style: this.currency ? "currency" : "decimal", currency: this.currency ? this.currency.evaluate(t2) : void 0, minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t2) : void 0, maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t2) : void 0 }).format(this.number.evaluate(t2));
    }, jr.prototype.eachChild = function(t2) {
      t2(this.number), this.locale && t2(this.locale), this.currency && t2(this.currency), this.minFractionDigits && t2(this.minFractionDigits), this.maxFractionDigits && t2(this.maxFractionDigits);
    }, jr.prototype.outputDefined = function() {
      return false;
    }, jr.prototype.serialize = function() {
      var t2 = {};
      return this.locale && (t2.locale = this.locale.serialize()), this.currency && (t2.currency = this.currency.serialize()), this.minFractionDigits && (t2["min-fraction-digits"] = this.minFractionDigits.serialize()), this.maxFractionDigits && (t2["max-fraction-digits"] = this.maxFractionDigits.serialize()), ["number-format", this.number.serialize(), t2];
    };
    var Ur = function(t2) {
      this.type = te, this.input = t2;
    };
    Ur.parse = function(t2, e2) {
      if (2 !== t2.length)
        return e2.error("Expected 1 argument, but found " + (t2.length - 1) + " instead.");
      var r2 = e2.parse(t2[1], 1);
      return r2 ? "array" !== r2.type.kind && "string" !== r2.type.kind && "value" !== r2.type.kind ? e2.error("Expected argument of type string or array, but found " + pe(r2.type) + " instead.") : new Ur(r2) : null;
    }, Ur.prototype.evaluate = function(t2) {
      var e2 = this.input.evaluate(t2);
      if ("string" == typeof e2)
        return e2.length;
      if (Array.isArray(e2))
        return e2.length;
      throw new Ie("Expected value to be of type string or array, but found " + pe(Ae(e2)) + " instead.");
    }, Ur.prototype.eachChild = function(t2) {
      t2(this.input);
    }, Ur.prototype.outputDefined = function() {
      return false;
    }, Ur.prototype.serialize = function() {
      var t2 = ["length"];
      return this.eachChild(function(e2) {
        t2.push(e2.serialize());
      }), t2;
    };
    var qr = { "==": Br, "!=": Dr, ">": Fr, "<": Lr, ">=": Or, "<=": Rr, array: Me, at: zr, boolean: Me, case: Pr, coalesce: Ar, collator: Le, format: Pe, image: Ve, in: Ir, "index-of": kr, interpolate: wr, "interpolate-hcl": wr, "interpolate-lab": wr, length: Ur, let: Sr, literal: ze, match: Mr, number: Me, "number-format": jr, object: Me, slice: Vr, step: ar, string: Me, "to-boolean": Te, "to-color": Te, "to-number": Te, "to-string": Te, var: rr, within: We };
    function Nr(t2, e2) {
      var r2 = e2[0], n2 = e2[1], i3 = e2[2], a2 = e2[3];
      r2 = r2.evaluate(t2), n2 = n2.evaluate(t2), i3 = i3.evaluate(t2);
      var o2 = a2 ? a2.evaluate(t2) : 1, s2 = we(r2, n2, i3, o2);
      if (s2)
        throw new Ie(s2);
      return new me(r2 / 255 * o2, n2 / 255 * o2, i3 / 255 * o2, o2);
    }
    function Zr(t2, e2) {
      return t2 in e2;
    }
    function Gr(t2, e2) {
      var r2 = e2[t2];
      return void 0 === r2 ? null : r2;
    }
    function Yr(t2) {
      return { type: t2 };
    }
    function Xr(t2) {
      return { result: "success", value: t2 };
    }
    function Kr(t2) {
      return { result: "error", value: t2 };
    }
    function Jr(t2) {
      return "data-driven" === t2["property-type"] || "cross-faded-data-driven" === t2["property-type"];
    }
    function Hr(t2) {
      return !!t2.expression && t2.expression.parameters.indexOf("zoom") > -1;
    }
    function Qr(t2) {
      return !!t2.expression && t2.expression.interpolated;
    }
    function Wr(t2) {
      return t2 instanceof Number ? "number" : t2 instanceof String ? "string" : t2 instanceof Boolean ? "boolean" : Array.isArray(t2) ? "array" : null === t2 ? "null" : typeof t2;
    }
    function $r(t2) {
      return "object" == typeof t2 && null !== t2 && !Array.isArray(t2);
    }
    function tn(t2) {
      return t2;
    }
    function en(t2, e2, r2) {
      return void 0 !== t2 ? t2 : void 0 !== e2 ? e2 : void 0 !== r2 ? r2 : void 0;
    }
    function rn(t2, e2, r2, n2, i3) {
      return en(typeof r2 === i3 ? n2[r2] : void 0, t2.default, e2.default);
    }
    function nn(t2, e2, r2) {
      if ("number" !== Wr(r2))
        return en(t2.default, e2.default);
      var n2 = t2.stops.length;
      if (1 === n2)
        return t2.stops[0][1];
      if (r2 <= t2.stops[0][0])
        return t2.stops[0][1];
      if (r2 >= t2.stops[n2 - 1][0])
        return t2.stops[n2 - 1][1];
      var i3 = ir(t2.stops.map(function(t3) {
        return t3[0];
      }), r2);
      return t2.stops[i3][1];
    }
    function an(t2, e2, r2) {
      var n2 = void 0 !== t2.base ? t2.base : 1;
      if ("number" !== Wr(r2))
        return en(t2.default, e2.default);
      var i3 = t2.stops.length;
      if (1 === i3)
        return t2.stops[0][1];
      if (r2 <= t2.stops[0][0])
        return t2.stops[0][1];
      if (r2 >= t2.stops[i3 - 1][0])
        return t2.stops[i3 - 1][1];
      var a2 = ir(t2.stops.map(function(t3) {
        return t3[0];
      }), r2), o2 = function(t3, e3, r3, n3) {
        var i4 = n3 - r3, a3 = t3 - r3;
        return 0 === i4 ? 0 : 1 === e3 ? a3 / i4 : (Math.pow(e3, a3) - 1) / (Math.pow(e3, i4) - 1);
      }(r2, n2, t2.stops[a2][0], t2.stops[a2 + 1][0]), s2 = t2.stops[a2][1], u2 = t2.stops[a2 + 1][1], l2 = sr[e2.type] || tn;
      if (t2.colorSpace && "rgb" !== t2.colorSpace) {
        var p2 = br[t2.colorSpace];
        l2 = function(t3, e3) {
          return p2.reverse(p2.interpolate(p2.forward(t3), p2.forward(e3), o2));
        };
      }
      return "function" == typeof s2.evaluate ? { evaluate: function() {
        for (var t3 = [], e3 = arguments.length; e3--; )
          t3[e3] = arguments[e3];
        var r3 = s2.evaluate.apply(void 0, t3), n3 = u2.evaluate.apply(void 0, t3);
        if (void 0 !== r3 && void 0 !== n3)
          return l2(r3, n3, o2);
      } } : l2(s2, u2, o2);
    }
    function on(t2, e2, r2) {
      return "color" === e2.type ? r2 = me.parse(r2) : "formatted" === e2.type ? r2 = xe.fromString(r2.toString()) : "resolvedImage" === e2.type ? r2 = be.fromString(r2.toString()) : Wr(r2) === e2.type || "enum" === e2.type && e2.values[r2] || (r2 = void 0), en(r2, t2.default, e2.default);
    }
    De.register(qr, { error: [{ kind: "error" }, [ee], function(t2, e2) {
      throw new Ie(e2[0].evaluate(t2));
    }], typeof: [ee, [ae], function(t2, e2) {
      return pe(Ae(e2[0].evaluate(t2)));
    }], "to-rgba": [le(te, 4), [ne], function(t2, e2) {
      return e2[0].evaluate(t2).toArray();
    }], rgb: [ne, [te, te, te], Nr], rgba: [ne, [te, te, te, te], Nr], has: { type: re, overloads: [[[ee], function(t2, e2) {
      return Zr(e2[0].evaluate(t2), t2.properties());
    }], [[ee, ie], function(t2, e2) {
      var r2 = e2[1];
      return Zr(e2[0].evaluate(t2), r2.evaluate(t2));
    }]] }, get: { type: ae, overloads: [[[ee], function(t2, e2) {
      return Gr(e2[0].evaluate(t2), t2.properties());
    }], [[ee, ie], function(t2, e2) {
      var r2 = e2[1];
      return Gr(e2[0].evaluate(t2), r2.evaluate(t2));
    }]] }, "feature-state": [ae, [ee], function(t2, e2) {
      return Gr(e2[0].evaluate(t2), t2.featureState || {});
    }], properties: [ie, [], function(t2) {
      return t2.properties();
    }], "geometry-type": [ee, [], function(t2) {
      return t2.geometryType();
    }], id: [ae, [], function(t2) {
      return t2.id();
    }], zoom: [te, [], function(t2) {
      return t2.globals.zoom;
    }], "heatmap-density": [te, [], function(t2) {
      return t2.globals.heatmapDensity || 0;
    }], "line-progress": [te, [], function(t2) {
      return t2.globals.lineProgress || 0;
    }], accumulated: [ae, [], function(t2) {
      return void 0 === t2.globals.accumulated ? null : t2.globals.accumulated;
    }], "+": [te, Yr(te), function(t2, e2) {
      for (var r2 = 0, n2 = 0, i3 = e2; n2 < i3.length; n2 += 1)
        r2 += i3[n2].evaluate(t2);
      return r2;
    }], "*": [te, Yr(te), function(t2, e2) {
      for (var r2 = 1, n2 = 0, i3 = e2; n2 < i3.length; n2 += 1)
        r2 *= i3[n2].evaluate(t2);
      return r2;
    }], "-": { type: te, overloads: [[[te, te], function(t2, e2) {
      var r2 = e2[1];
      return e2[0].evaluate(t2) - r2.evaluate(t2);
    }], [[te], function(t2, e2) {
      return -e2[0].evaluate(t2);
    }]] }, "/": [te, [te, te], function(t2, e2) {
      var r2 = e2[1];
      return e2[0].evaluate(t2) / r2.evaluate(t2);
    }], "%": [te, [te, te], function(t2, e2) {
      var r2 = e2[1];
      return e2[0].evaluate(t2) % r2.evaluate(t2);
    }], ln2: [te, [], function() {
      return Math.LN2;
    }], pi: [te, [], function() {
      return Math.PI;
    }], e: [te, [], function() {
      return Math.E;
    }], "^": [te, [te, te], function(t2, e2) {
      var r2 = e2[1];
      return Math.pow(e2[0].evaluate(t2), r2.evaluate(t2));
    }], sqrt: [te, [te], function(t2, e2) {
      return Math.sqrt(e2[0].evaluate(t2));
    }], log10: [te, [te], function(t2, e2) {
      return Math.log(e2[0].evaluate(t2)) / Math.LN10;
    }], ln: [te, [te], function(t2, e2) {
      return Math.log(e2[0].evaluate(t2));
    }], log2: [te, [te], function(t2, e2) {
      return Math.log(e2[0].evaluate(t2)) / Math.LN2;
    }], sin: [te, [te], function(t2, e2) {
      return Math.sin(e2[0].evaluate(t2));
    }], cos: [te, [te], function(t2, e2) {
      return Math.cos(e2[0].evaluate(t2));
    }], tan: [te, [te], function(t2, e2) {
      return Math.tan(e2[0].evaluate(t2));
    }], asin: [te, [te], function(t2, e2) {
      return Math.asin(e2[0].evaluate(t2));
    }], acos: [te, [te], function(t2, e2) {
      return Math.acos(e2[0].evaluate(t2));
    }], atan: [te, [te], function(t2, e2) {
      return Math.atan(e2[0].evaluate(t2));
    }], min: [te, Yr(te), function(t2, e2) {
      return Math.min.apply(Math, e2.map(function(e3) {
        return e3.evaluate(t2);
      }));
    }], max: [te, Yr(te), function(t2, e2) {
      return Math.max.apply(Math, e2.map(function(e3) {
        return e3.evaluate(t2);
      }));
    }], abs: [te, [te], function(t2, e2) {
      return Math.abs(e2[0].evaluate(t2));
    }], round: [te, [te], function(t2, e2) {
      var r2 = e2[0].evaluate(t2);
      return r2 < 0 ? -Math.round(-r2) : Math.round(r2);
    }], floor: [te, [te], function(t2, e2) {
      return Math.floor(e2[0].evaluate(t2));
    }], ceil: [te, [te], function(t2, e2) {
      return Math.ceil(e2[0].evaluate(t2));
    }], "filter-==": [re, [ee, ae], function(t2, e2) {
      var r2 = e2[0], n2 = e2[1];
      return t2.properties()[r2.value] === n2.value;
    }], "filter-id-==": [re, [ae], function(t2, e2) {
      var r2 = e2[0];
      return t2.id() === r2.value;
    }], "filter-type-==": [re, [ee], function(t2, e2) {
      var r2 = e2[0];
      return t2.geometryType() === r2.value;
    }], "filter-<": [re, [ee, ae], function(t2, e2) {
      var r2 = e2[0], n2 = e2[1], i3 = t2.properties()[r2.value], a2 = n2.value;
      return typeof i3 == typeof a2 && i3 < a2;
    }], "filter-id-<": [re, [ae], function(t2, e2) {
      var r2 = e2[0], n2 = t2.id(), i3 = r2.value;
      return typeof n2 == typeof i3 && n2 < i3;
    }], "filter->": [re, [ee, ae], function(t2, e2) {
      var r2 = e2[0], n2 = e2[1], i3 = t2.properties()[r2.value], a2 = n2.value;
      return typeof i3 == typeof a2 && i3 > a2;
    }], "filter-id->": [re, [ae], function(t2, e2) {
      var r2 = e2[0], n2 = t2.id(), i3 = r2.value;
      return typeof n2 == typeof i3 && n2 > i3;
    }], "filter-<=": [re, [ee, ae], function(t2, e2) {
      var r2 = e2[0], n2 = e2[1], i3 = t2.properties()[r2.value], a2 = n2.value;
      return typeof i3 == typeof a2 && i3 <= a2;
    }], "filter-id-<=": [re, [ae], function(t2, e2) {
      var r2 = e2[0], n2 = t2.id(), i3 = r2.value;
      return typeof n2 == typeof i3 && n2 <= i3;
    }], "filter->=": [re, [ee, ae], function(t2, e2) {
      var r2 = e2[0], n2 = e2[1], i3 = t2.properties()[r2.value], a2 = n2.value;
      return typeof i3 == typeof a2 && i3 >= a2;
    }], "filter-id->=": [re, [ae], function(t2, e2) {
      var r2 = e2[0], n2 = t2.id(), i3 = r2.value;
      return typeof n2 == typeof i3 && n2 >= i3;
    }], "filter-has": [re, [ae], function(t2, e2) {
      return e2[0].value in t2.properties();
    }], "filter-has-id": [re, [], function(t2) {
      return null !== t2.id() && void 0 !== t2.id();
    }], "filter-type-in": [re, [le(ee)], function(t2, e2) {
      return e2[0].value.indexOf(t2.geometryType()) >= 0;
    }], "filter-id-in": [re, [le(ae)], function(t2, e2) {
      return e2[0].value.indexOf(t2.id()) >= 0;
    }], "filter-in-small": [re, [ee, le(ae)], function(t2, e2) {
      var r2 = e2[0];
      return e2[1].value.indexOf(t2.properties()[r2.value]) >= 0;
    }], "filter-in-large": [re, [ee, le(ae)], function(t2, e2) {
      var r2 = e2[0], n2 = e2[1];
      return function(t3, e3, r3, n3) {
        for (; r3 <= n3; ) {
          var i3 = r3 + n3 >> 1;
          if (e3[i3] === t3)
            return true;
          e3[i3] > t3 ? n3 = i3 - 1 : r3 = i3 + 1;
        }
        return false;
      }(t2.properties()[r2.value], n2.value, 0, n2.value.length - 1);
    }], all: { type: re, overloads: [[[re, re], function(t2, e2) {
      var r2 = e2[1];
      return e2[0].evaluate(t2) && r2.evaluate(t2);
    }], [Yr(re), function(t2, e2) {
      for (var r2 = 0, n2 = e2; r2 < n2.length; r2 += 1)
        if (!n2[r2].evaluate(t2))
          return false;
      return true;
    }]] }, any: { type: re, overloads: [[[re, re], function(t2, e2) {
      var r2 = e2[1];
      return e2[0].evaluate(t2) || r2.evaluate(t2);
    }], [Yr(re), function(t2, e2) {
      for (var r2 = 0, n2 = e2; r2 < n2.length; r2 += 1)
        if (n2[r2].evaluate(t2))
          return true;
      return false;
    }]] }, "!": [re, [re], function(t2, e2) {
      return !e2[0].evaluate(t2);
    }], "is-supported-script": [re, [ee], function(t2, e2) {
      var r2 = t2.globals && t2.globals.isSupportedScript;
      return !r2 || r2(e2[0].evaluate(t2));
    }], upcase: [ee, [ee], function(t2, e2) {
      return e2[0].evaluate(t2).toUpperCase();
    }], downcase: [ee, [ee], function(t2, e2) {
      return e2[0].evaluate(t2).toLowerCase();
    }], concat: [ee, Yr(ae), function(t2, e2) {
      return e2.map(function(e3) {
        return Se(e3.evaluate(t2));
      }).join("");
    }], "resolved-locale": [ee, [oe], function(t2, e2) {
      return e2[0].evaluate(t2).resolvedLocale();
    }] });
    var sn = function(t2, e2) {
      this.expression = t2, this._warningHistory = {}, this._evaluator = new Be(), this._defaultValue = e2 ? function(t3) {
        return "color" === t3.type && $r(t3.default) ? new me(0, 0, 0, 0) : "color" === t3.type ? me.parse(t3.default) || null : void 0 === t3.default ? null : t3.default;
      }(e2) : null, this._enumValues = e2 && "enum" === e2.type ? e2.values : null;
    };
    function un(t2) {
      return Array.isArray(t2) && t2.length > 0 && "string" == typeof t2[0] && t2[0] in qr;
    }
    function ln(t2, e2) {
      var r2 = new nr(qr, [], e2 ? function(t3) {
        var e3 = { color: ne, string: ee, number: te, enum: ee, boolean: re, formatted: se, resolvedImage: ue };
        return "array" === t3.type ? le(e3[t3.value] || ae, t3.length) : e3[t3.type];
      }(e2) : void 0), n2 = r2.parse(t2, void 0, void 0, void 0, e2 && "string" === e2.type ? { typeAnnotation: "coerce" } : void 0);
      return n2 ? Xr(new sn(n2, e2)) : Kr(r2.errors);
    }
    sn.prototype.evaluateWithoutErrorHandling = function(t2, e2, r2, n2, i3, a2) {
      return this._evaluator.globals = t2, this._evaluator.feature = e2, this._evaluator.featureState = r2, this._evaluator.canonical = n2, this._evaluator.availableImages = i3 || null, this._evaluator.formattedSection = a2, this.expression.evaluate(this._evaluator);
    }, sn.prototype.evaluate = function(t2, e2, r2, n2, i3, a2) {
      this._evaluator.globals = t2, this._evaluator.feature = e2 || null, this._evaluator.featureState = r2 || null, this._evaluator.canonical = n2, this._evaluator.availableImages = i3 || null, this._evaluator.formattedSection = a2 || null;
      try {
        var o2 = this.expression.evaluate(this._evaluator);
        if (null == o2 || "number" == typeof o2 && o2 != o2)
          return this._defaultValue;
        if (this._enumValues && !(o2 in this._enumValues))
          throw new Ie("Expected value to be one of " + Object.keys(this._enumValues).map(function(t3) {
            return JSON.stringify(t3);
          }).join(", ") + ", but found " + JSON.stringify(o2) + " instead.");
        return o2;
      } catch (t3) {
        return this._warningHistory[t3.message] || (this._warningHistory[t3.message] = true, "undefined" != typeof console && console.warn(t3.message)), this._defaultValue;
      }
    };
    var pn = function(t2, e2) {
      this.kind = t2, this._styleExpression = e2, this.isStateDependent = "constant" !== t2 && !tr(e2.expression);
    };
    pn.prototype.evaluateWithoutErrorHandling = function(t2, e2, r2, n2, i3, a2) {
      return this._styleExpression.evaluateWithoutErrorHandling(t2, e2, r2, n2, i3, a2);
    }, pn.prototype.evaluate = function(t2, e2, r2, n2, i3, a2) {
      return this._styleExpression.evaluate(t2, e2, r2, n2, i3, a2);
    };
    var hn = function(t2, e2, r2, n2) {
      this.kind = t2, this.zoomStops = r2, this._styleExpression = e2, this.isStateDependent = "camera" !== t2 && !tr(e2.expression), this.interpolationType = n2;
    };
    function cn(t2, e2) {
      if ("error" === (t2 = ln(t2, e2)).result)
        return t2;
      var r2 = t2.value.expression, n2 = $e(r2);
      if (!n2 && !Jr(e2))
        return Kr([new Qt("", "data expressions not supported")]);
      var i3 = er(r2, ["zoom"]);
      if (!i3 && !Hr(e2))
        return Kr([new Qt("", "zoom expressions not supported")]);
      var a2 = function t3(e3) {
        var r3 = null;
        if (e3 instanceof Sr)
          r3 = t3(e3.result);
        else if (e3 instanceof Ar)
          for (var n3 = 0, i4 = e3.args; n3 < i4.length && !(r3 = t3(i4[n3])); n3 += 1)
            ;
        else
          (e3 instanceof ar || e3 instanceof wr) && e3.input instanceof De && "zoom" === e3.input.name && (r3 = e3);
        return r3 instanceof Qt || e3.eachChild(function(e4) {
          var n4 = t3(e4);
          n4 instanceof Qt ? r3 = n4 : !r3 && n4 ? r3 = new Qt("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.') : r3 && n4 && r3 !== n4 && (r3 = new Qt("", 'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));
        }), r3;
      }(r2);
      return a2 || i3 ? a2 instanceof Qt ? Kr([a2]) : a2 instanceof wr && !Qr(e2) ? Kr([new Qt("", '"interpolate" expressions cannot be used with this property')]) : Xr(a2 ? new hn(n2 ? "camera" : "composite", t2.value, a2.labels, a2 instanceof wr ? a2.interpolation : void 0) : new pn(n2 ? "constant" : "source", t2.value)) : Kr([new Qt("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);
    }
    hn.prototype.evaluateWithoutErrorHandling = function(t2, e2, r2, n2, i3, a2) {
      return this._styleExpression.evaluateWithoutErrorHandling(t2, e2, r2, n2, i3, a2);
    }, hn.prototype.evaluate = function(t2, e2, r2, n2, i3, a2) {
      return this._styleExpression.evaluate(t2, e2, r2, n2, i3, a2);
    }, hn.prototype.interpolationFactor = function(t2, e2, r2) {
      return this.interpolationType ? wr.interpolationFactor(this.interpolationType, t2, e2, r2) : 0;
    };
    var fn = function(t2, e2) {
      this._parameters = t2, this._specification = e2, Kt(this, function t3(e3, r2) {
        var n2, i3, a2, o2 = "color" === r2.type, s2 = e3.stops && "object" == typeof e3.stops[0][0], u2 = s2 || !(s2 || void 0 !== e3.property), l2 = e3.type || (Qr(r2) ? "exponential" : "interval");
        if (o2 && ((e3 = Kt({}, e3)).stops && (e3.stops = e3.stops.map(function(t4) {
          return [t4[0], me.parse(t4[1])];
        })), e3.default = me.parse(e3.default ? e3.default : r2.default)), e3.colorSpace && "rgb" !== e3.colorSpace && !br[e3.colorSpace])
          throw new Error("Unknown color space: " + e3.colorSpace);
        if ("exponential" === l2)
          n2 = an;
        else if ("interval" === l2)
          n2 = nn;
        else if ("categorical" === l2) {
          n2 = rn, i3 = /* @__PURE__ */ Object.create(null);
          for (var p2 = 0, h2 = e3.stops; p2 < h2.length; p2 += 1) {
            var c2 = h2[p2];
            i3[c2[0]] = c2[1];
          }
          a2 = typeof e3.stops[0][0];
        } else {
          if ("identity" !== l2)
            throw new Error('Unknown function type "' + l2 + '"');
          n2 = on;
        }
        if (s2) {
          for (var f2 = {}, y2 = [], d2 = 0; d2 < e3.stops.length; d2++) {
            var m2 = e3.stops[d2], v2 = m2[0].zoom;
            void 0 === f2[v2] && (f2[v2] = { zoom: v2, type: e3.type, property: e3.property, default: e3.default, stops: [] }, y2.push(v2)), f2[v2].stops.push([m2[0].value, m2[1]]);
          }
          for (var g2 = [], x2 = 0, b2 = y2; x2 < b2.length; x2 += 1) {
            var w2 = b2[x2];
            g2.push([f2[w2].zoom, t3(f2[w2], r2)]);
          }
          var _2 = { name: "linear" };
          return { kind: "composite", interpolationType: _2, interpolationFactor: wr.interpolationFactor.bind(void 0, _2), zoomStops: g2.map(function(t4) {
            return t4[0];
          }), evaluate: function(t4, n3) {
            var i4 = t4.zoom;
            return an({ stops: g2, base: e3.base }, r2, i4).evaluate(i4, n3);
          } };
        }
        if (u2) {
          var A2 = "exponential" === l2 ? { name: "exponential", base: void 0 !== e3.base ? e3.base : 1 } : null;
          return { kind: "camera", interpolationType: A2, interpolationFactor: wr.interpolationFactor.bind(void 0, A2), zoomStops: e3.stops.map(function(t4) {
            return t4[0];
          }), evaluate: function(t4) {
            return n2(e3, r2, t4.zoom, i3, a2);
          } };
        }
        return { kind: "source", evaluate: function(t4, o3) {
          var s3 = o3 && o3.properties ? o3.properties[e3.property] : void 0;
          return void 0 === s3 ? en(e3.default, r2.default) : n2(e3, r2, s3, i3, a2);
        } };
      }(this._parameters, this._specification));
    };
    function yn(t2) {
      var e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec || {}, i3 = t2.objectElementValidators || {}, a2 = t2.style, o2 = t2.styleSpec, s2 = [], u2 = Wr(r2);
      if ("object" !== u2)
        return [new Yt(e2, r2, "object expected, " + u2 + " found")];
      for (var l2 in r2) {
        var p2 = l2.split(".")[0], h2 = n2[p2] || n2["*"], c2 = void 0;
        if (i3[p2])
          c2 = i3[p2];
        else if (n2[p2])
          c2 = On;
        else if (i3["*"])
          c2 = i3["*"];
        else {
          if (!n2["*"]) {
            s2.push(new Yt(e2, r2[l2], 'unknown property "' + l2 + '"'));
            continue;
          }
          c2 = On;
        }
        s2 = s2.concat(c2({ key: (e2 ? e2 + "." : e2) + l2, value: r2[l2], valueSpec: h2, style: a2, styleSpec: o2, object: r2, objectKey: l2 }, r2));
      }
      for (var f2 in n2)
        i3[f2] || n2[f2].required && void 0 === n2[f2].default && void 0 === r2[f2] && s2.push(new Yt(e2, r2, 'missing required property "' + f2 + '"'));
      return s2;
    }
    function dn(t2) {
      var e2 = t2.value, r2 = t2.valueSpec, n2 = t2.style, i3 = t2.styleSpec, a2 = t2.key, o2 = t2.arrayElementValidator || On;
      if ("array" !== Wr(e2))
        return [new Yt(a2, e2, "array expected, " + Wr(e2) + " found")];
      if (r2.length && e2.length !== r2.length)
        return [new Yt(a2, e2, "array length " + r2.length + " expected, length " + e2.length + " found")];
      if (r2["min-length"] && e2.length < r2["min-length"])
        return [new Yt(a2, e2, "array length at least " + r2["min-length"] + " expected, length " + e2.length + " found")];
      var s2 = { type: r2.value, values: r2.values };
      i3.$version < 7 && (s2.function = r2.function), "object" === Wr(r2.value) && (s2 = r2.value);
      for (var u2 = [], l2 = 0; l2 < e2.length; l2++)
        u2 = u2.concat(o2({ array: e2, arrayIndex: l2, value: e2[l2], valueSpec: s2, style: n2, styleSpec: i3, key: a2 + "[" + l2 + "]" }));
      return u2;
    }
    function mn(t2) {
      var e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec, i3 = Wr(r2);
      return "number" === i3 && r2 != r2 && (i3 = "NaN"), "number" !== i3 ? [new Yt(e2, r2, "number expected, " + i3 + " found")] : "minimum" in n2 && r2 < n2.minimum ? [new Yt(e2, r2, r2 + " is less than the minimum value " + n2.minimum)] : "maximum" in n2 && r2 > n2.maximum ? [new Yt(e2, r2, r2 + " is greater than the maximum value " + n2.maximum)] : [];
    }
    function vn(t2) {
      var e2, r2, n2, i3 = t2.valueSpec, a2 = Jt(t2.value.type), o2 = {}, s2 = "categorical" !== a2 && void 0 === t2.value.property, u2 = !s2, l2 = "array" === Wr(t2.value.stops) && "array" === Wr(t2.value.stops[0]) && "object" === Wr(t2.value.stops[0][0]), p2 = yn({ key: t2.key, value: t2.value, valueSpec: t2.styleSpec.function, style: t2.style, styleSpec: t2.styleSpec, objectElementValidators: { stops: function(t3) {
        if ("identity" === a2)
          return [new Yt(t3.key, t3.value, 'identity function may not have a "stops" property')];
        var e3 = [], r3 = t3.value;
        return e3 = e3.concat(dn({ key: t3.key, value: r3, valueSpec: t3.valueSpec, style: t3.style, styleSpec: t3.styleSpec, arrayElementValidator: h2 })), "array" === Wr(r3) && 0 === r3.length && e3.push(new Yt(t3.key, r3, "array must have at least one stop")), e3;
      }, default: function(t3) {
        return On({ key: t3.key, value: t3.value, valueSpec: i3, style: t3.style, styleSpec: t3.styleSpec });
      } } });
      return "identity" === a2 && s2 && p2.push(new Yt(t2.key, t2.value, 'missing required property "property"')), "identity" === a2 || t2.value.stops || p2.push(new Yt(t2.key, t2.value, 'missing required property "stops"')), "exponential" === a2 && t2.valueSpec.expression && !Qr(t2.valueSpec) && p2.push(new Yt(t2.key, t2.value, "exponential functions not supported")), t2.styleSpec.$version >= 8 && (u2 && !Jr(t2.valueSpec) ? p2.push(new Yt(t2.key, t2.value, "property functions not supported")) : s2 && !Hr(t2.valueSpec) && p2.push(new Yt(t2.key, t2.value, "zoom functions not supported"))), "categorical" !== a2 && !l2 || void 0 !== t2.value.property || p2.push(new Yt(t2.key, t2.value, '"property" property is required')), p2;
      function h2(t3) {
        var e3 = [], a3 = t3.value, s3 = t3.key;
        if ("array" !== Wr(a3))
          return [new Yt(s3, a3, "array expected, " + Wr(a3) + " found")];
        if (2 !== a3.length)
          return [new Yt(s3, a3, "array length 2 expected, length " + a3.length + " found")];
        if (l2) {
          if ("object" !== Wr(a3[0]))
            return [new Yt(s3, a3, "object expected, " + Wr(a3[0]) + " found")];
          if (void 0 === a3[0].zoom)
            return [new Yt(s3, a3, "object stop key must have zoom")];
          if (void 0 === a3[0].value)
            return [new Yt(s3, a3, "object stop key must have value")];
          if (n2 && n2 > Jt(a3[0].zoom))
            return [new Yt(s3, a3[0].zoom, "stop zoom values must appear in ascending order")];
          Jt(a3[0].zoom) !== n2 && (n2 = Jt(a3[0].zoom), r2 = void 0, o2 = {}), e3 = e3.concat(yn({ key: s3 + "[0]", value: a3[0], valueSpec: { zoom: {} }, style: t3.style, styleSpec: t3.styleSpec, objectElementValidators: { zoom: mn, value: c2 } }));
        } else
          e3 = e3.concat(c2({ key: s3 + "[0]", value: a3[0], valueSpec: {}, style: t3.style, styleSpec: t3.styleSpec }, a3));
        return un(Ht(a3[1])) ? e3.concat([new Yt(s3 + "[1]", a3[1], "expressions are not allowed in function stops.")]) : e3.concat(On({ key: s3 + "[1]", value: a3[1], valueSpec: i3, style: t3.style, styleSpec: t3.styleSpec }));
      }
      function c2(t3, n3) {
        var s3 = Wr(t3.value), u3 = Jt(t3.value), l3 = null !== t3.value ? t3.value : n3;
        if (e2) {
          if (s3 !== e2)
            return [new Yt(t3.key, l3, s3 + " stop domain type must match previous stop domain type " + e2)];
        } else
          e2 = s3;
        if ("number" !== s3 && "string" !== s3 && "boolean" !== s3)
          return [new Yt(t3.key, l3, "stop domain value must be a number, string, or boolean")];
        if ("number" !== s3 && "categorical" !== a2) {
          var p3 = "number expected, " + s3 + " found";
          return Jr(i3) && void 0 === a2 && (p3 += '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'), [new Yt(t3.key, l3, p3)];
        }
        return "categorical" !== a2 || "number" !== s3 || isFinite(u3) && Math.floor(u3) === u3 ? "categorical" !== a2 && "number" === s3 && void 0 !== r2 && u3 < r2 ? [new Yt(t3.key, l3, "stop domain values must appear in ascending order")] : (r2 = u3, "categorical" === a2 && u3 in o2 ? [new Yt(t3.key, l3, "stop domain values must be unique")] : (o2[u3] = true, [])) : [new Yt(t3.key, l3, "integer expected, found " + u3)];
      }
    }
    function gn(t2) {
      var e2 = ("property" === t2.expressionContext ? cn : ln)(Ht(t2.value), t2.valueSpec);
      if ("error" === e2.result)
        return e2.value.map(function(e3) {
          return new Yt("" + t2.key + e3.key, t2.value, e3.message);
        });
      var r2 = e2.value.expression || e2.value._styleExpression.expression;
      if ("property" === t2.expressionContext && "text-font" === t2.propertyKey && !r2.outputDefined())
        return [new Yt(t2.key, t2.value, 'Invalid data expression for "' + t2.propertyKey + '". Output values must be contained as literals within the expression.')];
      if ("property" === t2.expressionContext && "layout" === t2.propertyType && !tr(r2))
        return [new Yt(t2.key, t2.value, '"feature-state" data expressions are not supported with layout properties.')];
      if ("filter" === t2.expressionContext && !tr(r2))
        return [new Yt(t2.key, t2.value, '"feature-state" data expressions are not supported with filters.')];
      if (t2.expressionContext && 0 === t2.expressionContext.indexOf("cluster")) {
        if (!er(r2, ["zoom", "feature-state"]))
          return [new Yt(t2.key, t2.value, '"zoom" and "feature-state" expressions are not supported with cluster properties.')];
        if ("cluster-initial" === t2.expressionContext && !$e(r2))
          return [new Yt(t2.key, t2.value, "Feature data expressions are not supported with initial expression part of cluster properties.")];
      }
      return [];
    }
    function xn(t2) {
      var e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec, i3 = [];
      return Array.isArray(n2.values) ? -1 === n2.values.indexOf(Jt(r2)) && i3.push(new Yt(e2, r2, "expected one of [" + n2.values.join(", ") + "], " + JSON.stringify(r2) + " found")) : -1 === Object.keys(n2.values).indexOf(Jt(r2)) && i3.push(new Yt(e2, r2, "expected one of [" + Object.keys(n2.values).join(", ") + "], " + JSON.stringify(r2) + " found")), i3;
    }
    function bn(t2) {
      if (true === t2 || false === t2)
        return true;
      if (!Array.isArray(t2) || 0 === t2.length)
        return false;
      switch (t2[0]) {
        case "has":
          return t2.length >= 2 && "$id" !== t2[1] && "$type" !== t2[1];
        case "in":
          return t2.length >= 3 && ("string" != typeof t2[1] || Array.isArray(t2[2]));
        case "!in":
        case "!has":
        case "none":
          return false;
        case "==":
        case "!=":
        case ">":
        case ">=":
        case "<":
        case "<=":
          return 3 !== t2.length || Array.isArray(t2[1]) || Array.isArray(t2[2]);
        case "any":
        case "all":
          for (var e2 = 0, r2 = t2.slice(1); e2 < r2.length; e2 += 1) {
            var n2 = r2[e2];
            if (!bn(n2) && "boolean" != typeof n2)
              return false;
          }
          return true;
        default:
          return true;
      }
    }
    fn.deserialize = function(t2) {
      return new fn(t2._parameters, t2._specification);
    }, fn.serialize = function(t2) {
      return { _parameters: t2._parameters, _specification: t2._specification };
    };
    var wn = { type: "boolean", default: false, transition: false, "property-type": "data-driven", expression: { interpolated: false, parameters: ["zoom", "feature"] } };
    function _n(t2) {
      if (null == t2)
        return { filter: function() {
          return true;
        }, needGeometry: false };
      bn(t2) || (t2 = Sn(t2));
      var e2 = ln(t2, wn);
      if ("error" === e2.result)
        throw new Error(e2.value.map(function(t3) {
          return t3.key + ": " + t3.message;
        }).join(", "));
      return { filter: function(t3, r2, n2) {
        return e2.value.evaluate(t3, r2, {}, n2);
      }, needGeometry: function t3(e3) {
        if (!Array.isArray(e3))
          return false;
        if ("within" === e3[0])
          return true;
        for (var r2 = 1; r2 < e3.length; r2++)
          if (t3(e3[r2]))
            return true;
        return false;
      }(t2) };
    }
    function An(t2, e2) {
      return t2 < e2 ? -1 : t2 > e2 ? 1 : 0;
    }
    function Sn(t2) {
      if (!t2)
        return true;
      var e2, r2 = t2[0];
      return t2.length <= 1 ? "any" !== r2 : "==" === r2 ? zn(t2[1], t2[2], "==") : "!=" === r2 ? Mn(zn(t2[1], t2[2], "==")) : "<" === r2 || ">" === r2 || "<=" === r2 || ">=" === r2 ? zn(t2[1], t2[2], r2) : "any" === r2 ? (e2 = t2.slice(1), ["any"].concat(e2.map(Sn))) : "all" === r2 ? ["all"].concat(t2.slice(1).map(Sn)) : "none" === r2 ? ["all"].concat(t2.slice(1).map(Sn).map(Mn)) : "in" === r2 ? In(t2[1], t2.slice(2)) : "!in" === r2 ? Mn(In(t2[1], t2.slice(2))) : "has" === r2 ? kn(t2[1]) : "!has" === r2 ? Mn(kn(t2[1])) : "within" !== r2 || t2;
    }
    function zn(t2, e2, r2) {
      switch (t2) {
        case "$type":
          return ["filter-type-" + r2, e2];
        case "$id":
          return ["filter-id-" + r2, e2];
        default:
          return ["filter-" + r2, t2, e2];
      }
    }
    function In(t2, e2) {
      if (0 === e2.length)
        return false;
      switch (t2) {
        case "$type":
          return ["filter-type-in", ["literal", e2]];
        case "$id":
          return ["filter-id-in", ["literal", e2]];
        default:
          return e2.length > 200 && !e2.some(function(t3) {
            return typeof t3 != typeof e2[0];
          }) ? ["filter-in-large", t2, ["literal", e2.sort(An)]] : ["filter-in-small", t2, ["literal", e2]];
      }
    }
    function kn(t2) {
      switch (t2) {
        case "$type":
          return true;
        case "$id":
          return ["filter-has-id"];
        default:
          return ["filter-has", t2];
      }
    }
    function Mn(t2) {
      return ["!", t2];
    }
    function Pn(t2) {
      return bn(Ht(t2.value)) ? gn(Kt({}, t2, { expressionContext: "filter", valueSpec: { value: "boolean" } })) : function t3(e2) {
        var r2 = e2.value, n2 = e2.key;
        if ("array" !== Wr(r2))
          return [new Yt(n2, r2, "array expected, " + Wr(r2) + " found")];
        var i3, a2 = e2.styleSpec, o2 = [];
        if (r2.length < 1)
          return [new Yt(n2, r2, "filter array must have at least 1 element")];
        switch (o2 = o2.concat(xn({ key: n2 + "[0]", value: r2[0], valueSpec: a2.filter_operator, style: e2.style, styleSpec: e2.styleSpec })), Jt(r2[0])) {
          case "<":
          case "<=":
          case ">":
          case ">=":
            r2.length >= 2 && "$type" === Jt(r2[1]) && o2.push(new Yt(n2, r2, '"$type" cannot be use with operator "' + r2[0] + '"'));
          case "==":
          case "!=":
            3 !== r2.length && o2.push(new Yt(n2, r2, 'filter array for operator "' + r2[0] + '" must have 3 elements'));
          case "in":
          case "!in":
            r2.length >= 2 && "string" !== (i3 = Wr(r2[1])) && o2.push(new Yt(n2 + "[1]", r2[1], "string expected, " + i3 + " found"));
            for (var s2 = 2; s2 < r2.length; s2++)
              i3 = Wr(r2[s2]), "$type" === Jt(r2[1]) ? o2 = o2.concat(xn({ key: n2 + "[" + s2 + "]", value: r2[s2], valueSpec: a2.geometry_type, style: e2.style, styleSpec: e2.styleSpec })) : "string" !== i3 && "number" !== i3 && "boolean" !== i3 && o2.push(new Yt(n2 + "[" + s2 + "]", r2[s2], "string, number, or boolean expected, " + i3 + " found"));
            break;
          case "any":
          case "all":
          case "none":
            for (var u2 = 1; u2 < r2.length; u2++)
              o2 = o2.concat(t3({ key: n2 + "[" + u2 + "]", value: r2[u2], style: e2.style, styleSpec: e2.styleSpec }));
            break;
          case "has":
          case "!has":
            i3 = Wr(r2[1]), 2 !== r2.length ? o2.push(new Yt(n2, r2, 'filter array for "' + r2[0] + '" operator must have 2 elements')) : "string" !== i3 && o2.push(new Yt(n2 + "[1]", r2[1], "string expected, " + i3 + " found"));
            break;
          case "within":
            i3 = Wr(r2[1]), 2 !== r2.length ? o2.push(new Yt(n2, r2, 'filter array for "' + r2[0] + '" operator must have 2 elements')) : "object" !== i3 && o2.push(new Yt(n2 + "[1]", r2[1], "object expected, " + i3 + " found"));
        }
        return o2;
      }(t2);
    }
    function Vn(t2, e2) {
      var r2 = t2.key, n2 = t2.style, i3 = t2.styleSpec, a2 = t2.value, o2 = t2.objectKey, s2 = i3[e2 + "_" + t2.layerType];
      if (!s2)
        return [];
      var u2 = o2.match(/^(.*)-transition$/);
      if ("paint" === e2 && u2 && s2[u2[1]] && s2[u2[1]].transition)
        return On({ key: r2, value: a2, valueSpec: i3.transition, style: n2, styleSpec: i3 });
      var l2, p2 = t2.valueSpec || s2[o2];
      if (!p2)
        return [new Yt(r2, a2, 'unknown property "' + o2 + '"')];
      if ("string" === Wr(a2) && Jr(p2) && !p2.tokens && (l2 = /^{([^}]+)}$/.exec(a2)))
        return [new Yt(r2, a2, '"' + o2 + '" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ' + JSON.stringify(l2[1]) + " }`.")];
      var h2 = [];
      return "symbol" === t2.layerType && ("text-field" === o2 && n2 && !n2.glyphs && h2.push(new Yt(r2, a2, 'use of "text-field" requires a style "glyphs" property')), "text-font" === o2 && $r(Ht(a2)) && "identity" === Jt(a2.type) && h2.push(new Yt(r2, a2, '"text-font" does not support identity functions'))), h2.concat(On({ key: t2.key, value: a2, valueSpec: p2, style: n2, styleSpec: i3, expressionContext: "property", propertyType: e2, propertyKey: o2 }));
    }
    function Cn(t2) {
      return Vn(t2, "paint");
    }
    function Tn(t2) {
      return Vn(t2, "layout");
    }
    function En(t2) {
      var e2 = [], r2 = t2.value, n2 = t2.key, i3 = t2.style, a2 = t2.styleSpec;
      r2.type || r2.ref || e2.push(new Yt(n2, r2, 'either "type" or "ref" is required'));
      var o2, s2 = Jt(r2.type), u2 = Jt(r2.ref);
      if (r2.id)
        for (var l2 = Jt(r2.id), p2 = 0; p2 < t2.arrayIndex; p2++) {
          var h2 = i3.layers[p2];
          Jt(h2.id) === l2 && e2.push(new Yt(n2, r2.id, 'duplicate layer id "' + r2.id + '", previously used at line ' + h2.id.__line__));
        }
      if ("ref" in r2)
        ["type", "source", "source-layer", "filter", "layout"].forEach(function(t3) {
          t3 in r2 && e2.push(new Yt(n2, r2[t3], '"' + t3 + '" is prohibited for ref layers'));
        }), i3.layers.forEach(function(t3) {
          Jt(t3.id) === u2 && (o2 = t3);
        }), o2 ? o2.ref ? e2.push(new Yt(n2, r2.ref, "ref cannot reference another ref layer")) : s2 = Jt(o2.type) : e2.push(new Yt(n2, r2.ref, 'ref layer "' + u2 + '" not found'));
      else if ("background" !== s2)
        if (r2.source) {
          var c2 = i3.sources && i3.sources[r2.source], f2 = c2 && Jt(c2.type);
          c2 ? "vector" === f2 && "raster" === s2 ? e2.push(new Yt(n2, r2.source, 'layer "' + r2.id + '" requires a raster source')) : "raster" === f2 && "raster" !== s2 ? e2.push(new Yt(n2, r2.source, 'layer "' + r2.id + '" requires a vector source')) : "vector" !== f2 || r2["source-layer"] ? "raster-dem" === f2 && "hillshade" !== s2 ? e2.push(new Yt(n2, r2.source, "raster-dem source can only be used with layer type 'hillshade'.")) : "line" !== s2 || !r2.paint || !r2.paint["line-gradient"] || "geojson" === f2 && c2.lineMetrics || e2.push(new Yt(n2, r2, 'layer "' + r2.id + '" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')) : e2.push(new Yt(n2, r2, 'layer "' + r2.id + '" must specify a "source-layer"')) : e2.push(new Yt(n2, r2.source, 'source "' + r2.source + '" not found'));
        } else
          e2.push(new Yt(n2, r2, 'missing required property "source"'));
      return e2 = e2.concat(yn({ key: n2, value: r2, valueSpec: a2.layer, style: t2.style, styleSpec: t2.styleSpec, objectElementValidators: { "*": function() {
        return [];
      }, type: function() {
        return On({ key: n2 + ".type", value: r2.type, valueSpec: a2.layer.type, style: t2.style, styleSpec: t2.styleSpec, object: r2, objectKey: "type" });
      }, filter: Pn, layout: function(t3) {
        return yn({ layer: r2, key: t3.key, value: t3.value, style: t3.style, styleSpec: t3.styleSpec, objectElementValidators: { "*": function(t4) {
          return Tn(Kt({ layerType: s2 }, t4));
        } } });
      }, paint: function(t3) {
        return yn({ layer: r2, key: t3.key, value: t3.value, style: t3.style, styleSpec: t3.styleSpec, objectElementValidators: { "*": function(t4) {
          return Cn(Kt({ layerType: s2 }, t4));
        } } });
      } } }));
    }
    function Bn(t2) {
      var e2 = t2.value, r2 = t2.key, n2 = Wr(e2);
      return "string" !== n2 ? [new Yt(r2, e2, "string expected, " + n2 + " found")] : [];
    }
    var Dn = { promoteId: function(t2) {
      var e2 = t2.key, r2 = t2.value;
      if ("string" === Wr(r2))
        return Bn({ key: e2, value: r2 });
      var n2 = [];
      for (var i3 in r2)
        n2.push.apply(n2, Bn({ key: e2 + "." + i3, value: r2[i3] }));
      return n2;
    } };
    function Ln(t2) {
      var e2 = t2.value, r2 = t2.key, n2 = t2.styleSpec, i3 = t2.style;
      if (!e2.type)
        return [new Yt(r2, e2, '"type" is required')];
      var a2, o2 = Jt(e2.type);
      switch (o2) {
        case "vector":
        case "raster":
        case "raster-dem":
          return yn({ key: r2, value: e2, valueSpec: n2["source_" + o2.replace("-", "_")], style: t2.style, styleSpec: n2, objectElementValidators: Dn });
        case "geojson":
          if (a2 = yn({ key: r2, value: e2, valueSpec: n2.source_geojson, style: i3, styleSpec: n2, objectElementValidators: Dn }), e2.cluster)
            for (var s2 in e2.clusterProperties) {
              var u2 = e2.clusterProperties[s2], l2 = u2[0], p2 = "string" == typeof l2 ? [l2, ["accumulated"], ["get", s2]] : l2;
              a2.push.apply(a2, gn({ key: r2 + "." + s2 + ".map", value: u2[1], expressionContext: "cluster-map" })), a2.push.apply(a2, gn({ key: r2 + "." + s2 + ".reduce", value: p2, expressionContext: "cluster-reduce" }));
            }
          return a2;
        case "video":
          return yn({ key: r2, value: e2, valueSpec: n2.source_video, style: i3, styleSpec: n2 });
        case "image":
          return yn({ key: r2, value: e2, valueSpec: n2.source_image, style: i3, styleSpec: n2 });
        case "canvas":
          return [new Yt(r2, null, "Please use runtime APIs to add canvas sources, rather than including them in stylesheets.", "source.canvas")];
        default:
          return xn({ key: r2 + ".type", value: e2.type, valueSpec: { values: ["vector", "raster", "raster-dem", "geojson", "video", "image"] }, style: i3, styleSpec: n2 });
      }
    }
    function Fn(t2) {
      var e2 = t2.value, r2 = t2.styleSpec, n2 = r2.light, i3 = t2.style, a2 = [], o2 = Wr(e2);
      if (void 0 === e2)
        return a2;
      if ("object" !== o2)
        return a2.concat([new Yt("light", e2, "object expected, " + o2 + " found")]);
      for (var s2 in e2) {
        var u2 = s2.match(/^(.*)-transition$/);
        a2 = a2.concat(u2 && n2[u2[1]] && n2[u2[1]].transition ? On({ key: s2, value: e2[s2], valueSpec: r2.transition, style: i3, styleSpec: r2 }) : n2[s2] ? On({ key: s2, value: e2[s2], valueSpec: n2[s2], style: i3, styleSpec: r2 }) : [new Yt(s2, e2[s2], 'unknown property "' + s2 + '"')]);
      }
      return a2;
    }
    var Rn = { "*": function() {
      return [];
    }, array: dn, boolean: function(t2) {
      var e2 = t2.value, r2 = t2.key, n2 = Wr(e2);
      return "boolean" !== n2 ? [new Yt(r2, e2, "boolean expected, " + n2 + " found")] : [];
    }, number: mn, color: function(t2) {
      var e2 = t2.key, r2 = t2.value, n2 = Wr(r2);
      return "string" !== n2 ? [new Yt(e2, r2, "color expected, " + n2 + " found")] : null === de(r2) ? [new Yt(e2, r2, 'color expected, "' + r2 + '" found')] : [];
    }, constants: Xt, enum: xn, filter: Pn, function: vn, layer: En, object: yn, source: Ln, light: Fn, string: Bn, formatted: function(t2) {
      return 0 === Bn(t2).length ? [] : gn(t2);
    }, resolvedImage: function(t2) {
      return 0 === Bn(t2).length ? [] : gn(t2);
    } };
    function On(t2) {
      var e2 = t2.value, r2 = t2.valueSpec, n2 = t2.styleSpec;
      return r2.expression && $r(Jt(e2)) ? vn(t2) : r2.expression && un(Ht(e2)) ? gn(t2) : r2.type && Rn[r2.type] ? Rn[r2.type](t2) : yn(Kt({}, t2, { valueSpec: r2.type ? n2[r2.type] : r2 }));
    }
    function jn(t2) {
      var e2 = t2.value, r2 = t2.key, n2 = Bn(t2);
      return n2.length || (-1 === e2.indexOf("{fontstack}") && n2.push(new Yt(r2, e2, '"glyphs" url must include a "{fontstack}" token')), -1 === e2.indexOf("{range}") && n2.push(new Yt(r2, e2, '"glyphs" url must include a "{range}" token'))), n2;
    }
    function Un(t2, e2) {
      void 0 === e2 && (e2 = Gt);
      var r2 = [];
      return r2 = r2.concat(On({ key: "", value: t2, valueSpec: e2.$root, styleSpec: e2, style: t2, objectElementValidators: { glyphs: jn, "*": function() {
        return [];
      } } })), t2.constants && (r2 = r2.concat(Xt({ key: "constants", value: t2.constants, style: t2, styleSpec: e2 }))), qn(r2);
    }
    function qn(t2) {
      return [].concat(t2).sort(function(t3, e2) {
        return t3.line - e2.line;
      });
    }
    function Nn(t2) {
      return function() {
        for (var e2 = [], r2 = arguments.length; r2--; )
          e2[r2] = arguments[r2];
        return qn(t2.apply(this, e2));
      };
    }
    Un.source = Nn(Ln), Un.light = Nn(Fn), Un.layer = Nn(En), Un.filter = Nn(Pn), Un.paintProperty = Nn(Cn), Un.layoutProperty = Nn(Tn);
    var Zn = Un, Gn = Zn.light, Yn = Zn.paintProperty, Xn = Zn.layoutProperty;
    function Kn(t2, e2) {
      var r2 = false;
      if (e2 && e2.length)
        for (var n2 = 0, i3 = e2; n2 < i3.length; n2 += 1)
          t2.fire(new Nt(new Error(i3[n2].message))), r2 = true;
      return r2;
    }
    var Jn = Hn;
    function Hn(t2, e2, r2) {
      var n2 = this.cells = [];
      if (t2 instanceof ArrayBuffer) {
        this.arrayBuffer = t2;
        var i3 = new Int32Array(this.arrayBuffer);
        t2 = i3[0], this.d = (e2 = i3[1]) + 2 * (r2 = i3[2]);
        for (var a2 = 0; a2 < this.d * this.d; a2++) {
          var o2 = i3[3 + a2], s2 = i3[3 + a2 + 1];
          n2.push(o2 === s2 ? null : i3.subarray(o2, s2));
        }
        var u2 = i3[3 + n2.length + 1];
        this.keys = i3.subarray(i3[3 + n2.length], u2), this.bboxes = i3.subarray(u2), this.insert = this._insertReadonly;
      } else {
        this.d = e2 + 2 * r2;
        for (var l2 = 0; l2 < this.d * this.d; l2++)
          n2.push([]);
        this.keys = [], this.bboxes = [];
      }
      this.n = e2, this.extent = t2, this.padding = r2, this.scale = e2 / t2, this.uid = 0;
      var p2 = r2 / e2 * t2;
      this.min = -p2, this.max = t2 + p2;
    }
    Hn.prototype.insert = function(t2, e2, r2, n2, i3) {
      this._forEachCell(e2, r2, n2, i3, this._insertCell, this.uid++), this.keys.push(t2), this.bboxes.push(e2), this.bboxes.push(r2), this.bboxes.push(n2), this.bboxes.push(i3);
    }, Hn.prototype._insertReadonly = function() {
      throw "Cannot insert into a GridIndex created from an ArrayBuffer.";
    }, Hn.prototype._insertCell = function(t2, e2, r2, n2, i3, a2) {
      this.cells[i3].push(a2);
    }, Hn.prototype.query = function(t2, e2, r2, n2, i3) {
      var a2 = this.min, o2 = this.max;
      if (t2 <= a2 && e2 <= a2 && o2 <= r2 && o2 <= n2 && !i3)
        return Array.prototype.slice.call(this.keys);
      var s2 = [];
      return this._forEachCell(t2, e2, r2, n2, this._queryCell, s2, {}, i3), s2;
    }, Hn.prototype._queryCell = function(t2, e2, r2, n2, i3, a2, o2, s2) {
      var u2 = this.cells[i3];
      if (null !== u2)
        for (var l2 = this.keys, p2 = this.bboxes, h2 = 0; h2 < u2.length; h2++) {
          var c2 = u2[h2];
          if (void 0 === o2[c2]) {
            var f2 = 4 * c2;
            (s2 ? s2(p2[f2 + 0], p2[f2 + 1], p2[f2 + 2], p2[f2 + 3]) : t2 <= p2[f2 + 2] && e2 <= p2[f2 + 3] && r2 >= p2[f2 + 0] && n2 >= p2[f2 + 1]) ? (o2[c2] = true, a2.push(l2[c2])) : o2[c2] = false;
          }
        }
    }, Hn.prototype._forEachCell = function(t2, e2, r2, n2, i3, a2, o2, s2) {
      for (var u2 = this._convertToCellCoord(t2), l2 = this._convertToCellCoord(e2), p2 = this._convertToCellCoord(r2), h2 = this._convertToCellCoord(n2), c2 = u2; c2 <= p2; c2++)
        for (var f2 = l2; f2 <= h2; f2++) {
          var y2 = this.d * f2 + c2;
          if ((!s2 || s2(this._convertFromCellCoord(c2), this._convertFromCellCoord(f2), this._convertFromCellCoord(c2 + 1), this._convertFromCellCoord(f2 + 1))) && i3.call(this, t2, e2, r2, n2, y2, a2, o2, s2))
            return;
        }
    }, Hn.prototype._convertFromCellCoord = function(t2) {
      return (t2 - this.padding) / this.scale;
    }, Hn.prototype._convertToCellCoord = function(t2) {
      return Math.max(0, Math.min(this.d - 1, Math.floor(t2 * this.scale) + this.padding));
    }, Hn.prototype.toArrayBuffer = function() {
      if (this.arrayBuffer)
        return this.arrayBuffer;
      for (var t2 = this.cells, e2 = 3 + this.cells.length + 1 + 1, r2 = 0, n2 = 0; n2 < this.cells.length; n2++)
        r2 += this.cells[n2].length;
      var i3 = new Int32Array(e2 + r2 + this.keys.length + this.bboxes.length);
      i3[0] = this.extent, i3[1] = this.n, i3[2] = this.padding;
      for (var a2 = e2, o2 = 0; o2 < t2.length; o2++) {
        var s2 = t2[o2];
        i3[3 + o2] = a2, i3.set(s2, a2), a2 += s2.length;
      }
      return i3[3 + t2.length] = a2, i3.set(this.keys, a2), i3[3 + t2.length + 1] = a2 += this.keys.length, i3.set(this.bboxes, a2), a2 += this.bboxes.length, i3.buffer;
    };
    var Qn = self.ImageData, Wn = self.ImageBitmap, $n = {};
    function ti(t2, e2, r2) {
      void 0 === r2 && (r2 = {}), Object.defineProperty(e2, "_classRegistryKey", { value: t2, writeable: false }), $n[t2] = { klass: e2, omit: r2.omit || [], shallow: r2.shallow || [] };
    }
    for (var ei in ti("Object", Object), Jn.serialize = function(t2, e2) {
      var r2 = t2.toArrayBuffer();
      return e2 && e2.push(r2), { buffer: r2 };
    }, Jn.deserialize = function(t2) {
      return new Jn(t2.buffer);
    }, ti("Grid", Jn), ti("Color", me), ti("Error", Error), ti("ResolvedImage", be), ti("StylePropertyFunction", fn), ti("StyleExpression", sn, { omit: ["_evaluator"] }), ti("ZoomDependentExpression", hn), ti("ZoomConstantExpression", pn), ti("CompoundExpression", De, { omit: ["_evaluate"] }), qr)
      qr[ei]._classRegistryKey || ti("Expression_" + ei, qr[ei]);
    function ri(t2) {
      return t2 && "undefined" != typeof ArrayBuffer && (t2 instanceof ArrayBuffer || t2.constructor && "ArrayBuffer" === t2.constructor.name);
    }
    function ni(t2) {
      return Wn && t2 instanceof Wn;
    }
    function ii(t2, e2) {
      if (null == t2 || "boolean" == typeof t2 || "number" == typeof t2 || "string" == typeof t2 || t2 instanceof Boolean || t2 instanceof Number || t2 instanceof String || t2 instanceof Date || t2 instanceof RegExp)
        return t2;
      if (ri(t2) || ni(t2))
        return e2 && e2.push(t2), t2;
      if (ArrayBuffer.isView(t2)) {
        var r2 = t2;
        return e2 && e2.push(r2.buffer), r2;
      }
      if (t2 instanceof Qn)
        return e2 && e2.push(t2.data.buffer), t2;
      if (Array.isArray(t2)) {
        for (var n2 = [], i3 = 0, a2 = t2; i3 < a2.length; i3 += 1)
          n2.push(ii(a2[i3], e2));
        return n2;
      }
      if ("object" == typeof t2) {
        var o2 = t2.constructor, s2 = o2._classRegistryKey;
        if (!s2)
          throw new Error("can't serialize object of unregistered class");
        var u2 = o2.serialize ? o2.serialize(t2, e2) : {};
        if (!o2.serialize) {
          for (var l2 in t2)
            if (t2.hasOwnProperty(l2) && !($n[s2].omit.indexOf(l2) >= 0)) {
              var p2 = t2[l2];
              u2[l2] = $n[s2].shallow.indexOf(l2) >= 0 ? p2 : ii(p2, e2);
            }
          t2 instanceof Error && (u2.message = t2.message);
        }
        if (u2.$name)
          throw new Error("$name property is reserved for worker serialization logic.");
        return "Object" !== s2 && (u2.$name = s2), u2;
      }
      throw new Error("can't serialize object of type " + typeof t2);
    }
    function ai(t2) {
      if (null == t2 || "boolean" == typeof t2 || "number" == typeof t2 || "string" == typeof t2 || t2 instanceof Boolean || t2 instanceof Number || t2 instanceof String || t2 instanceof Date || t2 instanceof RegExp || ri(t2) || ni(t2) || ArrayBuffer.isView(t2) || t2 instanceof Qn)
        return t2;
      if (Array.isArray(t2))
        return t2.map(ai);
      if ("object" == typeof t2) {
        var e2 = t2.$name || "Object", r2 = $n[e2].klass;
        if (!r2)
          throw new Error("can't deserialize unregistered class " + e2);
        if (r2.deserialize)
          return r2.deserialize(t2);
        for (var n2 = Object.create(r2.prototype), i3 = 0, a2 = Object.keys(t2); i3 < a2.length; i3 += 1) {
          var o2 = a2[i3];
          if ("$name" !== o2) {
            var s2 = t2[o2];
            n2[o2] = $n[e2].shallow.indexOf(o2) >= 0 ? s2 : ai(s2);
          }
        }
        return n2;
      }
      throw new Error("can't deserialize object of type " + typeof t2);
    }
    var oi = function() {
      this.first = true;
    };
    oi.prototype.update = function(t2, e2) {
      var r2 = Math.floor(t2);
      return this.first ? (this.first = false, this.lastIntegerZoom = r2, this.lastIntegerZoomTime = 0, this.lastZoom = t2, this.lastFloorZoom = r2, true) : (this.lastFloorZoom > r2 ? (this.lastIntegerZoom = r2 + 1, this.lastIntegerZoomTime = e2) : this.lastFloorZoom < r2 && (this.lastIntegerZoom = r2, this.lastIntegerZoomTime = e2), t2 !== this.lastZoom && (this.lastZoom = t2, this.lastFloorZoom = r2, true));
    };
    var si = function(t2) {
      return t2 >= 1536 && t2 <= 1791;
    }, ui = function(t2) {
      return t2 >= 1872 && t2 <= 1919;
    }, li = function(t2) {
      return t2 >= 2208 && t2 <= 2303;
    }, pi = function(t2) {
      return t2 >= 11904 && t2 <= 12031;
    }, hi = function(t2) {
      return t2 >= 12032 && t2 <= 12255;
    }, ci = function(t2) {
      return t2 >= 12272 && t2 <= 12287;
    }, fi = function(t2) {
      return t2 >= 12288 && t2 <= 12351;
    }, yi = function(t2) {
      return t2 >= 12352 && t2 <= 12447;
    }, di = function(t2) {
      return t2 >= 12448 && t2 <= 12543;
    }, mi = function(t2) {
      return t2 >= 12544 && t2 <= 12591;
    }, vi = function(t2) {
      return t2 >= 12704 && t2 <= 12735;
    }, gi = function(t2) {
      return t2 >= 12736 && t2 <= 12783;
    }, xi = function(t2) {
      return t2 >= 12784 && t2 <= 12799;
    }, bi = function(t2) {
      return t2 >= 12800 && t2 <= 13055;
    }, wi = function(t2) {
      return t2 >= 13056 && t2 <= 13311;
    }, _i = function(t2) {
      return t2 >= 13312 && t2 <= 19903;
    }, Ai = function(t2) {
      return t2 >= 19968 && t2 <= 40959;
    }, Si = function(t2) {
      return t2 >= 40960 && t2 <= 42127;
    }, zi = function(t2) {
      return t2 >= 42128 && t2 <= 42191;
    }, Ii = function(t2) {
      return t2 >= 44032 && t2 <= 55215;
    }, ki = function(t2) {
      return t2 >= 63744 && t2 <= 64255;
    }, Mi = function(t2) {
      return t2 >= 64336 && t2 <= 65023;
    }, Pi = function(t2) {
      return t2 >= 65040 && t2 <= 65055;
    }, Vi = function(t2) {
      return t2 >= 65072 && t2 <= 65103;
    }, Ci = function(t2) {
      return t2 >= 65104 && t2 <= 65135;
    }, Ti = function(t2) {
      return t2 >= 65136 && t2 <= 65279;
    }, Ei = function(t2) {
      return t2 >= 65280 && t2 <= 65519;
    };
    function Bi(t2) {
      for (var e2 = 0, r2 = t2; e2 < r2.length; e2 += 1)
        if (Di(r2[e2].charCodeAt(0)))
          return true;
      return false;
    }
    function Di(t2) {
      return !(746 !== t2 && 747 !== t2 && (t2 < 4352 || !(vi(t2) || mi(t2) || Vi(t2) && !(t2 >= 65097 && t2 <= 65103) || ki(t2) || wi(t2) || pi(t2) || gi(t2) || !(!fi(t2) || t2 >= 12296 && t2 <= 12305 || t2 >= 12308 && t2 <= 12319 || 12336 === t2) || _i(t2) || Ai(t2) || bi(t2) || function(t3) {
        return t3 >= 12592 && t3 <= 12687;
      }(t2) || function(t3) {
        return t3 >= 43360 && t3 <= 43391;
      }(t2) || function(t3) {
        return t3 >= 55216 && t3 <= 55295;
      }(t2) || function(t3) {
        return t3 >= 4352 && t3 <= 4607;
      }(t2) || Ii(t2) || yi(t2) || ci(t2) || function(t3) {
        return t3 >= 12688 && t3 <= 12703;
      }(t2) || hi(t2) || xi(t2) || di(t2) && 12540 !== t2 || !(!Ei(t2) || 65288 === t2 || 65289 === t2 || 65293 === t2 || t2 >= 65306 && t2 <= 65310 || 65339 === t2 || 65341 === t2 || 65343 === t2 || t2 >= 65371 && t2 <= 65503 || 65507 === t2 || t2 >= 65512 && t2 <= 65519) || !(!Ci(t2) || t2 >= 65112 && t2 <= 65118 || t2 >= 65123 && t2 <= 65126) || function(t3) {
        return t3 >= 5120 && t3 <= 5759;
      }(t2) || function(t3) {
        return t3 >= 6320 && t3 <= 6399;
      }(t2) || Pi(t2) || function(t3) {
        return t3 >= 19904 && t3 <= 19967;
      }(t2) || Si(t2) || zi(t2))));
    }
    function Li(t2) {
      return !(Di(t2) || function(t3) {
        return !!(function(t4) {
          return t4 >= 128 && t4 <= 255;
        }(t3) && (167 === t3 || 169 === t3 || 174 === t3 || 177 === t3 || 188 === t3 || 189 === t3 || 190 === t3 || 215 === t3 || 247 === t3) || function(t4) {
          return t4 >= 8192 && t4 <= 8303;
        }(t3) && (8214 === t3 || 8224 === t3 || 8225 === t3 || 8240 === t3 || 8241 === t3 || 8251 === t3 || 8252 === t3 || 8258 === t3 || 8263 === t3 || 8264 === t3 || 8265 === t3 || 8273 === t3) || function(t4) {
          return t4 >= 8448 && t4 <= 8527;
        }(t3) || function(t4) {
          return t4 >= 8528 && t4 <= 8591;
        }(t3) || function(t4) {
          return t4 >= 8960 && t4 <= 9215;
        }(t3) && (t3 >= 8960 && t3 <= 8967 || t3 >= 8972 && t3 <= 8991 || t3 >= 8996 && t3 <= 9e3 || 9003 === t3 || t3 >= 9085 && t3 <= 9114 || t3 >= 9150 && t3 <= 9165 || 9167 === t3 || t3 >= 9169 && t3 <= 9179 || t3 >= 9186 && t3 <= 9215) || function(t4) {
          return t4 >= 9216 && t4 <= 9279;
        }(t3) && 9251 !== t3 || function(t4) {
          return t4 >= 9280 && t4 <= 9311;
        }(t3) || function(t4) {
          return t4 >= 9312 && t4 <= 9471;
        }(t3) || function(t4) {
          return t4 >= 9632 && t4 <= 9727;
        }(t3) || function(t4) {
          return t4 >= 9728 && t4 <= 9983;
        }(t3) && !(t3 >= 9754 && t3 <= 9759) || function(t4) {
          return t4 >= 11008 && t4 <= 11263;
        }(t3) && (t3 >= 11026 && t3 <= 11055 || t3 >= 11088 && t3 <= 11097 || t3 >= 11192 && t3 <= 11243) || fi(t3) || di(t3) || function(t4) {
          return t4 >= 57344 && t4 <= 63743;
        }(t3) || Vi(t3) || Ci(t3) || Ei(t3) || 8734 === t3 || 8756 === t3 || 8757 === t3 || t3 >= 9984 && t3 <= 10087 || t3 >= 10102 && t3 <= 10131 || 65532 === t3 || 65533 === t3);
      }(t2));
    }
    function Fi(t2) {
      return t2 >= 1424 && t2 <= 2303 || Mi(t2) || Ti(t2);
    }
    function Ri(t2, e2) {
      return !(!e2 && Fi(t2) || t2 >= 2304 && t2 <= 3583 || t2 >= 3840 && t2 <= 4255 || function(t3) {
        return t3 >= 6016 && t3 <= 6143;
      }(t2));
    }
    function Oi(t2) {
      for (var e2 = 0, r2 = t2; e2 < r2.length; e2 += 1)
        if (Fi(r2[e2].charCodeAt(0)))
          return true;
      return false;
    }
    var ji = null, Ui = "unavailable", qi = null, Ni = function(t2) {
      t2 && "string" == typeof t2 && t2.indexOf("NetworkError") > -1 && (Ui = "error"), ji && ji(t2);
    };
    function Zi() {
      Gi.fire(new qt("pluginStateChange", { pluginStatus: Ui, pluginURL: qi }));
    }
    var Gi = new Zt(), Yi = function() {
      return Ui;
    }, Xi = function() {
      if ("deferred" !== Ui || !qi)
        throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");
      Ui = "loading", Zi(), qi && Ft({ url: qi }, function(t2) {
        t2 ? Ni(t2) : (Ui = "loaded", Zi());
      });
    }, Ki = { applyArabicShaping: null, processBidirectionalText: null, processStyledBidirectionalText: null, isLoaded: function() {
      return "loaded" === Ui || null != Ki.applyArabicShaping;
    }, isLoading: function() {
      return "loading" === Ui;
    }, setState: function(t2) {
      Ui = t2.pluginStatus, qi = t2.pluginURL;
    }, isParsed: function() {
      return null != Ki.applyArabicShaping && null != Ki.processBidirectionalText && null != Ki.processStyledBidirectionalText;
    }, getPluginURL: function() {
      return qi;
    } }, Ji = function(t2, e2) {
      this.zoom = t2, e2 ? (this.now = e2.now, this.fadeDuration = e2.fadeDuration, this.zoomHistory = e2.zoomHistory, this.transition = e2.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new oi(), this.transition = {});
    };
    Ji.prototype.isSupportedScript = function(t2) {
      return function(t3, e2) {
        for (var r2 = 0, n2 = t3; r2 < n2.length; r2 += 1)
          if (!Ri(n2[r2].charCodeAt(0), e2))
            return false;
        return true;
      }(t2, Ki.isLoaded());
    }, Ji.prototype.crossFadingFactor = function() {
      return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);
    }, Ji.prototype.getCrossfadeParameters = function() {
      var t2 = this.zoom, e2 = t2 - Math.floor(t2), r2 = this.crossFadingFactor();
      return t2 > this.zoomHistory.lastIntegerZoom ? { fromScale: 2, toScale: 1, t: e2 + (1 - e2) * r2 } : { fromScale: 0.5, toScale: 1, t: 1 - (1 - r2) * e2 };
    };
    var Hi = function(t2, e2) {
      this.property = t2, this.value = e2, this.expression = function(t3, e3) {
        if ($r(t3))
          return new fn(t3, e3);
        if (un(t3)) {
          var r2 = cn(t3, e3);
          if ("error" === r2.result)
            throw new Error(r2.value.map(function(t4) {
              return t4.key + ": " + t4.message;
            }).join(", "));
          return r2.value;
        }
        var n2 = t3;
        return "string" == typeof t3 && "color" === e3.type && (n2 = me.parse(t3)), { kind: "constant", evaluate: function() {
          return n2;
        } };
      }(void 0 === e2 ? t2.specification.default : e2, t2.specification);
    };
    Hi.prototype.isDataDriven = function() {
      return "source" === this.expression.kind || "composite" === this.expression.kind;
    }, Hi.prototype.possiblyEvaluate = function(t2, e2, r2) {
      return this.property.possiblyEvaluate(this, t2, e2, r2);
    };
    var Qi = function(t2) {
      this.property = t2, this.value = new Hi(t2, void 0);
    };
    Qi.prototype.transitioned = function(t2, e2) {
      return new $i(this.property, this.value, e2, c({}, t2.transition, this.transition), t2.now);
    }, Qi.prototype.untransitioned = function() {
      return new $i(this.property, this.value, null, {}, 0);
    };
    var Wi = function(t2) {
      this._properties = t2, this._values = Object.create(t2.defaultTransitionablePropertyValues);
    };
    Wi.prototype.getValue = function(t2) {
      return w(this._values[t2].value.value);
    }, Wi.prototype.setValue = function(t2, e2) {
      this._values.hasOwnProperty(t2) || (this._values[t2] = new Qi(this._values[t2].property)), this._values[t2].value = new Hi(this._values[t2].property, null === e2 ? void 0 : w(e2));
    }, Wi.prototype.getTransition = function(t2) {
      return w(this._values[t2].transition);
    }, Wi.prototype.setTransition = function(t2, e2) {
      this._values.hasOwnProperty(t2) || (this._values[t2] = new Qi(this._values[t2].property)), this._values[t2].transition = w(e2) || void 0;
    }, Wi.prototype.serialize = function() {
      for (var t2 = {}, e2 = 0, r2 = Object.keys(this._values); e2 < r2.length; e2 += 1) {
        var n2 = r2[e2], i3 = this.getValue(n2);
        void 0 !== i3 && (t2[n2] = i3);
        var a2 = this.getTransition(n2);
        void 0 !== a2 && (t2[n2 + "-transition"] = a2);
      }
      return t2;
    }, Wi.prototype.transitioned = function(t2, e2) {
      for (var r2 = new ta(this._properties), n2 = 0, i3 = Object.keys(this._values); n2 < i3.length; n2 += 1) {
        var a2 = i3[n2];
        r2._values[a2] = this._values[a2].transitioned(t2, e2._values[a2]);
      }
      return r2;
    }, Wi.prototype.untransitioned = function() {
      for (var t2 = new ta(this._properties), e2 = 0, r2 = Object.keys(this._values); e2 < r2.length; e2 += 1) {
        var n2 = r2[e2];
        t2._values[n2] = this._values[n2].untransitioned();
      }
      return t2;
    };
    var $i = function(t2, e2, r2, n2, i3) {
      this.property = t2, this.value = e2, this.begin = i3 + n2.delay || 0, this.end = this.begin + n2.duration || 0, t2.specification.transition && (n2.delay || n2.duration) && (this.prior = r2);
    };
    $i.prototype.possiblyEvaluate = function(t2, e2, r2) {
      var n2 = t2.now || 0, i3 = this.value.possiblyEvaluate(t2, e2, r2), a2 = this.prior;
      if (a2) {
        if (n2 > this.end)
          return this.prior = null, i3;
        if (this.value.isDataDriven())
          return this.prior = null, i3;
        if (n2 < this.begin)
          return a2.possiblyEvaluate(t2, e2, r2);
        var o2 = (n2 - this.begin) / (this.end - this.begin);
        return this.property.interpolate(a2.possiblyEvaluate(t2, e2, r2), i3, function(t3) {
          if (t3 <= 0)
            return 0;
          if (t3 >= 1)
            return 1;
          var e3 = t3 * t3, r3 = e3 * t3;
          return 4 * (t3 < 0.5 ? r3 : 3 * (t3 - e3) + r3 - 0.75);
        }(o2));
      }
      return i3;
    };
    var ta = function(t2) {
      this._properties = t2, this._values = Object.create(t2.defaultTransitioningPropertyValues);
    };
    ta.prototype.possiblyEvaluate = function(t2, e2, r2) {
      for (var n2 = new na(this._properties), i3 = 0, a2 = Object.keys(this._values); i3 < a2.length; i3 += 1) {
        var o2 = a2[i3];
        n2._values[o2] = this._values[o2].possiblyEvaluate(t2, e2, r2);
      }
      return n2;
    }, ta.prototype.hasTransition = function() {
      for (var t2 = 0, e2 = Object.keys(this._values); t2 < e2.length; t2 += 1)
        if (this._values[e2[t2]].prior)
          return true;
      return false;
    };
    var ea = function(t2) {
      this._properties = t2, this._values = Object.create(t2.defaultPropertyValues);
    };
    ea.prototype.getValue = function(t2) {
      return w(this._values[t2].value);
    }, ea.prototype.setValue = function(t2, e2) {
      this._values[t2] = new Hi(this._values[t2].property, null === e2 ? void 0 : w(e2));
    }, ea.prototype.serialize = function() {
      for (var t2 = {}, e2 = 0, r2 = Object.keys(this._values); e2 < r2.length; e2 += 1) {
        var n2 = r2[e2], i3 = this.getValue(n2);
        void 0 !== i3 && (t2[n2] = i3);
      }
      return t2;
    }, ea.prototype.possiblyEvaluate = function(t2, e2, r2) {
      for (var n2 = new na(this._properties), i3 = 0, a2 = Object.keys(this._values); i3 < a2.length; i3 += 1) {
        var o2 = a2[i3];
        n2._values[o2] = this._values[o2].possiblyEvaluate(t2, e2, r2);
      }
      return n2;
    };
    var ra = function(t2, e2, r2) {
      this.property = t2, this.value = e2, this.parameters = r2;
    };
    ra.prototype.isConstant = function() {
      return "constant" === this.value.kind;
    }, ra.prototype.constantOr = function(t2) {
      return "constant" === this.value.kind ? this.value.value : t2;
    }, ra.prototype.evaluate = function(t2, e2, r2, n2) {
      return this.property.evaluate(this.value, this.parameters, t2, e2, r2, n2);
    };
    var na = function(t2) {
      this._properties = t2, this._values = Object.create(t2.defaultPossiblyEvaluatedValues);
    };
    na.prototype.get = function(t2) {
      return this._values[t2];
    };
    var ia = function(t2) {
      this.specification = t2;
    };
    ia.prototype.possiblyEvaluate = function(t2, e2) {
      return t2.expression.evaluate(e2);
    }, ia.prototype.interpolate = function(t2, e2, r2) {
      var n2 = sr[this.specification.type];
      return n2 ? n2(t2, e2, r2) : t2;
    };
    var aa = function(t2, e2) {
      this.specification = t2, this.overrides = e2;
    };
    aa.prototype.possiblyEvaluate = function(t2, e2, r2, n2) {
      return new ra(this, "constant" === t2.expression.kind || "camera" === t2.expression.kind ? { kind: "constant", value: t2.expression.evaluate(e2, null, {}, r2, n2) } : t2.expression, e2);
    }, aa.prototype.interpolate = function(t2, e2, r2) {
      if ("constant" !== t2.value.kind || "constant" !== e2.value.kind)
        return t2;
      if (void 0 === t2.value.value || void 0 === e2.value.value)
        return new ra(this, { kind: "constant", value: void 0 }, t2.parameters);
      var n2 = sr[this.specification.type];
      return n2 ? new ra(this, { kind: "constant", value: n2(t2.value.value, e2.value.value, r2) }, t2.parameters) : t2;
    }, aa.prototype.evaluate = function(t2, e2, r2, n2, i3, a2) {
      return "constant" === t2.kind ? t2.value : t2.evaluate(e2, r2, n2, i3, a2);
    };
    var oa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.possiblyEvaluate = function(t3, e3, r2, n2) {
        if (void 0 === t3.value)
          return new ra(this, { kind: "constant", value: void 0 }, e3);
        if ("constant" === t3.expression.kind) {
          var i3 = t3.expression.evaluate(e3, null, {}, r2, n2), a2 = "resolvedImage" === t3.property.specification.type && "string" != typeof i3 ? i3.name : i3, o2 = this._calculate(a2, a2, a2, e3);
          return new ra(this, { kind: "constant", value: o2 }, e3);
        }
        if ("camera" === t3.expression.kind) {
          var s2 = this._calculate(t3.expression.evaluate({ zoom: e3.zoom - 1 }), t3.expression.evaluate({ zoom: e3.zoom }), t3.expression.evaluate({ zoom: e3.zoom + 1 }), e3);
          return new ra(this, { kind: "constant", value: s2 }, e3);
        }
        return new ra(this, t3.expression, e3);
      }, e2.prototype.evaluate = function(t3, e3, r2, n2, i3, a2) {
        if ("source" === t3.kind) {
          var o2 = t3.evaluate(e3, r2, n2, i3, a2);
          return this._calculate(o2, o2, o2, e3);
        }
        return "composite" === t3.kind ? this._calculate(t3.evaluate({ zoom: Math.floor(e3.zoom) - 1 }, r2, n2), t3.evaluate({ zoom: Math.floor(e3.zoom) }, r2, n2), t3.evaluate({ zoom: Math.floor(e3.zoom) + 1 }, r2, n2), e3) : t3.value;
      }, e2.prototype._calculate = function(t3, e3, r2, n2) {
        return n2.zoom > n2.zoomHistory.lastIntegerZoom ? { from: t3, to: e3 } : { from: r2, to: e3 };
      }, e2.prototype.interpolate = function(t3) {
        return t3;
      }, e2;
    }(aa), sa = function(t2) {
      this.specification = t2;
    };
    sa.prototype.possiblyEvaluate = function(t2, e2, r2, n2) {
      if (void 0 !== t2.value) {
        if ("constant" === t2.expression.kind) {
          var i3 = t2.expression.evaluate(e2, null, {}, r2, n2);
          return this._calculate(i3, i3, i3, e2);
        }
        return this._calculate(t2.expression.evaluate(new Ji(Math.floor(e2.zoom - 1), e2)), t2.expression.evaluate(new Ji(Math.floor(e2.zoom), e2)), t2.expression.evaluate(new Ji(Math.floor(e2.zoom + 1), e2)), e2);
      }
    }, sa.prototype._calculate = function(t2, e2, r2, n2) {
      return n2.zoom > n2.zoomHistory.lastIntegerZoom ? { from: t2, to: e2 } : { from: r2, to: e2 };
    }, sa.prototype.interpolate = function(t2) {
      return t2;
    };
    var ua = function(t2) {
      this.specification = t2;
    };
    ua.prototype.possiblyEvaluate = function(t2, e2, r2, n2) {
      return !!t2.expression.evaluate(e2, null, {}, r2, n2);
    }, ua.prototype.interpolate = function() {
      return false;
    };
    var la = function(t2) {
      for (var e2 in this.properties = t2, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, this.overridableProperties = [], t2) {
        var r2 = t2[e2];
        r2.specification.overridable && this.overridableProperties.push(e2);
        var n2 = this.defaultPropertyValues[e2] = new Hi(r2, void 0), i3 = this.defaultTransitionablePropertyValues[e2] = new Qi(r2);
        this.defaultTransitioningPropertyValues[e2] = i3.untransitioned(), this.defaultPossiblyEvaluatedValues[e2] = n2.possiblyEvaluate({});
      }
    };
    ti("DataDrivenProperty", aa), ti("DataConstantProperty", ia), ti("CrossFadedDataDrivenProperty", oa), ti("CrossFadedProperty", sa), ti("ColorRampProperty", ua);
    var pa = function(t2) {
      function e2(e3, r2) {
        if (t2.call(this), this.id = e3.id, this.type = e3.type, this._featureFilter = { filter: function() {
          return true;
        }, needGeometry: false }, "custom" !== e3.type && (this.metadata = (e3 = e3).metadata, this.minzoom = e3.minzoom, this.maxzoom = e3.maxzoom, "background" !== e3.type ? (this.source = e3.source, this.sourceLayer = e3["source-layer"], this.filter = e3.filter) : e3.source && (this.source = e3.source), r2.layout && (this._unevaluatedLayout = new ea(r2.layout)), r2.paint)) {
          for (var n2 in this._transitionablePaint = new Wi(r2.paint), e3.paint)
            this.setPaintProperty(n2, e3.paint[n2], { validate: false });
          for (var i3 in e3.layout)
            this.setLayoutProperty(i3, e3.layout[i3], { validate: false });
          this._transitioningPaint = this._transitionablePaint.untransitioned(), this.paint = new na(r2.paint);
        }
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getCrossfadeParameters = function() {
        return this._crossfadeParameters;
      }, e2.prototype.getLayoutProperty = function(t3) {
        return "visibility" === t3 ? this.visibility : this._unevaluatedLayout.getValue(t3);
      }, e2.prototype.setLayoutProperty = function(t3, e3, r2) {
        void 0 === r2 && (r2 = {}), null != e3 && this._validate(Xn, "layers." + this.id + ".layout." + t3, t3, e3, r2) || ("visibility" !== t3 ? this._unevaluatedLayout.setValue(t3, e3) : this.visibility = e3);
      }, e2.prototype.getPaintProperty = function(t3) {
        return g(t3, "-transition") ? this._transitionablePaint.getTransition(t3.slice(0, -"-transition".length)) : this._transitionablePaint.getValue(t3);
      }, e2.prototype.setPaintProperty = function(t3, e3, r2) {
        if (void 0 === r2 && (r2 = {}), null != e3 && this._validate(Yn, "layers." + this.id + ".paint." + t3, t3, e3, r2))
          return false;
        if (g(t3, "-transition"))
          return this._transitionablePaint.setTransition(t3.slice(0, -"-transition".length), e3 || void 0), false;
        var n2 = this._transitionablePaint._values[t3], i3 = "cross-faded-data-driven" === n2.property.specification["property-type"], a2 = n2.value.isDataDriven(), o2 = n2.value;
        this._transitionablePaint.setValue(t3, e3), this._handleSpecialPaintPropertyUpdate(t3);
        var s2 = this._transitionablePaint._values[t3].value;
        return s2.isDataDriven() || a2 || i3 || this._handleOverridablePaintPropertyUpdate(t3, o2, s2);
      }, e2.prototype._handleSpecialPaintPropertyUpdate = function(t3) {
      }, e2.prototype._handleOverridablePaintPropertyUpdate = function(t3, e3, r2) {
        return false;
      }, e2.prototype.isHidden = function(t3) {
        return !!(this.minzoom && t3 < this.minzoom) || !!(this.maxzoom && t3 >= this.maxzoom) || "none" === this.visibility;
      }, e2.prototype.updateTransitions = function(t3) {
        this._transitioningPaint = this._transitionablePaint.transitioned(t3, this._transitioningPaint);
      }, e2.prototype.hasTransition = function() {
        return this._transitioningPaint.hasTransition();
      }, e2.prototype.recalculate = function(t3, e3) {
        t3.getCrossfadeParameters && (this._crossfadeParameters = t3.getCrossfadeParameters()), this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t3, void 0, e3)), this.paint = this._transitioningPaint.possiblyEvaluate(t3, void 0, e3);
      }, e2.prototype.serialize = function() {
        var t3 = { id: this.id, type: this.type, source: this.source, "source-layer": this.sourceLayer, metadata: this.metadata, minzoom: this.minzoom, maxzoom: this.maxzoom, filter: this.filter, layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(), paint: this._transitionablePaint && this._transitionablePaint.serialize() };
        return this.visibility && (t3.layout = t3.layout || {}, t3.layout.visibility = this.visibility), b(t3, function(t4, e3) {
          return !(void 0 === t4 || "layout" === e3 && !Object.keys(t4).length || "paint" === e3 && !Object.keys(t4).length);
        });
      }, e2.prototype._validate = function(t3, e3, r2, n2, i3) {
        return void 0 === i3 && (i3 = {}), (!i3 || false !== i3.validate) && Kn(this, t3.call(Zn, { key: e3, layerType: this.type, objectKey: r2, value: n2, styleSpec: Gt, style: { glyphs: true, sprite: true } }));
      }, e2.prototype.is3D = function() {
        return false;
      }, e2.prototype.isTileClipped = function() {
        return false;
      }, e2.prototype.hasOffscreenPass = function() {
        return false;
      }, e2.prototype.resize = function() {
      }, e2.prototype.isStateDependent = function() {
        for (var t3 in this.paint._values) {
          var e3 = this.paint.get(t3);
          if (e3 instanceof ra && Jr(e3.property.specification) && ("source" === e3.value.kind || "composite" === e3.value.kind) && e3.value.isStateDependent)
            return true;
        }
        return false;
      }, e2;
    }(Zt), ha = { Int8: Int8Array, Uint8: Uint8Array, Int16: Int16Array, Uint16: Uint16Array, Int32: Int32Array, Uint32: Uint32Array, Float32: Float32Array }, ca = function(t2, e2) {
      this._structArray = t2, this._pos1 = e2 * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;
    }, fa = function() {
      this.isTransferred = false, this.capacity = -1, this.resize(0);
    };
    function ya(t2, e2) {
      void 0 === e2 && (e2 = 1);
      var r2 = 0, n2 = 0;
      return { members: t2.map(function(t3) {
        var i3 = ha[t3.type].BYTES_PER_ELEMENT, a2 = r2 = da(r2, Math.max(e2, i3)), o2 = t3.components || 1;
        return n2 = Math.max(n2, i3), r2 += i3 * o2, { name: t3.name, type: t3.type, components: o2, offset: a2 };
      }), size: da(r2, Math.max(n2, e2)), alignment: e2 };
    }
    function da(t2, e2) {
      return Math.ceil(t2 / e2) * e2;
    }
    fa.serialize = function(t2, e2) {
      return t2._trim(), e2 && (t2.isTransferred = true, e2.push(t2.arrayBuffer)), { length: t2.length, arrayBuffer: t2.arrayBuffer };
    }, fa.deserialize = function(t2) {
      var e2 = Object.create(this.prototype);
      return e2.arrayBuffer = t2.arrayBuffer, e2.length = t2.length, e2.capacity = t2.arrayBuffer.byteLength / e2.bytesPerElement, e2._refreshViews(), e2;
    }, fa.prototype._trim = function() {
      this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());
    }, fa.prototype.clear = function() {
      this.length = 0;
    }, fa.prototype.resize = function(t2) {
      this.reserve(t2), this.length = t2;
    }, fa.prototype.reserve = function(t2) {
      if (t2 > this.capacity) {
        this.capacity = Math.max(t2, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);
        var e2 = this.uint8;
        this._refreshViews(), e2 && this.uint8.set(e2);
      }
    }, fa.prototype._refreshViews = function() {
      throw new Error("_refreshViews() must be implemented by each concrete StructArray layout");
    };
    var ma = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2) {
        var o2 = this.length;
        return this.resize(o2 + 1), this.emplace(o2, t3, e3, r2, n2, i3, a2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2) {
        var s2 = 10 * t3, u2 = 5 * t3;
        return this.int16[s2 + 0] = e3, this.int16[s2 + 1] = r2, this.float32[u2 + 1] = n2, this.float32[u2 + 2] = i3, this.float32[u2 + 3] = a2, this.float32[u2 + 4] = o2, t3;
      }, e2;
    }(fa);
    ma.prototype.bytesPerElement = 20, ti("StructArrayLayout2i4f20", ma);
    var va = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3) {
        var r2 = this.length;
        return this.resize(r2 + 1), this.emplace(r2, t3, e3);
      }, e2.prototype.emplace = function(t3, e3, r2) {
        var n2 = 2 * t3;
        return this.int16[n2 + 0] = e3, this.int16[n2 + 1] = r2, t3;
      }, e2;
    }(fa);
    va.prototype.bytesPerElement = 4, ti("StructArrayLayout2i4", va);
    var ga = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2) {
        var i3 = this.length;
        return this.resize(i3 + 1), this.emplace(i3, t3, e3, r2, n2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3) {
        var a2 = 4 * t3;
        return this.int16[a2 + 0] = e3, this.int16[a2 + 1] = r2, this.int16[a2 + 2] = n2, this.int16[a2 + 3] = i3, t3;
      }, e2;
    }(fa);
    ga.prototype.bytesPerElement = 8, ti("StructArrayLayout4i8", ga);
    var xa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2) {
        var o2 = this.length;
        return this.resize(o2 + 1), this.emplace(o2, t3, e3, r2, n2, i3, a2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2) {
        var s2 = 6 * t3;
        return this.int16[s2 + 0] = e3, this.int16[s2 + 1] = r2, this.int16[s2 + 2] = n2, this.int16[s2 + 3] = i3, this.int16[s2 + 4] = a2, this.int16[s2 + 5] = o2, t3;
      }, e2;
    }(fa);
    xa.prototype.bytesPerElement = 12, ti("StructArrayLayout2i4i12", xa);
    var ba = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2) {
        var o2 = this.length;
        return this.resize(o2 + 1), this.emplace(o2, t3, e3, r2, n2, i3, a2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2) {
        var s2 = 4 * t3, u2 = 8 * t3;
        return this.int16[s2 + 0] = e3, this.int16[s2 + 1] = r2, this.uint8[u2 + 4] = n2, this.uint8[u2 + 5] = i3, this.uint8[u2 + 6] = a2, this.uint8[u2 + 7] = o2, t3;
      }, e2;
    }(fa);
    ba.prototype.bytesPerElement = 8, ti("StructArrayLayout2i4ub8", ba);
    var wa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2) {
        var p2 = this.length;
        return this.resize(p2 + 1), this.emplace(p2, t3, e3, r2, n2, i3, a2, o2, s2, u2, l2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2) {
        var h2 = 9 * t3, c2 = 18 * t3;
        return this.uint16[h2 + 0] = e3, this.uint16[h2 + 1] = r2, this.uint16[h2 + 2] = n2, this.uint16[h2 + 3] = i3, this.uint16[h2 + 4] = a2, this.uint16[h2 + 5] = o2, this.uint16[h2 + 6] = s2, this.uint16[h2 + 7] = u2, this.uint8[c2 + 16] = l2, this.uint8[c2 + 17] = p2, t3;
      }, e2;
    }(fa);
    wa.prototype.bytesPerElement = 18, ti("StructArrayLayout8ui2ub18", wa);
    var _a = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2, o2, s2) {
        var u2 = this.length;
        return this.resize(u2 + 1), this.emplace(u2, t3, e3, r2, n2, i3, a2, o2, s2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2, s2, u2) {
        var l2 = 8 * t3;
        return this.uint16[l2 + 0] = e3, this.uint16[l2 + 1] = r2, this.uint16[l2 + 2] = n2, this.uint16[l2 + 3] = i3, this.uint16[l2 + 4] = a2, this.uint16[l2 + 5] = o2, this.uint16[l2 + 6] = s2, this.uint16[l2 + 7] = u2, t3;
      }, e2;
    }(fa);
    _a.prototype.bytesPerElement = 16, ti("StructArrayLayout8ui16", _a);
    var Aa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2) {
        var c2 = this.length;
        return this.resize(c2 + 1), this.emplace(c2, t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2) {
        var f2 = 12 * t3;
        return this.int16[f2 + 0] = e3, this.int16[f2 + 1] = r2, this.int16[f2 + 2] = n2, this.int16[f2 + 3] = i3, this.uint16[f2 + 4] = a2, this.uint16[f2 + 5] = o2, this.uint16[f2 + 6] = s2, this.uint16[f2 + 7] = u2, this.int16[f2 + 8] = l2, this.int16[f2 + 9] = p2, this.int16[f2 + 10] = h2, this.int16[f2 + 11] = c2, t3;
      }, e2;
    }(fa);
    Aa.prototype.bytesPerElement = 24, ti("StructArrayLayout4i4ui4i24", Aa);
    var Sa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2) {
        var n2 = this.length;
        return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2) {
        var i3 = 3 * t3;
        return this.float32[i3 + 0] = e3, this.float32[i3 + 1] = r2, this.float32[i3 + 2] = n2, t3;
      }, e2;
    }(fa);
    Sa.prototype.bytesPerElement = 12, ti("StructArrayLayout3f12", Sa);
    var za = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3) {
        var e3 = this.length;
        return this.resize(e3 + 1), this.emplace(e3, t3);
      }, e2.prototype.emplace = function(t3, e3) {
        return this.uint32[1 * t3 + 0] = e3, t3;
      }, e2;
    }(fa);
    za.prototype.bytesPerElement = 4, ti("StructArrayLayout1ul4", za);
    var Ia = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2, o2, s2, u2) {
        var l2 = this.length;
        return this.resize(l2 + 1), this.emplace(l2, t3, e3, r2, n2, i3, a2, o2, s2, u2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2) {
        var p2 = 10 * t3, h2 = 5 * t3;
        return this.int16[p2 + 0] = e3, this.int16[p2 + 1] = r2, this.int16[p2 + 2] = n2, this.int16[p2 + 3] = i3, this.int16[p2 + 4] = a2, this.int16[p2 + 5] = o2, this.uint32[h2 + 3] = s2, this.uint16[p2 + 8] = u2, this.uint16[p2 + 9] = l2, t3;
      }, e2;
    }(fa);
    Ia.prototype.bytesPerElement = 20, ti("StructArrayLayout6i1ul2ui20", Ia);
    var ka = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2) {
        var o2 = this.length;
        return this.resize(o2 + 1), this.emplace(o2, t3, e3, r2, n2, i3, a2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2) {
        var s2 = 6 * t3;
        return this.int16[s2 + 0] = e3, this.int16[s2 + 1] = r2, this.int16[s2 + 2] = n2, this.int16[s2 + 3] = i3, this.int16[s2 + 4] = a2, this.int16[s2 + 5] = o2, t3;
      }, e2;
    }(fa);
    ka.prototype.bytesPerElement = 12, ti("StructArrayLayout2i2i2i12", ka);
    var Ma = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3) {
        var a2 = this.length;
        return this.resize(a2 + 1), this.emplace(a2, t3, e3, r2, n2, i3);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2) {
        var o2 = 4 * t3, s2 = 8 * t3;
        return this.float32[o2 + 0] = e3, this.float32[o2 + 1] = r2, this.float32[o2 + 2] = n2, this.int16[s2 + 6] = i3, this.int16[s2 + 7] = a2, t3;
      }, e2;
    }(fa);
    Ma.prototype.bytesPerElement = 16, ti("StructArrayLayout2f1f2i16", Ma);
    var Pa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2) {
        var i3 = this.length;
        return this.resize(i3 + 1), this.emplace(i3, t3, e3, r2, n2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3) {
        var a2 = 12 * t3, o2 = 3 * t3;
        return this.uint8[a2 + 0] = e3, this.uint8[a2 + 1] = r2, this.float32[o2 + 1] = n2, this.float32[o2 + 2] = i3, t3;
      }, e2;
    }(fa);
    Pa.prototype.bytesPerElement = 12, ti("StructArrayLayout2ub2f12", Pa);
    var Va = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2) {
        var n2 = this.length;
        return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2) {
        var i3 = 3 * t3;
        return this.uint16[i3 + 0] = e3, this.uint16[i3 + 1] = r2, this.uint16[i3 + 2] = n2, t3;
      }, e2;
    }(fa);
    Va.prototype.bytesPerElement = 6, ti("StructArrayLayout3ui6", Va);
    var Ca = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2, m2) {
        var v2 = this.length;
        return this.resize(v2 + 1), this.emplace(v2, t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2, m2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2, m2, v2) {
        var g2 = 24 * t3, x2 = 12 * t3, b2 = 48 * t3;
        return this.int16[g2 + 0] = e3, this.int16[g2 + 1] = r2, this.uint16[g2 + 2] = n2, this.uint16[g2 + 3] = i3, this.uint32[x2 + 2] = a2, this.uint32[x2 + 3] = o2, this.uint32[x2 + 4] = s2, this.uint16[g2 + 10] = u2, this.uint16[g2 + 11] = l2, this.uint16[g2 + 12] = p2, this.float32[x2 + 7] = h2, this.float32[x2 + 8] = c2, this.uint8[b2 + 36] = f2, this.uint8[b2 + 37] = y2, this.uint8[b2 + 38] = d2, this.uint32[x2 + 10] = m2, this.int16[g2 + 22] = v2, t3;
      }, e2;
    }(fa);
    Ca.prototype.bytesPerElement = 48, ti("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48", Ca);
    var Ta = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2, m2, v2, g2, x2, b2, w2, _2, A2, S2, z2, I2, k2) {
        var M2 = this.length;
        return this.resize(M2 + 1), this.emplace(M2, t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2, m2, v2, g2, x2, b2, w2, _2, A2, S2, z2, I2, k2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2, m2, v2, g2, x2, b2, w2, _2, A2, S2, z2, I2, k2, M2) {
        var P2 = 34 * t3, V2 = 17 * t3;
        return this.int16[P2 + 0] = e3, this.int16[P2 + 1] = r2, this.int16[P2 + 2] = n2, this.int16[P2 + 3] = i3, this.int16[P2 + 4] = a2, this.int16[P2 + 5] = o2, this.int16[P2 + 6] = s2, this.int16[P2 + 7] = u2, this.uint16[P2 + 8] = l2, this.uint16[P2 + 9] = p2, this.uint16[P2 + 10] = h2, this.uint16[P2 + 11] = c2, this.uint16[P2 + 12] = f2, this.uint16[P2 + 13] = y2, this.uint16[P2 + 14] = d2, this.uint16[P2 + 15] = m2, this.uint16[P2 + 16] = v2, this.uint16[P2 + 17] = g2, this.uint16[P2 + 18] = x2, this.uint16[P2 + 19] = b2, this.uint16[P2 + 20] = w2, this.uint16[P2 + 21] = _2, this.uint16[P2 + 22] = A2, this.uint32[V2 + 12] = S2, this.float32[V2 + 13] = z2, this.float32[V2 + 14] = I2, this.float32[V2 + 15] = k2, this.float32[V2 + 16] = M2, t3;
      }, e2;
    }(fa);
    Ta.prototype.bytesPerElement = 68, ti("StructArrayLayout8i15ui1ul4f68", Ta);
    var Ea = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3) {
        var e3 = this.length;
        return this.resize(e3 + 1), this.emplace(e3, t3);
      }, e2.prototype.emplace = function(t3, e3) {
        return this.float32[1 * t3 + 0] = e3, t3;
      }, e2;
    }(fa);
    Ea.prototype.bytesPerElement = 4, ti("StructArrayLayout1f4", Ea);
    var Ba = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2) {
        var n2 = this.length;
        return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2) {
        var i3 = 3 * t3;
        return this.int16[i3 + 0] = e3, this.int16[i3 + 1] = r2, this.int16[i3 + 2] = n2, t3;
      }, e2;
    }(fa);
    Ba.prototype.bytesPerElement = 6, ti("StructArrayLayout3i6", Ba);
    var Da = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2) {
        var n2 = this.length;
        return this.resize(n2 + 1), this.emplace(n2, t3, e3, r2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2) {
        var i3 = 4 * t3;
        return this.uint32[2 * t3 + 0] = e3, this.uint16[i3 + 2] = r2, this.uint16[i3 + 3] = n2, t3;
      }, e2;
    }(fa);
    Da.prototype.bytesPerElement = 8, ti("StructArrayLayout1ul2ui8", Da);
    var La = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3) {
        var r2 = this.length;
        return this.resize(r2 + 1), this.emplace(r2, t3, e3);
      }, e2.prototype.emplace = function(t3, e3, r2) {
        var n2 = 2 * t3;
        return this.uint16[n2 + 0] = e3, this.uint16[n2 + 1] = r2, t3;
      }, e2;
    }(fa);
    La.prototype.bytesPerElement = 4, ti("StructArrayLayout2ui4", La);
    var Fa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3) {
        var e3 = this.length;
        return this.resize(e3 + 1), this.emplace(e3, t3);
      }, e2.prototype.emplace = function(t3, e3) {
        return this.uint16[1 * t3 + 0] = e3, t3;
      }, e2;
    }(fa);
    Fa.prototype.bytesPerElement = 2, ti("StructArrayLayout1ui2", Fa);
    var Ra = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3) {
        var r2 = this.length;
        return this.resize(r2 + 1), this.emplace(r2, t3, e3);
      }, e2.prototype.emplace = function(t3, e3, r2) {
        var n2 = 2 * t3;
        return this.float32[n2 + 0] = e3, this.float32[n2 + 1] = r2, t3;
      }, e2;
    }(fa);
    Ra.prototype.bytesPerElement = 8, ti("StructArrayLayout2f8", Ra);
    var Oa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._refreshViews = function() {
        this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
      }, e2.prototype.emplaceBack = function(t3, e3, r2, n2) {
        var i3 = this.length;
        return this.resize(i3 + 1), this.emplace(i3, t3, e3, r2, n2);
      }, e2.prototype.emplace = function(t3, e3, r2, n2, i3) {
        var a2 = 4 * t3;
        return this.float32[a2 + 0] = e3, this.float32[a2 + 1] = r2, this.float32[a2 + 2] = n2, this.float32[a2 + 3] = i3, t3;
      }, e2;
    }(fa);
    Oa.prototype.bytesPerElement = 16, ti("StructArrayLayout4f16", Oa);
    var ja = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2;
      var r2 = { anchorPointX: { configurable: true }, anchorPointY: { configurable: true }, x1: { configurable: true }, y1: { configurable: true }, x2: { configurable: true }, y2: { configurable: true }, featureIndex: { configurable: true }, sourceLayerIndex: { configurable: true }, bucketIndex: { configurable: true }, anchorPoint: { configurable: true } };
      return r2.anchorPointX.get = function() {
        return this._structArray.int16[this._pos2 + 0];
      }, r2.anchorPointY.get = function() {
        return this._structArray.int16[this._pos2 + 1];
      }, r2.x1.get = function() {
        return this._structArray.int16[this._pos2 + 2];
      }, r2.y1.get = function() {
        return this._structArray.int16[this._pos2 + 3];
      }, r2.x2.get = function() {
        return this._structArray.int16[this._pos2 + 4];
      }, r2.y2.get = function() {
        return this._structArray.int16[this._pos2 + 5];
      }, r2.featureIndex.get = function() {
        return this._structArray.uint32[this._pos4 + 3];
      }, r2.sourceLayerIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 8];
      }, r2.bucketIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 9];
      }, r2.anchorPoint.get = function() {
        return new i2(this.anchorPointX, this.anchorPointY);
      }, Object.defineProperties(e2.prototype, r2), e2;
    }(ca);
    ja.prototype.size = 20;
    var Ua = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.get = function(t3) {
        return new ja(this, t3);
      }, e2;
    }(Ia);
    ti("CollisionBoxArray", Ua);
    var qa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2;
      var r2 = { anchorX: { configurable: true }, anchorY: { configurable: true }, glyphStartIndex: { configurable: true }, numGlyphs: { configurable: true }, vertexStartIndex: { configurable: true }, lineStartIndex: { configurable: true }, lineLength: { configurable: true }, segment: { configurable: true }, lowerSize: { configurable: true }, upperSize: { configurable: true }, lineOffsetX: { configurable: true }, lineOffsetY: { configurable: true }, writingMode: { configurable: true }, placedOrientation: { configurable: true }, hidden: { configurable: true }, crossTileID: { configurable: true }, associatedIconIndex: { configurable: true } };
      return r2.anchorX.get = function() {
        return this._structArray.int16[this._pos2 + 0];
      }, r2.anchorY.get = function() {
        return this._structArray.int16[this._pos2 + 1];
      }, r2.glyphStartIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 2];
      }, r2.numGlyphs.get = function() {
        return this._structArray.uint16[this._pos2 + 3];
      }, r2.vertexStartIndex.get = function() {
        return this._structArray.uint32[this._pos4 + 2];
      }, r2.lineStartIndex.get = function() {
        return this._structArray.uint32[this._pos4 + 3];
      }, r2.lineLength.get = function() {
        return this._structArray.uint32[this._pos4 + 4];
      }, r2.segment.get = function() {
        return this._structArray.uint16[this._pos2 + 10];
      }, r2.lowerSize.get = function() {
        return this._structArray.uint16[this._pos2 + 11];
      }, r2.upperSize.get = function() {
        return this._structArray.uint16[this._pos2 + 12];
      }, r2.lineOffsetX.get = function() {
        return this._structArray.float32[this._pos4 + 7];
      }, r2.lineOffsetY.get = function() {
        return this._structArray.float32[this._pos4 + 8];
      }, r2.writingMode.get = function() {
        return this._structArray.uint8[this._pos1 + 36];
      }, r2.placedOrientation.get = function() {
        return this._structArray.uint8[this._pos1 + 37];
      }, r2.placedOrientation.set = function(t3) {
        this._structArray.uint8[this._pos1 + 37] = t3;
      }, r2.hidden.get = function() {
        return this._structArray.uint8[this._pos1 + 38];
      }, r2.hidden.set = function(t3) {
        this._structArray.uint8[this._pos1 + 38] = t3;
      }, r2.crossTileID.get = function() {
        return this._structArray.uint32[this._pos4 + 10];
      }, r2.crossTileID.set = function(t3) {
        this._structArray.uint32[this._pos4 + 10] = t3;
      }, r2.associatedIconIndex.get = function() {
        return this._structArray.int16[this._pos2 + 22];
      }, Object.defineProperties(e2.prototype, r2), e2;
    }(ca);
    qa.prototype.size = 48;
    var Na = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.get = function(t3) {
        return new qa(this, t3);
      }, e2;
    }(Ca);
    ti("PlacedSymbolArray", Na);
    var Za = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2;
      var r2 = { anchorX: { configurable: true }, anchorY: { configurable: true }, rightJustifiedTextSymbolIndex: { configurable: true }, centerJustifiedTextSymbolIndex: { configurable: true }, leftJustifiedTextSymbolIndex: { configurable: true }, verticalPlacedTextSymbolIndex: { configurable: true }, placedIconSymbolIndex: { configurable: true }, verticalPlacedIconSymbolIndex: { configurable: true }, key: { configurable: true }, textBoxStartIndex: { configurable: true }, textBoxEndIndex: { configurable: true }, verticalTextBoxStartIndex: { configurable: true }, verticalTextBoxEndIndex: { configurable: true }, iconBoxStartIndex: { configurable: true }, iconBoxEndIndex: { configurable: true }, verticalIconBoxStartIndex: { configurable: true }, verticalIconBoxEndIndex: { configurable: true }, featureIndex: { configurable: true }, numHorizontalGlyphVertices: { configurable: true }, numVerticalGlyphVertices: { configurable: true }, numIconVertices: { configurable: true }, numVerticalIconVertices: { configurable: true }, useRuntimeCollisionCircles: { configurable: true }, crossTileID: { configurable: true }, textBoxScale: { configurable: true }, textOffset0: { configurable: true }, textOffset1: { configurable: true }, collisionCircleDiameter: { configurable: true } };
      return r2.anchorX.get = function() {
        return this._structArray.int16[this._pos2 + 0];
      }, r2.anchorY.get = function() {
        return this._structArray.int16[this._pos2 + 1];
      }, r2.rightJustifiedTextSymbolIndex.get = function() {
        return this._structArray.int16[this._pos2 + 2];
      }, r2.centerJustifiedTextSymbolIndex.get = function() {
        return this._structArray.int16[this._pos2 + 3];
      }, r2.leftJustifiedTextSymbolIndex.get = function() {
        return this._structArray.int16[this._pos2 + 4];
      }, r2.verticalPlacedTextSymbolIndex.get = function() {
        return this._structArray.int16[this._pos2 + 5];
      }, r2.placedIconSymbolIndex.get = function() {
        return this._structArray.int16[this._pos2 + 6];
      }, r2.verticalPlacedIconSymbolIndex.get = function() {
        return this._structArray.int16[this._pos2 + 7];
      }, r2.key.get = function() {
        return this._structArray.uint16[this._pos2 + 8];
      }, r2.textBoxStartIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 9];
      }, r2.textBoxEndIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 10];
      }, r2.verticalTextBoxStartIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 11];
      }, r2.verticalTextBoxEndIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 12];
      }, r2.iconBoxStartIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 13];
      }, r2.iconBoxEndIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 14];
      }, r2.verticalIconBoxStartIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 15];
      }, r2.verticalIconBoxEndIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 16];
      }, r2.featureIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 17];
      }, r2.numHorizontalGlyphVertices.get = function() {
        return this._structArray.uint16[this._pos2 + 18];
      }, r2.numVerticalGlyphVertices.get = function() {
        return this._structArray.uint16[this._pos2 + 19];
      }, r2.numIconVertices.get = function() {
        return this._structArray.uint16[this._pos2 + 20];
      }, r2.numVerticalIconVertices.get = function() {
        return this._structArray.uint16[this._pos2 + 21];
      }, r2.useRuntimeCollisionCircles.get = function() {
        return this._structArray.uint16[this._pos2 + 22];
      }, r2.crossTileID.get = function() {
        return this._structArray.uint32[this._pos4 + 12];
      }, r2.crossTileID.set = function(t3) {
        this._structArray.uint32[this._pos4 + 12] = t3;
      }, r2.textBoxScale.get = function() {
        return this._structArray.float32[this._pos4 + 13];
      }, r2.textOffset0.get = function() {
        return this._structArray.float32[this._pos4 + 14];
      }, r2.textOffset1.get = function() {
        return this._structArray.float32[this._pos4 + 15];
      }, r2.collisionCircleDiameter.get = function() {
        return this._structArray.float32[this._pos4 + 16];
      }, Object.defineProperties(e2.prototype, r2), e2;
    }(ca);
    Za.prototype.size = 68;
    var Ga = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.get = function(t3) {
        return new Za(this, t3);
      }, e2;
    }(Ta);
    ti("SymbolInstanceArray", Ga);
    var Ya = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getoffsetX = function(t3) {
        return this.float32[1 * t3 + 0];
      }, e2;
    }(Ea);
    ti("GlyphOffsetArray", Ya);
    var Xa = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getx = function(t3) {
        return this.int16[3 * t3 + 0];
      }, e2.prototype.gety = function(t3) {
        return this.int16[3 * t3 + 1];
      }, e2.prototype.gettileUnitDistanceFromAnchor = function(t3) {
        return this.int16[3 * t3 + 2];
      }, e2;
    }(Ba);
    ti("SymbolLineVertexArray", Xa);
    var Ka = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2;
      var r2 = { featureIndex: { configurable: true }, sourceLayerIndex: { configurable: true }, bucketIndex: { configurable: true } };
      return r2.featureIndex.get = function() {
        return this._structArray.uint32[this._pos4 + 0];
      }, r2.sourceLayerIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 2];
      }, r2.bucketIndex.get = function() {
        return this._structArray.uint16[this._pos2 + 3];
      }, Object.defineProperties(e2.prototype, r2), e2;
    }(ca);
    Ka.prototype.size = 8;
    var Ja = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.get = function(t3) {
        return new Ka(this, t3);
      }, e2;
    }(Da);
    ti("FeatureIndexArray", Ja);
    var Ha = ya([{ name: "a_pos", components: 2, type: "Int16" }], 4).members, Qa = function(t2) {
      void 0 === t2 && (t2 = []), this.segments = t2;
    };
    function Wa(t2, e2) {
      return 256 * (t2 = u(Math.floor(t2), 0, 255)) + u(Math.floor(e2), 0, 255);
    }
    Qa.prototype.prepareSegment = function(t2, e2, r2, n2) {
      var i3 = this.segments[this.segments.length - 1];
      return t2 > Qa.MAX_VERTEX_ARRAY_LENGTH && S("Max vertices per segment is " + Qa.MAX_VERTEX_ARRAY_LENGTH + ": bucket requested " + t2), (!i3 || i3.vertexLength + t2 > Qa.MAX_VERTEX_ARRAY_LENGTH || i3.sortKey !== n2) && (i3 = { vertexOffset: e2.length, primitiveOffset: r2.length, vertexLength: 0, primitiveLength: 0 }, void 0 !== n2 && (i3.sortKey = n2), this.segments.push(i3)), i3;
    }, Qa.prototype.get = function() {
      return this.segments;
    }, Qa.prototype.destroy = function() {
      for (var t2 = 0, e2 = this.segments; t2 < e2.length; t2 += 1) {
        var r2 = e2[t2];
        for (var n2 in r2.vaos)
          r2.vaos[n2].destroy();
      }
    }, Qa.simpleSegment = function(t2, e2, r2, n2) {
      return new Qa([{ vertexOffset: t2, primitiveOffset: e2, vertexLength: r2, primitiveLength: n2, vaos: {}, sortKey: 0 }]);
    }, Qa.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, ti("SegmentVector", Qa);
    var $a = ya([{ name: "a_pattern_from", components: 4, type: "Uint16" }, { name: "a_pattern_to", components: 4, type: "Uint16" }, { name: "a_pixel_ratio_from", components: 1, type: "Uint8" }, { name: "a_pixel_ratio_to", components: 1, type: "Uint8" }]), to = ya([{ name: "a_dash_to", components: 4, type: "Uint16" }, { name: "a_dash_from", components: 4, type: "Uint16" }]), eo = e(function(t2) {
      t2.exports = function(t3, e2) {
        var r2, n2, i3, a2, o2, s2, u2, l2;
        for (n2 = t3.length - (r2 = 3 & t3.length), i3 = e2, o2 = 3432918353, s2 = 461845907, l2 = 0; l2 < n2; )
          u2 = 255 & t3.charCodeAt(l2) | (255 & t3.charCodeAt(++l2)) << 8 | (255 & t3.charCodeAt(++l2)) << 16 | (255 & t3.charCodeAt(++l2)) << 24, ++l2, i3 = 27492 + (65535 & (a2 = 5 * (65535 & (i3 = (i3 ^= u2 = (65535 & (u2 = (u2 = (65535 & u2) * o2 + (((u2 >>> 16) * o2 & 65535) << 16) & 4294967295) << 15 | u2 >>> 17)) * s2 + (((u2 >>> 16) * s2 & 65535) << 16) & 4294967295) << 13 | i3 >>> 19)) + ((5 * (i3 >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (a2 >>> 16) & 65535) << 16);
        switch (u2 = 0, r2) {
          case 3:
            u2 ^= (255 & t3.charCodeAt(l2 + 2)) << 16;
          case 2:
            u2 ^= (255 & t3.charCodeAt(l2 + 1)) << 8;
          case 1:
            i3 ^= u2 = (65535 & (u2 = (u2 = (65535 & (u2 ^= 255 & t3.charCodeAt(l2))) * o2 + (((u2 >>> 16) * o2 & 65535) << 16) & 4294967295) << 15 | u2 >>> 17)) * s2 + (((u2 >>> 16) * s2 & 65535) << 16) & 4294967295;
        }
        return i3 ^= t3.length, i3 = 2246822507 * (65535 & (i3 ^= i3 >>> 16)) + ((2246822507 * (i3 >>> 16) & 65535) << 16) & 4294967295, i3 = 3266489909 * (65535 & (i3 ^= i3 >>> 13)) + ((3266489909 * (i3 >>> 16) & 65535) << 16) & 4294967295, (i3 ^= i3 >>> 16) >>> 0;
      };
    }), ro = e(function(t2) {
      t2.exports = function(t3, e2) {
        for (var r2, n2 = t3.length, i3 = e2 ^ n2, a2 = 0; n2 >= 4; )
          r2 = 1540483477 * (65535 & (r2 = 255 & t3.charCodeAt(a2) | (255 & t3.charCodeAt(++a2)) << 8 | (255 & t3.charCodeAt(++a2)) << 16 | (255 & t3.charCodeAt(++a2)) << 24)) + ((1540483477 * (r2 >>> 16) & 65535) << 16), i3 = 1540483477 * (65535 & i3) + ((1540483477 * (i3 >>> 16) & 65535) << 16) ^ (r2 = 1540483477 * (65535 & (r2 ^= r2 >>> 24)) + ((1540483477 * (r2 >>> 16) & 65535) << 16)), n2 -= 4, ++a2;
        switch (n2) {
          case 3:
            i3 ^= (255 & t3.charCodeAt(a2 + 2)) << 16;
          case 2:
            i3 ^= (255 & t3.charCodeAt(a2 + 1)) << 8;
          case 1:
            i3 = 1540483477 * (65535 & (i3 ^= 255 & t3.charCodeAt(a2))) + ((1540483477 * (i3 >>> 16) & 65535) << 16);
        }
        return i3 = 1540483477 * (65535 & (i3 ^= i3 >>> 13)) + ((1540483477 * (i3 >>> 16) & 65535) << 16), (i3 ^= i3 >>> 15) >>> 0;
      };
    }), no = eo, io = ro;
    no.murmur3 = eo, no.murmur2 = io;
    var ao = function() {
      this.ids = [], this.positions = [], this.indexed = false;
    };
    ao.prototype.add = function(t2, e2, r2, n2) {
      this.ids.push(so(t2)), this.positions.push(e2, r2, n2);
    }, ao.prototype.getPositions = function(t2) {
      for (var e2 = so(t2), r2 = 0, n2 = this.ids.length - 1; r2 < n2; ) {
        var i3 = r2 + n2 >> 1;
        this.ids[i3] >= e2 ? n2 = i3 : r2 = i3 + 1;
      }
      for (var a2 = []; this.ids[r2] === e2; )
        a2.push({ index: this.positions[3 * r2], start: this.positions[3 * r2 + 1], end: this.positions[3 * r2 + 2] }), r2++;
      return a2;
    }, ao.serialize = function(t2, e2) {
      var r2 = new Float64Array(t2.ids), n2 = new Uint32Array(t2.positions);
      return function t3(e3, r3, n3, i3) {
        for (; n3 < i3; ) {
          for (var a2 = e3[n3 + i3 >> 1], o2 = n3 - 1, s2 = i3 + 1; ; ) {
            do {
              o2++;
            } while (e3[o2] < a2);
            do {
              s2--;
            } while (e3[s2] > a2);
            if (o2 >= s2)
              break;
            uo(e3, o2, s2), uo(r3, 3 * o2, 3 * s2), uo(r3, 3 * o2 + 1, 3 * s2 + 1), uo(r3, 3 * o2 + 2, 3 * s2 + 2);
          }
          s2 - n3 < i3 - s2 ? (t3(e3, r3, n3, s2), n3 = s2 + 1) : (t3(e3, r3, s2 + 1, i3), i3 = s2);
        }
      }(r2, n2, 0, r2.length - 1), e2 && e2.push(r2.buffer, n2.buffer), { ids: r2, positions: n2 };
    }, ao.deserialize = function(t2) {
      var e2 = new ao();
      return e2.ids = t2.ids, e2.positions = t2.positions, e2.indexed = true, e2;
    };
    var oo = Math.pow(2, 53) - 1;
    function so(t2) {
      var e2 = +t2;
      return !isNaN(e2) && e2 <= oo ? e2 : no(String(t2));
    }
    function uo(t2, e2, r2) {
      var n2 = t2[e2];
      t2[e2] = t2[r2], t2[r2] = n2;
    }
    ti("FeaturePositionMap", ao);
    var lo = function(t2, e2) {
      this.gl = t2.gl, this.location = e2;
    }, po = function(t2) {
      function e2(e3, r2) {
        t2.call(this, e3, r2), this.current = 0;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        this.current !== t3 && (this.current = t3, this.gl.uniform1i(this.location, t3));
      }, e2;
    }(lo), ho = function(t2) {
      function e2(e3, r2) {
        t2.call(this, e3, r2), this.current = 0;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        this.current !== t3 && (this.current = t3, this.gl.uniform1f(this.location, t3));
      }, e2;
    }(lo), co = function(t2) {
      function e2(e3, r2) {
        t2.call(this, e3, r2), this.current = [0, 0];
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        t3[0] === this.current[0] && t3[1] === this.current[1] || (this.current = t3, this.gl.uniform2f(this.location, t3[0], t3[1]));
      }, e2;
    }(lo), fo = function(t2) {
      function e2(e3, r2) {
        t2.call(this, e3, r2), this.current = [0, 0, 0];
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        t3[0] === this.current[0] && t3[1] === this.current[1] && t3[2] === this.current[2] || (this.current = t3, this.gl.uniform3f(this.location, t3[0], t3[1], t3[2]));
      }, e2;
    }(lo), yo = function(t2) {
      function e2(e3, r2) {
        t2.call(this, e3, r2), this.current = [0, 0, 0, 0];
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        t3[0] === this.current[0] && t3[1] === this.current[1] && t3[2] === this.current[2] && t3[3] === this.current[3] || (this.current = t3, this.gl.uniform4f(this.location, t3[0], t3[1], t3[2], t3[3]));
      }, e2;
    }(lo), mo = function(t2) {
      function e2(e3, r2) {
        t2.call(this, e3, r2), this.current = me.transparent;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        t3.r === this.current.r && t3.g === this.current.g && t3.b === this.current.b && t3.a === this.current.a || (this.current = t3, this.gl.uniform4f(this.location, t3.r, t3.g, t3.b, t3.a));
      }, e2;
    }(lo), vo = new Float32Array(16), go = function(t2) {
      function e2(e3, r2) {
        t2.call(this, e3, r2), this.current = vo;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        if (t3[12] !== this.current[12] || t3[0] !== this.current[0])
          return this.current = t3, void this.gl.uniformMatrix4fv(this.location, false, t3);
        for (var e3 = 1; e3 < 16; e3++)
          if (t3[e3] !== this.current[e3]) {
            this.current = t3, this.gl.uniformMatrix4fv(this.location, false, t3);
            break;
          }
      }, e2;
    }(lo);
    function xo(t2) {
      return [Wa(255 * t2.r, 255 * t2.g), Wa(255 * t2.b, 255 * t2.a)];
    }
    var bo = function(t2, e2, r2) {
      this.value = t2, this.uniformNames = e2.map(function(t3) {
        return "u_" + t3;
      }), this.type = r2;
    };
    bo.prototype.setUniform = function(t2, e2, r2) {
      t2.set(r2.constantOr(this.value));
    }, bo.prototype.getBinding = function(t2, e2, r2) {
      return "color" === this.type ? new mo(t2, e2) : new ho(t2, e2);
    };
    var wo = function(t2, e2) {
      this.uniformNames = e2.map(function(t3) {
        return "u_" + t3;
      }), this.patternFrom = null, this.patternTo = null, this.pixelRatioFrom = 1, this.pixelRatioTo = 1;
    };
    wo.prototype.setConstantPatternPositions = function(t2, e2) {
      this.pixelRatioFrom = e2.pixelRatio, this.pixelRatioTo = t2.pixelRatio, this.patternFrom = e2.tl.concat(e2.br), this.patternTo = t2.tl.concat(t2.br);
    }, wo.prototype.setUniform = function(t2, e2, r2, n2) {
      var i3 = "u_pattern_to" === n2 || "u_dash_to" === n2 ? this.patternTo : "u_pattern_from" === n2 || "u_dash_from" === n2 ? this.patternFrom : "u_pixel_ratio_to" === n2 ? this.pixelRatioTo : "u_pixel_ratio_from" === n2 ? this.pixelRatioFrom : null;
      i3 && t2.set(i3);
    }, wo.prototype.getBinding = function(t2, e2, r2) {
      return "u_pattern_from" === r2 || "u_pattern_to" === r2 || "u_dash_from" === r2 || "u_dash_to" === r2 ? new yo(t2, e2) : new ho(t2, e2);
    };
    var _o = function(t2, e2, r2, n2) {
      this.expression = t2, this.type = r2, this.maxValue = 0, this.paintVertexAttributes = e2.map(function(t3) {
        return { name: "a_" + t3, type: "Float32", components: "color" === r2 ? 2 : 1, offset: 0 };
      }), this.paintVertexArray = new n2();
    };
    _o.prototype.populatePaintArray = function(t2, e2, r2, n2, i3) {
      var a2 = this.paintVertexArray.length, o2 = this.expression.evaluate(new Ji(0), e2, {}, n2, [], i3);
      this.paintVertexArray.resize(t2), this._setPaintValue(a2, t2, o2);
    }, _o.prototype.updatePaintArray = function(t2, e2, r2, n2) {
      var i3 = this.expression.evaluate({ zoom: 0 }, r2, n2);
      this._setPaintValue(t2, e2, i3);
    }, _o.prototype._setPaintValue = function(t2, e2, r2) {
      if ("color" === this.type)
        for (var n2 = xo(r2), i3 = t2; i3 < e2; i3++)
          this.paintVertexArray.emplace(i3, n2[0], n2[1]);
      else {
        for (var a2 = t2; a2 < e2; a2++)
          this.paintVertexArray.emplace(a2, r2);
        this.maxValue = Math.max(this.maxValue, Math.abs(r2));
      }
    }, _o.prototype.upload = function(t2) {
      this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t2.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
    }, _o.prototype.destroy = function() {
      this.paintVertexBuffer && this.paintVertexBuffer.destroy();
    };
    var Ao = function(t2, e2, r2, n2, i3, a2) {
      this.expression = t2, this.uniformNames = e2.map(function(t3) {
        return "u_" + t3 + "_t";
      }), this.type = r2, this.useIntegerZoom = n2, this.zoom = i3, this.maxValue = 0, this.paintVertexAttributes = e2.map(function(t3) {
        return { name: "a_" + t3, type: "Float32", components: "color" === r2 ? 4 : 2, offset: 0 };
      }), this.paintVertexArray = new a2();
    };
    Ao.prototype.populatePaintArray = function(t2, e2, r2, n2, i3) {
      var a2 = this.expression.evaluate(new Ji(this.zoom), e2, {}, n2, [], i3), o2 = this.expression.evaluate(new Ji(this.zoom + 1), e2, {}, n2, [], i3), s2 = this.paintVertexArray.length;
      this.paintVertexArray.resize(t2), this._setPaintValue(s2, t2, a2, o2);
    }, Ao.prototype.updatePaintArray = function(t2, e2, r2, n2) {
      var i3 = this.expression.evaluate({ zoom: this.zoom }, r2, n2), a2 = this.expression.evaluate({ zoom: this.zoom + 1 }, r2, n2);
      this._setPaintValue(t2, e2, i3, a2);
    }, Ao.prototype._setPaintValue = function(t2, e2, r2, n2) {
      if ("color" === this.type)
        for (var i3 = xo(r2), a2 = xo(n2), o2 = t2; o2 < e2; o2++)
          this.paintVertexArray.emplace(o2, i3[0], i3[1], a2[0], a2[1]);
      else {
        for (var s2 = t2; s2 < e2; s2++)
          this.paintVertexArray.emplace(s2, r2, n2);
        this.maxValue = Math.max(this.maxValue, Math.abs(r2), Math.abs(n2));
      }
    }, Ao.prototype.upload = function(t2) {
      this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t2.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
    }, Ao.prototype.destroy = function() {
      this.paintVertexBuffer && this.paintVertexBuffer.destroy();
    }, Ao.prototype.setUniform = function(t2, e2) {
      var r2 = this.useIntegerZoom ? Math.floor(e2.zoom) : e2.zoom, n2 = u(this.expression.interpolationFactor(r2, this.zoom, this.zoom + 1), 0, 1);
      t2.set(n2);
    }, Ao.prototype.getBinding = function(t2, e2, r2) {
      return new ho(t2, e2);
    };
    var So = function(t2, e2, r2, n2, i3, a2, o2, s2) {
      this.expression = t2, this.type = r2, this.useIntegerZoom = n2, this.zoom = i3, this.layerId = o2, this.paintVertexAttributes = ("array" === r2 ? to : $a).members;
      for (var u2 = 0; u2 < e2.length; ++u2)
        ;
      this.zoomInPaintVertexArray = new a2(), this.zoomOutPaintVertexArray = new a2(), this.property = s2;
    };
    So.prototype.populatePaintArray = function(t2, e2, r2) {
      var n2 = this.zoomInPaintVertexArray.length;
      this.zoomInPaintVertexArray.resize(t2), this.zoomOutPaintVertexArray.resize(t2), this._setPaintValues(n2, t2, e2.patterns && e2.patterns[this.layerId], r2);
    }, So.prototype.updatePaintArray = function(t2, e2, r2, n2, i3) {
      this._setPaintValues(t2, e2, r2.patterns && r2.patterns[this.layerId], i3);
    }, So.prototype._setPaintValues = function(t2, e2, r2, n2) {
      if (n2 && r2) {
        var i3 = r2.min, a2 = r2.mid, o2 = r2.max;
        "line-outline-dasharray" !== String(this.property) && "line-outline-pattern" !== String(this.property) || (i3 = r2.min_out, a2 = r2.mid_out, o2 = r2.max_out);
        var s2 = n2[i3], u2 = n2[a2], l2 = n2[o2];
        if (s2 && u2 && l2)
          for (var p2 = t2; p2 < e2; p2++)
            this._setPaintValue(this.zoomInPaintVertexArray, p2, u2, s2), this._setPaintValue(this.zoomOutPaintVertexArray, p2, u2, l2);
      }
    }, So.prototype._setPaintValue = function(t2, e2, r2, n2) {
      t2.emplace(e2, r2.tl[0], r2.tl[1], r2.br[0], r2.br[1], n2.tl[0], n2.tl[1], n2.br[0], n2.br[1], r2.pixelRatio, n2.pixelRatio);
    }, So.prototype.upload = function(t2) {
      this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t2.createVertexBuffer(this.zoomInPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent), this.zoomOutPaintVertexBuffer = t2.createVertexBuffer(this.zoomOutPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
    }, So.prototype.destroy = function() {
      this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(), this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy();
    };
    var zo = function(t2, e2, r2, n2) {
      this.binders = {}, this.layoutAttributes = n2, this._buffers = [];
      var i3 = [];
      for (var a2 in t2.paint._values)
        if (r2(a2)) {
          var o2 = t2.paint.get(a2);
          if (o2 instanceof ra && Jr(o2.property.specification)) {
            var s2 = ko(a2, t2.type), u2 = o2.value, l2 = o2.property.specification.type, p2 = o2.property.useIntegerZoom, h2 = o2.property.specification["property-type"], c2 = "cross-faded" === h2 || "cross-faded-data-driven" === h2, f2 = ("line-dasharray" === String(a2) || "line-outline-dasharray" === String(a2)) && "constant" !== t2.layout.get("line-cap").value.kind;
            if ("constant" !== u2.kind || f2)
              if ("source" === u2.kind || f2 || c2) {
                var y2 = Mo(a2, l2, "source");
                this.binders[a2] = c2 ? new So(u2, s2, l2, p2, e2, y2, t2.id, a2) : new _o(u2, s2, l2, y2), i3.push("/a_" + a2);
              } else {
                var d2 = Mo(a2, l2, "composite");
                this.binders[a2] = new Ao(u2, s2, l2, p2, e2, d2), i3.push("/z_" + a2);
              }
            else
              this.binders[a2] = c2 ? new wo(u2.value, s2) : new bo(u2.value, s2, l2), i3.push("/u_" + a2);
          }
        }
      this.cacheKey = i3.sort().join("");
    };
    zo.prototype.getMaxValue = function(t2) {
      var e2 = this.binders[t2];
      return e2 instanceof _o || e2 instanceof Ao ? e2.maxValue : 0;
    }, zo.prototype.populatePaintArrays = function(t2, e2, r2, n2, i3) {
      for (var a2 in this.binders) {
        var o2 = this.binders[a2];
        (o2 instanceof _o || o2 instanceof Ao || o2 instanceof So) && o2.populatePaintArray(t2, e2, r2, n2, i3);
      }
    }, zo.prototype.setConstantPatternPositions = function(t2, e2) {
      for (var r2 in this.binders) {
        var n2 = this.binders[r2];
        n2 instanceof wo && n2.setConstantPatternPositions(t2, e2);
      }
    }, zo.prototype.updatePaintArrays = function(t2, e2, r2, n2, i3) {
      var a2 = false;
      for (var o2 in t2)
        for (var s2 = 0, u2 = e2.getPositions(o2); s2 < u2.length; s2 += 1) {
          var l2 = u2[s2], p2 = r2.feature(l2.index);
          for (var h2 in this.binders) {
            var c2 = this.binders[h2];
            if ((c2 instanceof _o || c2 instanceof Ao || c2 instanceof So) && true === c2.expression.isStateDependent) {
              var f2 = n2.paint.get(h2);
              c2.expression = f2.value, c2.updatePaintArray(l2.start, l2.end, p2, t2[o2], i3), a2 = true;
            }
          }
        }
      return a2;
    }, zo.prototype.defines = function() {
      var t2 = [];
      for (var e2 in this.binders) {
        var r2 = this.binders[e2];
        (r2 instanceof bo || r2 instanceof wo) && t2.push.apply(t2, r2.uniformNames.map(function(t3) {
          return "#define HAS_UNIFORM_" + t3;
        }));
      }
      return t2;
    }, zo.prototype.getPaintVertexBuffers = function() {
      return this._buffers;
    }, zo.prototype.getUniforms = function(t2, e2) {
      var r2 = [];
      for (var n2 in this.binders) {
        var i3 = this.binders[n2];
        if (i3 instanceof bo || i3 instanceof wo || i3 instanceof Ao)
          for (var a2 = 0, o2 = i3.uniformNames; a2 < o2.length; a2 += 1) {
            var s2 = o2[a2];
            if (e2[s2]) {
              var u2 = i3.getBinding(t2, e2[s2], s2);
              r2.push({ name: s2, property: n2, binding: u2 });
            }
          }
      }
      return r2;
    }, zo.prototype.setUniforms = function(t2, e2, r2, n2) {
      for (var i3 = 0, a2 = e2; i3 < a2.length; i3 += 1) {
        var o2 = a2[i3], s2 = o2.name, u2 = o2.property;
        this.binders[u2].setUniform(o2.binding, n2, r2.get(u2), s2);
      }
    }, zo.prototype.updatePaintBuffers = function(t2) {
      for (var e2 in this._buffers = [], this.binders) {
        var r2 = this.binders[e2];
        if (t2 && r2 instanceof So) {
          var n2 = 2 === t2.fromScale ? r2.zoomInPaintVertexBuffer : r2.zoomOutPaintVertexBuffer;
          n2 && this._buffers.push(n2);
        } else
          (r2 instanceof _o || r2 instanceof Ao) && r2.paintVertexBuffer && this._buffers.push(r2.paintVertexBuffer);
      }
    }, zo.prototype.upload = function(t2) {
      for (var e2 in this.binders) {
        var r2 = this.binders[e2];
        (r2 instanceof _o || r2 instanceof Ao || r2 instanceof So) && r2.upload(t2);
      }
      this.updatePaintBuffers();
    }, zo.prototype.destroy = function() {
      for (var t2 in this.binders) {
        var e2 = this.binders[t2];
        (e2 instanceof _o || e2 instanceof Ao || e2 instanceof So) && e2.destroy();
      }
    };
    var Io = function(t2, e2, r2, n2) {
      void 0 === n2 && (n2 = function() {
        return true;
      }), this.programConfigurations = {};
      for (var i3 = 0, a2 = e2; i3 < a2.length; i3 += 1) {
        var o2 = a2[i3];
        this.programConfigurations[o2.id] = new zo(o2, r2, n2, t2);
      }
      this.needsUpload = false, this._featureMap = new ao(), this._bufferOffset = 0;
    };
    function ko(t2, e2) {
      return "eline" == e2 && (e2 = "line"), { "text-opacity": ["opacity"], "icon-opacity": ["opacity"], "text-color": ["fill_color"], "icon-color": ["fill_color"], "text-halo-color": ["halo_color"], "icon-halo-color": ["halo_color"], "text-halo-blur": ["halo_blur"], "icon-halo-blur": ["halo_blur"], "text-halo-width": ["halo_width"], "icon-halo-width": ["halo_width"], "line-gap-width": ["gapwidth"], "line-pattern": ["pattern_from", "pattern_to", "pixel_ratio_from", "pixel_ratio_to"], "fill-pattern": ["pattern_from", "pattern_to", "pixel_ratio_from", "pixel_ratio_to"], "fill-extrusion-pattern": ["pattern_from", "pattern_to", "pixel_ratio_from", "pixel_ratio_to"], "line-dasharray": ["dash_to", "dash_from"], "line-outline-pattern": ["pattern_from", "pattern_to", "pixel_ratio_from", "pixel_ratio_to"], "line-outline-dasharray": ["dash_to", "dash_from"], "line-outline-width": ["width"], "line-outline-floorwidth": ["floorwidth"], "line-outline-color": ["color"] }[t2] || [t2.replace(e2 + "-", "").replace(/-/g, "_")];
    }
    function Mo(t2, e2, r2) {
      var n2 = { color: { source: Ra, composite: Oa }, number: { source: Ea, composite: Ra } }, i3 = function(t3) {
        return { "line-pattern": { source: wa, composite: wa }, "fill-pattern": { source: wa, composite: wa }, "fill-extrusion-pattern": { source: wa, composite: wa }, "line-dasharray": { source: _a, composite: _a }, "line-outline-dasharray": { source: _a, composite: _a }, "line-outline-pattern": { source: wa, composite: wa } }[t3];
      }(t2);
      return i3 && i3[r2] || n2[e2][r2];
    }
    Io.prototype.populatePaintArrays = function(t2, e2, r2, n2, i3, a2) {
      for (var o2 in this.programConfigurations)
        this.programConfigurations[o2].populatePaintArrays(t2, e2, n2, i3, a2);
      void 0 !== e2.id && this._featureMap.add(e2.id, r2, this._bufferOffset, t2), this._bufferOffset = t2, this.needsUpload = true;
    }, Io.prototype.updatePaintArrays = function(t2, e2, r2, n2) {
      for (var i3 = 0, a2 = r2; i3 < a2.length; i3 += 1) {
        var o2 = a2[i3];
        this.needsUpload = this.programConfigurations[o2.id].updatePaintArrays(t2, this._featureMap, e2, o2, n2) || this.needsUpload;
      }
    }, Io.prototype.get = function(t2) {
      return this.programConfigurations[t2];
    }, Io.prototype.upload = function(t2) {
      if (this.needsUpload) {
        for (var e2 in this.programConfigurations)
          this.programConfigurations[e2].upload(t2);
        this.needsUpload = false;
      }
    }, Io.prototype.destroy = function() {
      for (var t2 in this.programConfigurations)
        this.programConfigurations[t2].destroy();
    }, ti("ConstantBinder", bo), ti("CrossFadedConstantBinder", wo), ti("SourceExpressionBinder", _o), ti("CrossFadedCompositeBinder", So), ti("CompositeExpressionBinder", Ao), ti("ProgramConfiguration", zo, { omit: ["_buffers"] }), ti("ProgramConfigurationSet", Io);
    var Po = function(t2) {
      return Math.abs(t2 - 180) <= 1e-6 ? 2147483647 : parseInt(2147483648 * t2 / 180 + 0.5);
    }, Vo = function(t2, e2, r2) {
      var n2 = {}, i3 = 1 << r2, a2 = 360 / i3, o2 = 180 / i3;
      return e2 = i3 - e2 - 1, n2.low_lon = a2 * t2 - 180, n2.low_lat = o2 * e2 - 90, n2.high_lon = a2 * (t2 + 1) - 180, n2.high_lat = o2 * (e2 + 1) - 90, n2;
    }, Co = function(t2, e2, r2) {
      r2 -= -90;
      var n2 = 1 << t2, i3 = 180 / n2, a2 = parseInt((e2 -= -180) / (360 / n2)), o2 = parseInt(r2 / i3);
      return o2 = n2 - o2 - 1, { x: parseInt(a2), y: parseInt(o2) };
    }, To = function(t2, e2) {
      return 2 == e2 ? t2 < 5 ? 11 : t2 < 14 ? 12 : 13 : 3 == e2 ? 12 : t2 <= 3 ? 11 : 12;
    }, Eo = function(t2, e2, r2, n2) {
      var i3 = Vo(r2, n2, t2);
      return function(t3, e3, r3, n3) {
        var i4 = parseInt(33 - e3 - t3);
        n3 < -90 && (n3 = -90), n3 > 90 && (n3 = 90), r3 < -180 && (r3 = -180), r3 > 180 && (r3 = 180);
        var a2 = Po(r3), o2 = Po(n3), s2 = a2 / (1 << i4), u2 = o2 / (1 << i4);
        return { x: a2 = s2 > 0 ? parseInt(s2 + 0.5) : parseInt(s2 - 0.5), y: o2 = u2 > 0 ? parseInt(u2 + 0.5) : parseInt(u2 - 0.5) };
      }(t2, e2, i3.low_lon, i3.low_lat);
    }, Bo = function(t2, e2, r2, n2, i3, a2) {
      var o2 = parseInt(i3 + r2), s2 = 33 - e2 - t2;
      return i3 = o2 << s2, o2 > 0 && i3 < 0 && (i3 = 2147483647), { lon: 180 * i3 / 2147483648, lat: 180 * (a2 = parseInt(a2 + n2) << s2) / 2147483648 };
    }, Do = function(t2, e2, r2, n2, i3, a2, o2) {
      var s2 = o2 || To(t2, e2), u2 = Eo(t2, s2, r2, n2);
      return Bo(t2, s2, u2.x, u2.y, i3, a2);
    }, Lo = function(t2) {
      return -90 == t2 ? 1 : 90 == t2 ? 0 : (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t2 * Math.PI / 360))) / 360;
    }, Fo = function(t2, e2, r2, n2) {
      var i3 = Math.pow(2, r2), a2 = Vo(t2, e2, r2), o2 = Lo(a2.high_lat);
      if ("all" == n2) {
        var s2 = Lo(a2.low_lat);
        return { top: o2 * i3, bottom: s2 * i3, height: (s2 - o2) * i3 };
      }
      return o2 * i3;
    }, Ro = { min: -1 * Math.pow(2, 14), max: Math.pow(2, 14) - 1 };
    function Oo(t2) {
      var e2 = 8192 / t2.extent, r2 = t2.loadGeometry();
      if (t2.tileID && "Sg4326" == t2.tileID.reference) {
        for (var n2 = t2.tileID, i3 = n2.x, a2 = n2.y, o2 = n2.z, s2 = Math.pow(2, o2), l2 = t2.tileID._tileY, p2 = t2.properties.resolution || To(o2, t2.type), h2 = Eo(o2, p2, i3, a2), c2 = h2.x, f2 = h2.y, y2 = Math.PI / 4, d2 = Math.PI / 360, m2 = 180 / Math.PI, v2 = 0, g2 = r2.length; v2 < g2; v2++)
          for (var x2 = r2[v2], b2 = 0, w2 = x2.length; b2 < w2; b2++) {
            var _2, A2 = x2[b2], z2 = Bo(o2, p2, c2, f2, A2.x, A2.y), I2 = (180 + z2.lon) / 360, k2 = z2.lat;
            _2 = -90 == k2 ? 1 : 90 == k2 ? 0 : (180 - m2 * Math.log(Math.tan(y2 + k2 * d2))) / 360, A2.x = Math.round(8192 * (I2 * s2 - i3)), A2.y = Math.round(8192 * (_2 * s2 - l2[0]) / l2[1]), z2 = null;
          }
        return r2;
      }
      for (var M2 = 0; M2 < r2.length; M2++)
        for (var P2 = r2[M2], V2 = 0; V2 < P2.length; V2++) {
          var C2 = P2[V2];
          C2.x = Math.round(C2.x * e2), C2.y = Math.round(C2.y * e2), (C2.x < Ro.min || C2.x > Ro.max || C2.y < Ro.min || C2.y > Ro.max) && (S("Geometry exceeds allowed extent, reduce your vector tile buffer size"), C2.x = u(C2.x, Ro.min, Ro.max), C2.y = u(C2.y, Ro.min, Ro.max));
        }
      return r2;
    }
    function jo(t2, e2, r2, n2, i3) {
      t2.emplaceBack(2 * e2 + (n2 + 1) / 2, 2 * r2 + (i3 + 1) / 2);
    }
    var Uo = function(t2) {
      this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
        return t3.id;
      }), this.index = t2.index, this.hasPattern = false, this.layoutVertexArray = new va(), this.indexArray = new Va(), this.segments = new Qa(), this.programConfigurations = new Io(Ha, t2.layers, t2.zoom), this.stateDependentLayerIds = this.layers.filter(function(t3) {
        return t3.isStateDependent();
      }).map(function(t3) {
        return t3.id;
      });
    };
    function qo(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        if (Qo(e2, t2[r2]))
          return true;
      for (var n2 = 0; n2 < e2.length; n2++)
        if (Qo(t2, e2[n2]))
          return true;
      return !!Yo(t2, e2);
    }
    function No(t2, e2, r2) {
      return !!Qo(t2, e2) || !!Ko(e2, t2, r2);
    }
    function Zo(t2, e2) {
      if (1 === t2.length)
        return Ho(e2, t2[0]);
      for (var r2 = 0; r2 < e2.length; r2++)
        for (var n2 = e2[r2], i3 = 0; i3 < n2.length; i3++)
          if (Qo(t2, n2[i3]))
            return true;
      for (var a2 = 0; a2 < t2.length; a2++)
        if (Ho(e2, t2[a2]))
          return true;
      for (var o2 = 0; o2 < e2.length; o2++)
        if (Yo(t2, e2[o2]))
          return true;
      return false;
    }
    function Go(t2, e2, r2) {
      if (t2.length > 1) {
        if (Yo(t2, e2))
          return true;
        for (var n2 = 0; n2 < e2.length; n2++)
          if (Ko(e2[n2], t2, r2))
            return true;
      }
      for (var i3 = 0; i3 < t2.length; i3++)
        if (Ko(t2[i3], e2, r2))
          return true;
      return false;
    }
    function Yo(t2, e2) {
      if (0 === t2.length || 0 === e2.length)
        return false;
      for (var r2 = 0; r2 < t2.length - 1; r2++)
        for (var n2 = t2[r2], i3 = t2[r2 + 1], a2 = 0; a2 < e2.length - 1; a2++)
          if (Xo(n2, i3, e2[a2], e2[a2 + 1]))
            return true;
      return false;
    }
    function Xo(t2, e2, r2, n2) {
      return z(t2, r2, n2) !== z(e2, r2, n2) && z(t2, e2, r2) !== z(t2, e2, n2);
    }
    function Ko(t2, e2, r2) {
      var n2 = r2 * r2;
      if (1 === e2.length)
        return t2.distSqr(e2[0]) < n2;
      for (var i3 = 1; i3 < e2.length; i3++)
        if (Jo(t2, e2[i3 - 1], e2[i3]) < n2)
          return true;
      return false;
    }
    function Jo(t2, e2, r2) {
      var n2 = e2.distSqr(r2);
      if (0 === n2)
        return t2.distSqr(e2);
      var i3 = ((t2.x - e2.x) * (r2.x - e2.x) + (t2.y - e2.y) * (r2.y - e2.y)) / n2;
      return t2.distSqr(i3 < 0 ? e2 : i3 > 1 ? r2 : r2.sub(e2)._mult(i3)._add(e2));
    }
    function Ho(t2, e2) {
      for (var r2, n2, i3, a2 = false, o2 = 0; o2 < t2.length; o2++)
        for (var s2 = 0, u2 = (r2 = t2[o2]).length - 1; s2 < r2.length; u2 = s2++)
          (n2 = r2[s2]).y > e2.y != (i3 = r2[u2]).y > e2.y && e2.x < (i3.x - n2.x) * (e2.y - n2.y) / (i3.y - n2.y) + n2.x && (a2 = !a2);
      return a2;
    }
    function Qo(t2, e2) {
      for (var r2 = false, n2 = 0, i3 = t2.length - 1; n2 < t2.length; i3 = n2++) {
        var a2 = t2[n2], o2 = t2[i3];
        a2.y > e2.y != o2.y > e2.y && e2.x < (o2.x - a2.x) * (e2.y - a2.y) / (o2.y - a2.y) + a2.x && (r2 = !r2);
      }
      return r2;
    }
    function Wo(t2, e2, r2) {
      var n2 = r2[0], i3 = r2[2];
      if (t2.x < n2.x && e2.x < n2.x || t2.x > i3.x && e2.x > i3.x || t2.y < n2.y && e2.y < n2.y || t2.y > i3.y && e2.y > i3.y)
        return false;
      var a2 = z(t2, e2, r2[0]);
      return a2 !== z(t2, e2, r2[1]) || a2 !== z(t2, e2, r2[2]) || a2 !== z(t2, e2, r2[3]);
    }
    function $o(t2, e2, r2) {
      var n2 = e2.paint.get(t2).value;
      return "constant" === n2.kind ? n2.value : r2.programConfigurations.get(e2.id).getMaxValue(t2);
    }
    function ts(t2) {
      return Math.sqrt(t2[0] * t2[0] + t2[1] * t2[1]);
    }
    function es(t2, e2, r2, n2, a2) {
      if (!e2[0] && !e2[1])
        return t2;
      var o2 = i2.convert(e2)._mult(a2);
      "viewport" === r2 && o2._rotate(-n2);
      for (var s2 = [], u2 = 0; u2 < t2.length; u2++)
        s2.push(t2[u2].sub(o2));
      return s2;
    }
    Uo.prototype.populate = function(t2, e2, r2) {
      var n2 = this.layers[0], i3 = [], a2 = null;
      "circle" === n2.type && (a2 = n2.layout.get("circle-sort-key"));
      for (var o2 = 0, s2 = t2; o2 < s2.length; o2 += 1) {
        var u2 = s2[o2], l2 = u2.feature, p2 = u2.id, h2 = u2.index, c2 = u2.sourceLayerIndex, f2 = u2.order, y2 = this.layers[0]._featureFilter.needGeometry, d2 = { type: l2.type, id: p2, properties: l2.properties, geometry: y2 ? Oo(l2) : [] };
        if (this.layers[0]._featureFilter.filter(new Ji(this.zoom), d2, r2)) {
          y2 || (d2.geometry = Oo(l2));
          var m2 = a2 ? a2.evaluate(d2, {}, r2) : void 0;
          i3.push({ id: p2, properties: l2.properties, type: l2.type, sourceLayerIndex: c2, index: h2, geometry: d2.geometry, patterns: {}, sortKey: m2, order: f2 });
        }
      }
      a2 && i3.sort(function(t3, e3) {
        return t3.sortKey - e3.sortKey;
      });
      for (var v2 = 0, g2 = i3; v2 < g2.length; v2 += 1) {
        var x2 = g2[v2], b2 = x2.geometry, w2 = x2.index, _2 = x2.sourceLayerIndex, A2 = t2[x2.order].feature;
        this.addFeature(x2, b2, w2, r2), e2.featureIndex.insert(A2, b2, w2, _2, this.index);
      }
    }, Uo.prototype.update = function(t2, e2, r2) {
      this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
    }, Uo.prototype.isEmpty = function() {
      return 0 === this.layoutVertexArray.length;
    }, Uo.prototype.uploadPending = function() {
      return !this.uploaded || this.programConfigurations.needsUpload;
    }, Uo.prototype.upload = function(t2) {
      this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Ha), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
    }, Uo.prototype.destroy = function() {
      this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
    }, Uo.prototype.addFeature = function(t2, e2, r2, n2) {
      for (var i3 = 0, a2 = e2; i3 < a2.length; i3 += 1)
        for (var o2 = 0, s2 = a2[i3]; o2 < s2.length; o2 += 1) {
          var u2 = s2[o2], l2 = u2.x, p2 = u2.y;
          if (!(l2 < 0 || l2 >= 8192 || p2 < 0 || p2 >= 8192)) {
            var h2 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray, t2.sortKey), c2 = h2.vertexLength;
            jo(this.layoutVertexArray, l2, p2, -1, -1), jo(this.layoutVertexArray, l2, p2, 1, -1), jo(this.layoutVertexArray, l2, p2, 1, 1), jo(this.layoutVertexArray, l2, p2, -1, 1), this.indexArray.emplaceBack(c2, c2 + 1, c2 + 2), this.indexArray.emplaceBack(c2, c2 + 3, c2 + 2), h2.vertexLength += 4, h2.primitiveLength += 2;
          }
        }
      this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, {}, n2);
    }, ti("CircleBucket", Uo, { omit: ["layers"] });
    var rs = new la({ "circle-sort-key": new aa(Gt.layout_circle["circle-sort-key"]), "allow-clip": new ia(Gt.layout_circle["allow-clip"]) }), ns = { paint: new la({ "circle-radius": new aa(Gt.paint_circle["circle-radius"]), "circle-color": new aa(Gt.paint_circle["circle-color"]), "circle-blur": new aa(Gt.paint_circle["circle-blur"]), "circle-opacity": new aa(Gt.paint_circle["circle-opacity"]), "circle-translate": new ia(Gt.paint_circle["circle-translate"]), "circle-translate-anchor": new ia(Gt.paint_circle["circle-translate-anchor"]), "circle-pitch-scale": new ia(Gt.paint_circle["circle-pitch-scale"]), "circle-pitch-alignment": new ia(Gt.paint_circle["circle-pitch-alignment"]), "circle-stroke-width": new aa(Gt.paint_circle["circle-stroke-width"]), "circle-stroke-color": new aa(Gt.paint_circle["circle-stroke-color"]), "circle-stroke-opacity": new aa(Gt.paint_circle["circle-stroke-opacity"]), "circle-minzoom": new aa(Gt.paint_circle["circle-minzoom"]), "circle-maxzoom": new aa(Gt.paint_circle["circle-maxzoom"]) }), layout: rs }, is = "undefined" != typeof Float32Array ? Float32Array : Array;
    function as() {
      var t2 = new is(4);
      return is != Float32Array && (t2[1] = 0, t2[2] = 0), t2[0] = 1, t2[3] = 1, t2;
    }
    function os(t2, e2, r2) {
      var n2 = e2[0], i3 = e2[1], a2 = e2[2], o2 = e2[3], s2 = Math.sin(r2), u2 = Math.cos(r2);
      return t2[0] = n2 * u2 + a2 * s2, t2[1] = i3 * u2 + o2 * s2, t2[2] = n2 * -s2 + a2 * u2, t2[3] = i3 * -s2 + o2 * u2, t2;
    }
    function ss() {
      var t2 = new is(16);
      return is != Float32Array && (t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0), t2[0] = 1, t2[5] = 1, t2[10] = 1, t2[15] = 1, t2;
    }
    function us(t2) {
      return t2[0] = 1, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = 1, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[10] = 1, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0, t2[15] = 1, t2;
    }
    function ls(t2, e2) {
      var r2 = e2[0], n2 = e2[1], i3 = e2[2], a2 = e2[3], o2 = e2[4], s2 = e2[5], u2 = e2[6], l2 = e2[7], p2 = e2[8], h2 = e2[9], c2 = e2[10], f2 = e2[11], y2 = e2[12], d2 = e2[13], m2 = e2[14], v2 = e2[15], g2 = r2 * s2 - n2 * o2, x2 = r2 * u2 - i3 * o2, b2 = r2 * l2 - a2 * o2, w2 = n2 * u2 - i3 * s2, _2 = n2 * l2 - a2 * s2, A2 = i3 * l2 - a2 * u2, S2 = p2 * d2 - h2 * y2, z2 = p2 * m2 - c2 * y2, I2 = p2 * v2 - f2 * y2, k2 = h2 * m2 - c2 * d2, M2 = h2 * v2 - f2 * d2, P2 = c2 * v2 - f2 * m2, V2 = g2 * P2 - x2 * M2 + b2 * k2 + w2 * I2 - _2 * z2 + A2 * S2;
      return V2 ? (t2[0] = (s2 * P2 - u2 * M2 + l2 * k2) * (V2 = 1 / V2), t2[1] = (i3 * M2 - n2 * P2 - a2 * k2) * V2, t2[2] = (d2 * A2 - m2 * _2 + v2 * w2) * V2, t2[3] = (c2 * _2 - h2 * A2 - f2 * w2) * V2, t2[4] = (u2 * I2 - o2 * P2 - l2 * z2) * V2, t2[5] = (r2 * P2 - i3 * I2 + a2 * z2) * V2, t2[6] = (m2 * b2 - y2 * A2 - v2 * x2) * V2, t2[7] = (p2 * A2 - c2 * b2 + f2 * x2) * V2, t2[8] = (o2 * M2 - s2 * I2 + l2 * S2) * V2, t2[9] = (n2 * I2 - r2 * M2 - a2 * S2) * V2, t2[10] = (y2 * _2 - d2 * b2 + v2 * g2) * V2, t2[11] = (h2 * b2 - p2 * _2 - f2 * g2) * V2, t2[12] = (s2 * z2 - o2 * k2 - u2 * S2) * V2, t2[13] = (r2 * k2 - n2 * z2 + i3 * S2) * V2, t2[14] = (d2 * x2 - y2 * w2 - m2 * g2) * V2, t2[15] = (p2 * w2 - h2 * x2 + c2 * g2) * V2, t2) : null;
    }
    function ps(t2, e2, r2) {
      var n2 = e2[0], i3 = e2[1], a2 = e2[2], o2 = e2[3], s2 = e2[4], u2 = e2[5], l2 = e2[6], p2 = e2[7], h2 = e2[8], c2 = e2[9], f2 = e2[10], y2 = e2[11], d2 = e2[12], m2 = e2[13], v2 = e2[14], g2 = e2[15], x2 = r2[0], b2 = r2[1], w2 = r2[2], _2 = r2[3];
      return t2[0] = x2 * n2 + b2 * s2 + w2 * h2 + _2 * d2, t2[1] = x2 * i3 + b2 * u2 + w2 * c2 + _2 * m2, t2[2] = x2 * a2 + b2 * l2 + w2 * f2 + _2 * v2, t2[3] = x2 * o2 + b2 * p2 + w2 * y2 + _2 * g2, t2[4] = (x2 = r2[4]) * n2 + (b2 = r2[5]) * s2 + (w2 = r2[6]) * h2 + (_2 = r2[7]) * d2, t2[5] = x2 * i3 + b2 * u2 + w2 * c2 + _2 * m2, t2[6] = x2 * a2 + b2 * l2 + w2 * f2 + _2 * v2, t2[7] = x2 * o2 + b2 * p2 + w2 * y2 + _2 * g2, t2[8] = (x2 = r2[8]) * n2 + (b2 = r2[9]) * s2 + (w2 = r2[10]) * h2 + (_2 = r2[11]) * d2, t2[9] = x2 * i3 + b2 * u2 + w2 * c2 + _2 * m2, t2[10] = x2 * a2 + b2 * l2 + w2 * f2 + _2 * v2, t2[11] = x2 * o2 + b2 * p2 + w2 * y2 + _2 * g2, t2[12] = (x2 = r2[12]) * n2 + (b2 = r2[13]) * s2 + (w2 = r2[14]) * h2 + (_2 = r2[15]) * d2, t2[13] = x2 * i3 + b2 * u2 + w2 * c2 + _2 * m2, t2[14] = x2 * a2 + b2 * l2 + w2 * f2 + _2 * v2, t2[15] = x2 * o2 + b2 * p2 + w2 * y2 + _2 * g2, t2;
    }
    function hs(t2, e2, r2) {
      var n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2 = r2[0], m2 = r2[1], v2 = r2[2];
      return e2 === t2 ? (t2[12] = e2[0] * d2 + e2[4] * m2 + e2[8] * v2 + e2[12], t2[13] = e2[1] * d2 + e2[5] * m2 + e2[9] * v2 + e2[13], t2[14] = e2[2] * d2 + e2[6] * m2 + e2[10] * v2 + e2[14], t2[15] = e2[3] * d2 + e2[7] * m2 + e2[11] * v2 + e2[15]) : (i3 = e2[1], a2 = e2[2], o2 = e2[3], s2 = e2[4], u2 = e2[5], l2 = e2[6], p2 = e2[7], h2 = e2[8], c2 = e2[9], f2 = e2[10], y2 = e2[11], t2[0] = n2 = e2[0], t2[1] = i3, t2[2] = a2, t2[3] = o2, t2[4] = s2, t2[5] = u2, t2[6] = l2, t2[7] = p2, t2[8] = h2, t2[9] = c2, t2[10] = f2, t2[11] = y2, t2[12] = n2 * d2 + s2 * m2 + h2 * v2 + e2[12], t2[13] = i3 * d2 + u2 * m2 + c2 * v2 + e2[13], t2[14] = a2 * d2 + l2 * m2 + f2 * v2 + e2[14], t2[15] = o2 * d2 + p2 * m2 + y2 * v2 + e2[15]), t2;
    }
    function cs(t2, e2, r2) {
      var n2 = r2[0], i3 = r2[1], a2 = r2[2];
      return t2[0] = e2[0] * n2, t2[1] = e2[1] * n2, t2[2] = e2[2] * n2, t2[3] = e2[3] * n2, t2[4] = e2[4] * i3, t2[5] = e2[5] * i3, t2[6] = e2[6] * i3, t2[7] = e2[7] * i3, t2[8] = e2[8] * a2, t2[9] = e2[9] * a2, t2[10] = e2[10] * a2, t2[11] = e2[11] * a2, t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15], t2;
    }
    function fs(t2, e2, r2) {
      var n2 = Math.sin(r2), i3 = Math.cos(r2), a2 = e2[4], o2 = e2[5], s2 = e2[6], u2 = e2[7], l2 = e2[8], p2 = e2[9], h2 = e2[10], c2 = e2[11];
      return e2 !== t2 && (t2[0] = e2[0], t2[1] = e2[1], t2[2] = e2[2], t2[3] = e2[3], t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15]), t2[4] = a2 * i3 + l2 * n2, t2[5] = o2 * i3 + p2 * n2, t2[6] = s2 * i3 + h2 * n2, t2[7] = u2 * i3 + c2 * n2, t2[8] = l2 * i3 - a2 * n2, t2[9] = p2 * i3 - o2 * n2, t2[10] = h2 * i3 - s2 * n2, t2[11] = c2 * i3 - u2 * n2, t2;
    }
    function ys(t2, e2, r2) {
      var n2 = Math.sin(r2), i3 = Math.cos(r2), a2 = e2[0], o2 = e2[1], s2 = e2[2], u2 = e2[3], l2 = e2[4], p2 = e2[5], h2 = e2[6], c2 = e2[7];
      return e2 !== t2 && (t2[8] = e2[8], t2[9] = e2[9], t2[10] = e2[10], t2[11] = e2[11], t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15]), t2[0] = a2 * i3 + l2 * n2, t2[1] = o2 * i3 + p2 * n2, t2[2] = s2 * i3 + h2 * n2, t2[3] = u2 * i3 + c2 * n2, t2[4] = l2 * i3 - a2 * n2, t2[5] = p2 * i3 - o2 * n2, t2[6] = h2 * i3 - s2 * n2, t2[7] = c2 * i3 - u2 * n2, t2;
    }
    function ds(t2, e2, r2, n2, i3) {
      var a2, o2 = 1 / Math.tan(e2 / 2);
      return t2[0] = o2 / r2, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = o2, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[11] = -1, t2[12] = 0, t2[13] = 0, t2[15] = 0, null != i3 && i3 !== 1 / 0 ? (t2[10] = (i3 + n2) * (a2 = 1 / (n2 - i3)), t2[14] = 2 * i3 * n2 * a2) : (t2[10] = -1, t2[14] = -2 * n2), t2;
    }
    Math.hypot || (Math.hypot = function() {
      for (var t2 = arguments, e2 = 0, r2 = arguments.length; r2--; )
        e2 += t2[r2] * t2[r2];
      return Math.sqrt(e2);
    });
    var ms = ps;
    function vs(t2) {
      var e2 = new is(3);
      return e2[0] = t2[0], e2[1] = t2[1], e2[2] = t2[2], e2;
    }
    var gs, xs = function(t2, e2, r2) {
      return t2[0] = e2[0] - r2[0], t2[1] = e2[1] - r2[1], t2[2] = e2[2] - r2[2], t2;
    };
    function bs(t2, e2, r2) {
      var n2 = e2[0], i3 = e2[1], a2 = e2[2], o2 = e2[3];
      return t2[0] = r2[0] * n2 + r2[4] * i3 + r2[8] * a2 + r2[12] * o2, t2[1] = r2[1] * n2 + r2[5] * i3 + r2[9] * a2 + r2[13] * o2, t2[2] = r2[2] * n2 + r2[6] * i3 + r2[10] * a2 + r2[14] * o2, t2[3] = r2[3] * n2 + r2[7] * i3 + r2[11] * a2 + r2[15] * o2, t2;
    }
    function ws() {
      var t2 = new is(2);
      return is != Float32Array && (t2[0] = 0, t2[1] = 0), t2;
    }
    function _s(t2, e2, r2) {
      return t2[0] = e2, t2[1] = r2, t2;
    }
    function As(t2, e2, r2) {
      return t2[0] = e2[0] + r2[0], t2[1] = e2[1] + r2[1], t2;
    }
    function Ss(t2, e2, r2) {
      return t2[0] = e2[0] - r2[0], t2[1] = e2[1] - r2[1], t2;
    }
    function zs(t2, e2, r2) {
      return t2[0] = e2[0] * r2, t2[1] = e2[1] * r2, t2;
    }
    function Is(t2) {
      return Math.hypot(t2[0], t2[1]);
    }
    function ks(t2, e2) {
      var r2 = e2[0], n2 = e2[1], i3 = r2 * r2 + n2 * n2;
      return i3 > 0 && (i3 = 1 / Math.sqrt(i3)), t2[0] = e2[0] * i3, t2[1] = e2[1] * i3, t2;
    }
    function Ms(t2, e2) {
      return t2[0] * e2[0] + t2[1] * e2[1];
    }
    function Ps(t2, e2, r2, n2) {
      var i3 = e2[0] - r2[0], a2 = e2[1] - r2[1], o2 = Math.sin(n2), s2 = Math.cos(n2);
      return t2[0] = i3 * s2 - a2 * o2 + r2[0], t2[1] = i3 * o2 + a2 * s2 + r2[1], t2;
    }
    gs = new is(3), is != Float32Array && (gs[0] = 0, gs[1] = 0, gs[2] = 0), function() {
      var t2 = new is(4);
      is != Float32Array && (t2[0] = 0, t2[1] = 0, t2[2] = 0, t2[3] = 0);
    }();
    var Vs = Ss, Cs = function(t2) {
      var e2 = t2[0], r2 = t2[1];
      return e2 * e2 + r2 * r2;
    }, Ts = (ws(), function(t2) {
      function e2(e3) {
        t2.call(this, e3, ns);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.createBucket = function(t3) {
        return new Uo(t3);
      }, e2.prototype.queryRadius = function(t3) {
        var e3 = t3;
        return $o("circle-radius", this, e3) + $o("circle-stroke-width", this, e3) + ts(this.paint.get("circle-translate"));
      }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, i3, a2, o2, s2) {
        for (var u2 = es(t3, this.paint.get("circle-translate"), this.paint.get("circle-translate-anchor"), a2.angle, o2), l2 = this.paint.get("circle-radius").evaluate(e3, r2) + this.paint.get("circle-stroke-width").evaluate(e3, r2), p2 = "map" === this.paint.get("circle-pitch-alignment"), h2 = p2 ? u2 : function(t4, e4) {
          return t4.map(function(t5) {
            return Es(t5, e4);
          });
        }(u2, s2), c2 = p2 ? l2 * o2 : l2, f2 = 0, y2 = n2; f2 < y2.length; f2 += 1)
          for (var d2 = 0, m2 = y2[f2]; d2 < m2.length; d2 += 1) {
            var v2 = m2[d2], g2 = p2 ? v2 : Es(v2, s2), x2 = c2, b2 = bs([], [v2.x, v2.y, 0, 1], s2);
            if ("viewport" === this.paint.get("circle-pitch-scale") && "map" === this.paint.get("circle-pitch-alignment") ? x2 *= b2[3] / a2.cameraToCenterDistance : "map" === this.paint.get("circle-pitch-scale") && "viewport" === this.paint.get("circle-pitch-alignment") && (x2 *= a2.cameraToCenterDistance / b2[3]), No(h2, g2, x2))
              return true;
          }
        return false;
      }, e2;
    }(pa));
    function Es(t2, e2) {
      var r2 = bs([], [t2.x, t2.y, 0, 1], e2);
      return new i2(r2[0] / r2[3], r2[1] / r2[3]);
    }
    var Bs = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2;
    }(Uo);
    function Ds(t2, e2, r2, n2) {
      var i3 = e2.width, a2 = e2.height;
      if (n2) {
        if (n2 instanceof Uint8ClampedArray)
          n2 = new Uint8Array(n2.buffer);
        else if (n2.length !== i3 * a2 * r2)
          throw new RangeError("mismatched image size");
      } else
        n2 = new Uint8Array(i3 * a2 * r2);
      return t2.width = i3, t2.height = a2, t2.data = n2, t2;
    }
    function Ls(t2, e2, r2) {
      var n2 = e2.width, i3 = e2.height;
      if (n2 !== t2.width || i3 !== t2.height) {
        var a2 = Ds({}, { width: n2, height: i3 }, r2);
        Fs(t2, a2, { x: 0, y: 0 }, { x: 0, y: 0 }, { width: Math.min(t2.width, n2), height: Math.min(t2.height, i3) }, r2), t2.width = n2, t2.height = i3, t2.data = a2.data;
      }
    }
    function Fs(t2, e2, r2, n2, i3, a2) {
      if (0 === i3.width || 0 === i3.height)
        return e2;
      if (i3.width > t2.width || i3.height > t2.height || r2.x > t2.width - i3.width || r2.y > t2.height - i3.height)
        throw new RangeError("out of range source coordinates for image copy");
      if (i3.width > e2.width || i3.height > e2.height || n2.x > e2.width - i3.width || n2.y > e2.height - i3.height)
        throw new RangeError("out of range destination coordinates for image copy");
      for (var o2 = t2.data, s2 = e2.data, u2 = 0; u2 < i3.height; u2++)
        for (var l2 = ((r2.y + u2) * t2.width + r2.x) * a2, p2 = ((n2.y + u2) * e2.width + n2.x) * a2, h2 = 0; h2 < i3.width * a2; h2++)
          s2[p2 + h2] = o2[l2 + h2];
      return e2;
    }
    ti("HeatmapBucket", Bs, { omit: ["layers"] });
    var Rs = function(t2, e2) {
      Ds(this, t2, 1, e2);
    };
    Rs.prototype.resize = function(t2) {
      Ls(this, t2, 1);
    }, Rs.prototype.clone = function() {
      return new Rs({ width: this.width, height: this.height }, new Uint8Array(this.data));
    }, Rs.copy = function(t2, e2, r2, n2, i3) {
      Fs(t2, e2, r2, n2, i3, 1);
    };
    var Os = function(t2, e2) {
      Ds(this, t2, 4, e2);
    };
    Os.prototype.resize = function(t2) {
      Ls(this, t2, 4);
    }, Os.prototype.replace = function(t2, e2) {
      e2 ? this.data.set(t2) : this.data = t2 instanceof Uint8ClampedArray ? new Uint8Array(t2.buffer) : t2;
    }, Os.prototype.clone = function() {
      return new Os({ width: this.width, height: this.height }, new Uint8Array(this.data));
    }, Os.copy = function(t2, e2, r2, n2, i3) {
      Fs(t2, e2, r2, n2, i3, 4);
    }, ti("AlphaImage", Rs), ti("RGBAImage", Os);
    var js = { paint: new la({ "heatmap-radius": new aa(Gt.paint_heatmap["heatmap-radius"]), "heatmap-weight": new aa(Gt.paint_heatmap["heatmap-weight"]), "heatmap-intensity": new ia(Gt.paint_heatmap["heatmap-intensity"]), "heatmap-color": new ua(Gt.paint_heatmap["heatmap-color"]), "heatmap-opacity": new ia(Gt.paint_heatmap["heatmap-opacity"]) }) };
    function Us(t2, e2) {
      for (var r2 = new Uint8Array(1024), n2 = {}, i3 = 0, a2 = 0; i3 < 256; i3++, a2 += 4) {
        n2[e2] = i3 / 255;
        var o2 = t2.evaluate(n2);
        r2[a2 + 0] = Math.floor(255 * o2.r / o2.a), r2[a2 + 1] = Math.floor(255 * o2.g / o2.a), r2[a2 + 2] = Math.floor(255 * o2.b / o2.a), r2[a2 + 3] = Math.floor(255 * o2.a);
      }
      return new Os({ width: 256, height: 1 }, r2);
    }
    var qs = function(t2) {
      function e2(e3) {
        t2.call(this, e3, js), this._updateColorRamp();
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.createBucket = function(t3) {
        return new Bs(t3);
      }, e2.prototype._handleSpecialPaintPropertyUpdate = function(t3) {
        "heatmap-color" === t3 && this._updateColorRamp();
      }, e2.prototype._updateColorRamp = function() {
        this.colorRamp = Us(this._transitionablePaint._values["heatmap-color"].value.expression, "heatmapDensity"), this.colorRampTexture = null;
      }, e2.prototype.resize = function() {
        this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);
      }, e2.prototype.queryRadius = function() {
        return 0;
      }, e2.prototype.queryIntersectsFeature = function() {
        return false;
      }, e2.prototype.hasOffscreenPass = function() {
        return 0 !== this.paint.get("heatmap-opacity") && "none" !== this.visibility;
      }, e2;
    }(pa), Ns = { paint: new la({ "hillshade-illumination-direction": new ia(Gt.paint_hillshade["hillshade-illumination-direction"]), "hillshade-illumination-anchor": new ia(Gt.paint_hillshade["hillshade-illumination-anchor"]), "hillshade-exaggeration": new ia(Gt.paint_hillshade["hillshade-exaggeration"]), "hillshade-shadow-color": new ia(Gt.paint_hillshade["hillshade-shadow-color"]), "hillshade-highlight-color": new ia(Gt.paint_hillshade["hillshade-highlight-color"]), "hillshade-accent-color": new ia(Gt.paint_hillshade["hillshade-accent-color"]) }) }, Zs = function(t2) {
      function e2(e3) {
        t2.call(this, e3, Ns);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.hasOffscreenPass = function() {
        return 0 !== this.paint.get("hillshade-exaggeration") && "none" !== this.visibility;
      }, e2;
    }(pa), Gs = ya([{ name: "a_pos", components: 2, type: "Int16" }], 4).members, Ys = Ks, Xs = Ks;
    function Ks(t2, e2, r2) {
      r2 = r2 || 2;
      var n2, i3, a2, o2, s2, u2, l2, p2 = e2 && e2.length, h2 = p2 ? e2[0] * r2 : t2.length, c2 = Js(t2, 0, h2, r2, true), f2 = [];
      if (!c2 || c2.next === c2.prev)
        return f2;
      if (p2 && (c2 = function(t3, e3, r3, n3) {
        var i4, a3, o3, s3 = [];
        for (i4 = 0, a3 = e3.length; i4 < a3; i4++)
          (o3 = Js(t3, e3[i4] * n3, i4 < a3 - 1 ? e3[i4 + 1] * n3 : t3.length, n3, false)) === o3.next && (o3.steiner = true), s3.push(ou(o3));
        for (s3.sort(ru), i4 = 0; i4 < s3.length; i4++)
          nu(s3[i4], r3), r3 = Hs(r3, r3.next);
        return r3;
      }(t2, e2, c2, r2)), t2.length > 80 * r2) {
        n2 = a2 = t2[0], i3 = o2 = t2[1];
        for (var y2 = r2; y2 < h2; y2 += r2)
          (s2 = t2[y2]) < n2 && (n2 = s2), (u2 = t2[y2 + 1]) < i3 && (i3 = u2), s2 > a2 && (a2 = s2), u2 > o2 && (o2 = u2);
        l2 = 0 !== (l2 = Math.max(a2 - n2, o2 - i3)) ? 1 / l2 : 0;
      }
      return Qs(c2, f2, r2, n2, i3, l2), f2;
    }
    function Js(t2, e2, r2, n2, i3) {
      var a2, o2;
      if (i3 === xu(t2, e2, r2, n2) > 0)
        for (a2 = e2; a2 < r2; a2 += n2)
          o2 = mu(a2, t2[a2], t2[a2 + 1], o2);
      else
        for (a2 = r2 - n2; a2 >= e2; a2 -= n2)
          o2 = mu(a2, t2[a2], t2[a2 + 1], o2);
      return o2 && pu(o2, o2.next) && (vu(o2), o2 = o2.next), o2;
    }
    function Hs(t2, e2) {
      if (!t2)
        return t2;
      e2 || (e2 = t2);
      var r2, n2 = t2;
      do {
        if (r2 = false, n2.steiner || !pu(n2, n2.next) && 0 !== lu(n2.prev, n2, n2.next))
          n2 = n2.next;
        else {
          if (vu(n2), (n2 = e2 = n2.prev) === n2.next)
            break;
          r2 = true;
        }
      } while (r2 || n2 !== e2);
      return e2;
    }
    function Qs(t2, e2, r2, n2, i3, a2, o2) {
      if (t2) {
        !o2 && a2 && function(t3, e3, r3, n3) {
          var i4 = t3;
          do {
            null === i4.z && (i4.z = au(i4.x, i4.y, e3, r3, n3)), i4.prevZ = i4.prev, i4.nextZ = i4.next, i4 = i4.next;
          } while (i4 !== t3);
          i4.prevZ.nextZ = null, i4.prevZ = null, function(t4) {
            var e4, r4, n4, i5, a3, o3, s3, u3, l3 = 1;
            do {
              for (r4 = t4, t4 = null, a3 = null, o3 = 0; r4; ) {
                for (o3++, n4 = r4, s3 = 0, e4 = 0; e4 < l3 && (s3++, n4 = n4.nextZ); e4++)
                  ;
                for (u3 = l3; s3 > 0 || u3 > 0 && n4; )
                  0 !== s3 && (0 === u3 || !n4 || r4.z <= n4.z) ? (i5 = r4, r4 = r4.nextZ, s3--) : (i5 = n4, n4 = n4.nextZ, u3--), a3 ? a3.nextZ = i5 : t4 = i5, i5.prevZ = a3, a3 = i5;
                r4 = n4;
              }
              a3.nextZ = null, l3 *= 2;
            } while (o3 > 1);
          }(i4);
        }(t2, n2, i3, a2);
        for (var s2, u2, l2 = t2; t2.prev !== t2.next; )
          if (s2 = t2.prev, u2 = t2.next, a2 ? $s(t2, n2, i3, a2) : Ws(t2))
            e2.push(s2.i / r2), e2.push(t2.i / r2), e2.push(u2.i / r2), vu(t2), t2 = u2.next, l2 = u2.next;
          else if ((t2 = u2) === l2) {
            o2 ? 1 === o2 ? Qs(t2 = tu(Hs(t2), e2, r2), e2, r2, n2, i3, a2, 2) : 2 === o2 && eu(t2, e2, r2, n2, i3, a2) : Qs(Hs(t2), e2, r2, n2, i3, a2, 1);
            break;
          }
      }
    }
    function Ws(t2) {
      var e2 = t2.prev, r2 = t2, n2 = t2.next;
      if (lu(e2, r2, n2) >= 0)
        return false;
      for (var i3 = t2.next.next; i3 !== t2.prev; ) {
        if (su(e2.x, e2.y, r2.x, r2.y, n2.x, n2.y, i3.x, i3.y) && lu(i3.prev, i3, i3.next) >= 0)
          return false;
        i3 = i3.next;
      }
      return true;
    }
    function $s(t2, e2, r2, n2) {
      var i3 = t2.prev, a2 = t2, o2 = t2.next;
      if (lu(i3, a2, o2) >= 0)
        return false;
      for (var s2 = i3.x > a2.x ? i3.x > o2.x ? i3.x : o2.x : a2.x > o2.x ? a2.x : o2.x, u2 = i3.y > a2.y ? i3.y > o2.y ? i3.y : o2.y : a2.y > o2.y ? a2.y : o2.y, l2 = au(i3.x < a2.x ? i3.x < o2.x ? i3.x : o2.x : a2.x < o2.x ? a2.x : o2.x, i3.y < a2.y ? i3.y < o2.y ? i3.y : o2.y : a2.y < o2.y ? a2.y : o2.y, e2, r2, n2), p2 = au(s2, u2, e2, r2, n2), h2 = t2.prevZ, c2 = t2.nextZ; h2 && h2.z >= l2 && c2 && c2.z <= p2; ) {
        if (h2 !== t2.prev && h2 !== t2.next && su(i3.x, i3.y, a2.x, a2.y, o2.x, o2.y, h2.x, h2.y) && lu(h2.prev, h2, h2.next) >= 0)
          return false;
        if (h2 = h2.prevZ, c2 !== t2.prev && c2 !== t2.next && su(i3.x, i3.y, a2.x, a2.y, o2.x, o2.y, c2.x, c2.y) && lu(c2.prev, c2, c2.next) >= 0)
          return false;
        c2 = c2.nextZ;
      }
      for (; h2 && h2.z >= l2; ) {
        if (h2 !== t2.prev && h2 !== t2.next && su(i3.x, i3.y, a2.x, a2.y, o2.x, o2.y, h2.x, h2.y) && lu(h2.prev, h2, h2.next) >= 0)
          return false;
        h2 = h2.prevZ;
      }
      for (; c2 && c2.z <= p2; ) {
        if (c2 !== t2.prev && c2 !== t2.next && su(i3.x, i3.y, a2.x, a2.y, o2.x, o2.y, c2.x, c2.y) && lu(c2.prev, c2, c2.next) >= 0)
          return false;
        c2 = c2.nextZ;
      }
      return true;
    }
    function tu(t2, e2, r2) {
      var n2 = t2;
      do {
        var i3 = n2.prev, a2 = n2.next.next;
        !pu(i3, a2) && hu(i3, n2, n2.next, a2) && yu(i3, a2) && yu(a2, i3) && (e2.push(i3.i / r2), e2.push(n2.i / r2), e2.push(a2.i / r2), vu(n2), vu(n2.next), n2 = t2 = a2), n2 = n2.next;
      } while (n2 !== t2);
      return Hs(n2);
    }
    function eu(t2, e2, r2, n2, i3, a2) {
      var o2 = t2;
      do {
        for (var s2 = o2.next.next; s2 !== o2.prev; ) {
          if (o2.i !== s2.i && uu(o2, s2)) {
            var u2 = du(o2, s2);
            return o2 = Hs(o2, o2.next), u2 = Hs(u2, u2.next), Qs(o2, e2, r2, n2, i3, a2), void Qs(u2, e2, r2, n2, i3, a2);
          }
          s2 = s2.next;
        }
        o2 = o2.next;
      } while (o2 !== t2);
    }
    function ru(t2, e2) {
      return t2.x - e2.x;
    }
    function nu(t2, e2) {
      if (e2 = function(t3, e3) {
        var r3, n2 = e3, i3 = t3.x, a2 = t3.y, o2 = -1 / 0;
        do {
          if (a2 <= n2.y && a2 >= n2.next.y && n2.next.y !== n2.y) {
            var s2 = n2.x + (a2 - n2.y) * (n2.next.x - n2.x) / (n2.next.y - n2.y);
            if (s2 <= i3 && s2 > o2) {
              if (o2 = s2, s2 === i3) {
                if (a2 === n2.y)
                  return n2;
                if (a2 === n2.next.y)
                  return n2.next;
              }
              r3 = n2.x < n2.next.x ? n2 : n2.next;
            }
          }
          n2 = n2.next;
        } while (n2 !== e3);
        if (!r3)
          return null;
        if (i3 === o2)
          return r3;
        var u2, l2 = r3, p2 = r3.x, h2 = r3.y, c2 = 1 / 0;
        n2 = r3;
        do {
          i3 >= n2.x && n2.x >= p2 && i3 !== n2.x && su(a2 < h2 ? i3 : o2, a2, p2, h2, a2 < h2 ? o2 : i3, a2, n2.x, n2.y) && (u2 = Math.abs(a2 - n2.y) / (i3 - n2.x), yu(n2, t3) && (u2 < c2 || u2 === c2 && (n2.x > r3.x || n2.x === r3.x && iu(r3, n2))) && (r3 = n2, c2 = u2)), n2 = n2.next;
        } while (n2 !== l2);
        return r3;
      }(t2, e2)) {
        var r2 = du(e2, t2);
        Hs(e2, e2.next), Hs(r2, r2.next);
      }
    }
    function iu(t2, e2) {
      return lu(t2.prev, t2, e2.prev) < 0 && lu(e2.next, t2, t2.next) < 0;
    }
    function au(t2, e2, r2, n2, i3) {
      return (t2 = 1431655765 & ((t2 = 858993459 & ((t2 = 252645135 & ((t2 = 16711935 & ((t2 = 32767 * (t2 - r2) * i3) | t2 << 8)) | t2 << 4)) | t2 << 2)) | t2 << 1)) | (e2 = 1431655765 & ((e2 = 858993459 & ((e2 = 252645135 & ((e2 = 16711935 & ((e2 = 32767 * (e2 - n2) * i3) | e2 << 8)) | e2 << 4)) | e2 << 2)) | e2 << 1)) << 1;
    }
    function ou(t2) {
      var e2 = t2, r2 = t2;
      do {
        (e2.x < r2.x || e2.x === r2.x && e2.y < r2.y) && (r2 = e2), e2 = e2.next;
      } while (e2 !== t2);
      return r2;
    }
    function su(t2, e2, r2, n2, i3, a2, o2, s2) {
      return (i3 - o2) * (e2 - s2) - (t2 - o2) * (a2 - s2) >= 0 && (t2 - o2) * (n2 - s2) - (r2 - o2) * (e2 - s2) >= 0 && (r2 - o2) * (a2 - s2) - (i3 - o2) * (n2 - s2) >= 0;
    }
    function uu(t2, e2) {
      return t2.next.i !== e2.i && t2.prev.i !== e2.i && !function(t3, e3) {
        var r2 = t3;
        do {
          if (r2.i !== t3.i && r2.next.i !== t3.i && r2.i !== e3.i && r2.next.i !== e3.i && hu(r2, r2.next, t3, e3))
            return true;
          r2 = r2.next;
        } while (r2 !== t3);
        return false;
      }(t2, e2) && (yu(t2, e2) && yu(e2, t2) && function(t3, e3) {
        var r2 = t3, n2 = false, i3 = (t3.x + e3.x) / 2, a2 = (t3.y + e3.y) / 2;
        do {
          r2.y > a2 != r2.next.y > a2 && r2.next.y !== r2.y && i3 < (r2.next.x - r2.x) * (a2 - r2.y) / (r2.next.y - r2.y) + r2.x && (n2 = !n2), r2 = r2.next;
        } while (r2 !== t3);
        return n2;
      }(t2, e2) && (lu(t2.prev, t2, e2.prev) || lu(t2, e2.prev, e2)) || pu(t2, e2) && lu(t2.prev, t2, t2.next) > 0 && lu(e2.prev, e2, e2.next) > 0);
    }
    function lu(t2, e2, r2) {
      return (e2.y - t2.y) * (r2.x - e2.x) - (e2.x - t2.x) * (r2.y - e2.y);
    }
    function pu(t2, e2) {
      return t2.x === e2.x && t2.y === e2.y;
    }
    function hu(t2, e2, r2, n2) {
      var i3 = fu(lu(t2, e2, r2)), a2 = fu(lu(t2, e2, n2)), o2 = fu(lu(r2, n2, t2)), s2 = fu(lu(r2, n2, e2));
      return i3 !== a2 && o2 !== s2 || !(0 !== i3 || !cu(t2, r2, e2)) || !(0 !== a2 || !cu(t2, n2, e2)) || !(0 !== o2 || !cu(r2, t2, n2)) || !(0 !== s2 || !cu(r2, e2, n2));
    }
    function cu(t2, e2, r2) {
      return e2.x <= Math.max(t2.x, r2.x) && e2.x >= Math.min(t2.x, r2.x) && e2.y <= Math.max(t2.y, r2.y) && e2.y >= Math.min(t2.y, r2.y);
    }
    function fu(t2) {
      return t2 > 0 ? 1 : t2 < 0 ? -1 : 0;
    }
    function yu(t2, e2) {
      return lu(t2.prev, t2, t2.next) < 0 ? lu(t2, e2, t2.next) >= 0 && lu(t2, t2.prev, e2) >= 0 : lu(t2, e2, t2.prev) < 0 || lu(t2, t2.next, e2) < 0;
    }
    function du(t2, e2) {
      var r2 = new gu(t2.i, t2.x, t2.y), n2 = new gu(e2.i, e2.x, e2.y), i3 = t2.next, a2 = e2.prev;
      return t2.next = e2, e2.prev = t2, r2.next = i3, i3.prev = r2, n2.next = r2, r2.prev = n2, a2.next = n2, n2.prev = a2, n2;
    }
    function mu(t2, e2, r2, n2) {
      var i3 = new gu(t2, e2, r2);
      return n2 ? (i3.next = n2.next, i3.prev = n2, n2.next.prev = i3, n2.next = i3) : (i3.prev = i3, i3.next = i3), i3;
    }
    function vu(t2) {
      t2.next.prev = t2.prev, t2.prev.next = t2.next, t2.prevZ && (t2.prevZ.nextZ = t2.nextZ), t2.nextZ && (t2.nextZ.prevZ = t2.prevZ);
    }
    function gu(t2, e2, r2) {
      this.i = t2, this.x = e2, this.y = r2, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = false;
    }
    function xu(t2, e2, r2, n2) {
      for (var i3 = 0, a2 = e2, o2 = r2 - n2; a2 < r2; a2 += n2)
        i3 += (t2[o2] - t2[a2]) * (t2[a2 + 1] + t2[o2 + 1]), o2 = a2;
      return i3;
    }
    function bu(t2, e2, r2, n2, i3) {
      !function t3(e3, r3, n3, i4, a2) {
        for (; i4 > n3; ) {
          if (i4 - n3 > 600) {
            var o2 = i4 - n3 + 1, s2 = r3 - n3 + 1, u2 = Math.log(o2), l2 = 0.5 * Math.exp(2 * u2 / 3), p2 = 0.5 * Math.sqrt(u2 * l2 * (o2 - l2) / o2) * (s2 - o2 / 2 < 0 ? -1 : 1);
            t3(e3, r3, Math.max(n3, Math.floor(r3 - s2 * l2 / o2 + p2)), Math.min(i4, Math.floor(r3 + (o2 - s2) * l2 / o2 + p2)), a2);
          }
          var h2 = e3[r3], c2 = n3, f2 = i4;
          for (wu(e3, n3, r3), a2(e3[i4], h2) > 0 && wu(e3, n3, i4); c2 < f2; ) {
            for (wu(e3, c2, f2), c2++, f2--; a2(e3[c2], h2) < 0; )
              c2++;
            for (; a2(e3[f2], h2) > 0; )
              f2--;
          }
          0 === a2(e3[n3], h2) ? wu(e3, n3, f2) : wu(e3, ++f2, i4), f2 <= r3 && (n3 = f2 + 1), r3 <= f2 && (i4 = f2 - 1);
        }
      }(t2, e2, r2 || 0, n2 || t2.length - 1, i3 || _u);
    }
    function wu(t2, e2, r2) {
      var n2 = t2[e2];
      t2[e2] = t2[r2], t2[r2] = n2;
    }
    function _u(t2, e2) {
      return t2 < e2 ? -1 : t2 > e2 ? 1 : 0;
    }
    function Au(t2, e2) {
      var r2 = t2.length;
      if (r2 <= 1)
        return [t2];
      for (var n2, i3, a2 = [], o2 = 0; o2 < r2; o2++) {
        var s2 = I(t2[o2]);
        0 !== s2 && (t2[o2].area = Math.abs(s2), void 0 === i3 && (i3 = s2 < 0), i3 === s2 < 0 ? (n2 && a2.push(n2), n2 = [t2[o2]]) : n2.push(t2[o2]));
      }
      if (n2 && a2.push(n2), e2 > 1)
        for (var u2 = 0; u2 < a2.length; u2++)
          a2[u2].length <= e2 || (bu(a2[u2], e2, 1, a2[u2].length - 1, Su), a2[u2] = a2[u2].slice(0, e2));
      return a2;
    }
    function Su(t2, e2) {
      return e2.area - t2.area;
    }
    function zu(t2, e2, r2) {
      for (var n2 = r2.patternDependencies, i3 = false, a2 = 0, o2 = e2; a2 < o2.length; a2 += 1) {
        var s2 = o2[a2].paint.get(t2 + "-pattern");
        s2.isConstant() || (i3 = true);
        var u2 = s2.constantOr(null);
        u2 && (i3 = true, n2[u2.to] = true, n2[u2.from] = true);
      }
      return i3;
    }
    function Iu(t2, e2, r2, n2, i3) {
      for (var a2 = i3.patternDependencies, o2 = 0, s2 = e2; o2 < s2.length; o2 += 1) {
        var u2 = s2[o2], l2 = u2.paint.get(t2 + "-pattern").value;
        if ("constant" !== l2.kind) {
          var p2 = l2.evaluate({ zoom: n2 - 1 }, r2, {}, i3.availableImages), h2 = l2.evaluate({ zoom: n2 }, r2, {}, i3.availableImages), c2 = l2.evaluate({ zoom: n2 + 1 }, r2, {}, i3.availableImages);
          h2 = h2 && h2.name ? h2.name : h2, c2 = c2 && c2.name ? c2.name : c2, a2[p2 = p2 && p2.name ? p2.name : p2] = true, a2[h2] = true, a2[c2] = true, r2.patterns[u2.id] = { min: p2, mid: h2, max: c2 };
        }
      }
      return r2;
    }
    Ks.deviation = function(t2, e2, r2, n2) {
      var i3 = e2 && e2.length, a2 = Math.abs(xu(t2, 0, i3 ? e2[0] * r2 : t2.length, r2));
      if (i3)
        for (var o2 = 0, s2 = e2.length; o2 < s2; o2++)
          a2 -= Math.abs(xu(t2, e2[o2] * r2, o2 < s2 - 1 ? e2[o2 + 1] * r2 : t2.length, r2));
      var u2 = 0;
      for (o2 = 0; o2 < n2.length; o2 += 3) {
        var l2 = n2[o2] * r2, p2 = n2[o2 + 1] * r2, h2 = n2[o2 + 2] * r2;
        u2 += Math.abs((t2[l2] - t2[h2]) * (t2[p2 + 1] - t2[l2 + 1]) - (t2[l2] - t2[p2]) * (t2[h2 + 1] - t2[l2 + 1]));
      }
      return 0 === a2 && 0 === u2 ? 0 : Math.abs((u2 - a2) / a2);
    }, Ks.flatten = function(t2) {
      for (var e2 = t2[0][0].length, r2 = { vertices: [], holes: [], dimensions: e2 }, n2 = 0, i3 = 0; i3 < t2.length; i3++) {
        for (var a2 = 0; a2 < t2[i3].length; a2++)
          for (var o2 = 0; o2 < e2; o2++)
            r2.vertices.push(t2[i3][a2][o2]);
        i3 > 0 && r2.holes.push(n2 += t2[i3 - 1].length);
      }
      return r2;
    }, Ys.default = Xs;
    var ku = function(t2) {
      this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
        return t3.id;
      }), this.index = t2.index, this.hasPattern = false, this.patternFeatures = [], this.layoutVertexArray = new va(), this.indexArray = new Va(), this.indexArray2 = new La(), this.programConfigurations = new Io(Gs, t2.layers, t2.zoom), this.segments = new Qa(), this.segments2 = new Qa(), this.stateDependentLayerIds = this.layers.filter(function(t3) {
        return t3.isStateDependent();
      }).map(function(t3) {
        return t3.id;
      });
    };
    ku.prototype.populate = function(t2, e2, r2) {
      this.hasPattern = zu("fill", this.layers, e2);
      for (var n2 = this.layers[0].layout.get("fill-sort-key"), i3 = [], a2 = 0, o2 = t2.length; a2 < o2; a2 += 1) {
        var s2 = t2[a2], u2 = s2.feature, l2 = s2.id, p2 = s2.index, h2 = s2.sourceLayerIndex, c2 = s2.order, f2 = this.layers[0]._featureFilter.needGeometry, y2 = { type: u2.type, id: l2, properties: u2.properties, geometry: f2 ? Oo(u2) : [] };
        if (this.layers[0]._featureFilter.filter(new Ji(this.zoom), y2, r2)) {
          f2 || (y2.geometry = Oo(u2));
          var d2 = n2 ? n2.evaluate(y2, {}, r2, e2.availableImages) : void 0;
          i3.push({ id: l2, properties: u2.properties, type: u2.type, sourceLayerIndex: h2, index: p2, geometry: y2.geometry, patterns: {}, sortKey: d2, order: c2 });
        }
      }
      n2 && i3.sort(function(t3, e3) {
        return t3.sortKey - e3.sortKey;
      });
      for (var m2 = 0, v2 = i3.length; m2 < v2; m2 += 1) {
        var g2 = i3[m2], x2 = g2.geometry, b2 = g2.index, w2 = g2.sourceLayerIndex, _2 = g2.order;
        if (this.hasPattern) {
          var A2 = Iu("fill", this.layers, g2, this.zoom, e2);
          this.patternFeatures.push(A2);
        } else
          this.addFeature(g2, x2, b2, r2, {});
        e2.featureIndex.insert(t2[_2].feature, x2, b2, w2, this.index);
      }
    }, ku.prototype.update = function(t2, e2, r2) {
      this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
    }, ku.prototype.addFeatures = function(t2, e2, r2) {
      for (var n2 = 0, i3 = this.patternFeatures; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2];
        this.addFeature(a2, a2.geometry, a2.index, e2, r2);
      }
    }, ku.prototype.isEmpty = function() {
      return 0 === this.layoutVertexArray.length;
    }, ku.prototype.uploadPending = function() {
      return !this.uploaded || this.programConfigurations.needsUpload;
    }, ku.prototype.upload = function(t2) {
      this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Gs), this.indexBuffer = t2.createIndexBuffer(this.indexArray), this.indexBuffer2 = t2.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t2), this.uploaded = true;
    }, ku.prototype.destroy = function() {
      this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());
    }, ku.prototype.addFeature = function(t2, e2, r2, n2, i3) {
      for (var a2 = 0, o2 = Au(e2, 500); a2 < o2.length; a2 += 1) {
        for (var s2 = o2[a2], u2 = 0, l2 = 0, p2 = s2; l2 < p2.length; l2 += 1)
          u2 += p2[l2].length;
        for (var h2 = this.segments.prepareSegment(u2, this.layoutVertexArray, this.indexArray), c2 = h2.vertexLength, f2 = [], y2 = [], d2 = 0, m2 = s2; d2 < m2.length; d2 += 1) {
          var v2 = m2[d2];
          if (0 !== v2.length) {
            v2 !== s2[0] && y2.push(f2.length / 2);
            var g2 = this.segments2.prepareSegment(v2.length, this.layoutVertexArray, this.indexArray2), x2 = g2.vertexLength;
            this.layoutVertexArray.emplaceBack(v2[0].x, v2[0].y), this.indexArray2.emplaceBack(x2 + v2.length - 1, x2), f2.push(v2[0].x), f2.push(v2[0].y);
            for (var b2 = 1; b2 < v2.length; b2++)
              this.layoutVertexArray.emplaceBack(v2[b2].x, v2[b2].y), this.indexArray2.emplaceBack(x2 + b2 - 1, x2 + b2), f2.push(v2[b2].x), f2.push(v2[b2].y);
            g2.vertexLength += v2.length, g2.primitiveLength += v2.length;
          }
        }
        for (var w2 = Ys(f2, y2), _2 = 0; _2 < w2.length; _2 += 3)
          this.indexArray.emplaceBack(c2 + w2[_2], c2 + w2[_2 + 1], c2 + w2[_2 + 2]);
        h2.vertexLength += u2, h2.primitiveLength += w2.length / 3;
      }
      this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, i3, n2);
    }, ti("FillBucket", ku, { omit: ["layers", "patternFeatures"] });
    var Mu = new la({ "fill-sort-key": new aa(Gt.layout_fill["fill-sort-key"]), "allow-clip": new ia(Gt.layout_fill["allow-clip"]) }), Pu = { paint: new la({ "fill-antialias": new ia(Gt.paint_fill["fill-antialias"]), "fill-opacity": new aa(Gt.paint_fill["fill-opacity"]), "fill-color": new aa(Gt.paint_fill["fill-color"]), "fill-outline-color": new aa(Gt.paint_fill["fill-outline-color"]), "fill-translate": new ia(Gt.paint_fill["fill-translate"]), "fill-translate-anchor": new ia(Gt.paint_fill["fill-translate-anchor"]), "fill-pattern": new oa(Gt.paint_fill["fill-pattern"]), "fill-minzoom": new aa(Gt.paint_fill["fill-minzoom"]), "fill-maxzoom": new aa(Gt.paint_fill["fill-maxzoom"]) }), layout: Mu }, Vu = function(t2) {
      function e2(e3) {
        t2.call(this, e3, Pu);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.recalculate = function(e3, r2) {
        t2.prototype.recalculate.call(this, e3, r2);
        var n2 = this.paint._values["fill-outline-color"];
        "constant" === n2.value.kind && void 0 === n2.value.value && (this.paint._values["fill-outline-color"] = this.paint._values["fill-color"]);
      }, e2.prototype.createBucket = function(t3) {
        return new ku(t3);
      }, e2.prototype.queryRadius = function() {
        return ts(this.paint.get("fill-translate"));
      }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, i3, a2, o2) {
        return Zo(es(t3, this.paint.get("fill-translate"), this.paint.get("fill-translate-anchor"), a2.angle, o2), n2);
      }, e2.prototype.isTileClipped = function() {
        return true;
      }, e2;
    }(pa), Cu = ya([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_normal_ed", components: 4, type: "Int16" }], 4).members, Tu = Eu;
    function Eu(t2, e2, r2, n2, i3) {
      this.properties = {}, this.extent = r2, this.type = 0, this._pbf = t2, this._geometry = -1, this._keys = n2, this._values = i3, t2.readFields(Bu, this, e2);
    }
    function Bu(t2, e2, r2) {
      1 == t2 ? e2.id = r2.readVarint() : 2 == t2 ? function(t3, e3) {
        for (var r3 = t3.readVarint() + t3.pos; t3.pos < r3; ) {
          var n2 = e3._keys[t3.readVarint()], i3 = e3._values[t3.readVarint()];
          e3.properties[n2] = i3;
        }
      }(r2, e2) : 3 == t2 ? e2.type = r2.readVarint() : 4 == t2 && (e2._geometry = r2.pos);
    }
    function Du(t2) {
      for (var e2, r2, n2 = 0, i3 = 0, a2 = t2.length, o2 = a2 - 1; i3 < a2; o2 = i3++)
        n2 += ((r2 = t2[o2]).x - (e2 = t2[i3]).x) * (e2.y + r2.y);
      return n2;
    }
    Eu.types = ["Unknown", "Point", "LineString", "Polygon"], Eu.prototype.loadGeometry = function() {
      var t2 = this._pbf;
      t2.pos = this._geometry;
      for (var e2, r2 = t2.readVarint() + t2.pos, n2 = 1, a2 = 0, o2 = 0, s2 = 0, u2 = []; t2.pos < r2; ) {
        if (a2 <= 0) {
          var l2 = t2.readVarint();
          n2 = 7 & l2, a2 = l2 >> 3;
        }
        if (a2--, 1 === n2 || 2 === n2)
          o2 += t2.readSVarint(), s2 += t2.readSVarint(), 1 === n2 && (e2 && u2.push(e2), e2 = []), e2.push(new i2(o2, s2));
        else {
          if (7 !== n2)
            throw new Error("unknown command " + n2);
          e2 && e2.push(e2[0].clone());
        }
      }
      return e2 && u2.push(e2), u2;
    }, Eu.prototype.bbox = function() {
      var t2 = this._pbf;
      t2.pos = this._geometry;
      for (var e2 = t2.readVarint() + t2.pos, r2 = 1, n2 = 0, i3 = 0, a2 = 0, o2 = 1 / 0, s2 = -1 / 0, u2 = 1 / 0, l2 = -1 / 0; t2.pos < e2; ) {
        if (n2 <= 0) {
          var p2 = t2.readVarint();
          r2 = 7 & p2, n2 = p2 >> 3;
        }
        if (n2--, 1 === r2 || 2 === r2)
          (i3 += t2.readSVarint()) < o2 && (o2 = i3), i3 > s2 && (s2 = i3), (a2 += t2.readSVarint()) < u2 && (u2 = a2), a2 > l2 && (l2 = a2);
        else if (7 !== r2)
          throw new Error("unknown command " + r2);
      }
      return [o2, u2, s2, l2];
    }, Eu.prototype.toGeoJSON = function(t2, e2, r2) {
      var n2, i3, a2 = this.extent * Math.pow(2, r2), o2 = this.extent * t2, s2 = this.extent * e2, u2 = this.loadGeometry(), l2 = Eu.types[this.type];
      function p2(t3) {
        for (var e3 = 0; e3 < t3.length; e3++) {
          var r3 = t3[e3];
          t3[e3] = [360 * (r3.x + o2) / a2 - 180, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * (r3.y + s2) / a2) * Math.PI / 180)) - 90];
        }
      }
      switch (this.type) {
        case 1:
          var h2 = [];
          for (n2 = 0; n2 < u2.length; n2++)
            h2[n2] = u2[n2][0];
          p2(u2 = h2);
          break;
        case 2:
          for (n2 = 0; n2 < u2.length; n2++)
            p2(u2[n2]);
          break;
        case 3:
          for (u2 = function(t3) {
            var e3 = t3.length;
            if (e3 <= 1)
              return [t3];
            for (var r3, n3, i4 = [], a3 = 0; a3 < e3; a3++) {
              var o3 = Du(t3[a3]);
              0 !== o3 && (void 0 === n3 && (n3 = o3 < 0), n3 === o3 < 0 ? (r3 && i4.push(r3), r3 = [t3[a3]]) : r3.push(t3[a3]));
            }
            return r3 && i4.push(r3), i4;
          }(u2), n2 = 0; n2 < u2.length; n2++)
            for (i3 = 0; i3 < u2[n2].length; i3++)
              p2(u2[n2][i3]);
      }
      1 === u2.length ? u2 = u2[0] : l2 = "Multi" + l2;
      var c2 = { type: "Feature", geometry: { type: l2, coordinates: u2 }, properties: this.properties };
      return "id" in this && (c2.id = this.id), c2;
    };
    var Lu = Fu;
    function Fu(t2, e2) {
      this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t2, this._keys = [], this._values = [], this._features = [], t2.readFields(Ru, this, e2), this.length = this._features.length;
    }
    function Ru(t2, e2, r2) {
      15 === t2 ? e2.version = r2.readVarint() : 1 === t2 ? e2.name = r2.readString() : 5 === t2 ? e2.extent = r2.readVarint() : 2 === t2 ? e2._features.push(r2.pos) : 3 === t2 ? e2._keys.push(r2.readString()) : 4 === t2 && e2._values.push(function(t3) {
        for (var e3 = null, r3 = t3.readVarint() + t3.pos; t3.pos < r3; ) {
          var n2 = t3.readVarint() >> 3;
          e3 = 1 === n2 ? t3.readString() : 2 === n2 ? t3.readFloat() : 3 === n2 ? t3.readDouble() : 4 === n2 ? t3.readVarint64() : 5 === n2 ? t3.readVarint() : 6 === n2 ? t3.readSVarint() : 7 === n2 ? t3.readBoolean() : null;
        }
        return e3;
      }(r2));
    }
    function Ou(t2, e2, r2) {
      if (3 === t2) {
        var n2 = new Lu(r2, r2.readVarint() + r2.pos);
        n2.length && (e2[n2.name] = n2);
      }
    }
    Fu.prototype.feature = function(t2) {
      if (t2 < 0 || t2 >= this._features.length)
        throw new Error("feature index out of bounds");
      this._pbf.pos = this._features[t2];
      var e2 = this._pbf.readVarint() + this._pbf.pos;
      return new Tu(this._pbf, e2, this.extent, this._keys, this._values);
    };
    var ju = { VectorTile: function(t2, e2) {
      this.layers = t2.readFields(Ou, {}, e2);
    }, VectorTileFeature: Tu, VectorTileLayer: Lu }, Uu = ju.VectorTileFeature.types, qu = Math.pow(2, 13);
    function Nu(t2, e2, r2, n2, i3, a2, o2, s2) {
      t2.emplaceBack(e2, r2, 2 * Math.floor(n2 * qu) + o2, i3 * qu * 2, a2 * qu * 2, Math.round(s2));
    }
    var Zu = function(t2) {
      this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
        return t3.id;
      }), this.index = t2.index, this.hasPattern = false, this.layoutVertexArray = new xa(), this.indexArray = new Va(), this.programConfigurations = new Io(Cu, t2.layers, t2.zoom), this.segments = new Qa(), this.stateDependentLayerIds = this.layers.filter(function(t3) {
        return t3.isStateDependent();
      }).map(function(t3) {
        return t3.id;
      });
    };
    function Gu(t2, e2) {
      return t2.x === e2.x && (t2.x < 0 || t2.x > 8192) || t2.y === e2.y && (t2.y < 0 || t2.y > 8192);
    }
    Zu.prototype.populate = function(t2, e2, r2) {
      this.features = [], this.hasPattern = zu("fill-extrusion", this.layers, e2);
      for (var n2 = 0, i3 = t2; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2], o2 = a2.feature, s2 = a2.id, u2 = a2.index, l2 = a2.sourceLayerIndex, p2 = this.layers[0]._featureFilter.needGeometry, h2 = { type: o2.type, id: s2, properties: o2.properties, geometry: p2 ? Oo(o2) : [] };
        if (this.layers[0]._featureFilter.filter(new Ji(this.zoom), h2, r2)) {
          var c2 = { id: s2, sourceLayerIndex: l2, index: u2, geometry: p2 ? h2.geometry : Oo(o2), properties: o2.properties, type: o2.type, patterns: {} };
          void 0 !== o2.id && (c2.id = o2.id), this.hasPattern ? this.features.push(Iu("fill-extrusion", this.layers, c2, this.zoom, e2)) : this.addFeature(c2, c2.geometry, u2, r2, {}), e2.featureIndex.insert(o2, c2.geometry, u2, l2, this.index, true);
        }
      }
    }, Zu.prototype.addFeatures = function(t2, e2, r2) {
      for (var n2 = 0, i3 = this.features; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2];
        this.addFeature(a2, a2.geometry, a2.index, e2, r2);
      }
    }, Zu.prototype.update = function(t2, e2, r2) {
      this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
    }, Zu.prototype.isEmpty = function() {
      return 0 === this.layoutVertexArray.length;
    }, Zu.prototype.uploadPending = function() {
      return !this.uploaded || this.programConfigurations.needsUpload;
    }, Zu.prototype.upload = function(t2) {
      this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Cu), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
    }, Zu.prototype.destroy = function() {
      this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
    }, Zu.prototype.addFeature = function(t2, e2, r2, n2, i3) {
      for (var a2 = "Sg4326" == n2.reference, o2 = 0, s2 = Au(e2, 500); o2 < s2.length; o2 += 1) {
        for (var u2 = s2[o2], l2 = 0, p2 = 0, h2 = u2; p2 < h2.length; p2 += 1)
          l2 += h2[p2].length;
        for (var c2 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray), f2 = 0, y2 = u2; f2 < y2.length; f2 += 1) {
          var d2 = y2[f2];
          if (0 !== d2.length && !((E2 = d2).every(function(t3) {
            return t3.x < 0;
          }) || E2.every(function(t3) {
            return t3.x > 8192;
          }) || E2.every(function(t3) {
            return t3.y < 0;
          }) || E2.every(function(t3) {
            return t3.y > 8192;
          })))
            for (var m2 = 0, v2 = 0; v2 < d2.length; v2++) {
              var g2 = d2[v2];
              if (v2 >= 1) {
                var x2 = d2[v2 - 1];
                if (!Gu(g2, x2)) {
                  c2.vertexLength + 4 > Qa.MAX_VERTEX_ARRAY_LENGTH && (c2 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));
                  var b2 = g2.sub(x2)._perp()._unit();
                  a2 && (b2 = b2._mult(-1));
                  var w2 = x2.dist(g2);
                  m2 + w2 > 32768 && (m2 = 0), Nu(this.layoutVertexArray, g2.x, g2.y, b2.x, b2.y, 0, 0, m2), Nu(this.layoutVertexArray, g2.x, g2.y, b2.x, b2.y, 0, 1, m2), Nu(this.layoutVertexArray, x2.x, x2.y, b2.x, b2.y, 0, 0, m2 += w2), Nu(this.layoutVertexArray, x2.x, x2.y, b2.x, b2.y, 0, 1, m2);
                  var _2 = c2.vertexLength;
                  a2 ? (this.indexArray.emplaceBack(_2, _2 + 1, _2 + 2), this.indexArray.emplaceBack(_2 + 1, _2 + 3, _2 + 2)) : (this.indexArray.emplaceBack(_2, _2 + 2, _2 + 1), this.indexArray.emplaceBack(_2 + 1, _2 + 2, _2 + 3)), c2.vertexLength += 4, c2.primitiveLength += 2;
                }
              }
            }
        }
        if (c2.vertexLength + l2 > Qa.MAX_VERTEX_ARRAY_LENGTH && (c2 = this.segments.prepareSegment(l2, this.layoutVertexArray, this.indexArray)), "Polygon" === Uu[t2.type]) {
          for (var A2 = [], S2 = [], z2 = c2.vertexLength, I2 = 0, k2 = u2; I2 < k2.length; I2 += 1) {
            var M2 = k2[I2];
            if (0 !== M2.length) {
              M2 !== u2[0] && S2.push(A2.length / 2);
              for (var P2 = 0; P2 < M2.length; P2++) {
                var V2 = M2[P2];
                Nu(this.layoutVertexArray, V2.x, V2.y, 0, 0, 1, 1, 0), A2.push(V2.x), A2.push(V2.y);
              }
            }
          }
          for (var C2 = Ys(A2, S2), T2 = 0; T2 < C2.length; T2 += 3)
            this.indexArray.emplaceBack(z2 + C2[T2], z2 + C2[T2 + 2], z2 + C2[T2 + 1]);
          c2.primitiveLength += C2.length / 3, c2.vertexLength += l2;
        }
      }
      var E2;
      this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, i3, n2);
    }, ti("FillExtrusionBucket", Zu, { omit: ["layers", "features"] });
    var Yu = { paint: new la({ "fill-extrusion-opacity": new ia(Gt["paint_fill-extrusion"]["fill-extrusion-opacity"]), "fill-extrusion-color": new aa(Gt["paint_fill-extrusion"]["fill-extrusion-color"]), "fill-extrusion-translate": new ia(Gt["paint_fill-extrusion"]["fill-extrusion-translate"]), "fill-extrusion-translate-anchor": new ia(Gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]), "fill-extrusion-pattern": new oa(Gt["paint_fill-extrusion"]["fill-extrusion-pattern"]), "fill-extrusion-height": new aa(Gt["paint_fill-extrusion"]["fill-extrusion-height"]), "fill-extrusion-base": new aa(Gt["paint_fill-extrusion"]["fill-extrusion-base"]), "fill-extrusion-vertical-gradient": new ia(Gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]), "fill-extrusion-minzoom": new aa(Gt["paint_fill-extrusion"]["fill-extrusion-minzoom"]), "fill-extrusion-maxzoom": new aa(Gt["paint_fill-extrusion"]["fill-extrusion-maxzoom"]), "fill-extrusion-topcolor": new aa(Gt["paint_fill-extrusion"]["fill-extrusion-topcolor"]) }) }, Xu = function(t2) {
      function e2(e3) {
        t2.call(this, e3, Yu);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.createBucket = function(t3) {
        return new Zu(t3);
      }, e2.prototype.queryRadius = function() {
        return ts(this.paint.get("fill-extrusion-translate"));
      }, e2.prototype.is3D = function() {
        return true;
      }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, a2, o2, s2, u2) {
        var l2 = es(t3, this.paint.get("fill-extrusion-translate"), this.paint.get("fill-extrusion-translate-anchor"), o2.angle, s2), p2 = this.paint.get("fill-extrusion-height").evaluate(e3, r2), h2 = this.paint.get("fill-extrusion-base").evaluate(e3, r2), c2 = function(t4, e4, r3, n3) {
          for (var a3 = [], o3 = 0, s3 = t4; o3 < s3.length; o3 += 1) {
            var u3 = s3[o3], l3 = [u3.x, u3.y, 0, 1];
            bs(l3, l3, e4), a3.push(new i2(l3[0] / l3[3], l3[1] / l3[3]));
          }
          return a3;
        }(l2, u2), f2 = function(t4, e4, r3, n3) {
          for (var a3 = [], o3 = [], s3 = n3[8] * e4, u3 = n3[9] * e4, l3 = n3[10] * e4, p3 = n3[11] * e4, h3 = n3[8] * r3, c3 = n3[9] * r3, f3 = n3[10] * r3, y2 = n3[11] * r3, d2 = 0, m2 = t4; d2 < m2.length; d2 += 1) {
            for (var v2 = [], g2 = [], x2 = 0, b2 = m2[d2]; x2 < b2.length; x2 += 1) {
              var w2 = b2[x2], _2 = w2.x, A2 = w2.y, S2 = n3[0] * _2 + n3[4] * A2 + n3[12], z2 = n3[1] * _2 + n3[5] * A2 + n3[13], I2 = n3[2] * _2 + n3[6] * A2 + n3[14], k2 = n3[3] * _2 + n3[7] * A2 + n3[15], M2 = I2 + l3, P2 = k2 + p3, V2 = S2 + h3, C2 = z2 + c3, T2 = I2 + f3, E2 = k2 + y2, B2 = new i2((S2 + s3) / P2, (z2 + u3) / P2);
              B2.z = M2 / P2, v2.push(B2);
              var D2 = new i2(V2 / E2, C2 / E2);
              D2.z = T2 / E2, g2.push(D2);
            }
            a3.push(v2), o3.push(g2);
          }
          return [a3, o3];
        }(n2, h2, p2, u2);
        return function(t4, e4, r3) {
          var n3 = 1 / 0;
          Zo(r3, e4) && (n3 = Ju(r3, e4[0]));
          for (var i3 = 0; i3 < e4.length; i3++)
            for (var a3 = e4[i3], o3 = t4[i3], s3 = 0; s3 < a3.length - 1; s3++) {
              var u3 = a3[s3], l3 = [u3, a3[s3 + 1], o3[s3 + 1], o3[s3], u3];
              qo(r3, l3) && (n3 = Math.min(n3, Ju(r3, l3)));
            }
          return n3 !== 1 / 0 && n3;
        }(f2[0], f2[1], c2);
      }, e2;
    }(pa);
    function Ku(t2, e2) {
      return t2.x * e2.x + t2.y * e2.y;
    }
    function Ju(t2, e2) {
      if (1 === t2.length) {
        for (var r2, n2 = 0, i3 = e2[n2++]; !r2 || i3.equals(r2); )
          if (!(r2 = e2[n2++]))
            return 1 / 0;
        for (; n2 < e2.length; n2++) {
          var a2 = e2[n2], o2 = t2[0], s2 = r2.sub(i3), u2 = a2.sub(i3), l2 = o2.sub(i3), p2 = Ku(s2, s2), h2 = Ku(s2, u2), c2 = Ku(u2, u2), f2 = Ku(l2, s2), y2 = Ku(l2, u2), d2 = p2 * c2 - h2 * h2, m2 = (c2 * f2 - h2 * y2) / d2, v2 = (p2 * y2 - h2 * f2) / d2, g2 = i3.z * (1 - m2 - v2) + r2.z * m2 + a2.z * v2;
          if (isFinite(g2))
            return g2;
        }
        return 1 / 0;
      }
      for (var x2 = 1 / 0, b2 = 0, w2 = e2; b2 < w2.length; b2 += 1)
        x2 = Math.min(x2, w2[b2].z);
      return x2;
    }
    var Hu = ya([{ name: "a_pos_normal", components: 2, type: "Int16" }, { name: "a_data", components: 4, type: "Uint8" }], 4).members, Qu = ju.VectorTileFeature.types, Wu = Math.cos(Math.PI / 180 * 37.5), $u = Math.pow(2, 14) / 0.5, tl = function(t2) {
      this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
        return t3.id;
      }), this.index = t2.index, this.hasPattern = false, this.patternFeatures = [], this.layoutVertexArray = new ba(), this.indexArray = new Va(), this.programConfigurations = new Io(Hu, t2.layers, t2.zoom, function(t3) {
        return t3.indexOf("line-outline") < 0;
      });
      var e2 = ["line-color", "line-floorwidth", "line-width", "line-dasharray", "line-pattern"];
      this.programConfigurations_outline = new Io(Hu, t2.layers, t2.zoom, function(t3) {
        return e2.indexOf(t3) < 0;
      }), this.segments = new Qa(), this.stateDependentLayerIds = this.layers.filter(function(t3) {
        return t3.isStateDependent();
      }).map(function(t3) {
        return t3.id;
      });
    };
    tl.prototype.populate = function(t2, e2, r2) {
      var n2 = zu("line", this.layers, e2), i3 = zu("line-outline", this.layers, e2);
      this.hasPattern = n2 || i3;
      for (var a2 = this.layers[0].layout.get("line-sort-key"), o2 = [], s2 = 0, u2 = t2.length; s2 < u2; s2 += 1) {
        var l2 = t2[s2], p2 = l2.feature, h2 = l2.id, c2 = l2.index, f2 = l2.sourceLayerIndex, y2 = l2.order, d2 = this.layers[0]._featureFilter, m2 = d2.needGeometry, v2 = { type: p2.type, id: h2, properties: p2.properties, geometry: m2 ? Oo(p2) : [] };
        if (d2.filter(new Ji(this.zoom), v2, r2)) {
          m2 || (v2.geometry = Oo(p2));
          var g2 = a2 ? a2.evaluate(v2, {}, r2) : void 0;
          o2.push({ id: h2, properties: p2.properties, type: p2.type, sourceLayerIndex: f2, index: c2, geometry: v2.geometry, patterns: {}, sortKey: g2, order: y2 });
        }
      }
      a2 && o2.sort(function(t3, e3) {
        return t3.sortKey - e3.sortKey;
      });
      for (var x2 = e2.lineAtlas, b2 = this.addConstantDashes(x2), w2 = 0, _2 = o2.length; w2 < _2; w2 += 1) {
        var A2 = o2[w2], S2 = A2.geometry, z2 = A2.index, I2 = A2.sourceLayerIndex, k2 = A2.order;
        if (b2 && this.addFeatureDashes(A2, x2), this.hasPattern) {
          var M2 = this.addPatternDependencies("line", this.layers, A2, this.zoom, e2);
          this.patternFeatures.push(M2);
        } else
          this.addFeature(A2, S2, z2, r2, x2.positions);
        e2.featureIndex.insert(t2[k2].feature, S2, z2, I2, this.index);
      }
    }, tl.prototype.addPatternDependencies = function(t2, e2, r2, n2, i3, a2) {
      for (var o2 = i3.patternDependencies, s2 = 0, u2 = e2; s2 < u2.length; s2 += 1) {
        var l2 = u2[s2], p2 = l2.paint.get(t2 + "-pattern");
        r2.patterns[l2.id] = {};
        var h2 = p2.value;
        if ("constant" !== h2.kind) {
          var f2 = h2.evaluate({ zoom: n2 - 1 }, r2, {}, i3.availableImages), y2 = h2.evaluate({ zoom: n2 }, r2, {}, i3.availableImages), d2 = h2.evaluate({ zoom: n2 + 1 }, r2, {}, i3.availableImages);
          y2 = y2 && y2.name ? y2.name : y2, d2 = d2 && d2.name ? d2.name : d2, o2[f2 = f2 && f2.name ? f2.name : f2] = true, o2[y2] = true, o2[d2] = true, r2.patterns[l2.id] = { min: f2, mid: y2, max: d2 };
        }
        var m2 = l2.paint.get(t2 + "-outline-pattern").value;
        if ("constant" !== m2.kind) {
          var v2 = m2.evaluate({ zoom: n2 - 1 }, r2, {}, i3.availableImages), g2 = m2.evaluate({ zoom: n2 }, r2, {}, i3.availableImages), x2 = m2.evaluate({ zoom: n2 + 1 }, r2, {}, i3.availableImages);
          g2 = g2 && g2.name ? g2.name : g2, x2 = x2 && x2.name ? x2.name : x2, o2[v2 = v2 && v2.name ? v2.name : v2] = true, o2[g2] = true, o2[x2] = true, r2.patterns[l2.id] = c(r2.patterns[l2.id], { min_out: v2, mid_out: g2, max_out: x2 });
        }
      }
      return r2;
    }, tl.prototype.addConstantDashes = function(t2) {
      for (var e2 = false, r2 = 0, n2 = this.layers; r2 < n2.length; r2 += 1) {
        var i3 = n2[r2], a2 = i3.paint.get("line-dasharray").value, o2 = i3.paint.get("line-outline-dasharray").value, s2 = i3.layout.get("line-cap").value;
        if ("constant" !== a2.kind || "constant" !== o2.kind || "constant" !== s2.kind)
          e2 = true;
        else {
          var u2 = s2.value, l2 = a2.value;
          l2 && (t2.addDash(l2.from, u2), t2.addDash(l2.to, u2), l2.other && t2.addDash(l2.other, u2));
          var p2 = o2.value;
          p2 && (t2.addDash(p2.from, u2), t2.addDash(p2.to, u2), p2.other && t2.addDash(p2.other, u2));
        }
      }
      return e2;
    }, tl.prototype.addFeatureDashes = function(t2, e2, r2) {
      var n2 = this.zoom;
      function i3(t3, e3, r3, n3, i4) {
        var a3, o3, s3, u3, l3, p2, h2 = r3.paint.get(i4).value, c2 = r3.layout.get("line-cap").value;
        if ("constant" === h2.kind && "constant" === c2.kind)
          return null;
        if ("constant" === h2.kind) {
          var f2 = h2.value;
          if (!f2)
            return null;
          a3 = f2.other || f2.to, o3 = f2.to, s3 = f2.from;
        } else
          a3 = h2.evaluate({ zoom: e3 - 1 }, n3), o3 = h2.evaluate({ zoom: e3 }, n3), s3 = h2.evaluate({ zoom: e3 + 1 }, n3);
        return "constant" === c2.kind ? u3 = l3 = p2 = c2.value : (u3 = c2.evaluate({ zoom: e3 - 1 }, n3), l3 = c2.evaluate({ zoom: e3 }, n3), p2 = c2.evaluate({ zoom: e3 + 1 }, n3)), t3.addDash(a3, u3), t3.addDash(o3, l3), t3.addDash(s3, p2), { min: t3.getKey(a3, u3), mid: t3.getKey(o3, l3), max: t3.getKey(s3, p2) };
      }
      for (var a2 = 0, o2 = this.layers; a2 < o2.length; a2 += 1) {
        var s2 = o2[a2], u2 = i3(e2, n2, s2, t2, "line-dasharray"), l2 = i3(e2, n2, s2, t2, "line-outline-dasharray");
        t2.patterns[s2.id] = {}, null != u2 && (t2.patterns[s2.id].min = u2.min, t2.patterns[s2.id].mid = u2.mid, t2.patterns[s2.id].max = u2.max), null != l2 && (t2.patterns[s2.id].min_out = l2.min, t2.patterns[s2.id].mid_out = l2.mid, t2.patterns[s2.id].max_out = l2.max);
      }
    }, tl.prototype.update = function(t2, e2, r2) {
      this.stateDependentLayers.length && (this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2), this.programConfigurations_outline.updatePaintArrays(t2, e2, this.stateDependentLayers, r2));
    }, tl.prototype.addFeatures = function(t2, e2, r2) {
      for (var n2 = 0, i3 = this.patternFeatures; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2];
        this.addFeature(a2, a2.geometry, a2.index, e2, r2);
      }
    }, tl.prototype.isEmpty = function() {
      return 0 === this.layoutVertexArray.length;
    }, tl.prototype.uploadPending = function() {
      return !this.uploaded || this.programConfigurations.needsUpload || this.programConfigurations_outline.needsUpload;
    }, tl.prototype.upload = function(t2) {
      this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Hu), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.programConfigurations_outline.upload(t2), this.uploaded = true;
    }, tl.prototype.destroy = function() {
      this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.programConfigurations_outline.destroy(), this.segments.destroy());
    }, tl.prototype.addFeature = function(t2, e2, r2, n2, i3) {
      for (var a2 = this.layers[0].layout, o2 = a2.get("line-join").evaluate(t2, {}), s2 = a2.get("line-cap").evaluate(t2, {}), u2 = a2.get("line-miter-limit"), l2 = a2.get("line-round-limit"), p2 = this.layers[0].paint.get("line-offset").evaluate(t2, {}), h2 = 0, c2 = e2; h2 < c2.length; h2 += 1)
        this.addLine(c2[h2], t2, o2, s2, u2, l2, p2);
      this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, i3, n2), this.programConfigurations_outline.populatePaintArrays(this.layoutVertexArray.length, t2, r2, i3, n2);
    }, tl.prototype.addLine = function(t2, e2, r2, n2, i3, a2, o2) {
      if (this.distance = 0, this.scaledDistance = 0, this.totalDistance = 0, e2.properties && e2.properties.hasOwnProperty("sgmap_clip_start") && e2.properties.hasOwnProperty("sgmap_clip_end")) {
        this.clipStart = +e2.properties.sgmap_clip_start, this.clipEnd = +e2.properties.sgmap_clip_end;
        for (var s2 = 0; s2 < t2.length - 1; s2++)
          this.totalDistance += t2[s2].dist(t2[s2 + 1]);
        this.updateScaledDistance();
      }
      for (var u2 = "Polygon" === Qu[e2.type], l2 = t2.length; l2 >= 2 && t2[l2 - 1].equals(t2[l2 - 2]); )
        l2--;
      for (var p2 = 0; p2 < l2 - 1 && t2[p2].equals(t2[p2 + 1]); )
        p2++;
      if (!(l2 < (u2 ? 3 : 2))) {
        "bevel" === r2 && (i3 = 1.05);
        var h2, c2 = this.overscaling <= 16 ? 122880 / (512 * this.overscaling) : 0, f2 = this.segments.prepareSegment(10 * l2, this.layoutVertexArray, this.indexArray), y2 = void 0, d2 = void 0, m2 = void 0, v2 = void 0;
        this.e1 = this.e2 = -1, u2 && (v2 = t2[p2].sub(h2 = t2[l2 - 2])._unit()._perp());
        for (var g2 = p2; g2 < l2; g2++)
          if (!(d2 = g2 === l2 - 1 ? u2 ? t2[p2 + 1] : void 0 : t2[g2 + 1]) || !t2[g2].equals(d2)) {
            v2 && (m2 = v2), h2 && (y2 = h2), h2 = t2[g2], v2 = d2 ? d2.sub(h2)._unit()._perp() : m2;
            var x2 = (m2 = m2 || v2).add(v2);
            0 === x2.x && 0 === x2.y || x2._unit();
            var b2 = m2.x * v2.x + m2.y * v2.y, w2 = x2.x * v2.x + x2.y * v2.y, _2 = 0 !== w2 ? 1 / w2 : 1 / 0, A2 = 2 * Math.sqrt(2 - 2 * w2), S2 = w2 < Wu && y2 && d2, z2 = m2.x * v2.y - m2.y * v2.x > 0;
            if (S2 && g2 > p2) {
              var I2 = h2.dist(y2);
              if (I2 > 2 * c2) {
                var k2 = h2.sub(h2.sub(y2)._mult(c2 / I2)._round());
                this.updateDistance(y2, k2), this.addCurrentVertex(k2, m2, 0, 0, f2), y2 = k2;
              }
            }
            var M2 = y2 && d2, P2 = M2 ? r2 : u2 ? "butt" : n2;
            if (M2 && "round" === P2 && (_2 < a2 ? P2 = "miter" : _2 <= 2 && (P2 = "fakeround")), "miter" === P2 && _2 > i3 && (P2 = "bevel"), "bevel" === P2 && (_2 > 2 && (P2 = "flipbevel"), _2 < i3 && (P2 = "miter")), y2 && this.updateDistance(y2, h2), "miter" === P2)
              x2._mult(_2), this.addCurrentVertex(h2, x2, 0, 0, f2);
            else if ("flipbevel" === P2) {
              if (_2 > 100)
                x2 = v2.mult(-1);
              else if (o2)
                x2 = m2.add(v2)._mult(_2), this.addCurrentVertex(h2, x2, 0, 0, f2);
              else {
                var V2 = _2 * m2.add(v2).mag() / m2.sub(v2).mag();
                x2._perp()._mult(V2 * (z2 ? -1 : 1));
              }
              this.addCurrentVertex(h2, x2, 0, 0, f2), this.addCurrentVertex(h2, x2.mult(-1), 0, 0, f2);
            } else if ("bevel" === P2 || "fakeround" === P2) {
              var C2 = -Math.sqrt(_2 * _2 - 1), T2 = z2 ? C2 : 0, E2 = z2 ? 0 : C2;
              if (y2 && this.addCurrentVertex(h2, m2, T2, E2, f2), "fakeround" === P2)
                for (var B2 = Math.round(180 * A2 / Math.PI / 20), D2 = 1; D2 < B2; D2++) {
                  var L2 = D2 / B2;
                  if (0.5 !== L2) {
                    var F2 = L2 - 0.5;
                    L2 += L2 * F2 * (L2 - 1) * ((1.0904 + b2 * (b2 * (3.55645 - 1.43519 * b2) - 3.2452)) * F2 * F2 + (0.848013 + b2 * (0.215638 * b2 - 1.06021)));
                  }
                  var R2 = v2.sub(m2)._mult(L2)._add(m2)._unit()._mult(z2 ? -1 : 1);
                  this.addHalfVertex(h2, R2.x, R2.y, false, z2, 0, f2);
                }
              d2 && this.addCurrentVertex(h2, v2, -T2, -E2, f2);
            } else if ("butt" === P2)
              this.addCurrentVertex(h2, x2, 0, 0, f2);
            else if ("square" === P2) {
              var O2 = y2 ? 1 : -1;
              this.addCurrentVertex(h2, x2, O2, O2, f2);
            } else
              "round" === P2 && (y2 && (this.addCurrentVertex(h2, m2, 0, 0, f2), this.addCurrentVertex(h2, m2, 1, 1, f2, true)), d2 && (this.addCurrentVertex(h2, v2, -1, -1, f2, true), this.addCurrentVertex(h2, v2, 0, 0, f2)));
            if (S2 && g2 < l2 - 1) {
              var j2 = h2.dist(d2);
              if (j2 > 2 * c2) {
                var U2 = h2.add(d2.sub(h2)._mult(c2 / j2)._round());
                this.updateDistance(h2, U2), this.addCurrentVertex(U2, v2, 0, 0, f2), h2 = U2;
              }
            }
          }
      }
    }, tl.prototype.addCurrentVertex = function(t2, e2, r2, n2, i3, a2) {
      void 0 === a2 && (a2 = false);
      var o2 = e2.y * n2 - e2.x, s2 = -e2.y - e2.x * n2;
      this.addHalfVertex(t2, e2.x + e2.y * r2, e2.y - e2.x * r2, a2, false, r2, i3), this.addHalfVertex(t2, o2, s2, a2, true, -n2, i3), this.distance > $u / 2 && 0 === this.totalDistance && (this.distance = 0, this.addCurrentVertex(t2, e2, r2, n2, i3, a2));
    }, tl.prototype.addHalfVertex = function(t2, e2, r2, n2, i3, a2, o2) {
      var s2 = 0.5 * this.scaledDistance;
      this.layoutVertexArray.emplaceBack((t2.x << 1) + (n2 ? 1 : 0), (t2.y << 1) + (i3 ? 1 : 0), Math.round(63 * e2) + 128, Math.round(63 * r2) + 128, 1 + (0 === a2 ? 0 : a2 < 0 ? -1 : 1) | (63 & s2) << 2, s2 >> 6);
      var u2 = o2.vertexLength++;
      this.e1 >= 0 && this.e2 >= 0 && (this.indexArray.emplaceBack(this.e1, this.e2, u2), o2.primitiveLength++), i3 ? this.e2 = u2 : this.e1 = u2;
    }, tl.prototype.updateScaledDistance = function() {
      this.scaledDistance = this.totalDistance > 0 ? (this.clipStart + (this.clipEnd - this.clipStart) * this.distance / this.totalDistance) * ($u - 1) : this.distance;
    }, tl.prototype.updateDistance = function(t2, e2) {
      this.distance += t2.dist(e2), this.updateScaledDistance();
    }, ti("LineBucket", tl, { omit: ["layers", "patternFeatures"] });
    var el = new la({ "line-cap": new aa(Gt.layout_line["line-cap"]), "line-join": new aa(Gt.layout_line["line-join"]), "line-miter-limit": new ia(Gt.layout_line["line-miter-limit"]), "line-round-limit": new ia(Gt.layout_line["line-round-limit"]), "line-sort-key": new aa(Gt.layout_line["line-sort-key"]), "allow-clip": new ia(Gt.layout_line["allow-clip"]), "esymbol-id": new aa(Gt.layout_line["esymbol-id"]) }), rl = { paint: new la({ "line-opacity": new aa(Gt.paint_line["line-opacity"]), "line-color": new aa(Gt.paint_line["line-color"]), "line-translate": new ia(Gt.paint_line["line-translate"]), "line-translate-anchor": new ia(Gt.paint_line["line-translate-anchor"]), "line-width": new aa(Gt.paint_line["line-width"]), "line-gap-width": new aa(Gt.paint_line["line-gap-width"]), "line-offset": new aa(Gt.paint_line["line-offset"]), "line-blur": new aa(Gt.paint_line["line-blur"]), "line-dasharray": new oa(Gt.paint_line["line-dasharray"]), "line-pattern": new oa(Gt.paint_line["line-pattern"]), "line-pattern-mode": new aa(Gt.paint_line["line-pattern-mode"]), "line-pattern-color": new ia(Gt.paint_line["line-pattern-color"]), "line-gradient": new ua(Gt.paint_line["line-gradient"]), "line-outline-pattern": new oa(Gt.paint_line["line-outline-pattern"]), "line-outline-color": new aa(Gt.paint_line["line-outline-color"]), "line-outline-width": new aa(Gt.paint_line["line-outline-width"]), "line-outline-dasharray": new oa(Gt.paint_line["line-outline-dasharray"]), "line-minzoom": new aa(Gt.paint_line["line-minzoom"]), "line-maxzoom": new aa(Gt.paint_line["line-maxzoom"]) }), layout: el }, nl = new (function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.possiblyEvaluate = function(e3, r2) {
        return r2 = new Ji(Math.floor(r2.zoom), { now: r2.now, fadeDuration: r2.fadeDuration, zoomHistory: r2.zoomHistory, transition: r2.transition }), t2.prototype.possiblyEvaluate.call(this, e3, r2);
      }, e2.prototype.evaluate = function(e3, r2, n2, i3) {
        return r2 = c({}, r2, { zoom: Math.floor(r2.zoom) }), t2.prototype.evaluate.call(this, e3, r2, n2, i3);
      }, e2;
    }(aa))(rl.paint.properties["line-width"].specification);
    nl.useIntegerZoom = true;
    var il = function(t2) {
      function e2(e3) {
        e3 && e3.layout && "eline" == e3.type && e3.layout["esymbol-id"] && (e3.paint["line-pattern"] = e3.layout["esymbol-id"]), t2.call(this, e3, rl);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._handleSpecialPaintPropertyUpdate = function(t3) {
        "line-gradient" === t3 && this._updateGradient();
      }, e2.prototype._updateGradient = function() {
        this.gradient = Us(this._transitionablePaint._values["line-gradient"].value.expression, "lineProgress"), this.gradientTexture = null;
      }, e2.prototype.recalculate = function(e3, r2) {
        t2.prototype.recalculate.call(this, e3, r2), this.paint._values["line-floorwidth"] = nl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value, e3), this.paint._values["line-outline-floorwidth"] = nl.possiblyEvaluate(this._transitioningPaint._values["line-outline-width"].value, e3);
      }, e2.prototype.createBucket = function(t3) {
        return new tl(t3);
      }, e2.prototype.queryRadius = function(t3) {
        var e3 = t3, r2 = al(Math.max($o("line-width", this, e3), $o("line-outline-width", this, e3)), $o("line-gap-width", this, e3)), n2 = $o("line-offset", this, e3);
        return r2 / 2 + Math.abs(n2) + ts(this.paint.get("line-translate"));
      }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, a2, o2, s2) {
        var u2 = es(t3, this.paint.get("line-translate"), this.paint.get("line-translate-anchor"), o2.angle, s2), l2 = s2 / 2 * al(this.paint.get("line-width").evaluate(e3, r2) + this.paint.get("line-outline-width").evaluate(e3, r2), this.paint.get("line-gap-width").evaluate(e3, r2)), p2 = this.paint.get("line-offset").evaluate(e3, r2);
        return p2 && (n2 = function(t4, e4) {
          for (var r3 = [], n3 = new i2(0, 0), a3 = 0; a3 < t4.length; a3++) {
            for (var o3 = t4[a3], s3 = [], u3 = 0; u3 < o3.length; u3++) {
              var l3 = o3[u3], p3 = o3[u3 + 1], h2 = 0 === u3 ? n3 : l3.sub(o3[u3 - 1])._unit()._perp(), c2 = u3 === o3.length - 1 ? n3 : p3.sub(l3)._unit()._perp(), f2 = h2._add(c2)._unit();
              f2._mult(1 / (f2.x * c2.x + f2.y * c2.y)), s3.push(f2._mult(e4)._add(l3));
            }
            r3.push(s3);
          }
          return r3;
        }(n2, p2 * s2)), function(t4, e4, r3) {
          for (var n3 = 0; n3 < e4.length; n3++) {
            var i3 = e4[n3];
            if (t4.length >= 3) {
              for (var a3 = 0; a3 < i3.length; a3++)
                if (Qo(t4, i3[a3]))
                  return true;
            }
            if (Go(t4, i3, r3))
              return true;
          }
          return false;
        }(u2, n2, l2);
      }, e2.prototype.isTileClipped = function() {
        return true;
      }, e2;
    }(pa);
    function al(t2, e2) {
      return e2 > 0 ? e2 + 2 * t2 : t2;
    }
    var ol = ya([{ name: "a_pos_offset", components: 4, type: "Int16" }, { name: "a_data", components: 4, type: "Uint16" }, { name: "a_pixeloffset", components: 4, type: "Int16" }], 4), sl = ya([{ name: "a_projected_pos", components: 3, type: "Float32" }], 4), ul = (ya([{ name: "a_fade_opacity", components: 1, type: "Uint32" }], 4), ya([{ name: "a_placed", components: 2, type: "Uint8" }, { name: "a_shift", components: 2, type: "Float32" }])), ll = (ya([{ type: "Int16", name: "anchorPointX" }, { type: "Int16", name: "anchorPointY" }, { type: "Int16", name: "x1" }, { type: "Int16", name: "y1" }, { type: "Int16", name: "x2" }, { type: "Int16", name: "y2" }, { type: "Uint32", name: "featureIndex" }, { type: "Uint16", name: "sourceLayerIndex" }, { type: "Uint16", name: "bucketIndex" }]), ya([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_anchor_pos", components: 2, type: "Int16" }, { name: "a_extrude", components: 2, type: "Int16" }], 4)), pl = ya([{ name: "a_pos", components: 2, type: "Float32" }, { name: "a_radius", components: 1, type: "Float32" }, { name: "a_flags", components: 2, type: "Int16" }], 4);
    function hl(t2, e2, r2) {
      return t2.sections.forEach(function(t3) {
        t3.text = function(t4, e3, r3) {
          var n2 = e3.layout.get("text-transform").evaluate(r3, {});
          return "uppercase" === n2 ? t4 = t4.toLocaleUpperCase() : "lowercase" === n2 && (t4 = t4.toLocaleLowerCase()), Ki.applyArabicShaping && (t4 = Ki.applyArabicShaping(t4)), t4;
        }(t3.text, e2, r2);
      }), t2;
    }
    ya([{ name: "triangle", components: 3, type: "Uint16" }]), ya([{ type: "Int16", name: "anchorX" }, { type: "Int16", name: "anchorY" }, { type: "Uint16", name: "glyphStartIndex" }, { type: "Uint16", name: "numGlyphs" }, { type: "Uint32", name: "vertexStartIndex" }, { type: "Uint32", name: "lineStartIndex" }, { type: "Uint32", name: "lineLength" }, { type: "Uint16", name: "segment" }, { type: "Uint16", name: "lowerSize" }, { type: "Uint16", name: "upperSize" }, { type: "Float32", name: "lineOffsetX" }, { type: "Float32", name: "lineOffsetY" }, { type: "Uint8", name: "writingMode" }, { type: "Uint8", name: "placedOrientation" }, { type: "Uint8", name: "hidden" }, { type: "Uint32", name: "crossTileID" }, { type: "Int16", name: "associatedIconIndex" }]), ya([{ type: "Int16", name: "anchorX" }, { type: "Int16", name: "anchorY" }, { type: "Int16", name: "rightJustifiedTextSymbolIndex" }, { type: "Int16", name: "centerJustifiedTextSymbolIndex" }, { type: "Int16", name: "leftJustifiedTextSymbolIndex" }, { type: "Int16", name: "verticalPlacedTextSymbolIndex" }, { type: "Int16", name: "placedIconSymbolIndex" }, { type: "Int16", name: "verticalPlacedIconSymbolIndex" }, { type: "Uint16", name: "key" }, { type: "Uint16", name: "textBoxStartIndex" }, { type: "Uint16", name: "textBoxEndIndex" }, { type: "Uint16", name: "verticalTextBoxStartIndex" }, { type: "Uint16", name: "verticalTextBoxEndIndex" }, { type: "Uint16", name: "iconBoxStartIndex" }, { type: "Uint16", name: "iconBoxEndIndex" }, { type: "Uint16", name: "verticalIconBoxStartIndex" }, { type: "Uint16", name: "verticalIconBoxEndIndex" }, { type: "Uint16", name: "featureIndex" }, { type: "Uint16", name: "numHorizontalGlyphVertices" }, { type: "Uint16", name: "numVerticalGlyphVertices" }, { type: "Uint16", name: "numIconVertices" }, { type: "Uint16", name: "numVerticalIconVertices" }, { type: "Uint16", name: "useRuntimeCollisionCircles" }, { type: "Uint32", name: "crossTileID" }, { type: "Float32", name: "textBoxScale" }, { type: "Float32", components: 2, name: "textOffset" }, { type: "Float32", name: "collisionCircleDiameter" }]), ya([{ type: "Float32", name: "offsetX" }]), ya([{ type: "Int16", name: "x" }, { type: "Int16", name: "y" }, { type: "Int16", name: "tileUnitDistanceFromAnchor" }]);
    var cl = { "!": "\uFE15", "#": "\uFF03", $: "\uFF04", "%": "\uFF05", "&": "\uFF06", "(": "\uFE35", ")": "\uFE36", "*": "\uFF0A", "+": "\uFF0B", ",": "\uFE10", "-": "\uFE32", ".": "\u30FB", "/": "\uFF0F", ":": "\uFE13", ";": "\uFE14", "<": "\uFE3F", "=": "\uFF1D", ">": "\uFE40", "?": "\uFE16", "@": "\uFF20", "[": "\uFE47", "\\": "\uFF3C", "]": "\uFE48", "^": "\uFF3E", _: "\uFE33", "`": "\uFF40", "{": "\uFE37", "|": "\u2015", "}": "\uFE38", "~": "\uFF5E", "\xA2": "\uFFE0", "\xA3": "\uFFE1", "\xA5": "\uFFE5", "\xA6": "\uFFE4", "\xAC": "\uFFE2", "\xAF": "\uFFE3", "\u2013": "\uFE32", "\u2014": "\uFE31", "\u2018": "\uFE43", "\u2019": "\uFE44", "\u201C": "\uFE41", "\u201D": "\uFE42", "\u2026": "\uFE19", "\u2027": "\u30FB", "\u20A9": "\uFFE6", "\u3001": "\uFE11", "\u3002": "\uFE12", "\u3008": "\uFE3F", "\u3009": "\uFE40", "\u300A": "\uFE3D", "\u300B": "\uFE3E", "\u300C": "\uFE41", "\u300D": "\uFE42", "\u300E": "\uFE43", "\u300F": "\uFE44", "\u3010": "\uFE3B", "\u3011": "\uFE3C", "\u3014": "\uFE39", "\u3015": "\uFE3A", "\u3016": "\uFE17", "\u3017": "\uFE18", "\uFF01": "\uFE15", "\uFF08": "\uFE35", "\uFF09": "\uFE36", "\uFF0C": "\uFE10", "\uFF0D": "\uFE32", "\uFF0E": "\u30FB", "\uFF1A": "\uFE13", "\uFF1B": "\uFE14", "\uFF1C": "\uFE3F", "\uFF1E": "\uFE40", "\uFF1F": "\uFE16", "\uFF3B": "\uFE47", "\uFF3D": "\uFE48", "\uFF3F": "\uFE33", "\uFF5B": "\uFE37", "\uFF5C": "\u2015", "\uFF5D": "\uFE38", "\uFF5F": "\uFE35", "\uFF60": "\uFE36", "\uFF61": "\uFE12", "\uFF62": "\uFE41", "\uFF63": "\uFE42" }, fl = function(t2, e2, r2, n2, i3) {
      var a2, o2, s2 = 8 * i3 - n2 - 1, u2 = (1 << s2) - 1, l2 = u2 >> 1, p2 = -7, h2 = r2 ? i3 - 1 : 0, c2 = r2 ? -1 : 1, f2 = t2[e2 + h2];
      for (h2 += c2, a2 = f2 & (1 << -p2) - 1, f2 >>= -p2, p2 += s2; p2 > 0; a2 = 256 * a2 + t2[e2 + h2], h2 += c2, p2 -= 8)
        ;
      for (o2 = a2 & (1 << -p2) - 1, a2 >>= -p2, p2 += n2; p2 > 0; o2 = 256 * o2 + t2[e2 + h2], h2 += c2, p2 -= 8)
        ;
      if (0 === a2)
        a2 = 1 - l2;
      else {
        if (a2 === u2)
          return o2 ? NaN : 1 / 0 * (f2 ? -1 : 1);
        o2 += Math.pow(2, n2), a2 -= l2;
      }
      return (f2 ? -1 : 1) * o2 * Math.pow(2, a2 - n2);
    }, yl = function(t2, e2, r2, n2, i3, a2) {
      var o2, s2, u2, l2 = 8 * a2 - i3 - 1, p2 = (1 << l2) - 1, h2 = p2 >> 1, c2 = 23 === i3 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, f2 = n2 ? 0 : a2 - 1, y2 = n2 ? 1 : -1, d2 = e2 < 0 || 0 === e2 && 1 / e2 < 0 ? 1 : 0;
      for (e2 = Math.abs(e2), isNaN(e2) || e2 === 1 / 0 ? (s2 = isNaN(e2) ? 1 : 0, o2 = p2) : (o2 = Math.floor(Math.log(e2) / Math.LN2), e2 * (u2 = Math.pow(2, -o2)) < 1 && (o2--, u2 *= 2), (e2 += o2 + h2 >= 1 ? c2 / u2 : c2 * Math.pow(2, 1 - h2)) * u2 >= 2 && (o2++, u2 /= 2), o2 + h2 >= p2 ? (s2 = 0, o2 = p2) : o2 + h2 >= 1 ? (s2 = (e2 * u2 - 1) * Math.pow(2, i3), o2 += h2) : (s2 = e2 * Math.pow(2, h2 - 1) * Math.pow(2, i3), o2 = 0)); i3 >= 8; t2[r2 + f2] = 255 & s2, f2 += y2, s2 /= 256, i3 -= 8)
        ;
      for (o2 = o2 << i3 | s2, l2 += i3; l2 > 0; t2[r2 + f2] = 255 & o2, f2 += y2, o2 /= 256, l2 -= 8)
        ;
      t2[r2 + f2 - y2] |= 128 * d2;
    }, dl = ml;
    function ml(t2) {
      this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t2) ? t2 : new Uint8Array(t2 || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;
    }
    ml.Varint = 0, ml.Fixed64 = 1, ml.Bytes = 2, ml.Fixed32 = 5;
    var vl = "undefined" == typeof TextDecoder ? null : new TextDecoder("utf8");
    function gl(t2) {
      return t2.type === ml.Bytes ? t2.readVarint() + t2.pos : t2.pos + 1;
    }
    function xl(t2, e2, r2) {
      return r2 ? 4294967296 * e2 + (t2 >>> 0) : 4294967296 * (e2 >>> 0) + (t2 >>> 0);
    }
    function bl(t2, e2, r2) {
      var n2 = e2 <= 16383 ? 1 : e2 <= 2097151 ? 2 : e2 <= 268435455 ? 3 : Math.floor(Math.log(e2) / (7 * Math.LN2));
      r2.realloc(n2);
      for (var i3 = r2.pos - 1; i3 >= t2; i3--)
        r2.buf[i3 + n2] = r2.buf[i3];
    }
    function wl(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeVarint(t2[r2]);
    }
    function _l(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeSVarint(t2[r2]);
    }
    function Al(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeFloat(t2[r2]);
    }
    function Sl(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeDouble(t2[r2]);
    }
    function zl(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeBoolean(t2[r2]);
    }
    function Il(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeFixed32(t2[r2]);
    }
    function kl(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeSFixed32(t2[r2]);
    }
    function Ml(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeFixed64(t2[r2]);
    }
    function Pl(t2, e2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        e2.writeSFixed64(t2[r2]);
    }
    function Vl(t2, e2) {
      return (t2[e2] | t2[e2 + 1] << 8 | t2[e2 + 2] << 16) + 16777216 * t2[e2 + 3];
    }
    function Cl(t2, e2, r2) {
      t2[r2] = e2, t2[r2 + 1] = e2 >>> 8, t2[r2 + 2] = e2 >>> 16, t2[r2 + 3] = e2 >>> 24;
    }
    function Tl(t2, e2) {
      return (t2[e2] | t2[e2 + 1] << 8 | t2[e2 + 2] << 16) + (t2[e2 + 3] << 24);
    }
    function El(t2, e2, r2) {
      1 === t2 && r2.readMessage(Bl, e2);
    }
    function Bl(t2, e2, r2) {
      if (3 === t2) {
        var n2 = r2.readMessage(Dl, {}), i3 = n2.width, a2 = n2.height, o2 = n2.left, s2 = n2.top, u2 = n2.advance;
        e2.push({ id: n2.id, bitmap: new Rs({ width: i3 + 6, height: a2 + 6 }, n2.bitmap), metrics: { width: i3, height: a2, left: o2, top: s2, advance: u2 } });
      }
    }
    function Dl(t2, e2, r2) {
      1 === t2 ? e2.id = r2.readVarint() : 2 === t2 ? e2.bitmap = r2.readBytes() : 3 === t2 ? e2.width = r2.readVarint() : 4 === t2 ? e2.height = r2.readVarint() : 5 === t2 ? e2.left = r2.readSVarint() : 6 === t2 ? e2.top = r2.readSVarint() : 7 === t2 && (e2.advance = r2.readVarint());
    }
    function Ll(t2) {
      for (var e2 = 0, r2 = 0, n2 = 0, i3 = t2; n2 < i3.length; n2 += 1) {
        var a2 = i3[n2];
        e2 += a2.w * a2.h, r2 = Math.max(r2, a2.w);
      }
      t2.sort(function(t3, e3) {
        return e3.h - t3.h;
      });
      for (var o2 = [{ x: 0, y: 0, w: Math.max(Math.ceil(Math.sqrt(e2 / 0.95)), r2), h: 1 / 0 }], s2 = 0, u2 = 0, l2 = 0, p2 = t2; l2 < p2.length; l2 += 1)
        for (var h2 = p2[l2], c2 = o2.length - 1; c2 >= 0; c2--) {
          var f2 = o2[c2];
          if (!(h2.w > f2.w || h2.h > f2.h)) {
            if (h2.x = f2.x, h2.y = f2.y, u2 = Math.max(u2, h2.y + h2.h), s2 = Math.max(s2, h2.x + h2.w), h2.w === f2.w && h2.h === f2.h) {
              var y2 = o2.pop();
              c2 < o2.length && (o2[c2] = y2);
            } else
              h2.h === f2.h ? (f2.x += h2.w, f2.w -= h2.w) : h2.w === f2.w ? (f2.y += h2.h, f2.h -= h2.h) : (o2.push({ x: f2.x + h2.w, y: f2.y, w: f2.w - h2.w, h: h2.h }), f2.y += h2.h, f2.h -= h2.h);
            break;
          }
        }
      return { w: s2, h: u2, fill: e2 / (s2 * u2) || 0 };
    }
    ml.prototype = { destroy: function() {
      this.buf = null;
    }, readFields: function(t2, e2, r2) {
      for (r2 = r2 || this.length; this.pos < r2; ) {
        var n2 = this.readVarint(), i3 = n2 >> 3, a2 = this.pos;
        this.type = 7 & n2, t2(i3, e2, this), this.pos === a2 && this.skip(n2);
      }
      return e2;
    }, readMessage: function(t2, e2) {
      return this.readFields(t2, e2, this.readVarint() + this.pos);
    }, readFixed32: function() {
      var t2 = Vl(this.buf, this.pos);
      return this.pos += 4, t2;
    }, readSFixed32: function() {
      var t2 = Tl(this.buf, this.pos);
      return this.pos += 4, t2;
    }, readFixed64: function() {
      var t2 = Vl(this.buf, this.pos) + 4294967296 * Vl(this.buf, this.pos + 4);
      return this.pos += 8, t2;
    }, readSFixed64: function() {
      var t2 = Vl(this.buf, this.pos) + 4294967296 * Tl(this.buf, this.pos + 4);
      return this.pos += 8, t2;
    }, readFloat: function() {
      var t2 = fl(this.buf, this.pos, true, 23, 4);
      return this.pos += 4, t2;
    }, readDouble: function() {
      var t2 = fl(this.buf, this.pos, true, 52, 8);
      return this.pos += 8, t2;
    }, readVarint: function(t2) {
      var e2, r2, n2 = this.buf;
      return e2 = 127 & (r2 = n2[this.pos++]), r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 7, r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 14, r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 21, r2 < 128 ? e2 : function(t3, e3, r3) {
        var n3, i3, a2 = r3.buf;
        if (n3 = (112 & (i3 = a2[r3.pos++])) >> 4, i3 < 128)
          return xl(t3, n3, e3);
        if (n3 |= (127 & (i3 = a2[r3.pos++])) << 3, i3 < 128)
          return xl(t3, n3, e3);
        if (n3 |= (127 & (i3 = a2[r3.pos++])) << 10, i3 < 128)
          return xl(t3, n3, e3);
        if (n3 |= (127 & (i3 = a2[r3.pos++])) << 17, i3 < 128)
          return xl(t3, n3, e3);
        if (n3 |= (127 & (i3 = a2[r3.pos++])) << 24, i3 < 128)
          return xl(t3, n3, e3);
        if (n3 |= (1 & (i3 = a2[r3.pos++])) << 31, i3 < 128)
          return xl(t3, n3, e3);
        throw new Error("Expected varint not more than 10 bytes");
      }(e2 |= (15 & (r2 = n2[this.pos])) << 28, t2, this))));
    }, readVarint64: function() {
      return this.readVarint(true);
    }, readSVarint: function() {
      var t2 = this.readVarint();
      return t2 % 2 == 1 ? (t2 + 1) / -2 : t2 / 2;
    }, readBoolean: function() {
      return Boolean(this.readVarint());
    }, readString: function() {
      var t2 = this.readVarint() + this.pos, e2 = this.pos;
      return this.pos = t2, t2 - e2 >= 12 && vl ? function(t3, e3, r2) {
        return vl.decode(t3.subarray(e3, r2));
      }(this.buf, e2, t2) : function(t3, e3, r2) {
        for (var n2 = "", i3 = e3; i3 < r2; ) {
          var a2, o2, s2, u2 = t3[i3], l2 = null, p2 = u2 > 239 ? 4 : u2 > 223 ? 3 : u2 > 191 ? 2 : 1;
          if (i3 + p2 > r2)
            break;
          1 === p2 ? u2 < 128 && (l2 = u2) : 2 === p2 ? 128 == (192 & (a2 = t3[i3 + 1])) && (l2 = (31 & u2) << 6 | 63 & a2) <= 127 && (l2 = null) : 3 === p2 ? (o2 = t3[i3 + 2], 128 == (192 & (a2 = t3[i3 + 1])) && 128 == (192 & o2) && ((l2 = (15 & u2) << 12 | (63 & a2) << 6 | 63 & o2) <= 2047 || l2 >= 55296 && l2 <= 57343) && (l2 = null)) : 4 === p2 && (o2 = t3[i3 + 2], s2 = t3[i3 + 3], 128 == (192 & (a2 = t3[i3 + 1])) && 128 == (192 & o2) && 128 == (192 & s2) && ((l2 = (15 & u2) << 18 | (63 & a2) << 12 | (63 & o2) << 6 | 63 & s2) <= 65535 || l2 >= 1114112) && (l2 = null)), null === l2 ? (l2 = 65533, p2 = 1) : l2 > 65535 && (l2 -= 65536, n2 += String.fromCharCode(l2 >>> 10 & 1023 | 55296), l2 = 56320 | 1023 & l2), n2 += String.fromCharCode(l2), i3 += p2;
        }
        return n2;
      }(this.buf, e2, t2);
    }, readBytes: function() {
      var t2 = this.readVarint() + this.pos, e2 = this.buf.subarray(this.pos, t2);
      return this.pos = t2, e2;
    }, readPackedVarint: function(t2, e2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readVarint(e2));
      var r2 = gl(this);
      for (t2 = t2 || []; this.pos < r2; )
        t2.push(this.readVarint(e2));
      return t2;
    }, readPackedSVarint: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readSVarint());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readSVarint());
      return t2;
    }, readPackedBoolean: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readBoolean());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readBoolean());
      return t2;
    }, readPackedFloat: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readFloat());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readFloat());
      return t2;
    }, readPackedDouble: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readDouble());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readDouble());
      return t2;
    }, readPackedFixed32: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readFixed32());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readFixed32());
      return t2;
    }, readPackedSFixed32: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readSFixed32());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readSFixed32());
      return t2;
    }, readPackedFixed64: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readFixed64());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readFixed64());
      return t2;
    }, readPackedSFixed64: function(t2) {
      if (this.type !== ml.Bytes)
        return t2.push(this.readSFixed64());
      var e2 = gl(this);
      for (t2 = t2 || []; this.pos < e2; )
        t2.push(this.readSFixed64());
      return t2;
    }, skip: function(t2) {
      var e2 = 7 & t2;
      if (e2 === ml.Varint)
        for (; this.buf[this.pos++] > 127; )
          ;
      else if (e2 === ml.Bytes)
        this.pos = this.readVarint() + this.pos;
      else if (e2 === ml.Fixed32)
        this.pos += 4;
      else {
        if (e2 !== ml.Fixed64)
          throw new Error("Unimplemented type: " + e2);
        this.pos += 8;
      }
    }, writeTag: function(t2, e2) {
      this.writeVarint(t2 << 3 | e2);
    }, realloc: function(t2) {
      for (var e2 = this.length || 16; e2 < this.pos + t2; )
        e2 *= 2;
      if (e2 !== this.length) {
        var r2 = new Uint8Array(e2);
        r2.set(this.buf), this.buf = r2, this.length = e2;
      }
    }, finish: function() {
      return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);
    }, writeFixed32: function(t2) {
      this.realloc(4), Cl(this.buf, t2, this.pos), this.pos += 4;
    }, writeSFixed32: function(t2) {
      this.realloc(4), Cl(this.buf, t2, this.pos), this.pos += 4;
    }, writeFixed64: function(t2) {
      this.realloc(8), Cl(this.buf, -1 & t2, this.pos), Cl(this.buf, Math.floor(t2 * (1 / 4294967296)), this.pos + 4), this.pos += 8;
    }, writeSFixed64: function(t2) {
      this.realloc(8), Cl(this.buf, -1 & t2, this.pos), Cl(this.buf, Math.floor(t2 * (1 / 4294967296)), this.pos + 4), this.pos += 8;
    }, writeVarint: function(t2) {
      (t2 = +t2 || 0) > 268435455 || t2 < 0 ? function(t3, e2) {
        var r2, n2;
        if (t3 >= 0 ? (r2 = t3 % 4294967296 | 0, n2 = t3 / 4294967296 | 0) : (n2 = ~(-t3 / 4294967296), 4294967295 ^ (r2 = ~(-t3 % 4294967296)) ? r2 = r2 + 1 | 0 : (r2 = 0, n2 = n2 + 1 | 0)), t3 >= 18446744073709552e3 || t3 < -18446744073709552e3)
          throw new Error("Given varint doesn't fit into 10 bytes");
        e2.realloc(10), function(t4, e3, r3) {
          r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, r3.buf[r3.pos] = 127 & (t4 >>>= 7);
        }(r2, 0, e2), function(t4, e3) {
          var r3 = (7 & t4) << 4;
          e3.buf[e3.pos++] |= r3 | ((t4 >>>= 3) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4)))));
        }(n2, e2);
      }(t2, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t2 | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = 127 & (t2 >>>= 7) | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = 127 & (t2 >>>= 7) | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = t2 >>> 7 & 127))));
    }, writeSVarint: function(t2) {
      this.writeVarint(t2 < 0 ? 2 * -t2 - 1 : 2 * t2);
    }, writeBoolean: function(t2) {
      this.writeVarint(Boolean(t2));
    }, writeString: function(t2) {
      t2 = String(t2), this.realloc(4 * t2.length), this.pos++;
      var e2 = this.pos;
      this.pos = function(t3, e3, r3) {
        for (var n2, i3, a2 = 0; a2 < e3.length; a2++) {
          if ((n2 = e3.charCodeAt(a2)) > 55295 && n2 < 57344) {
            if (!i3) {
              n2 > 56319 || a2 + 1 === e3.length ? (t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189) : i3 = n2;
              continue;
            }
            if (n2 < 56320) {
              t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189, i3 = n2;
              continue;
            }
            n2 = i3 - 55296 << 10 | n2 - 56320 | 65536, i3 = null;
          } else
            i3 && (t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189, i3 = null);
          n2 < 128 ? t3[r3++] = n2 : (n2 < 2048 ? t3[r3++] = n2 >> 6 | 192 : (n2 < 65536 ? t3[r3++] = n2 >> 12 | 224 : (t3[r3++] = n2 >> 18 | 240, t3[r3++] = n2 >> 12 & 63 | 128), t3[r3++] = n2 >> 6 & 63 | 128), t3[r3++] = 63 & n2 | 128);
        }
        return r3;
      }(this.buf, t2, this.pos);
      var r2 = this.pos - e2;
      r2 >= 128 && bl(e2, r2, this), this.pos = e2 - 1, this.writeVarint(r2), this.pos += r2;
    }, writeFloat: function(t2) {
      this.realloc(4), yl(this.buf, t2, this.pos, true, 23, 4), this.pos += 4;
    }, writeDouble: function(t2) {
      this.realloc(8), yl(this.buf, t2, this.pos, true, 52, 8), this.pos += 8;
    }, writeBytes: function(t2) {
      var e2 = t2.length;
      this.writeVarint(e2), this.realloc(e2);
      for (var r2 = 0; r2 < e2; r2++)
        this.buf[this.pos++] = t2[r2];
    }, writeRawMessage: function(t2, e2) {
      this.pos++;
      var r2 = this.pos;
      t2(e2, this);
      var n2 = this.pos - r2;
      n2 >= 128 && bl(r2, n2, this), this.pos = r2 - 1, this.writeVarint(n2), this.pos += n2;
    }, writeMessage: function(t2, e2, r2) {
      this.writeTag(t2, ml.Bytes), this.writeRawMessage(e2, r2);
    }, writePackedVarint: function(t2, e2) {
      e2.length && this.writeMessage(t2, wl, e2);
    }, writePackedSVarint: function(t2, e2) {
      e2.length && this.writeMessage(t2, _l, e2);
    }, writePackedBoolean: function(t2, e2) {
      e2.length && this.writeMessage(t2, zl, e2);
    }, writePackedFloat: function(t2, e2) {
      e2.length && this.writeMessage(t2, Al, e2);
    }, writePackedDouble: function(t2, e2) {
      e2.length && this.writeMessage(t2, Sl, e2);
    }, writePackedFixed32: function(t2, e2) {
      e2.length && this.writeMessage(t2, Il, e2);
    }, writePackedSFixed32: function(t2, e2) {
      e2.length && this.writeMessage(t2, kl, e2);
    }, writePackedFixed64: function(t2, e2) {
      e2.length && this.writeMessage(t2, Ml, e2);
    }, writePackedSFixed64: function(t2, e2) {
      e2.length && this.writeMessage(t2, Pl, e2);
    }, writeBytesField: function(t2, e2) {
      this.writeTag(t2, ml.Bytes), this.writeBytes(e2);
    }, writeFixed32Field: function(t2, e2) {
      this.writeTag(t2, ml.Fixed32), this.writeFixed32(e2);
    }, writeSFixed32Field: function(t2, e2) {
      this.writeTag(t2, ml.Fixed32), this.writeSFixed32(e2);
    }, writeFixed64Field: function(t2, e2) {
      this.writeTag(t2, ml.Fixed64), this.writeFixed64(e2);
    }, writeSFixed64Field: function(t2, e2) {
      this.writeTag(t2, ml.Fixed64), this.writeSFixed64(e2);
    }, writeVarintField: function(t2, e2) {
      this.writeTag(t2, ml.Varint), this.writeVarint(e2);
    }, writeSVarintField: function(t2, e2) {
      this.writeTag(t2, ml.Varint), this.writeSVarint(e2);
    }, writeStringField: function(t2, e2) {
      this.writeTag(t2, ml.Bytes), this.writeString(e2);
    }, writeFloatField: function(t2, e2) {
      this.writeTag(t2, ml.Fixed32), this.writeFloat(e2);
    }, writeDoubleField: function(t2, e2) {
      this.writeTag(t2, ml.Fixed64), this.writeDouble(e2);
    }, writeBooleanField: function(t2, e2) {
      this.writeVarintField(t2, Boolean(e2));
    } };
    var Fl = function(t2, e2) {
      var r2 = e2.pixelRatio, n2 = e2.version, i3 = e2.stretchX, a2 = e2.stretchY, o2 = e2.content;
      this.paddedRect = t2, this.pixelRatio = r2, this.stretchX = i3, this.stretchY = a2, this.content = o2, this.version = n2;
    }, Rl = { tl: { configurable: true }, br: { configurable: true }, tlbr: { configurable: true }, displaySize: { configurable: true } };
    Rl.tl.get = function() {
      return [this.paddedRect.x + 1, this.paddedRect.y + 1];
    }, Rl.br.get = function() {
      return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1];
    }, Rl.tlbr.get = function() {
      return this.tl.concat(this.br);
    }, Rl.displaySize.get = function() {
      return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio];
    }, Object.defineProperties(Fl.prototype, Rl);
    var Ol = function(t2, e2) {
      var r2 = {}, n2 = {};
      this.haveRenderCallbacks = [];
      var i3 = [];
      this.addImages(t2, r2, i3), this.addImages(e2, n2, i3);
      var a2 = Ll(i3), o2 = new Os({ width: a2.w || 1, height: a2.h || 1 });
      for (var s2 in t2) {
        var u2 = t2[s2], l2 = r2[s2].paddedRect;
        Os.copy(u2.data, o2, { x: 0, y: 0 }, { x: l2.x + 1, y: l2.y + 1 }, u2.data);
      }
      for (var p2 in e2) {
        var h2 = e2[p2], c2 = n2[p2].paddedRect, f2 = c2.x + 1, y2 = c2.y + 1, d2 = h2.data.width, m2 = h2.data.height;
        Os.copy(h2.data, o2, { x: 0, y: 0 }, { x: f2, y: y2 }, h2.data), Os.copy(h2.data, o2, { x: 0, y: m2 - 1 }, { x: f2, y: y2 - 1 }, { width: d2, height: 1 }), Os.copy(h2.data, o2, { x: 0, y: 0 }, { x: f2, y: y2 + m2 }, { width: d2, height: 1 }), Os.copy(h2.data, o2, { x: d2 - 1, y: 0 }, { x: f2 - 1, y: y2 }, { width: 1, height: m2 }), Os.copy(h2.data, o2, { x: 0, y: 0 }, { x: f2 + d2, y: y2 }, { width: 1, height: m2 });
      }
      this.image = o2, this.iconPositions = r2, this.patternPositions = n2;
    };
    Ol.prototype.addImages = function(t2, e2, r2) {
      for (var n2 in t2) {
        var i3 = t2[n2], a2 = { x: 0, y: 0, w: i3.data.width + 2, h: i3.data.height + 2 };
        r2.push(a2), e2[n2] = new Fl(a2, i3), i3.hasRenderCallback && this.haveRenderCallbacks.push(n2);
      }
    }, Ol.prototype.patchUpdatedImages = function(t2, e2) {
      for (var r2 in t2.dispatchRenderCallbacks(this.haveRenderCallbacks), t2.updatedImages)
        this.patchUpdatedImage(this.iconPositions[r2], t2.getImage(r2), e2), this.patchUpdatedImage(this.patternPositions[r2], t2.getImage(r2), e2);
    }, Ol.prototype.patchUpdatedImage = function(t2, e2, r2) {
      if (t2 && e2 && t2.version !== e2.version) {
        t2.version = e2.version;
        var n2 = t2.tl;
        r2.update(e2.data, void 0, { x: n2[0], y: n2[1] });
      }
    }, ti("ImagePosition", Fl), ti("ImageAtlas", Ol);
    var jl = { horizontal: 1, vertical: 2, horizontalOnly: 3 }, Ul = function() {
      this.scale = 1, this.fontStack = "", this.imageName = null;
    };
    Ul.forText = function(t2, e2) {
      var r2 = new Ul();
      return r2.scale = t2 || 1, r2.fontStack = e2, r2;
    }, Ul.forImage = function(t2) {
      var e2 = new Ul();
      return e2.imageName = t2, e2;
    };
    var ql = function() {
      this.text = "", this.sectionIndex = [], this.sections = [], this.imageSectionID = null;
    };
    function Nl(t2, e2, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2) {
      var m2, v2 = ql.fromFeature(t2, i3);
      h2 === jl.vertical && v2.verticalizePunctuation();
      var g2 = Ki.processBidirectionalText, x2 = Ki.processStyledBidirectionalText;
      if (g2 && 1 === v2.sections.length) {
        m2 = [];
        for (var b2 = 0, w2 = g2(v2.toString(), Hl(v2, l2, a2, e2, n2, f2, y2)); b2 < w2.length; b2 += 1) {
          var _2 = w2[b2], A2 = new ql();
          A2.text = _2, A2.sections = v2.sections;
          for (var S2 = 0; S2 < _2.length; S2++)
            A2.sectionIndex.push(0);
          m2.push(A2);
        }
      } else if (x2) {
        m2 = [];
        for (var z2 = 0, I2 = x2(v2.text, v2.sectionIndex, Hl(v2, l2, a2, e2, n2, f2, y2)); z2 < I2.length; z2 += 1) {
          var k2 = I2[z2], M2 = new ql();
          M2.text = k2[0], M2.sectionIndex = k2[1], M2.sections = v2.sections, m2.push(M2);
        }
      } else
        m2 = function(t3, e3) {
          for (var r3 = [], n3 = t3.text, i4 = 0, a3 = 0, o3 = e3; a3 < o3.length; a3 += 1) {
            var s3 = o3[a3];
            r3.push(t3.substring(i4, s3)), i4 = s3;
          }
          return i4 < n3.length && r3.push(t3.substring(i4, n3.length)), r3;
        }(v2, Hl(v2, l2, a2, e2, n2, f2, y2));
      var P2 = [], V2 = { positionedLines: P2, text: v2.toString(), top: p2[1], bottom: p2[1], left: p2[0], right: p2[0], writingMode: h2, iconsInText: false, verticalizable: false };
      return function(t3, e3, r3, n3, i4, a3, o3, s3, u3, l3, p3, h3) {
        for (var c3 = 0, f3 = -17, y3 = 0, d3 = 0, m3 = "right" === s3 ? 1 : "left" === s3 ? 0 : 0.5, v3 = 0, g3 = 0, x3 = i4; g3 < x3.length; g3 += 1) {
          var b3 = x3[g3];
          b3.trim();
          var w3 = b3.getMaxScale(), _3 = 24 * (w3 - 1), A3 = { positionedGlyphs: [], lineOffset: 0 };
          t3.positionedLines[v3] = A3;
          var S3 = A3.positionedGlyphs, z3 = 0;
          if (b3.length()) {
            for (var I3 = 0; I3 < b3.length(); I3++) {
              var k3 = b3.getSection(I3), M3 = b3.getSectionIndex(I3), P3 = b3.getCharCode(I3), V3 = 0, C2 = null, T2 = null, E2 = null, B2 = 24, D2 = !(u3 === jl.horizontal || !p3 && !Di(P3) || p3 && (Zl[P3] || (Z2 = P3, si(Z2) || ui(Z2) || li(Z2) || Mi(Z2) || Ti(Z2))));
              if (k3.imageName) {
                var L2 = n3[k3.imageName];
                if (!L2)
                  continue;
                E2 = k3.imageName, t3.iconsInText = t3.iconsInText || true, T2 = L2.paddedRect;
                var F2 = L2.displaySize;
                k3.scale = 24 * k3.scale / h3, V3 = _3 + (24 - F2[1] * k3.scale), B2 = (C2 = { width: F2[0], height: F2[1], left: 1, top: -3, advance: D2 ? F2[1] : F2[0], localGlyph: false }).advance;
                var R2 = D2 ? F2[0] * k3.scale - 24 * w3 : F2[1] * k3.scale - 24 * w3;
                R2 > 0 && R2 > z3 && (z3 = R2);
              } else {
                var O2 = r3[k3.fontStack], j2 = O2 && O2[P3];
                if (j2 && j2.rect)
                  T2 = j2.rect, C2 = j2.metrics;
                else {
                  var U2 = e3[k3.fontStack], q2 = U2 && U2[P3];
                  if (!q2)
                    continue;
                  C2 = q2.metrics;
                }
                V3 = 24 * (w3 - k3.scale);
              }
              D2 ? (t3.verticalizable = true, S3.push({ glyph: P3, imageName: E2, x: c3, y: f3 + V3, vertical: D2, scale: k3.scale, localGlyph: C2.localGlyph, fontStack: k3.fontStack, sectionIndex: M3, metrics: C2, rect: T2 }), c3 += B2 * k3.scale + l3) : (S3.push({ glyph: P3, imageName: E2, x: c3, y: f3 + V3, vertical: D2, scale: k3.scale, localGlyph: C2.localGlyph, fontStack: k3.fontStack, sectionIndex: M3, metrics: C2, rect: T2 }), c3 += C2.advance * k3.scale + l3);
            }
            0 !== S3.length && (y3 = Math.max(c3 - l3, y3), Wl(S3, 0, S3.length - 1, m3, z3)), c3 = 0;
            var N2 = a3 * w3 + z3;
            A3.lineOffset = Math.max(z3, _3), f3 += N2, d3 = Math.max(N2, d3), ++v3;
          } else
            f3 += a3, ++v3;
        }
        var Z2, G2 = f3 - -17, Y2 = Ql(o3), X2 = Y2.horizontalAlign, K2 = Y2.verticalAlign;
        (function(t4, e4, r4, n4, i5, a4, o4, s4, u4) {
          var l4, p4 = (e4 - r4) * i5;
          l4 = a4 !== o4 ? -s4 * n4 - -17 : (-n4 * u4 + 0.5) * o4;
          for (var h4 = 0, c4 = t4; h4 < c4.length; h4 += 1)
            for (var f4 = 0, y4 = c4[h4].positionedGlyphs; f4 < y4.length; f4 += 1) {
              var d4 = y4[f4];
              d4.x += p4, d4.y += l4;
            }
        })(t3.positionedLines, m3, X2, K2, y3, d3, a3, G2, i4.length), t3.top += -K2 * G2, t3.bottom = t3.top + G2, t3.left += -X2 * y3, t3.right = t3.left + y3;
      }(V2, e2, r2, n2, m2, o2, s2, u2, h2, l2, c2, d2), !function(t3) {
        for (var e3 = 0, r3 = t3; e3 < r3.length; e3 += 1)
          if (0 !== r3[e3].positionedGlyphs.length)
            return false;
        return true;
      }(P2) && V2;
    }
    ql.fromFeature = function(t2, e2) {
      for (var r2 = new ql(), n2 = 0; n2 < t2.sections.length; n2++) {
        var i3 = t2.sections[n2];
        i3.image ? r2.addImageSection(i3) : r2.addTextSection(i3, e2);
      }
      return r2;
    }, ql.prototype.length = function() {
      return this.text.length;
    }, ql.prototype.getSection = function(t2) {
      return this.sections[this.sectionIndex[t2]];
    }, ql.prototype.getSectionIndex = function(t2) {
      return this.sectionIndex[t2];
    }, ql.prototype.getCharCode = function(t2) {
      return this.text.charCodeAt(t2);
    }, ql.prototype.verticalizePunctuation = function() {
      this.text = function(t2) {
        for (var e2 = "", r2 = 0; r2 < t2.length; r2++) {
          var n2 = t2.charCodeAt(r2 + 1) || null, i3 = t2.charCodeAt(r2 - 1) || null;
          e2 += n2 && Li(n2) && !cl[t2[r2 + 1]] || i3 && Li(i3) && !cl[t2[r2 - 1]] || !cl[t2[r2]] ? t2[r2] : cl[t2[r2]];
        }
        return e2;
      }(this.text);
    }, ql.prototype.trim = function() {
      for (var t2 = 0, e2 = 0; e2 < this.text.length && Zl[this.text.charCodeAt(e2)]; e2++)
        t2++;
      for (var r2 = this.text.length, n2 = this.text.length - 1; n2 >= 0 && n2 >= t2 && Zl[this.text.charCodeAt(n2)]; n2--)
        r2--;
      this.text = this.text.substring(t2, r2), this.sectionIndex = this.sectionIndex.slice(t2, r2);
    }, ql.prototype.substring = function(t2, e2) {
      var r2 = new ql();
      return r2.text = this.text.substring(t2, e2), r2.sectionIndex = this.sectionIndex.slice(t2, e2), r2.sections = this.sections, r2;
    }, ql.prototype.toString = function() {
      return this.text;
    }, ql.prototype.getMaxScale = function() {
      var t2 = this;
      return this.sectionIndex.reduce(function(e2, r2) {
        return Math.max(e2, t2.sections[r2].scale);
      }, 0);
    }, ql.prototype.addTextSection = function(t2, e2) {
      this.text += t2.text, this.sections.push(Ul.forText(t2.scale, t2.fontStack || e2));
      for (var r2 = this.sections.length - 1, n2 = 0; n2 < t2.text.length; ++n2)
        this.sectionIndex.push(r2);
    }, ql.prototype.addImageSection = function(t2) {
      var e2 = t2.image ? t2.image.name : "";
      if (0 !== e2.length) {
        var r2 = this.getNextImageSectionCharCode();
        r2 ? (this.text += String.fromCharCode(r2), this.sections.push(Ul.forImage(e2)), this.sectionIndex.push(this.sections.length - 1)) : S("Reached maximum number of images 6401");
      } else
        S("Can't add FormattedSection with an empty image.");
    }, ql.prototype.getNextImageSectionCharCode = function() {
      return this.imageSectionID ? this.imageSectionID >= 63743 ? null : ++this.imageSectionID : (this.imageSectionID = 57344, this.imageSectionID);
    };
    var Zl = { 9: true, 10: true, 11: true, 12: true, 13: true, 32: true }, Gl = {};
    function Yl(t2, e2, r2, n2, i3, a2) {
      if (e2.imageName) {
        var o2 = n2[e2.imageName];
        return o2 ? o2.displaySize[0] * e2.scale * 24 / a2 + i3 : 0;
      }
      var s2 = r2[e2.fontStack], u2 = s2 && s2[t2];
      return u2 ? u2.metrics.advance * e2.scale + i3 : 0;
    }
    function Xl(t2, e2, r2, n2) {
      var i3 = Math.pow(t2 - e2, 2);
      return n2 ? t2 < e2 ? i3 / 2 : 2 * i3 : i3 + Math.abs(r2) * r2;
    }
    function Kl(t2, e2, r2) {
      var n2 = 0;
      return 10 === t2 && (n2 -= 1e4), r2 && (n2 += 150), 40 !== t2 && 65288 !== t2 || (n2 += 50), 41 !== e2 && 65289 !== e2 || (n2 += 50), n2;
    }
    function Jl(t2, e2, r2, n2, i3, a2) {
      for (var o2 = null, s2 = Xl(e2, r2, i3, a2), u2 = 0, l2 = n2; u2 < l2.length; u2 += 1) {
        var p2 = l2[u2], h2 = Xl(e2 - p2.x, r2, i3, a2) + p2.badness;
        h2 <= s2 && (o2 = p2, s2 = h2);
      }
      return { index: t2, x: e2, priorBreak: o2, badness: s2 };
    }
    function Hl(t2, e2, r2, n2, i3, a2, o2) {
      if ("point" !== a2)
        return [];
      if (!t2)
        return [];
      for (var s2, u2 = [], l2 = function(t3, e3, r3, n3, i4, a3) {
        for (var o3 = 0, s3 = 0; s3 < t3.length(); s3++) {
          var u3 = t3.getSection(s3);
          o3 += Yl(t3.getCharCode(s3), u3, n3, i4, e3, a3);
        }
        return o3 / Math.max(1, Math.ceil(o3 / r3));
      }(t2, e2, r2, n2, i3, o2), p2 = t2.text.indexOf("\u200B") >= 0, h2 = 0, c2 = 0; c2 < t2.length(); c2++) {
        var f2 = t2.getSection(c2), y2 = t2.getCharCode(c2);
        if (Zl[y2] || (h2 += Yl(y2, f2, n2, i3, e2, o2)), c2 < t2.length() - 1) {
          var d2 = !((s2 = y2) < 11904 || !(vi(s2) || mi(s2) || Vi(s2) || ki(s2) || wi(s2) || pi(s2) || gi(s2) || fi(s2) || _i(s2) || Ai(s2) || bi(s2) || Ei(s2) || yi(s2) || ci(s2) || hi(s2) || xi(s2) || di(s2) || Pi(s2) || zi(s2) || Si(s2)));
          (Gl[y2] || d2 || f2.imageName) && u2.push(Jl(c2 + 1, h2, l2, u2, Kl(y2, t2.getCharCode(c2 + 1), d2 && p2), false));
        }
      }
      return function t3(e3) {
        return e3 ? t3(e3.priorBreak).concat(e3.index) : [];
      }(Jl(t2.length(), h2, l2, u2, 0, true));
    }
    function Ql(t2) {
      var e2 = 0.5, r2 = 0.5;
      switch (t2) {
        case "right":
        case "top-right":
        case "bottom-right":
          e2 = 1;
          break;
        case "left":
        case "top-left":
        case "bottom-left":
          e2 = 0;
      }
      switch (t2) {
        case "bottom":
        case "bottom-right":
        case "bottom-left":
          r2 = 1;
          break;
        case "top":
        case "top-right":
        case "top-left":
          r2 = 0;
      }
      return { horizontalAlign: e2, verticalAlign: r2 };
    }
    function Wl(t2, e2, r2, n2, i3) {
      if (n2 || i3)
        for (var a2 = t2[r2], o2 = (t2[r2].x + a2.metrics.advance * a2.scale) * n2, s2 = e2; s2 <= r2; s2++)
          t2[s2].x -= o2, t2[s2].y += i3;
    }
    function $l(t2, e2, r2, n2, i3, a2) {
      var o2, s2 = t2.image;
      if (s2.content) {
        var u2 = s2.content, l2 = s2.pixelRatio || 1;
        o2 = [u2[0] / l2, u2[1] / l2, s2.displaySize[0] - u2[2] / l2, s2.displaySize[1] - u2[3] / l2];
      }
      var p2, h2, c2, f2, y2 = e2.left * a2, d2 = e2.right * a2;
      "width" === r2 || "both" === r2 ? (f2 = i3[0] + y2 - n2[3], h2 = i3[0] + d2 + n2[1]) : h2 = (f2 = i3[0] + (y2 + d2 - s2.displaySize[0]) / 2) + s2.displaySize[0];
      var m2 = e2.top * a2, v2 = e2.bottom * a2;
      return "height" === r2 || "both" === r2 ? (p2 = i3[1] + m2 - n2[0], c2 = i3[1] + v2 + n2[2]) : c2 = (p2 = i3[1] + (m2 + v2 - s2.displaySize[1]) / 2) + s2.displaySize[1], { image: s2, top: p2, right: h2, bottom: c2, left: f2, collisionPadding: o2 };
    }
    Gl[10] = true, Gl[32] = true, Gl[38] = true, Gl[40] = true, Gl[41] = true, Gl[43] = true, Gl[45] = true, Gl[47] = true, Gl[173] = true, Gl[183] = true, Gl[8203] = true, Gl[8208] = true, Gl[8211] = true, Gl[8231] = true;
    var tp = function(t2) {
      function e2(e3, r2, n2, i3) {
        t2.call(this, e3, r2), this.angle = n2, void 0 !== i3 && (this.segment = i3);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.clone = function() {
        return new e2(this.x, this.y, this.angle, this.segment);
      }, e2;
    }(i2);
    function ep(t2, e2) {
      var r2 = e2.expression;
      if ("constant" === r2.kind)
        return { kind: "constant", layoutSize: r2.evaluate(new Ji(t2 + 1)) };
      if ("source" === r2.kind)
        return { kind: "source" };
      for (var n2 = r2.zoomStops, i3 = r2.interpolationType, a2 = 0; a2 < n2.length && n2[a2] <= t2; )
        a2++;
      for (var o2 = a2 = Math.max(0, a2 - 1); o2 < n2.length && n2[o2] < t2 + 1; )
        o2++;
      o2 = Math.min(n2.length - 1, o2);
      var s2 = n2[a2], u2 = n2[o2];
      return "composite" === r2.kind ? { kind: "composite", minZoom: s2, maxZoom: u2, interpolationType: i3 } : { kind: "camera", minZoom: s2, maxZoom: u2, minSize: r2.evaluate(new Ji(s2)), maxSize: r2.evaluate(new Ji(u2)), interpolationType: i3 };
    }
    function rp(t2, e2, r2) {
      var n2 = e2.uSize, i3 = r2.lowerSize;
      return "source" === t2.kind ? i3 / 128 : "composite" === t2.kind ? or(i3 / 128, r2.upperSize / 128, e2.uSizeT) : n2;
    }
    function np(t2, e2) {
      var r2 = 0, n2 = 0;
      if ("constant" === t2.kind)
        n2 = t2.layoutSize;
      else if ("source" !== t2.kind) {
        var i3 = t2.interpolationType, a2 = i3 ? u(wr.interpolationFactor(i3, e2, t2.minZoom, t2.maxZoom), 0, 1) : 0;
        "camera" === t2.kind ? n2 = or(t2.minSize, t2.maxSize, a2) : r2 = a2;
      }
      return { uSizeT: r2, uSize: n2 };
    }
    ti("Anchor", tp);
    var ip = Object.freeze({ __proto__: null, getSizeData: ep, evaluateSizeForFeature: rp, evaluateSizeForZoom: np, SIZE_PACK_FACTOR: 128 });
    function ap(t2, e2, r2, n2, i3) {
      if (void 0 === e2.segment)
        return true;
      for (var a2 = e2, o2 = e2.segment + 1, s2 = 0; s2 > -r2 / 2; ) {
        if (--o2 < 0)
          return false;
        s2 -= t2[o2].dist(a2), a2 = t2[o2];
      }
      s2 += t2[o2].dist(t2[o2 + 1]), o2++;
      for (var u2 = [], l2 = 0; s2 < r2 / 2; ) {
        var p2 = t2[o2], h2 = t2[o2 + 1];
        if (!h2)
          return false;
        var c2 = t2[o2 - 1].angleTo(p2) - p2.angleTo(h2);
        for (c2 = Math.abs((c2 + 3 * Math.PI) % (2 * Math.PI) - Math.PI), u2.push({ distance: s2, angleDelta: c2 }), l2 += c2; s2 - u2[0].distance > n2; )
          l2 -= u2.shift().angleDelta;
        if (l2 > i3)
          return false;
        o2++, s2 += p2.dist(h2);
      }
      return true;
    }
    function op(t2) {
      for (var e2 = 0, r2 = 0; r2 < t2.length - 1; r2++)
        e2 += t2[r2].dist(t2[r2 + 1]);
      return e2;
    }
    function sp(t2, e2, r2) {
      return t2 ? 0.6 * e2 * r2 : 0;
    }
    function up(t2, e2) {
      return Math.max(t2 ? t2.right - t2.left : 0, e2 ? e2.right - e2.left : 0);
    }
    function lp(t2, e2, r2, n2, i3, a2) {
      for (var o2 = sp(r2, i3, a2), s2 = up(r2, n2) * a2, u2 = 0, l2 = op(t2) / 2, p2 = 0; p2 < t2.length - 1; p2++) {
        var h2 = t2[p2], c2 = t2[p2 + 1], f2 = h2.dist(c2);
        if (u2 + f2 > l2) {
          var y2 = (l2 - u2) / f2, d2 = or(h2.x, c2.x, y2), m2 = or(h2.y, c2.y, y2), v2 = new tp(d2, m2, c2.angleTo(h2), p2);
          return v2._round(), !o2 || ap(t2, v2, s2, o2, e2) ? v2 : void 0;
        }
        u2 += f2;
      }
    }
    function pp(t2, e2, r2, n2, i3, a2, o2, s2, u2) {
      var l2 = sp(n2, a2, o2), p2 = up(n2, i3), h2 = p2 * o2, c2 = 0 === t2[0].x || t2[0].x === u2 || 0 === t2[0].y || t2[0].y === u2;
      return e2 - h2 < e2 / 4 && (e2 = h2 + e2 / 4), function t3(e3, r3, n3, i4, a3, o3, s3, u3, l3) {
        for (var p3 = o3 / 2, h3 = op(e3), c3 = 0, f2 = r3 - n3, y2 = [], d2 = 0; d2 < e3.length - 1; d2++) {
          for (var m2 = e3[d2], v2 = e3[d2 + 1], g2 = m2.dist(v2), x2 = v2.angleTo(m2); f2 + n3 < c3 + g2; ) {
            var b2 = ((f2 += n3) - c3) / g2, w2 = or(m2.x, v2.x, b2), _2 = or(m2.y, v2.y, b2);
            if (w2 >= 0 && w2 < l3 && _2 >= 0 && _2 < l3 && f2 - p3 >= 0 && f2 + p3 <= h3) {
              var A2 = new tp(w2, _2, x2, d2);
              A2._round(), i4 && !ap(e3, A2, o3, i4, a3) || y2.push(A2);
            }
          }
          c3 += g2;
        }
        return u3 || y2.length || s3 || (y2 = t3(e3, c3 / 2, n3, i4, a3, o3, s3, true, l3)), y2;
      }(t2, c2 ? e2 / 2 * s2 % e2 : (p2 / 2 + 2 * a2) * o2 * s2 % e2, e2, l2, r2, h2, c2, false, u2);
    }
    function hp(t2, e2, r2, n2, a2) {
      for (var o2 = [], s2 = 0; s2 < t2.length; s2++)
        for (var u2 = t2[s2], l2 = void 0, p2 = 0; p2 < u2.length - 1; p2++) {
          var h2 = u2[p2], c2 = u2[p2 + 1];
          h2.x < e2 && c2.x < e2 || (h2.x < e2 ? h2 = new i2(e2, h2.y + (e2 - h2.x) / (c2.x - h2.x) * (c2.y - h2.y))._round() : c2.x < e2 && (c2 = new i2(e2, h2.y + (e2 - h2.x) / (c2.x - h2.x) * (c2.y - h2.y))._round()), h2.y < r2 && c2.y < r2 || (h2.y < r2 ? h2 = new i2(h2.x + (r2 - h2.y) / (c2.y - h2.y) * (c2.x - h2.x), r2)._round() : c2.y < r2 && (c2 = new i2(h2.x + (r2 - h2.y) / (c2.y - h2.y) * (c2.x - h2.x), r2)._round()), h2.x >= n2 && c2.x >= n2 || (h2.x >= n2 ? h2 = new i2(n2, h2.y + (n2 - h2.x) / (c2.x - h2.x) * (c2.y - h2.y))._round() : c2.x >= n2 && (c2 = new i2(n2, h2.y + (n2 - h2.x) / (c2.x - h2.x) * (c2.y - h2.y))._round()), h2.y >= a2 && c2.y >= a2 || (h2.y >= a2 ? h2 = new i2(h2.x + (a2 - h2.y) / (c2.y - h2.y) * (c2.x - h2.x), a2)._round() : c2.y >= a2 && (c2 = new i2(h2.x + (a2 - h2.y) / (c2.y - h2.y) * (c2.x - h2.x), a2)._round()), l2 && h2.equals(l2[l2.length - 1]) || o2.push(l2 = [h2]), l2.push(c2)))));
        }
      return o2;
    }
    var cp = dp, fp = dp, yp = 1e20;
    function dp(t2, e2, r2, n2, i3, a2) {
      this.fontSize = t2 || 24, this.buffer = void 0 === e2 ? 3 : e2, this.cutoff = n2 || 0.25, this.fontFamily = i3 || "sans-serif", this.fontWeight = a2 || "normal", this.radius = r2 || 8;
      var o2 = this.size = this.fontSize + 2 * this.buffer, s2 = o2 + 2 * this.buffer;
      this.canvas = document.createElement("canvas"), this.canvas.width = this.canvas.height = o2, this.ctx = this.canvas.getContext("2d"), this.ctx.font = this.fontWeight + " " + this.fontSize + "px " + this.fontFamily, this.ctx.textAlign = "left", this.ctx.fillStyle = "black", this.gridOuter = new Float64Array(s2 * s2), this.gridInner = new Float64Array(s2 * s2), this.f = new Float64Array(s2), this.z = new Float64Array(s2 + 1), this.v = new Uint16Array(s2), this.useMetrics = void 0 !== this.ctx.measureText("A").actualBoundingBoxLeft, this.middle = Math.round(o2 / 2 * (navigator.userAgent.indexOf("Gecko/") >= 0 ? 1.2 : 1));
    }
    function mp(t2, e2, r2, n2, i3, a2) {
      for (var o2 = 0; o2 < e2; o2++)
        vp(t2, o2, e2, r2, n2, i3, a2);
      for (var s2 = 0; s2 < r2; s2++)
        vp(t2, s2 * e2, 1, e2, n2, i3, a2);
    }
    function vp(t2, e2, r2, n2, i3, a2, o2) {
      var s2, u2, l2, p2;
      for (a2[0] = 0, o2[0] = -yp, o2[1] = yp, s2 = 0; s2 < n2; s2++)
        i3[s2] = t2[e2 + s2 * r2];
      for (s2 = 1, u2 = 0, l2 = 0; s2 < n2; s2++) {
        do {
          l2 = (i3[s2] - i3[p2 = a2[u2]] + s2 * s2 - p2 * p2) / (s2 - p2) / 2;
        } while (l2 <= o2[u2] && --u2 > -1);
        a2[++u2] = s2, o2[u2] = l2, o2[u2 + 1] = yp;
      }
      for (s2 = 0, u2 = 0; s2 < n2; s2++) {
        for (; o2[u2 + 1] < s2; )
          u2++;
        t2[e2 + s2 * r2] = i3[p2 = a2[u2]] + (s2 - p2) * (s2 - p2);
      }
    }
    dp.prototype._draw = function(t2, e2) {
      var r2, n2, i3, a2, o2, s2, u2, l2, p2, h2 = this.ctx.measureText(t2), c2 = h2.width, f2 = 2 * this.buffer;
      e2 && this.useMetrics ? (o2 = Math.floor(h2.actualBoundingBoxAscent), l2 = this.buffer + Math.ceil(h2.actualBoundingBoxAscent), s2 = this.buffer, u2 = this.buffer, r2 = (n2 = Math.min(this.size, Math.ceil(h2.actualBoundingBoxRight - h2.actualBoundingBoxLeft))) + f2, i3 = (a2 = Math.min(this.size - s2, Math.ceil(h2.actualBoundingBoxAscent + h2.actualBoundingBoxDescent))) + f2, this.ctx.textBaseline = "alphabetic") : (r2 = n2 = this.size, i3 = a2 = this.size, o2 = 19 * this.fontSize / 24, s2 = u2 = 0, l2 = this.middle, this.ctx.textBaseline = "middle"), n2 && a2 && (this.ctx.clearRect(u2, s2, n2, a2), this.ctx.fillText(t2, this.buffer, l2), p2 = this.ctx.getImageData(u2, s2, n2, a2));
      var y2 = new Uint8ClampedArray(r2 * i3);
      return function(t3, e3, r3, n3, i4, a3, o3) {
        a3.fill(yp, 0, e3 * r3), o3.fill(0, 0, e3 * r3);
        for (var s3 = (e3 - n3) / 2, u3 = 0; u3 < i4; u3++)
          for (var l3 = 0; l3 < n3; l3++) {
            var p3 = (u3 + s3) * e3 + l3 + s3, h3 = t3.data[4 * (u3 * n3 + l3) + 3] / 255;
            if (1 === h3)
              a3[p3] = 0, o3[p3] = yp;
            else if (0 === h3)
              a3[p3] = yp, o3[p3] = 0;
            else {
              var c3 = Math.max(0, 0.5 - h3), f3 = Math.max(0, h3 - 0.5);
              a3[p3] = c3 * c3, o3[p3] = f3 * f3;
            }
          }
      }(p2, r2, i3, n2, a2, this.gridOuter, this.gridInner), mp(this.gridOuter, r2, i3, this.f, this.v, this.z), mp(this.gridInner, r2, i3, this.f, this.v, this.z), function(t3, e3, r3, n3, i4, a3, o3) {
        for (var s3 = 0; s3 < e3 * r3; s3++) {
          var u3 = Math.sqrt(n3[s3]) - Math.sqrt(i4[s3]);
          t3[s3] = Math.round(255 - 255 * (u3 / a3 + o3));
        }
      }(y2, r2, i3, this.gridOuter, this.gridInner, this.radius, this.cutoff), { data: y2, metrics: { width: n2, height: a2, sdfWidth: r2, sdfHeight: i3, top: o2, left: 0, advance: c2 } };
    }, dp.prototype.draw = function(t2) {
      return this._draw(t2, false).data;
    }, dp.prototype.drawWithMetrics = function(t2) {
      return this._draw(t2, true);
    }, cp.default = fp;
    var gp = { none: 0, ideographs: 1, all: 2 }, xp = function(t2, e2, r2) {
      this.requestManager = t2, this.localGlyphMode = e2, this.localFontFamily = r2, this.entries = {}, this.localGlyphs = { 200: {}, 400: {}, 500: {}, 900: {} };
    };
    function bp(t2, e2, r2, n2) {
      var a2 = [], o2 = t2.image, s2 = o2.pixelRatio, u2 = o2.paddedRect.w - 2, l2 = o2.paddedRect.h - 2, p2 = t2.right - t2.left, h2 = t2.bottom - t2.top, c2 = o2.stretchX || [[0, u2]], f2 = o2.stretchY || [[0, l2]], y2 = function(t3, e3) {
        return t3 + e3[1] - e3[0];
      }, d2 = c2.reduce(y2, 0), m2 = f2.reduce(y2, 0), v2 = u2 - d2, g2 = l2 - m2, x2 = 0, b2 = d2, w2 = 0, _2 = m2, A2 = 0, S2 = v2, z2 = 0, I2 = g2;
      if (o2.content && n2) {
        var k2 = o2.content;
        x2 = wp(c2, 0, k2[0]), w2 = wp(f2, 0, k2[1]), b2 = wp(c2, k2[0], k2[2]), _2 = wp(f2, k2[1], k2[3]), A2 = k2[0] - x2, z2 = k2[1] - w2, S2 = k2[2] - k2[0] - b2, I2 = k2[3] - k2[1] - _2;
      }
      var M2 = function(n3, a3, u3, l3) {
        var c3 = Ap(n3.stretch - x2, b2, p2, t2.left), f3 = Sp(n3.fixed - A2, S2, n3.stretch, d2), y3 = Ap(a3.stretch - w2, _2, h2, t2.top), v3 = Sp(a3.fixed - z2, I2, a3.stretch, m2), g3 = Ap(u3.stretch - x2, b2, p2, t2.left), k3 = Sp(u3.fixed - A2, S2, u3.stretch, d2), M3 = Ap(l3.stretch - w2, _2, h2, t2.top), P3 = Sp(l3.fixed - z2, I2, l3.stretch, m2), V3 = new i2(c3, y3), C3 = new i2(g3, y3), T3 = new i2(g3, M3), E3 = new i2(c3, M3), B3 = new i2(f3 / s2, v3 / s2), D2 = new i2(k3 / s2, P3 / s2), L2 = e2 * Math.PI / 180;
        if (L2) {
          var F2 = Math.sin(L2), R2 = Math.cos(L2), O2 = [R2, -F2, F2, R2];
          V3._matMult(O2), C3._matMult(O2), E3._matMult(O2), T3._matMult(O2);
        }
        var j2 = n3.stretch + n3.fixed, U2 = a3.stretch + a3.fixed;
        return { tl: V3, tr: C3, bl: E3, br: T3, tex: { x: o2.paddedRect.x + 1 + j2, y: o2.paddedRect.y + 1 + U2, w: u3.stretch + u3.fixed - j2, h: l3.stretch + l3.fixed - U2 }, writingMode: void 0, glyphOffset: [0, 0], sectionIndex: 0, pixelOffsetTL: B3, pixelOffsetBR: D2, minFontScaleX: S2 / s2 / p2, minFontScaleY: I2 / s2 / h2, isSDF: r2 };
      };
      if (n2 && (o2.stretchX || o2.stretchY))
        for (var P2 = _p(c2, v2, d2), V2 = _p(f2, g2, m2), C2 = 0; C2 < P2.length - 1; C2++)
          for (var T2 = P2[C2], E2 = P2[C2 + 1], B2 = 0; B2 < V2.length - 1; B2++)
            a2.push(M2(T2, V2[B2], E2, V2[B2 + 1]));
      else
        a2.push(M2({ fixed: 0, stretch: -1 }, { fixed: 0, stretch: -1 }, { fixed: 0, stretch: u2 + 1 }, { fixed: 0, stretch: l2 + 1 }));
      return a2;
    }
    function wp(t2, e2, r2) {
      for (var n2 = 0, i3 = 0, a2 = t2; i3 < a2.length; i3 += 1) {
        var o2 = a2[i3];
        n2 += Math.max(e2, Math.min(r2, o2[1])) - Math.max(e2, Math.min(r2, o2[0]));
      }
      return n2;
    }
    function _p(t2, e2, r2) {
      for (var n2 = [{ fixed: -1, stretch: 0 }], i3 = 0, a2 = t2; i3 < a2.length; i3 += 1) {
        var o2 = a2[i3], s2 = o2[0], u2 = o2[1], l2 = n2[n2.length - 1];
        n2.push({ fixed: s2 - l2.stretch, stretch: l2.stretch }), n2.push({ fixed: s2 - l2.stretch, stretch: l2.stretch + (u2 - s2) });
      }
      return n2.push({ fixed: e2 + 1, stretch: r2 }), n2;
    }
    function Ap(t2, e2, r2, n2) {
      return t2 / e2 * r2 + n2;
    }
    function Sp(t2, e2, r2, n2) {
      return t2 - e2 * r2 / n2;
    }
    xp.prototype.setURL = function(t2) {
      this.url = t2;
    }, xp.prototype.getGlyphs = function(t2, e2) {
      var r2 = this, n2 = [];
      for (var i3 in t2)
        for (var a2 = 0, o2 = t2[i3]; a2 < o2.length; a2 += 1)
          n2.push({ stack: i3, id: o2[a2] });
      p(n2, function(t3, e3) {
        var n3 = t3.stack, i4 = t3.id, a3 = r2.entries[n3];
        a3 || (a3 = r2.entries[n3] = { glyphs: {}, requests: {}, ranges: {} });
        var o3 = a3.glyphs[i4];
        if (void 0 === o3) {
          if (o3 = r2._tinySDF(a3, n3, i4))
            return a3.glyphs[i4] = o3, void e3(null, { stack: n3, id: i4, glyph: o3 });
          var s2 = Math.floor(i4 / 256);
          if (256 * s2 > 65535)
            e3(new Error("glyphs > 65535 not supported"));
          else if (a3.ranges[s2])
            e3(null, { stack: n3, id: i4, glyph: o3 });
          else {
            var u2 = a3.requests[s2];
            u2 || (u2 = a3.requests[s2] = [], xp.loadGlyphRange(n3, s2, r2.url, r2.requestManager, function(t4, e4) {
              if (e4) {
                for (var n4 in e4)
                  r2._doesCharSupportLocalGlyph(+n4) || (a3.glyphs[+n4] = e4[+n4], n4 >= 19968 && n4 <= 40943 && (a3.glyphs[+n4].metrics.top = -4));
                a3.ranges[s2] = true;
              }
              for (var i5 = 0, o4 = u2; i5 < o4.length; i5 += 1)
                (0, o4[i5])(t4, e4);
              delete a3.requests[s2];
            })), u2.push(function(t4, r3) {
              t4 ? e3(t4) : r3 && e3(null, { stack: n3, id: i4, glyph: r3[i4] || null });
            });
          }
        } else
          e3(null, { stack: n3, id: i4, glyph: o3 });
      }, function(t3, r3) {
        if (t3)
          e2(t3);
        else if (r3) {
          for (var n3 = {}, i4 = 0, a3 = r3; i4 < a3.length; i4 += 1) {
            var o3 = a3[i4], s2 = o3.stack, u2 = o3.id, l2 = o3.glyph;
            (n3[s2] || (n3[s2] = {}))[u2] = l2 && { id: l2.id, bitmap: l2.bitmap.clone(), metrics: l2.metrics };
          }
          e2(null, n3);
        }
      });
    }, xp.prototype._doesCharSupportLocalGlyph = function(t2) {
      return this.localGlyphMode !== gp.none && (this.localGlyphMode === gp.all ? !!this.localFontFamily : !!this.localFontFamily && (Ai(t2) || Ii(t2) || yi(t2) || di(t2)));
    }, xp.prototype._tinySDF = function(t2, e2, r2) {
      var n2 = this.localFontFamily;
      if (n2 && this._doesCharSupportLocalGlyph(r2)) {
        var i3 = t2.tinySDF;
        if (!i3) {
          var a2 = "400";
          /bold/i.test(e2) ? a2 = "900" : /medium/i.test(e2) ? a2 = "500" : /light/i.test(e2) && (a2 = "200"), i3 = t2.tinySDF = new xp.TinySDF(48, 6, 16, 0.22, n2, a2);
        }
        if (this.localGlyphs[i3.fontWeight][r2])
          return this.localGlyphs[i3.fontWeight][r2];
        var o2 = i3.drawWithMetrics(String.fromCharCode(r2)), s2 = o2.metrics, u2 = s2.width, l2 = s2.height, p2 = s2.left, h2 = s2.top, c2 = s2.advance;
        return this.localGlyphs[i3.fontWeight][r2] = { id: r2, bitmap: new Rs({ width: s2.sdfWidth, height: s2.sdfHeight }, o2.data), metrics: { width: u2 / 2, height: l2 / 2, left: p2 / 2, top: h2 / 2 - 27 + (r2 >= 19968 && r2 <= 40943 ? 4 : 0), advance: c2 / 2, localGlyph: true } };
      }
    }, xp.loadGlyphRange = function(t2, e2, r2, n2, i3) {
      var a2 = 256 * e2, o2 = a2 + 255, s2 = n2.transformRequest(n2.normalizeGlyphsURL(r2).replace("{fontstack}", t2).replace("{range}", a2 + "-" + o2), Ct.Glyphs);
      Ft(s2, function(t3, e3) {
        if (t3)
          i3(t3);
        else if (e3) {
          for (var r3 = {}, n3 = 0, a3 = function(t4) {
            return new dl(t4).readFields(El, []);
          }(e3); n3 < a3.length; n3 += 1) {
            var o3 = a3[n3];
            r3[o3.id] = o3;
          }
          i3(null, r3);
        }
      });
    }, xp.TinySDF = cp;
    var zp = function(t2, e2, r2, n2, a2, o2, s2, u2, l2, p2) {
      if (this.boxStartIndex = t2.length, l2) {
        var h2 = o2.top, c2 = o2.bottom, f2 = o2.collisionPadding;
        f2 && (h2 -= f2[1], c2 += f2[3]);
        var y2 = c2 - h2;
        y2 > 0 && (y2 = Math.max(10, y2), this.circleDiameter = y2);
      } else {
        var d2 = o2.top * s2 - u2, m2 = o2.bottom * s2 + u2, v2 = o2.left * s2 - u2, g2 = o2.right * s2 + u2, x2 = o2.collisionPadding;
        if (x2 && (v2 -= x2[0] * s2, d2 -= x2[1] * s2, g2 += x2[2] * s2, m2 += x2[3] * s2), p2) {
          var b2 = new i2(v2, d2), w2 = new i2(g2, d2), _2 = new i2(v2, m2), A2 = new i2(g2, m2), S2 = p2 * Math.PI / 180;
          b2._rotate(S2), w2._rotate(S2), _2._rotate(S2), A2._rotate(S2), v2 = Math.min(b2.x, w2.x, _2.x, A2.x), g2 = Math.max(b2.x, w2.x, _2.x, A2.x), d2 = Math.min(b2.y, w2.y, _2.y, A2.y), m2 = Math.max(b2.y, w2.y, _2.y, A2.y);
        }
        t2.emplaceBack(e2.x, e2.y, v2, d2, g2, m2, r2, n2, a2);
      }
      this.boxEndIndex = t2.length;
    }, Ip = function(t2, e2) {
      if (void 0 === t2 && (t2 = []), void 0 === e2 && (e2 = kp), this.data = t2, this.length = this.data.length, this.compare = e2, this.length > 0)
        for (var r2 = (this.length >> 1) - 1; r2 >= 0; r2--)
          this._down(r2);
    };
    function kp(t2, e2) {
      return t2 < e2 ? -1 : t2 > e2 ? 1 : 0;
    }
    function Mp(t2, e2, r2) {
      void 0 === e2 && (e2 = 1), void 0 === r2 && (r2 = false);
      for (var n2 = 1 / 0, a2 = 1 / 0, o2 = -1 / 0, s2 = -1 / 0, u2 = t2[0], l2 = 0; l2 < u2.length; l2++) {
        var p2 = u2[l2];
        (!l2 || p2.x < n2) && (n2 = p2.x), (!l2 || p2.y < a2) && (a2 = p2.y), (!l2 || p2.x > o2) && (o2 = p2.x), (!l2 || p2.y > s2) && (s2 = p2.y);
      }
      var h2 = Math.min(o2 - n2, s2 - a2), c2 = h2 / 2, f2 = new Ip([], Pp);
      if (0 === h2)
        return new i2(n2, a2);
      for (var y2 = n2; y2 < o2; y2 += h2)
        for (var d2 = a2; d2 < s2; d2 += h2)
          f2.push(new Vp(y2 + c2, d2 + c2, c2, t2));
      for (var m2 = function(t3) {
        for (var e3 = 0, r3 = 0, n3 = 0, i3 = t3[0], a3 = 0, o3 = i3.length, s3 = o3 - 1; a3 < o3; s3 = a3++) {
          var u3 = i3[a3], l3 = i3[s3], p3 = u3.x * l3.y - l3.x * u3.y;
          r3 += (u3.x + l3.x) * p3, n3 += (u3.y + l3.y) * p3, e3 += 3 * p3;
        }
        return new Vp(r3 / e3, n3 / e3, 0, t3);
      }(t2), v2 = f2.length; f2.length; ) {
        var g2 = f2.pop();
        (g2.d > m2.d || !m2.d) && (m2 = g2, r2 && console.log("found best %d after %d probes", Math.round(1e4 * g2.d) / 1e4, v2)), g2.max - m2.d <= e2 || (f2.push(new Vp(g2.p.x - (c2 = g2.h / 2), g2.p.y - c2, c2, t2)), f2.push(new Vp(g2.p.x + c2, g2.p.y - c2, c2, t2)), f2.push(new Vp(g2.p.x - c2, g2.p.y + c2, c2, t2)), f2.push(new Vp(g2.p.x + c2, g2.p.y + c2, c2, t2)), v2 += 4);
      }
      return r2 && (console.log("num probes: " + v2), console.log("best distance: " + m2.d)), m2.p;
    }
    function Pp(t2, e2) {
      return e2.max - t2.max;
    }
    function Vp(t2, e2, r2, n2) {
      this.p = new i2(t2, e2), this.h = r2, this.d = function(t3, e3) {
        for (var r3 = false, n3 = 1 / 0, i3 = 0; i3 < e3.length; i3++)
          for (var a2 = e3[i3], o2 = 0, s2 = a2.length, u2 = s2 - 1; o2 < s2; u2 = o2++) {
            var l2 = a2[o2], p2 = a2[u2];
            l2.y > t3.y != p2.y > t3.y && t3.x < (p2.x - l2.x) * (t3.y - l2.y) / (p2.y - l2.y) + l2.x && (r3 = !r3), n3 = Math.min(n3, Jo(t3, l2, p2));
          }
        return (r3 ? 1 : -1) * Math.sqrt(n3);
      }(this.p, n2), this.max = this.d + this.h * Math.SQRT2;
    }
    Ip.prototype.push = function(t2) {
      this.data.push(t2), this.length++, this._up(this.length - 1);
    }, Ip.prototype.pop = function() {
      if (0 !== this.length) {
        var t2 = this.data[0], e2 = this.data.pop();
        return this.length--, this.length > 0 && (this.data[0] = e2, this._down(0)), t2;
      }
    }, Ip.prototype.peek = function() {
      return this.data[0];
    }, Ip.prototype._up = function(t2) {
      for (var e2 = this.data, r2 = this.compare, n2 = e2[t2]; t2 > 0; ) {
        var i3 = t2 - 1 >> 1, a2 = e2[i3];
        if (r2(n2, a2) >= 0)
          break;
        e2[t2] = a2, t2 = i3;
      }
      e2[t2] = n2;
    }, Ip.prototype._down = function(t2) {
      for (var e2 = this.data, r2 = this.compare, n2 = this.length >> 1, i3 = e2[t2]; t2 < n2; ) {
        var a2 = 1 + (t2 << 1), o2 = e2[a2], s2 = a2 + 1;
        if (s2 < this.length && r2(e2[s2], o2) < 0 && (a2 = s2, o2 = e2[s2]), r2(o2, i3) >= 0)
          break;
        e2[t2] = o2, t2 = a2;
      }
      e2[t2] = i3;
    };
    var Cp = Number.POSITIVE_INFINITY;
    function Tp(t2, e2) {
      return e2[1] !== Cp ? function(t3, e3, r2) {
        var n2 = 0, i3 = 0;
        switch (e3 = Math.abs(e3), r2 = Math.abs(r2), t3) {
          case "top-right":
          case "top-left":
          case "top":
            i3 = r2 - 7;
            break;
          case "bottom-right":
          case "bottom-left":
          case "bottom":
            i3 = 7 - r2;
        }
        switch (t3) {
          case "top-right":
          case "bottom-right":
          case "right":
            n2 = -e3;
            break;
          case "top-left":
          case "bottom-left":
          case "left":
            n2 = e3;
        }
        return [n2, i3];
      }(t2, e2[0], e2[1]) : function(t3, e3) {
        var r2 = 0, n2 = 0;
        e3 < 0 && (e3 = 0);
        var i3 = e3 / Math.sqrt(2);
        switch (t3) {
          case "top-right":
          case "top-left":
            n2 = i3 - 7;
            break;
          case "bottom-right":
          case "bottom-left":
            n2 = 7 - i3;
            break;
          case "bottom":
            n2 = 7 - e3;
            break;
          case "top":
            n2 = e3 - 7;
        }
        switch (t3) {
          case "top-right":
          case "bottom-right":
            r2 = -i3;
            break;
          case "top-left":
          case "bottom-left":
            r2 = i3;
            break;
          case "left":
            r2 = e3;
            break;
          case "right":
            r2 = -e3;
        }
        return [r2, n2];
      }(t2, e2[0]);
    }
    function Ep(t2, e2, r2, n2, i3, a2, o2) {
      t2.createArrays(), t2.tilePixelRatio = 8192 / (512 * t2.overscaling), t2.compareText = {}, t2.iconsNeedLinear = false;
      var s2 = t2.layers[0].layout, u2 = t2.layers[0]._unevaluatedLayout._values, l2 = {};
      if ("composite" === t2.textSizeData.kind) {
        var p2 = t2.textSizeData, h2 = p2.maxZoom;
        l2.compositeTextSizes = [u2["text-size"].possiblyEvaluate(new Ji(p2.minZoom), o2), u2["text-size"].possiblyEvaluate(new Ji(h2), o2)];
      }
      if ("composite" === t2.iconSizeData.kind) {
        var c2 = t2.iconSizeData, f2 = c2.maxZoom;
        l2.compositeIconSizes = [u2["icon-size"].possiblyEvaluate(new Ji(c2.minZoom), o2), u2["icon-size"].possiblyEvaluate(new Ji(f2), o2)];
      }
      l2.layoutTextSize = u2["text-size"].possiblyEvaluate(new Ji(t2.zoom + 1), o2), l2.layoutIconSize = u2["icon-size"].possiblyEvaluate(new Ji(t2.zoom + 1), o2), l2.textMaxSize = u2["text-size"].possiblyEvaluate(new Ji(18));
      for (var y2 = 24 * s2.get("text-line-height"), d2 = "map" === s2.get("text-rotation-alignment") && "point" !== s2.get("symbol-placement"), m2 = s2.get("text-keep-upright"), v2 = s2.get("text-size"), g2 = function() {
        var a3 = b2[x2], u3 = s2.get("text-font").evaluate(a3, {}, o2).join(","), p3 = v2.evaluate(a3, {}, o2), h3 = l2.layoutTextSize.evaluate(a3, {}, o2), c3 = l2.layoutIconSize.evaluate(a3, {}, o2), f3 = { horizontal: {}, vertical: void 0 }, g3 = a3.text, w2 = [0, 0];
        if (g3) {
          var _2 = g3.toString(), A2 = 24 * s2.get("text-letter-spacing").evaluate(a3, {}, o2), z2 = function(t3) {
            for (var e3 = 0, r3 = t3; e3 < r3.length; e3 += 1)
              if (n3 = r3[e3].charCodeAt(0), si(n3) || ui(n3) || li(n3) || Mi(n3) || Ti(n3))
                return false;
            var n3;
            return true;
          }(_2) ? A2 : 0, I2 = s2.get("text-anchor").evaluate(a3, {}, o2), k2 = s2.get("text-variable-anchor");
          if (!k2) {
            var M2 = s2.get("text-radial-offset").evaluate(a3, {}, o2);
            w2 = M2 ? Tp(I2, [24 * M2, Cp]) : s2.get("text-offset").evaluate(a3, {}, o2).map(function(t3) {
              return 24 * t3;
            });
          }
          var P2 = d2 ? "center" : s2.get("text-justify").evaluate(a3, {}, o2), V2 = s2.get("symbol-placement"), C2 = "point" === V2 ? 24 * s2.get("text-max-width").evaluate(a3, {}, o2) : 0, T2 = function() {
            t2.allowVerticalPlacement && Bi(_2) && (f3.vertical = Nl(g3, e2, r2, i3, u3, C2, y2, I2, "left", z2, w2, jl.vertical, true, V2, h3, p3));
          };
          if (!d2 && k2) {
            for (var E2 = "auto" === P2 ? k2.map(function(t3) {
              return Bp(t3);
            }) : [P2], B2 = false, D2 = 0; D2 < E2.length; D2++) {
              var L2 = E2[D2];
              if (!f3.horizontal[L2])
                if (B2)
                  f3.horizontal[L2] = f3.horizontal[0];
                else {
                  var F2 = Nl(g3, e2, r2, i3, u3, C2, y2, "center", L2, z2, w2, jl.horizontal, false, V2, h3, p3);
                  F2 && (f3.horizontal[L2] = F2, B2 = 1 === F2.positionedLines.length);
                }
            }
            T2();
          } else {
            "auto" === P2 && (P2 = Bp(I2));
            var R2 = Nl(g3, e2, r2, i3, u3, C2, y2, I2, P2, z2, w2, jl.horizontal, false, V2, h3, p3);
            R2 && (f3.horizontal[P2] = R2), T2(), Bi(_2) && d2 && m2 && (f3.vertical = Nl(g3, e2, r2, i3, u3, C2, y2, I2, P2, z2, w2, jl.vertical, false, V2, h3, p3));
          }
        }
        var O2 = void 0, j2 = false;
        if (a3.icon && a3.icon.name) {
          var U2 = n2[a3.icon.name];
          U2 && (O2 = function(t3, e3, r3) {
            var n3 = Ql(r3), i4 = e3[0] - t3.displaySize[0] * n3.horizontalAlign, a4 = e3[1] - t3.displaySize[1] * n3.verticalAlign;
            return { image: t3, top: a4, bottom: a4 + t3.displaySize[1], left: i4, right: i4 + t3.displaySize[0] };
          }(i3[a3.icon.name], s2.get("icon-offset").evaluate(a3, {}, o2), s2.get("icon-anchor").evaluate(a3, {}, o2)), j2 = U2.sdf, void 0 === t2.sdfIcons ? t2.sdfIcons = U2.sdf : t2.sdfIcons !== U2.sdf && S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"), (U2.pixelRatio !== t2.pixelRatio || 0 !== s2.get("icon-rotate").constantOr(1)) && (t2.iconsNeedLinear = true));
        }
        var q2 = Lp(f3.horizontal) || f3.vertical;
        t2.iconsInText = !!q2 && q2.iconsInText, (q2 || O2) && function(t3, e3, r3, n3, i4, a4, o3, s3, u4, l3, p4) {
          var h4 = a4.textMaxSize.evaluate(e3, {});
          void 0 === h4 && (h4 = o3);
          var c4, f4 = t3.layers[0].layout, y3 = f4.get("icon-offset").evaluate(e3, {}, p4), d3 = Lp(r3.horizontal), m3 = o3 / 24, v3 = t3.tilePixelRatio * m3, g4 = t3.tilePixelRatio * h4 / 24, x3 = t3.tilePixelRatio * s3, b3 = t3.tilePixelRatio * f4.get("symbol-spacing"), w3 = f4.get("text-padding") * t3.tilePixelRatio, _3 = f4.get("icon-padding") * t3.tilePixelRatio, A3 = f4.get("text-max-angle") / 180 * Math.PI, z3 = "map" === f4.get("text-rotation-alignment") && "point" !== f4.get("symbol-placement"), I3 = "map" === f4.get("icon-rotation-alignment") && "point" !== f4.get("symbol-placement"), k3 = f4.get("symbol-placement"), M3 = b3 / 2, P3 = f4.get("icon-text-fit");
          n3 && "none" !== P3 && (t3.allowVerticalPlacement && r3.vertical && (c4 = $l(n3, r3.vertical, P3, f4.get("icon-text-fit-padding"), y3, m3)), d3 && (n3 = $l(n3, d3, P3, f4.get("icon-text-fit-padding"), y3, m3)));
          var V3 = function(s4, h5) {
            h5.x < 0 || h5.x >= 8192 || h5.y < 0 || h5.y >= 8192 || function(t4, e4, r4, n4, i5, a5, o4, s5, u5, l4, p5, h6, c5, f5, y4, d4, m4, v4, g5, x4, b4, w4, _4, A4, z4) {
              var I4, k4, M4, P4, V4, C4 = t4.addToLineVertexArray(e4, r4), T4 = 0, E4 = 0, B4 = 0, D4 = 0, L4 = -1, F4 = -1, R4 = {}, O4 = no(""), j4 = 0, U4 = 0;
              if (void 0 === s5._unevaluatedLayout.getValue("text-radial-offset") ? (j4 = (I4 = s5.layout.get("text-offset").evaluate(b4, {}, A4).map(function(t5) {
                return 24 * t5;
              }))[0], U4 = I4[1]) : (j4 = 24 * s5.layout.get("text-radial-offset").evaluate(b4, {}, A4), U4 = Cp), t4.allowVerticalPlacement && n4.vertical) {
                var q4 = s5.layout.get("text-rotate").evaluate(b4, {}, A4) + 90;
                P4 = new zp(u5, e4, l4, p5, h6, n4.vertical, c5, f5, y4, q4), o4 && (V4 = new zp(u5, e4, l4, p5, h6, o4, m4, v4, y4, q4));
              }
              if (i5) {
                var N3 = s5.layout.get("icon-rotate").evaluate(b4, {}), Z3 = "none" !== s5.layout.get("icon-text-fit"), G3 = bp(i5, N3, _4, Z3), Y3 = o4 ? bp(o4, N3, _4, Z3) : void 0;
                M4 = new zp(u5, e4, l4, p5, h6, i5, m4, v4, false, N3), T4 = 4 * G3.length;
                var X3 = t4.iconSizeData, K3 = null;
                "source" === X3.kind ? (K3 = [128 * s5.layout.get("icon-size").evaluate(b4, {})])[0] > 32640 && S(t4.layerIds[0] + ': Value for "icon-size" is >= 255. Reduce your "icon-size".') : "composite" === X3.kind && ((K3 = [128 * w4.compositeIconSizes[0].evaluate(b4, {}, A4), 128 * w4.compositeIconSizes[1].evaluate(b4, {}, A4)])[0] > 32640 || K3[1] > 32640) && S(t4.layerIds[0] + ': Value for "icon-size" is >= 255. Reduce your "icon-size".'), t4.addSymbols(t4.icon, G3, K3, x4, g5, b4, false, e4, C4.lineStartIndex, C4.lineLength, -1, A4), L4 = t4.icon.placedSymbolArray.length - 1, Y3 && (E4 = 4 * Y3.length, t4.addSymbols(t4.icon, Y3, K3, x4, g5, b4, jl.vertical, e4, C4.lineStartIndex, C4.lineLength, -1, A4), F4 = t4.icon.placedSymbolArray.length - 1);
              }
              for (var J3 in n4.horizontal) {
                var H3 = n4.horizontal[J3];
                if (!k4) {
                  O4 = no(H3.text);
                  var Q3 = s5.layout.get("text-rotate").evaluate(b4, {}, A4);
                  k4 = new zp(u5, e4, l4, p5, h6, H3, c5, f5, y4, Q3);
                }
                var W3 = 1 === H3.positionedLines.length;
                if (B4 += Dp(t4, e4, H3, a5, s5, y4, b4, d4, C4, n4.vertical ? jl.horizontal : jl.horizontalOnly, W3 ? Object.keys(n4.horizontal) : [J3], R4, L4, w4, A4), W3)
                  break;
              }
              n4.vertical && (D4 += Dp(t4, e4, n4.vertical, a5, s5, y4, b4, d4, C4, jl.vertical, ["vertical"], R4, F4, w4, A4));
              var $2 = k4 ? k4.boxStartIndex : t4.collisionBoxArray.length, tt2 = k4 ? k4.boxEndIndex : t4.collisionBoxArray.length, et2 = P4 ? P4.boxStartIndex : t4.collisionBoxArray.length, rt2 = P4 ? P4.boxEndIndex : t4.collisionBoxArray.length, nt2 = M4 ? M4.boxStartIndex : t4.collisionBoxArray.length, it2 = M4 ? M4.boxEndIndex : t4.collisionBoxArray.length, at2 = V4 ? V4.boxStartIndex : t4.collisionBoxArray.length, ot2 = V4 ? V4.boxEndIndex : t4.collisionBoxArray.length, st2 = -1, ut2 = function(t5, e5) {
                return t5 && t5.circleDiameter ? Math.max(t5.circleDiameter, e5) : e5;
              };
              st2 = ut2(k4, st2), st2 = ut2(P4, st2), st2 = ut2(M4, st2);
              var lt2 = (st2 = ut2(V4, st2)) > -1 ? 1 : 0;
              lt2 && (st2 *= z4 / 24), t4.glyphOffsetArray.length >= Gp.MAX_GLYPHS && S("Too many glyphs being rendered in a tile. See https://github.com/sgmap/sgmap-js/issues/2907"), void 0 !== b4.sortKey && t4.addToSortKeyRanges(t4.symbolInstances.length, b4.sortKey), t4.symbolInstances.emplaceBack(e4.x, e4.y, R4.right >= 0 ? R4.right : -1, R4.center >= 0 ? R4.center : -1, R4.left >= 0 ? R4.left : -1, R4.vertical || -1, L4, F4, O4, $2, tt2, et2, rt2, nt2, it2, at2, ot2, l4, B4, D4, T4, E4, lt2, 0, c5, j4, U4, st2);
            }(t3, h5, s4, r3, n3, i4, c4, t3.layers[0], t3.collisionBoxArray, e3.index, e3.sourceLayerIndex, t3.index, v3, w3, z3, u4, x3, _3, I3, y3, e3, a4, l3, p4, o3);
          };
          if ("line" === k3)
            for (var C3 = 0, T3 = hp(e3.geometry, 0, 0, 8192, 8192); C3 < T3.length; C3 += 1)
              for (var E3 = T3[C3], B3 = 0, D3 = pp(E3, b3, A3, r3.vertical || d3, n3, 24, g4, t3.overscaling, 8192); B3 < D3.length; B3 += 1) {
                var L3 = D3[B3];
                d3 && Fp(t3, d3.text, M3, L3) || V3(E3, L3);
              }
          else if ("line-center" === k3)
            for (var F3 = 0, R3 = e3.geometry; F3 < R3.length; F3 += 1) {
              var O3 = R3[F3];
              if (O3.length > 1) {
                var j3 = lp(O3, A3, r3.vertical || d3, n3, 24, g4);
                j3 && V3(O3, j3);
              }
            }
          else if ("Polygon" === e3.type)
            for (var U3 = 0, q3 = Au(e3.geometry, 0); U3 < q3.length; U3 += 1) {
              var N2 = q3[U3], Z2 = Mp(N2, 16);
              V3(N2[0], new tp(Z2.x, Z2.y, 0));
            }
          else if ("LineString" === e3.type)
            for (var G2 = 0, Y2 = e3.geometry; G2 < Y2.length; G2 += 1) {
              var X2 = Y2[G2];
              V3(X2, new tp(X2[0].x, X2[0].y, 0));
            }
          else if ("Point" === e3.type)
            for (var K2 = 0, J2 = e3.geometry; K2 < J2.length; K2 += 1)
              for (var H2 = 0, Q2 = J2[K2]; H2 < Q2.length; H2 += 1) {
                var W2 = Q2[H2];
                V3([W2], new tp(W2.x, W2.y, 0));
              }
        }(t2, a3, f3, O2, n2, l2, h3, c3, w2, j2, o2);
      }, x2 = 0, b2 = t2.features; x2 < b2.length; x2 += 1)
        g2();
      a2 && t2.generateCollisionDebugBuffers();
    }
    function Bp(t2) {
      switch (t2) {
        case "right":
        case "top-right":
        case "bottom-right":
          return "right";
        case "left":
        case "top-left":
        case "bottom-left":
          return "left";
      }
      return "center";
    }
    function Dp(t2, e2, r2, n2, a2, o2, s2, u2, l2, p2, h2, c2, f2, y2, d2) {
      var m2 = function(t3, e3, r3, n3, a3, o3, s3, u3) {
        for (var l3 = n3.layout.get("text-rotate").evaluate(o3, {}) * Math.PI / 180, p3 = [], h3 = 0, c3 = e3.positionedLines; h3 < c3.length; h3 += 1)
          for (var f3 = c3[h3], y3 = 0, d3 = f3.positionedGlyphs; y3 < d3.length; y3 += 1) {
            var m3 = d3[y3];
            if (m3.rect) {
              var v3 = m3.rect || {}, g3 = 4, x3 = true, b3 = 1, w2 = 0, _2 = (a3 || u3) && m3.vertical, A2 = m3.metrics.advance * m3.scale / 2;
              if (u3 && e3.verticalizable && (w2 = f3.lineOffset / 2 - (m3.imageName ? -(24 - m3.metrics.width * m3.scale) / 2 : 24 * (m3.scale - 1))), m3.imageName) {
                var S2 = s3[m3.imageName];
                x3 = S2.sdf, g3 = 1 / (b3 = S2.pixelRatio);
              }
              var z2 = a3 ? [m3.x + A2, m3.y] : [0, 0], I2 = a3 ? [0, 0] : [m3.x + A2 + r3[0], m3.y + r3[1] - w2], k2 = [0, 0];
              _2 && (k2 = I2, I2 = [0, 0]);
              var M2 = (m3.metrics.left - g3) * m3.scale - A2 + I2[0], P2 = (-m3.metrics.top - g3) * m3.scale + I2[1], V2 = M2 + v3.w * m3.scale / (b3 * (m3.localGlyph ? 2 : 1)), C2 = P2 + v3.h * m3.scale / (b3 * (m3.localGlyph ? 2 : 1)), T2 = new i2(M2, P2), E2 = new i2(V2, P2), B2 = new i2(M2, C2), D2 = new i2(V2, C2);
              if (_2) {
                var L2 = new i2(-A2, A2 - -17), F2 = -Math.PI / 2, R2 = 12 - A2, O2 = new i2(22 - R2, -(m3.imageName ? R2 : 0)), j2 = new (Function.prototype.bind.apply(i2, [null].concat(k2)))();
                T2._rotateAround(F2, L2)._add(O2)._add(j2), E2._rotateAround(F2, L2)._add(O2)._add(j2), B2._rotateAround(F2, L2)._add(O2)._add(j2), D2._rotateAround(F2, L2)._add(O2)._add(j2);
              }
              if (l3) {
                var U2 = Math.sin(l3), q2 = Math.cos(l3), N2 = [q2, -U2, U2, q2];
                T2._matMult(N2), E2._matMult(N2), B2._matMult(N2), D2._matMult(N2);
              }
              var Z2 = new i2(0, 0), G2 = new i2(0, 0);
              p3.push({ tl: T2, tr: E2, bl: B2, br: D2, tex: v3, writingMode: e3.writingMode, glyphOffset: z2, sectionIndex: m3.sectionIndex, isSDF: x3, pixelOffsetTL: Z2, pixelOffsetBR: G2, minFontScaleX: 0, minFontScaleY: 0 });
            }
          }
        return p3;
      }(0, r2, u2, a2, o2, s2, n2, t2.allowVerticalPlacement), v2 = t2.textSizeData, g2 = null;
      "source" === v2.kind ? (g2 = [128 * a2.layout.get("text-size").evaluate(s2, {})])[0] > 32640 && S(t2.layerIds[0] + ': Value for "text-size" is >= 255. Reduce your "text-size".') : "composite" === v2.kind && ((g2 = [128 * y2.compositeTextSizes[0].evaluate(s2, {}, d2), 128 * y2.compositeTextSizes[1].evaluate(s2, {}, d2)])[0] > 32640 || g2[1] > 32640) && S(t2.layerIds[0] + ': Value for "text-size" is >= 255. Reduce your "text-size".'), t2.addSymbols(t2.text, m2, g2, u2, o2, s2, p2, e2, l2.lineStartIndex, l2.lineLength, f2, d2);
      for (var x2 = 0, b2 = h2; x2 < b2.length; x2 += 1)
        c2[b2[x2]] = t2.text.placedSymbolArray.length - 1;
      return 4 * m2.length;
    }
    function Lp(t2) {
      for (var e2 in t2)
        return t2[e2];
      return null;
    }
    function Fp(t2, e2, r2, n2) {
      var i3 = t2.compareText;
      if (e2 in i3) {
        for (var a2 = i3[e2], o2 = a2.length - 1; o2 >= 0; o2--)
          if (n2.dist(a2[o2]) < r2)
            return true;
      } else
        i3[e2] = [];
      return i3[e2].push(n2), false;
    }
    var Rp = ju.VectorTileFeature.types, Op = [{ name: "a_fade_opacity", components: 1, type: "Uint8", offset: 0 }];
    function jp(t2, e2, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2, c2) {
      var f2 = s2 ? Math.min(32640, Math.round(s2[0])) : 0, y2 = s2 ? Math.min(32640, Math.round(s2[1])) : 0;
      t2.emplaceBack(e2, r2, Math.round(32 * n2), Math.round(32 * i3), a2, o2, (f2 << 1) + (u2 ? 1 : 0), y2, 16 * l2, 16 * p2, 256 * h2, 256 * c2);
    }
    function Up(t2, e2, r2, n2) {
      n2 && (r2 = -1 * (r2 + 100)), t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2);
    }
    function qp(t2) {
      for (var e2 = 0, r2 = t2.sections; e2 < r2.length; e2 += 1)
        if (Oi(r2[e2].text))
          return true;
      return false;
    }
    var Np = function(t2) {
      this.layoutVertexArray = new Aa(), this.indexArray = new Va(), this.programConfigurations = t2, this.segments = new Qa(), this.dynamicLayoutVertexArray = new Sa(), this.opacityVertexArray = new za(), this.placedSymbolArray = new Na();
    };
    Np.prototype.isEmpty = function() {
      return 0 === this.layoutVertexArray.length && 0 === this.indexArray.length && 0 === this.dynamicLayoutVertexArray.length && 0 === this.opacityVertexArray.length;
    }, Np.prototype.upload = function(t2, e2, r2, n2) {
      this.isEmpty() || (r2 && (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, ol.members), this.indexBuffer = t2.createIndexBuffer(this.indexArray, e2), this.dynamicLayoutVertexBuffer = t2.createVertexBuffer(this.dynamicLayoutVertexArray, sl.members, true), this.opacityVertexBuffer = t2.createVertexBuffer(this.opacityVertexArray, Op, true), this.opacityVertexBuffer.itemSize = 1), (r2 || n2) && this.programConfigurations.upload(t2));
    }, Np.prototype.destroy = function() {
      this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());
    }, ti("SymbolBuffers", Np);
    var Zp = function(t2, e2, r2) {
      this.layoutVertexArray = new t2(), this.layoutAttributes = e2, this.indexArray = new r2(), this.segments = new Qa(), this.collisionVertexArray = new Pa();
    };
    Zp.prototype.upload = function(t2) {
      this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t2.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t2.createVertexBuffer(this.collisionVertexArray, ul.members, true);
    }, Zp.prototype.destroy = function() {
      this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy());
    }, ti("CollisionBuffers", Zp);
    var Gp = function(t2) {
      this.collisionBoxArray = t2.collisionBoxArray, this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
        return t3.id;
      }), this.index = t2.index, this.pixelRatio = t2.pixelRatio, this.sourceLayerIndex = t2.sourceLayerIndex, this.hasPattern = false, this.hasRTLText = false, this.sortKeyRanges = [], this.collisionCircleArray = [], this.placementInvProjMatrix = us([]), this.placementViewportMatrix = us([]);
      var e2 = this.layers[0]._unevaluatedLayout._values;
      this.textSizeData = ep(this.zoom, e2["text-size"]), this.iconSizeData = ep(this.zoom, e2["icon-size"]);
      var r2 = this.layers[0].layout, n2 = r2.get("symbol-sort-key"), i3 = r2.get("symbol-z-order");
      this.sortFeaturesByKey = "viewport-y" !== i3 && void 0 !== n2.constantOr(1), this.sortFeaturesByY = ("viewport-y" === i3 || "auto" === i3 && !this.sortFeaturesByKey) && (r2.get("text-allow-overlap") || r2.get("icon-allow-overlap") || r2.get("text-ignore-placement") || r2.get("icon-ignore-placement")), "point" === r2.get("symbol-placement") && (this.writingModes = r2.get("text-writing-mode").map(function(t3) {
        return jl[t3];
      })), this.stateDependentLayerIds = this.layers.filter(function(t3) {
        return t3.isStateDependent();
      }).map(function(t3) {
        return t3.id;
      }), this.sourceID = t2.sourceID, this.feature_values = {};
    };
    function Yp(t2, e2) {
      return e2.replace(/{([^{}]+)}/g, function(e3, r2) {
        return r2 in t2 ? String(t2[r2]) : "";
      });
    }
    Gp.prototype.createArrays = function() {
      this.text = new Np(new Io(ol.members, this.layers, this.zoom, function(t2) {
        return /^text/.test(t2) || /symbol-minzoom/.test(t2) || /symbol-maxzoom/.test(t2);
      })), this.icon = new Np(new Io(ol.members, this.layers, this.zoom, function(t2) {
        return /^icon/.test(t2) || /symbol-minzoom/.test(t2) || /symbol-maxzoom/.test(t2);
      })), this.glyphOffsetArray = new Ya(), this.lineVertexArray = new Xa(), this.symbolInstances = new Ga();
    }, Gp.prototype.calculateGlyphDependencies = function(t2, e2, r2, n2, i3) {
      for (var a2 = 0; a2 < t2.length; a2++)
        if (e2[t2.charCodeAt(a2)] = true, (r2 || n2) && i3) {
          var o2 = cl[t2.charAt(a2)];
          o2 && (e2[o2.charCodeAt(0)] = true);
        }
    }, Gp.prototype.populate = function(t2, e2, r2) {
      var n2 = this.layers[0], i3 = n2.layout, a2 = n2.paint, o2 = i3.get("text-font"), s2 = i3.get("text-field"), u2 = i3.get("icon-image"), l2 = ("constant" !== s2.value.kind || s2.value.value instanceof xe && !s2.value.value.isEmpty() || s2.value.value.toString().length > 0) && ("constant" !== o2.value.kind || o2.value.value.length > 0), p2 = "constant" !== u2.value.kind || !!u2.value.value || Object.keys(u2.parameters).length > 0, h2 = i3.get("symbol-sort-key");
      this.features = [], this.feature_values = [];
      var c2 = a2.get("symbol-minzoom"), f2 = a2.get("symbol-maxzoom");
      if (l2 || p2) {
        for (var y2 = e2.iconDependencies, d2 = e2.glyphDependencies, m2 = e2.availableImages, v2 = new Ji(this.zoom), g2 = 0, x2 = t2.length; g2 < x2; g2 += 1) {
          var b2 = t2[g2], w2 = b2.feature, _2 = b2.id, A2 = b2.index, S2 = b2.sourceLayerIndex, z2 = I2 ? Oo(w2) : [], I2 = n2._featureFilter.needGeometry, k2 = { type: w2.type, id: _2, properties: w2.properties, geometry: z2 };
          if (n2._featureFilter.filter(v2, k2, r2)) {
            I2 || (z2 = !I2 && Oo(w2), k2.geometry = z2);
            var M2 = void 0;
            if (l2) {
              var P2 = n2.getValueAndResolveTokens("text-field", k2, r2, m2), V2 = xe.factory(P2);
              qp(V2) && (this.hasRTLText = true), (!this.hasRTLText || "unavailable" === Yi() || this.hasRTLText && Ki.isParsed()) && (M2 = hl(V2, n2, k2));
            }
            var C2 = void 0;
            if (p2) {
              var T2 = n2.getValueAndResolveTokens("icon-image", k2, r2, m2);
              C2 = T2 instanceof be ? T2 : be.fromString(T2);
            }
            if (M2 || C2) {
              var E2 = this.sortFeaturesByKey ? h2.evaluate(k2, {}, r2) : void 0;
              if (this.features.push({ id: _2, text: M2, icon: C2, index: A2, sourceLayerIndex: S2, geometry: z2, properties: w2.properties, type: Rp[w2.type], sortKey: E2 }), c2 && f2 && 0 != c2.constantOr(1) && 24 != f2.constantOr(1)) {
                var B2 = c2.evaluate(k2), D2 = f2.evaluate(k2);
                this.feature_values.push([A2, B2 = B2 <= 3 ? 0 : B2 - 1, D2 = D2 >= 19 ? 25 : D2 > B2 ? D2 : B2 + 1]);
              }
              if (C2 && (y2[C2.name] = true), M2) {
                var L2 = o2.evaluate(k2, {}, r2).join(","), F2 = "map" === i3.get("text-rotation-alignment") && "point" !== i3.get("symbol-placement");
                this.allowVerticalPlacement = this.writingModes && this.writingModes.indexOf(jl.vertical) >= 0;
                for (var R2 = 0, O2 = M2.sections; R2 < O2.length; R2 += 1) {
                  var j2 = O2[R2];
                  if (j2.image)
                    y2[j2.image.name] = true;
                  else {
                    var U2 = Bi(M2.toString()), q2 = j2.fontStack || L2, N2 = d2[q2] = d2[q2] || {};
                    this.calculateGlyphDependencies(j2.text, N2, F2, this.allowVerticalPlacement, U2);
                  }
                }
              }
            }
          }
        }
        "line" === i3.get("symbol-placement") && (this.features = function(t3) {
          var e3 = {}, r3 = {}, n3 = [], i4 = 0;
          function a3(e4) {
            n3.push(t3[e4]), i4++;
          }
          function o3(t4, e4, i5) {
            var a4 = r3[t4];
            return delete r3[t4], r3[e4] = a4, n3[a4].geometry[0].pop(), n3[a4].geometry[0] = n3[a4].geometry[0].concat(i5[0]), a4;
          }
          function s3(t4, r4, i5) {
            var a4 = e3[r4];
            return delete e3[r4], e3[t4] = a4, n3[a4].geometry[0].shift(), n3[a4].geometry[0] = i5[0].concat(n3[a4].geometry[0]), a4;
          }
          function u3(t4, e4, r4) {
            var n4 = r4 ? e4[0][e4[0].length - 1] : e4[0][0];
            return t4 + ":" + n4.x + ":" + n4.y;
          }
          for (var l3 = 0; l3 < t3.length; l3++) {
            var p3 = t3[l3], h3 = p3.geometry, c3 = p3.text ? p3.text.toString() : null;
            if (c3) {
              var f3 = u3(c3, h3), y3 = u3(c3, h3, true);
              if (f3 in r3 && y3 in e3 && r3[f3] !== e3[y3]) {
                var d3 = s3(f3, y3, h3), m3 = o3(f3, y3, n3[d3].geometry);
                delete e3[f3], delete r3[y3], r3[u3(c3, n3[m3].geometry, true)] = m3, n3[d3].geometry = null;
              } else
                f3 in r3 ? o3(f3, y3, h3) : y3 in e3 ? s3(f3, y3, h3) : (a3(l3), e3[f3] = i4 - 1, r3[y3] = i4 - 1);
            } else
              a3(l3);
          }
          return n3.filter(function(t4) {
            return t4.geometry;
          });
        }(this.features)), this.sortFeaturesByKey && this.features.sort(function(t3, e3) {
          return t3.sortKey - e3.sortKey;
        });
      }
    }, Gp.prototype.update = function(t2, e2, r2) {
      this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t2, e2, this.layers, r2), this.icon.programConfigurations.updatePaintArrays(t2, e2, this.layers, r2));
    }, Gp.prototype.isEmpty = function() {
      return 0 === this.symbolInstances.length && !this.hasRTLText;
    }, Gp.prototype.uploadPending = function() {
      return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload;
    }, Gp.prototype.upload = function(t2) {
      !this.uploaded && this.hasDebugData() && (this.textCollisionBox.upload(t2), this.iconCollisionBox.upload(t2)), this.text.upload(t2, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t2, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = true;
    }, Gp.prototype.destroyDebugData = function() {
      this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();
    }, Gp.prototype.destroy = function() {
      this.text.destroy(), this.icon.destroy(), this.hasDebugData() && this.destroyDebugData();
    }, Gp.prototype.addToLineVertexArray = function(t2, e2) {
      var r2 = this.lineVertexArray.length;
      if (void 0 !== t2.segment) {
        for (var n2 = t2.dist(e2[t2.segment + 1]), i3 = t2.dist(e2[t2.segment]), a2 = {}, o2 = t2.segment + 1; o2 < e2.length; o2++)
          a2[o2] = { x: e2[o2].x, y: e2[o2].y, tileUnitDistanceFromAnchor: n2 }, o2 < e2.length - 1 && (n2 += e2[o2 + 1].dist(e2[o2]));
        for (var s2 = t2.segment || 0; s2 >= 0; s2--)
          a2[s2] = { x: e2[s2].x, y: e2[s2].y, tileUnitDistanceFromAnchor: i3 }, s2 > 0 && (i3 += e2[s2 - 1].dist(e2[s2]));
        for (var u2 = 0; u2 < e2.length; u2++) {
          var l2 = a2[u2];
          this.lineVertexArray.emplaceBack(l2.x, l2.y, l2.tileUnitDistanceFromAnchor);
        }
      }
      return { lineStartIndex: r2, lineLength: this.lineVertexArray.length - r2 };
    }, Gp.prototype.addSymbols = function(t2, e2, r2, n2, i3, a2, o2, s2, u2, l2, p2, h2) {
      for (var c2 = t2.indexArray, f2 = t2.layoutVertexArray, y2 = t2.segments.prepareSegment(4 * e2.length, f2, c2, a2.sortKey), d2 = this.glyphOffsetArray.length, m2 = y2.vertexLength, v2 = this.allowVerticalPlacement && o2 === jl.vertical ? Math.PI / 2 : 0, g2 = a2.text && a2.text.sections, x2 = this.layers[0].layout.get("symbol-scaleable").evaluate(a2, {}), b2 = 0; b2 < e2.length; b2++) {
        var w2 = e2[b2], _2 = w2.tl, A2 = w2.tr, S2 = w2.bl, z2 = w2.br, I2 = w2.tex, k2 = w2.pixelOffsetTL, M2 = w2.pixelOffsetBR, P2 = w2.minFontScaleX, V2 = w2.minFontScaleY, C2 = w2.glyphOffset, T2 = w2.isSDF, E2 = w2.sectionIndex, B2 = y2.vertexLength, D2 = C2[1];
        jp(f2, s2.x, s2.y, _2.x, D2 + _2.y, I2.x, I2.y, r2, T2, k2.x, k2.y, P2, V2), jp(f2, s2.x, s2.y, A2.x, D2 + A2.y, I2.x + I2.w, I2.y, r2, T2, M2.x, k2.y, P2, V2), jp(f2, s2.x, s2.y, S2.x, D2 + S2.y, I2.x, I2.y + I2.h, r2, T2, k2.x, M2.y, P2, V2), jp(f2, s2.x, s2.y, z2.x, D2 + z2.y, I2.x + I2.w, I2.y + I2.h, r2, T2, M2.x, M2.y, P2, V2), Up(t2.dynamicLayoutVertexArray, s2, v2, x2), c2.emplaceBack(B2, B2 + 1, B2 + 2), c2.emplaceBack(B2 + 1, B2 + 2, B2 + 3), y2.vertexLength += 4, y2.primitiveLength += 2, this.glyphOffsetArray.emplaceBack(C2[0]), b2 !== e2.length - 1 && E2 === e2[b2 + 1].sectionIndex || t2.programConfigurations.populatePaintArrays(f2.length, a2, a2.index, {}, h2, g2 && g2[E2]);
      }
      t2.placedSymbolArray.emplaceBack(s2.x, s2.y, d2, this.glyphOffsetArray.length - d2, m2, u2, l2, s2.segment, r2 ? r2[0] : 0, r2 ? r2[1] : 0, n2[0], n2[1], o2, 0, false, 0, p2);
    }, Gp.prototype._addCollisionDebugVertex = function(t2, e2, r2, n2, i3, a2) {
      return e2.emplaceBack(0, 0), t2.emplaceBack(r2.x, r2.y, n2, i3, Math.round(a2.x), Math.round(a2.y));
    }, Gp.prototype.addCollisionDebugVertices = function(t2, e2, r2, n2, a2, o2, s2) {
      var u2 = a2.segments.prepareSegment(4, a2.layoutVertexArray, a2.indexArray), l2 = u2.vertexLength, p2 = a2.layoutVertexArray, h2 = a2.collisionVertexArray, c2 = s2.anchorX, f2 = s2.anchorY;
      this._addCollisionDebugVertex(p2, h2, o2, c2, f2, new i2(t2, e2)), this._addCollisionDebugVertex(p2, h2, o2, c2, f2, new i2(r2, e2)), this._addCollisionDebugVertex(p2, h2, o2, c2, f2, new i2(r2, n2)), this._addCollisionDebugVertex(p2, h2, o2, c2, f2, new i2(t2, n2)), u2.vertexLength += 4;
      var y2 = a2.indexArray;
      y2.emplaceBack(l2, l2 + 1), y2.emplaceBack(l2 + 1, l2 + 2), y2.emplaceBack(l2 + 2, l2 + 3), y2.emplaceBack(l2 + 3, l2), u2.primitiveLength += 4;
    }, Gp.prototype.addDebugCollisionBoxes = function(t2, e2, r2, n2) {
      for (var i3 = t2; i3 < e2; i3++) {
        var a2 = this.collisionBoxArray.get(i3);
        this.addCollisionDebugVertices(a2.x1, a2.y1, a2.x2, a2.y2, n2 ? this.textCollisionBox : this.iconCollisionBox, a2.anchorPoint, r2);
      }
    }, Gp.prototype.generateCollisionDebugBuffers = function() {
      this.hasDebugData() && this.destroyDebugData(), this.textCollisionBox = new Zp(ka, ll.members, La), this.iconCollisionBox = new Zp(ka, ll.members, La);
      for (var t2 = 0; t2 < this.symbolInstances.length; t2++) {
        var e2 = this.symbolInstances.get(t2);
        this.addDebugCollisionBoxes(e2.textBoxStartIndex, e2.textBoxEndIndex, e2, true), this.addDebugCollisionBoxes(e2.verticalTextBoxStartIndex, e2.verticalTextBoxEndIndex, e2, true), this.addDebugCollisionBoxes(e2.iconBoxStartIndex, e2.iconBoxEndIndex, e2, false), this.addDebugCollisionBoxes(e2.verticalIconBoxStartIndex, e2.verticalIconBoxEndIndex, e2, false);
      }
    }, Gp.prototype._deserializeCollisionBoxesForSymbol = function(t2, e2, r2, n2, i3, a2, o2, s2, u2) {
      for (var l2 = {}, p2 = e2; p2 < r2; p2++) {
        var h2 = t2.get(p2);
        l2.textBox = { x1: h2.x1, y1: h2.y1, x2: h2.x2, y2: h2.y2, anchorPointX: h2.anchorPointX, anchorPointY: h2.anchorPointY }, l2.textFeatureIndex = h2.featureIndex;
        break;
      }
      for (var c2 = n2; c2 < i3; c2++) {
        var f2 = t2.get(c2);
        l2.verticalTextBox = { x1: f2.x1, y1: f2.y1, x2: f2.x2, y2: f2.y2, anchorPointX: f2.anchorPointX, anchorPointY: f2.anchorPointY }, l2.verticalTextFeatureIndex = f2.featureIndex;
        break;
      }
      for (var y2 = a2; y2 < o2; y2++) {
        var d2 = t2.get(y2);
        l2.iconBox = { x1: d2.x1, y1: d2.y1, x2: d2.x2, y2: d2.y2, anchorPointX: d2.anchorPointX, anchorPointY: d2.anchorPointY }, l2.iconFeatureIndex = d2.featureIndex;
        break;
      }
      for (var m2 = s2; m2 < u2; m2++) {
        var v2 = t2.get(m2);
        l2.verticalIconBox = { x1: v2.x1, y1: v2.y1, x2: v2.x2, y2: v2.y2, anchorPointX: v2.anchorPointX, anchorPointY: v2.anchorPointY }, l2.verticalIconFeatureIndex = v2.featureIndex;
        break;
      }
      return l2;
    }, Gp.prototype.deserializeCollisionBoxes = function(t2) {
      this.collisionArrays = [];
      for (var e2 = 0; e2 < this.symbolInstances.length; e2++) {
        var r2 = this.symbolInstances.get(e2);
        this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t2, r2.textBoxStartIndex, r2.textBoxEndIndex, r2.verticalTextBoxStartIndex, r2.verticalTextBoxEndIndex, r2.iconBoxStartIndex, r2.iconBoxEndIndex, r2.verticalIconBoxStartIndex, r2.verticalIconBoxEndIndex));
      }
    }, Gp.prototype.hasTextData = function() {
      return this.text.segments.get().length > 0;
    }, Gp.prototype.hasIconData = function() {
      return this.icon.segments.get().length > 0;
    }, Gp.prototype.hasDebugData = function() {
      return this.textCollisionBox && this.iconCollisionBox;
    }, Gp.prototype.hasTextCollisionBoxData = function() {
      return this.hasDebugData() && this.textCollisionBox.segments.get().length > 0;
    }, Gp.prototype.hasIconCollisionBoxData = function() {
      return this.hasDebugData() && this.iconCollisionBox.segments.get().length > 0;
    }, Gp.prototype.addIndicesForPlacedSymbol = function(t2, e2) {
      for (var r2 = t2.placedSymbolArray.get(e2), n2 = r2.vertexStartIndex + 4 * r2.numGlyphs, i3 = r2.vertexStartIndex; i3 < n2; i3 += 4)
        t2.indexArray.emplaceBack(i3, i3 + 1, i3 + 2), t2.indexArray.emplaceBack(i3 + 1, i3 + 2, i3 + 3);
    }, Gp.prototype.getSortedSymbolIndexes = function(t2) {
      if (this.sortedAngle === t2 && void 0 !== this.symbolInstanceIndexes)
        return this.symbolInstanceIndexes;
      for (var e2 = Math.sin(t2), r2 = Math.cos(t2), n2 = [], i3 = [], a2 = [], o2 = 0; o2 < this.symbolInstances.length; ++o2) {
        a2.push(o2);
        var s2 = this.symbolInstances.get(o2);
        n2.push(0 | Math.round(e2 * s2.anchorX + r2 * s2.anchorY)), i3.push(s2.featureIndex);
      }
      return a2.sort(function(t3, e3) {
        return n2[t3] - n2[e3] || i3[e3] - i3[t3];
      }), a2;
    }, Gp.prototype.addToSortKeyRanges = function(t2, e2) {
      var r2 = this.sortKeyRanges[this.sortKeyRanges.length - 1];
      r2 && r2.sortKey === e2 ? r2.symbolInstanceEnd = t2 + 1 : this.sortKeyRanges.push({ sortKey: e2, symbolInstanceStart: t2, symbolInstanceEnd: t2 + 1 });
    }, Gp.prototype.sortFeatures = function(t2) {
      var e2 = this;
      if (this.sortFeaturesByY && this.sortedAngle !== t2 && !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1)) {
        this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t2), this.sortedAngle = t2, this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];
        for (var r2 = 0, n2 = this.symbolInstanceIndexes; r2 < n2.length; r2 += 1) {
          var i3 = this.symbolInstances.get(n2[r2]);
          this.featureSortOrder.push(i3.featureIndex), [i3.rightJustifiedTextSymbolIndex, i3.centerJustifiedTextSymbolIndex, i3.leftJustifiedTextSymbolIndex].forEach(function(t3, r3, n3) {
            t3 >= 0 && n3.indexOf(t3) === r3 && e2.addIndicesForPlacedSymbol(e2.text, t3);
          }), i3.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.text, i3.verticalPlacedTextSymbolIndex), i3.placedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, i3.placedIconSymbolIndex), i3.verticalPlacedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, i3.verticalPlacedIconSymbolIndex);
        }
        this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);
      }
    }, ti("SymbolBucket", Gp, { omit: ["layers", "collisionBoxArray", "features", "compareText"] }), Gp.MAX_GLYPHS = 65535, Gp.addDynamicAttributes = Up;
    var Xp = new la({ "symbol-placement": new ia(Gt.layout_symbol["symbol-placement"]), "symbol-spacing": new ia(Gt.layout_symbol["symbol-spacing"]), "symbol-avoid-edges": new ia(Gt.layout_symbol["symbol-avoid-edges"]), "symbol-sort-key": new aa(Gt.layout_symbol["symbol-sort-key"]), "symbol-z-order": new ia(Gt.layout_symbol["symbol-z-order"]), "icon-allow-overlap": new ia(Gt.layout_symbol["icon-allow-overlap"]), "icon-ignore-placement": new ia(Gt.layout_symbol["icon-ignore-placement"]), "icon-optional": new ia(Gt.layout_symbol["icon-optional"]), "icon-rotation-alignment": new ia(Gt.layout_symbol["icon-rotation-alignment"]), "icon-size": new aa(Gt.layout_symbol["icon-size"]), "icon-text-fit": new ia(Gt.layout_symbol["icon-text-fit"]), "icon-text-fit-padding": new ia(Gt.layout_symbol["icon-text-fit-padding"]), "icon-image": new aa(Gt.layout_symbol["icon-image"]), "icon-rotate": new aa(Gt.layout_symbol["icon-rotate"]), "icon-padding": new ia(Gt.layout_symbol["icon-padding"]), "icon-keep-upright": new ia(Gt.layout_symbol["icon-keep-upright"]), "icon-offset": new aa(Gt.layout_symbol["icon-offset"]), "icon-anchor": new aa(Gt.layout_symbol["icon-anchor"]), "icon-pitch-alignment": new ia(Gt.layout_symbol["icon-pitch-alignment"]), "text-pitch-alignment": new ia(Gt.layout_symbol["text-pitch-alignment"]), "text-rotation-alignment": new ia(Gt.layout_symbol["text-rotation-alignment"]), "text-field": new aa(Gt.layout_symbol["text-field"]), "text-font": new aa(Gt.layout_symbol["text-font"]), "text-size": new aa(Gt.layout_symbol["text-size"]), "text-max-width": new aa(Gt.layout_symbol["text-max-width"]), "text-line-height": new ia(Gt.layout_symbol["text-line-height"]), "text-letter-spacing": new aa(Gt.layout_symbol["text-letter-spacing"]), "text-justify": new aa(Gt.layout_symbol["text-justify"]), "text-radial-offset": new aa(Gt.layout_symbol["text-radial-offset"]), "text-variable-anchor": new ia(Gt.layout_symbol["text-variable-anchor"]), "text-anchor": new aa(Gt.layout_symbol["text-anchor"]), "text-max-angle": new ia(Gt.layout_symbol["text-max-angle"]), "text-writing-mode": new ia(Gt.layout_symbol["text-writing-mode"]), "text-rotate": new aa(Gt.layout_symbol["text-rotate"]), "text-padding": new ia(Gt.layout_symbol["text-padding"]), "text-keep-upright": new ia(Gt.layout_symbol["text-keep-upright"]), "text-transform": new aa(Gt.layout_symbol["text-transform"]), "text-offset": new aa(Gt.layout_symbol["text-offset"]), "text-allow-overlap": new ia(Gt.layout_symbol["text-allow-overlap"]), "text-ignore-placement": new ia(Gt.layout_symbol["text-ignore-placement"]), "text-optional": new ia(Gt.layout_symbol["text-optional"]), "symbol-scaleable": new aa(Gt.layout_symbol["symbol-scaleable"]), "allow-clip": new ia(Gt.layout_symbol["allow-clip"]) }), Kp = { paint: new la({ "icon-opacity": new aa(Gt.paint_symbol["icon-opacity"]), "icon-color": new aa(Gt.paint_symbol["icon-color"]), "icon-halo-color": new aa(Gt.paint_symbol["icon-halo-color"]), "icon-halo-width": new aa(Gt.paint_symbol["icon-halo-width"]), "icon-halo-blur": new aa(Gt.paint_symbol["icon-halo-blur"]), "icon-translate": new ia(Gt.paint_symbol["icon-translate"]), "icon-translate-anchor": new ia(Gt.paint_symbol["icon-translate-anchor"]), "text-opacity": new aa(Gt.paint_symbol["text-opacity"]), "text-color": new aa(Gt.paint_symbol["text-color"], { runtimeType: ne, getOverride: function(t2) {
      return t2.textColor;
    }, hasOverride: function(t2) {
      return !!t2.textColor;
    } }), "text-halo-color": new aa(Gt.paint_symbol["text-halo-color"]), "text-halo-width": new aa(Gt.paint_symbol["text-halo-width"]), "text-halo-blur": new aa(Gt.paint_symbol["text-halo-blur"]), "text-translate": new ia(Gt.paint_symbol["text-translate"]), "text-translate-anchor": new ia(Gt.paint_symbol["text-translate-anchor"]), "symbol-minzoom": new aa(Gt.paint_symbol["symbol-minzoom"]), "symbol-maxzoom": new aa(Gt.paint_symbol["symbol-maxzoom"]) }), layout: Xp }, Jp = function(t2) {
      this.type = t2.property.overrides ? t2.property.overrides.runtimeType : $t, this.defaultValue = t2;
    };
    Jp.prototype.evaluate = function(t2) {
      if (t2.formattedSection) {
        var e2 = this.defaultValue.property.overrides;
        if (e2 && e2.hasOverride(t2.formattedSection))
          return e2.getOverride(t2.formattedSection);
      }
      return t2.feature && t2.featureState ? this.defaultValue.evaluate(t2.feature, t2.featureState) : this.defaultValue.property.specification.default;
    }, Jp.prototype.eachChild = function(t2) {
      this.defaultValue.isConstant() || t2(this.defaultValue.value._styleExpression.expression);
    }, Jp.prototype.outputDefined = function() {
      return false;
    }, Jp.prototype.serialize = function() {
      return null;
    }, ti("FormatSectionOverride", Jp, { omit: ["defaultValue"] });
    var Hp = function(t2) {
      function e2(e3) {
        t2.call(this, e3, Kp);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.recalculate = function(e3, r2) {
        if (t2.prototype.recalculate.call(this, e3, r2), "auto" === this.layout.get("icon-rotation-alignment") && (this.layout._values["icon-rotation-alignment"] = "point" !== this.layout.get("symbol-placement") ? "map" : "viewport"), "auto" === this.layout.get("text-rotation-alignment") && (this.layout._values["text-rotation-alignment"] = "point" !== this.layout.get("symbol-placement") ? "map" : "viewport"), "auto" === this.layout.get("text-pitch-alignment") && (this.layout._values["text-pitch-alignment"] = this.layout.get("text-rotation-alignment")), "auto" === this.layout.get("icon-pitch-alignment") && (this.layout._values["icon-pitch-alignment"] = this.layout.get("icon-rotation-alignment")), "point" === this.layout.get("symbol-placement")) {
          var n2 = this.layout.get("text-writing-mode");
          if (n2) {
            for (var i3 = [], a2 = 0, o2 = n2; a2 < o2.length; a2 += 1) {
              var s2 = o2[a2];
              i3.indexOf(s2) < 0 && i3.push(s2);
            }
            this.layout._values["text-writing-mode"] = i3;
          } else
            this.layout._values["text-writing-mode"] = ["horizontal"];
        }
        this._setPaintOverrides();
      }, e2.prototype.getValueAndResolveTokens = function(t3, e3, r2, n2) {
        var i3 = this.layout.get(t3).evaluate(e3, {}, r2, n2), a2 = this._unevaluatedLayout._values[t3];
        return a2.isDataDriven() || un(a2.value) || !i3 ? i3 : Yp(e3.properties, i3);
      }, e2.prototype.createBucket = function(t3) {
        return new Gp(t3);
      }, e2.prototype.queryRadius = function() {
        return 0;
      }, e2.prototype.queryIntersectsFeature = function() {
        return false;
      }, e2.prototype._setPaintOverrides = function() {
        for (var t3 = 0, r2 = Kp.paint.overridableProperties; t3 < r2.length; t3 += 1) {
          var n2 = r2[t3];
          if (e2.hasPaintOverride(this.layout, n2)) {
            var i3, a2 = this.paint.get(n2), o2 = new Jp(a2), s2 = new sn(o2, a2.property.specification);
            i3 = "constant" === a2.value.kind || "source" === a2.value.kind ? new pn("source", s2) : new hn("composite", s2, a2.value.zoomStops, a2.value._interpolationType), this.paint._values[n2] = new ra(a2.property, i3, a2.parameters);
          }
        }
      }, e2.prototype._handleOverridablePaintPropertyUpdate = function(t3, r2, n2) {
        return !(!this.layout || r2.isDataDriven() || n2.isDataDriven()) && e2.hasPaintOverride(this.layout, t3);
      }, e2.hasPaintOverride = function(t3, e3) {
        var r2 = t3.get("text-field"), n2 = Kp.paint.properties[e3], i3 = false, a2 = function(t4) {
          for (var e4 = 0, r3 = t4; e4 < r3.length; e4 += 1)
            if (n2.overrides && n2.overrides.hasOverride(r3[e4]))
              return void (i3 = true);
        };
        if ("constant" === r2.value.kind && r2.value.value instanceof xe)
          a2(r2.value.value.sections);
        else if ("source" === r2.value.kind) {
          var o2 = function(t4) {
            i3 || (t4 instanceof ze && Ae(t4.value) === se ? a2(t4.value.sections) : t4 instanceof Pe ? a2(t4.sections) : t4.eachChild(o2));
          }, s2 = r2.value;
          s2._styleExpression && o2(s2._styleExpression.expression);
        }
        return i3;
      }, e2;
    }(pa), Qp = { paint: new la({ "background-color": new ia(Gt.paint_background["background-color"]), "background-pattern": new sa(Gt.paint_background["background-pattern"]), "background-opacity": new ia(Gt.paint_background["background-opacity"]) }) }, Wp = function(t2) {
      function e2(e3) {
        t2.call(this, e3, Qp);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2;
    }(pa), $p = { paint: new la({ "raster-opacity": new ia(Gt.paint_raster["raster-opacity"]), "raster-hue-rotate": new ia(Gt.paint_raster["raster-hue-rotate"]), "raster-brightness-min": new ia(Gt.paint_raster["raster-brightness-min"]), "raster-brightness-max": new ia(Gt.paint_raster["raster-brightness-max"]), "raster-saturation": new ia(Gt.paint_raster["raster-saturation"]), "raster-contrast": new ia(Gt.paint_raster["raster-contrast"]), "raster-resampling": new ia(Gt.paint_raster["raster-resampling"]), "raster-fade-duration": new ia(Gt.paint_raster["raster-fade-duration"]) }) }, th = function(t2) {
      function e2(e3) {
        t2.call(this, e3, $p);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2;
    }(pa), eh = function(t2) {
      function e2(e3) {
        t2.call(this, e3, {}), this.implementation = e3;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.is3D = function() {
        return "3d" === this.implementation.renderingMode;
      }, e2.prototype.hasOffscreenPass = function() {
        return void 0 !== this.implementation.prerender;
      }, e2.prototype.recalculate = function() {
      }, e2.prototype.updateTransitions = function() {
      }, e2.prototype.hasTransition = function() {
      }, e2.prototype.serialize = function() {
      }, e2.prototype.onAdd = function(t3) {
        this.implementation.onAdd && this.implementation.onAdd(t3, t3.painter.context.gl);
      }, e2.prototype.onRemove = function(t3) {
        this.implementation.onRemove && this.implementation.onRemove(t3, t3.painter.context.gl);
      }, e2;
    }(pa), rh = ya([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_eoffset", components: 2, type: "Float32" }, { name: "a_normal", components: 2, type: "Float32" }]), nh = ya([{ name: "a_ecolor", components: 1, type: "Float32" }, { name: "a_erotate", components: 1, type: "Float32" }, { name: "a_esize", components: 1, type: "Float32" }], 4);
    function ih(t2, e2, r2, n2, i3, a2, o2) {
      t2.emplaceBack(e2, r2, n2, i3, a2, o2);
    }
    var ah = function(t2) {
      this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map(function(t3) {
        return t3.id;
      }), this.index = t2.index, this.hasPattern = false, this.indexArray = new Va(), this.segments = new Qa(), this.programConfigurations = new Io(rh.members, t2.layers, t2.zoom), this.stateDependentLayerIds = this.layers.filter(function(t3) {
        return t3.isStateDependent();
      }).map(function(t3) {
        return t3.id;
      }), this.symbolIconArray = {}, this.symbolFeatures = [], this.layoutVertexArray = new ma(), this.colorVertexArray = new Sa();
    };
    ah.prototype.populate = function(t2, e2, r2) {
      var n2 = this.layers[0], i3 = [], a2 = null;
      "circle" === n2.type && (a2 = n2.layout.get("circle-sort-key"));
      for (var o2 = e2.eleSymbolVertexs, s2 = 0, u2 = t2; s2 < u2.length; s2 += 1) {
        var l2 = u2[s2], p2 = l2.feature, h2 = l2.id, c2 = l2.index, f2 = l2.sourceLayerIndex, y2 = this.layers[0]._featureFilter.needGeometry, d2 = { type: p2.type, id: h2, properties: p2.properties, geometry: y2 ? Oo(p2) : [] };
        if (this.layers[0]._featureFilter.filter(new Ji(this.zoom), d2, r2)) {
          y2 || (d2.geometry = Oo(p2));
          var m2 = a2 ? a2.evaluate(d2, {}, r2) : void 0, v2 = n2.getValueAndResolveTokens("esymbol-id", p2);
          v2 && (o2[v2] = true), i3.push({ id: h2, properties: p2.properties, type: p2.type, sourceLayerIndex: f2, index: c2, geometry: d2.geometry, patterns: {}, sortKey: m2, symbolId: v2 });
        }
      }
      a2 && i3.sort(function(t3, e3) {
        return t3.sortKey - e3.sortKey;
      });
      for (var g2 = 0, x2 = i3; g2 < x2.length; g2 += 1) {
        var b2 = x2[g2], w2 = b2.geometry, _2 = b2.index, A2 = b2.sourceLayerIndex, S2 = t2[_2].feature;
        this.symbolFeatures.push(b2), e2.featureIndex.insert(S2, w2, _2, A2, this.index);
      }
    }, ah.prototype.addFeatures = function(t2, e2) {
      for (var r2 = 0, n2 = this.symbolFeatures; r2 < n2.length; r2 += 1) {
        var i3 = n2[r2], a2 = i3.symbolId;
        if (a2) {
          if (!this.symbolIconArray[a2]) {
            var o2 = t2[a2];
            if (!o2) {
              console.log("\u7B26\u53F7\uFF1A" + a2 + "\u6CA1\u6709\u627E\u5230");
              continue;
            }
            this.symbolIconArray[a2] = this.getSymbolData(o2[0]), this.symbolIconArray[a2].CellsBound = { right: o2[1], left: o2[2], top: o2[3], bottom: o2[4] };
          }
          this.addFeature(i3, i3.geometry, i3.index, t2, e2);
        }
      }
    }, ah.prototype.update = function(t2, e2, r2) {
      this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
    }, ah.prototype.isEmpty = function() {
      return 0 === this.layoutVertexArray.length;
    }, ah.prototype.uploadPending = function() {
      return !this.uploaded || this.programConfigurations.needsUpload;
    }, ah.prototype.upload = function(t2) {
      this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, rh.members), this.colorVertexBuffer = t2.createVertexBuffer(this.colorVertexArray, nh.members, true), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
    }, ah.prototype.destroy = function() {
      this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.colorVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.colorVertexArray.clear());
    }, ah.prototype.packUint8ToFloat = function(t2, e2, r2, n2) {
      return [t2, r2];
    }, ah.prototype.getLayoutValue = function(t2, e2, r2) {
      var n2 = this.layers[0], i3 = n2.layout.get(t2), a2 = e2;
      return "constant" !== i3.value.kind || i3.value.value && i3.value.value.length > 0 ? a2 = n2.getValueAndResolveTokens(t2, r2) : (i3.value.value || 0 == i3.value.value) && i3.value.value.toString().length && (a2 = i3.value.value), a2;
    }, ah.prototype._perp2 = function(t2) {
      return [-t2[1], t2[0]];
    }, ah.prototype.countPath = function(t2, e2, r2, n2, i3) {
      for (var a2 = n2 || "miter", o2 = i3 || "square", s2 = 2, u2 = t2.length, l2 = t2[u2 - 2] == t2[0] && t2[u2 - 1] == t2[1], p2 = [], h2 = 0; h2 < u2 / 2; h2++) {
        var c2 = { x: t2[2 * h2], y: t2[2 * h2 + 1] }, f2 = { x: t2[2 * (h2 - 1)], y: t2[2 * (h2 - 1) + 1] };
        h2 >= 1 && c2.x == f2.x && c2.y == f2.y || p2.push(_s(ws(), c2.x, c2.y));
      }
      if (!((u2 = p2.length) < (l2 ? 3 : 2))) {
        "bevel" === a2 && (s2 = 1.05);
        var y2, d2, m2, v2, g2, x2 = { pointArray: [], indexArray: [], paintArray: [], index: 0, color: r2, normalVector: [], len: 5 }, b2 = e2 / 2;
        for (l2 && (y2 = p2[u2 - 2], g2 = this._perp2(ks(ws(), Ss(ws(), p2[0], y2)))), h2 = 0; h2 < u2; h2++) {
          g2 && (v2 = g2), y2 && (d2 = y2), y2 = p2[h2], g2 = (m2 = l2 && h2 == u2 - 1 ? p2[1] : p2[h2 + 1]) ? this._perp2(ks(ws(), Ss(ws(), m2, y2))) : v2, v2 = v2 || g2;
          var w2 = As(ws(), v2, g2);
          0 == w2[0] && 0 == w2[1] || (w2 = ks(ws(), w2));
          var _2 = Ms(v2, g2), A2 = Ms(w2, g2), S2 = v2[0] * g2[1] - v2[1] * g2[0] > 0, z2 = b2 / Math.sqrt((_2 + 1) / 2), I2 = 0 !== A2 ? 1 / A2 : 1 / 0, k2 = d2 && m2, M2 = k2 ? a2 : l2 ? "butt" : o2;
          if (k2 && "round" === M2 && (I2 < 1.05 ? M2 = "miter" : I2 <= 2 && (M2 = "fakeround")), "miter" === M2 && I2 > s2 && (M2 = "bevel"), "bevel" === M2 && (I2 < 100 && I2 > 2 && (M2 = "flipbevel"), I2 < s2 && (M2 = "miter")), "miter" === M2) {
            if (w2 = zs(ws(), w2, z2), d2) {
              var P2 = zs(ws(), v2, b2);
              x2 = this.addCurrentVertex(y2, w2, 0, 0, x2, P2);
            }
            if (m2) {
              var V2 = zs(ws(), g2, b2);
              x2 = this.addCurrentVertex(y2, w2, 0, 0, x2, V2);
            }
          } else if ("flipbevel" === M2) {
            if (I2 > 100)
              w2 = zs(ws(), g2, -1);
            else {
              var C2 = As(ws(), v2, g2), T2 = Vs(ws(), v2, g2), E2 = z2 * Is(C2) / Is(T2);
              w2 = zs(ws(), this._perp2(w2), E2 * (S2 ? -1 : 1));
            }
            this.addCurrentVertex(y2, w2, 0, 0, x2), this.addCurrentVertex(y2, zs(ws(), w2, -1), 0, 0, x2);
          } else if ("bevel" === M2 || "fakeround" === M2) {
            if (d2 && (w2 = zs(ws(), v2, b2), x2 = this.addCurrentVertex(y2, w2, 0, 0, x2)), "fakeround" === M2)
              for (var B2 = 2 * Math.sqrt(2 - 2 * A2), D2 = Math.round(180 * B2 / Math.PI / 20), L2 = 1; L2 < D2; L2++) {
                var F2 = L2 / D2;
                if (0.5 !== F2) {
                  var R2 = F2 - 0.5;
                  F2 += F2 * R2 * (F2 - 1) * ((1.0904 + _2 * (_2 * (3.55645 - 1.43519 * _2) - 3.2452)) * R2 * R2 + (0.848013 + _2 * (0.215638 * _2 - 1.06021)));
                }
                var O2 = Vs(ws(), g2, v2);
                O2 = zs(ws(), O2, F2), O2 = As(ws(), O2, v2), O2 = ks(ws(), O2), O2 = zs(ws(), O2, b2), x2 = this.addCurrentVertex(y2, O2, 0, 0, x2);
              }
            m2 && (w2 = zs(ws(), g2, b2), x2 = this.addCurrentVertex(y2, w2, 0, 0, x2));
          } else if ("butt" === M2)
            w2 = zs(ws(), w2, b2), x2 = this.addCurrentVertex(y2, w2, 0, 0, x2);
          else if ("square" === M2) {
            var j2 = ks(ws(), Vs(ws(), y2, d2 || m2));
            j2 = zs(ws(), j2, b2), w2 = zs(ws(), w2, b2), this.addCurrentVertex(y2, w2, j2, 0, x2);
          } else
            "round" === M2 && (d2 && (this.addCurrentVertex(y2, v2, 0, 0, x2), this.addCurrentVertex(y2, v2, 1, 1, x2)), m2 && (this.addCurrentVertex(y2, g2, -1, -1, x2), this.addCurrentVertex(y2, g2, 0, 0, x2)));
        }
        return x2;
      }
    }, ah.prototype.addCurrentVertex = function(t2, e2, r2, n2, i3, a2) {
      var o2 = As(ws(), t2, e2), s2 = Vs(ws(), t2, e2);
      r2 && (o2 = As(ws(), o2, r2), s2 = As(ws(), s2, r2));
      var u2 = i3.index;
      i3.pointArray = i3.pointArray.concat([o2[0], o2[1]]).concat([s2[0], s2[1]]);
      var l2 = a2 || e2;
      return i3.paintArray = i3.paintArray.concat(i3.color).concat([l2[0], l2[1]]).concat(i3.color).concat([0 - l2[0], 0 - l2[1]]), u2 > 0 && (i3.indexArray = i3.indexArray.concat([u2 - 2, u2 - 1, u2]), i3.indexArray = i3.indexArray.concat([u2 - 1, u2, u2 + 1])), i3.index += 2, i3;
    }, ah.prototype.getSymbolData = function(t2) {
      for (var e2 = [], r2 = [], n2 = [], i3 = (this.layers[0].paint.get("esymbol-color"), 0); i3 < t2.length; i3++) {
        var a2 = t2[i3], o2 = a2[0] * a2[1], s2 = a2[3], u2 = a2[4], l2 = [], p2 = [], h2 = [];
        if (7 == a2[2] || 1 == u2) {
          if (1 == u2 || 8 == u2) {
            var c2 = [a2[5], a2[6]];
            l2 = a2.slice(7);
          } else
            l2 = a2.slice(5);
          p2 = Ys(l2);
          for (var f2 = 0; f2 < l2.length / 2; f2++)
            1 == u2 || 8 == u2 ? h2.push(o2, l2[2 * f2] - c2[0], l2[2 * f2 + 1] - c2[1]) : h2.push(o2, 0, 0);
        } else {
          if (8 == u2)
            var y2 = this.countPath(a2.slice(5), s2, o2, "bevel", "butt");
          else
            y2 = this.countPath(a2.slice(5), s2, o2);
          l2 = y2.pointArray, p2 = y2.indexArray, h2 = y2.paintArray;
        }
        p2 = p2.map(function(t3) {
          return e2.length / 2 + t3;
        }), e2 = e2.concat(l2), r2 = r2.concat(p2), n2 = n2.concat(h2);
      }
      return { pointArray: e2, indexArray: r2, paintArray: n2 };
    }, ah.prototype.addFeature = function(t2, e2, r2, n2, i3) {
      var a2 = this.getLayoutValue("esymbol-rotate", 0, t2), o2 = this.getLayoutValue("esymbol-size", 1, t2), s2 = this.getLayoutValue("esymbol-scaleable", true, t2), u2 = this.layers[0].paint.get("esymbol-color").parameters.zoom >= 0;
      (a2 > 360 || a2 < -360) && (a2 %= 360), o2 < 0 && (o2 = 0 - o2), o2 *= s2 ? 1 : -1;
      for (var l2 = 0, p2 = e2; l2 < p2.length; l2 += 1)
        for (var h2 = 0, c2 = p2[l2]; h2 < c2.length; h2 += 1) {
          var f2 = c2[h2], y2 = f2.x, d2 = f2.y;
          if (!(y2 < 0 || y2 >= 8192 || d2 < 0 || d2 >= 8192)) {
            for (var m2 = this.symbolIconArray[t2.symbolId], v2 = m2.pointArray, g2 = m2.indexArray, x2 = m2.paintArray, b2 = this.segments.prepareSegment(v2.length / 2, this.layoutVertexArray, this.indexArray, t2.sortKey), w2 = Number(b2.vertexLength), _2 = 0; _2 < g2.length / 3; _2++) {
              var A2 = 3 * _2;
              this.indexArray.emplaceBack(w2 + g2[A2], w2 + g2[A2 + 1], w2 + g2[A2 + 2]), b2.primitiveLength++;
            }
            for (var S2 = 0; S2 < v2.length / 4; S2++) {
              var z2 = 4 * S2, I2 = 6 * S2;
              ih(this.layoutVertexArray, y2, d2, v2[z2], v2[z2 + 1], x2[I2 + 1], x2[I2 + 2]), ih(this.layoutVertexArray, y2, d2, v2[z2 + 2], v2[z2 + 3], x2[I2 + 4], x2[I2 + 5]), this.colorVertexArray.emplaceBack(!u2 && x2[I2] > 0 ? 0 - x2[I2] : x2[I2], a2, o2), this.colorVertexArray.emplaceBack(!u2 && x2[I2 + 3] > 0 ? 0 - x2[I2 + 3] : x2[I2 + 3], a2, o2), b2.vertexLength += 2;
            }
          }
        }
      this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, {});
    }, ti("EleSymbolBucket", ah, { omit: ["layers"] });
    var oh = new la({ "esymbol-sort-key": new aa(Gt.layout_esymbol["esymbol-sort-key"]), "esymbol-id": new aa(Gt.layout_esymbol["esymbol-id"]), "esymbol-rotate": new aa(Gt.layout_esymbol["esymbol-rotate"]), "esymbol-size": new aa(Gt.layout_esymbol["esymbol-size"]), "esymbol-scaleable": new aa(Gt.layout_esymbol["esymbol-scaleable"]), "allow-clip": new ia(Gt.layout_esymbol["allow-clip"]) }), sh = { paint: new la({ "esymbol-radius": new aa(Gt.paint_esymbol["esymbol-radius"]), "esymbol-color": new aa(Gt.paint_esymbol["esymbol-color"]), "esymbol-blur": new aa(Gt.paint_esymbol["esymbol-blur"]), "esymbol-opacity": new aa(Gt.paint_esymbol["esymbol-opacity"]), "esymbol-translate": new ia(Gt.paint_esymbol["esymbol-translate"]), "esymbol-translate-anchor": new ia(Gt.paint_esymbol["esymbol-translate-anchor"]), "esymbol-pitch-scale": new ia(Gt.paint_esymbol["esymbol-pitch-scale"]), "esymbol-pitch-alignment": new ia(Gt.paint_esymbol["esymbol-pitch-alignment"]), "esymbol-stroke-width": new aa(Gt.paint_esymbol["esymbol-stroke-width"]), "esymbol-stroke-color": new aa(Gt.paint_esymbol["esymbol-stroke-color"]), "esymbol-stroke-opacity": new aa(Gt.paint_esymbol["esymbol-stroke-opacity"]), "esymbol-minzoom": new aa(Gt.paint_esymbol["esymbol-minzoom"]), "esymbol-maxzoom": new aa(Gt.paint_esymbol["esymbol-maxzoom"]) }), layout: oh };
    function uh(t2, e2) {
      var r2 = bs([], [t2.x, t2.y, 0, 1], e2);
      return new i2(r2[0] / r2[3], r2[1] / r2[3]);
    }
    var lh = { circle: Ts, heatmap: qs, hillshade: Zs, fill: Vu, "fill-extrusion": Xu, line: il, symbol: Hp, background: Wp, raster: th, esymbol: function(t2) {
      function e2(e3) {
        t2.call(this, e3, sh);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.createBucket = function(t3) {
        return new ah(t3);
      }, e2.prototype.getValueAndResolveTokens = function(t3, e3) {
        var r2 = this.layout.get(t3).evaluate(e3, {}), n2 = this._unevaluatedLayout._values[t3];
        return n2.isDataDriven() || un(n2.value) ? r2 : Yp(e3.properties, r2);
      }, e2.prototype.queryRadius = function(t3) {
        var e3 = t3, r2 = e3.symbolFeatures, n2 = 0, i3 = this.layout.get("esymbol-size").value, a2 = this.layout.get("esymbol-scaleable").value;
        if ("constant" === i3.kind)
          n2 = i3.value;
        else
          for (var o2 = 0; o2 < r2.length; o2++) {
            var s2 = this.getValueAndResolveTokens("esymbol-size", r2[o2]);
            s2 > n2 && (n2 = s2);
          }
        return n2 = 2 * n2 * Math.sqrt(2), "constant" === a2.kind ? a2.value && (n2 *= Math.pow(2, e3.zoom - 18)) : n2 = Math.max(n2, n2 * Math.pow(2, e3.zoom - 18)), n2 + ts(this.paint.get("esymbol-translate"));
      }, e2.prototype.queryIntersectsFeature = function(t3, e3, r2, n2, i3, a2, o2, s2, u2) {
        var l2 = es(t3, this.paint.get("esymbol-translate"), this.paint.get("esymbol-translate-anchor"), a2.angle, o2), p2 = 2 * this.layout.get("esymbol-size").evaluate(e3, r2), h2 = this.layout.get("esymbol-scaleable").evaluate(e3, r2), c2 = this.layout.get("esymbol-id").evaluate(e3, r2);
        if (!c2 && 0 != c2 || !u2 || !u2.symbolIconArray || !u2.symbolIconArray[c2])
          return false;
        var f2 = u2.symbolIconArray[c2].CellsBound, y2 = f2.right - f2.left, d2 = f2.top - f2.bottom, m2 = y2 / d2, v2 = this.layout.get("esymbol-rotate").evaluate(e3, r2);
        h2 && (p2 *= Math.pow(2, a2.zoom - 18));
        for (var g2 = "map" === this.paint.get("esymbol-pitch-alignment"), x2 = g2 ? l2 : function(t4, e4) {
          return t4.map(function(t5) {
            return uh(t5, e4);
          });
        }(l2, s2), b2 = g2 ? p2 * o2 : p2, w2 = 0, _2 = n2; w2 < _2.length; w2 += 1)
          for (var A2 = 0, S2 = _2[w2]; A2 < S2.length; A2 += 1) {
            var z2 = S2[A2], I2 = g2 ? z2 : uh(z2, s2), k2 = b2, M2 = bs([], [z2.x, z2.y, 0, 1], s2);
            "viewport" === this.paint.get("esymbol-pitch-scale") && "map" === this.paint.get("esymbol-pitch-alignment") ? k2 *= M2[3] / a2.cameraToCenterDistance : "map" === this.paint.get("esymbol-pitch-scale") && "viewport" === this.paint.get("esymbol-pitch-alignment") && (k2 *= a2.cameraToCenterDistance / M2[3]);
            var P2 = k2 *= 2, V2 = k2;
            m2 <= 1 ? P2 = k2 * m2 : V2 = k2 / m2;
            var C2 = Math.abs(f2.right) / y2 * P2, T2 = Math.abs(f2.left) / y2 * P2, E2 = Math.abs(f2.top) / d2 * V2, B2 = Math.abs(f2.bottom) / d2 * V2, D2 = [[{ x: I2.x + C2, y: I2.y + B2 }, { x: I2.x - T2, y: I2.y + B2 }, { x: I2.x - T2, y: I2.y - E2 }, { x: I2.x + C2, y: I2.y - E2 }]];
            if (0 != v2 && v2 % 360 != 0) {
              v2 = v2 / 180 * Math.PI;
              for (var L2 = 0; L2 < D2[0].length; L2++) {
                var F2 = Ps(ws(), [D2[0][L2].x, D2[0][L2].y], [I2.x, I2.y], v2);
                D2[0][L2] = { x: F2[0], y: F2[1] };
              }
            }
            if (D2[0].push(D2[0][0]), Zo(x2, D2))
              return true;
          }
        return false;
      }, e2;
    }(pa), eline: il }, ph = self.HTMLImageElement, hh = self.HTMLCanvasElement, ch = self.HTMLVideoElement, fh = self.ImageData, yh = self.ImageBitmap, dh = function(t2, e2, r2, n2) {
      this.context = t2, this.format = r2, this.texture = t2.gl.createTexture(), this.update(e2, n2);
    };
    dh.prototype.update = function(t2, e2, r2) {
      var n2 = t2.width, i3 = t2.height, a2 = !(this.size && this.size[0] === n2 && this.size[1] === i3 || r2), o2 = this.context, s2 = o2.gl;
      if (this.useMipmap = Boolean(e2 && e2.useMipmap), s2.bindTexture(s2.TEXTURE_2D, this.texture), o2.pixelStoreUnpackFlipY.set(false), o2.pixelStoreUnpack.set(1), o2.pixelStoreUnpackPremultiplyAlpha.set(this.format === s2.RGBA && (!e2 || false !== e2.premultiply)), a2)
        this.size = [n2, i3], t2 instanceof ph || t2 instanceof hh || t2 instanceof ch || t2 instanceof fh || yh && t2 instanceof yh ? s2.texImage2D(s2.TEXTURE_2D, 0, this.format, this.format, s2.UNSIGNED_BYTE, t2) : s2.texImage2D(s2.TEXTURE_2D, 0, this.format, n2, i3, 0, this.format, s2.UNSIGNED_BYTE, t2.data);
      else {
        var u2 = r2 || { x: 0, y: 0 }, l2 = u2.x, p2 = u2.y;
        t2 instanceof ph || t2 instanceof hh || t2 instanceof ch || t2 instanceof fh || yh && t2 instanceof yh ? s2.texSubImage2D(s2.TEXTURE_2D, 0, l2, p2, s2.RGBA, s2.UNSIGNED_BYTE, t2) : s2.texSubImage2D(s2.TEXTURE_2D, 0, l2, p2, n2, i3, s2.RGBA, s2.UNSIGNED_BYTE, t2.data);
      }
      this.useMipmap && this.isSizePowerOfTwo() && s2.generateMipmap(s2.TEXTURE_2D);
    }, dh.prototype.bind = function(t2, e2, r2) {
      var n2 = this.context.gl;
      n2.bindTexture(n2.TEXTURE_2D, this.texture), r2 !== n2.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (r2 = n2.LINEAR), t2 !== this.filter && (n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_MAG_FILTER, t2), n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_MIN_FILTER, r2 || t2), this.filter = t2), e2 !== this.wrap && (n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_WRAP_S, e2), n2.texParameteri(n2.TEXTURE_2D, n2.TEXTURE_WRAP_T, e2), this.wrap = e2);
    }, dh.prototype.isSizePowerOfTwo = function() {
      return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0;
    }, dh.prototype.destroy = function() {
      this.context.gl.deleteTexture(this.texture), this.texture = null;
    };
    var mh = function(t2, e2) {
      this.width = t2, this.height = e2, this.nextRow = 0, this.image = new Rs({ width: t2, height: e2 }), this.positions = {}, this.uploaded = false;
    };
    mh.prototype.getDash = function(t2, e2) {
      var r2 = this.getKey(t2, e2);
      return this.positions[r2];
    }, mh.prototype.trim = function() {
      var t2, e2 = this.width, r2 = this.height = (t2 = this.nextRow) <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(t2) / Math.LN2));
      this.image.resize({ width: e2, height: r2 });
    }, mh.prototype.getKey = function(t2, e2) {
      return t2.join(",") + e2;
    }, mh.prototype.getDashRanges = function(t2, e2, r2) {
      var n2 = [], i3 = t2.length % 2 == 1 ? -t2[t2.length - 1] * r2 : 0, a2 = t2[0] * r2, o2 = true;
      n2.push({ left: i3, right: a2, isDash: o2, zeroLength: 0 === t2[0] });
      for (var s2 = t2[0], u2 = 1; u2 < t2.length; u2++) {
        var l2 = t2[u2];
        n2.push({ left: i3 = s2 * r2, right: a2 = (s2 += l2) * r2, isDash: o2 = !o2, zeroLength: 0 === l2 });
      }
      return n2;
    }, mh.prototype.addRoundDash = function(t2, e2, r2) {
      for (var n2 = e2 / 2, i3 = -r2; i3 <= r2; i3++)
        for (var a2 = this.width * (this.nextRow + r2 + i3), o2 = 0, s2 = t2[o2], u2 = 0; u2 < this.width; u2++) {
          u2 / s2.right > 1 && (s2 = t2[++o2]);
          var l2 = Math.abs(u2 - s2.left), p2 = Math.abs(u2 - s2.right), h2 = Math.min(l2, p2), c2 = void 0, f2 = i3 / r2 * (n2 + 1);
          if (s2.isDash) {
            var y2 = n2 - Math.abs(f2);
            c2 = Math.sqrt(h2 * h2 + y2 * y2);
          } else
            c2 = n2 - Math.sqrt(h2 * h2 + f2 * f2);
          this.image.data[a2 + u2] = Math.max(0, Math.min(255, c2 + 128));
        }
    }, mh.prototype.addRegularDash = function(t2, e2) {
      for (var r2 = t2.length - 1; r2 >= 0; --r2) {
        var n2 = t2[r2], i3 = t2[r2 + 1];
        n2.zeroLength ? t2.splice(r2, 1) : i3 && i3.isDash === n2.isDash && (i3.left = n2.left, t2.splice(r2, 1));
      }
      var a2 = t2[0], o2 = t2[t2.length - 1];
      a2.isDash === o2.isDash && (a2.left = o2.left - this.width, o2.right = a2.right + this.width);
      for (var s2 = this.width * this.nextRow, u2 = 0, l2 = t2[u2], p2 = 0; p2 < this.width; p2++) {
        p2 / l2.right > 1 && (l2 = t2[++u2]);
        var h2 = Math.abs(p2 - l2.left), c2 = Math.abs(p2 - l2.right), f2 = Math.min(h2, c2);
        this.image.data[s2 + p2] = Math.max(0, Math.min(255, (l2.isDash ? f2 : -f2) + e2 + 128));
      }
    }, mh.prototype.addDash = function(t2, e2) {
      var r2 = this.getKey(t2, e2);
      if (this.positions[r2])
        return this.positions[r2];
      var n2 = "round" === e2, i3 = n2 ? 7 : 0, a2 = 2 * i3 + 1;
      if (this.nextRow + a2 > this.height)
        return S("LineAtlas out of space"), null;
      0 === t2.length && t2.push(1);
      for (var o2 = 0, s2 = 0; s2 < t2.length; s2++)
        t2[s2] < 0 && (S("Negative value is found in line dasharray, replacing values with 0"), t2[s2] = 0), o2 += t2[s2];
      if (0 !== o2) {
        var u2 = this.width / o2, l2 = this.getDashRanges(t2, this.width, u2);
        n2 ? this.addRoundDash(l2, u2, i3) : this.addRegularDash(l2, "square" === e2 ? 0.5 * u2 : 0);
      }
      var p2 = this.nextRow + i3;
      this.nextRow += a2;
      var h2 = { tl: [p2, i3], br: [o2, 0] };
      return this.positions[r2] = h2, h2;
    }, ti("LineAtlas", mh);
    var vh = function(t2) {
      var e2 = this;
      this._callback = t2, this._triggered = false, "undefined" != typeof MessageChannel && (this._channel = new MessageChannel(), this._channel.port2.onmessage = function() {
        e2._triggered = false, e2._callback();
      });
    };
    vh.prototype.trigger = function() {
      var t2 = this;
      this._triggered || (this._triggered = true, this._channel ? this._channel.port1.postMessage(true) : setTimeout(function() {
        t2._triggered = false, t2._callback();
      }, 0));
    }, vh.prototype.remove = function() {
      delete this._channel, this._callback = function() {
      };
    };
    var gh = function() {
      this.tasks = {}, this.taskQueue = [], v(["process"], this), this.invoker = new vh(this.process), this.nextId = 0;
    };
    gh.prototype.add = function(t2, e2) {
      var r2, n2, i3, a2, o2 = this, s2 = this.nextId++;
      return this.tasks[s2] = { fn: t2, metadata: e2, priority: (r2 = e2, n2 = r2.type, i3 = r2.isSymbolTile, a2 = r2.zoom, a2 = a2 || 0, "message" === n2 ? 0 : "maybePrepare" !== n2 || i3 ? "parseTile" !== n2 || i3 ? "parseTile" === n2 && i3 ? 300 - a2 : "maybePrepare" === n2 && i3 ? 400 - a2 : 500 : 200 - a2 : 100 - a2), id: s2 }, this.taskQueue.push(s2), this.invoker.trigger(), { cancel: function() {
        delete o2.tasks[s2];
      } };
    }, gh.prototype.process = function() {
      var t2 = this;
      try {
        if (this.taskQueue = this.taskQueue.filter(function(e3) {
          return !!t2.tasks[e3];
        }), !this.taskQueue.length)
          return;
        var e2 = this.pick();
        if (null === e2)
          return;
        var r2 = this.tasks[e2];
        if (delete this.tasks[e2], this.taskQueue.length && this.invoker.trigger(), !r2)
          return;
        r2.fn();
      } finally {
      }
    }, gh.prototype.pick = function() {
      for (var t2 = null, e2 = 1 / 0, r2 = 0; r2 < this.taskQueue.length; r2++) {
        var n2 = this.tasks[this.taskQueue[r2]];
        n2.priority < e2 && (e2 = n2.priority, t2 = r2);
      }
      if (null === t2)
        return null;
      var i3 = this.taskQueue[t2];
      return this.taskQueue.splice(t2, 1), i3;
    }, gh.prototype.remove = function() {
      this.invoker.remove();
    };
    var xh = function(t2, e2, r2) {
      this.target = t2, this.parent = e2, this.mapId = r2, this.callbacks = {}, this.cancelCallbacks = {}, v(["receive"], this), this.target.addEventListener("message", this.receive, false), this.globalScope = k() ? t2 : self, this.scheduler = new gh();
    };
    xh.prototype.send = function(t2, e2, r2, n2, i3, a2) {
      var o2 = this;
      void 0 === i3 && (i3 = false);
      var s2 = Math.round(1e18 * Math.random()).toString(36).substring(0, 10);
      r2 && (r2.metadata = a2, this.callbacks[s2] = r2);
      var u2, l2 = V(this.globalScope) ? void 0 : [];
      return (u2 = e2) && "undefined" != typeof ArrayBuffer && (u2 instanceof ArrayBuffer || u2.constructor && "ArrayBuffer" === u2.constructor.name) && (e2 = e2.slice(0)), this.target.postMessage({ id: s2, type: t2, hasCallback: !!r2, targetMapId: n2, mustQueue: i3, sourceMapId: this.mapId, data: ii(e2, l2) }, l2), { cancel: function() {
        r2 && delete o2.callbacks[s2], o2.target.postMessage({ id: s2, type: "<cancel>", targetMapId: n2, sourceMapId: o2.mapId });
      } };
    }, xh.prototype.receive = function(t2) {
      var e2 = this, r2 = t2.data, n2 = r2.id;
      if (n2 && (!r2.targetMapId || this.mapId === r2.targetMapId))
        if ("<cancel>" === r2.type) {
          var i3 = this.cancelCallbacks[n2];
          delete this.cancelCallbacks[n2], i3 && i3.cancel();
        } else if (k() || r2.mustQueue) {
          var a2 = this.callbacks[n2];
          this.cancelCallbacks[n2] = this.scheduler.add(function() {
            return e2.processTask(n2, r2);
          }, a2 && a2.metadata || { type: "message" });
        } else
          this.processTask(n2, r2);
    }, xh.prototype.processTask = function(t2, e2) {
      var r2 = this;
      if ("<response>" === e2.type) {
        var n2 = this.callbacks[t2];
        delete this.callbacks[t2], n2 && (e2.error ? n2(ai(e2.error)) : n2(null, ai(e2.data)));
      } else {
        var i3 = V(this.globalScope) ? void 0 : [], a2 = e2.hasCallback ? function(e3, n3) {
          delete r2.cancelCallbacks[t2], r2.target.postMessage({ id: t2, type: "<response>", sourceMapId: r2.mapId, error: e3 ? ii(e3) : null, data: ii(n3, i3) }, i3);
        } : function(t3) {
        }, o2 = ai(e2.data);
        if (this.parent[e2.type])
          this.parent[e2.type](e2.sourceMapId, o2, a2);
        else if (this.parent.getWorkerSource) {
          var s2 = e2.type.split(".");
          this.parent.getWorkerSource(e2.sourceMapId, s2[0], o2.source)[s2[1]](o2, a2);
        } else
          a2(new Error("Could not find function " + e2.type));
      }
    }, xh.prototype.remove = function() {
      this.scheduler.remove(), this.target.removeEventListener("message", this.receive, false);
    };
    var bh = function(t2, e2) {
      this.points = t2, this.planes = e2;
    };
    bh.fromInvProjectionMatrix = function(t2, e2, r2) {
      var n2 = Math.pow(2, r2), i3 = [[-1, 1, -1, 1], [1, 1, -1, 1], [1, -1, -1, 1], [-1, -1, -1, 1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, -1, 1, 1], [-1, -1, 1, 1]].map(function(e3) {
        return bs([], e3, t2);
      }).map(function(t3) {
        return function(t4, e3, r3) {
          return t4[0] = e3[0] * r3, t4[1] = e3[1] * r3, t4[2] = e3[2] * r3, t4[3] = e3[3] * r3, t4;
        }([], t3, 1 / t3[3] / e2 * n2);
      }), a2 = [[0, 1, 2], [6, 5, 4], [0, 3, 7], [2, 1, 5], [3, 2, 6], [0, 4, 5]].map(function(t3) {
        var e3, r3, n3 = function(t4, e4) {
          var r4 = e4[0], n4 = e4[1], i4 = e4[2], a4 = r4 * r4 + n4 * n4 + i4 * i4;
          return a4 > 0 && (a4 = 1 / Math.sqrt(a4)), t4[0] = e4[0] * a4, t4[1] = e4[1] * a4, t4[2] = e4[2] * a4, t4;
        }([], function(t4, e4, r4) {
          var n4 = e4[0], i4 = e4[1], a4 = e4[2], o2 = r4[0], s2 = r4[1], u2 = r4[2];
          return t4[0] = i4 * u2 - a4 * s2, t4[1] = a4 * o2 - n4 * u2, t4[2] = n4 * s2 - i4 * o2, t4;
        }([], xs([], i3[t3[0]], i3[t3[1]]), xs([], i3[t3[2]], i3[t3[1]]))), a3 = -((e3 = n3)[0] * (r3 = i3[t3[1]])[0] + e3[1] * r3[1] + e3[2] * r3[2]);
        return n3.concat(a3);
      });
      return new bh(i3, a2);
    };
    var wh = function(t2, e2) {
      this.min = t2, this.max = e2, this.center = function(t3, e3, r2) {
        return t3[0] = 0.5 * e3[0], t3[1] = 0.5 * e3[1], t3[2] = 0.5 * e3[2], t3;
      }([], function(t3, e3, r2) {
        return t3[0] = e3[0] + r2[0], t3[1] = e3[1] + r2[1], t3[2] = e3[2] + r2[2], t3;
      }([], this.min, this.max));
    };
    wh.prototype.quadrant = function(t2) {
      for (var e2 = [t2 % 2 == 0, t2 < 2], r2 = vs(this.min), n2 = vs(this.max), i3 = 0; i3 < e2.length; i3++)
        r2[i3] = e2[i3] ? this.min[i3] : this.center[i3], n2[i3] = e2[i3] ? this.center[i3] : this.max[i3];
      return n2[2] = this.max[2], new wh(r2, n2);
    }, wh.prototype.distanceX = function(t2) {
      return Math.max(Math.min(this.max[0], t2[0]), this.min[0]) - t2[0];
    }, wh.prototype.distanceY = function(t2) {
      return Math.max(Math.min(this.max[1], t2[1]), this.min[1]) - t2[1];
    }, wh.prototype.intersects = function(t2) {
      for (var e2, r2, n2 = [[this.min[0], this.min[1], 0, 1], [this.max[0], this.min[1], 0, 1], [this.max[0], this.max[1], 0, 1], [this.min[0], this.max[1], 0, 1]], i3 = true, a2 = 0; a2 < t2.planes.length; a2++) {
        for (var o2 = t2.planes[a2], s2 = 0, u2 = 0; u2 < n2.length; u2++)
          s2 += (e2 = o2)[0] * (r2 = n2[u2])[0] + e2[1] * r2[1] + e2[2] * r2[2] + e2[3] * r2[3] >= 0;
        if (0 === s2)
          return 0;
        s2 !== n2.length && (i3 = false);
      }
      if (i3)
        return 2;
      for (var l2 = 0; l2 < 3; l2++) {
        for (var p2 = Number.MAX_VALUE, h2 = -Number.MAX_VALUE, c2 = 0; c2 < t2.points.length; c2++) {
          var f2 = t2.points[c2][l2] - this.min[l2];
          p2 = Math.min(p2, f2), h2 = Math.max(h2, f2);
        }
        if (h2 < 0 || p2 > this.max[l2] - this.min[l2])
          return 0;
      }
      return 1;
    };
    var _h = function(t2, e2) {
      t2 && (e2 ? this.setSouthWest(t2).setNorthEast(e2) : 4 === t2.length ? this.setSouthWest([t2[0], t2[1]]).setNorthEast([t2[2], t2[3]]) : this.setSouthWest(t2[0]).setNorthEast(t2[1]));
    };
    _h.prototype.setNorthEast = function(t2) {
      return this._ne = t2 instanceof Ah ? new Ah(t2.lng, t2.lat) : Ah.convert(t2), this;
    }, _h.prototype.setSouthWest = function(t2) {
      return this._sw = t2 instanceof Ah ? new Ah(t2.lng, t2.lat) : Ah.convert(t2), this;
    }, _h.prototype.extend = function(t2) {
      var e2, r2, n2 = this._sw, i3 = this._ne;
      if (t2 instanceof Ah)
        e2 = t2, r2 = t2;
      else {
        if (!(t2 instanceof _h))
          return Array.isArray(t2) ? 4 === t2.length || t2.every(Array.isArray) ? this.extend(_h.convert(t2)) : this.extend(Ah.convert(t2)) : this;
        if (r2 = t2._ne, !(e2 = t2._sw) || !r2)
          return this;
      }
      return n2 || i3 ? (n2.lng = Math.min(e2.lng, n2.lng), n2.lat = Math.min(e2.lat, n2.lat), i3.lng = Math.max(r2.lng, i3.lng), i3.lat = Math.max(r2.lat, i3.lat)) : (this._sw = new Ah(e2.lng, e2.lat), this._ne = new Ah(r2.lng, r2.lat)), this;
    }, _h.prototype.getCenter = function() {
      return new Ah((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);
    }, _h.prototype.getSouthWest = function() {
      return this._sw;
    }, _h.prototype.getNorthEast = function() {
      return this._ne;
    }, _h.prototype.getNorthWest = function() {
      return new Ah(this.getWest(), this.getNorth());
    }, _h.prototype.getSouthEast = function() {
      return new Ah(this.getEast(), this.getSouth());
    }, _h.prototype.getWest = function() {
      return this._sw.lng;
    }, _h.prototype.getSouth = function() {
      return this._sw.lat;
    }, _h.prototype.getEast = function() {
      return this._ne.lng;
    }, _h.prototype.getNorth = function() {
      return this._ne.lat;
    }, _h.prototype.toArray = function() {
      return [this._sw.toArray(), this._ne.toArray()];
    }, _h.prototype.toString = function() {
      return "LngLatBounds(" + this._sw.toString() + ", " + this._ne.toString() + ")";
    }, _h.prototype.isEmpty = function() {
      return !(this._sw && this._ne);
    }, _h.prototype.contains = function(t2) {
      var e2 = Ah.convert(t2), r2 = e2.lng, n2 = e2.lat, i3 = this._sw.lng <= r2 && r2 <= this._ne.lng;
      return this._sw.lng > this._ne.lng && (i3 = this._sw.lng >= r2 && r2 >= this._ne.lng), this._sw.lat <= n2 && n2 <= this._ne.lat && i3;
    }, _h.convert = function(t2) {
      return !t2 || t2 instanceof _h ? t2 : new _h(t2);
    };
    var Ah = function(t2, e2) {
      if (isNaN(t2) || isNaN(e2))
        throw new Error("Invalid LngLat object: (" + t2 + ", " + e2 + ")");
      this.lng = +t2, this.lat = +e2;
    };
    function Sh(t2, e2, r2) {
      var n2 = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r2);
      return [t2 * n2 - 2 * Math.PI * 6378137 / 2, e2 * n2 - 2 * Math.PI * 6378137 / 2];
    }
    Ah.prototype.wrap = function() {
      return new Ah(l(this.lng, -180, 180), this.lat);
    }, Ah.prototype.toArray = function() {
      return [this.lng, this.lat];
    }, Ah.prototype.toString = function() {
      return "LngLat(" + this.lng + ", " + this.lat + ")";
    }, Ah.prototype.distanceTo = function(t2) {
      var e2 = Math.PI / 180, r2 = this.lat * e2, n2 = t2.lat * e2, i3 = Math.sin(r2) * Math.sin(n2) + Math.cos(r2) * Math.cos(n2) * Math.cos((t2.lng - this.lng) * e2);
      return 63710088e-1 * Math.acos(Math.min(i3, 1));
    }, Ah.prototype.toBounds = function(t2) {
      void 0 === t2 && (t2 = 0);
      var e2 = 360 * t2 / 40075017, r2 = e2 / Math.cos(Math.PI / 180 * this.lat);
      return new _h(new Ah(this.lng - r2, this.lat - e2), new Ah(this.lng + r2, this.lat + e2));
    }, Ah.convert = function(t2) {
      if (t2 instanceof Ah)
        return t2;
      if (Array.isArray(t2) && (2 === t2.length || 3 === t2.length))
        return new Ah(Number(t2[0]), Number(t2[1]));
      if (!Array.isArray(t2) && "object" == typeof t2 && null !== t2)
        return new Ah(Number("lng" in t2 ? t2.lng : t2.lon), Number(t2.lat));
      throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");
    };
    var zh = 2 * Math.PI * 63710088e-1;
    function Ih(t2) {
      return zh * Math.cos(t2 * Math.PI / 180);
    }
    function kh(t2) {
      return (180 + t2) / 360;
    }
    function Mh(t2) {
      return -90 == t2 ? 1 : 90 == t2 ? 0 : (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t2 * Math.PI / 360))) / 360;
    }
    function Ph(t2, e2) {
      return t2 / Ih(e2);
    }
    function Vh(t2) {
      return 360 * t2 - 180;
    }
    function Ch(t2) {
      return 360 / Math.PI * Math.atan(Math.exp((180 - 360 * t2) * Math.PI / 180)) - 90;
    }
    function Th(t2, e2) {
      return t2 * Ih(Ch(e2));
    }
    function Eh(t2) {
      return 1 / Math.cos(t2 * Math.PI / 180);
    }
    var Bh = function(t2, e2, r2) {
      void 0 === r2 && (r2 = 0), this.x = +t2, this.y = +e2, this.z = +r2;
    };
    Bh.fromLngLat = function(t2, e2) {
      void 0 === e2 && (e2 = 0);
      var r2 = Ah.convert(t2);
      return new Bh(kh(r2.lng), Mh(r2.lat), Ph(e2, r2.lat));
    }, Bh.prototype.toLngLat = function() {
      return new Ah(Vh(this.x), Ch(this.y));
    }, Bh.prototype.toAltitude = function() {
      return Th(this.z, this.y);
    }, Bh.prototype.meterInMercatorCoordinateUnits = function() {
      return 1 / zh * Eh(Ch(this.y));
    };
    var Dh = function(t2, e2, r2, n2) {
      if (void 0 === t2 && (t2 = 0), void 0 === e2 && (e2 = 0), void 0 === r2 && (r2 = 0), void 0 === n2 && (n2 = 0), isNaN(t2) || t2 < 0 || isNaN(e2) || e2 < 0 || isNaN(r2) || r2 < 0 || isNaN(n2) || n2 < 0)
        throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");
      this.top = t2, this.bottom = e2, this.left = r2, this.right = n2;
    };
    Dh.prototype.interpolate = function(t2, e2, r2) {
      return null != e2.top && null != t2.top && (this.top = or(t2.top, e2.top, r2)), null != e2.bottom && null != t2.bottom && (this.bottom = or(t2.bottom, e2.bottom, r2)), null != e2.left && null != t2.left && (this.left = or(t2.left, e2.left, r2)), null != e2.right && null != t2.right && (this.right = or(t2.right, e2.right, r2)), this;
    }, Dh.prototype.getCenter = function(t2, e2) {
      var r2 = u((this.left + t2 - this.right) / 2, 0, t2), n2 = u((this.top + e2 - this.bottom) / 2, 0, e2);
      return new i2(r2, n2);
    }, Dh.prototype.equals = function(t2) {
      return this.top === t2.top && this.bottom === t2.bottom && this.left === t2.left && this.right === t2.right;
    }, Dh.prototype.clone = function() {
      return new Dh(this.top, this.bottom, this.left, this.right);
    }, Dh.prototype.toJSON = function() {
      return { top: this.top, bottom: this.bottom, left: this.left, right: this.right };
    };
    var Lh = function(t2, e2, r2, n2, i3) {
      this.tileSize = 512, this.maxValidLatitude = 85.051129, this._renderWorldCopies = void 0 === i3 || i3, this._minZoom = t2 || 0, this._maxZoom = e2 || 22, this._minPitch = null == r2 ? 0 : r2, this._maxPitch = null == n2 ? 60 : n2, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new Ah(0, 0), this.zoom = 0, this.angle = 0, this._fov = 0.6435011087932844, this._pitch = 0, this._unmodified = true, this._edgeInsets = new Dh(), this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
    }, Fh = { minZoom: { configurable: true }, maxZoom: { configurable: true }, minPitch: { configurable: true }, maxPitch: { configurable: true }, renderWorldCopies: { configurable: true }, worldSize: { configurable: true }, centerOffset: { configurable: true }, size: { configurable: true }, bearing: { configurable: true }, pitch: { configurable: true }, fov: { configurable: true }, zoom: { configurable: true }, center: { configurable: true }, padding: { configurable: true }, centerPoint: { configurable: true }, unmodified: { configurable: true }, point: { configurable: true } };
    Lh.prototype.clone = function() {
      var t2 = new Lh(this._minZoom, this._maxZoom, this._minPitch, this.maxPitch, this._renderWorldCopies);
      return t2.tileSize = this.tileSize, t2.latRange = this.latRange, t2.width = this.width, t2.height = this.height, t2._center = this._center, t2.zoom = this.zoom, t2.angle = this.angle, t2._fov = this._fov, t2._pitch = this._pitch, t2._unmodified = this._unmodified, t2._edgeInsets = this._edgeInsets.clone(), t2._calcMatrices(), t2;
    }, Fh.minZoom.get = function() {
      return this._minZoom;
    }, Fh.minZoom.set = function(t2) {
      this._minZoom !== t2 && (this._minZoom = t2, this.zoom = Math.max(this.zoom, t2));
    }, Fh.maxZoom.get = function() {
      return this._maxZoom;
    }, Fh.maxZoom.set = function(t2) {
      this._maxZoom !== t2 && (this._maxZoom = t2, this.zoom = Math.min(this.zoom, t2));
    }, Fh.minPitch.get = function() {
      return this._minPitch;
    }, Fh.minPitch.set = function(t2) {
      this._minPitch !== t2 && (this._minPitch = t2, this.pitch = Math.max(this.pitch, t2));
    }, Fh.maxPitch.get = function() {
      return this._maxPitch;
    }, Fh.maxPitch.set = function(t2) {
      this._maxPitch !== t2 && (this._maxPitch = t2, this.pitch = Math.min(this.pitch, t2));
    }, Fh.renderWorldCopies.get = function() {
      return this._renderWorldCopies;
    }, Fh.renderWorldCopies.set = function(t2) {
      void 0 === t2 ? t2 = true : null === t2 && (t2 = false), this._renderWorldCopies = t2;
    }, Fh.worldSize.get = function() {
      return this.tileSize * this.scale;
    }, Fh.centerOffset.get = function() {
      return this.centerPoint._sub(this.size._div(2));
    }, Fh.size.get = function() {
      return new i2(this.width, this.height);
    }, Fh.bearing.get = function() {
      return -this.angle / Math.PI * 180;
    }, Fh.bearing.set = function(t2) {
      var e2 = -l(t2, -180, 180) * Math.PI / 180;
      this.angle !== e2 && (this._unmodified = false, this.angle = e2, this._calcMatrices(), this.rotationMatrix = as(), os(this.rotationMatrix, this.rotationMatrix, this.angle));
    }, Fh.pitch.get = function() {
      return this._pitch / Math.PI * 180;
    }, Fh.pitch.set = function(t2) {
      var e2 = u(t2, this.minPitch, this.maxPitch) / 180 * Math.PI;
      this._pitch !== e2 && (this._unmodified = false, this._pitch = e2, this._calcMatrices());
    }, Fh.fov.get = function() {
      return this._fov / Math.PI * 180;
    }, Fh.fov.set = function(t2) {
      t2 = Math.max(0.01, Math.min(60, t2)), this._fov !== t2 && (this._unmodified = false, this._fov = t2 / 180 * Math.PI, this._calcMatrices());
    }, Fh.zoom.get = function() {
      return this._zoom;
    }, Fh.zoom.set = function(t2) {
      var e2 = Math.min(Math.max(t2, this.minZoom), this.maxZoom);
      this._zoom !== e2 && (this._unmodified = false, this._zoom = e2, this.scale = this.zoomScale(e2), this.tileZoom = Math.floor(e2), this.zoomFraction = e2 - this.tileZoom, this._constrain(), this._calcMatrices());
    }, Fh.center.get = function() {
      return this._center;
    }, Fh.center.set = function(t2) {
      t2.lat === this._center.lat && t2.lng === this._center.lng || (this._unmodified = false, this._center = t2, this._constrain(), this._calcMatrices());
    }, Fh.padding.get = function() {
      return this._edgeInsets.toJSON();
    }, Fh.padding.set = function(t2) {
      this._edgeInsets.equals(t2) || (this._unmodified = false, this._edgeInsets.interpolate(this._edgeInsets, t2, 1), this._calcMatrices());
    }, Fh.centerPoint.get = function() {
      return this._edgeInsets.getCenter(this.width, this.height);
    }, Lh.prototype.isPaddingEqual = function(t2) {
      return this._edgeInsets.equals(t2);
    }, Lh.prototype.interpolatePadding = function(t2, e2, r2) {
      this._unmodified = false, this._edgeInsets.interpolate(t2, e2, r2), this._constrain(), this._calcMatrices();
    }, Lh.prototype.coveringZoomLevel = function(t2) {
      var e2 = (t2.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t2.tileSize));
      return Math.max(0, e2);
    }, Lh.prototype.getVisibleUnwrappedCoordinates = function(t2) {
      var e2 = [new ec(0, t2)];
      if (this._renderWorldCopies)
        for (var r2 = this.pointCoordinate(new i2(0, 0)), n2 = this.pointCoordinate(new i2(this.width, 0)), a2 = this.pointCoordinate(new i2(this.width, this.height)), o2 = this.pointCoordinate(new i2(0, this.height)), s2 = Math.floor(Math.min(r2.x, n2.x, a2.x, o2.x)), u2 = Math.floor(Math.max(r2.x, n2.x, a2.x, o2.x)), l2 = s2 - 1; l2 <= u2 + 1; l2++)
          0 !== l2 && e2.push(new ec(l2, t2));
      return e2;
    }, Lh.prototype.coveringTiles = function(t2) {
      if ("Sg4326" == t2.reference)
        return this.gaode_coveringTiles(t2);
      var e2 = this.coveringZoomLevel(t2), r2 = e2;
      if (void 0 !== t2.minzoom && e2 < t2.minzoom)
        return [];
      void 0 !== t2.maxzoom && e2 > t2.maxzoom && (e2 = t2.maxzoom);
      var n2 = Bh.fromLngLat(this.center), i3 = Math.pow(2, e2), a2 = [i3 * n2.x, i3 * n2.y, 0], o2 = bh.fromInvProjectionMatrix(this.invProjMatrix, this.worldSize, e2), s2 = t2.minzoom || 0;
      this.pitch <= 60 && this._edgeInsets.top < 0.1 && (s2 = e2);
      var u2 = function(t3) {
        return { aabb: new wh([t3 * i3, 0, 0], [(t3 + 1) * i3, i3, 0]), zoom: 0, x: 0, y: 0, wrap: t3, fullyVisible: false };
      }, l2 = [], p2 = [], h2 = e2, c2 = t2.reparseOverscaled ? r2 : e2;
      if (this._renderWorldCopies)
        for (var f2 = 1; f2 <= 3; f2++)
          l2.push(u2(-f2)), l2.push(u2(f2));
      for (l2.push(u2(0)); l2.length > 0; ) {
        var y2 = l2.pop(), d2 = y2.x, m2 = y2.y, v2 = y2.fullyVisible;
        if (!v2) {
          var g2 = y2.aabb.intersects(o2);
          if (0 === g2)
            continue;
          v2 = 2 === g2;
        }
        var x2 = y2.aabb.distanceX(a2), b2 = y2.aabb.distanceY(a2), w2 = Math.max(Math.abs(x2), Math.abs(b2));
        if (y2.zoom === h2 || w2 > 3 + (1 << h2 - y2.zoom) - 2 && y2.zoom >= s2)
          p2.push({ tileID: new rc(y2.zoom === h2 ? c2 : y2.zoom, y2.wrap, y2.zoom, d2, m2), distanceSq: Cs([a2[0] - 0.5 - d2, a2[1] - 0.5 - m2]) });
        else
          for (var _2 = 0; _2 < 4; _2++) {
            var A2 = (d2 << 1) + _2 % 2, S2 = (m2 << 1) + (_2 >> 1);
            l2.push({ aabb: y2.aabb.quadrant(_2), zoom: y2.zoom + 1, x: A2, y: S2, wrap: y2.wrap, fullyVisible: v2 });
          }
      }
      return p2.sort(function(t3, e3) {
        return t3.distanceSq - e3.distanceSq;
      }).map(function(t3) {
        return t3.tileID;
      });
    }, Lh.prototype.gaode_coveringTiles = function(t2) {
      var e2 = this.coveringZoomLevel(t2), r2 = e2;
      if (void 0 !== t2.minzoom && e2 < t2.minzoom)
        return [];
      void 0 !== t2.maxzoom && e2 > t2.maxzoom && (e2 = t2.maxzoom);
      var n2 = Bh.fromLngLat(this.center), i3 = [], a2 = this.getBounds(), o2 = [e2], s2 = t2.zoomRule;
      if (s2) {
        o2 = [];
        for (var u2 = 0, l2 = s2.length; u2 < l2; u2++)
          for (var p2 = s2[u2], h2 = Object.keys(p2), c2 = 0, f2 = h2.length; c2 < f2; c2++)
            if (h2[c2].indexOf(e2) >= 0) {
              var y2 = p2[h2[c2]];
              o2.indexOf(y2) < 0 && o2.push(Number(y2));
              break;
            }
      }
      for (var d2 = t2.reparseOverscaled ? r2 : e2, m2 = 0, v2 = o2.length; m2 < v2; m2++)
        this.gaode_calulate_xy(i3, o2[m2], a2, t2, s2[m2], n2, d2);
      return i3.sort(function(t3, e3) {
        return t3.distanceSq - e3.distanceSq;
      }).map(function(t3) {
        return t3.tileID;
      });
    }, Lh.prototype.gaode_calulate_xy = function(t2, e2, r2, n2, i3, a2, o2) {
      var s2 = n2.reference, u2 = n2.sourceID, l2 = Co(e2, r2._ne.lng, r2._ne.lat), p2 = Co(e2, r2._sw.lng, r2._sw.lat), h2 = Math.pow(2, e2), c2 = Math.max(l2.x, p2.x), f2 = Math.min(l2.x, p2.x), y2 = Math.max(l2.y, p2.y), d2 = Math.min(l2.y, p2.y);
      this._renderWorldCopies ? f2 <= 0 && f2-- : (c2 = Math.min(c2, h2 - 1), f2 = Math.max(f2, 0), y2 = Math.min(y2, h2 - 1), d2 = Math.max(d2, 0));
      var m2 = [h2 * a2.x, h2 * a2.y, 0];
      i3 = JSON.stringify(i3);
      for (var v2 = f2; v2 <= c2; v2++)
        for (var g2 = d2; g2 <= y2; g2++) {
          var x2 = Fo(v2, g2, e2, "all"), b2 = v2, w2 = 0;
          this._renderWorldCopies && ((b2 %= h2) < 0 && (b2 += h2), w2 = Math.floor(v2 / h2)), t2.push({ tileID: new rc(e2, w2, e2, b2, g2, s2, u2, i3, [x2.top, x2.height], o2), distanceSq: Cs([m2[0] - v2 - 0.5, m2[1] - x2.top - x2.height / 2]) });
        }
    }, Lh.prototype.resize = function(t2, e2) {
      this.width = t2, this.height = e2, this.pixelsToGLUnits = [2 / t2, -2 / e2], this._constrain(), this._calcMatrices();
    }, Fh.unmodified.get = function() {
      return this._unmodified;
    }, Lh.prototype.zoomScale = function(t2) {
      return Math.pow(2, t2);
    }, Lh.prototype.scaleZoom = function(t2) {
      return Math.log(t2) / Math.LN2;
    }, Lh.prototype.project = function(t2) {
      var e2 = u(t2.lat, -this.maxValidLatitude, this.maxValidLatitude);
      return new i2(kh(t2.lng) * this.worldSize, Mh(e2) * this.worldSize);
    }, Lh.prototype.unproject = function(t2) {
      return new Bh(t2.x / this.worldSize, t2.y / this.worldSize).toLngLat();
    }, Fh.point.get = function() {
      return this.project(this.center);
    }, Lh.prototype.setLocationAtPoint = function(t2, e2) {
      var r2 = this.pointCoordinate(e2), n2 = this.pointCoordinate(this.centerPoint), i3 = this.locationCoordinate(t2), a2 = new Bh(i3.x - (r2.x - n2.x), i3.y - (r2.y - n2.y));
      this.center = this.coordinateLocation(a2), this._renderWorldCopies && (this.center = this.center.wrap());
    }, Lh.prototype.locationPoint = function(t2) {
      return this.coordinatePoint(this.locationCoordinate(t2));
    }, Lh.prototype.pointLocation = function(t2) {
      return this.coordinateLocation(this.pointCoordinate(t2));
    }, Lh.prototype.locationCoordinate = function(t2) {
      return Bh.fromLngLat(t2);
    }, Lh.prototype.coordinateLocation = function(t2) {
      return t2.toLngLat();
    }, Lh.prototype.pointCoordinate = function(t2) {
      var e2 = [t2.x, t2.y, 0, 1], r2 = [t2.x, t2.y, 1, 1];
      bs(e2, e2, this.pixelMatrixInverse), bs(r2, r2, this.pixelMatrixInverse);
      var n2 = e2[3], i3 = r2[3], a2 = e2[1] / n2, o2 = r2[1] / i3, s2 = e2[2] / n2, u2 = r2[2] / i3, l2 = s2 === u2 ? 0 : (0 - s2) / (u2 - s2);
      return new Bh(or(e2[0] / n2, r2[0] / i3, l2) / this.worldSize, or(a2, o2, l2) / this.worldSize);
    }, Lh.prototype.coordinatePoint = function(t2) {
      var e2 = [t2.x * this.worldSize, t2.y * this.worldSize, 0, 1];
      return bs(e2, e2, this.pixelMatrix), new i2(e2[0] / e2[3], e2[1] / e2[3]);
    }, Lh.prototype.getBounds = function() {
      return new _h().extend(this.pointLocation(new i2(0, 0))).extend(this.pointLocation(new i2(this.width, 0))).extend(this.pointLocation(new i2(this.width, this.height))).extend(this.pointLocation(new i2(0, this.height)));
    }, Lh.prototype.getMaxBounds = function() {
      return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new _h([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null;
    }, Lh.prototype.setMaxBounds = function(t2) {
      t2 ? (this.lngRange = [t2.getWest(), t2.getEast()], this.latRange = [t2.getSouth(), t2.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);
    }, Lh.prototype.calculatePosMatrix = function(t2, e2) {
      void 0 === e2 && (e2 = false);
      var r2 = t2.canonical, n2 = "Sg4326" == r2.reference;
      n2 && (e2 = true);
      var i3 = t2.key, a2 = e2 ? this._alignedPosMatrixCache : this._posMatrixCache;
      if (a2[i3])
        return a2[i3];
      var o2 = this.worldSize / this.zoomScale(r2.z), s2 = r2.x + Math.pow(2, r2.z) * t2.wrap, u2 = us(new Float64Array(16));
      if (n2) {
        var l2 = r2._tileY;
        hs(u2, u2, [s2 * o2, l2[0] * o2, 0]), cs(u2, u2, [1, l2[1], 1]);
      } else
        hs(u2, u2, [s2 * o2, r2.y * o2, 0]);
      return cs(u2, u2, [o2 / 8192, o2 / 8192, 1]), ps(u2, e2 ? this.alignedProjMatrix : this.projMatrix, u2), a2[i3] = new Float32Array(u2), a2[i3];
    }, Lh.prototype.customLayerMatrix = function() {
      return this.mercatorMatrix.slice();
    }, Lh.prototype._constrain = function() {
      if (this.center && this.width && this.height && !this._constraining) {
        this._constraining = true;
        var t2, e2, r2, n2, a2 = -90, o2 = 90, s2 = -180, u2 = 180, l2 = this.size, p2 = this._unmodified;
        if (this.latRange) {
          var h2 = this.latRange;
          a2 = Mh(h2[1]) * this.worldSize, t2 = (o2 = Mh(h2[0]) * this.worldSize) - a2 < l2.y ? l2.y / (o2 - a2) : 0;
        }
        if (this.lngRange) {
          var c2 = this.lngRange;
          s2 = kh(c2[0]) * this.worldSize, e2 = (u2 = kh(c2[1]) * this.worldSize) - s2 < l2.x ? l2.x / (u2 - s2) : 0;
        }
        var f2 = this.point, y2 = Math.max(e2 || 0, t2 || 0);
        if (y2)
          return this.center = this.unproject(new i2(e2 ? (u2 + s2) / 2 : f2.x, t2 ? (o2 + a2) / 2 : f2.y)), this.zoom += this.scaleZoom(y2), this._unmodified = p2, void (this._constraining = false);
        if (this.latRange) {
          var d2 = f2.y, m2 = l2.y / 2;
          d2 - m2 < a2 && (n2 = a2 + m2), d2 + m2 > o2 && (n2 = o2 - m2);
        }
        if (this.lngRange) {
          var v2 = f2.x, g2 = l2.x / 2;
          v2 - g2 < s2 && (r2 = s2 + g2), v2 + g2 > u2 && (r2 = u2 - g2);
        }
        void 0 === r2 && void 0 === n2 || (this.center = this.unproject(new i2(void 0 !== r2 ? r2 : f2.x, void 0 !== n2 ? n2 : f2.y))), this._unmodified = p2, this._constraining = false;
      }
    }, Lh.prototype._calcMatrices = function() {
      if (this.height) {
        var t2 = this.centerOffset;
        this.cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * this.height;
        var e2 = Math.PI / 2 + this._pitch, r2 = this._fov * (0.5 + t2.y / this.height), n2 = Math.sin(r2) * this.cameraToCenterDistance / Math.sin(u(Math.PI - e2 - r2, 0.01, Math.PI - 0.01)), i3 = this.point, a2 = i3.x, o2 = i3.y, s2 = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * n2 + this.cameraToCenterDistance), l2 = this.height / 50, p2 = new Float64Array(16);
        ds(p2, this._fov, this.width / this.height, l2, s2), p2[8] = 2 * -t2.x / this.width, p2[9] = 2 * t2.y / this.height, cs(p2, p2, [1, -1, 1]), hs(p2, p2, [0, 0, -this.cameraToCenterDistance]), fs(p2, p2, this._pitch), ys(p2, p2, this.angle), hs(p2, p2, [-a2, -o2, 0]), this.mercatorMatrix = cs([], p2, [this.worldSize, this.worldSize, this.worldSize]), cs(p2, p2, [1, 1, Ph(1, this.center.lat) * this.worldSize, 1]), this.projMatrix = p2, this.invProjMatrix = ls([], this.projMatrix);
        var h2 = this.width % 2 / 2, c2 = this.height % 2 / 2, f2 = Math.cos(this.angle), y2 = Math.sin(this.angle), d2 = a2 - Math.round(a2) + f2 * h2 + y2 * c2, m2 = o2 - Math.round(o2) + f2 * c2 + y2 * h2, v2 = new Float64Array(p2);
        if (hs(v2, v2, [d2 > 0.5 ? d2 - 1 : d2, m2 > 0.5 ? m2 - 1 : m2, 0]), this.alignedProjMatrix = v2, cs(p2 = ss(), p2, [this.width / 2, -this.height / 2, 1]), hs(p2, p2, [1, -1, 0]), this.labelPlaneMatrix = p2, cs(p2 = ss(), p2, [1, -1, 1]), hs(p2, p2, [-1, -1, 0]), cs(p2, p2, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = p2, this.pixelMatrix = ps(new Float64Array(16), this.labelPlaneMatrix, this.projMatrix), !(p2 = ls(new Float64Array(16), this.pixelMatrix)))
          throw new Error("failed to invert matrix");
        this.pixelMatrixInverse = p2, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
      }
    }, Lh.prototype.maxPitchScaleFactor = function() {
      if (!this.pixelMatrixInverse)
        return 1;
      var t2 = this.pointCoordinate(new i2(0, 0)), e2 = [t2.x * this.worldSize, t2.y * this.worldSize, 0, 1];
      return bs(e2, e2, this.pixelMatrix)[3] / this.cameraToCenterDistance;
    }, Lh.prototype.getCameraPoint = function() {
      var t2 = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);
      return this.centerPoint.add(new i2(0, t2));
    }, Lh.prototype.getCameraQueryGeometry = function(t2) {
      var e2 = this.getCameraPoint();
      if (1 === t2.length)
        return [t2[0], e2];
      for (var r2 = e2.x, n2 = e2.y, a2 = e2.x, o2 = e2.y, s2 = 0, u2 = t2; s2 < u2.length; s2 += 1) {
        var l2 = u2[s2];
        r2 = Math.min(r2, l2.x), n2 = Math.min(n2, l2.y), a2 = Math.max(a2, l2.x), o2 = Math.max(o2, l2.y);
      }
      return [new i2(r2, n2), new i2(a2, n2), new i2(a2, o2), new i2(r2, o2), new i2(r2, n2)];
    }, Object.defineProperties(Lh.prototype, Fh), Lh.prototype.type = "EPSG:3857";
    var Rh = { Transform: Lh, Coordinate: Bh, xFromLng: kh, yFromLat: Mh, zFromAltitude: Ph, lngFromX: Vh, latFromY: Ch, altitudeFromZ: Th, scale: Eh }, Oh = 2 * Math.PI * 6378137;
    function jh(t2) {
      return Oh * Math.cos(t2 * Math.PI / 180);
    }
    function Uh(t2) {
      return (180 + t2) / 360;
    }
    function qh(t2) {
      return (90 - t2) / 360;
    }
    function Nh(t2, e2) {
      return t2 / jh(e2);
    }
    function Zh(t2) {
      return 360 * t2 - 180;
    }
    function Gh(t2) {
      return 90 - 360 * t2;
    }
    function Yh(t2, e2) {
      return t2 * jh(Gh(e2));
    }
    function Xh(t2) {
      return 1 / Math.cos(t2 * Math.PI / 180);
    }
    var Kh = function(t2, e2, r2) {
      void 0 === r2 && (r2 = 0), this.x = +t2, this.y = +e2, this.z = +r2;
    };
    Kh.fromLngLat = function(t2, e2) {
      void 0 === e2 && (e2 = 0);
      var r2 = Ah.convert(t2);
      return new Kh(Uh(r2.lng), qh(r2.lat), Nh(e2, r2.lat));
    }, Kh.prototype.toLngLat = function() {
      return new Ah(Zh(this.x), Gh(this.y));
    }, Kh.prototype.toAltitude = function() {
      return Yh(this.z, this.y);
    }, Kh.prototype.meterInMercatorCoordinateUnits = function() {
      return 1 / Oh * Xh(Gh(this.y));
    };
    var Jh = function(t2, e2, r2, n2, i3) {
      this.tileSize = 512, this.maxValidLatitude = 85.051129, this._renderWorldCopies = void 0 === i3 || i3, this._minZoom = t2 || 0, this._maxZoom = e2 || 22, this._minPitch = null == r2 ? 0 : r2, this._maxPitch = null == n2 ? 60 : n2, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new Ah(0, 0), this.zoom = 0, this.angle = 0, this._fov = 0.6435011087932844, this._pitch = 0, this._unmodified = true, this._edgeInsets = new Dh(), this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
    }, Hh = { minZoom: { configurable: true }, maxZoom: { configurable: true }, minPitch: { configurable: true }, maxPitch: { configurable: true }, renderWorldCopies: { configurable: true }, worldSize: { configurable: true }, centerOffset: { configurable: true }, size: { configurable: true }, bearing: { configurable: true }, pitch: { configurable: true }, fov: { configurable: true }, zoom: { configurable: true }, center: { configurable: true }, padding: { configurable: true }, centerPoint: { configurable: true }, unmodified: { configurable: true }, point: { configurable: true } };
    Jh.prototype.clone = function() {
      var t2 = new Jh(this._minZoom, this._maxZoom, this._minPitch, this.maxPitch, this._renderWorldCopies);
      return t2.tileSize = this.tileSize, t2.latRange = this.latRange, t2.width = this.width, t2.height = this.height, t2._center = this._center, t2.zoom = this.zoom, t2.angle = this.angle, t2._fov = this._fov, t2._pitch = this._pitch, t2._unmodified = this._unmodified, t2._edgeInsets = this._edgeInsets.clone(), t2._calcMatrices(), t2;
    }, Hh.minZoom.get = function() {
      return this._minZoom;
    }, Hh.minZoom.set = function(t2) {
      this._minZoom !== t2 && (this._minZoom = t2, this.zoom = Math.max(this.zoom, t2));
    }, Hh.maxZoom.get = function() {
      return this._maxZoom;
    }, Hh.maxZoom.set = function(t2) {
      this._maxZoom !== t2 && (this._maxZoom = t2, this.zoom = Math.min(this.zoom, t2));
    }, Hh.minPitch.get = function() {
      return this._minPitch;
    }, Hh.minPitch.set = function(t2) {
      this._minPitch !== t2 && (this._minPitch = t2, this.pitch = Math.max(this.pitch, t2));
    }, Hh.maxPitch.get = function() {
      return this._maxPitch;
    }, Hh.maxPitch.set = function(t2) {
      this._maxPitch !== t2 && (this._maxPitch = t2, this.pitch = Math.min(this.pitch, t2));
    }, Hh.renderWorldCopies.get = function() {
      return this._renderWorldCopies;
    }, Hh.renderWorldCopies.set = function(t2) {
      void 0 === t2 ? t2 = true : null === t2 && (t2 = false), this._renderWorldCopies = t2;
    }, Hh.worldSize.get = function() {
      return this.tileSize * this.scale;
    }, Hh.centerOffset.get = function() {
      return this.centerPoint._sub(this.size._div(2));
    }, Hh.size.get = function() {
      return new i2(this.width, this.height);
    }, Hh.bearing.get = function() {
      return -this.angle / Math.PI * 180;
    }, Hh.bearing.set = function(t2) {
      var e2 = -l(t2, -180, 180) * Math.PI / 180;
      this.angle !== e2 && (this._unmodified = false, this.angle = e2, this._calcMatrices(), this.rotationMatrix = as(), os(this.rotationMatrix, this.rotationMatrix, this.angle));
    }, Hh.pitch.get = function() {
      return this._pitch / Math.PI * 180;
    }, Hh.pitch.set = function(t2) {
      var e2 = u(t2, this.minPitch, this.maxPitch) / 180 * Math.PI;
      this._pitch !== e2 && (this._unmodified = false, this._pitch = e2, this._calcMatrices());
    }, Hh.fov.get = function() {
      return this._fov / Math.PI * 180;
    }, Hh.fov.set = function(t2) {
      t2 = Math.max(0.01, Math.min(60, t2)), this._fov !== t2 && (this._unmodified = false, this._fov = t2 / 180 * Math.PI, this._calcMatrices());
    }, Hh.zoom.get = function() {
      return this._zoom;
    }, Hh.zoom.set = function(t2) {
      var e2 = Math.min(Math.max(t2, this.minZoom), this.maxZoom);
      this._zoom !== e2 && (this._unmodified = false, this._zoom = e2, this.scale = this.zoomScale(e2), this.tileZoom = Math.floor(e2), this.zoomFraction = e2 - this.tileZoom, this._constrain(), this._calcMatrices());
    }, Hh.center.get = function() {
      return this._center;
    }, Hh.center.set = function(t2) {
      t2.lat === this._center.lat && t2.lng === this._center.lng || (this._unmodified = false, this._center = t2, this._constrain(), this._calcMatrices());
    }, Hh.padding.get = function() {
      return this._edgeInsets.toJSON();
    }, Hh.padding.set = function(t2) {
      this._edgeInsets.equals(t2) || (this._unmodified = false, this._edgeInsets.interpolate(this._edgeInsets, t2, 1), this._calcMatrices());
    }, Hh.centerPoint.get = function() {
      return this._edgeInsets.getCenter(this.width, this.height);
    }, Jh.prototype.isPaddingEqual = function(t2) {
      return this._edgeInsets.equals(t2);
    }, Jh.prototype.interpolatePadding = function(t2, e2, r2) {
      this._unmodified = false, this._edgeInsets.interpolate(t2, e2, r2), this._constrain(), this._calcMatrices();
    }, Jh.prototype.coveringZoomLevel = function(t2) {
      var e2 = (t2.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t2.tileSize));
      return Math.max(0, e2);
    }, Jh.prototype.getVisibleUnwrappedCoordinates = function(t2) {
      var e2 = [new ec(0, t2)];
      if (this._renderWorldCopies)
        for (var r2 = this.pointCoordinate(new i2(0, 0)), n2 = this.pointCoordinate(new i2(this.width, 0)), a2 = this.pointCoordinate(new i2(this.width, this.height)), o2 = this.pointCoordinate(new i2(0, this.height)), s2 = Math.floor(Math.min(r2.x, n2.x, a2.x, o2.x)), u2 = Math.floor(Math.max(r2.x, n2.x, a2.x, o2.x)), l2 = s2 - 1; l2 <= u2 + 1; l2++)
          0 !== l2 && e2.push(new ec(l2, t2));
      return e2;
    }, Jh.prototype.coveringTiles = function(t2) {
      var e2 = this.coveringZoomLevel(t2), r2 = e2;
      if (void 0 !== t2.minzoom && e2 < t2.minzoom)
        return [];
      void 0 !== t2.maxzoom && e2 > t2.maxzoom && (e2 = t2.maxzoom);
      var n2 = Kh.fromLngLat(this.center), i3 = Math.pow(2, e2), a2 = [i3 * n2.x, i3 * n2.y, 0], o2 = bh.fromInvProjectionMatrix(this.invProjMatrix, this.worldSize, e2), s2 = t2.minzoom || 0;
      this.pitch <= 60 && this._edgeInsets.top < 0.1 && (s2 = e2);
      var u2 = function(t3) {
        return { aabb: new wh([t3 * i3, 0, 0], [(t3 + 1) * i3, i3, 0]), zoom: 0, x: 0, y: 0, wrap: t3, fullyVisible: false };
      }, l2 = [], p2 = [], h2 = e2, c2 = t2.reparseOverscaled ? r2 : e2;
      if (this._renderWorldCopies)
        for (var f2 = 1; f2 <= 3; f2++)
          l2.push(u2(-f2)), l2.push(u2(f2));
      for (l2.push(u2(0)); l2.length > 0; ) {
        var y2 = l2.pop(), d2 = y2.x, m2 = y2.y, v2 = y2.fullyVisible;
        if (!v2) {
          var g2 = y2.aabb.intersects(o2);
          if (0 === g2)
            continue;
          v2 = 2 === g2;
        }
        var x2 = y2.aabb.distanceX(a2), b2 = y2.aabb.distanceY(a2), w2 = Math.max(Math.abs(x2), Math.abs(b2));
        if (y2.zoom === h2 || w2 > 3 + (1 << h2 - y2.zoom) - 2 && y2.zoom >= s2)
          p2.push({ tileID: new rc(y2.zoom === h2 ? c2 : y2.zoom, y2.wrap, y2.zoom, d2, m2), distanceSq: Cs([a2[0] - 0.5 - d2, a2[1] - 0.5 - m2]) });
        else
          for (var _2 = 0; _2 < 4; _2++) {
            var A2 = (d2 << 1) + _2 % 2, S2 = (m2 << 1) + (_2 >> 1);
            l2.push({ aabb: y2.aabb.quadrant(_2), zoom: y2.zoom + 1, x: A2, y: S2, wrap: y2.wrap, fullyVisible: v2 });
          }
      }
      return p2.sort(function(t3, e3) {
        return t3.distanceSq - e3.distanceSq;
      }).map(function(t3) {
        return t3.tileID;
      });
    }, Jh.prototype.resize = function(t2, e2) {
      this.width = t2, this.height = e2, this.pixelsToGLUnits = [2 / t2, -2 / e2], this._constrain(), this._calcMatrices();
    }, Hh.unmodified.get = function() {
      return this._unmodified;
    }, Jh.prototype.zoomScale = function(t2) {
      return Math.pow(2, t2);
    }, Jh.prototype.scaleZoom = function(t2) {
      return Math.log(t2) / Math.LN2;
    }, Jh.prototype.project = function(t2) {
      var e2 = u(t2.lat, -this.maxValidLatitude, this.maxValidLatitude);
      return new i2(Uh(t2.lng) * this.worldSize, qh(e2) * this.worldSize);
    }, Jh.prototype.unproject = function(t2) {
      return new Kh(t2.x / this.worldSize, t2.y / this.worldSize).toLngLat();
    }, Hh.point.get = function() {
      return this.project(this.center);
    }, Jh.prototype.setLocationAtPoint = function(t2, e2) {
      var r2 = this.pointCoordinate(e2), n2 = this.pointCoordinate(this.centerPoint), i3 = this.locationCoordinate(t2), a2 = new Kh(i3.x - (r2.x - n2.x), i3.y - (r2.y - n2.y));
      this.center = this.coordinateLocation(a2), this._renderWorldCopies && (this.center = this.center.wrap());
    }, Jh.prototype.locationPoint = function(t2) {
      return this.coordinatePoint(this.locationCoordinate(t2));
    }, Jh.prototype.pointLocation = function(t2) {
      return this.coordinateLocation(this.pointCoordinate(t2));
    }, Jh.prototype.locationCoordinate = function(t2) {
      return Kh.fromLngLat(t2);
    }, Jh.prototype.coordinateLocation = function(t2) {
      return t2.toLngLat();
    }, Jh.prototype.pointCoordinate = function(t2) {
      var e2 = [t2.x, t2.y, 0, 1], r2 = [t2.x, t2.y, 1, 1];
      bs(e2, e2, this.pixelMatrixInverse), bs(r2, r2, this.pixelMatrixInverse);
      var n2 = e2[3], i3 = r2[3], a2 = e2[1] / n2, o2 = r2[1] / i3, s2 = e2[2] / n2, u2 = r2[2] / i3, l2 = s2 === u2 ? 0 : (0 - s2) / (u2 - s2);
      return new Kh(or(e2[0] / n2, r2[0] / i3, l2) / this.worldSize, or(a2, o2, l2) / this.worldSize);
    }, Jh.prototype.coordinatePoint = function(t2) {
      var e2 = [t2.x * this.worldSize, t2.y * this.worldSize, 0, 1];
      return bs(e2, e2, this.pixelMatrix), new i2(e2[0] / e2[3], e2[1] / e2[3]);
    }, Jh.prototype.getBounds = function() {
      return new _h().extend(this.pointLocation(new i2(0, 0))).extend(this.pointLocation(new i2(this.width, 0))).extend(this.pointLocation(new i2(this.width, this.height))).extend(this.pointLocation(new i2(0, this.height)));
    }, Jh.prototype.getMaxBounds = function() {
      return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new _h([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null;
    }, Jh.prototype.setMaxBounds = function(t2) {
      t2 ? (this.lngRange = [t2.getWest(), t2.getEast()], this.latRange = [t2.getSouth(), t2.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);
    }, Jh.prototype.calculatePosMatrix = function(t2, e2) {
      void 0 === e2 && (e2 = false);
      var r2 = t2.key, n2 = e2 ? this._alignedPosMatrixCache : this._posMatrixCache;
      if (n2[r2])
        return n2[r2];
      var i3 = t2.canonical, a2 = this.worldSize / this.zoomScale(i3.z), o2 = i3.x + Math.pow(2, i3.z) * t2.wrap, s2 = us(new Float64Array(16));
      return hs(s2, s2, [o2 * a2, i3.y * a2, 0]), cs(s2, s2, [a2 / 8192, a2 / 8192, 1]), ps(s2, e2 ? this.alignedProjMatrix : this.projMatrix, s2), n2[r2] = new Float32Array(s2), n2[r2];
    }, Jh.prototype.customLayerMatrix = function() {
      return this.mercatorMatrix.slice();
    }, Jh.prototype._constrain = function() {
      if (this.center && this.width && this.height && !this._constraining) {
        this._constraining = true;
        var t2, e2, r2, n2, a2 = -90, o2 = 90, s2 = -180, u2 = 180, l2 = this.size, p2 = this._unmodified;
        if (this.latRange) {
          var h2 = this.latRange;
          a2 = qh(h2[1]) * this.worldSize, t2 = (o2 = qh(h2[0]) * this.worldSize) - a2 < l2.y ? l2.y / (o2 - a2) : 0;
        }
        if (this.lngRange) {
          var c2 = this.lngRange;
          s2 = Uh(c2[0]) * this.worldSize, e2 = (u2 = Uh(c2[1]) * this.worldSize) - s2 < l2.x ? l2.x / (u2 - s2) : 0;
        }
        var f2 = this.point, y2 = Math.max(e2 || 0, t2 || 0);
        if (y2)
          return this.center = this.unproject(new i2(e2 ? (u2 + s2) / 2 : f2.x, t2 ? (o2 + a2) / 2 : f2.y)), this.zoom += this.scaleZoom(y2), this._unmodified = p2, void (this._constraining = false);
        if (this.latRange) {
          var d2 = f2.y, m2 = l2.y / 2;
          d2 - m2 < a2 && (n2 = a2 + m2), d2 + m2 > o2 && (n2 = o2 - m2);
        }
        if (this.lngRange) {
          var v2 = f2.x, g2 = l2.x / 2;
          v2 - g2 < s2 && (r2 = s2 + g2), v2 + g2 > u2 && (r2 = u2 - g2);
        }
        void 0 === r2 && void 0 === n2 || (this.center = this.unproject(new i2(void 0 !== r2 ? r2 : f2.x, void 0 !== n2 ? n2 : f2.y))), this._unmodified = p2, this._constraining = false;
      }
    }, Jh.prototype._calcMatrices = function() {
      if (this.height) {
        var t2 = this.centerOffset;
        this.cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * this.height;
        var e2 = Math.PI / 2 + this._pitch, r2 = this._fov * (0.5 + t2.y / this.height), n2 = Math.sin(r2) * this.cameraToCenterDistance / Math.sin(u(Math.PI - e2 - r2, 0.01, Math.PI - 0.01)), i3 = this.point, a2 = i3.x, o2 = i3.y, s2 = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * n2 + this.cameraToCenterDistance), l2 = this.height / 50, p2 = new Float64Array(16);
        ds(p2, this._fov, this.width / this.height, l2, s2), p2[8] = 2 * -t2.x / this.width, p2[9] = 2 * t2.y / this.height, cs(p2, p2, [1, -1, 1]), hs(p2, p2, [0, 0, -this.cameraToCenterDistance]), fs(p2, p2, this._pitch), ys(p2, p2, this.angle), hs(p2, p2, [-a2, -o2, 0]), this.mercatorMatrix = cs([], p2, [this.worldSize, this.worldSize, this.worldSize]), cs(p2, p2, [1, 1, Nh(1, this.center.lat) * this.worldSize, 1]), this.projMatrix = p2, this.invProjMatrix = ls([], this.projMatrix);
        var h2 = this.width % 2 / 2, c2 = this.height % 2 / 2, f2 = Math.cos(this.angle), y2 = Math.sin(this.angle), d2 = a2 - Math.round(a2) + f2 * h2 + y2 * c2, m2 = o2 - Math.round(o2) + f2 * c2 + y2 * h2, v2 = new Float64Array(p2);
        if (hs(v2, v2, [d2 > 0.5 ? d2 - 1 : d2, m2 > 0.5 ? m2 - 1 : m2, 0]), this.alignedProjMatrix = v2, cs(p2 = ss(), p2, [this.width / 2, -this.height / 2, 1]), hs(p2, p2, [1, -1, 0]), this.labelPlaneMatrix = p2, cs(p2 = ss(), p2, [1, -1, 1]), hs(p2, p2, [-1, -1, 0]), cs(p2, p2, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = p2, this.pixelMatrix = ps(new Float64Array(16), this.labelPlaneMatrix, this.projMatrix), !(p2 = ls(new Float64Array(16), this.pixelMatrix)))
          throw new Error("failed to invert matrix");
        this.pixelMatrixInverse = p2, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
      }
    }, Jh.prototype.maxPitchScaleFactor = function() {
      if (!this.pixelMatrixInverse)
        return 1;
      var t2 = this.pointCoordinate(new i2(0, 0)), e2 = [t2.x * this.worldSize, t2.y * this.worldSize, 0, 1];
      return bs(e2, e2, this.pixelMatrix)[3] / this.cameraToCenterDistance;
    }, Jh.prototype.getCameraPoint = function() {
      var t2 = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);
      return this.centerPoint.add(new i2(0, t2));
    }, Jh.prototype.getCameraQueryGeometry = function(t2) {
      var e2 = this.getCameraPoint();
      if (1 === t2.length)
        return [t2[0], e2];
      for (var r2 = e2.x, n2 = e2.y, a2 = e2.x, o2 = e2.y, s2 = 0, u2 = t2; s2 < u2.length; s2 += 1) {
        var l2 = u2[s2];
        r2 = Math.min(r2, l2.x), n2 = Math.min(n2, l2.y), a2 = Math.max(a2, l2.x), o2 = Math.max(o2, l2.y);
      }
      return [new i2(r2, n2), new i2(a2, n2), new i2(a2, o2), new i2(r2, o2), new i2(r2, n2)];
    }, Object.defineProperties(Jh.prototype, Hh), Jh.prototype.type = "EPSG:4326";
    var Qh = { "EPSG:3857": Rh, "EPSG:4326": { Transform: Jh, Coordinate: Kh, xFromLng: Uh, yFromLat: qh, zFromAltitude: Nh, lngFromX: Zh, latFromY: Gh, altitudeFromZ: Yh, scale: Xh } }, Wh = { parse: null, transform: null, key: "EPSG:3857" };
    function $h(t2) {
      var e2 = t2.crs, r2 = t2.minZoom, n2 = t2.maxZoom, i3 = t2.minPitch, a2 = t2.maxPitch, o2 = t2.renderWorldCopies;
      if (Object.prototype.hasOwnProperty.call(Qh, e2))
        return "EPSG:4326" == e2 && (t2.renderWorldCopies = false), Wh.key = e2, Wh.parse = Qh[e2], Wh.transform = new Qh[e2].Transform(r2, n2, i3, a2, o2), Wh.transform;
      throw new Error(e2 + "\u4E0D\u5B58\u5728\u6B64crs\u7C7B\u578B");
    }
    var tc = function(t2, e2, r2, n2, i3, a2) {
      this.z = t2, this.x = e2, this.y = r2, this.reference = n2, this.sourceID = i3, this._tileY = a2, this.key = nc(0, t2, t2, e2, r2, this.sourceID);
    };
    tc.prototype.equals = function(t2) {
      var e2 = this.sourceID;
      return e2 ? this.z === t2.z && this.x === t2.x && this.y === t2.y && e2 === t2.sourceID : this.z === t2.z && this.x === t2.x && this.y === t2.y;
    }, tc.prototype.url = function(t2, e2) {
      var r2, n2, i3, a2, o2, s2 = (n2 = this.y, i3 = this.z, a2 = Sh(256 * (r2 = this.x), 256 * (n2 = Math.pow(2, i3) - n2 - 1), i3), o2 = Sh(256 * (r2 + 1), 256 * (n2 + 1), i3), a2[0] + "," + a2[1] + "," + o2[0] + "," + o2[1]), u2 = function(t3, e3, r3) {
        for (var n3, i4 = "", a3 = t3; a3 > 0; a3--)
          i4 += (e3 & (n3 = 1 << a3 - 1) ? 1 : 0) + (r3 & n3 ? 2 : 0);
        return i4;
      }(this.z, this.x, this.y);
      return t2[(this.x + this.y) % t2.length].replace("{prefix}", (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace("{quadkey}", u2).replace("{bbox-epsg-3857}", s2).replace("{z}", String(this.z)).replace("{x}", String(this.x)).replace("{y}", String("tms" === e2 ? Math.pow(2, this.z) - this.y - 1 : this.y));
    }, tc.prototype.getTilePoint = function(t2) {
      var e2 = Math.pow(2, this.z);
      if ("Sg4326" == this.reference) {
        var r2 = this._tileY;
        return new i2(8192 * (t2.x * e2 - this.x), (t2.y * e2 - r2[0]) / r2[1] * 8192);
      }
      return new i2(8192 * (t2.x * e2 - this.x), 8192 * (t2.y * e2 - this.y));
    }, tc.prototype.toString = function() {
      return this.z + "/" + this.x + "/" + this.y;
    };
    var ec = function(t2, e2) {
      this.wrap = t2, this.canonical = e2, this.key = nc(t2, e2.z, e2.z, e2.x, e2.y, e2.sourceID);
    }, rc = function(t2, e2, r2, n2, i3, a2, o2, s2, u2, l2) {
      this.reference = a2, this.sourceID = o2, this.zoomRule = s2, this._tileY = u2, this._mapZoom = l2, this.overscaledZ = t2, this.wrap = e2, this.canonical = new tc(r2, +n2, +i3, a2, o2, u2), this.key = nc(e2, t2, r2, n2, i3, o2);
    };
    function nc(t2, e2, r2, n2, i3, a2) {
      (t2 *= 2) < 0 && (t2 = -1 * t2 - 1);
      var o2 = 1 << r2, s2 = (o2 * o2 * t2 + o2 * i3 + n2).toString(36) + r2.toString(36) + e2.toString(36);
      return a2 && (s2 += a2.toString(36)), s2;
    }
    function ic(t2, e2, r2, n2, i3) {
      this.properties = {}, this.extent = r2, this.type = 0, this._pbf = t2, this._geometry = -1, this._keys = n2, this._values = i3, t2.readFields(ac, this, e2);
    }
    function ac(t2, e2, r2) {
      1 == t2 ? e2.id = r2.readVarint() : 2 == t2 ? function(t3, e3) {
        for (var r3 = t3.readVarint() + t3.pos; t3.pos < r3; ) {
          var n2 = e3._keys[t3.readVarint()], i3 = e3._values[t3.readVarint()];
          e3.properties[n2] = i3;
        }
      }(r2, e2) : 3 == t2 ? e2.type = r2.readVarint() : 4 == t2 && (e2._geometry = r2.pos);
    }
    function oc(t2) {
      for (var e2, r2, n2 = 0, i3 = 0, a2 = t2.length, o2 = a2 - 1; i3 < a2; o2 = i3++)
        n2 += ((r2 = t2[o2]).x - (e2 = t2[i3]).x) * (e2.y + r2.y);
      return n2;
    }
    function sc(t2, e2, r2) {
      this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t2, this._keys = [], this._values = [], this._features = [], t2.readFields(uc, this, e2), this.length = this._features.length, this.tileID = r2;
    }
    function uc(t2, e2, r2) {
      15 === t2 ? e2.version = r2.readVarint() : 1 === t2 ? e2.name = r2.readString() : 5 === t2 ? e2.extent = r2.readVarint() : 2 === t2 ? e2._features.push(r2.pos) : 3 === t2 ? e2._keys.push(r2.readString()) : 4 === t2 && e2._values.push(function(t3) {
        for (var e3 = null, r3 = t3.readVarint() + t3.pos; t3.pos < r3; ) {
          var n2 = t3.readVarint() >> 3;
          e3 = 1 === n2 ? t3.readString() : 2 === n2 ? t3.readFloat() : 3 === n2 ? t3.readDouble() : 4 === n2 ? t3.readVarint64() : 5 === n2 ? t3.readVarint() : 6 === n2 ? t3.readSVarint() : 7 === n2 ? t3.readBoolean() : null;
        }
        return e3;
      }(r2));
    }
    rc.prototype.equals = function(t2) {
      return this.overscaledZ === t2.overscaledZ && this.wrap === t2.wrap && this.canonical.equals(t2.canonical);
    }, rc.prototype.scaledTo = function(t2, e2) {
      e2 || (e2 = 0), t2 += e2;
      var r2 = this.zoomRule;
      if (r2 && r2.length > 0) {
        r2 = JSON.parse(r2);
        var n2 = 0;
        for (var i3 in r2) {
          if (0 == n2 && i3.indexOf(t2) >= 0) {
            n2 = 1;
            break;
          }
          if (1 == n2) {
            t2 = r2[i3] || 0, n2 = 2;
            break;
          }
        }
      }
      var a2 = this.canonical.z - t2;
      return t2 > this.canonical.z ? new rc(t2, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom) : new rc(t2, this.wrap, t2, this.canonical.x >> a2, this.canonical.y >> a2, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom);
    }, rc.prototype.calculateScaledKey = function(t2, e2) {
      var r2 = this.canonical.z - t2;
      return t2 > this.canonical.z ? nc(this.wrap * +e2, t2, this.canonical.z, this.canonical.x, this.canonical.y, this.sourceID) : nc(this.wrap * +e2, t2, t2, this.canonical.x >> r2, this.canonical.y >> r2, this.sourceID);
    }, rc.prototype.isChildOf = function(t2) {
      if (t2.wrap !== this.wrap)
        return false;
      var e2 = this.canonical.z - t2.canonical.z;
      return 0 === t2.overscaledZ || t2.overscaledZ < this.overscaledZ && t2.canonical.x === this.canonical.x >> e2 && t2.canonical.y === this.canonical.y >> e2;
    }, rc.prototype.children = function(t2) {
      if (this.overscaledZ >= t2)
        return [new rc(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom)];
      var e2 = this.canonical.z + 1, r2 = 2 * this.canonical.x, n2 = 2 * this.canonical.y;
      return [new rc(e2, this.wrap, e2, r2, n2, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom), new rc(e2, this.wrap, e2, r2 + 1, n2, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom), new rc(e2, this.wrap, e2, r2, n2 + 1, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom), new rc(e2, this.wrap, e2, r2 + 1, n2 + 1, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom)];
    }, rc.prototype.isLessThan = function(t2) {
      return this.wrap < t2.wrap || !(this.wrap > t2.wrap) && (this.overscaledZ < t2.overscaledZ || !(this.overscaledZ > t2.overscaledZ) && (this.canonical.x < t2.canonical.x || !(this.canonical.x > t2.canonical.x) && this.canonical.y < t2.canonical.y));
    }, rc.prototype.wrapped = function() {
      return new rc(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom);
    }, rc.prototype.unwrapTo = function(t2) {
      return new rc(this.overscaledZ, t2, this.canonical.z, this.canonical.x, this.canonical.y, this.reference, this.sourceID, this.zoomRule, this._tileY, this._mapZoom);
    }, rc.prototype.overscaleFactor = function() {
      return Math.pow(2, this.overscaledZ - this.canonical.z);
    }, rc.prototype.toUnwrapped = function() {
      return new ec(this.wrap, this.canonical);
    }, rc.prototype.toString = function() {
      return this.overscaledZ + "/" + this.canonical.x + "/" + this.canonical.y;
    }, rc.prototype.getTilePoint = function(t2) {
      return this.canonical.getTilePoint(new Wh.parse.Coordinate(t2.x - this.wrap, t2.y));
    }, ti("CanonicalTileID", tc), ti("OverscaledTileID", rc, { omit: ["posMatrix"] }), ic.types = ["Unknown", "Point", "LineString", "Polygon"], ic.prototype.loadGeometry = function() {
      var t2 = this._pbf;
      t2.pos = this._geometry;
      for (var e2, r2 = t2.readVarint() + t2.pos, n2 = 1, a2 = 0, o2 = 0, s2 = 0, u2 = []; t2.pos < r2; ) {
        if (a2 <= 0) {
          var l2 = t2.readVarint();
          n2 = 7 & l2, a2 = l2 >> 3;
        }
        if (a2--, 1 === n2 || 2 === n2)
          o2 += t2.readSVarint(), s2 += t2.readSVarint(), 1 === n2 && (e2 && u2.push(e2), e2 = []), e2.push(new i2(o2, s2));
        else {
          if (7 !== n2)
            throw new Error("unknown command " + n2);
          e2 && e2.push(e2[0].clone());
        }
      }
      return e2 && u2.push(e2), u2;
    }, ic.prototype.bbox = function() {
      var t2 = this._pbf;
      t2.pos = this._geometry;
      for (var e2 = t2.readVarint() + t2.pos, r2 = 1, n2 = 0, i3 = 0, a2 = 0, o2 = 1 / 0, s2 = -1 / 0, u2 = 1 / 0, l2 = -1 / 0; t2.pos < e2; ) {
        if (n2 <= 0) {
          var p2 = t2.readVarint();
          r2 = 7 & p2, n2 = p2 >> 3;
        }
        if (n2--, 1 === r2 || 2 === r2)
          (i3 += t2.readSVarint()) < o2 && (o2 = i3), i3 > s2 && (s2 = i3), (a2 += t2.readSVarint()) < u2 && (u2 = a2), a2 > l2 && (l2 = a2);
        else if (7 !== r2)
          throw new Error("unknown command " + r2);
      }
      return [o2, u2, s2, l2];
    }, ic.prototype.toGeoJSON = function(t2, e2, r2) {
      var n2, i3, a2 = this.extent * Math.pow(2, r2), o2 = this.extent * t2, s2 = this.extent * e2, u2 = this.loadGeometry(), l2 = ic.types[this.type], p2 = this.tileID && "Sg4326" == this.tileID.reference, h2 = this.properties.resolution, c2 = Number(this.type);
      function f2(n3) {
        for (var i4 = 0; i4 < n3.length; i4++) {
          var u3 = n3[i4];
          if (p2) {
            var l3 = Do(r2, c2, t2, e2, u3.x, u3.y, h2);
            n3[i4] = [l3.lon, l3.lat];
          } else
            n3[i4] = [360 * (u3.x + o2) / a2 - 180, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * (u3.y + s2) / a2) * Math.PI / 180)) - 90];
        }
      }
      switch (this.type) {
        case 1:
          var y2 = [];
          for (n2 = 0; n2 < u2.length; n2++)
            y2[n2] = u2[n2][0];
          f2(u2 = y2);
          break;
        case 2:
          for (n2 = 0; n2 < u2.length; n2++)
            f2(u2[n2]);
          break;
        case 3:
          for (u2 = function(t3) {
            var e3 = t3.length;
            if (e3 <= 1)
              return [t3];
            for (var r3, n3, i4 = [], a3 = 0; a3 < e3; a3++) {
              var o3 = oc(t3[a3]);
              0 !== o3 && (void 0 === n3 && (n3 = o3 < 0), n3 === o3 < 0 ? (r3 && i4.push(r3), r3 = [t3[a3]]) : r3.push(t3[a3]));
            }
            return r3 && i4.push(r3), i4;
          }(u2), n2 = 0; n2 < u2.length; n2++)
            for (i3 = 0; i3 < u2[n2].length; i3++)
              f2(u2[n2][i3]);
      }
      1 === u2.length ? u2 = u2[0] : l2 = "Multi" + l2;
      var d2 = { type: "Feature", geometry: { type: l2, coordinates: u2 }, properties: this.properties };
      return "id" in this && (d2.id = this.id), d2;
    }, sc.prototype.feature = function(t2) {
      if (t2 < 0 || t2 >= this._features.length)
        throw new Error("feature index out of bounds");
      this._pbf.pos = this._features[t2];
      var e2 = this._pbf.readVarint() + this._pbf.pos, r2 = new ic(this._pbf, e2, this.extent, this._keys, this._values);
      return this.tileID && (r2.tileID = this.tileID), r2;
    };
    var lc = { VectorTile: function(t2, e2, r2) {
      this.layers = t2.readFields(function(t3, e3, n2) {
        if (3 === t3) {
          var i3 = new sc(n2, n2.readVarint() + n2.pos, r2);
          i3.length && (e3[i3.name] = i3);
        }
      }, {}, e2);
    }, VectorTileFeature: ic, VectorTileLayer: sc }, pc = function(t2) {
      this._stringToNumber = {}, this._numberToString = [];
      for (var e2 = 0; e2 < t2.length; e2++) {
        var r2 = t2[e2];
        this._stringToNumber[r2] = e2, this._numberToString[e2] = r2;
      }
    };
    pc.prototype.encode = function(t2) {
      return this._stringToNumber[t2];
    }, pc.prototype.decode = function(t2) {
      return this._numberToString[t2];
    };
    var hc = function(t2, e2, r2, n2, i3) {
      this.type = "Feature", this._vectorTileFeature = t2, t2._z = e2, t2._x = r2, t2._y = n2, this.properties = t2.properties, this.id = i3;
    }, cc = { geometry: { configurable: true } };
    cc.geometry.get = function() {
      return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;
    }, cc.geometry.set = function(t2) {
      this._geometry = t2;
    }, hc.prototype.toJSON = function() {
      var t2 = { geometry: this.geometry };
      for (var e2 in this)
        "_geometry" !== e2 && "_vectorTileFeature" !== e2 && (t2[e2] = this[e2]);
      return t2;
    }, Object.defineProperties(hc.prototype, cc);
    var fc = function(t2, e2, r2) {
      this.tileID = t2, this.uid = y(), this.uses = 0, this.tileSize = e2, this.tileZoom = r2, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = false, this.hasRTLText = false, this.dependencies = {}, this.expiredRequestCount = 0, this.state = "loading";
    };
    fc.prototype.registerFadeDuration = function(t2) {
      var e2 = t2 + this.timeAdded;
      e2 < U.now() || this.fadeEndTime && e2 < this.fadeEndTime || (this.fadeEndTime = e2);
    }, fc.prototype.wasRequested = function() {
      return "errored" === this.state || "loaded" === this.state || "reloading" === this.state;
    }, fc.prototype.loadVectorData = function(t2, e2, r2) {
      if (this.hasData() && this.unloadVectorData(), this.state = "loaded", t2) {
        for (var n2 in t2.featureIndex && (this.latestFeatureIndex = t2.featureIndex, t2.rawTileData ? (this.latestRawTileData = t2.rawTileData, this.latestFeatureIndex.rawTileData = t2.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = t2.collisionBoxArray, this.buckets = function(t3, e3) {
          var r3 = {};
          if (!e3)
            return r3;
          for (var n3 = function() {
            var t4 = a3[i4], n4 = t4.layerIds.map(function(t5) {
              return e3.getLayer(t5);
            }).filter(Boolean);
            if (0 !== n4.length) {
              t4.layers = n4, t4.stateDependentLayerIds && (t4.stateDependentLayers = t4.stateDependentLayerIds.map(function(t5) {
                return n4.filter(function(e4) {
                  return e4.id === t5;
                })[0];
              }));
              for (var o3 = 0, s3 = n4; o3 < s3.length; o3 += 1)
                r3[s3[o3].id] = t4;
            }
          }, i4 = 0, a3 = t3; i4 < a3.length; i4 += 1)
            n3();
          return r3;
        }(t2.buckets, e2.style), this.hasSymbolBuckets = false, this.buckets) {
          var i3 = this.buckets[n2];
          if (i3 instanceof Gp) {
            if (this.hasSymbolBuckets = true, !r2)
              break;
            i3.justReloaded = true;
          }
        }
        if (this.hasRTLText = false, this.hasSymbolBuckets)
          for (var a2 in this.buckets) {
            var o2 = this.buckets[a2];
            if (o2 instanceof Gp && o2.hasRTLText) {
              this.hasRTLText = true, Ki.isLoading() || Ki.isLoaded() || "deferred" !== Yi() || Xi();
              break;
            }
          }
        for (var s2 in this.queryPadding = 0, this.buckets) {
          var u2 = this.buckets[s2];
          this.queryPadding = Math.max(this.queryPadding, e2.style.getLayer(s2).queryRadius(u2));
        }
        t2.imageAtlas && (this.imageAtlas = t2.imageAtlas), t2.glyphAtlasImage && (this.glyphAtlasImage = t2.glyphAtlasImage), t2.lineAtlas && (this.lineAtlas = t2.lineAtlas);
      } else
        this.collisionBoxArray = new Ua();
    }, fc.prototype.unloadVectorData = function() {
      for (var t2 in this.buckets)
        this.buckets[t2].destroy();
      this.buckets = {}, this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.imageAtlas && (this.imageAtlas = null), this.lineAtlas && (this.lineAtlas = null), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.lineAtlasTexture && this.lineAtlasTexture.destroy(), this.latestFeatureIndex = null, this.state = "unloaded";
    }, fc.prototype.getBucket = function(t2) {
      return this.buckets[t2.id];
    }, fc.prototype.upload = function(t2) {
      for (var e2 in this.buckets) {
        var r2 = this.buckets[e2];
        r2.uploadPending() && r2.upload(t2);
      }
      var n2 = t2.gl;
      this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new dh(t2, this.imageAtlas.image, n2.RGBA), this.imageAtlas.uploaded = true), this.glyphAtlasImage && (this.glyphAtlasTexture = new dh(t2, this.glyphAtlasImage, n2.ALPHA), this.glyphAtlasImage = null), this.lineAtlas && !this.lineAtlas.uploaded && (this.lineAtlasTexture = new dh(t2, this.lineAtlas.image, n2.ALPHA), this.lineAtlas.uploaded = true);
    }, fc.prototype.prepare = function(t2) {
      this.imageAtlas && this.imageAtlas.patchUpdatedImages(t2, this.imageAtlasTexture);
    }, fc.prototype.queryRenderedFeatures = function(t2, e2, r2, n2, i3, a2, o2, s2, u2, l2) {
      return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({ queryGeometry: n2, cameraQueryGeometry: i3, scale: a2, tileSize: this.tileSize, pixelPosMatrix: l2, transform: s2, params: o2, queryPadding: this.queryPadding * u2 }, t2, e2, r2, this.buckets) : {};
    }, fc.prototype.querySourceFeatures = function(t2, e2) {
      var r2 = this.latestFeatureIndex;
      if (r2 && r2.rawTileData) {
        var n2 = r2.loadVTLayers(), i3 = e2 ? e2.sourceLayer : "", a2 = n2._geojsonTileLayer || n2[i3];
        if (a2)
          for (var o2 = _n(e2 && e2.filter), s2 = this.tileID.canonical, u2 = s2.z, l2 = s2.x, p2 = s2.y, h2 = { z: u2, x: l2, y: p2 }, c2 = 0; c2 < a2.length; c2++) {
            var f2 = a2.feature(c2);
            if (o2.filter(new Ji(this.tileID.overscaledZ), f2)) {
              var y2 = r2.getId(f2, i3), d2 = new hc(f2, u2, l2, p2, y2);
              d2.tile = h2, t2.push(d2);
            }
          }
      }
    }, fc.prototype.hasData = function() {
      return "loaded" === this.state || "reloading" === this.state || "expired" === this.state;
    }, fc.prototype.patternsLoaded = function() {
      return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length;
    }, fc.prototype.setExpiryData = function(t2) {
      var e2 = this.expirationTime;
      if (t2.cacheControl) {
        var r2 = M(t2.cacheControl);
        r2["max-age"] && (this.expirationTime = Date.now() + 1e3 * r2["max-age"]);
      } else
        t2.expires && (this.expirationTime = new Date(t2.expires).getTime());
      if (this.expirationTime) {
        var n2 = Date.now(), i3 = false;
        if (this.expirationTime > n2)
          i3 = false;
        else if (e2)
          if (this.expirationTime < e2)
            i3 = true;
          else {
            var a2 = this.expirationTime - e2;
            a2 ? this.expirationTime = n2 + Math.max(a2, 3e4) : i3 = true;
          }
        else
          i3 = true;
        i3 ? (this.expiredRequestCount++, this.state = "expired") : this.expiredRequestCount = 0;
      }
    }, fc.prototype.getExpiryTimeout = function() {
      if (this.expirationTime)
        return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - new Date().getTime(), Math.pow(2, 31) - 1);
    }, fc.prototype.setFeatureState = function(t2, e2) {
      if (this.latestFeatureIndex && this.latestFeatureIndex.rawTileData && 0 !== Object.keys(t2).length) {
        var r2 = this.latestFeatureIndex.loadVTLayers();
        for (var n2 in this.buckets)
          if (e2.style.hasLayer(n2)) {
            var i3 = this.buckets[n2], a2 = i3.layers[0].sourceLayer || "_geojsonTileLayer", o2 = r2[a2], s2 = t2[a2];
            if (o2 && s2 && 0 !== Object.keys(s2).length) {
              i3.update(s2, o2, this.imageAtlas && this.imageAtlas.patternPositions || {});
              var u2 = e2 && e2.style && e2.style.getLayer(n2);
              u2 && (this.queryPadding = Math.max(this.queryPadding, u2.queryRadius(i3)));
            }
          }
      }
    }, fc.prototype.holdingForFade = function() {
      return void 0 !== this.symbolFadeHoldUntil;
    }, fc.prototype.symbolFadeFinished = function() {
      return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < U.now();
    }, fc.prototype.clearFadeHold = function() {
      this.symbolFadeHoldUntil = void 0;
    }, fc.prototype.setHoldDuration = function(t2) {
      this.symbolFadeHoldUntil = U.now() + t2;
    }, fc.prototype.setDependencies = function(t2, e2) {
      for (var r2 = {}, n2 = 0, i3 = e2; n2 < i3.length; n2 += 1)
        r2[i3[n2]] = true;
      this.dependencies[t2] = r2;
    }, fc.prototype.hasDependency = function(t2, e2) {
      for (var r2 = 0, n2 = t2; r2 < n2.length; r2 += 1) {
        var i3 = this.dependencies[n2[r2]];
        if (i3) {
          for (var a2 = 0, o2 = e2; a2 < o2.length; a2 += 1)
            if (i3[o2[a2]])
              return true;
        }
      }
      return false;
    };
    var yc = function() {
      this.state = {}, this.stateChanges = {}, this.deletedStates = {};
    };
    yc.prototype.updateState = function(t2, e2, r2) {
      var n2 = String(e2);
      if (this.stateChanges[t2] = this.stateChanges[t2] || {}, this.stateChanges[t2][n2] = this.stateChanges[t2][n2] || {}, c(this.stateChanges[t2][n2], r2), null === this.deletedStates[t2])
        for (var i3 in this.deletedStates[t2] = {}, this.state[t2])
          i3 !== n2 && (this.deletedStates[t2][i3] = null);
      else if (this.deletedStates[t2] && null === this.deletedStates[t2][n2])
        for (var a2 in this.deletedStates[t2][n2] = {}, this.state[t2][n2])
          r2[a2] || (this.deletedStates[t2][n2][a2] = null);
      else
        for (var o2 in r2)
          this.deletedStates[t2] && this.deletedStates[t2][n2] && null === this.deletedStates[t2][n2][o2] && delete this.deletedStates[t2][n2][o2];
    }, yc.prototype.removeFeatureState = function(t2, e2, r2) {
      if (null !== this.deletedStates[t2]) {
        var n2 = String(e2);
        if (this.deletedStates[t2] = this.deletedStates[t2] || {}, r2 && void 0 !== e2)
          null !== this.deletedStates[t2][n2] && (this.deletedStates[t2][n2] = this.deletedStates[t2][n2] || {}, this.deletedStates[t2][n2][r2] = null);
        else if (void 0 !== e2)
          if (this.stateChanges[t2] && this.stateChanges[t2][n2])
            for (r2 in this.deletedStates[t2][n2] = {}, this.stateChanges[t2][n2])
              this.deletedStates[t2][n2][r2] = null;
          else
            this.deletedStates[t2][n2] = null;
        else
          this.deletedStates[t2] = null;
      }
    }, yc.prototype.getState = function(t2, e2) {
      var r2 = String(e2), n2 = c({}, (this.state[t2] || {})[r2], (this.stateChanges[t2] || {})[r2]);
      if (null === this.deletedStates[t2])
        return {};
      if (this.deletedStates[t2]) {
        var i3 = this.deletedStates[t2][e2];
        if (null === i3)
          return {};
        for (var a2 in i3)
          delete n2[a2];
      }
      return n2;
    }, yc.prototype.initializeTileState = function(t2, e2) {
      t2.setFeatureState(this.state, e2);
    }, yc.prototype.coalesceChanges = function(t2, e2) {
      var r2 = {};
      for (var n2 in this.stateChanges) {
        this.state[n2] = this.state[n2] || {};
        var i3 = {};
        for (var a2 in this.stateChanges[n2])
          this.state[n2][a2] || (this.state[n2][a2] = {}), c(this.state[n2][a2], this.stateChanges[n2][a2]), i3[a2] = this.state[n2][a2];
        r2[n2] = i3;
      }
      for (var o2 in this.deletedStates) {
        this.state[o2] = this.state[o2] || {};
        var s2 = {};
        if (null === this.deletedStates[o2])
          for (var u2 in this.state[o2])
            s2[u2] = {}, this.state[o2][u2] = {};
        else
          for (var l2 in this.deletedStates[o2]) {
            if (null === this.deletedStates[o2][l2])
              this.state[o2][l2] = {};
            else
              for (var p2 = 0, h2 = Object.keys(this.deletedStates[o2][l2]); p2 < h2.length; p2 += 1)
                delete this.state[o2][l2][h2[p2]];
            s2[l2] = this.state[o2][l2];
          }
        r2[o2] = r2[o2] || {}, c(r2[o2], s2);
      }
      if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(r2).length)
        for (var f2 in t2)
          t2[f2].setFeatureState(r2, e2);
    };
    var dc = function(t2, e2) {
      this.tileID = t2, this.x = t2.canonical.x, this.y = t2.canonical.y, this.z = t2.canonical.z, this.grid = new Jn(8192, 16, 0), this.grid3D = new Jn(8192, 16, 0), this.featureIndexArray = new Ja(), this.promoteId = e2;
    };
    function mc(t2, e2, r2, n2, i3) {
      return x(t2, function(t3, a2) {
        var o2 = e2 instanceof na ? e2.get(a2) : null;
        return o2 && o2.evaluate ? o2.evaluate(r2, n2, i3) : o2;
      });
    }
    function vc(t2) {
      for (var e2 = 1 / 0, r2 = 1 / 0, n2 = -1 / 0, i3 = -1 / 0, a2 = 0, o2 = t2; a2 < o2.length; a2 += 1) {
        var s2 = o2[a2];
        e2 = Math.min(e2, s2.x), r2 = Math.min(r2, s2.y), n2 = Math.max(n2, s2.x), i3 = Math.max(i3, s2.y);
      }
      return { minX: e2, minY: r2, maxX: n2, maxY: i3 };
    }
    function gc(t2, e2) {
      return e2 - t2;
    }
    dc.prototype.insert = function(t2, e2, r2, n2, i3, a2) {
      var o2 = this.featureIndexArray.length;
      this.featureIndexArray.emplaceBack(r2, n2, i3);
      for (var s2 = a2 ? this.grid3D : this.grid, u2 = 0; u2 < e2.length; u2++) {
        for (var l2 = e2[u2], p2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], h2 = 0; h2 < l2.length; h2++) {
          var c2 = l2[h2];
          p2[0] = Math.min(p2[0], c2.x), p2[1] = Math.min(p2[1], c2.y), p2[2] = Math.max(p2[2], c2.x), p2[3] = Math.max(p2[3], c2.y);
        }
        p2[0] < 8192 && p2[1] < 8192 && p2[2] >= 0 && p2[3] >= 0 && s2.insert(o2, p2[0], p2[1], p2[2], p2[3]);
      }
    }, dc.prototype.loadVTLayers = function() {
      if (!this.vtLayers) {
        var t2 = this.tileID, e2 = t2.canonical, r2 = t2.reference, n2 = t2._tileY;
        this.vtLayers = new lc.VectorTile(new dl(this.rawTileData), null, { reference: r2, _tileY: n2, x: e2.x, y: e2.y, z: e2.z }).layers, this.sourceLayerCoder = new pc(this.vtLayers ? Object.keys(this.vtLayers).sort() : ["_geojsonTileLayer"]);
      }
      return this.vtLayers;
    }, dc.prototype.query = function(t2, e2, r2, n2, a2) {
      var o2 = this;
      this.loadVTLayers();
      for (var s2 = t2.params || {}, u2 = 8192 / t2.tileSize / t2.scale, l2 = _n(s2.filter), p2 = t2.queryGeometry, h2 = t2.queryPadding * u2, c2 = vc(p2), f2 = this.grid.query(c2.minX - h2, c2.minY - h2, c2.maxX + h2, c2.maxY + h2), y2 = vc(t2.cameraQueryGeometry), d2 = this.grid3D.query(y2.minX - h2, y2.minY - h2, y2.maxX + h2, y2.maxY + h2, function(e3, r3, n3, a3) {
        return function(t3, e4, r4, n4, a4) {
          for (var o3 = 0, s3 = t3; o3 < s3.length; o3 += 1) {
            var u3 = s3[o3];
            if (e4 <= u3.x && r4 <= u3.y && n4 >= u3.x && a4 >= u3.y)
              return true;
          }
          var l3 = [new i2(e4, r4), new i2(e4, a4), new i2(n4, a4), new i2(n4, r4)];
          if (t3.length > 2) {
            for (var p3 = 0, h3 = l3; p3 < h3.length; p3 += 1)
              if (Qo(t3, h3[p3]))
                return true;
          }
          for (var c3 = 0; c3 < t3.length - 1; c3++)
            if (Wo(t3[c3], t3[c3 + 1], l3))
              return true;
          return false;
        }(t2.cameraQueryGeometry, e3 - h2, r3 - h2, n3 + h2, a3 + h2);
      }), m2 = 0, v2 = d2; m2 < v2.length; m2 += 1)
        f2.push(v2[m2]);
      f2.sort(gc);
      for (var g2, x2 = {}, b2 = function(i3) {
        var h3 = f2[i3];
        if (h3 !== g2) {
          g2 = h3;
          var c3 = o2.featureIndexArray.get(h3), y3 = null;
          o2.loadMatchingFeature(x2, c3.bucketIndex, c3.sourceLayerIndex, c3.featureIndex, l2, s2.layers, s2.availableImages, e2, r2, n2, function(e3, r3, n3) {
            return y3 || (y3 = Oo(e3)), r3.queryIntersectsFeature(p2, e3, n3, y3, o2.z, t2.transform, u2, t2.pixelPosMatrix, a2[r3.id]);
          });
        }
      }, w2 = 0; w2 < f2.length; w2++)
        b2(w2);
      return x2;
    }, dc.prototype.loadMatchingFeature = function(t2, e2, r2, n2, i3, a2, o2, s2, u2, l2, p2) {
      var h2 = this.bucketLayerIDs[e2];
      if (!a2 || function(t3, e3) {
        for (var r3 = 0; r3 < t3.length; r3++)
          if (e3.indexOf(t3[r3]) >= 0)
            return true;
        return false;
      }(a2, h2)) {
        var c2 = this.sourceLayerCoder.decode(r2), f2 = this.vtLayers[c2].feature(n2);
        if (i3.filter(new Ji(this.tileID.overscaledZ), f2))
          for (var y2 = this.getId(f2, c2), d2 = 0; d2 < h2.length; d2++) {
            var m2 = h2[d2];
            if (!(a2 && a2.indexOf(m2) < 0)) {
              var v2 = s2[m2];
              if (v2) {
                var g2 = {};
                void 0 !== y2 && l2 && (g2 = l2.getState(v2.sourceLayer || "_geojsonTileLayer", y2));
                var x2 = u2[m2];
                x2.paint = mc(x2.paint, v2.paint, f2, g2, o2), x2.layout = mc(x2.layout, v2.layout, f2, g2, o2);
                var b2 = !p2 || p2(f2, v2, g2);
                if (b2) {
                  var w2 = new hc(f2, this.z, this.x, this.y, y2);
                  w2.layer = x2;
                  var _2 = t2[m2];
                  void 0 === _2 && (_2 = t2[m2] = []), _2.push({ featureIndex: n2, feature: w2, intersectionZ: b2 });
                }
              }
            }
          }
      }
    }, dc.prototype.lookupSymbolFeatures = function(t2, e2, r2, n2, i3, a2, o2, s2) {
      var u2 = {};
      this.loadVTLayers();
      for (var l2 = _n(i3), p2 = 0, h2 = t2; p2 < h2.length; p2 += 1)
        this.loadMatchingFeature(u2, r2, n2, h2[p2], l2, a2, o2, s2, e2);
      return u2;
    }, dc.prototype.hasLayer = function(t2) {
      for (var e2 = 0, r2 = this.bucketLayerIDs; e2 < r2.length; e2 += 1)
        for (var n2 = 0, i3 = r2[e2]; n2 < i3.length; n2 += 1)
          if (t2 === i3[n2])
            return true;
      return false;
    }, dc.prototype.getId = function(t2, e2) {
      var r2 = t2.id;
      return this.promoteId && "boolean" == typeof (r2 = t2.properties["string" == typeof this.promoteId ? this.promoteId : this.promoteId[e2]]) && (r2 = Number(r2)), r2;
    }, ti("FeatureIndex", dc, { omit: ["rawTileData", "sourceLayerCoder"] });
    var xc = function(t2) {
      var e2 = {}, r2 = [];
      for (var n2 in t2) {
        var i3 = t2[n2], a2 = e2[n2] = {};
        for (var o2 in i3) {
          var s2 = i3[+o2];
          if (s2 && 0 !== s2.bitmap.width && 0 !== s2.bitmap.height) {
            var u2 = s2.metrics.localGlyph ? 2 : 1, l2 = { x: 0, y: 0, w: s2.bitmap.width + 2 * u2, h: s2.bitmap.height + 2 * u2 };
            r2.push(l2), a2[o2] = { rect: l2, metrics: s2.metrics };
          }
        }
      }
      var p2 = Ll(r2), h2 = new Rs({ width: p2.w || 1, height: p2.h || 1 });
      for (var c2 in t2) {
        var f2 = t2[c2];
        for (var y2 in f2) {
          var d2 = f2[+y2];
          if (d2 && 0 !== d2.bitmap.width && 0 !== d2.bitmap.height) {
            var m2 = e2[c2][y2].rect, v2 = d2.metrics.localGlyph ? 2 : 1;
            Rs.copy(d2.bitmap, h2, { x: 0, y: 0 }, { x: m2.x + v2, y: m2.y + v2 }, d2.bitmap);
          }
        }
      }
      this.image = h2, this.positions = e2;
    };
    ti("GlyphAtlas", xc);
    var bc = function(t2) {
      var e2 = t2.tileID, r2 = e2.canonical, n2 = e2._mapZoom;
      this.tileID = new rc(e2.overscaledZ, e2.wrap, r2.z, r2.x, r2.y, e2.reference, e2.sourceID, e2.zoomRule, e2._tileY, n2), this.uid = t2.uid, this.zoom = n2 || t2.zoom, this.pixelRatio = t2.pixelRatio, this.tileSize = t2.tileSize, this.source = t2.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t2.showCollisionBoxes, this.collectResourceTiming = !!t2.collectResourceTiming, this.returnDependencies = !!t2.returnDependencies, this.promoteId = t2.promoteId, this.isSymbolTile = t2.isSymbolTile;
    };
    function wc(t2, e2, r2) {
      for (var n2 = new Ji(e2), i3 = 0, a2 = t2; i3 < a2.length; i3 += 1)
        a2[i3].recalculate(n2, r2);
    }
    bc.prototype.parse = function(t2, e2, r2, n2, i3) {
      var a2 = this;
      this.status = "parsing", this.data = t2;
      var o2 = this.tileID, s2 = o2._mapZoom || this.zoom, u2 = this.overscaling, l2 = e2._xml, p2 = "Sg4326" == o2.reference, c2 = new Ua(), f2 = new pc(Object.keys(t2.layers).sort()), y2 = new dc(o2, this.promoteId);
      y2.bucketLayerIDs = [];
      var d2, m2, v2, g2, b2 = {}, w2 = new mh(256, 256), _2 = { featureIndex: y2, iconDependencies: {}, patternDependencies: {}, glyphDependencies: {}, lineAtlas: w2, availableImages: r2, eleSymbolVertexs: {} }, A2 = e2.familiesBySource[this.source];
      for (var S2 in A2) {
        var z2 = t2.layers[S2];
        if (z2) {
          for (var I2 = false, k2 = false, M2 = 0, P2 = A2[S2]; M2 < P2.length; M2 += 1)
            "symbol" === P2[M2][0].type ? I2 = true : k2 = true;
          if ((true !== this.isSymbolTile || I2) && (false !== this.isSymbolTile || k2)) {
            for (var V2 = f2.encode(S2), C2 = [], T2 = 0, B2 = 0, D2 = z2.length; B2 < D2; B2++) {
              var L2 = z2.feature(B2), F2 = y2.getId(L2, S2);
              if (p2) {
                var R2 = L2.properties, O2 = R2.maxzoom, j2 = R2.minzoom, U2 = 0, q2 = 25;
                if (j2 >= 0 ? U2 = j2 <= 3 ? 0 : j2 - 1 : j2 = 0, O2 >= 0 && (q2 = O2 >= 19 ? 25 : O2 > U2 ? 3 == L2.type ? O2 + 1 : O2 : U2 + 1), s2 < U2 || s2 >= q2)
                  continue;
                if (null == (R2 = E(R2, l2, s2, p2)))
                  continue;
              }
              C2.push({ feature: L2, id: F2, index: B2, sourceLayerIndex: V2, order: T2 }), T2++;
            }
            if (C2.length > 0) {
              p2 && C2.length > 1 && C2[0].feature.properties.paintLevel && C2.sort(function(t3, e3) {
                return t3.feature.properties.paintLevel - e3.feature.properties.paintLevel;
              });
              for (var N2 = 0, Z2 = A2[S2].length; N2 < Z2; N2++) {
                var G2 = A2[S2][N2], Y2 = G2[0];
                void 0 !== this.isSymbolTile && "symbol" === Y2.type !== this.isSymbolTile || Y2.minzoom && s2 < Math.floor(Y2.minzoom) || Y2.maxzoom && s2 >= Y2.maxzoom || "none" !== Y2.visibility && (wc(G2, s2, r2), (b2[Y2.id] = Y2.createBucket({ index: y2.bucketLayerIDs.length, layers: G2, zoom: s2, pixelRatio: this.pixelRatio, overscaling: u2, collisionBoxArray: c2, sourceLayerIndex: V2, sourceID: this.source })).populate(C2, _2, o2.canonical), y2.bucketLayerIDs.push(G2.map(function(t3) {
                  return t3.id;
                })));
              }
            }
          }
        }
      }
      w2.trim();
      var X2 = { type: "maybePrepare", isSymbolTile: this.isSymbolTile, zoom: this.zoom }, K2 = x(_2.glyphDependencies, function(t3) {
        return Object.keys(t3).map(Number);
      });
      Object.keys(K2).length ? n2.send("getGlyphs", { uid: this.uid, stacks: K2 }, function(t3, e3) {
        d2 || (d2 = t3, m2 = e3, $2.call(a2));
      }, void 0, void 0, X2) : m2 = {};
      var J2 = Object.keys(_2.iconDependencies);
      J2.length ? n2.send("getImages", { icons: J2, source: this.source, tileID: o2, type: "icons" }, function(t3, e3) {
        d2 || (d2 = t3, v2 = e3, $2.call(a2));
      }, void 0, void 0, X2) : v2 = {};
      var H2, Q2 = Object.keys(_2.patternDependencies);
      Q2.length ? n2.send("getImages", { icons: Q2, source: this.source, tileID: o2, type: "patterns" }, function(t3, e3) {
        d2 || (d2 = t3, g2 = e3, $2.call(a2));
      }, void 0, void 0, X2) : g2 = {};
      var W2 = Object.keys(_2.eleSymbolVertexs);
      function $2() {
        if (d2)
          return i3(d2);
        if (m2 && v2 && g2 && H2) {
          var t3 = new xc(m2), e3 = new Ol(v2, g2);
          for (var n3 in b2) {
            var a3 = b2[n3];
            a3 instanceof Gp ? (wc(a3.layers, s2, r2), Ep(a3, m2, t3.positions, v2, e3.iconPositions, this.showCollisionBoxes, o2.canonical)) : a3 instanceof ah ? a3.addFeatures(H2, o2.canonical) : a3.hasPattern && (a3 instanceof tl || a3 instanceof ku || a3 instanceof Zu) && (wc(a3.layers, s2, r2), a3.addFeatures(_2, o2.canonical, e3.patternPositions));
          }
          this.status = "done", i3(null, { buckets: h(b2).filter(function(t4) {
            return !t4.isEmpty();
          }), featureIndex: y2, collisionBoxArray: c2, glyphAtlasImage: t3.image, lineAtlas: w2, imageAtlas: e3, glyphMap: this.returnDependencies ? m2 : null, iconMap: this.returnDependencies ? v2 : null, glyphPositions: this.returnDependencies ? t3.positions : null });
        }
      }
      W2.length ? n2.send("getEleSymbolVertexs", { eleSymbolVertexs: W2 }, function(t3, e3) {
        d2 || (d2 = t3, H2 = e3, $2.call(a2));
      }, void 0, void 0, X2) : H2 = {}, $2.call(this);
    };
    var _c = self.performance, Sc = function(t2) {
      this._marks = { start: [t2.url, "start"].join("#"), end: [t2.url, "end"].join("#"), measure: t2.url.toString() }, _c.mark(this._marks.start);
    };
    Sc.prototype.finish = function() {
      _c.mark(this._marks.end);
      var t2 = _c.getEntriesByName(this._marks.measure);
      return 0 === t2.length && (_c.measure(this._marks.measure, this._marks.start, this._marks.end), t2 = _c.getEntriesByName(this._marks.measure), _c.clearMarks(this._marks.start), _c.clearMarks(this._marks.end), _c.clearMeasures(this._marks.measure)), t2;
    };
    var zc = function(t2) {
      this.entries = {}, this.scheduler = t2;
    };
    function Ic(t2, e2, r2) {
      var n2 = JSON.stringify(t2.request);
      return t2.data && (this.deduped.entries[n2] = { result: [null, t2.data] }), this.deduped.request(n2, { type: "parseTile", isSymbolTile: t2.isSymbolTile, zoom: t2.tileZoom }, function(e3) {
        var n3 = Ft(t2.request, function(n4, i3, a2, o2) {
          if (n4)
            e3(n4);
          else if (i3) {
            var s2 = t2.tileID, u2 = s2.canonical, l2 = s2.reference, p2 = s2._tileY;
            e3(null, { vectorTile: r2 ? void 0 : new lc.VectorTile(new dl(i3), null, { reference: l2, _tileY: p2, x: u2.x, y: u2.y, z: u2.z }), rawData: i3, cacheControl: a2, expires: o2 });
          }
        });
        return function() {
          n3.cancel(), e3();
        };
      }, e2);
    }
    zc.prototype.request = function(t2, e2, r2, n2) {
      var i3 = this, a2 = this.entries[t2] = this.entries[t2] || { callbacks: [] };
      if (a2.result) {
        var o2 = a2.result, s2 = o2[0], u2 = o2[1];
        return this.scheduler ? this.scheduler.add(function() {
          n2(s2, u2);
        }, e2) : n2(s2, u2), function() {
        };
      }
      return a2.callbacks.push(n2), a2.cancel || (a2.cancel = r2(function(r3, n3) {
        a2.result = [r3, n3];
        for (var o3 = function() {
          var t3 = u3[s3];
          i3.scheduler ? i3.scheduler.add(function() {
            t3(r3, n3);
          }, e2) : t3(r3, n3);
        }, s3 = 0, u3 = a2.callbacks; s3 < u3.length; s3 += 1)
          o3();
        setTimeout(function() {
          return delete i3.entries[t2];
        }, 3e3);
      })), function() {
        a2.result || (a2.callbacks = a2.callbacks.filter(function(t3) {
          return t3 !== n2;
        }), a2.callbacks.length || (a2.cancel(), delete i3.entries[t2]));
      };
    };
    var kc = function(t2, e2, r2, n2) {
      this.actor = t2, this.layerIndex = e2, this.availableImages = r2, this.loadVectorData = n2 || Ic, this.loading = {}, this.loaded = {}, this.deduped = new zc(t2.scheduler);
    };
    kc.prototype.loadTile = function(t2, e2) {
      var r2 = this, n2 = t2.uid, i3 = !!(t2 && t2.request && t2.request.collectResourceTiming) && new Sc(t2.request), a2 = this.loading[n2] = new bc(t2);
      a2.abort = this.loadVectorData(t2, function(o2, s2) {
        var u2 = !r2.loading[n2];
        if (delete r2.loading[n2], u2 || o2 || !s2)
          return a2.status = "done", u2 || (r2.loaded[n2] = a2), e2(o2);
        var l2 = s2.rawData, p2 = {};
        s2.expires && (p2.expires = s2.expires), s2.cacheControl && (p2.cacheControl = s2.cacheControl);
        var h2 = {};
        if (i3) {
          var f2 = i3.finish();
          f2 && (h2.resourceTiming = JSON.parse(JSON.stringify(f2)));
        }
        var y2 = t2.tileID, d2 = y2.canonical, m2 = y2.reference, v2 = y2._tileY;
        a2.vectorTile = s2.vectorTile || new lc.VectorTile(new dl(l2), null, { reference: m2, _tileY: v2, x: d2.x, y: d2.y, z: d2.z }), a2.parse(a2.vectorTile, r2.layerIndex, r2.availableImages, r2.actor, function(t3, r3) {
          if (t3 || !r3)
            return e2(t3);
          e2(null, c({ rawTileData: l2.slice(0) }, r3, p2, h2));
        }), r2.loaded = r2.loaded || {}, r2.loaded[n2] = a2;
      });
    }, kc.prototype.reloadTile = function(t2, e2) {
      var r2 = this, n2 = this.loaded, i3 = t2.uid, a2 = this;
      if (n2 && n2[i3]) {
        var o2 = n2[i3];
        o2.showCollisionBoxes = t2.showCollisionBoxes, o2.tileID = t2.tileID;
        var s2 = function(t3, n3) {
          var i4 = o2.reloadCallback;
          i4 && (delete o2.reloadCallback, o2.parse(o2.vectorTile, a2.layerIndex, r2.availableImages, a2.actor, i4)), e2(t3, n3);
        };
        "parsing" === o2.status ? o2.reloadCallback = s2 : "done" === o2.status && (o2.vectorTile ? o2.parse(o2.vectorTile, this.layerIndex, this.availableImages, this.actor, s2) : s2());
      }
    }, kc.prototype.abortTile = function(t2, e2) {
      var r2 = t2.uid, n2 = this.loading[r2];
      n2 && (n2.abort && n2.abort(), delete this.loading[r2]), e2();
    }, kc.prototype.removeTile = function(t2, e2) {
      var r2 = this.loaded, n2 = t2.uid;
      r2 && r2[n2] && delete r2[n2], e2();
    };
    var Mc = function(t2, e2, r2) {
      if (this.uid = t2, e2.height !== e2.width)
        throw new RangeError("DEM tiles must be square");
      if (r2 && "sgmap" !== r2 && "terrarium" !== r2)
        return S('"' + r2 + '" is not a valid encoding type. Valid types include "sgmap" and "terrarium".');
      this.stride = e2.height;
      var n2 = this.dim = e2.height - 2;
      this.data = new Uint32Array(e2.data.buffer), this.encoding = r2 || "sgmap";
      for (var i3 = 0; i3 < n2; i3++)
        this.data[this._idx(-1, i3)] = this.data[this._idx(0, i3)], this.data[this._idx(n2, i3)] = this.data[this._idx(n2 - 1, i3)], this.data[this._idx(i3, -1)] = this.data[this._idx(i3, 0)], this.data[this._idx(i3, n2)] = this.data[this._idx(i3, n2 - 1)];
      this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)], this.data[this._idx(n2, -1)] = this.data[this._idx(n2 - 1, 0)], this.data[this._idx(-1, n2)] = this.data[this._idx(0, n2 - 1)], this.data[this._idx(n2, n2)] = this.data[this._idx(n2 - 1, n2 - 1)];
    };
    Mc.prototype.get = function(t2, e2) {
      var r2 = new Uint8Array(this.data.buffer), n2 = 4 * this._idx(t2, e2);
      return ("terrarium" === this.encoding ? this._unpackTerrarium : this._unpacksgmap)(r2[n2], r2[n2 + 1], r2[n2 + 2]);
    }, Mc.prototype.getUnpackVector = function() {
      return "terrarium" === this.encoding ? [256, 1, 1 / 256, 32768] : [6553.6, 25.6, 0.1, 1e4];
    }, Mc.prototype._idx = function(t2, e2) {
      if (t2 < -1 || t2 >= this.dim + 1 || e2 < -1 || e2 >= this.dim + 1)
        throw new RangeError("out of range source coordinates for DEM data");
      return (e2 + 1) * this.stride + (t2 + 1);
    }, Mc.prototype._unpacksgmap = function(t2, e2, r2) {
      return (256 * t2 * 256 + 256 * e2 + r2) / 10 - 1e4;
    }, Mc.prototype._unpackTerrarium = function(t2, e2, r2) {
      return 256 * t2 + e2 + r2 / 256 - 32768;
    }, Mc.prototype.getPixels = function() {
      return new Os({ width: this.stride, height: this.stride }, new Uint8Array(this.data.buffer));
    }, Mc.prototype.backfillBorder = function(t2, e2, r2) {
      if (this.dim !== t2.dim)
        throw new Error("dem dimension mismatch");
      var n2 = e2 * this.dim, i3 = e2 * this.dim + this.dim, a2 = r2 * this.dim, o2 = r2 * this.dim + this.dim;
      switch (e2) {
        case -1:
          n2 = i3 - 1;
          break;
        case 1:
          i3 = n2 + 1;
      }
      switch (r2) {
        case -1:
          a2 = o2 - 1;
          break;
        case 1:
          o2 = a2 + 1;
      }
      for (var s2 = -e2 * this.dim, u2 = -r2 * this.dim, l2 = a2; l2 < o2; l2++)
        for (var p2 = n2; p2 < i3; p2++)
          this.data[this._idx(p2, l2)] = t2.data[this._idx(p2 + s2, l2 + u2)];
    }, ti("DEMData", Mc);
    var Pc = ["background", "symbol", "line", "fill", "fill-extrusion", "circle", "heatmap", "raster", "hillshade", "esymbol"], Vc = [], Cc = [], Tc = "", Ec = [], Bc = [];
    function Dc(t2, e2, r2, n2, i3, a2) {
      var o2 = i3 - r2, s2 = a2 - n2;
      if (0 !== o2 || 0 !== s2) {
        var u2 = ((t2 - r2) * o2 + (e2 - n2) * s2) / (o2 * o2 + s2 * s2);
        u2 > 1 ? (r2 = i3, n2 = a2) : u2 > 0 && (r2 += o2 * u2, n2 += s2 * u2);
      }
      return (o2 = t2 - r2) * o2 + (s2 = e2 - n2) * s2;
    }
    function Lc(t2, e2, r2, n2) {
      var i3 = { id: void 0 === t2 ? null : t2, type: e2, geometry: r2, tags: n2, minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 };
      return function(t3) {
        var e3 = t3.geometry, r3 = t3.type;
        if ("Point" === r3 || "MultiPoint" === r3 || "LineString" === r3)
          Fc(t3, e3);
        else if ("Polygon" === r3 || "MultiLineString" === r3)
          for (var n3 = 0; n3 < e3.length; n3++)
            Fc(t3, e3[n3]);
        else if ("MultiPolygon" === r3)
          for (n3 = 0; n3 < e3.length; n3++)
            for (var i4 = 0; i4 < e3[n3].length; i4++)
              Fc(t3, e3[n3][i4]);
      }(i3), i3;
    }
    function Fc(t2, e2) {
      for (var r2 = 0; r2 < e2.length; r2 += 3)
        t2.minX = Math.min(t2.minX, e2[r2]), t2.minY = Math.min(t2.minY, e2[r2 + 1]), t2.maxX = Math.max(t2.maxX, e2[r2]), t2.maxY = Math.max(t2.maxY, e2[r2 + 1]);
    }
    function Rc(t2, e2, r2, n2) {
      if (e2.geometry) {
        $h(r2);
        var i3 = e2.geometry.coordinates, a2 = e2.geometry.type, o2 = Math.pow(r2.tolerance / ((1 << r2.maxZoom) * r2.extent), 2), s2 = [], u2 = e2.id;
        if (r2.promoteId ? u2 = e2.properties[r2.promoteId] : r2.generateId && (u2 = n2 || 0), "Point" === a2)
          Oc(i3, s2);
        else if ("MultiPoint" === a2)
          for (var l2 = 0; l2 < i3.length; l2++)
            Oc(i3[l2], s2);
        else if ("LineString" === a2)
          jc(i3, s2, o2, false);
        else if ("MultiLineString" === a2) {
          if (r2.lineMetrics) {
            for (l2 = 0; l2 < i3.length; l2++)
              jc(i3[l2], s2 = [], o2, false), t2.push(Lc(u2, "LineString", s2, e2.properties));
            return;
          }
          Uc(i3, s2, o2, false);
        } else if ("Polygon" === a2)
          Uc(i3, s2, o2, true);
        else {
          if ("MultiPolygon" !== a2) {
            if ("GeometryCollection" === a2) {
              for (l2 = 0; l2 < e2.geometry.geometries.length; l2++)
                Rc(t2, { id: u2, geometry: e2.geometry.geometries[l2], properties: e2.properties }, r2, n2);
              return;
            }
            throw new Error("Input data is not a valid GeoJSON object.");
          }
          for (l2 = 0; l2 < i3.length; l2++) {
            var p2 = [];
            Uc(i3[l2], p2, o2, true), s2.push(p2);
          }
        }
        t2.push(Lc(u2, a2, s2, e2.properties));
      }
    }
    function Oc(t2, e2) {
      e2.push(qc(t2[0])), e2.push(Nc(t2[1])), e2.push(0);
    }
    function jc(t2, e2, r2, n2) {
      for (var i3, a2, o2 = 0, s2 = 0; s2 < t2.length; s2++) {
        var u2 = qc(t2[s2][0]), l2 = Nc(t2[s2][1]);
        e2.push(u2), e2.push(l2), e2.push(0), s2 > 0 && (o2 += n2 ? (i3 * l2 - u2 * a2) / 2 : Math.sqrt(Math.pow(u2 - i3, 2) + Math.pow(l2 - a2, 2))), i3 = u2, a2 = l2;
      }
      var p2 = e2.length - 3;
      e2[2] = 1, function t3(e3, r3, n3, i4) {
        for (var a3, o3 = i4, s3 = n3 - r3 >> 1, u3 = n3 - r3, l3 = e3[r3], p3 = e3[r3 + 1], h2 = e3[n3], c2 = e3[n3 + 1], f2 = r3 + 3; f2 < n3; f2 += 3) {
          var y2 = Dc(e3[f2], e3[f2 + 1], l3, p3, h2, c2);
          if (y2 > o3)
            a3 = f2, o3 = y2;
          else if (y2 === o3) {
            var d2 = Math.abs(f2 - s3);
            d2 < u3 && (a3 = f2, u3 = d2);
          }
        }
        o3 > i4 && (a3 - r3 > 3 && t3(e3, r3, a3, i4), e3[a3 + 2] = o3, n3 - a3 > 3 && t3(e3, a3, n3, i4));
      }(e2, 0, p2, r2), e2[p2 + 2] = 1, e2.size = Math.abs(o2), e2.start = 0, e2.end = e2.size;
    }
    function Uc(t2, e2, r2, n2) {
      for (var i3 = 0; i3 < t2.length; i3++) {
        var a2 = [];
        jc(t2[i3], a2, r2, n2), e2.push(a2);
      }
    }
    function qc(t2) {
      return (0, Wh.parse.xFromLng)(t2);
    }
    function Nc(t2) {
      return (0, Wh.parse.yFromLat)(t2);
    }
    function Zc(t2, e2, r2, n2, i3, a2, o2, s2) {
      if (n2 /= e2, a2 >= (r2 /= e2) && o2 < n2)
        return t2;
      if (o2 < r2 || a2 >= n2)
        return null;
      for (var u2 = [], l2 = 0; l2 < t2.length; l2++) {
        var p2 = t2[l2], h2 = p2.geometry, c2 = p2.type, f2 = 0 === i3 ? p2.minX : p2.minY, y2 = 0 === i3 ? p2.maxX : p2.maxY;
        if (f2 >= r2 && y2 < n2)
          u2.push(p2);
        else if (!(y2 < r2 || f2 >= n2)) {
          var d2 = [];
          if ("Point" === c2 || "MultiPoint" === c2)
            Gc(h2, d2, r2, n2, i3);
          else if ("LineString" === c2)
            Yc(h2, d2, r2, n2, i3, false, s2.lineMetrics);
          else if ("MultiLineString" === c2)
            Kc(h2, d2, r2, n2, i3, false);
          else if ("Polygon" === c2)
            Kc(h2, d2, r2, n2, i3, true);
          else if ("MultiPolygon" === c2)
            for (var m2 = 0; m2 < h2.length; m2++) {
              var v2 = [];
              Kc(h2[m2], v2, r2, n2, i3, true), v2.length && d2.push(v2);
            }
          if (d2.length) {
            if (s2.lineMetrics && "LineString" === c2) {
              for (m2 = 0; m2 < d2.length; m2++)
                u2.push(Lc(p2.id, c2, d2[m2], p2.tags));
              continue;
            }
            "LineString" !== c2 && "MultiLineString" !== c2 || (1 === d2.length ? (c2 = "LineString", d2 = d2[0]) : c2 = "MultiLineString"), "Point" !== c2 && "MultiPoint" !== c2 || (c2 = 3 === d2.length ? "Point" : "MultiPoint"), u2.push(Lc(p2.id, c2, d2, p2.tags));
          }
        }
      }
      return u2.length ? u2 : null;
    }
    function Gc(t2, e2, r2, n2, i3) {
      for (var a2 = 0; a2 < t2.length; a2 += 3) {
        var o2 = t2[a2 + i3];
        o2 >= r2 && o2 <= n2 && (e2.push(t2[a2]), e2.push(t2[a2 + 1]), e2.push(t2[a2 + 2]));
      }
    }
    function Yc(t2, e2, r2, n2, i3, a2, o2) {
      for (var s2, u2, l2 = Xc(t2), p2 = 0 === i3 ? Hc : Qc, h2 = t2.start, c2 = 0; c2 < t2.length - 3; c2 += 3) {
        var f2 = t2[c2], y2 = t2[c2 + 1], d2 = t2[c2 + 2], m2 = t2[c2 + 3], v2 = t2[c2 + 4], g2 = 0 === i3 ? f2 : y2, x2 = 0 === i3 ? m2 : v2, b2 = false;
        o2 && (s2 = Math.sqrt(Math.pow(f2 - m2, 2) + Math.pow(y2 - v2, 2))), g2 < r2 ? x2 > r2 && (u2 = p2(l2, f2, y2, m2, v2, r2), o2 && (l2.start = h2 + s2 * u2)) : g2 > n2 ? x2 < n2 && (u2 = p2(l2, f2, y2, m2, v2, n2), o2 && (l2.start = h2 + s2 * u2)) : Jc(l2, f2, y2, d2), x2 < r2 && g2 >= r2 && (u2 = p2(l2, f2, y2, m2, v2, r2), b2 = true), x2 > n2 && g2 <= n2 && (u2 = p2(l2, f2, y2, m2, v2, n2), b2 = true), !a2 && b2 && (o2 && (l2.end = h2 + s2 * u2), e2.push(l2), l2 = Xc(t2)), o2 && (h2 += s2);
      }
      var w2 = t2.length - 3;
      f2 = t2[w2], y2 = t2[w2 + 1], d2 = t2[w2 + 2], (g2 = 0 === i3 ? f2 : y2) >= r2 && g2 <= n2 && Jc(l2, f2, y2, d2), w2 = l2.length - 3, a2 && w2 >= 3 && (l2[w2] !== l2[0] || l2[w2 + 1] !== l2[1]) && Jc(l2, l2[0], l2[1], l2[2]), l2.length && e2.push(l2);
    }
    function Xc(t2) {
      var e2 = [];
      return e2.size = t2.size, e2.start = t2.start, e2.end = t2.end, e2;
    }
    function Kc(t2, e2, r2, n2, i3, a2) {
      for (var o2 = 0; o2 < t2.length; o2++)
        Yc(t2[o2], e2, r2, n2, i3, a2, false);
    }
    function Jc(t2, e2, r2, n2) {
      t2.push(e2), t2.push(r2), t2.push(n2);
    }
    function Hc(t2, e2, r2, n2, i3, a2) {
      var o2 = (a2 - e2) / (n2 - e2);
      return t2.push(a2), t2.push(r2 + (i3 - r2) * o2), t2.push(1), o2;
    }
    function Qc(t2, e2, r2, n2, i3, a2) {
      var o2 = (a2 - r2) / (i3 - r2);
      return t2.push(e2 + (n2 - e2) * o2), t2.push(a2), t2.push(1), o2;
    }
    function Wc(t2, e2) {
      for (var r2 = [], n2 = 0; n2 < t2.length; n2++) {
        var i3, a2 = t2[n2], o2 = a2.type;
        if ("Point" === o2 || "MultiPoint" === o2 || "LineString" === o2)
          i3 = $c(a2.geometry, e2);
        else if ("MultiLineString" === o2 || "Polygon" === o2) {
          i3 = [];
          for (var s2 = 0; s2 < a2.geometry.length; s2++)
            i3.push($c(a2.geometry[s2], e2));
        } else if ("MultiPolygon" === o2)
          for (i3 = [], s2 = 0; s2 < a2.geometry.length; s2++) {
            for (var u2 = [], l2 = 0; l2 < a2.geometry[s2].length; l2++)
              u2.push($c(a2.geometry[s2][l2], e2));
            i3.push(u2);
          }
        r2.push(Lc(a2.id, o2, i3, a2.tags));
      }
      return r2;
    }
    function $c(t2, e2) {
      var r2 = [];
      r2.size = t2.size, void 0 !== t2.start && (r2.start = t2.start, r2.end = t2.end);
      for (var n2 = 0; n2 < t2.length; n2 += 3)
        r2.push(t2[n2] + e2, t2[n2 + 1], t2[n2 + 2]);
      return r2;
    }
    function tf(t2, e2) {
      if (t2.transformed)
        return t2;
      var r2, n2, i3, a2 = 1 << t2.z, o2 = t2.x, s2 = t2.y;
      for (r2 = 0; r2 < t2.features.length; r2++) {
        var u2 = t2.features[r2], l2 = u2.geometry, p2 = u2.type;
        if (u2.geometry = [], 1 === p2)
          for (n2 = 0; n2 < l2.length; n2 += 2)
            u2.geometry.push(ef(l2[n2], l2[n2 + 1], e2, a2, o2, s2));
        else
          for (n2 = 0; n2 < l2.length; n2++) {
            var h2 = [];
            for (i3 = 0; i3 < l2[n2].length; i3 += 2)
              h2.push(ef(l2[n2][i3], l2[n2][i3 + 1], e2, a2, o2, s2));
            u2.geometry.push(h2);
          }
      }
      return t2.transformed = true, t2;
    }
    function ef(t2, e2, r2, n2, i3, a2) {
      return [Math.round(r2 * (t2 * n2 - i3)), Math.round(r2 * (e2 * n2 - a2))];
    }
    function rf(t2, e2, r2, n2, i3) {
      for (var a2 = e2 === i3.maxZoom ? 0 : i3.tolerance / ((1 << e2) * i3.extent), o2 = { features: [], numPoints: 0, numSimplified: 0, numFeatures: 0, source: null, x: r2, y: n2, z: e2, transformed: false, minX: 2, minY: 1, maxX: -1, maxY: 0 }, s2 = 0; s2 < t2.length; s2++) {
        o2.numFeatures++, nf(o2, t2[s2], a2, i3);
        var u2 = t2[s2].minX, l2 = t2[s2].minY, p2 = t2[s2].maxX, h2 = t2[s2].maxY;
        u2 < o2.minX && (o2.minX = u2), l2 < o2.minY && (o2.minY = l2), p2 > o2.maxX && (o2.maxX = p2), h2 > o2.maxY && (o2.maxY = h2);
      }
      return o2;
    }
    function nf(t2, e2, r2, n2) {
      var i3 = e2.geometry, a2 = e2.type, o2 = [];
      if ("Point" === a2 || "MultiPoint" === a2)
        for (var s2 = 0; s2 < i3.length; s2 += 3)
          o2.push(i3[s2]), o2.push(i3[s2 + 1]), t2.numPoints++, t2.numSimplified++;
      else if ("LineString" === a2)
        af(o2, i3, t2, r2, false, false);
      else if ("MultiLineString" === a2 || "Polygon" === a2)
        for (s2 = 0; s2 < i3.length; s2++)
          af(o2, i3[s2], t2, r2, "Polygon" === a2, 0 === s2);
      else if ("MultiPolygon" === a2)
        for (var u2 = 0; u2 < i3.length; u2++) {
          var l2 = i3[u2];
          for (s2 = 0; s2 < l2.length; s2++)
            af(o2, l2[s2], t2, r2, true, 0 === s2);
        }
      if (o2.length) {
        var p2 = e2.tags || null;
        if ("LineString" === a2 && n2.lineMetrics) {
          for (var h2 in p2 = {}, e2.tags)
            p2[h2] = e2.tags[h2];
          p2.sgmap_clip_start = i3.start / i3.size, p2.sgmap_clip_end = i3.end / i3.size;
        }
        var c2 = { geometry: o2, type: "Polygon" === a2 || "MultiPolygon" === a2 ? 3 : "LineString" === a2 || "MultiLineString" === a2 ? 2 : 1, tags: p2 };
        null !== e2.id && (c2.id = e2.id), t2.features.push(c2);
      }
    }
    function af(t2, e2, r2, n2, i3, a2) {
      var o2 = n2 * n2;
      if (n2 > 0 && e2.size < (i3 ? o2 : n2))
        r2.numPoints += e2.length / 3;
      else {
        for (var s2 = [], u2 = 0; u2 < e2.length; u2 += 3)
          (0 === n2 || e2[u2 + 2] > o2) && (r2.numSimplified++, s2.push(e2[u2]), s2.push(e2[u2 + 1])), r2.numPoints++;
        i3 && function(t3, e3) {
          for (var r3 = 0, n3 = 0, i4 = t3.length, a3 = i4 - 2; n3 < i4; a3 = n3, n3 += 2)
            r3 += (t3[n3] - t3[a3]) * (t3[n3 + 1] + t3[a3 + 1]);
          if (r3 > 0 === e3)
            for (n3 = 0, i4 = t3.length; n3 < i4 / 2; n3 += 2) {
              var o3 = t3[n3], s3 = t3[n3 + 1];
              t3[n3] = t3[i4 - 2 - n3], t3[n3 + 1] = t3[i4 - 1 - n3], t3[i4 - 2 - n3] = o3, t3[i4 - 1 - n3] = s3;
            }
        }(s2, a2), t2.push(s2);
      }
    }
    function of(t2, e2) {
      var r2 = (e2 = this.options = function(t3, e3) {
        for (var r3 in e3)
          t3[r3] = e3[r3];
        return t3;
      }(Object.create(this.options), e2)).debug;
      if (r2 && console.time("preprocess data"), e2.maxZoom < 0 || e2.maxZoom > 24)
        throw new Error("maxZoom should be in the 0-24 range");
      if (e2.promoteId && e2.generateId)
        throw new Error("promoteId and generateId cannot be used together.");
      var n2 = function(t3, e3) {
        var r3 = [];
        if ("FeatureCollection" === t3.type)
          for (var n3 = 0; n3 < t3.features.length; n3++)
            Rc(r3, t3.features[n3], e3, n3);
        else
          Rc(r3, "Feature" === t3.type ? t3 : { geometry: t3 }, e3);
        return r3;
      }(t2, e2);
      this.tiles = {}, this.tileCoords = [], r2 && (console.timeEnd("preprocess data"), console.log("index: maxZoom: %d, maxPoints: %d", e2.indexMaxZoom, e2.indexMaxPoints), console.time("generate tiles"), this.stats = {}, this.total = 0), (n2 = function(t3, e3) {
        var r3 = e3.buffer / e3.extent, n3 = t3, i3 = Zc(t3, 1, -1 - r3, r3, 0, -1, 2, e3), a2 = Zc(t3, 1, 1 - r3, 2 + r3, 0, -1, 2, e3);
        return (i3 || a2) && (n3 = Zc(t3, 1, -r3, 1 + r3, 0, -1, 2, e3) || [], i3 && (n3 = Wc(i3, 1).concat(n3)), a2 && (n3 = n3.concat(Wc(a2, -1)))), n3;
      }(n2, e2)).length && this.splitTile(n2, 0, 0, 0), r2 && (n2.length && console.log("features: %d, points: %d", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd("generate tiles"), console.log("tiles generated:", this.total, JSON.stringify(this.stats)));
    }
    function sf(t2, e2, r2) {
      return 32 * ((1 << t2) * r2 + e2) + t2;
    }
    of.prototype.options = { maxZoom: 14, indexMaxZoom: 5, indexMaxPoints: 1e5, tolerance: 3, extent: 4096, buffer: 64, lineMetrics: false, promoteId: null, generateId: false, debug: 0 }, of.prototype.splitTile = function(t2, e2, r2, n2, i3, a2, o2) {
      for (var s2 = [t2, e2, r2, n2], u2 = this.options, l2 = u2.debug; s2.length; ) {
        n2 = s2.pop(), r2 = s2.pop(), e2 = s2.pop(), t2 = s2.pop();
        var p2 = 1 << e2, h2 = sf(e2, r2, n2), c2 = this.tiles[h2];
        if (!c2 && (l2 > 1 && console.time("creation"), c2 = this.tiles[h2] = rf(t2, e2, r2, n2, u2), this.tileCoords.push({ z: e2, x: r2, y: n2 }), l2)) {
          l2 > 1 && (console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)", e2, r2, n2, c2.numFeatures, c2.numPoints, c2.numSimplified), console.timeEnd("creation"));
          var f2 = "z" + e2;
          this.stats[f2] = (this.stats[f2] || 0) + 1, this.total++;
        }
        if (c2.source = t2, i3) {
          if (e2 === u2.maxZoom || e2 === i3)
            continue;
          var y2 = 1 << i3 - e2;
          if (r2 !== Math.floor(a2 / y2) || n2 !== Math.floor(o2 / y2))
            continue;
        } else if (e2 === u2.indexMaxZoom || c2.numPoints <= u2.indexMaxPoints)
          continue;
        if (c2.source = null, 0 !== t2.length) {
          l2 > 1 && console.time("clipping");
          var d2, m2, v2, g2, x2, b2, w2 = 0.5 * u2.buffer / u2.extent, _2 = 0.5 - w2, A2 = 0.5 + w2, S2 = 1 + w2;
          d2 = m2 = v2 = g2 = null, x2 = Zc(t2, p2, r2 - w2, r2 + A2, 0, c2.minX, c2.maxX, u2), b2 = Zc(t2, p2, r2 + _2, r2 + S2, 0, c2.minX, c2.maxX, u2), t2 = null, x2 && (d2 = Zc(x2, p2, n2 - w2, n2 + A2, 1, c2.minY, c2.maxY, u2), m2 = Zc(x2, p2, n2 + _2, n2 + S2, 1, c2.minY, c2.maxY, u2), x2 = null), b2 && (v2 = Zc(b2, p2, n2 - w2, n2 + A2, 1, c2.minY, c2.maxY, u2), g2 = Zc(b2, p2, n2 + _2, n2 + S2, 1, c2.minY, c2.maxY, u2), b2 = null), l2 > 1 && console.timeEnd("clipping"), s2.push(d2 || [], e2 + 1, 2 * r2, 2 * n2), s2.push(m2 || [], e2 + 1, 2 * r2, 2 * n2 + 1), s2.push(v2 || [], e2 + 1, 2 * r2 + 1, 2 * n2), s2.push(g2 || [], e2 + 1, 2 * r2 + 1, 2 * n2 + 1);
        }
      }
    }, of.prototype.getTile = function(t2, e2, r2) {
      var n2 = this.options, i3 = n2.extent, a2 = n2.debug;
      if (t2 < 0 || t2 > 24)
        return null;
      var o2 = 1 << t2, s2 = sf(t2, e2 = (e2 % o2 + o2) % o2, r2);
      if (this.tiles[s2])
        return tf(this.tiles[s2], i3);
      a2 > 1 && console.log("drilling down to z%d-%d-%d", t2, e2, r2);
      for (var u2, l2 = t2, p2 = e2, h2 = r2; !u2 && l2 > 0; )
        l2--, p2 = Math.floor(p2 / 2), h2 = Math.floor(h2 / 2), u2 = this.tiles[sf(l2, p2, h2)];
      return u2 && u2.source ? (a2 > 1 && console.log("found parent tile z%d-%d-%d", l2, p2, h2), a2 > 1 && console.time("drilling down"), this.splitTile(u2.source, l2, p2, h2, t2, e2, r2), a2 > 1 && console.timeEnd("drilling down"), this.tiles[s2] ? tf(this.tiles[s2], i3) : null) : null;
    }, t.Actor = xh, t.BufferTostyle = function(t2) {
      function e2(t3, e3, n3) {
        e3[Bc[t3]] = n3.readMessage(r2, {}), delete e3[Bc[t3]].zoomRange;
      }
      function r2(t3, e3, r3) {
        0 === t3 ? e3.zoomRange = r3.readString().split(",").map(function(t4) {
          return t4.replace(/_/g, ",");
        }) : e3[e3.zoomRange[t3 - 1]] = r3.readMessage(n2, {});
      }
      function n2(t3, e3, r3) {
        e3[Ec[t3]] = JSON.parse(r3.readString());
      }
      function i3(t3, e3, r3) {
        e3[t3] = r3.readMessage(a2, {});
      }
      function a2(t3, e3, r3) {
        1 === t3 && (e3.id = r3.readString()), 2 === t3 && (e3.type = Pc[r3.readVarint()]), 3 === t3 && (e3.source = Tc[r3.readVarint()]), 4 === t3 && (e3["source-layer"] = r3.readString()), 5 === t3 && (e3.minzoom = r3.readVarint()), 6 === t3 && (e3.maxzoom = r3.readVarint()), 7 === t3 && (e3.layout = r3.readMessage(o2, {})), 8 === t3 && (e3.paint = r3.readMessage(s2, {})), 9 === t3 && (e3.filter = JSON.parse(r3.readString()));
      }
      function o2(t3, e3, r3) {
        e3[Vc[t3]] = JSON.parse(r3.readString());
      }
      function s2(t3, e3, r3) {
        e3[Cc[t3]] = JSON.parse(r3.readString());
      }
      var u2 = t2.readFields(function(t3, r3, n3) {
        1 === t3 ? (r3._layout = n3.readString().split(","), Vc = r3._layout) : 2 === t3 ? (r3._paint = n3.readString().split(","), Cc = r3._paint) : 3 === t3 ? (r3._source = n3.readString(), Tc = r3._source.split(",")) : 4 === t3 ? r3.layers = n3.readMessage(i3, []) : 5 === t3 ? r3.created = n3.readString() : 6 === t3 ? r3.draft = n3.readBoolean() : 7 === t3 ? r3.glyphs = n3.readString() : 8 === t3 ? r3.id = n3.readString() : 9 === t3 ? r3.modified = n3.readString() : 10 === t3 ? r3.owner = n3.readString() : 11 === t3 ? r3.scheme = n3.readString() : 12 === t3 ? r3.sources = JSON.parse(n3.readString()) : 13 === t3 ? r3.sprite = n3.readString() : 14 === t3 ? r3.type = n3.readString() : 15 === t3 ? r3.url = n3.readString() : 16 === t3 ? r3.version = n3.readVarint() : 17 === t3 ? r3.minZoom = n3.readVarint() : 18 === t3 ? r3.maxZoom = n3.readVarint() : 19 === t3 ? (r3._xml_keys = n3.readString().split(","), Ec = r3._xml_keys) : 20 === t3 ? (r3._xml_ids = n3.readString().split(","), Bc = r3._xml_ids) : 21 === t3 && (r3.xml = n3.readMessage(e2, {}));
      }, {});
      return delete u2._paint, delete u2._layout, delete u2._source, delete u2._xml_keys, delete u2._xml_ids, u2;
    }, t.CanonicalTileID = tc, t.Color = me, t.DEMData = Mc, t.DataConstantProperty = ia, t.DedupedRequest = zc, t.EXTENT = 8192, t.ErrorEvent = Nt, t.EvaluationParameters = Ji, t.Event = qt, t.Evented = Zt, t.GlyphManager = xp, t.ImagePosition = Fl, t.LineAtlas = mh, t.LngLat = Ah, t.LngLatBounds = _h, t.LocalGlyphMode = gp, t.ONE_EM = 24, t.OverscaledTileID = rc, t.Point = i2, t.Point$1 = i2, t.Properties = la, t.Protobuf = dl, t.RGBAImage = Os, t.RequestManager = K, t.RequestPerformance = Sc, t.ResourceType = Ct, t.SegmentVector = Qa, t.SourceFeatureState = yc, t.StructArrayLayout1ui2 = Fa, t.StructArrayLayout2f1f2i16 = Ma, t.StructArrayLayout2f8 = Ra, t.StructArrayLayout2i4 = va, t.StructArrayLayout3ui6 = Va, t.StructArrayLayout4i8 = ga, t.Texture = dh, t.Tile = fc, t.Transitionable = Wi, t.Uniform1f = ho, t.Uniform1i = po, t.Uniform2f = co, t.Uniform3f = fo, t.Uniform4f = yo, t.UniformColor = mo, t.UniformMatrix4f = go, t.UserLayerData = Vt, t.ValidationError = Yt, t.VectorTileWorkerSource = kc, t.WritingMode = jl, t.ZoomHistory = oi, t.addDynamicAttributes = Up, t.addWaterMarkLayer = function(t2) {
      var e2 = JSON.parse(window.atob(q.ACCESS_TOKEN.split(".")[1]));
      if (e2 && "N" === e2.Issuance) {
        var r2 = parseInt(new Date().getTime() / 1e4).toString(32);
        new Promise(function(t3, e3) {
          var r3 = document.createElement("img");
          r3.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoQAAAKEBAMAAABsmTZ8AAAALVBMVEUAAACbm5v////m5ub////V1dX////y8vLHx8f////////////////////////QyUlqAAAAD3RSTlMAKSkpJCkeKSkWIQsbEBOI1dPrAAARDUlEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD24EAAAAAAAMj/tRFUVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVYU9OBAAAAAAAPJ/bQRVVVVVVVVVVVVVVVVVVVXYtZvXpsE4DuBBhtCXFbpR7HH7Jm1tncI6xB4l9CK+QDNEj6OI91ZEr5uIHscQwYMwggiCiIgIKsIYIngrIoK3MkTwv/B5fr+kSZo8Tcew6yTfg027Pm3y8Xn5PdmSJEmSJEmSJEmSJEmSJEmS/ynZpsz2vtqkY9vEJ7OpxWdWU6WnTU+OQ+a8Niokdsl7PhPbJj5pQ2H4+KaI87O9i1owbcgsaB+q2vTkuH716tX6aA7IlH2EQ21mn4zOUy2cNhSGpLRGhzkY/UjCLDChbphuKnPFI8zn81YMoRBb9ROWgm2OQx3WDyWFVWn4M0DdJ6VbKytdJtzTUR0iXBbfPHfGrHQvahPJDJSpDhPO3gzFIxRvmR9JeGdUuhGE3/T8PRi9Nvw57yrViTCL5QfYiSAEWhuGNoHQgFPEChGmMBxjfEI9rww3DcXs5IVh2a74qIcJd3VxVIsibOSLZPuPw5eqyIkIwpVgztX+IWEa63lpCEnixgoSZuUPC9gOE9LXn9EUOTzCyvBblsKEWZ5HD064e5LRgoSguIS7JXrReB0i1OWHRo/kqSKcOx0m5HWjemDCHFp5Sl1NmDGJuYiLIULZugjJHM40EW4shAi5ArIOTngMjUjCjnhl0AvfYp3Ow3gdIpS41iktIlNFSEQhQmp7YMKMzd2wACVhdDdkQoNOo6xFZZoI62vxhL39E3JyJnWxDenVhUwnRKh9cLqhb1He6tAUg5Z4zyQmQyacA6WVd092cTxCbMYSHscr7zPmwSkV4UtJUdSkoAufrppQxna64doQ4UK7I/QVxfVkCXNieTWJ0Gg2hwiL0OIIcyZQ6w0TLhdiCDnvUBJNbEm4yTZhQi59CjCabkwiNMzSPcUe/d8Q0rJgCkI+2WMeIZXTRAiKVDwBQJ55wYgjvGzjeh3GjktIUG8rVO713DNQEmq/0LCqbUlINlGE3A0t+EKEoCxoikyWUCyw18XT++KugY+QyGpxhJDL6ioW/IS8BGyQmZqQ0wbW2uqB7HbDAj77NlnULenImiBh+aYIiPC5OGr7CCuB1SNFhFUXSqN8kY2plBUHPwKEDV64/YRciHTLN2VuXBhJmDMNjQmFRxQhd0NrKXpVnJsAoWouVBJmda6o09TMKbtMt1dC5LGf8LrbziPkTjgPN5fVhNL7FBNWxGcqCGdwHzuHTji/QpG9Y5WOlhWEQoLP7NhJX9lnyiZy9IgHHyElRPidt74rnLN1PFMQcnqxhBmzW9YOnTCcOMJvi/L5tkPY8t7TjSFMQeJ7KdbVRQ0/xBFqe9g+ioS7HSoLlYRLtoLQrqwPVUZKwnb59ViEqZp2lAjditleprLwk4oQuBtJ+Etc/ZiEOYAMYwm1nSknxEMR8VT86yM0ZVkIE5dUhI18FKFBwziQByrCN/o1MlQTpuBmYboJRcgNwIAwM1iAa/0ownkSDBPSli0YNBWEopK+hqVxCUHxyolJl9bFhxR5ec5RcIO3SNv9ZnNHrMREkq3IVlevFy0Ym2FCL/c6QUISLHZBuUsvvY0i5JJZGFZHEVbc3nb4hDG3GbY6fAuY9i1EktYHRlATSoIwIT3K0BvrZxR14RYNeQuXxyH0qLyt1cTChLRJJ0LejQbPwl52b4ZwMdPdpM7IQU8z5S+IZF0oHmD6CDcwTOi0e4BLqKzTK5vRhLOCiYhhHg1C1R6Z49yTq1KHpPfsLXoLanB3EliKrfLWEKH4qPvcu9CiIb2k2OC9dXiKwD4JZ0rTRzgLZ/S9dgjRE4OLwndr/ohfkRNh7RHQCNzVHiKsmSeLoD5db3E37SsI22g532rvm5A/LyYTnQuzzpnKu29kB9IO3m4GHW95gsUownIadR7B7I+LqktOmRX6DutM+z8g5LWDR7JNhB8xUJir+gm9EuleKZJQs/HCqw3rNfUlZ6Gv0ww8HqFvST4UwnD8hG/oknkk82D/CgrPAX7CLFxBKAjT1d9Ay11Uyn11r3kHXS50mpqQy/6jQLjrrh1Y45XFqoGySEp+Qm0wg6kI39vAbacPF7rAy75y4H0XK1P91EhC7//Ru46uPn2Eg4nPOp2B90cMPC/Wt/2E4jVua3yPJDSeAbqvilwFYCp7zRbOoq8m5LI/gpBXOWUmT5jhiY8EePYpgNWkBfoBwm8nnbYzkYRApRG8yXAOUBJmbJTjbjPMHAXCv+yc28sMYRzHJ2lrnQpN5pLv7Nq1DrUjcbltUo5lJS63TUoOZSVuZyUut01KDmmTcmyTXMjFJilJSXIhSnLDX2Ge3/d55pmx5nUoQ9rvBW97mHfm8zzP7/g8b6FiY0CdemAslRSGhSmEs/2F3gwILUAv/mFXtu0qovFfIEx8IqgRobR15jDSSyMswj02A8K6rbTGBQfXICxMbrp7PfoNhJV/DuFgGX1sXT0AP71IGcNZVcY06Q4e4M+AsBoTtDaxl4GQ+k2EHpzcNBsJVT0kpOk065x51YUuHpOBqxIVSfJ6S9MIH00gZMZjFnJMUDkWrmrECP1EyiOaN/odhOLy/hbC0J1EWERIhP7CXs3kxt0Go2w6ZIvwLUqpDt5y4W8RYicrYKcDKK0L1WvZCF+t+HmEvrTPvKgBphHmL3YnA7S/ZawfrIWzuCoxCxvpCwQt+kmEAGrftOLDNMKjMgXDCGMXgJqIvRkQdnDrpxEyu5I5oLf75KX5I4dii9wL4jMIj0Zx3Y4Ig9LIhIguPghaF04KoX8WKYT+hoVphGUVCpZ1AqNUwbVshM0uxj+JcB63ErgwWwpyQ2iPxyxAlXD05t+3uMqosG4QYqtKTqigMajyyZMIIy+L1G4GQkFiW1IXwFHrUzYC9zMRLoDXLb38KYRMAfhNJqHjsZOTZgN3dTc21JPjlhPpibaFc2BSkyY+SNnLDWVDn1i53kqLkLFe92kSIQSVRVgDtnyhDeSwjN5tnp2BUMImF8t/D2HQXuXkpFc+sPx9tLtlyEI8N3/P78A/hRHXMdXaskZzOCpYEIo3sQip4HoKYcjYMc6Rb150ivuYo5gqbhZChk1nAI1w0c8iZOLZZt6UgzpHvcCWOPSu2+IQ5XAhrup17EltYfNY329ZUPlJoz33CRYaR5NCuFO9tMYiVE+6cV8T8EM6dkKYiAttRNr6OYRzRwYhtwm0GsincM2h2wU5UALUSaH0Cus4R+h3l3CXqy579SD9vWrC7BfVFKYW1VIIeSxEI0yD2sA6+AwIh/WfRzjoxwgHGiHysYasIQQVcZxN1pNbtSIXIHRg3SNCM76s3Mv8or35AhyPcxqkN8ed3SU8LMJX5d1ru4wKeytmrjLz3gzC3kwI76MdI7y3TF5CUMrlHCOL+iDCCygv5KxhRoI2bWFAhMbX2e0yQYN1vUS5P0gjVOonEfLS3i6h2JgRYVGMAzt4PullIVwFNGKEs6pE6CIXjzKb0Iiwf1/ZrpZMFZmOKxlZgwj1lMUbhJoX6cyqhAmCN5MImyg1aZIMwoL5srsWwLaXMyDUkWfnJxCi0ltqEL5rluW8RCVyRTucPy4muotLGqHT8VXsdscpsLRak/zONQgLuozUPGrqh4aOJXjHhNa+2oTTiABjRxLhR05hlrmAypFMhLS8i2uCsPwDhDsXrSFCDHUBslZRn85hKQ/rsk/YIJyHelADDjrs8uKlWnhLDMJZvDfnlelHrdZN0tASdAxC6JU6AG6MYoTi4S3EPcCqLIS0vIvWdDacPat6DIHq+APqnwmEG9QFiBAVcKT9fOo1fPreCoPQ+Qg8Q4Btarc1w77BslZNI3y8jOWtogBmTMJajiVoEMZ/m2FwMkDphW2C4tgGEtftkzVZCGl5e0s7YEKDDowsQho+TyEjwijiDGAKQF4OVUP2N4MbMcIFWFXw3S7gm2k2q4z9RMhnUuXWIeNtnU8TLQnGCBPlPi8ADMIH1xDphK3+o52FsAiO4hPuVfEwxAWtYQJh3Bv7jJ26e80vVvMpvLLVgc8aocLxoeCLlTJ5RQEoEKF+pjZPATOf1jPBEjSsUnPpVCmxXf38NTA90Y3VLIQcXnzQBTcXwFYzLBbhwCDssrdqA/p6Ln08LkG3VLQI5xoDza1IUa6HVRrhLF/bx6Efd4u3m4d1uyTozPsGIc/4pMleiihW1tGGZLkTDq8H7tZUsE/2SmmE5gkIjhfkqT1beP+j4uiK/yfCoE8nzRRkmVAdRzfZ0Aij9So05nC4OeAHaVGFIK+Zbl3MAQERYWm/lszEnXL8pDOJ0HAyvZnhUekPeLj6DUIbIy1et5BiGkPxVMcf1T1aPN0eDiAb4yBplQRXTEn6RLgVOyWKLcpblNcVhs3d/N9uzo7PxKHK2UCESKnOCmkGQv66NWa3ZhBKpTeNcK4J8z1i0wlS1STsDedPq3lU+13QLonoYZQLYTHroUOEWyoMt4dIeVQcjihDEaQ4HHtgFHI2MKZcm9JOvrAhY08Ne4W6nO4pLi76aYT34qPzsNv12CTTT/aHNR9+SOumqZyW83ZKuMwa9iplHYkQVSbSOpvzNEPlRWYlM3pey91N6U1yv3oemQEfQQ2k1CEZVLD6FTeTaoRzYMzfNWKTjoJ8NKfq/1soO80qZUoe1EtewIIREcqAu2YLpsfx54n0giU4cS3Ohl9EyLyJw/tWfmNrDepqowlD9tA4P9S5flYUfDOi2PRSvZ9XJ/QTyvGeNyvB+vio28VmxyL0aao1uh5MilIaTbiBpAji1xEO63RL58BAYKxSQw+3wbOeRMiKsIfaqAid7dSe87v0RTlogOPdqzLkVkxBXvmgkzUIq7RNQ59UNuEkHcrW76S2EwPyawg5v8R5FeCz0UDn21thLDFG4vBleaMv9uMUULrLoMI8RR56DLxkUSSpQHUVS8+dJEKWacaMq1u10YAuMz0J+VRJySL8dYTzm9gp7mzIedag8+O+Yc5PU+88I92e5rqAlR/egq7F5aG5neUSINZTD4QPzpxa30kj9EOpwj6WOPdq5CjV/AhWTlyR09PKRfsXEdIjV0JlROcglH4OQ7AWVPYupRGz3l0a7A5Q66emsJdXL3n+VU7GDclIJXLECzigFuEmVGU+FRF6XekoRVC/d5sfsS5J5zTkwwxqJpQV1PDy6EcjVY9GbCsTgagCOKtK+7HU5DDd2kh+a+lwwj75XPx5qghUjq2lutBc0ggbn7AXbTmG3kKfDr28qPbdbYE4wUvxamPbR55QVmjNncIQSC747vAY9Mnjs4Hpz802N1scpabw8dBFw8lVxSFilcZOGqEunw5R4l2bfP8csPJ7E3sfKHs1XuNUaf+kOvIOIaX1VtAVAM3rHqL1XKisXd8FthtY/GlyJUB9OGcVL/CRDl3I+kOk87BaCCF+3gEfbhLiBQPowJXkNb4HanbmO8651WLYMDa4+rJe6Hi1at8FNXef+ta/o/jP4X7s88msmXz6a9fY9r2apX1nQvL7OjGLthqdaFguO1btLBvv/JOa6/wNjZyppppqqqmmmmqqqaaaaqqppprqK3twIAAAAAAA5P/aCKqqqqqqqqqqqqqqqqqqKu3BIQEAAACAoP+vPWEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAX+2FAZTI0w4qAAAAAElFTkSuQmCC", r3.onload = function() {
            t3(r3);
          }, r3.onerror = function(t4) {
            e3(t4);
          };
        }).then(function(e3) {
          t2.getLayer(r2) || (t2.addImage(r2, e3, { pixelRatio: 2 }), t2.addLayer({ id: r2, type: "background", paint: { "background-pattern": r2 } }));
        }).catch(function(t3) {
        });
      }
    }, t.asyncAll = p, t.bezier = o, t.bindAll = v, t.browser = U, t.cacheEntryPossiblyAdded = function(t2) {
      ++dt > ht && (t2.getActor().send("enforceCacheSizeLimit", pt), dt = 0);
    }, t.clamp = u, t.clearTileCache = function(t2) {
      var e2 = self.caches.delete("sgmap-tiles");
      t2 && e2.catch(t2).then(function() {
        return t2();
      });
    }, t.clipLine = hp, t.clone = function(t2) {
      var e2 = new is(16);
      return e2[0] = t2[0], e2[1] = t2[1], e2[2] = t2[2], e2[3] = t2[3], e2[4] = t2[4], e2[5] = t2[5], e2[6] = t2[6], e2[7] = t2[7], e2[8] = t2[8], e2[9] = t2[9], e2[10] = t2[10], e2[11] = t2[11], e2[12] = t2[12], e2[13] = t2[13], e2[14] = t2[14], e2[15] = t2[15], e2;
    }, t.clone$1 = w, t.collisionCircleLayout = pl, t.config = Wh, t.config$1 = q, t.create = ss, t.create$1 = function() {
      var t2 = new is(9);
      return is != Float32Array && (t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[5] = 0, t2[6] = 0, t2[7] = 0), t2[0] = 1, t2[4] = 1, t2[8] = 1, t2;
    }, t.createCommonjsModule = e, t.createExpression = ln, t.createLayout = ya, t.createStyleLayer = function(t2) {
      return "custom" === t2.type ? new eh(t2) : new lh[t2.type](t2);
    }, t.crs = $h, t.decodeFeatures = function(t2) {
      var e2;
      t2.features && t2.features.length > 0 && (e2 = function(t3) {
        return Array.isArray(t3) ? e2(t3[0]) : "string" == typeof t3;
      })(t2.features[0].geometry.coordinates) && t2.features.forEach(function(t3) {
        var e3, r2, n2;
        n2 = "string" == typeof (r2 = (e3 = t3).geometry.coordinates) ? Pt(r2) : r2.map(function(t4) {
          return "string" == typeof t4 ? Pt(t4) : Array.isArray(t4) ? [Pt(t4[0])] : t4;
        }), e3.geometry.coordinates = n2;
      });
    }, t.deepEqual = function t2(e2, r2) {
      if (Array.isArray(e2)) {
        if (!Array.isArray(r2) || e2.length !== r2.length)
          return false;
        for (var n2 = 0; n2 < e2.length; n2++)
          if (!t2(e2[n2], r2[n2]))
            return false;
        return true;
      }
      if ("object" == typeof e2 && null !== e2 && null !== r2) {
        if ("object" != typeof r2)
          return false;
        if (Object.keys(e2).length !== Object.keys(r2).length)
          return false;
        for (var i3 in e2)
          if (!t2(e2[i3], r2[i3]))
            return false;
        return true;
      }
      return e2 === r2;
    }, t.earcut = Ys, t.earthRadius = 63710088e-1, t.ease = s, t.emitValidationErrors = Kn, t.endsWith = g, t.enforceCacheSizeLimit = function(t2) {
      ct(), nt && nt.then(function(e2) {
        e2.keys().then(function(r2) {
          for (var n2 = 0; n2 < r2.length - t2; n2++)
            e2.delete(r2[n2]);
        });
      });
    }, t.evaluateSizeForFeature = rp, t.evaluateSizeForZoom = np, t.evaluateVariableOffset = Tp, t.evented = Gi, t.extend = c, t.featureFilter = _n, t.filterObject = b, t.formatAjax = function(t2) {
      return "string" == typeof t2 ? { method: "GET", url: t2 } : (t2.method || (t2.method = "GET"), t2.data && (t2.body = t2.body ? Object.assign({}, t2.data, t2.body) : t2.data, delete t2.data), "GET" === t2.method.toUpperCase() && (t2.url = It({ url: t2.url, params: t2.body }), delete t2.body), t2);
    }, t.fromRotation = function(t2, e2) {
      var r2 = Math.sin(e2), n2 = Math.cos(e2);
      return t2[0] = n2, t2[1] = r2, t2[2] = 0, t2[3] = -r2, t2[4] = n2, t2[5] = 0, t2[6] = 0, t2[7] = 0, t2[8] = 1, t2;
    }, t.geojsonvt = function(t2, e2) {
      return new of(t2, e2);
    }, t.getAnchorAlignment = Ql, t.getAnchorJustification = Bp, t.getArrayBuffer = Ft, t.getImage = Ot, t.getJSON = function(t2, e2) {
      return Lt(c(t2, { type: "json" }), e2);
    }, t.getRTLTextPluginStatus = Yi, t.getReferrer = Et, t.getVideo = function(t2, e2) {
      var r2, n2, i3 = self.document.createElement("video");
      i3.muted = true, i3.onloadstart = function() {
        e2(null, i3);
      };
      for (var a2 = 0; a2 < t2.length; a2++) {
        var o2 = self.document.createElement("source");
        r2 = t2[a2], n2 = void 0, (n2 = self.document.createElement("a")).href = r2, (n2.protocol !== self.document.location.protocol || n2.host !== self.document.location.host) && (i3.crossOrigin = "Anonymous"), o2.src = t2[a2], i3.appendChild(o2);
      }
      return { cancel: function() {
      } };
    }, t.identity = us, t.initApiURI = function(t2, e2) {
      for (var r2 = document.getElementsByTagName("script"), n2 = [], i3 = -1; ++i3 < r2.length; ) {
        var a2 = r2[i3];
        a2.src && /http[s]?\:\/\/[\w\d\.\:-]+\/(maps\?v=[\d\.]+|api\/gl\/epgis-[\d\.]+\.min\.js)/.test(a2.src) && -1 !== a2.src.indexOf(t2) && n2.push(/http[s]?\:\/\/[\w\d\.\:-]+/.exec(a2.src)[0]);
      }
      kt("\u8BC6\u522BSDK JS\u52A0\u8F7D\u7684\u8DEF\u5F84"), kt(n2), 0 === n2.length ? console.warn("\u7248\u672C\u6CA1\u6709\u5339\u914D") : (e2.API_URL = n2[0], function(t3, e3) {
        var r3 = t3.API_URL, n3 = document.createElement("link");
        n3.setAttribute("rel", "stylesheet"), n3.setAttribute("href", r3 + "/api/gl/epgis-" + e3 + ".min.css"), (document.head || document.getElementsByTagName("head")[0]).appendChild(n3);
      }(e2, t2));
    }, t.invert = ls, t.isIE11 = T, t.issgmapURL = J, t.keysDifference = function(t2, e2) {
      var r2 = [];
      for (var n2 in t2)
        n2 in e2 || r2.push(n2);
      return r2;
    }, t.loadVectorTile = Ic, t.makeRequest = Lt, t.mul = ms, t.multiply = ps, t.mvt = lc, t.number = or, t.offscreenCanvasSupported = mt, t.ortho = function(t2, e2, r2, n2, i3, a2, o2) {
      var s2 = 1 / (e2 - r2), u2 = 1 / (n2 - i3), l2 = 1 / (a2 - o2);
      return t2[0] = -2 * s2, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = -2 * u2, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[10] = 2 * l2, t2[11] = 0, t2[12] = (e2 + r2) * s2, t2[13] = (i3 + n2) * u2, t2[14] = (o2 + a2) * l2, t2[15] = 1, t2;
    }, t.pbf = dl, t.pick = function(t2, e2) {
      for (var r2 = {}, n2 = 0; n2 < e2.length; n2++) {
        var i3 = e2[n2];
        i3 in t2 && (r2[i3] = t2[i3]);
      }
      return r2;
    }, t.plugin = Ki, t.polygonIntersectsPolygon = qo, t.postMapLoadEvent = lt, t.postTurnstileEvent = st, t.potpack = Ll, t.refProperties = ["type", "source", "source-layer", "minzoom", "maxzoom", "filter", "layout"], t.registerForPluginStateChange = function(t2) {
      return t2({ pluginStatus: Ui, pluginURL: qi }), Gi.on("pluginStateChange", t2), t2;
    }, t.rotateZ = ys, t.scale = cs, t.setCacheLimits = function(t2, e2) {
      pt = t2, ht = e2;
    }, t.setRTLTextPlugin = function(t2, e2, r2) {
      if (void 0 === r2 && (r2 = false), "deferred" === Ui || "loading" === Ui || "loaded" === Ui)
        throw new Error("setRTLTextPlugin cannot be called multiple times.");
      qi = U.resolveURL(t2), Ui = "deferred", ji = e2, Zi(), r2 || Xi();
    }, t.sphericalToCartesian = function(t2) {
      var e2 = t2[0], r2 = t2[1], n2 = t2[2];
      return r2 += 90, r2 *= Math.PI / 180, n2 *= Math.PI / 180, { x: e2 * Math.cos(r2) * Math.sin(n2), y: e2 * Math.sin(r2) * Math.sin(n2), z: e2 * Math.cos(n2) };
    }, t.styleSpec = Gt, t.symbolSize = ip, t.transformMat3 = function(t2, e2, r2) {
      var n2 = e2[0], i3 = e2[1], a2 = e2[2];
      return t2[0] = n2 * r2[0] + i3 * r2[3] + a2 * r2[6], t2[1] = n2 * r2[1] + i3 * r2[4] + a2 * r2[7], t2[2] = n2 * r2[2] + i3 * r2[5] + a2 * r2[8], t2;
    }, t.transformMat4 = bs, t.translate = hs, t.triggerPluginCompletionEvent = Ni, t.uniqueId = y, t.unwrapExports = function(t2) {
      return t2 && t2.__esModule && Object.prototype.hasOwnProperty.call(t2, "default") ? t2.default : t2;
    }, t.validateCustomStyleLayer = function(t2) {
      var e2 = [], r2 = t2.id;
      return void 0 === r2 && e2.push({ message: "layers." + r2 + ': missing required property "id"' }), void 0 === t2.render && e2.push({ message: "layers." + r2 + ': missing required method "render"' }), t2.renderingMode && "2d" !== t2.renderingMode && "3d" !== t2.renderingMode && e2.push({ message: "layers." + r2 + ': property "renderingMode" must be either "2d" or "3d"' }), e2;
    }, t.validateLight = Gn, t.validateStyle = Zn, t.values = h, t.vectorTile = ju, t.version = "3.0.0", t.warnOnce = S, t.webpSupported = N, t.window = self, t.wrap = l;
  });
  define2(["./shared"], function(e) {
    function t(e2) {
      var r2 = typeof e2;
      if ("number" === r2 || "boolean" === r2 || "string" === r2 || null == e2)
        return JSON.stringify(e2);
      if (Array.isArray(e2)) {
        for (var o2 = "[", i3 = 0, n2 = e2; i3 < n2.length; i3 += 1)
          o2 += t(n2[i3]) + ",";
        return o2 + "]";
      }
      for (var s2 = Object.keys(e2).sort(), a2 = "{", u2 = 0; u2 < s2.length; u2++)
        a2 += JSON.stringify(s2[u2]) + ":" + t(e2[s2[u2]]) + ",";
      return a2 + "}";
    }
    function r(r2) {
      for (var o2 = "", i3 = 0, n2 = e.refProperties; i3 < n2.length; i3 += 1)
        o2 += "/" + t(r2[n2[i3]]);
      return o2;
    }
    var o = function(e2) {
      this.keyCache = {}, e2 && this.replace(e2);
    };
    o.prototype.replace = function(e2) {
      this._layerConfigs = {}, this._layers = {}, this.update(e2, []);
    }, o.prototype.update = function(t2, o2) {
      for (var i3 = this, n2 = 0, s2 = t2; n2 < s2.length; n2 += 1) {
        var a2 = s2[n2];
        this._layerConfigs[a2.id] = a2;
        var u2 = this._layers[a2.id] = e.createStyleLayer(a2);
        u2._featureFilter = e.featureFilter(u2.filter), this.keyCache[a2.id] && delete this.keyCache[a2.id];
      }
      for (var h2 = 0, l2 = o2; h2 < l2.length; h2 += 1) {
        var p2 = l2[h2];
        delete this.keyCache[p2], delete this._layerConfigs[p2], delete this._layers[p2];
      }
      this.familiesBySource = {};
      for (var c2 = 0, f2 = function(e2, t3) {
        for (var o3 = {}, i4 = 0; i4 < e2.length; i4++) {
          var n3 = t3 && t3[e2[i4].id] || r(e2[i4]);
          t3 && (t3[e2[i4].id] = n3);
          var s3 = o3[n3];
          s3 || (s3 = o3[n3] = []), s3.push(e2[i4]);
        }
        var a3 = [];
        for (var u3 in o3)
          a3.push(o3[u3]);
        return a3;
      }(e.values(this._layerConfigs), this.keyCache); c2 < f2.length; c2 += 1) {
        var d2 = f2[c2].map(function(e2) {
          return i3._layers[e2.id];
        }), g2 = d2[0];
        if ("none" !== g2.visibility) {
          var v2 = g2.source || "", y2 = this.familiesBySource[v2];
          y2 || (y2 = this.familiesBySource[v2] = {});
          var m2 = g2.sourceLayer || "_geojsonTileLayer", w2 = y2[m2];
          w2 || (w2 = y2[m2] = []), w2.push(d2);
        }
      }
    };
    var i2 = e.window.ImageBitmap, n = function() {
      this.loaded = {};
    };
    function s(e2, t2) {
      if (0 !== e2.length) {
        a(e2[0], t2);
        for (var r2 = 1; r2 < e2.length; r2++)
          a(e2[r2], !t2);
      }
    }
    function a(e2, t2) {
      for (var r2 = 0, o2 = 0, i3 = e2.length, n2 = i3 - 1; o2 < i3; n2 = o2++)
        r2 += (e2[o2][0] - e2[n2][0]) * (e2[n2][1] + e2[o2][1]);
      r2 >= 0 != !!t2 && e2.reverse();
    }
    n.prototype.loadTile = function(t2, r2) {
      var o2 = t2.uid, n2 = t2.encoding, s2 = t2.rawImageData, a2 = i2 && s2 instanceof i2 ? this.getImageData(s2) : s2, u2 = new e.DEMData(o2, a2, n2);
      this.loaded = this.loaded || {}, this.loaded[o2] = u2, r2(null, u2);
    }, n.prototype.getImageData = function(t2) {
      this.offscreenCanvas && this.offscreenCanvasContext || (this.offscreenCanvas = new OffscreenCanvas(t2.width, t2.height), this.offscreenCanvasContext = this.offscreenCanvas.getContext("2d")), this.offscreenCanvas.width = t2.width, this.offscreenCanvas.height = t2.height, this.offscreenCanvasContext.drawImage(t2, 0, 0, t2.width, t2.height);
      var r2 = this.offscreenCanvasContext.getImageData(-1, -1, t2.width + 2, t2.height + 2);
      return this.offscreenCanvasContext.clearRect(0, 0, this.offscreenCanvas.width, this.offscreenCanvas.height), new e.RGBAImage({ width: r2.width, height: r2.height }, r2.data);
    }, n.prototype.removeTile = function(e2) {
      var t2 = this.loaded, r2 = e2.uid;
      t2 && t2[r2] && delete t2[r2];
    };
    var u = e.mvt.VectorTileFeature.prototype.toGeoJSON, h = function(t2) {
      this._feature = t2, this.extent = e.EXTENT, this.type = t2.type, this.properties = t2.tags, "id" in t2 && !isNaN(t2.id) && (this.id = parseInt(t2.id, 10));
    };
    h.prototype.loadGeometry = function() {
      if (1 === this._feature.type) {
        for (var t2 = [], r2 = 0, o2 = this._feature.geometry; r2 < o2.length; r2 += 1) {
          var i3 = o2[r2];
          t2.push([new e.Point$1(i3[0], i3[1])]);
        }
        return t2;
      }
      for (var n2 = [], s2 = 0, a2 = this._feature.geometry; s2 < a2.length; s2 += 1) {
        for (var u2 = [], h2 = 0, l2 = a2[s2]; h2 < l2.length; h2 += 1) {
          var p2 = l2[h2];
          u2.push(new e.Point$1(p2[0], p2[1]));
        }
        n2.push(u2);
      }
      return n2;
    }, h.prototype.toGeoJSON = function(e2, t2, r2) {
      return u.call(this, e2, t2, r2);
    };
    var l = function(t2) {
      this.layers = { _geojsonTileLayer: this }, this.name = "_geojsonTileLayer", this.extent = e.EXTENT, this.length = t2.length, this._features = t2;
    };
    l.prototype.feature = function(e2) {
      return new h(this._features[e2]);
    };
    var p = e.vectorTile.VectorTileFeature, c = f;
    function f(e2, t2) {
      this.options = t2 || {}, this.features = e2, this.length = e2.length;
    }
    function d(e2, t2) {
      this.id = "number" == typeof e2.id ? e2.id : void 0, this.type = e2.type, this.rawGeometry = 1 === e2.type ? [e2.geometry] : e2.geometry, this.properties = e2.tags, this.extent = t2 || 4096;
    }
    f.prototype.feature = function(e2) {
      return new d(this.features[e2], this.options.extent);
    }, d.prototype.loadGeometry = function() {
      var t2 = this.rawGeometry;
      this.geometry = [];
      for (var r2 = 0; r2 < t2.length; r2++) {
        for (var o2 = t2[r2], i3 = [], n2 = 0; n2 < o2.length; n2++)
          i3.push(new e.Point$1(o2[n2][0], o2[n2][1]));
        this.geometry.push(i3);
      }
      return this.geometry;
    }, d.prototype.bbox = function() {
      this.geometry || this.loadGeometry();
      for (var e2 = this.geometry, t2 = 1 / 0, r2 = -1 / 0, o2 = 1 / 0, i3 = -1 / 0, n2 = 0; n2 < e2.length; n2++)
        for (var s2 = e2[n2], a2 = 0; a2 < s2.length; a2++) {
          var u2 = s2[a2];
          t2 = Math.min(t2, u2.x), r2 = Math.max(r2, u2.x), o2 = Math.min(o2, u2.y), i3 = Math.max(i3, u2.y);
        }
      return [t2, o2, r2, i3];
    }, d.prototype.toGeoJSON = p.prototype.toGeoJSON;
    var g = y, v = c;
    function y(t2) {
      var r2 = new e.Protobuf();
      return function(e2, t3) {
        for (var r3 in e2.layers)
          t3.writeMessage(3, m, e2.layers[r3]);
      }(t2, r2), r2.finish();
    }
    function m(e2, t2) {
      var r2;
      t2.writeVarintField(15, e2.version || 1), t2.writeStringField(1, e2.name || ""), t2.writeVarintField(5, e2.extent || 4096);
      var o2 = { keys: [], values: [], keycache: {}, valuecache: {} };
      for (r2 = 0; r2 < e2.length; r2++)
        o2.feature = e2.feature(r2), t2.writeMessage(2, w, o2);
      var i3 = o2.keys;
      for (r2 = 0; r2 < i3.length; r2++)
        t2.writeStringField(3, i3[r2]);
      var n2 = o2.values;
      for (r2 = 0; r2 < n2.length; r2++)
        t2.writeMessage(4, C, n2[r2]);
    }
    function w(e2, t2) {
      var r2 = e2.feature;
      void 0 !== r2.id && t2.writeVarintField(1, r2.id), t2.writeMessage(2, S, e2), t2.writeVarintField(3, r2.type), t2.writeMessage(4, k, r2);
    }
    function S(e2, t2) {
      var r2 = e2.feature, o2 = e2.keys, i3 = e2.values, n2 = e2.keycache, s2 = e2.valuecache;
      for (var a2 in r2.properties) {
        var u2 = n2[a2];
        void 0 === u2 && (o2.push(a2), n2[a2] = u2 = o2.length - 1), t2.writeVarint(u2);
        var h2 = r2.properties[a2], l2 = typeof h2;
        "string" !== l2 && "boolean" !== l2 && "number" !== l2 && (h2 = JSON.stringify(h2));
        var p2 = l2 + ":" + h2, c2 = s2[p2];
        void 0 === c2 && (i3.push(h2), s2[p2] = c2 = i3.length - 1), t2.writeVarint(c2);
      }
    }
    function x(e2, t2) {
      return (t2 << 3) + (7 & e2);
    }
    function _2(e2) {
      return e2 << 1 ^ e2 >> 31;
    }
    function k(e2, t2) {
      for (var r2 = e2.loadGeometry(), o2 = e2.type, i3 = 0, n2 = 0, s2 = r2.length, a2 = 0; a2 < s2; a2++) {
        var u2 = r2[a2], h2 = 1;
        1 === o2 && (h2 = u2.length), t2.writeVarint(x(1, h2));
        for (var l2 = 3 === o2 ? u2.length - 1 : u2.length, p2 = 0; p2 < l2; p2++) {
          1 === p2 && 1 !== o2 && t2.writeVarint(x(2, l2 - 1));
          var c2 = u2[p2].x - i3, f2 = u2[p2].y - n2;
          t2.writeVarint(_2(c2)), t2.writeVarint(_2(f2)), i3 += c2, n2 += f2;
        }
        3 === o2 && t2.writeVarint(x(7, 1));
      }
    }
    function C(e2, t2) {
      var r2 = typeof e2;
      "string" === r2 ? t2.writeStringField(1, e2) : "boolean" === r2 ? t2.writeBooleanField(7, e2) : "number" === r2 && (e2 % 1 != 0 ? t2.writeDoubleField(3, e2) : e2 < 0 ? t2.writeSVarintField(6, e2) : t2.writeVarintField(5, e2));
    }
    function T(e2, t2, r2, o2) {
      I(e2, r2, o2), I(t2, 2 * r2, 2 * o2), I(t2, 2 * r2 + 1, 2 * o2 + 1);
    }
    function I(e2, t2, r2) {
      var o2 = e2[t2];
      e2[t2] = e2[r2], e2[r2] = o2;
    }
    function b(e2, t2, r2, o2) {
      var i3 = e2 - r2, n2 = t2 - o2;
      return i3 * i3 + n2 * n2;
    }
    g.fromVectorTileJs = y, g.fromGeojsonVt = function(e2, t2) {
      t2 = t2 || {};
      var r2 = {};
      for (var o2 in e2)
        r2[o2] = new c(e2[o2].features, t2), r2[o2].name = o2, r2[o2].version = t2.version, r2[o2].extent = t2.extent;
      return y({ layers: r2 });
    }, g.GeoJSONWrapper = v;
    var M = function(e2) {
      return e2[0];
    }, O = function(e2) {
      return e2[1];
    }, L = function(e2, t2, r2, o2, i3) {
      void 0 === t2 && (t2 = M), void 0 === r2 && (r2 = O), void 0 === o2 && (o2 = 64), void 0 === i3 && (i3 = Float64Array), this.nodeSize = o2, this.points = e2;
      for (var n2 = e2.length < 65536 ? Uint16Array : Uint32Array, s2 = this.ids = new n2(e2.length), a2 = this.coords = new i3(2 * e2.length), u2 = 0; u2 < e2.length; u2++)
        s2[u2] = u2, a2[2 * u2] = t2(e2[u2]), a2[2 * u2 + 1] = r2(e2[u2]);
      !function e3(t3, r3, o3, i4, n3, s3) {
        if (!(n3 - i4 <= o3)) {
          var a3 = i4 + n3 >> 1;
          !function e4(t4, r4, o4, i5, n4, s4) {
            for (; n4 > i5; ) {
              if (n4 - i5 > 600) {
                var a4 = n4 - i5 + 1, u3 = o4 - i5 + 1, h2 = Math.log(a4), l2 = 0.5 * Math.exp(2 * h2 / 3), p2 = 0.5 * Math.sqrt(h2 * l2 * (a4 - l2) / a4) * (u3 - a4 / 2 < 0 ? -1 : 1);
                e4(t4, r4, o4, Math.max(i5, Math.floor(o4 - u3 * l2 / a4 + p2)), Math.min(n4, Math.floor(o4 + (a4 - u3) * l2 / a4 + p2)), s4);
              }
              var c2 = r4[2 * o4 + s4], f2 = i5, d2 = n4;
              for (T(t4, r4, i5, o4), r4[2 * n4 + s4] > c2 && T(t4, r4, i5, n4); f2 < d2; ) {
                for (T(t4, r4, f2, d2), f2++, d2--; r4[2 * f2 + s4] < c2; )
                  f2++;
                for (; r4[2 * d2 + s4] > c2; )
                  d2--;
              }
              r4[2 * i5 + s4] === c2 ? T(t4, r4, i5, d2) : T(t4, r4, ++d2, n4), d2 <= o4 && (i5 = d2 + 1), o4 <= d2 && (n4 = d2 - 1);
            }
          }(t3, r3, a3, i4, n3, s3 % 2), e3(t3, r3, o3, i4, a3 - 1, s3 + 1), e3(t3, r3, o3, a3 + 1, n3, s3 + 1);
        }
      }(s2, a2, o2, 0, s2.length - 1, 0);
    };
    L.prototype.range = function(e2, t2, r2, o2) {
      return function(e3, t3, r3, o3, i3, n2, s2) {
        for (var a2, u2, h2 = [0, e3.length - 1, 0], l2 = []; h2.length; ) {
          var p2 = h2.pop(), c2 = h2.pop(), f2 = h2.pop();
          if (c2 - f2 <= s2)
            for (var d2 = f2; d2 <= c2; d2++)
              u2 = t3[2 * d2 + 1], (a2 = t3[2 * d2]) >= r3 && a2 <= i3 && u2 >= o3 && u2 <= n2 && l2.push(e3[d2]);
          else {
            var g2 = Math.floor((f2 + c2) / 2);
            u2 = t3[2 * g2 + 1], (a2 = t3[2 * g2]) >= r3 && a2 <= i3 && u2 >= o3 && u2 <= n2 && l2.push(e3[g2]);
            var v2 = (p2 + 1) % 2;
            (0 === p2 ? r3 <= a2 : o3 <= u2) && (h2.push(f2), h2.push(g2 - 1), h2.push(v2)), (0 === p2 ? i3 >= a2 : n2 >= u2) && (h2.push(g2 + 1), h2.push(c2), h2.push(v2));
          }
        }
        return l2;
      }(this.ids, this.coords, e2, t2, r2, o2, this.nodeSize);
    }, L.prototype.within = function(e2, t2, r2) {
      return function(e3, t3, r3, o2, i3, n2) {
        for (var s2 = [0, e3.length - 1, 0], a2 = [], u2 = i3 * i3; s2.length; ) {
          var h2 = s2.pop(), l2 = s2.pop(), p2 = s2.pop();
          if (l2 - p2 <= n2)
            for (var c2 = p2; c2 <= l2; c2++)
              b(t3[2 * c2], t3[2 * c2 + 1], r3, o2) <= u2 && a2.push(e3[c2]);
          else {
            var f2 = Math.floor((p2 + l2) / 2), d2 = t3[2 * f2], g2 = t3[2 * f2 + 1];
            b(d2, g2, r3, o2) <= u2 && a2.push(e3[f2]);
            var v2 = (h2 + 1) % 2;
            (0 === h2 ? r3 - i3 <= d2 : o2 - i3 <= g2) && (s2.push(p2), s2.push(f2 - 1), s2.push(v2)), (0 === h2 ? r3 + i3 >= d2 : o2 + i3 >= g2) && (s2.push(f2 + 1), s2.push(l2), s2.push(v2));
          }
        }
        return a2;
      }(this.ids, this.coords, e2, t2, r2, this.nodeSize);
    };
    var P = { minZoom: 0, maxZoom: 16, radius: 40, extent: 512, nodeSize: 64, log: false, generateId: false, reduce: null, map: function(e2) {
      return e2;
    } }, N = function(e2) {
      this.options = V(Object.create(P), e2), this.trees = new Array(this.options.maxZoom + 1);
    };
    function D(e2, t2, r2, o2, i3) {
      return { x: e2, y: t2, zoom: 1 / 0, id: r2, parentId: -1, numPoints: o2, properties: i3 };
    }
    function E(e2, t2) {
      var r2 = e2.geometry.coordinates, o2 = r2[1];
      return { x: G(r2[0]), y: W(o2), zoom: 1 / 0, index: t2, parentId: -1 };
    }
    function F(e2) {
      return { type: "Feature", id: e2.id, properties: J(e2), geometry: { type: "Point", coordinates: [(o2 = e2.x, 360 * (o2 - 0.5)), (t2 = e2.y, r2 = (180 - 360 * t2) * Math.PI / 180, 360 * Math.atan(Math.exp(r2)) / Math.PI - 90)] } };
      var t2, r2, o2;
    }
    function J(e2) {
      var t2 = e2.numPoints, r2 = t2 >= 1e4 ? Math.round(t2 / 1e3) + "k" : t2 >= 1e3 ? Math.round(t2 / 100) / 10 + "k" : t2;
      return V(V({}, e2.properties), { cluster: true, cluster_id: e2.id, point_count: t2, point_count_abbreviated: r2 });
    }
    function G(e2) {
      return e2 / 360 + 0.5;
    }
    function W(e2) {
      var t2 = Math.sin(e2 * Math.PI / 180), r2 = 0.5 - 0.25 * Math.log((1 + t2) / (1 - t2)) / Math.PI;
      return r2 < 0 ? 0 : r2 > 1 ? 1 : r2;
    }
    function V(e2, t2) {
      for (var r2 in t2)
        e2[r2] = t2[r2];
      return e2;
    }
    function Z(e2) {
      return e2.x;
    }
    function z(e2) {
      return e2.y;
    }
    function j(e2, t2) {
      var r2 = e2.tileID.canonical;
      if (!this._geoJSONIndex)
        return t2(null, null);
      var o2 = this._geoJSONIndex.getTile(r2.z, r2.x, r2.y);
      if (!o2)
        return t2(null, null);
      var i3 = new l(o2.features), n2 = g(i3);
      0 === n2.byteOffset && n2.byteLength === n2.buffer.byteLength || (n2 = new Uint8Array(n2)), t2(null, { vectorTile: i3, rawData: n2.buffer });
    }
    N.prototype.load = function(e2) {
      var t2 = this.options, r2 = t2.log, o2 = t2.minZoom, i3 = t2.maxZoom, n2 = t2.nodeSize;
      r2 && console.time("total time");
      var s2 = "prepare " + e2.length + " points";
      r2 && console.time(s2), this.points = e2;
      for (var a2 = [], u2 = 0; u2 < e2.length; u2++)
        e2[u2].geometry && a2.push(E(e2[u2], u2));
      this.trees[i3 + 1] = new L(a2, Z, z, n2, Float32Array), r2 && console.timeEnd(s2);
      for (var h2 = i3; h2 >= o2; h2--) {
        var l2 = +Date.now();
        a2 = this._cluster(a2, h2), this.trees[h2] = new L(a2, Z, z, n2, Float32Array), r2 && console.log("z%d: %d clusters in %dms", h2, a2.length, +Date.now() - l2);
      }
      return r2 && console.timeEnd("total time"), this;
    }, N.prototype.getClusters = function(e2, t2) {
      var r2 = ((e2[0] + 180) % 360 + 360) % 360 - 180, o2 = Math.max(-90, Math.min(90, e2[1])), i3 = 180 === e2[2] ? 180 : ((e2[2] + 180) % 360 + 360) % 360 - 180, n2 = Math.max(-90, Math.min(90, e2[3]));
      if (e2[2] - e2[0] >= 360)
        r2 = -180, i3 = 180;
      else if (r2 > i3) {
        var s2 = this.getClusters([r2, o2, 180, n2], t2), a2 = this.getClusters([-180, o2, i3, n2], t2);
        return s2.concat(a2);
      }
      for (var u2 = this.trees[this._limitZoom(t2)], h2 = [], l2 = 0, p2 = u2.range(G(r2), W(n2), G(i3), W(o2)); l2 < p2.length; l2 += 1) {
        var c2 = u2.points[p2[l2]];
        h2.push(c2.numPoints ? F(c2) : this.points[c2.index]);
      }
      return h2;
    }, N.prototype.getChildren = function(e2) {
      var t2 = this._getOriginId(e2), r2 = this._getOriginZoom(e2), o2 = "No cluster with the specified id.", i3 = this.trees[r2];
      if (!i3)
        throw new Error(o2);
      var n2 = i3.points[t2];
      if (!n2)
        throw new Error(o2);
      for (var s2 = this.options.radius / (this.options.extent * Math.pow(2, r2 - 1)), a2 = [], u2 = 0, h2 = i3.within(n2.x, n2.y, s2); u2 < h2.length; u2 += 1) {
        var l2 = i3.points[h2[u2]];
        l2.parentId === e2 && a2.push(l2.numPoints ? F(l2) : this.points[l2.index]);
      }
      if (0 === a2.length)
        throw new Error(o2);
      return a2;
    }, N.prototype.getLeaves = function(e2, t2, r2) {
      var o2 = [];
      return this._appendLeaves(o2, e2, t2 = t2 || 10, r2 = r2 || 0, 0), o2;
    }, N.prototype.getTile = function(e2, t2, r2) {
      var o2 = this.trees[this._limitZoom(e2)], i3 = Math.pow(2, e2), n2 = this.options, s2 = n2.radius / n2.extent, a2 = (r2 - s2) / i3, u2 = (r2 + 1 + s2) / i3, h2 = { features: [] };
      return this._addTileFeatures(o2.range((t2 - s2) / i3, a2, (t2 + 1 + s2) / i3, u2), o2.points, t2, r2, i3, h2), 0 === t2 && this._addTileFeatures(o2.range(1 - s2 / i3, a2, 1, u2), o2.points, i3, r2, i3, h2), t2 === i3 - 1 && this._addTileFeatures(o2.range(0, a2, s2 / i3, u2), o2.points, -1, r2, i3, h2), h2.features.length ? h2 : null;
    }, N.prototype.getClusterExpansionZoom = function(e2) {
      for (var t2 = this._getOriginZoom(e2) - 1; t2 <= this.options.maxZoom; ) {
        var r2 = this.getChildren(e2);
        if (t2++, 1 !== r2.length)
          break;
        e2 = r2[0].properties.cluster_id;
      }
      return t2;
    }, N.prototype._appendLeaves = function(e2, t2, r2, o2, i3) {
      for (var n2 = 0, s2 = this.getChildren(t2); n2 < s2.length; n2 += 1) {
        var a2 = s2[n2], u2 = a2.properties;
        if (u2 && u2.cluster ? i3 + u2.point_count <= o2 ? i3 += u2.point_count : i3 = this._appendLeaves(e2, u2.cluster_id, r2, o2, i3) : i3 < o2 ? i3++ : e2.push(a2), e2.length === r2)
          break;
      }
      return i3;
    }, N.prototype._addTileFeatures = function(e2, t2, r2, o2, i3, n2) {
      for (var s2 = 0, a2 = e2; s2 < a2.length; s2 += 1) {
        var u2 = t2[a2[s2]], h2 = u2.numPoints, l2 = { type: 1, geometry: [[Math.round(this.options.extent * (u2.x * i3 - r2)), Math.round(this.options.extent * (u2.y * i3 - o2))]], tags: h2 ? J(u2) : this.points[u2.index].properties }, p2 = void 0;
        h2 ? p2 = u2.id : this.options.generateId ? p2 = u2.index : this.points[u2.index].id && (p2 = this.points[u2.index].id), void 0 !== p2 && (l2.id = p2), n2.features.push(l2);
      }
    }, N.prototype._limitZoom = function(e2) {
      return Math.max(this.options.minZoom, Math.min(e2, this.options.maxZoom + 1));
    }, N.prototype._cluster = function(e2, t2) {
      for (var r2 = [], o2 = this.options, i3 = o2.reduce, n2 = o2.radius / (o2.extent * Math.pow(2, t2)), s2 = 0; s2 < e2.length; s2++) {
        var a2 = e2[s2];
        if (!(a2.zoom <= t2)) {
          a2.zoom = t2;
          for (var u2 = this.trees[t2 + 1], h2 = u2.within(a2.x, a2.y, n2), l2 = a2.numPoints || 1, p2 = a2.x * l2, c2 = a2.y * l2, f2 = i3 && l2 > 1 ? this._map(a2, true) : null, d2 = (s2 << 5) + (t2 + 1) + this.points.length, g2 = 0, v2 = h2; g2 < v2.length; g2 += 1) {
            var y2 = u2.points[v2[g2]];
            if (!(y2.zoom <= t2)) {
              y2.zoom = t2;
              var m2 = y2.numPoints || 1;
              p2 += y2.x * m2, c2 += y2.y * m2, l2 += m2, y2.parentId = d2, i3 && (f2 || (f2 = this._map(a2, true)), i3(f2, this._map(y2)));
            }
          }
          1 === l2 ? r2.push(a2) : (a2.parentId = d2, r2.push(D(p2 / l2, c2 / l2, d2, l2, f2)));
        }
      }
      return r2;
    }, N.prototype._getOriginId = function(e2) {
      return e2 - this.points.length >> 5;
    }, N.prototype._getOriginZoom = function(e2) {
      return (e2 - this.points.length) % 32;
    }, N.prototype._map = function(e2, t2) {
      if (e2.numPoints)
        return t2 ? V({}, e2.properties) : e2.properties;
      var r2 = this.points[e2.index].properties, o2 = this.options.map(r2);
      return t2 && o2 === r2 ? V({}, o2) : o2;
    };
    var A = function(t2) {
      function r2(e2, r3, o2, i3) {
        t2.call(this, e2, r3, o2, j), i3 && (this.loadGeoJSON = i3);
      }
      return t2 && (r2.__proto__ = t2), (r2.prototype = Object.create(t2 && t2.prototype)).constructor = r2, r2.prototype.loadData = function(e2, t3) {
        this._pendingCallback && this._pendingCallback(null, { abandoned: true }), this._pendingCallback = t3, this._pendingLoadDataParams = e2, this._state && "Idle" !== this._state ? this._state = "NeedsLoadData" : (this._state = "Coalescing", this._loadData());
      }, r2.prototype._loadData = function() {
        var t3 = this;
        if (this._pendingCallback && this._pendingLoadDataParams) {
          var r3 = this._pendingCallback, o2 = this._pendingLoadDataParams;
          delete this._pendingCallback, delete this._pendingLoadDataParams;
          var i3 = !!(o2 && o2.request && o2.request.collectResourceTiming) && new e.RequestPerformance(o2.request);
          this.loadGeoJSON(o2, function(n2, a2) {
            if (n2 || !a2)
              return r3(n2);
            if ("object" != typeof a2)
              return r3(new Error("Input data given to '" + o2.source + "' is not a valid GeoJSON object."));
            e.decodeFeatures(a2), function e2(t4, r4) {
              var o3, i4 = t4 && t4.type;
              if ("FeatureCollection" === i4)
                for (o3 = 0; o3 < t4.features.length; o3++)
                  e2(t4.features[o3], r4);
              else if ("GeometryCollection" === i4)
                for (o3 = 0; o3 < t4.geometries.length; o3++)
                  e2(t4.geometries[o3], r4);
              else if ("Feature" === i4)
                e2(t4.geometry, r4);
              else if ("Polygon" === i4)
                s(t4.coordinates, r4);
              else if ("MultiPolygon" === i4)
                for (o3 = 0; o3 < t4.coordinates.length; o3++)
                  s(t4.coordinates[o3], r4);
              return t4;
            }(a2, true);
            try {
              t3._geoJSONIndex = o2.cluster ? new N(function(t4) {
                var r4 = t4.superclusterOptions, o3 = t4.clusterProperties;
                if (!o3 || !r4)
                  return r4;
                for (var i4 = {}, n3 = {}, s2 = { accumulated: null, zoom: 0 }, a3 = { properties: null }, u3 = Object.keys(o3), h3 = 0, l2 = u3; h3 < l2.length; h3 += 1) {
                  var p2 = l2[h3], c2 = o3[p2], f2 = c2[0], d2 = e.createExpression(c2[1]), g2 = e.createExpression("string" == typeof f2 ? [f2, ["accumulated"], ["get", p2]] : f2);
                  i4[p2] = d2.value, n3[p2] = g2.value;
                }
                return r4.map = function(e2) {
                  a3.properties = e2;
                  for (var t5 = {}, r5 = 0, o4 = u3; r5 < o4.length; r5 += 1) {
                    var n4 = o4[r5];
                    t5[n4] = i4[n4].evaluate(s2, a3);
                  }
                  return t5;
                }, r4.reduce = function(e2, t5) {
                  a3.properties = t5;
                  for (var r5 = 0, o4 = u3; r5 < o4.length; r5 += 1) {
                    var i5 = o4[r5];
                    s2.accumulated = e2[i5], e2[i5] = n3[i5].evaluate(s2, a3);
                  }
                }, r4;
              }(o2)).load(a2.features) : e.geojsonvt(a2, o2.geojsonVtOptions);
            } catch (n3) {
              return r3(n3);
            }
            t3.loaded = {};
            var u2 = {};
            if (i3) {
              var h2 = i3.finish();
              h2 && (u2.resourceTiming = {}, u2.resourceTiming[o2.source] = JSON.parse(JSON.stringify(h2)));
            }
            r3(null, u2);
          });
        }
      }, r2.prototype.coalesce = function() {
        "Coalescing" === this._state ? this._state = "Idle" : "NeedsLoadData" === this._state && (this._state = "Coalescing", this._loadData());
      }, r2.prototype.reloadTile = function(e2, r3) {
        var o2 = this.loaded;
        return o2 && o2[e2.uid] ? t2.prototype.reloadTile.call(this, e2, r3) : this.loadTile(e2, r3);
      }, r2.prototype.loadGeoJSON = function(t3, r3) {
        if (t3.request)
          e.getJSON(t3.request, r3);
        else {
          if ("string" != typeof t3.data)
            return r3(new Error("Input data given to '" + t3.source + "' is not a valid GeoJSON object."));
          try {
            return r3(null, JSON.parse(t3.data));
          } catch (e2) {
            return r3(new Error("Input data given to '" + t3.source + "' is not a valid GeoJSON object."));
          }
        }
      }, r2.prototype.removeSource = function(e2, t3) {
        this._pendingCallback && this._pendingCallback(null, { abandoned: true }), t3();
      }, r2.prototype.getClusterExpansionZoom = function(e2, t3) {
        try {
          t3(null, this._geoJSONIndex.getClusterExpansionZoom(e2.clusterId));
        } catch (e3) {
          t3(e3);
        }
      }, r2.prototype.getClusterChildren = function(e2, t3) {
        try {
          t3(null, this._geoJSONIndex.getChildren(e2.clusterId));
        } catch (e3) {
          t3(e3);
        }
      }, r2.prototype.getClusterLeaves = function(e2, t3) {
        try {
          t3(null, this._geoJSONIndex.getLeaves(e2.clusterId, e2.limit, e2.offset));
        } catch (e3) {
          t3(e3);
        }
      }, r2;
    }(e.VectorTileWorkerSource), B = function(t2) {
      var r2 = this;
      this.self = t2, this.actor = new e.Actor(t2, this), this.layerIndexes = {}, this.availableImages = {}, this.workerSourceTypes = { vector: e.VectorTileWorkerSource, geojson: A }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function(e2, t3) {
        if (r2.workerSourceTypes[e2])
          throw new Error('Worker source with name "' + e2 + '" already registered.');
        r2.workerSourceTypes[e2] = t3;
      }, this.self.registerRTLTextPlugin = function(t3) {
        if (e.plugin.isParsed())
          throw new Error("RTL text plugin already registered.");
        e.plugin.applyArabicShaping = t3.applyArabicShaping, e.plugin.processBidirectionalText = t3.processBidirectionalText, e.plugin.processStyledBidirectionalText = t3.processStyledBidirectionalText;
      };
    };
    return B.prototype.checkIfReady = function(e2, t2, r2) {
      r2();
    }, B.prototype.setReferrer = function(e2, t2) {
      this.referrer = t2;
    }, B.prototype.setImages = function(e2, t2, r2) {
      for (var o2 in this.availableImages[e2] = t2, this.workerSources[e2]) {
        var i3 = this.workerSources[e2][o2];
        for (var n2 in i3)
          i3[n2].availableImages = t2;
      }
      r2();
    }, B.prototype.setLayers = function(e2, t2, r2) {
      this.getLayerIndex(e2).replace(t2), r2();
    }, B.prototype.setXml = function(e2, t2, r2) {
      this.getLayerIndex(e2)._xml = t2, r2();
    }, B.prototype.setLayersbuffer = function(t2, r2, o2) {
      var i3 = e.BufferTostyle(new e.Protobuf(r2)), n2 = this.getLayerIndex(t2);
      n2.replace(i3.layers), n2._xml = i3.xml, o2();
    }, B.prototype.updateLayers = function(e2, t2, r2) {
      this.getLayerIndex(e2).update(t2.layers, t2.removedIds), r2();
    }, B.prototype.loadTile = function(e2, t2, r2) {
      this.getWorkerSource(e2, t2.type, t2.source).loadTile(t2, r2);
    }, B.prototype.loadDEMTile = function(e2, t2, r2) {
      this.getDEMWorkerSource(e2, t2.source).loadTile(t2, r2);
    }, B.prototype.reloadTile = function(e2, t2, r2) {
      this.getWorkerSource(e2, t2.type, t2.source).reloadTile(t2, r2);
    }, B.prototype.abortTile = function(e2, t2, r2) {
      this.getWorkerSource(e2, t2.type, t2.source).abortTile(t2, r2);
    }, B.prototype.removeTile = function(e2, t2, r2) {
      this.getWorkerSource(e2, t2.type, t2.source).removeTile(t2, r2);
    }, B.prototype.removeDEMTile = function(e2, t2) {
      this.getDEMWorkerSource(e2, t2.source).removeTile(t2);
    }, B.prototype.removeSource = function(e2, t2, r2) {
      if (this.workerSources[e2] && this.workerSources[e2][t2.type] && this.workerSources[e2][t2.type][t2.source]) {
        var o2 = this.workerSources[e2][t2.type][t2.source];
        delete this.workerSources[e2][t2.type][t2.source], void 0 !== o2.removeSource ? o2.removeSource(t2, r2) : r2();
      }
    }, B.prototype.loadWorkerSource = function(e2, t2, r2) {
      try {
        this.self.importScripts(t2.url), r2();
      } catch (e3) {
        r2(e3.toString());
      }
    }, B.prototype.syncRTLPluginState = function(t2, r2, o2) {
      try {
        e.plugin.setState(r2);
        var i3 = e.plugin.getPluginURL();
        if (e.plugin.isLoaded() && !e.plugin.isParsed() && null != i3) {
          this.self.importScripts(i3);
          var n2 = e.plugin.isParsed();
          o2(n2 ? void 0 : new Error("RTL Text Plugin failed to import scripts from " + i3), n2);
        }
      } catch (e2) {
        o2(e2.toString());
      }
    }, B.prototype.getAvailableImages = function(e2) {
      var t2 = this.availableImages[e2];
      return t2 || (t2 = []), t2;
    }, B.prototype.getLayerIndex = function(e2) {
      var t2 = this.layerIndexes[e2];
      return t2 || (t2 = this.layerIndexes[e2] = new o()), t2;
    }, B.prototype.getWorkerSource = function(e2, t2, r2) {
      var o2 = this;
      return this.workerSources[e2] || (this.workerSources[e2] = {}), this.workerSources[e2][t2] || (this.workerSources[e2][t2] = {}), this.workerSources[e2][t2][r2] || (this.workerSources[e2][t2][r2] = new this.workerSourceTypes[t2]({ send: function(t3, r3, i3, n2, s2, a2) {
        o2.actor.send(t3, r3, i3, e2, n2, a2);
      }, scheduler: this.actor.scheduler }, this.getLayerIndex(e2), this.getAvailableImages(e2))), this.workerSources[e2][t2][r2];
    }, B.prototype.getDEMWorkerSource = function(e2, t2) {
      return this.demWorkerSources[e2] || (this.demWorkerSources[e2] = {}), this.demWorkerSources[e2][t2] || (this.demWorkerSources[e2][t2] = new n()), this.demWorkerSources[e2][t2];
    }, B.prototype.enforceCacheSizeLimit = function(t2, r2) {
      e.enforceCacheSizeLimit(r2);
    }, "undefined" != typeof WorkerGlobalScope && void 0 !== e.window && e.window instanceof WorkerGlobalScope && (e.window.worker = new B(e.window)), B;
  });
  define2(["./shared"], function(t) {
    var e = t.createCommonjsModule(function(t2) {
      function e2(t3) {
        return !i2(t3);
      }
      function i2(t3) {
        return "undefined" == typeof window || "undefined" == typeof document ? "not a browser" : Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray ? Function.prototype && Function.prototype.bind ? Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions ? "JSON" in window && "parse" in JSON && "stringify" in JSON ? function() {
          if (!("Worker" in window && "Blob" in window && "URL" in window))
            return false;
          var t4, e3, i4 = new Blob([""], { type: "text/javascript" }), r3 = URL.createObjectURL(i4);
          try {
            e3 = new Worker(r3), t4 = true;
          } catch (e4) {
            t4 = false;
          }
          return e3 && e3.terminate(), URL.revokeObjectURL(r3), t4;
        }() ? "Uint8ClampedArray" in window ? ArrayBuffer.isView ? function() {
          var t4 = document.createElement("canvas");
          t4.width = t4.height = 1;
          var e3 = t4.getContext("2d");
          if (!e3)
            return false;
          var i4 = e3.getImageData(0, 0, 1, 1);
          return i4 && i4.width === t4.width;
        }() ? (void 0 === r2[i3 = t3 && t3.failIfMajorPerformanceCaveat] && (r2[i3] = function(t4) {
          var i4 = function(t5) {
            var i5 = document.createElement("canvas"), r4 = Object.create(e2.webGLContextAttributes);
            return r4.failIfMajorPerformanceCaveat = t5, i5.probablySupportsContext ? i5.probablySupportsContext("webgl", r4) || i5.probablySupportsContext("experimental-webgl", r4) : i5.supportsContext ? i5.supportsContext("webgl", r4) || i5.supportsContext("experimental-webgl", r4) : i5.getContext("webgl", r4) || i5.getContext("experimental-webgl", r4);
          }(t4);
          if (!i4)
            return false;
          var r3 = i4.createShader(i4.VERTEX_SHADER);
          return !(!r3 || i4.isContextLost()) && (i4.shaderSource(r3, "void main() {}"), i4.compileShader(r3), true === i4.getShaderParameter(r3, i4.COMPILE_STATUS));
        }(i3)), r2[i3] ? void 0 : "insufficient WebGL support") : "insufficient Canvas/getImageData support" : "insufficient ArrayBuffer support" : "insufficient Uint8ClampedArray support" : "insufficient worker support" : "insufficient JSON support" : "insufficient Object support" : "insufficient Function support" : "insufficent Array support";
        var i3;
      }
      t2.exports ? t2.exports = e2 : window && (window.sgmap = window.sgmap || {}, window.sgmap.supported = e2, window.sgmap.notSupportedReason = i2);
      var r2 = {};
      e2.webGLContextAttributes = { antialias: false, alpha: true, stencil: true, depth: true };
    }), r = { create: function(e2, i2, r2) {
      var o2 = t.window.document.createElement(e2);
      return void 0 !== i2 && (o2.className = i2), r2 && r2.appendChild(o2), o2;
    }, createNS: function(e2, i2) {
      return t.window.document.createElementNS(e2, i2);
    } }, o = t.window.document.documentElement.style;
    function n(t2) {
      if (!o)
        return t2[0];
      for (var e2 = 0; e2 < t2.length; e2++)
        if (t2[e2] in o)
          return t2[e2];
      return t2[0];
    }
    var a, s = n(["userSelect", "MozUserSelect", "WebkitUserSelect", "msUserSelect"]);
    r.disableDrag = function() {
      o && s && (a = o[s], o[s] = "none");
    }, r.enableDrag = function() {
      o && s && (o[s] = a);
    };
    var c = n(["transform", "WebkitTransform"]);
    r.setTransform = function(t2, e2) {
      t2.style[c] = e2;
    };
    var l = false;
    try {
      var u = Object.defineProperty({}, "passive", { get: function() {
        l = true;
      } });
      t.window.addEventListener("test", u, u), t.window.removeEventListener("test", u, u);
    } catch (t2) {
      l = false;
    }
    r.addEventListener = function(t2, e2, i2, r2) {
      void 0 === r2 && (r2 = {}), t2.addEventListener(e2, i2, "passive" in r2 && l ? r2 : r2.capture);
    }, r.removeEventListener = function(t2, e2, i2, r2) {
      void 0 === r2 && (r2 = {}), t2.removeEventListener(e2, i2, "passive" in r2 && l ? r2 : r2.capture);
    };
    var h = function(e2) {
      e2.preventDefault(), e2.stopPropagation(), t.window.removeEventListener("click", h, true);
    };
    function p(e2, i2, r2) {
      var o2, n2, a2, s2 = t.browser.devicePixelRatio > 1 ? "@2x" : "", c2 = i2.normalizeSpriteURL(e2, s2, ".json"), l2 = i2.normalizeSpriteURL(e2, s2, ".png");
      e2.indexOf("http") >= 0 && (c2 = e2 + ".json", l2 = e2 + ".png");
      var u2 = t.getJSON(i2.transformRequest(c2, t.ResourceType.SpriteJSON), function(t2, e3) {
        u2 = null, a2 || (a2 = t2, o2 = e3, p2());
      }), h2 = t.getImage(i2.transformRequest(l2, t.ResourceType.SpriteImage), function(t2, e3) {
        h2 = null, a2 || (a2 = t2, n2 = e3, p2());
      });
      function p2() {
        if (a2)
          r2(a2);
        else if (o2 && n2) {
          var e3 = t.browser.getImageData(n2), i3 = {};
          for (var s3 in o2) {
            var c3 = o2[s3], l3 = c3.width, u3 = c3.height, h3 = c3.x, p3 = c3.y, f2 = c3.sdf, d2 = c3.pixelRatio, _3 = c3.stretchX, m2 = c3.stretchY, g2 = c3.content, v2 = new t.RGBAImage({ width: l3, height: u3 });
            t.RGBAImage.copy(e3, v2, { x: h3, y: p3 }, { x: 0, y: 0 }, { width: l3, height: u3 }), i3[s3] = { data: v2, pixelRatio: d2, sdf: f2, stretchX: _3, stretchY: m2, content: g2 };
          }
          r2(null, i3);
        }
      }
      return { cancel: function() {
        u2 && (u2.cancel(), u2 = null), h2 && (h2.cancel(), h2 = null);
      } };
    }
    function f(t2) {
      var e2 = t2.userImage;
      return !!(e2 && e2.render && e2.render()) && (t2.data.replace(new Uint8Array(e2.data.buffer)), true);
    }
    r.suppressClick = function() {
      t.window.addEventListener("click", h, true), t.window.setTimeout(function() {
        t.window.removeEventListener("click", h, true);
      }, 0);
    }, r.mousePos = function(e2, i2) {
      var r2 = e2.getBoundingClientRect();
      return new t.Point(i2.clientX - r2.left - e2.clientLeft, i2.clientY - r2.top - e2.clientTop);
    }, r.touchPos = function(e2, i2) {
      for (var r2 = e2.getBoundingClientRect(), o2 = [], n2 = 0; n2 < i2.length; n2++)
        o2.push(new t.Point(i2[n2].clientX - r2.left - e2.clientLeft, i2[n2].clientY - r2.top - e2.clientTop));
      return o2;
    }, r.mouseButton = function(e2) {
      return void 0 !== t.window.InstallTrigger && 2 === e2.button && e2.ctrlKey && t.window.navigator.platform.toUpperCase().indexOf("MAC") >= 0 ? 0 : e2.button;
    }, r.remove = function(t2) {
      t2.parentNode && t2.parentNode.removeChild(t2);
    };
    var d = function(e2) {
      function i2() {
        e2.call(this), this.images = {}, this.updatedImages = {}, this.callbackDispatchedThisFrame = {}, this.loaded = false, this.requestors = [], this.patterns = {}, this.atlasImage = new t.RGBAImage({ width: 1, height: 1 }), this.dirty = true;
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.isLoaded = function() {
        return this.loaded;
      }, i2.prototype.setLoaded = function(t2) {
        if (this.loaded !== t2 && (this.loaded = t2, t2)) {
          for (var e3 = 0, i3 = this.requestors; e3 < i3.length; e3 += 1) {
            var r2 = i3[e3];
            this._notify(r2.ids, r2.callback);
          }
          this.requestors = [];
        }
      }, i2.prototype.getImage = function(t2) {
        return this.images[t2];
      }, i2.prototype.addImage = function(t2, e3) {
        this._validate(t2, e3) && (this.images[t2] = e3);
      }, i2.prototype._validate = function(e3, i3) {
        var r2 = true;
        return this._validateStretch(i3.stretchX, i3.data && i3.data.width) || (this.fire(new t.ErrorEvent(new Error('Image "' + e3 + '" has invalid "stretchX" value'))), r2 = false), this._validateStretch(i3.stretchY, i3.data && i3.data.height) || (this.fire(new t.ErrorEvent(new Error('Image "' + e3 + '" has invalid "stretchY" value'))), r2 = false), this._validateContent(i3.content, i3) || (this.fire(new t.ErrorEvent(new Error('Image "' + e3 + '" has invalid "content" value'))), r2 = false), r2;
      }, i2.prototype._validateStretch = function(t2, e3) {
        if (!t2)
          return true;
        for (var i3 = 0, r2 = 0, o2 = t2; r2 < o2.length; r2 += 1) {
          var n2 = o2[r2];
          if (n2[0] < i3 || n2[1] < n2[0] || e3 < n2[1])
            return false;
          i3 = n2[1];
        }
        return true;
      }, i2.prototype._validateContent = function(t2, e3) {
        return !(t2 && (4 !== t2.length || t2[0] < 0 || e3.data.width < t2[0] || t2[1] < 0 || e3.data.height < t2[1] || t2[2] < 0 || e3.data.width < t2[2] || t2[3] < 0 || e3.data.height < t2[3] || t2[2] < t2[0] || t2[3] < t2[1]));
      }, i2.prototype.updateImage = function(t2, e3) {
        e3.version = this.images[t2].version + 1, this.images[t2] = e3, this.updatedImages[t2] = true;
      }, i2.prototype.removeImage = function(t2) {
        var e3 = this.images[t2];
        delete this.images[t2], delete this.patterns[t2], e3.userImage && e3.userImage.onRemove && e3.userImage.onRemove();
      }, i2.prototype.listImages = function() {
        return Object.keys(this.images);
      }, i2.prototype.getImages = function(t2, e3) {
        var i3 = true;
        if (!this.isLoaded())
          for (var r2 = 0, o2 = t2; r2 < o2.length; r2 += 1)
            this.images[o2[r2]] || (i3 = false);
        this.isLoaded() || i3 ? this._notify(t2, e3) : this.requestors.push({ ids: t2, callback: e3 });
      }, i2.prototype._notify = function(e3, i3) {
        for (var r2 = {}, o2 = 0, n2 = e3; o2 < n2.length; o2 += 1) {
          var a2 = n2[o2];
          this.images[a2] || this.fire(new t.Event("styleimagemissing", { id: a2 }));
          var s2 = this.images[a2];
          s2 ? r2[a2] = { data: s2.data.clone(), pixelRatio: s2.pixelRatio, sdf: s2.sdf, version: s2.version, stretchX: s2.stretchX, stretchY: s2.stretchY, content: s2.content, hasRenderCallback: Boolean(s2.userImage && s2.userImage.render) } : t.warnOnce('Image "' + a2 + '" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.');
        }
        i3(null, r2);
      }, i2.prototype.getPixelSize = function() {
        var t2 = this.atlasImage;
        return { width: t2.width, height: t2.height };
      }, i2.prototype.getPattern = function(e3) {
        var i3 = this.patterns[e3], r2 = this.getImage(e3);
        if (!r2)
          return null;
        if (i3 && i3.position.version === r2.version)
          return i3.position;
        if (i3)
          i3.position.version = r2.version;
        else {
          var o2 = { w: r2.data.width + 2, h: r2.data.height + 2, x: 0, y: 0 }, n2 = new t.ImagePosition(o2, r2);
          this.patterns[e3] = { bin: o2, position: n2 };
        }
        return this._updatePatternAtlas(), this.patterns[e3].position;
      }, i2.prototype.bind = function(e3) {
        var i3 = e3.gl;
        this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = false) : this.atlasTexture = new t.Texture(e3, this.atlasImage, i3.RGBA), this.atlasTexture.bind(i3.LINEAR, i3.CLAMP_TO_EDGE);
      }, i2.prototype._updatePatternAtlas = function() {
        var e3 = [];
        for (var i3 in this.patterns)
          e3.push(this.patterns[i3].bin);
        var r2 = t.potpack(e3), o2 = r2.w, n2 = r2.h, a2 = this.atlasImage;
        for (var s2 in a2.resize({ width: o2 || 1, height: n2 || 1 }), this.patterns) {
          var c2 = this.patterns[s2].bin, l2 = c2.x + 1, u2 = c2.y + 1, h2 = this.images[s2].data, p2 = h2.width, f2 = h2.height;
          t.RGBAImage.copy(h2, a2, { x: 0, y: 0 }, { x: l2, y: u2 }, { width: p2, height: f2 }), t.RGBAImage.copy(h2, a2, { x: 0, y: f2 - 1 }, { x: l2, y: u2 - 1 }, { width: p2, height: 1 }), t.RGBAImage.copy(h2, a2, { x: 0, y: 0 }, { x: l2, y: u2 + f2 }, { width: p2, height: 1 }), t.RGBAImage.copy(h2, a2, { x: p2 - 1, y: 0 }, { x: l2 - 1, y: u2 }, { width: 1, height: f2 }), t.RGBAImage.copy(h2, a2, { x: 0, y: 0 }, { x: l2 + p2, y: u2 }, { width: 1, height: f2 });
        }
        this.dirty = true;
      }, i2.prototype.beginFrame = function() {
        this.callbackDispatchedThisFrame = {};
      }, i2.prototype.dispatchRenderCallbacks = function(t2) {
        for (var e3 = 0, i3 = t2; e3 < i3.length; e3 += 1) {
          var r2 = i3[e3];
          if (!this.callbackDispatchedThisFrame[r2]) {
            this.callbackDispatchedThisFrame[r2] = true;
            var o2 = this.images[r2];
            f(o2) && this.updateImage(r2, o2);
          }
        }
      }, i2;
    }(t.Evented), _2 = function() {
      this.specification = t.styleSpec.light.position;
    };
    _2.prototype.possiblyEvaluate = function(e2, i2) {
      return t.sphericalToCartesian(e2.expression.evaluate(i2));
    }, _2.prototype.interpolate = function(e2, i2, r2) {
      return { x: t.number(e2.x, i2.x, r2), y: t.number(e2.y, i2.y, r2), z: t.number(e2.z, i2.z, r2) };
    };
    var m = new t.Properties({ anchor: new t.DataConstantProperty(t.styleSpec.light.anchor), position: new _2(), color: new t.DataConstantProperty(t.styleSpec.light.color), intensity: new t.DataConstantProperty(t.styleSpec.light.intensity) }), g = function(e2) {
      function i2(i3) {
        e2.call(this), this._transitionable = new t.Transitionable(m), this.setLight(i3), this._transitioning = this._transitionable.untransitioned();
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.getLight = function() {
        return this._transitionable.serialize();
      }, i2.prototype.setLight = function(e3, i3) {
        if (void 0 === i3 && (i3 = {}), !this._validate(t.validateLight, e3, i3))
          for (var r2 in e3) {
            var o2 = e3[r2];
            t.endsWith(r2, "-transition") ? this._transitionable.setTransition(r2.slice(0, -"-transition".length), o2) : this._transitionable.setValue(r2, o2);
          }
      }, i2.prototype.updateTransitions = function(t2) {
        this._transitioning = this._transitionable.transitioned(t2, this._transitioning);
      }, i2.prototype.hasTransition = function() {
        return this._transitioning.hasTransition();
      }, i2.prototype.recalculate = function(t2) {
        this.properties = this._transitioning.possiblyEvaluate(t2);
      }, i2.prototype._validate = function(e3, i3, r2) {
        return (!r2 || false !== r2.validate) && t.emitValidationErrors(this, e3.call(t.validateStyle, t.extend({ value: i3, style: { glyphs: true, sprite: true }, styleSpec: t.styleSpec })));
      }, i2;
    }(t.Evented), v = function e2(i2, r2) {
      var o2 = this;
      this.workerPool = i2, this.actors = [], this.currentActor = 0, this.id = t.uniqueId();
      for (var n2 = this.workerPool.acquire(this.id), a2 = 0; a2 < n2.length; a2++) {
        var s2 = new e2.Actor(n2[a2], r2, this.id);
        s2.name = "Worker " + a2, this.actors.push(s2);
      }
      this.ready = false, this.broadcast("checkIfReady", null, function() {
        o2.ready = true;
      });
    };
    function y(e2, i2, r2, o2) {
      var n2 = i2 * (t.EXTENT / (e2.tileSize * Math.pow(2, r2 - e2.tileID.overscaledZ)));
      return "xy" == o2 ? "Sg4326" == e2.tileID.reference ? [n2, n2 / e2.tileID._tileY[1]] : [n2, n2] : n2;
    }
    v.prototype.broadcast = function(e2, i2, r2) {
      t.asyncAll(this.actors, function(t2, r3) {
        t2.send(e2, i2, r3);
      }, r2 = r2 || function() {
      });
    }, v.prototype.getActor = function() {
      return this.currentActor = (this.currentActor + 1) % this.actors.length, this.actors[this.currentActor];
    }, v.prototype.remove = function() {
      this.actors.forEach(function(t2) {
        t2.remove();
      }), this.actors = [], this.workerPool.release(this.id);
    }, v.Actor = t.Actor;
    var b = 2 * Math.PI * t.earthRadius;
    function w(t2) {
      return b * Math.cos(t2 * Math.PI / 180);
    }
    function x(t2) {
      return 360 / Math.PI * Math.atan(Math.exp((180 - 360 * t2) * Math.PI / 180)) - 90;
    }
    var T = function(t2, e2, i2) {
      void 0 === i2 && (i2 = 0), this.x = +t2, this.y = +e2, this.z = +i2;
    };
    function S(e2, i2, r2) {
      var o2 = function(o3, n2) {
        if (o3)
          return r2(o3);
        if (n2) {
          var a2 = t.pick(t.extend(n2, e2), ["tiles", "minzoom", "maxzoom", "attribution", "sgmap_logo", "bounds", "scheme", "tileSize", "encoding", "tilesecurity", "traffic", "zoomRule", "reference"]);
          2 == n2.reference && (a2.reference = "Sg4326"), n2.vector_layers && (a2.vectorLayers = n2.vector_layers, a2.vectorLayerIds = a2.vectorLayers.map(function(t2) {
            return t2.id;
          })), a2.tiles = i2.canonicalizeTileset(a2, e2.url), r2(null, a2);
        }
      };
      return e2.url ? t.getJSON(i2.transformRequest(i2.normalizeSourceURL(e2.url), t.ResourceType.Source), o2) : t.browser.frame(function() {
        return o2(null, e2);
      });
    }
    T.fromLngLat = function(e2, i2) {
      void 0 === i2 && (i2 = 0);
      var r2 = t.LngLat.convert(e2);
      return new T((180 + r2.lng) / 360, (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + r2.lat * Math.PI / 360))) / 360, function(t2, e3) {
        return t2 / w(e3);
      }(i2, r2.lat));
    }, T.prototype.toLngLat = function() {
      return new t.LngLat(360 * this.x - 180, x(this.y));
    }, T.prototype.toAltitude = function() {
      return this.z * w(x(this.y));
    }, T.prototype.meterInMercatorCoordinateUnits = function() {
      return 1 / b * (t2 = x(this.y), 1 / Math.cos(t2 * Math.PI / 180));
      var t2;
    };
    var E = function(e2, i2, r2) {
      this.bounds = t.LngLatBounds.convert(this.validateBounds(e2)), this.minzoom = i2 || 0, this.maxzoom = r2 || 24;
    };
    E.prototype.validateBounds = function(t2) {
      return Array.isArray(t2) && 4 === t2.length ? [Math.max(-180, t2[0]), Math.max(-90, t2[1]), Math.min(180, t2[2]), Math.min(90, t2[3])] : [-180, -90, 180, 90];
    }, E.prototype.contains = function(e2) {
      var i2 = Math.pow(2, e2.z), r2 = t.config.parse, o2 = r2.xFromLng, n2 = r2.yFromLat, a2 = Math.floor(o2(this.bounds.getWest()) * i2), s2 = Math.floor(n2(this.bounds.getNorth()) * i2), c2 = Math.ceil(o2(this.bounds.getEast()) * i2), l2 = Math.ceil(n2(this.bounds.getSouth()) * i2);
      return e2.x >= a2 && e2.x < c2 && e2.y >= s2 && e2.y < l2;
    };
    var A = function(e2) {
      function i2(i3, r2, o2, n2) {
        if (e2.call(this), this.id = i3, this.dispatcher = o2, this.type = "vector", this.minzoom = 0, this.maxzoom = 22, this.scheme = "xyz", this.tileSize = 512, this.reparseOverscaled = true, this.isTileClipped = true, this._loaded = false, t.extend(this, t.pick(r2, ["url", "scheme", "tileSize", "promoteId"])), this._options = t.extend({ type: "vector" }, r2), this._collectResourceTiming = r2.collectResourceTiming, 512 !== this.tileSize)
          throw new Error("vector tile sources must have a tileSize of 512");
        this.setEventedParent(n2), this._tileWorkers = {}, this._deduped = new t.DedupedRequest();
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.load = function() {
        var e3 = this;
        this._loaded = false, this.fire(new t.Event("dataloading", { dataType: "source" })), this._tileJSONRequest = S(this._options, this.map._requestManager, function(i3, r2) {
          e3._tileJSONRequest = null, e3._loaded = true, i3 ? e3.fire(new t.ErrorEvent(i3)) : r2 && (t.extend(e3, r2), r2.bounds && (e3.tileBounds = new E(r2.bounds, e3.minzoom, e3.maxzoom)), t.postTurnstileEvent(r2.tiles, e3.map._requestManager._customAccessToken), t.postMapLoadEvent(r2.tiles, e3.map._getMapId(), e3.map._requestManager._skuToken, e3.map._requestManager._customAccessToken), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "metadata" })), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "content" })));
        });
      }, i2.prototype.loaded = function() {
        return this._loaded;
      }, i2.prototype.hasTile = function(t2) {
        return !this.tileBounds || this.tileBounds.contains(t2.canonical);
      }, i2.prototype.onAdd = function(t2) {
        this.map = t2, this.load();
      }, i2.prototype.setSourceProperty = function(t2) {
        this._tileJSONRequest && this._tileJSONRequest.cancel(), t2();
        for (var e3 = 0, i3 = this.map.style._getSourceCaches(this.id); e3 < i3.length; e3 += 1)
          i3[e3].clearTiles();
        this.load();
      }, i2.prototype.setTiles = function(t2) {
        var e3 = this;
        return this.setSourceProperty(function() {
          e3._options.tiles = t2;
        }), this;
      }, i2.prototype.setUrl = function(t2) {
        var e3 = this;
        return this.setSourceProperty(function() {
          e3.url = t2, e3._options.url = t2;
        }), this;
      }, i2.prototype.onRemove = function() {
        this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);
      }, i2.prototype.serialize = function() {
        return t.extend({}, this._options);
      }, i2.prototype.loadTile = function(e3, i3) {
        var r2 = this, o2 = e3.tileID.canonical, n2 = this.map._requestManager.normalizeTileURL(o2.url(this.tiles, this.scheme, e3)), a2 = { request: t.extend(this.map._requestManager.transformRequest(n2, t.ResourceType.Tile), { tilesecurity: this.tilesecurity, zxy: o2, traffic: this.traffic, reference: this.reference }), uid: e3.uid, tileID: e3.tileID, tileZoom: e3.tileZoom, zoom: e3.tileID.overscaledZ, tileSize: this.tileSize * e3.tileID.overscaleFactor(), type: this.type, source: this.id, pixelRatio: t.browser.devicePixelRatio, showCollisionBoxes: this.map.showCollisionBoxes, promoteId: this.promoteId, isSymbolTile: e3.isSymbolTile };
        if (a2.request.collectResourceTiming = this._collectResourceTiming, e3.actor && "expired" !== e3.state)
          "loading" === e3.state ? e3.reloadCallback = i3 : e3.request = e3.actor.send("reloadTile", a2, c2.bind(this));
        else if (e3.actor = this._tileWorkers[n2] = this._tileWorkers[n2] || this.dispatcher.getActor(), this.dispatcher.ready)
          e3.request = e3.actor.send("loadTile", a2, c2.bind(this));
        else {
          var s2 = t.loadVectorTile.call({ deduped: this._deduped }, a2, function(t2, i4) {
            t2 || !i4 ? c2.call(r2, t2) : (a2.data = { cacheControl: i4.cacheControl, expires: i4.expires, rawData: i4.rawData.slice(0) }, e3.actor && e3.actor.send("loadTile", a2, c2.bind(r2)));
          }, true);
          e3.request = { cancel: s2 };
        }
        function c2(r3, o3) {
          return delete e3.request, e3.aborted ? i3(null) : r3 && 404 !== r3.status ? i3(r3) : (o3 && o3.resourceTiming && (e3.resourceTiming = o3.resourceTiming), this.map._refreshExpiredTiles && o3 && e3.setExpiryData(o3), e3.loadVectorData(o3, this.map.painter), t.cacheEntryPossiblyAdded(this.dispatcher), i3(null), void (e3.reloadCallback && (this.loadTile(e3, e3.reloadCallback), e3.reloadCallback = null)));
        }
      }, i2.prototype.abortTile = function(t2) {
        t2.request && (t2.request.cancel(), delete t2.request), t2.actor && t2.actor.send("abortTile", { uid: t2.uid, type: this.type, source: this.id }, void 0);
      }, i2.prototype.unloadTile = function(t2) {
        t2.unloadVectorData(), t2.actor && t2.actor.send("removeTile", { uid: t2.uid, type: this.type, source: this.id }, void 0);
      }, i2.prototype.hasTransition = function() {
        return false;
      }, i2.prototype.afterUpdate = function() {
        this._tileWorkers = {};
      }, i2;
    }(t.Evented), k = function(e2) {
      function i2(i3, r2, o2, n2) {
        e2.call(this), this.id = i3, this.dispatcher = o2, this.setEventedParent(n2), this.type = "raster", this.minzoom = 0, this.maxzoom = 22, this.roundZoom = true, this.scheme = "xyz", this.tileSize = 512, this._loaded = false, this._options = t.extend({ type: "raster" }, r2), t.extend(this, t.pick(r2, ["url", "scheme", "tileSize"]));
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.load = function() {
        var e3 = this;
        this._loaded = false, this.fire(new t.Event("dataloading", { dataType: "source" })), this._tileJSONRequest = S(this._options, this.map._requestManager, function(i3, r2) {
          e3._tileJSONRequest = null, e3._loaded = true, i3 ? e3.fire(new t.ErrorEvent(i3)) : r2 && (t.extend(e3, r2), r2.bounds && (e3.tileBounds = new E(r2.bounds, e3.minzoom, e3.maxzoom)), t.postTurnstileEvent(r2.tiles), t.postMapLoadEvent(r2.tiles, e3.map._getMapId(), e3.map._requestManager._skuToken), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "metadata" })), e3.fire(new t.Event("data", { dataType: "source", sourceDataType: "content" })));
        });
      }, i2.prototype.loaded = function() {
        return this._loaded;
      }, i2.prototype.onAdd = function(t2) {
        this.map = t2, this.load();
      }, i2.prototype.onRemove = function() {
        this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);
      }, i2.prototype.serialize = function() {
        return t.extend({}, this._options);
      }, i2.prototype.hasTile = function(t2) {
        return !this.tileBounds || this.tileBounds.contains(t2.canonical);
      }, i2.prototype.loadTile = function(e3, i3) {
        var r2 = this, o2 = this.map._requestManager.normalizeTileURL(e3.tileID.canonical.url(this.tiles, this.scheme), this.tileSize);
        e3.request = t.getImage(t.extend(this.map._requestManager.transformRequest(o2, t.ResourceType.Tile), { tilesecurity: this.tilesecurity, zxy: e3.tileID.canonical, traffic: this.traffic, reference: this.reference }), function(o3, n2) {
          if (delete e3.request, e3.aborted)
            e3.state = "unloaded", i3(null);
          else if (o3)
            e3.state = "errored", i3(o3);
          else if (n2) {
            r2.map._refreshExpiredTiles && e3.setExpiryData(n2), delete n2.cacheControl, delete n2.expires;
            var a2 = r2.map.painter.context, s2 = a2.gl;
            e3.texture = r2.map.painter.getTileTexture(n2.width), e3.texture ? e3.texture.update(n2, { useMipmap: true }) : (e3.texture = new t.Texture(a2, n2, s2.RGBA, { useMipmap: true }), e3.texture.bind(s2.LINEAR, s2.CLAMP_TO_EDGE, s2.LINEAR_MIPMAP_NEAREST), a2.extTextureFilterAnisotropic && s2.texParameterf(s2.TEXTURE_2D, a2.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, a2.extTextureFilterAnisotropicMax)), e3.state = "loaded", t.cacheEntryPossiblyAdded(r2.dispatcher), i3(null);
          }
        });
      }, i2.prototype.abortTile = function(t2, e3) {
        t2.request && (t2.request.cancel(), delete t2.request), e3();
      }, i2.prototype.unloadTile = function(t2, e3) {
        t2.texture && this.map.painter.saveTileTexture(t2.texture), e3();
      }, i2.prototype.hasTransition = function() {
        return false;
      }, i2;
    }(t.Evented), I = function(e2) {
      function i2(i3, r2, o2, n2) {
        e2.call(this, i3, r2, o2, n2), this.type = "raster-dem", this.maxzoom = 22, this._options = t.extend({ type: "raster-dem" }, r2), this.encoding = r2.encoding || "sgmap";
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.serialize = function() {
        return { type: "raster-dem", url: this.url, tileSize: this.tileSize, tiles: this.tiles, bounds: this.bounds, encoding: this.encoding };
      }, i2.prototype.loadTile = function(e3, i3) {
        var r2 = this.map._requestManager.normalizeTileURL(e3.tileID.canonical.url(this.tiles, this.scheme), this.tileSize);
        function o2(t2, r3) {
          t2 && (e3.state = "errored", i3(t2)), r3 && (e3.dem = r3, e3.needsHillshadePrepare = true, e3.state = "loaded", i3(null));
        }
        e3.request = t.getImage(this.map._requestManager.transformRequest(r2, t.ResourceType.Tile), function(r3, n2) {
          if (delete e3.request, e3.aborted)
            e3.state = "unloaded", i3(null);
          else if (r3)
            e3.state = "errored", i3(r3);
          else if (n2) {
            this.map._refreshExpiredTiles && e3.setExpiryData(n2), delete n2.cacheControl, delete n2.expires;
            var a2 = t.window.ImageBitmap && n2 instanceof t.window.ImageBitmap && t.offscreenCanvasSupported() ? n2 : t.browser.getImageData(n2, 1), s2 = { uid: e3.uid, coord: e3.tileID, source: this.id, rawImageData: a2, encoding: this.encoding };
            e3.actor && "expired" !== e3.state || (e3.actor = this.dispatcher.getActor(), e3.actor.send("loadDEMTile", s2, o2.bind(this)));
          }
        }.bind(this)), e3.neighboringTiles = this._getNeighboringTiles(e3.tileID);
      }, i2.prototype._getNeighboringTiles = function(e3) {
        var i3 = e3.canonical, r2 = Math.pow(2, i3.z), o2 = (i3.x - 1 + r2) % r2, n2 = 0 === i3.x ? e3.wrap - 1 : e3.wrap, a2 = (i3.x + 1 + r2) % r2, s2 = i3.x + 1 === r2 ? e3.wrap + 1 : e3.wrap, c2 = {};
        return c2[new t.OverscaledTileID(e3.overscaledZ, n2, i3.z, o2, i3.y).key] = { backfilled: false }, c2[new t.OverscaledTileID(e3.overscaledZ, s2, i3.z, a2, i3.y).key] = { backfilled: false }, i3.y > 0 && (c2[new t.OverscaledTileID(e3.overscaledZ, n2, i3.z, o2, i3.y - 1).key] = { backfilled: false }, c2[new t.OverscaledTileID(e3.overscaledZ, e3.wrap, i3.z, i3.x, i3.y - 1).key] = { backfilled: false }, c2[new t.OverscaledTileID(e3.overscaledZ, s2, i3.z, a2, i3.y - 1).key] = { backfilled: false }), i3.y + 1 < r2 && (c2[new t.OverscaledTileID(e3.overscaledZ, n2, i3.z, o2, i3.y + 1).key] = { backfilled: false }, c2[new t.OverscaledTileID(e3.overscaledZ, e3.wrap, i3.z, i3.x, i3.y + 1).key] = { backfilled: false }, c2[new t.OverscaledTileID(e3.overscaledZ, s2, i3.z, a2, i3.y + 1).key] = { backfilled: false }), c2;
      }, i2.prototype.unloadTile = function(t2) {
        t2.demTexture && this.map.painter.saveTileTexture(t2.demTexture), t2.fbo && (t2.fbo.destroy(), delete t2.fbo), t2.dem && delete t2.dem, delete t2.neighboringTiles, t2.state = "unloaded", t2.actor && t2.actor.send("removeDEMTile", { uid: t2.uid, source: this.id });
      }, i2;
    }(k), B = function(e2) {
      function i2(i3, r2, o2, n2) {
        e2.call(this), this.id = i3, this.type = "geojson", this.minzoom = 0, this.maxzoom = 18, this.tileSize = 512, this.isTileClipped = true, this.reparseOverscaled = true, this._removed = false, this._loaded = false, this.actor = o2.getActor(), this.setEventedParent(n2), this._data = r2.data, this._options = t.extend({}, r2), this._collectResourceTiming = r2.collectResourceTiming, this._resourceTiming = [], void 0 !== r2.maxzoom && (this.maxzoom = r2.maxzoom), r2.type && (this.type = r2.type), r2.attribution && (this.attribution = r2.attribution), this.promoteId = r2.promoteId;
        var a2 = t.EXTENT / this.tileSize;
        this.workerOptions = t.extend({ source: this.id, cluster: r2.cluster || false, geojsonVtOptions: { buffer: (void 0 !== r2.buffer ? r2.buffer : 128) * a2, tolerance: (void 0 !== r2.tolerance ? r2.tolerance : 0.375) * a2, extent: t.EXTENT, maxZoom: this.maxzoom, lineMetrics: r2.lineMetrics || false, generateId: r2.generateId || false }, superclusterOptions: { maxZoom: void 0 !== r2.clusterMaxZoom ? Math.min(r2.clusterMaxZoom, this.maxzoom - 1) : this.maxzoom - 1, extent: t.EXTENT, radius: (r2.clusterRadius || 50) * a2, log: false, generateId: r2.generateId || false }, clusterProperties: r2.clusterProperties }, r2.workerOptions);
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.load = function() {
        var e3 = this;
        this.fire(new t.Event("dataloading", { dataType: "source" })), this._updateWorkerData(function(i3) {
          if (i3)
            e3.fire(new t.ErrorEvent(i3));
          else {
            var r2 = { dataType: "source", sourceDataType: "metadata" };
            e3._collectResourceTiming && e3._resourceTiming && e3._resourceTiming.length > 0 && (r2.resourceTiming = e3._resourceTiming, e3._resourceTiming = []), e3.fire(new t.Event("data", r2));
          }
        });
      }, i2.prototype.onAdd = function(t2) {
        this.map = t2, this.load();
      }, i2.prototype.setData = function(e3) {
        var i3 = this;
        return this._data = e3, this.fire(new t.Event("dataloading", { dataType: "source" })), this._updateWorkerData(function(e4) {
          if (e4)
            i3.fire(new t.ErrorEvent(e4));
          else {
            var r2 = { dataType: "source", sourceDataType: "content" };
            i3._collectResourceTiming && i3._resourceTiming && i3._resourceTiming.length > 0 && (r2.resourceTiming = i3._resourceTiming, i3._resourceTiming = []), i3.fire(new t.Event("data", r2));
          }
        }), this;
      }, i2.prototype.getClusterExpansionZoom = function(t2, e3) {
        return this.actor.send("geojson.getClusterExpansionZoom", { clusterId: t2, source: this.id }, e3), this;
      }, i2.prototype.getClusterChildren = function(t2, e3) {
        return this.actor.send("geojson.getClusterChildren", { clusterId: t2, source: this.id }, e3), this;
      }, i2.prototype.getClusterLeaves = function(t2, e3, i3, r2) {
        return this.actor.send("geojson.getClusterLeaves", { source: this.id, clusterId: t2, limit: e3, offset: i3 }, r2), this;
      }, i2.prototype._updateWorkerData = function(e3) {
        var i3 = this;
        this._loaded = false;
        var r2 = t.extend({}, this.workerOptions);
        r2.geojsonVtOptions.crs = this.map.transform.type;
        var o2 = this._data;
        "string" == typeof o2 ? (r2.request = this.map._requestManager.transformRequest(t.browser.resolveURL(o2), t.ResourceType.Source), r2.request.collectResourceTiming = this._collectResourceTiming) : r2.data = JSON.stringify(o2), this.actor.send(this.type + ".loadData", r2, function(t2, o3) {
          i3._removed || o3 && o3.abandoned || (i3._loaded = true, o3 && o3.resourceTiming && o3.resourceTiming[i3.id] && (i3._resourceTiming = o3.resourceTiming[i3.id].slice(0)), i3.actor.send(i3.type + ".coalesce", { source: r2.source }, null), e3(t2));
        });
      }, i2.prototype.loaded = function() {
        return this._loaded;
      }, i2.prototype.loadTile = function(e3, i3) {
        var r2 = this, o2 = e3.actor ? "reloadTile" : "loadTile";
        e3.actor = this.actor, e3.request = this.actor.send(o2, { type: this.type, uid: e3.uid, tileID: e3.tileID, zoom: e3.tileID.overscaledZ, maxZoom: this.maxzoom, tileSize: this.tileSize, source: this.id, pixelRatio: t.browser.devicePixelRatio, showCollisionBoxes: this.map.showCollisionBoxes, promoteId: this.promoteId }, function(t2, n2) {
          return delete e3.request, e3.unloadVectorData(), e3.aborted ? i3(null) : t2 ? i3(t2) : (e3.loadVectorData(n2, r2.map.painter, "reloadTile" === o2), i3(null));
        });
      }, i2.prototype.abortTile = function(t2) {
        t2.request && (t2.request.cancel(), delete t2.request), t2.aborted = true;
      }, i2.prototype.unloadTile = function(t2) {
        t2.unloadVectorData(), this.actor.send("removeTile", { uid: t2.uid, type: this.type, source: this.id });
      }, i2.prototype.onRemove = function() {
        this._removed = true, this.actor.send("removeSource", { type: this.type, source: this.id });
      }, i2.prototype.serialize = function() {
        return t.extend({}, this._options, { type: this.type, data: this._data });
      }, i2.prototype.hasTransition = function() {
        return false;
      }, i2;
    }(t.Evented), P = t.createLayout([{ name: "a_pos", type: "Int16", components: 2 }, { name: "a_texture_pos", type: "Int16", components: 2 }]), C = function(e2) {
      function i2(t2, i3, r2, o2) {
        e2.call(this), this.id = t2, this.dispatcher = r2, this.coordinates = i3.coordinates, this.type = "image", this.minzoom = 0, this.maxzoom = 22, this.tileSize = 512, this.tiles = {}, this._loaded = false, this.setEventedParent(o2), this.options = i3;
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.load = function(e3, i3) {
        var r2 = this;
        this._loaded = false, this.fire(new t.Event("dataloading", { dataType: "source" })), this.url = this.options.url, t.getImage(this.map._requestManager.transformRequest(this.url, t.ResourceType.Image), function(o2, n2) {
          r2._loaded = true, o2 ? r2.fire(new t.ErrorEvent(o2)) : n2 && (r2.image = n2, e3 && (r2.coordinates = e3), i3 && i3(), r2._finishLoading());
        });
      }, i2.prototype.loaded = function() {
        return this._loaded;
      }, i2.prototype.updateImage = function(t2) {
        var e3 = this;
        return this.image && t2.url ? (this.options.url = t2.url, this.load(t2.coordinates, function() {
          e3.texture = null;
        }), this) : this;
      }, i2.prototype._finishLoading = function() {
        this.map && (this.setCoordinates(this.coordinates), this.fire(new t.Event("data", { dataType: "source", sourceDataType: "metadata" })));
      }, i2.prototype.onAdd = function(t2) {
        this.map = t2, this.load();
      }, i2.prototype.setCoordinates = function(e3) {
        var i3 = this;
        this.coordinates = e3;
        var r2 = e3.map(t.config.parse.Coordinate.fromLngLat);
        this.tileID = function(e4) {
          for (var i4 = 1 / 0, r3 = 1 / 0, o3 = -1 / 0, n2 = -1 / 0, a2 = 0, s2 = e4; a2 < s2.length; a2 += 1) {
            var c2 = s2[a2];
            i4 = Math.min(i4, c2.x), r3 = Math.min(r3, c2.y), o3 = Math.max(o3, c2.x), n2 = Math.max(n2, c2.y);
          }
          var l2 = Math.max(o3 - i4, n2 - r3), u2 = Math.max(0, Math.floor(-Math.log(l2) / Math.LN2)), h2 = Math.pow(2, u2);
          return new t.CanonicalTileID(u2, Math.floor((i4 + o3) / 2 * h2), Math.floor((r3 + n2) / 2 * h2));
        }(r2), this.minzoom = this.maxzoom = this.tileID.z;
        var o2 = r2.map(function(t2) {
          return i3.tileID.getTilePoint(t2)._round();
        });
        return this._boundsArray = new t.StructArrayLayout4i8(), this._boundsArray.emplaceBack(o2[0].x, o2[0].y, 0, 0), this._boundsArray.emplaceBack(o2[1].x, o2[1].y, t.EXTENT, 0), this._boundsArray.emplaceBack(o2[3].x, o2[3].y, 0, t.EXTENT), this._boundsArray.emplaceBack(o2[2].x, o2[2].y, t.EXTENT, t.EXTENT), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire(new t.Event("data", { dataType: "source", sourceDataType: "content" })), this;
      }, i2.prototype.prepare = function() {
        if (0 !== Object.keys(this.tiles).length && this.image) {
          var e3 = this.map.painter.context, i3 = e3.gl;
          for (var r2 in this.boundsBuffer || (this.boundsBuffer = e3.createVertexBuffer(this._boundsArray, P.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture || (this.texture = new t.Texture(e3, this.image, i3.RGBA), this.texture.bind(i3.LINEAR, i3.CLAMP_TO_EDGE)), this.tiles) {
            var o2 = this.tiles[r2];
            "loaded" !== o2.state && (o2.state = "loaded", o2.texture = this.texture);
          }
        }
      }, i2.prototype.loadTile = function(t2, e3) {
        this.tileID && this.tileID.equals(t2.tileID.canonical) ? (this.tiles[String(t2.tileID.wrap)] = t2, t2.buckets = {}, e3(null)) : (t2.state = "errored", e3(null));
      }, i2.prototype.serialize = function() {
        return { type: "image", url: this.options.url, coordinates: this.coordinates };
      }, i2.prototype.hasTransition = function() {
        return false;
      }, i2;
    }(t.Evented), z = function(e2) {
      function i2(t2, i3, r2, o2) {
        e2.call(this, t2, i3, r2, o2), this.roundZoom = true, this.type = "video", this.options = i3;
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.load = function() {
        var e3 = this;
        this._loaded = false;
        var i3 = this.options;
        this.urls = [];
        for (var r2 = 0, o2 = i3.urls; r2 < o2.length; r2 += 1)
          this.urls.push(this.map._requestManager.transformRequest(o2[r2], t.ResourceType.Source).url);
        t.getVideo(this.urls, function(i4, r3) {
          e3._loaded = true, i4 ? e3.fire(new t.ErrorEvent(i4)) : r3 && (e3.video = r3, e3.video.loop = true, e3.video.addEventListener("playing", function() {
            e3.map.triggerRepaint();
          }), e3.map && e3.video.play(), e3._finishLoading());
        });
      }, i2.prototype.pause = function() {
        this.video && this.video.pause();
      }, i2.prototype.play = function() {
        this.video && this.video.play();
      }, i2.prototype.seek = function(e3) {
        if (this.video) {
          var i3 = this.video.seekable;
          e3 < i3.start(0) || e3 > i3.end(0) ? this.fire(new t.ErrorEvent(new t.ValidationError("sources." + this.id, null, "Playback for this video can be set only between the " + i3.start(0) + " and " + i3.end(0) + "-second mark."))) : this.video.currentTime = e3;
        }
      }, i2.prototype.getVideo = function() {
        return this.video;
      }, i2.prototype.onAdd = function(t2) {
        this.map || (this.map = t2, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));
      }, i2.prototype.prepare = function() {
        if (!(0 === Object.keys(this.tiles).length || this.video.readyState < 2)) {
          var e3 = this.map.painter.context, i3 = e3.gl;
          for (var r2 in this.boundsBuffer || (this.boundsBuffer = e3.createVertexBuffer(this._boundsArray, P.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? this.video.paused || (this.texture.bind(i3.LINEAR, i3.CLAMP_TO_EDGE), i3.texSubImage2D(i3.TEXTURE_2D, 0, 0, 0, i3.RGBA, i3.UNSIGNED_BYTE, this.video)) : (this.texture = new t.Texture(e3, this.video, i3.RGBA), this.texture.bind(i3.LINEAR, i3.CLAMP_TO_EDGE)), this.tiles) {
            var o2 = this.tiles[r2];
            "loaded" !== o2.state && (o2.state = "loaded", o2.texture = this.texture);
          }
        }
      }, i2.prototype.serialize = function() {
        return { type: "video", urls: this.urls, coordinates: this.coordinates };
      }, i2.prototype.hasTransition = function() {
        return this.video && !this.video.paused;
      }, i2;
    }(C), D = function(e2) {
      function i2(i3, r2, o2, n2) {
        e2.call(this, i3, r2, o2, n2), r2.coordinates ? Array.isArray(r2.coordinates) && 4 === r2.coordinates.length && !r2.coordinates.some(function(t2) {
          return !Array.isArray(t2) || 2 !== t2.length || t2.some(function(t3) {
            return "number" != typeof t3;
          });
        }) || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, '"coordinates" property must be an array of 4 longitude/latitude array pairs'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, 'missing required property "coordinates"'))), r2.animate && "boolean" != typeof r2.animate && this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, 'optional "animate" property must be a boolean value'))), r2.canvas ? "string" == typeof r2.canvas || r2.canvas instanceof t.window.HTMLCanvasElement || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, '"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + i3, null, 'missing required property "canvas"'))), this.options = r2, this.animate = void 0 === r2.animate || r2.animate;
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.load = function() {
        this._loaded = true, this.canvas || (this.canvas = this.options.canvas instanceof t.window.HTMLCanvasElement ? this.options.canvas : t.window.document.getElementById(this.options.canvas)), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions() ? this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))) : (this.play = function() {
          this._playing = true, this.map.triggerRepaint();
        }, this.pause = function() {
          this._playing && (this.prepare(), this._playing = false);
        }, this._finishLoading());
      }, i2.prototype.getCanvas = function() {
        return this.canvas;
      }, i2.prototype.onAdd = function(t2) {
        this.map = t2, this.load(), this.canvas && this.animate && this.play();
      }, i2.prototype.onRemove = function() {
        this.pause();
      }, i2.prototype.prepare = function() {
        var e3 = false;
        if (this.canvas.width !== this.width && (this.width = this.canvas.width, e3 = true), this.canvas.height !== this.height && (this.height = this.canvas.height, e3 = true), !this._hasInvalidDimensions() && 0 !== Object.keys(this.tiles).length) {
          var i3 = this.map.painter.context, r2 = i3.gl;
          for (var o2 in this.boundsBuffer || (this.boundsBuffer = i3.createVertexBuffer(this._boundsArray, P.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? (e3 || this._playing) && this.texture.update(this.canvas, { premultiply: true }) : this.texture = new t.Texture(i3, this.canvas, r2.RGBA, { premultiply: true }), this.tiles) {
            var n2 = this.tiles[o2];
            "loaded" !== n2.state && (n2.state = "loaded", n2.texture = this.texture);
          }
        }
      }, i2.prototype.serialize = function() {
        return { type: "canvas", coordinates: this.coordinates };
      }, i2.prototype.hasTransition = function() {
        return this._playing;
      }, i2.prototype._hasInvalidDimensions = function() {
        for (var t2 = 0, e3 = [this.canvas.width, this.canvas.height]; t2 < e3.length; t2 += 1) {
          var i3 = e3[t2];
          if (isNaN(i3) || i3 <= 0)
            return true;
        }
        return false;
      }, i2;
    }(C), M = { vector: A, raster: k, "raster-dem": I, geojson: B, video: z, image: C, canvas: D };
    function L(e2, i2) {
      var r2 = t.identity([]);
      return t.translate(r2, r2, [1, 1, 0]), t.scale(r2, r2, [0.5 * e2.width, 0.5 * e2.height, 1]), t.multiply(r2, r2, e2.calculatePosMatrix(i2.toUnwrapped()));
    }
    function R(t2, e2, i2, r2, o2, n2) {
      var a2 = function(t3, e3, i3) {
        if (t3)
          for (var r3 = 0, o3 = t3; r3 < o3.length; r3 += 1) {
            var n3 = e3[o3[r3]];
            if (n3 && n3.source === i3 && "fill-extrusion" === n3.type)
              return true;
          }
        else
          for (var a3 in e3) {
            var s3 = e3[a3];
            if (s3.source === i3 && "fill-extrusion" === s3.type)
              return true;
          }
        return false;
      }(o2 && o2.layers, e2, t2.id), s2 = n2.maxPitchScaleFactor(), c2 = t2.tilesIn(r2, s2, a2);
      c2.sort(F);
      for (var l2 = [], u2 = 0, h2 = c2; u2 < h2.length; u2 += 1) {
        var p2 = h2[u2];
        l2.push({ wrappedTileID: p2.tileID.wrapped().key, queryResults: p2.tile.queryRenderedFeatures(e2, i2, t2._state, p2.queryGeometry, p2.cameraQueryGeometry, p2.scale, o2, n2, s2, L(t2.transform, p2.tileID)) });
      }
      var f2 = function(t3) {
        for (var e3 = {}, i3 = {}, r3 = 0, o3 = t3; r3 < o3.length; r3 += 1) {
          var n3 = o3[r3], a3 = n3.queryResults, s3 = n3.wrappedTileID, c3 = i3[s3] = i3[s3] || {};
          for (var l3 in a3)
            for (var u3 = a3[l3], h3 = c3[l3] = c3[l3] || {}, p3 = e3[l3] = e3[l3] || [], f3 = 0, d3 = u3; f3 < d3.length; f3 += 1) {
              var _3 = d3[f3];
              h3[_3.featureIndex] || (h3[_3.featureIndex] = true, p3.push(_3));
            }
        }
        return e3;
      }(l2);
      for (var d2 in f2)
        f2[d2].forEach(function(e3) {
          var i3 = e3.feature, r3 = t2.getFeatureState(i3.layer["source-layer"], i3.id);
          i3.source = i3.layer.source, i3.layer["source-layer"] && (i3.sourceLayer = i3.layer["source-layer"]), i3.state = r3;
        });
      return f2;
    }
    function O(t2, e2) {
      for (var i2 = t2.getRenderableIds().map(function(e3) {
        return t2.getTileByID(e3);
      }), r2 = [], o2 = {}, n2 = 0; n2 < i2.length; n2++) {
        var a2 = i2[n2], s2 = a2.tileID.canonical.key;
        o2[s2] || (o2[s2] = true, a2.querySourceFeatures(r2, e2));
      }
      return r2;
    }
    function F(t2, e2) {
      var i2 = t2.tileID, r2 = e2.tileID;
      return i2.overscaledZ - r2.overscaledZ || i2.canonical.y - r2.canonical.y || i2.wrap - r2.wrap || i2.canonical.x - r2.canonical.x;
    }
    var U = function(t2, e2) {
      this.max = t2, this.onRemove = e2, this.reset();
    };
    U.prototype.reset = function() {
      for (var t2 in this.data)
        for (var e2 = 0, i2 = this.data[t2]; e2 < i2.length; e2 += 1) {
          var r2 = i2[e2];
          r2.timeout && clearTimeout(r2.timeout), this.onRemove(r2.value);
        }
      return this.data = {}, this.order = [], this;
    }, U.prototype.add = function(t2, e2, i2) {
      var r2 = this, o2 = t2.wrapped().key;
      void 0 === this.data[o2] && (this.data[o2] = []);
      var n2 = { value: e2, timeout: void 0 };
      if (void 0 !== i2 && (n2.timeout = setTimeout(function() {
        r2.remove(t2, n2);
      }, i2)), this.data[o2].push(n2), this.order.push(o2), this.order.length > this.max) {
        var a2 = this._getAndRemoveByKey(this.order[0]);
        a2 && this.onRemove(a2);
      }
      return this;
    }, U.prototype.has = function(t2) {
      return t2.wrapped().key in this.data;
    }, U.prototype.getAndRemove = function(t2) {
      return this.has(t2) ? this._getAndRemoveByKey(t2.wrapped().key) : null;
    }, U.prototype._getAndRemoveByKey = function(t2) {
      var e2 = this.data[t2].shift();
      return e2.timeout && clearTimeout(e2.timeout), 0 === this.data[t2].length && delete this.data[t2], this.order.splice(this.order.indexOf(t2), 1), e2.value;
    }, U.prototype.getByKey = function(t2) {
      var e2 = this.data[t2];
      return e2 ? e2[0].value : null;
    }, U.prototype.get = function(t2) {
      return this.has(t2) ? this.data[t2.wrapped().key][0].value : null;
    }, U.prototype.remove = function(t2, e2) {
      if (!this.has(t2))
        return this;
      var i2 = t2.wrapped().key, r2 = void 0 === e2 ? 0 : this.data[i2].indexOf(e2), o2 = this.data[i2][r2];
      return this.data[i2].splice(r2, 1), o2.timeout && clearTimeout(o2.timeout), 0 === this.data[i2].length && delete this.data[i2], this.onRemove(o2.value), this.order.splice(this.order.indexOf(i2), 1), this;
    }, U.prototype.setMaxSize = function(t2) {
      for (this.max = t2; this.order.length > this.max; ) {
        var e2 = this._getAndRemoveByKey(this.order[0]);
        e2 && this.onRemove(e2);
      }
      return this;
    }, U.prototype.filter = function(t2) {
      var e2 = [];
      for (var i2 in this.data)
        for (var r2 = 0, o2 = this.data[i2]; r2 < o2.length; r2 += 1) {
          var n2 = o2[r2];
          t2(n2.value) || e2.push(n2);
        }
      for (var a2 = 0, s2 = e2; a2 < s2.length; a2 += 1) {
        var c2 = s2[a2];
        this.remove(c2.value.tileID, c2);
      }
    };
    var N = function(t2, e2, i2) {
      this.context = t2;
      var r2 = t2.gl;
      this.buffer = r2.createBuffer(), this.dynamicDraw = Boolean(i2), this.context.unbindVAO(), t2.bindElementBuffer.set(this.buffer), r2.bufferData(r2.ELEMENT_ARRAY_BUFFER, e2.arrayBuffer, this.dynamicDraw ? r2.DYNAMIC_DRAW : r2.STATIC_DRAW), this.dynamicDraw || delete e2.arrayBuffer;
    };
    N.prototype.bind = function() {
      this.context.bindElementBuffer.set(this.buffer);
    }, N.prototype.updateData = function(t2) {
      var e2 = this.context.gl;
      this.context.unbindVAO(), this.bind(), e2.bufferSubData(e2.ELEMENT_ARRAY_BUFFER, 0, t2.arrayBuffer);
    }, N.prototype.destroy = function() {
      this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
    };
    var j = { Int8: "BYTE", Uint8: "UNSIGNED_BYTE", Int16: "SHORT", Uint16: "UNSIGNED_SHORT", Int32: "INT", Uint32: "UNSIGNED_INT", Float32: "FLOAT" }, V = function(t2, e2, i2, r2) {
      this.length = e2.length, this.attributes = i2, this.itemSize = e2.bytesPerElement, this.dynamicDraw = r2, this.context = t2;
      var o2 = t2.gl;
      this.buffer = o2.createBuffer(), t2.bindVertexBuffer.set(this.buffer), o2.bufferData(o2.ARRAY_BUFFER, e2.arrayBuffer, this.dynamicDraw ? o2.DYNAMIC_DRAW : o2.STATIC_DRAW), this.dynamicDraw || delete e2.arrayBuffer;
    };
    V.prototype.bind = function() {
      this.context.bindVertexBuffer.set(this.buffer);
    }, V.prototype.updateData = function(t2) {
      var e2 = this.context.gl;
      this.bind(), e2.bufferSubData(e2.ARRAY_BUFFER, 0, t2.arrayBuffer);
    }, V.prototype.enableAttributes = function(t2, e2) {
      for (var i2 = 0; i2 < this.attributes.length; i2++) {
        var r2 = e2.attributes[this.attributes[i2].name];
        void 0 !== r2 && t2.enableVertexAttribArray(r2);
      }
    }, V.prototype.setVertexAttribPointers = function(t2, e2, i2) {
      for (var r2 = 0; r2 < this.attributes.length; r2++) {
        var o2 = this.attributes[r2], n2 = e2.attributes[o2.name];
        void 0 !== n2 && t2.vertexAttribPointer(n2, o2.components, t2[j[o2.type]], false, this.itemSize, o2.offset + this.itemSize * (i2 || 0));
      }
    }, V.prototype.destroy = function() {
      this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
    };
    var q = function(t2) {
      this.gl = t2.gl, this.default = this.getDefault(), this.current = this.default, this.dirty = false;
    };
    q.prototype.get = function() {
      return this.current;
    }, q.prototype.set = function(t2) {
    }, q.prototype.getDefault = function() {
      return this.default;
    }, q.prototype.setDefault = function() {
      this.set(this.default);
    };
    var Z = function(e2) {
      function i2() {
        e2.apply(this, arguments);
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.getDefault = function() {
        return t.Color.transparent;
      }, i2.prototype.set = function(t2) {
        var e3 = this.current;
        (t2.r !== e3.r || t2.g !== e3.g || t2.b !== e3.b || t2.a !== e3.a || this.dirty) && (this.gl.clearColor(t2.r, t2.g, t2.b, t2.a), this.current = t2, this.dirty = false);
      }, i2;
    }(q), G = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return 1;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.clearDepth(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), H = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return 0;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.clearStencil(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), W = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return [true, true, true, true];
      }, e2.prototype.set = function(t3) {
        var e3 = this.current;
        (t3[0] !== e3[0] || t3[1] !== e3[1] || t3[2] !== e3[2] || t3[3] !== e3[3] || this.dirty) && (this.gl.colorMask(t3[0], t3[1], t3[2], t3[3]), this.current = t3, this.dirty = false);
      }, e2;
    }(q), X = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return true;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.depthMask(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), K = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return 255;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.stencilMask(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), Y = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return { func: this.gl.ALWAYS, ref: 0, mask: 255 };
      }, e2.prototype.set = function(t3) {
        var e3 = this.current;
        (t3.func !== e3.func || t3.ref !== e3.ref || t3.mask !== e3.mask || this.dirty) && (this.gl.stencilFunc(t3.func, t3.ref, t3.mask), this.current = t3, this.dirty = false);
      }, e2;
    }(q), J = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        var t3 = this.gl;
        return [t3.KEEP, t3.KEEP, t3.KEEP];
      }, e2.prototype.set = function(t3) {
        var e3 = this.current;
        (t3[0] !== e3[0] || t3[1] !== e3[1] || t3[2] !== e3[2] || this.dirty) && (this.gl.stencilOp(t3[0], t3[1], t3[2]), this.current = t3, this.dirty = false);
      }, e2;
    }(q), Q = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return false;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          t3 ? e3.enable(e3.STENCIL_TEST) : e3.disable(e3.STENCIL_TEST), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), $ = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return [0, 1];
      }, e2.prototype.set = function(t3) {
        var e3 = this.current;
        (t3[0] !== e3[0] || t3[1] !== e3[1] || this.dirty) && (this.gl.depthRange(t3[0], t3[1]), this.current = t3, this.dirty = false);
      }, e2;
    }(q), tt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return false;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          t3 ? e3.enable(e3.DEPTH_TEST) : e3.disable(e3.DEPTH_TEST), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), et = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return this.gl.LESS;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.depthFunc(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), it = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return false;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          t3 ? e3.enable(e3.BLEND) : e3.disable(e3.BLEND), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), rt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        var t3 = this.gl;
        return [t3.ONE, t3.ZERO];
      }, e2.prototype.set = function(t3) {
        var e3 = this.current;
        (t3[0] !== e3[0] || t3[1] !== e3[1] || this.dirty) && (this.gl.blendFunc(t3[0], t3[1]), this.current = t3, this.dirty = false);
      }, e2;
    }(q), ot = function(e2) {
      function i2() {
        e2.apply(this, arguments);
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.getDefault = function() {
        return t.Color.transparent;
      }, i2.prototype.set = function(t2) {
        var e3 = this.current;
        (t2.r !== e3.r || t2.g !== e3.g || t2.b !== e3.b || t2.a !== e3.a || this.dirty) && (this.gl.blendColor(t2.r, t2.g, t2.b, t2.a), this.current = t2, this.dirty = false);
      }, i2;
    }(q), nt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return this.gl.FUNC_ADD;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.blendEquation(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), at = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return false;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          t3 ? e3.enable(e3.CULL_FACE) : e3.disable(e3.CULL_FACE), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), st = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return this.gl.BACK;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.cullFace(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), ct = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return this.gl.CCW;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.frontFace(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), lt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.useProgram(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), ut = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return this.gl.TEXTURE0;
      }, e2.prototype.set = function(t3) {
        (t3 !== this.current || this.dirty) && (this.gl.activeTexture(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), ht = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        var t3 = this.gl;
        return [0, 0, t3.drawingBufferWidth, t3.drawingBufferHeight];
      }, e2.prototype.set = function(t3) {
        var e3 = this.current;
        (t3[0] !== e3[0] || t3[1] !== e3[1] || t3[2] !== e3[2] || t3[3] !== e3[3] || this.dirty) && (this.gl.viewport(t3[0], t3[1], t3[2], t3[3]), this.current = t3, this.dirty = false);
      }, e2;
    }(q), pt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          e3.bindFramebuffer(e3.FRAMEBUFFER, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), ft = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          e3.bindRenderbuffer(e3.RENDERBUFFER, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), dt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          e3.bindTexture(e3.TEXTURE_2D, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), _t = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          e3.bindBuffer(e3.ARRAY_BUFFER, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), mt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2.prototype.set = function(t3) {
        var e3 = this.gl;
        e3.bindBuffer(e3.ELEMENT_ARRAY_BUFFER, t3), this.current = t3, this.dirty = false;
      }, e2;
    }(q), gt = function(t2) {
      function e2(e3) {
        t2.call(this, e3), this.vao = e3.extVertexArrayObject;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2.prototype.set = function(t3) {
        this.vao && (t3 !== this.current || this.dirty) && (this.vao.bindVertexArrayOES(t3), this.current = t3, this.dirty = false);
      }, e2;
    }(q), vt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return 4;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          e3.pixelStorei(e3.UNPACK_ALIGNMENT, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), yt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return false;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          e3.pixelStorei(e3.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), bt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return false;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          var e3 = this.gl;
          e3.pixelStorei(e3.UNPACK_FLIP_Y_WEBGL, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(q), wt = function(t2) {
      function e2(e3, i2) {
        t2.call(this, e3), this.context = e3, this.parent = i2;
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.getDefault = function() {
        return null;
      }, e2;
    }(q), xt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.setDirty = function() {
        this.dirty = true;
      }, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          this.context.bindFramebuffer.set(this.parent);
          var e3 = this.gl;
          e3.framebufferTexture2D(e3.FRAMEBUFFER, e3.COLOR_ATTACHMENT0, e3.TEXTURE_2D, t3, 0), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(wt), Tt = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.set = function(t3) {
        if (t3 !== this.current || this.dirty) {
          this.context.bindFramebuffer.set(this.parent);
          var e3 = this.gl;
          e3.framebufferRenderbuffer(e3.FRAMEBUFFER, e3.DEPTH_ATTACHMENT, e3.RENDERBUFFER, t3), this.current = t3, this.dirty = false;
        }
      }, e2;
    }(wt), St = function(t2, e2, i2, r2) {
      this.context = t2, this.width = e2, this.height = i2;
      var o2 = this.framebuffer = t2.gl.createFramebuffer();
      this.colorAttachment = new xt(t2, o2), r2 && (this.depthAttachment = new Tt(t2, o2));
    };
    St.prototype.destroy = function() {
      var t2 = this.context.gl, e2 = this.colorAttachment.get();
      if (e2 && t2.deleteTexture(e2), this.depthAttachment) {
        var i2 = this.depthAttachment.get();
        i2 && t2.deleteRenderbuffer(i2);
      }
      t2.deleteFramebuffer(this.framebuffer);
    };
    var Et = function(t2, e2, i2) {
      this.func = t2, this.mask = e2, this.range = i2;
    };
    Et.ReadOnly = false, Et.ReadWrite = true, Et.disabled = new Et(519, Et.ReadOnly, [0, 1]);
    var At = function(t2, e2, i2, r2, o2, n2) {
      this.test = t2, this.ref = e2, this.mask = i2, this.fail = r2, this.depthFail = o2, this.pass = n2;
    };
    At.disabled = new At({ func: 519, mask: 0 }, 0, 0, 7680, 7680, 7680);
    var kt = function(t2, e2, i2) {
      this.blendFunction = t2, this.blendColor = e2, this.mask = i2;
    };
    kt.disabled = new kt(kt.Replace = [1, 0], t.Color.transparent, [false, false, false, false]), kt.unblended = new kt(kt.Replace, t.Color.transparent, [true, true, true, true]), kt.alphaBlended = new kt([1, 771], t.Color.transparent, [true, true, true, true]);
    var It = function(t2, e2, i2) {
      this.enable = t2, this.mode = e2, this.frontFace = i2;
    };
    It.disabled = new It(false, 1029, 2305), It.backCCW = new It(true, 1029, 2305);
    var Bt = function(t2) {
      this.gl = t2, this.extVertexArrayObject = this.gl.getExtension("OES_vertex_array_object"), this.clearColor = new Z(this), this.clearDepth = new G(this), this.clearStencil = new H(this), this.colorMask = new W(this), this.depthMask = new X(this), this.stencilMask = new K(this), this.stencilFunc = new Y(this), this.stencilOp = new J(this), this.stencilTest = new Q(this), this.depthRange = new $(this), this.depthTest = new tt(this), this.depthFunc = new et(this), this.blend = new it(this), this.blendFunc = new rt(this), this.blendColor = new ot(this), this.blendEquation = new nt(this), this.cullFace = new at(this), this.cullFaceSide = new st(this), this.frontFace = new ct(this), this.program = new lt(this), this.activeTexture = new ut(this), this.viewport = new ht(this), this.bindFramebuffer = new pt(this), this.bindRenderbuffer = new ft(this), this.bindTexture = new dt(this), this.bindVertexBuffer = new _t(this), this.bindElementBuffer = new mt(this), this.bindVertexArrayOES = this.extVertexArrayObject && new gt(this), this.pixelStoreUnpack = new vt(this), this.pixelStoreUnpackPremultiplyAlpha = new yt(this), this.pixelStoreUnpackFlipY = new bt(this), this.extTextureFilterAnisotropic = t2.getExtension("EXT_texture_filter_anisotropic") || t2.getExtension("MOZ_EXT_texture_filter_anisotropic") || t2.getExtension("WEBKIT_EXT_texture_filter_anisotropic"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t2.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.extTextureHalfFloat = t2.getExtension("OES_texture_half_float"), this.extTextureHalfFloat && (t2.getExtension("OES_texture_half_float_linear"), this.extRenderToTextureHalfFloat = t2.getExtension("EXT_color_buffer_half_float")), this.extTimerQuery = t2.getExtension("EXT_disjoint_timer_query");
    };
    Bt.prototype.setDefault = function() {
      this.unbindVAO(), this.clearColor.setDefault(), this.clearDepth.setDefault(), this.clearStencil.setDefault(), this.colorMask.setDefault(), this.depthMask.setDefault(), this.stencilMask.setDefault(), this.stencilFunc.setDefault(), this.stencilOp.setDefault(), this.stencilTest.setDefault(), this.depthRange.setDefault(), this.depthTest.setDefault(), this.depthFunc.setDefault(), this.blend.setDefault(), this.blendFunc.setDefault(), this.blendColor.setDefault(), this.blendEquation.setDefault(), this.cullFace.setDefault(), this.cullFaceSide.setDefault(), this.frontFace.setDefault(), this.program.setDefault(), this.activeTexture.setDefault(), this.bindFramebuffer.setDefault(), this.pixelStoreUnpack.setDefault(), this.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.pixelStoreUnpackFlipY.setDefault();
    }, Bt.prototype.setDirty = function() {
      this.clearColor.dirty = true, this.clearDepth.dirty = true, this.clearStencil.dirty = true, this.colorMask.dirty = true, this.depthMask.dirty = true, this.stencilMask.dirty = true, this.stencilFunc.dirty = true, this.stencilOp.dirty = true, this.stencilTest.dirty = true, this.depthRange.dirty = true, this.depthTest.dirty = true, this.depthFunc.dirty = true, this.blend.dirty = true, this.blendFunc.dirty = true, this.blendColor.dirty = true, this.blendEquation.dirty = true, this.cullFace.dirty = true, this.cullFaceSide.dirty = true, this.frontFace.dirty = true, this.program.dirty = true, this.activeTexture.dirty = true, this.viewport.dirty = true, this.bindFramebuffer.dirty = true, this.bindRenderbuffer.dirty = true, this.bindTexture.dirty = true, this.bindVertexBuffer.dirty = true, this.bindElementBuffer.dirty = true, this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = true), this.pixelStoreUnpack.dirty = true, this.pixelStoreUnpackPremultiplyAlpha.dirty = true, this.pixelStoreUnpackFlipY.dirty = true;
    }, Bt.prototype.createIndexBuffer = function(t2, e2) {
      return new N(this, t2, e2);
    }, Bt.prototype.createVertexBuffer = function(t2, e2, i2) {
      return new V(this, t2, e2, i2);
    }, Bt.prototype.createRenderbuffer = function(t2, e2, i2) {
      var r2 = this.gl, o2 = r2.createRenderbuffer();
      return this.bindRenderbuffer.set(o2), r2.renderbufferStorage(r2.RENDERBUFFER, t2, e2, i2), this.bindRenderbuffer.set(null), o2;
    }, Bt.prototype.createFramebuffer = function(t2, e2, i2) {
      return new St(this, t2, e2, i2);
    }, Bt.prototype.clear = function(t2) {
      var e2 = t2.color, i2 = t2.depth, r2 = this.gl, o2 = 0;
      e2 && (o2 |= r2.COLOR_BUFFER_BIT, this.clearColor.set(e2), this.colorMask.set([true, true, true, true])), void 0 !== i2 && (o2 |= r2.DEPTH_BUFFER_BIT, this.depthRange.set([0, 1]), this.clearDepth.set(i2), this.depthMask.set(true)), r2.clear(o2);
    }, Bt.prototype.setCullFace = function(t2) {
      false === t2.enable ? this.cullFace.set(false) : (this.cullFace.set(true), this.cullFaceSide.set(t2.mode), this.frontFace.set(t2.frontFace));
    }, Bt.prototype.setDepthMode = function(t2) {
      t2.func !== this.gl.ALWAYS || t2.mask ? (this.depthTest.set(true), this.depthFunc.set(t2.func), this.depthMask.set(t2.mask), this.depthRange.set(t2.range)) : this.depthTest.set(false);
    }, Bt.prototype.setStencilMode = function(t2) {
      t2.test.func !== this.gl.ALWAYS || t2.mask ? (this.stencilTest.set(true), this.stencilMask.set(t2.mask), this.stencilOp.set([t2.fail, t2.depthFail, t2.pass]), this.stencilFunc.set({ func: t2.test.func, ref: t2.ref, mask: t2.test.mask })) : this.stencilTest.set(false);
    }, Bt.prototype.setColorMode = function(e2) {
      t.deepEqual(e2.blendFunction, kt.Replace) ? this.blend.set(false) : (this.blend.set(true), this.blendFunc.set(e2.blendFunction), this.blendColor.set(e2.blendColor)), this.colorMask.set(e2.mask);
    }, Bt.prototype.unbindVAO = function() {
      this.extVertexArrayObject && this.bindVertexArrayOES.set(null);
    };
    var Pt = function(e2) {
      function i2(i3, r2, o2) {
        var n2 = this;
        e2.call(this), this.id = i3, this._onlySymbols = o2, r2.on("data", function(t2) {
          "source" === t2.dataType && "metadata" === t2.sourceDataType && (n2._sourceLoaded = true), n2._sourceLoaded && !n2._paused && "source" === t2.dataType && "content" === t2.sourceDataType && (n2.reload(), n2.transform && n2.update(n2.transform));
        }), r2.on("error", function() {
          n2._sourceErrored = true;
        }), this._source = r2, this._tiles = {}, this._cache = new U(0, this._unloadTile.bind(this)), this._timers = {}, this._cacheTimers = {}, this._maxTileCacheSize = null, this._loadedParentTiles = {}, this._coveredTiles = {}, this._state = new t.SourceFeatureState(), this._mergeTile = [], this._mergeCallback = [];
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.onAdd = function(t2) {
        this.map = t2, this._maxTileCacheSize = t2 ? t2._maxTileCacheSize : null;
      }, i2.prototype.onRemove = function(t2) {
        this._source && this._source.onRemove && this._source.onRemove(t2);
      }, i2.prototype.loaded = function() {
        if (this._sourceErrored)
          return true;
        if (!this._sourceLoaded)
          return false;
        if (!this._source.loaded())
          return false;
        for (var t2 in this._tiles) {
          var e3 = this._tiles[t2];
          if ("loaded" !== e3.state && "errored" !== e3.state)
            return false;
        }
        return true;
      }, i2.prototype.getSource = function() {
        return this._source;
      }, i2.prototype.pause = function() {
        this._paused = true;
      }, i2.prototype.resume = function() {
        if (this._paused) {
          var t2 = this._shouldReloadOnResume;
          this._paused = false, this._shouldReloadOnResume = false, t2 && this.reload(), this.transform && this.update(this.transform);
        }
      }, i2.prototype._loadTile = function(t2, e3) {
        return t2.isSymbolTile = this._onlySymbols, this._source.loadTile(t2, e3);
      }, i2.prototype._unloadTile = function(t2) {
        if (this._source.unloadTile)
          return this._source.unloadTile(t2, function() {
          });
      }, i2.prototype._abortTile = function(t2) {
        if (this._source.abortTile)
          return this._source.abortTile(t2, function() {
          });
      }, i2.prototype.serialize = function() {
        return this._source.serialize();
      }, i2.prototype.prepare = function(t2) {
        for (var e3 in this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null), this._tiles) {
          var i3 = this._tiles[e3];
          i3.upload(t2), i3.prepare(this.map.style.imageManager);
        }
      }, i2.prototype.getIds = function() {
        return t.values(this._tiles).map(function(t2) {
          return t2.tileID;
        }).sort(Ct).map(function(t2) {
          return t2.key;
        });
      }, i2.prototype.getRenderableIds = function(e3) {
        var i3 = this, r2 = [];
        for (var o2 in this._tiles)
          this._isIdRenderable(o2, e3) && r2.push(this._tiles[o2]);
        return e3 ? r2.sort(function(e4, r3) {
          var o3 = e4.tileID, n2 = r3.tileID, a2 = new t.Point(o3.canonical.x, o3.canonical.y)._rotate(i3.transform.angle), s2 = new t.Point(n2.canonical.x, n2.canonical.y)._rotate(i3.transform.angle);
          return o3.overscaledZ - n2.overscaledZ || s2.y - a2.y || s2.x - a2.x;
        }).map(function(t2) {
          return t2.tileID.key;
        }) : r2.map(function(t2) {
          return t2.tileID;
        }).sort(Ct).map(function(t2) {
          return t2.key;
        });
      }, i2.prototype.hasRenderableParent = function(t2) {
        var e3 = this.findLoadedParent(t2, 0);
        return !!e3 && this._isIdRenderable(e3.tileID.key);
      }, i2.prototype._isIdRenderable = function(t2, e3) {
        return this._tiles[t2] && this._tiles[t2].hasData() && !this._coveredTiles[t2] && (e3 || !this._tiles[t2].holdingForFade());
      }, i2.prototype.reload = function() {
        if (this._paused)
          this._shouldReloadOnResume = true;
        else
          for (var t2 in this._cache.reset(), this._tiles)
            "errored" !== this._tiles[t2].state && this._reloadTile(t2, "reloading");
      }, i2.prototype._reloadTile = function(t2, e3) {
        var i3 = this._tiles[t2];
        i3 && ("loading" !== i3.state && (i3.state = e3), this._loadTile(i3, this._tileLoaded.bind(this, i3, t2, e3)));
      }, i2.prototype._tileLoaded = function(e3, i3, r2, o2) {
        if (o2)
          return e3.state = "errored", void (404 !== o2.status ? this._source.fire(new t.ErrorEvent(o2, { tile: e3 })) : this.update(this.transform));
        e3.timeAdded = t.browser.now(), "expired" === r2 && (e3.refreshedUponExpiration = true), this._setTileReloadTimer(i3, e3), "raster-dem" === this.getSource().type && e3.dem && this._backfillDEM(e3), this._state.initializeTileState(e3, this.map ? this.map.painter : null), this._source.fire(new t.Event("data", { dataType: "source", tile: e3, coord: e3.tileID }));
      }, i2.prototype._backfillDEM = function(t2) {
        for (var e3 = this.getRenderableIds(), i3 = 0; i3 < e3.length; i3++) {
          var r2 = e3[i3];
          if (t2.neighboringTiles && t2.neighboringTiles[r2]) {
            var o2 = this.getTileByID(r2);
            n2(t2, o2), n2(o2, t2);
          }
        }
        function n2(t3, e4) {
          t3.needsHillshadePrepare = true;
          var i4 = e4.tileID.canonical.x - t3.tileID.canonical.x, r3 = e4.tileID.canonical.y - t3.tileID.canonical.y, o3 = Math.pow(2, t3.tileID.canonical.z), n3 = e4.tileID.key;
          0 === i4 && 0 === r3 || Math.abs(r3) > 1 || (Math.abs(i4) > 1 && (1 === Math.abs(i4 + o3) ? i4 += o3 : 1 === Math.abs(i4 - o3) && (i4 -= o3)), e4.dem && t3.dem && (t3.dem.backfillBorder(e4.dem, i4, r3), t3.neighboringTiles && t3.neighboringTiles[n3] && (t3.neighboringTiles[n3].backfilled = true)));
        }
      }, i2.prototype.getTile = function(t2) {
        return this.getTileByID(t2.key);
      }, i2.prototype.getTileByID = function(t2) {
        return this._tiles[t2];
      }, i2.prototype._retainLoadedChildren = function(t2, e3, i3, r2) {
        for (var o2 in this._tiles) {
          var n2 = this._tiles[o2];
          if (!(r2[o2] || !n2.hasData() || n2.tileID.overscaledZ <= e3 || n2.tileID.overscaledZ > i3)) {
            for (var a2 = n2.tileID; n2 && n2.tileID.overscaledZ > e3 + 1; ) {
              var s2 = n2.tileID.scaledTo(n2.tileID.overscaledZ, -1);
              (n2 = this._tiles[s2.key]) && n2.hasData() && (a2 = s2);
            }
            for (var c2 = a2; c2.overscaledZ > e3; )
              if (t2[(c2 = c2.scaledTo(c2.overscaledZ, -1)).key]) {
                r2[a2.key] = a2;
                break;
              }
          }
        }
      }, i2.prototype.findLoadedParent = function(t2, e3) {
        if (t2.key in this._loadedParentTiles) {
          var i3 = this._loadedParentTiles[t2.key];
          return i3 && i3.tileID.overscaledZ >= e3 ? i3 : null;
        }
        for (var r2 = t2.overscaledZ - 1; r2 >= e3; r2--) {
          var o2 = t2.scaledTo(r2), n2 = this._getLoadedTile(o2);
          if (n2)
            return n2;
        }
      }, i2.prototype._getLoadedTile = function(t2) {
        var e3 = this._tiles[t2.key];
        return e3 && e3.hasData() ? e3 : this._cache.getByKey(t2.wrapped().key);
      }, i2.prototype.updateCacheSize = function(t2, e3) {
        e3 = e3 || this._source.tileSize;
        var i3 = Math.ceil(t2.width / e3) + 1, r2 = Math.ceil(t2.height / e3) + 1, o2 = Math.floor(i3 * r2 * 5), n2 = "number" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, o2) : o2;
        this._cache.setMaxSize(n2);
      }, i2.prototype.handleWrapJump = function(t2) {
        var e3 = Math.round((t2 - (void 0 === this._prevLng ? t2 : this._prevLng)) / 360);
        if (this._prevLng = t2, e3) {
          var i3 = {};
          for (var r2 in this._tiles) {
            var o2 = this._tiles[r2];
            o2.tileID = o2.tileID.unwrapTo(o2.tileID.wrap + e3), i3[o2.tileID.key] = o2;
          }
          for (var n2 in this._tiles = i3, this._timers)
            clearTimeout(this._timers[n2]), delete this._timers[n2];
          for (var a2 in this._tiles)
            this._setTileReloadTimer(a2, this._tiles[a2]);
        }
      }, i2.prototype.update = function(e3, r2) {
        var o2 = this;
        if (this.transform = e3, this._sourceLoaded && !this._paused) {
          var n2;
          this.updateCacheSize(e3, r2), this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used ? this._source.tileID ? n2 = e3.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e4) {
            return new t.OverscaledTileID(e4.canonical.z, e4.wrap, e4.canonical.z, e4.canonical.x, e4.canonical.y, e4.reference, e4.sourceID, e4.zoomRule, e4._tileY, e4._mapZoom);
          }) : (n2 = e3.coveringTiles({ tileSize: this._source.tileSize, minzoom: this._source.minzoom, maxzoom: this._source.maxzoom, roundZoom: this._source.roundZoom, reparseOverscaled: this._source.reparseOverscaled, reference: this._source.reference, zoomRule: this._source.zoomRule, sourceID: this._source.id }), this._source.hasTile && (n2 = n2.filter(function(t2) {
            return o2._source.hasTile(t2);
          }))) : n2 = [];
          var a2 = e3.coveringZoomLevel(this._source), s2 = Math.max(a2 - i2.maxOverzooming, this._source.minzoom), c2 = Math.max(a2 + i2.maxUnderzooming, this._source.minzoom), l2 = this._updateRetainedTiles(n2, a2);
          if (zt(this._source.type)) {
            for (var u2 = {}, h2 = {}, p2 = 0, f2 = Object.keys(l2); p2 < f2.length; p2 += 1) {
              var d2 = f2[p2], _3 = l2[d2], m2 = this._tiles[d2];
              if (m2 && !(m2.fadeEndTime && m2.fadeEndTime <= t.browser.now())) {
                var g2 = this.findLoadedParent(_3, s2);
                g2 && (this._addTile(g2.tileID), u2[g2.tileID.key] = g2.tileID), h2[d2] = _3;
              }
            }
            for (var v2 in this._retainLoadedChildren(h2, a2, c2, l2), u2)
              l2[v2] || (this._coveredTiles[v2] = true, l2[v2] = u2[v2]);
          }
          for (var y2 in l2)
            this._tiles[y2].clearFadeHold();
          for (var b2 = 0, w2 = t.keysDifference(this._tiles, l2); b2 < w2.length; b2 += 1) {
            var x2 = w2[b2], T2 = this._tiles[x2];
            T2.hasSymbolBuckets && !T2.holdingForFade() ? T2.setHoldDuration(this.map._fadeDuration) : T2.hasSymbolBuckets && !T2.symbolFadeFinished() || this._removeTile(x2);
          }
          this._updateLoadedParentTileCache(), n2 = [], this._onlySymbols && this._source.afterUpdate && this._source.afterUpdate();
        }
      }, i2.prototype.releaseSymbolFadeTiles = function() {
        for (var t2 in this._tiles)
          this._tiles[t2].holdingForFade() && this._removeTile(t2);
      }, i2.prototype._updateRetainedTiles = function(t2, e3) {
        for (var r2 = "Sg4326" == this._source.reference, o2 = {}, n2 = {}, a2 = Math.max(e3 - i2.maxOverzooming, this._source.minzoom), s2 = Math.max(e3 + i2.maxUnderzooming, this._source.minzoom), c2 = {}, l2 = 0, u2 = t2; l2 < u2.length; l2 += 1) {
          var h2 = u2[l2], p2 = this._addTile(h2);
          o2[h2.key] = h2, r2 && this._tiles[h2.key] && "reloading" != p2.state && (p2.tileZoom != e3 || p2.tileID._mapZoom != e3) && (p2.tileZoom = e3, p2.tileID._mapZoom = e3, this._reloadTile(h2.key, "reloading")), p2.hasData() || e3 < this._source.maxzoom && (c2[h2.key] = h2);
        }
        this._retainLoadedChildren(c2, e3, s2, o2);
        for (var f2 = 0, d2 = t2; f2 < d2.length; f2 += 1) {
          var _3 = d2[f2], m2 = this._tiles[_3.key];
          if (!m2.hasData()) {
            if (e3 + 1 > this._source.maxzoom) {
              var g2 = _3.children(this._source.maxzoom)[0], v2 = this.getTile(g2);
              if (v2 && v2.hasData()) {
                o2[g2.key] = g2;
                continue;
              }
            } else {
              var y2 = _3.children(this._source.maxzoom);
              if (o2[y2[0].key] && o2[y2[1].key] && o2[y2[2].key] && o2[y2[3].key])
                continue;
            }
            for (var b2 = m2.wasRequested(), w2 = _3.overscaledZ - 1; w2 >= a2; --w2) {
              var x2 = _3.scaledTo(w2);
              if (n2[x2.key])
                break;
              if (n2[x2.key] = true, !(m2 = this.getTile(x2)) && b2 && (m2 = this._addTile(x2)), m2 && (o2[x2.key] = x2, b2 = m2.wasRequested(), m2.hasData()))
                break;
            }
          }
        }
        return o2;
      }, i2.prototype._updateLoadedParentTileCache = function() {
        for (var t2 in this._loadedParentTiles = {}, this._tiles) {
          for (var e3 = [], i3 = void 0, r2 = this._tiles[t2].tileID; r2.overscaledZ > 0; ) {
            if (r2.key in this._loadedParentTiles) {
              i3 = this._loadedParentTiles[r2.key];
              break;
            }
            e3.push(r2.key);
            var o2 = r2.scaledTo(r2.overscaledZ, -1);
            if (i3 = this._getLoadedTile(o2))
              break;
            r2 = o2;
          }
          for (var n2 = 0, a2 = e3; n2 < a2.length; n2 += 1)
            this._loadedParentTiles[a2[n2]] = i3;
        }
      }, i2.prototype._addTile = function(e3) {
        var i3 = this._tiles[e3.key];
        if (i3)
          return i3;
        (i3 = this._cache.getAndRemove(e3)) && (this._setTileReloadTimer(e3.key, i3), i3.tileID = e3, this._state.initializeTileState(i3, this.map ? this.map.painter : null), this._cacheTimers[e3.key] && (clearTimeout(this._cacheTimers[e3.key]), delete this._cacheTimers[e3.key], this._setTileReloadTimer(e3.key, i3)));
        var r2 = Boolean(i3);
        return r2 || (i3 = new t.Tile(e3, this._source.tileSize * e3.overscaleFactor(), this.transform.tileZoom), this._loadTile(i3, this._tileLoaded.bind(this, i3, e3.key, i3.state))), i3 ? (i3.uses++, this._tiles[e3.key] = i3, r2 || this._source.fire(new t.Event("dataloading", { tile: i3, coord: i3.tileID, dataType: "source" })), i3) : null;
      }, i2.prototype._setTileReloadTimer = function(t2, e3) {
        var i3 = this;
        t2 in this._timers && (clearTimeout(this._timers[t2]), delete this._timers[t2]);
        var r2 = e3.getExpiryTimeout();
        r2 && (this._timers[t2] = setTimeout(function() {
          i3._reloadTile(t2, "expired"), delete i3._timers[t2];
        }, r2));
      }, i2.prototype._removeTile = function(t2) {
        var e3 = this._tiles[t2];
        e3 && (e3.uses--, delete this._tiles[t2], this._timers[t2] && (clearTimeout(this._timers[t2]), delete this._timers[t2]), e3.uses > 0 || (e3.hasData() && "reloading" !== e3.state ? this._cache.add(e3.tileID, e3, e3.getExpiryTimeout()) : (e3.aborted = true, this._abortTile(e3), this._unloadTile(e3))));
      }, i2.prototype.clearTiles = function() {
        for (var t2 in this._shouldReloadOnResume = false, this._paused = false, this._tiles)
          this._removeTile(t2);
        this._cache.reset();
      }, i2.prototype.tilesIn = function(e3, i3, r2) {
        var o2 = this, n2 = [], a2 = this.transform;
        if (!a2)
          return n2;
        for (var s2 = r2 ? a2.getCameraQueryGeometry(e3) : e3, c2 = e3.map(function(t2) {
          return a2.pointCoordinate(t2);
        }), l2 = s2.map(function(t2) {
          return a2.pointCoordinate(t2);
        }), u2 = this.getIds(), h2 = 1 / 0, p2 = 1 / 0, f2 = -1 / 0, d2 = -1 / 0, _3 = 0, m2 = l2; _3 < m2.length; _3 += 1) {
          var g2 = m2[_3];
          h2 = Math.min(h2, g2.x), p2 = Math.min(p2, g2.y), f2 = Math.max(f2, g2.x), d2 = Math.max(d2, g2.y);
        }
        for (var v2 = t.config.parse.Coordinate, y2 = function(e4) {
          var r3 = o2._tiles[u2[e4]];
          if (!r3.holdingForFade()) {
            var s3 = r3.tileID, _4 = Math.pow(2, a2.zoom - r3.tileID.overscaledZ), m3 = i3 * r3.queryPadding * t.EXTENT / r3.tileSize / _4, g3 = [s3.getTilePoint(new v2(h2, p2)), s3.getTilePoint(new v2(f2, d2))];
            if (g3[0].x - m3 < t.EXTENT && g3[0].y - m3 < t.EXTENT && g3[1].x + m3 >= 0 && g3[1].y + m3 >= 0) {
              var y3 = c2.map(function(t2) {
                return s3.getTilePoint(t2);
              }), b3 = l2.map(function(t2) {
                return s3.getTilePoint(t2);
              });
              n2.push({ tile: r3, tileID: s3, queryGeometry: y3, cameraQueryGeometry: b3, scale: _4 });
            }
          }
        }, b2 = 0; b2 < u2.length; b2++)
          y2(b2);
        return n2;
      }, i2.prototype.getVisibleCoordinates = function(t2) {
        for (var e3 = this, i3 = this.getRenderableIds(t2).map(function(t3) {
          return e3._tiles[t3].tileID;
        }), r2 = 0, o2 = i3; r2 < o2.length; r2 += 1) {
          var n2 = o2[r2];
          n2.posMatrix = this.transform.calculatePosMatrix(n2.toUnwrapped());
        }
        return i3;
      }, i2.prototype.hasTransition = function() {
        if (this._source.hasTransition())
          return true;
        if (zt(this._source.type))
          for (var e3 in this._tiles) {
            var i3 = this._tiles[e3];
            if (void 0 !== i3.fadeEndTime && i3.fadeEndTime >= t.browser.now())
              return true;
          }
        return false;
      }, i2.prototype.setFeatureState = function(t2, e3, i3) {
        this._state.updateState(t2 = t2 || "_geojsonTileLayer", e3, i3);
      }, i2.prototype.removeFeatureState = function(t2, e3, i3) {
        this._state.removeFeatureState(t2 = t2 || "_geojsonTileLayer", e3, i3);
      }, i2.prototype.getFeatureState = function(t2, e3) {
        return this._state.getState(t2 = t2 || "_geojsonTileLayer", e3);
      }, i2.prototype.setDependencies = function(t2, e3, i3) {
        var r2 = this._tiles[t2];
        r2 && r2.setDependencies(e3, i3);
      }, i2.prototype.reloadTilesForDependencies = function(t2, e3) {
        for (var i3 in this._tiles)
          this._tiles[i3].hasDependency(t2, e3) && this._reloadTile(i3, "reloading");
        this._cache.filter(function(i4) {
          return !i4.hasDependency(t2, e3);
        });
      }, i2;
    }(t.Evented);
    function Ct(t2, e2) {
      var i2 = Math.abs(2 * t2.wrap) - +(t2.wrap < 0), r2 = Math.abs(2 * e2.wrap) - +(e2.wrap < 0);
      return t2.overscaledZ - e2.overscaledZ || r2 - i2 || e2.canonical.y - t2.canonical.y || e2.canonical.x - t2.canonical.x;
    }
    function zt(t2) {
      return "raster" === t2 || "image" === t2 || "video" === t2;
    }
    function Dt() {
      return new t.window.Worker(lf.workerUrl);
    }
    Pt.maxOverzooming = 10, Pt.maxUnderzooming = 3;
    var Mt, Lt = function() {
      this.active = {};
    };
    function Rt(e2, i2) {
      var r2 = {};
      for (var o2 in e2)
        "ref" !== o2 && (r2[o2] = e2[o2]);
      return t.refProperties.forEach(function(t2) {
        t2 in i2 && (r2[t2] = i2[t2]);
      }), r2;
    }
    function Ot(t2) {
      t2 = t2.slice();
      for (var e2 = /* @__PURE__ */ Object.create(null), i2 = 0; i2 < t2.length; i2++)
        e2[t2[i2].id] = t2[i2];
      for (var r2 = 0; r2 < t2.length; r2++)
        "ref" in t2[r2] && (t2[r2] = Rt(t2[r2], e2[t2[r2].ref]));
      return t2;
    }
    Lt.prototype.acquire = function(t2) {
      if (!this.workers)
        for (this.workers = []; this.workers.length < Lt.workerCount; )
          this.workers.push(new Dt());
      return this.active[t2] = true, this.workers.slice();
    }, Lt.prototype.release = function(t2) {
      delete this.active[t2], 0 === this.numActive() && (this.workers.forEach(function(t3) {
        t3.terminate();
      }), this.workers = null);
    }, Lt.prototype.isPreloaded = function() {
      return !!this.active.sgmap_preloaded_worker_pool;
    }, Lt.prototype.numActive = function() {
      return Object.keys(this.active).length;
    }, Lt.workerCount = 2;
    var Ft = { setStyle: "setStyle", addLayer: "addLayer", removeLayer: "removeLayer", setPaintProperty: "setPaintProperty", setLayoutProperty: "setLayoutProperty", setFilter: "setFilter", addSource: "addSource", removeSource: "removeSource", setGeoJSONSourceData: "setGeoJSONSourceData", setLayerZoomRange: "setLayerZoomRange", setLayerProperty: "setLayerProperty", setCenter: "setCenter", setZoom: "setZoom", setBearing: "setBearing", setPitch: "setPitch", setSprite: "setSprite", setGlyphs: "setGlyphs", setTransition: "setTransition", setLight: "setLight" };
    function Ut(t2, e2, i2) {
      i2.push({ command: Ft.addSource, args: [t2, e2[t2]] });
    }
    function Nt(t2, e2, i2) {
      e2.push({ command: Ft.removeSource, args: [t2] }), i2[t2] = true;
    }
    function jt(t2, e2, i2, r2) {
      Nt(t2, i2, r2), Ut(t2, e2, i2);
    }
    function Vt(e2, i2, r2) {
      var o2;
      for (o2 in e2[r2])
        if (e2[r2].hasOwnProperty(o2) && "data" !== o2 && !t.deepEqual(e2[r2][o2], i2[r2][o2]))
          return false;
      for (o2 in i2[r2])
        if (i2[r2].hasOwnProperty(o2) && "data" !== o2 && !t.deepEqual(e2[r2][o2], i2[r2][o2]))
          return false;
      return true;
    }
    function qt(e2, i2, r2, o2, n2, a2) {
      var s2;
      for (s2 in i2 = i2 || {}, e2 = e2 || {})
        e2.hasOwnProperty(s2) && (t.deepEqual(e2[s2], i2[s2]) || r2.push({ command: a2, args: [o2, s2, i2[s2], n2] }));
      for (s2 in i2)
        i2.hasOwnProperty(s2) && !e2.hasOwnProperty(s2) && (t.deepEqual(e2[s2], i2[s2]) || r2.push({ command: a2, args: [o2, s2, i2[s2], n2] }));
    }
    function Zt(t2) {
      return t2.id;
    }
    function Gt(t2, e2) {
      return t2[e2.id] = e2, t2;
    }
    var Ht = function(t2, e2) {
      this.reset(t2, e2);
    };
    Ht.prototype.reset = function(t2, e2) {
      this.points = t2 || [], this._distances = [0];
      for (var i2 = 1; i2 < this.points.length; i2++)
        this._distances[i2] = this._distances[i2 - 1] + this.points[i2].dist(this.points[i2 - 1]);
      this.length = this._distances[this._distances.length - 1], this.padding = Math.min(e2 || 0, 0.5 * this.length), this.paddedLength = this.length - 2 * this.padding;
    }, Ht.prototype.lerp = function(e2) {
      if (1 === this.points.length)
        return this.points[0];
      e2 = t.clamp(e2, 0, 1);
      for (var i2 = 1, r2 = this._distances[i2], o2 = e2 * this.paddedLength + this.padding; r2 < o2 && i2 < this._distances.length; )
        r2 = this._distances[++i2];
      var n2 = i2 - 1, a2 = this._distances[n2], s2 = r2 - a2, c2 = s2 > 0 ? (o2 - a2) / s2 : 0;
      return this.points[n2].mult(1 - c2).add(this.points[i2].mult(c2));
    };
    var Wt = function(t2, e2, i2) {
      var r2 = this.boxCells = [], o2 = this.circleCells = [];
      this.xCellCount = Math.ceil(t2 / i2), this.yCellCount = Math.ceil(e2 / i2);
      for (var n2 = 0; n2 < this.xCellCount * this.yCellCount; n2++)
        r2.push([]), o2.push([]);
      this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = t2, this.height = e2, this.xScale = this.xCellCount / t2, this.yScale = this.yCellCount / e2, this.boxUid = 0, this.circleUid = 0;
    };
    function Xt(e2, i2, r2, o2, n2) {
      var a2 = t.create();
      return i2 ? (Array.isArray(n2) || (n2 = [n2, n2]), t.scale(a2, a2, [1 / n2[0], 1 / n2[1], 1]), r2 || t.rotateZ(a2, a2, o2.angle)) : t.multiply(a2, o2.labelPlaneMatrix, e2), a2;
    }
    function Kt(e2, i2, r2, o2, n2) {
      if (i2) {
        var a2 = t.clone(e2);
        return Array.isArray(n2) || (n2 = [n2, n2]), t.scale(a2, a2, [n2[0], n2[1], 1]), r2 || t.rotateZ(a2, a2, -o2.angle), a2;
      }
      return o2.glCoordMatrix;
    }
    function Yt(e2, i2) {
      var r2 = [e2.x, e2.y, 0, 1];
      se(r2, r2, i2);
      var o2 = r2[3];
      return { point: new t.Point(r2[0] / o2, r2[1] / o2), signedDistanceFromCamera: o2 };
    }
    function Jt(t2, e2) {
      return 0.5 + t2 / e2 * 0.5;
    }
    function Qt(t2, e2) {
      var i2 = t2[0] / t2[3], r2 = t2[1] / t2[3];
      return i2 >= -e2[0] && i2 <= e2[0] && r2 >= -e2[1] && r2 <= e2[1];
    }
    function $t(e2, i2, r2, o2, n2, a2, s2, c2) {
      var l2 = o2 ? e2.textSizeData : e2.iconSizeData, u2 = t.evaluateSizeForZoom(l2, r2.transform.zoom), h2 = [256 / r2.width * 2 + 1, 256 / r2.height * 2 + 1], p2 = o2 ? e2.text.dynamicLayoutVertexArray : e2.icon.dynamicLayoutVertexArray;
      p2.clear();
      for (var f2 = e2.lineVertexArray, d2 = o2 ? e2.text.placedSymbolArray : e2.icon.placedSymbolArray, _3 = r2.transform.width / r2.transform.height, m2 = false, g2 = 0; g2 < d2.length; g2++) {
        var v2 = d2.get(g2);
        if (v2.hidden || v2.writingMode === t.WritingMode.vertical && !m2)
          ae(v2.numGlyphs, p2);
        else {
          m2 = false;
          var y2 = [v2.anchorX, v2.anchorY, 0, 1];
          if (t.transformMat4(y2, y2, i2), Qt(y2, h2)) {
            var b2 = Jt(r2.transform.cameraToCenterDistance, y2[3]), w2 = t.evaluateSizeForFeature(l2, u2, v2), x2 = s2 ? w2 / b2 : w2 * b2, T2 = new t.Point(v2.anchorX, v2.anchorY), S2 = Yt(T2, n2).point, E2 = {}, A2 = ie(v2, x2, false, c2, i2, n2, a2, e2.glyphOffsetArray, f2, p2, S2, T2, E2, _3);
            m2 = A2.useVertical, (A2.notEnoughRoom || m2 || A2.needsFlipping && ie(v2, x2, true, c2, i2, n2, a2, e2.glyphOffsetArray, f2, p2, S2, T2, E2, _3).notEnoughRoom) && ae(v2.numGlyphs, p2);
          } else
            ae(v2.numGlyphs, p2);
        }
      }
      o2 ? e2.text.dynamicLayoutVertexBuffer.updateData(p2) : e2.icon.dynamicLayoutVertexBuffer.updateData(p2);
    }
    function te(t2, e2, i2, r2, o2, n2, a2, s2, c2, l2, u2) {
      var h2 = s2.glyphStartIndex + s2.numGlyphs, p2 = s2.lineStartIndex, f2 = s2.lineStartIndex + s2.lineLength, d2 = e2.getoffsetX(s2.glyphStartIndex), _3 = e2.getoffsetX(h2 - 1), m2 = oe(t2 * d2, i2, r2, o2, n2, a2, s2.segment, p2, f2, c2, l2, u2);
      if (!m2)
        return null;
      var g2 = oe(t2 * _3, i2, r2, o2, n2, a2, s2.segment, p2, f2, c2, l2, u2);
      return g2 ? { first: m2, last: g2 } : null;
    }
    function ee(e2, i2, r2, o2) {
      return e2 === t.WritingMode.horizontal && Math.abs(r2.y - i2.y) > Math.abs(r2.x - i2.x) * o2 ? { useVertical: true } : (e2 === t.WritingMode.vertical ? i2.y < r2.y : i2.x > r2.x) ? { needsFlipping: true } : null;
    }
    function ie(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2, p2, f2, d2) {
      var _3, m2 = i2 / 24, g2 = e2.lineOffsetX * m2, v2 = e2.lineOffsetY * m2;
      if (e2.numGlyphs > 1) {
        var y2 = e2.glyphStartIndex + e2.numGlyphs, b2 = e2.lineStartIndex, w2 = e2.lineStartIndex + e2.lineLength, x2 = te(m2, c2, g2, v2, r2, h2, p2, e2, l2, a2, f2);
        if (!x2)
          return { notEnoughRoom: true };
        var T2 = Yt(x2.first.point, s2).point, S2 = Yt(x2.last.point, s2).point;
        if (o2 && !r2) {
          var E2 = ee(e2.writingMode, T2, S2, d2);
          if (E2)
            return E2;
        }
        _3 = [x2.first];
        for (var A2 = e2.glyphStartIndex + 1; A2 < y2 - 1; A2++)
          _3.push(oe(m2 * c2.getoffsetX(A2), g2, v2, r2, h2, p2, e2.segment, b2, w2, l2, a2, f2));
        _3.push(x2.last);
      } else {
        if (o2 && !r2) {
          var k2 = Yt(p2, n2).point, I2 = e2.lineStartIndex + e2.segment + 1, B2 = new t.Point(l2.getx(I2), l2.gety(I2)), P2 = Yt(B2, n2), C2 = P2.signedDistanceFromCamera > 0 ? P2.point : re(p2, B2, k2, 1, n2), z2 = ee(e2.writingMode, k2, C2, d2);
          if (z2)
            return z2;
        }
        var D2 = oe(m2 * c2.getoffsetX(e2.glyphStartIndex), g2, v2, r2, h2, p2, e2.segment, e2.lineStartIndex, e2.lineStartIndex + e2.lineLength, l2, a2, f2);
        if (!D2)
          return { notEnoughRoom: true };
        _3 = [D2];
      }
      for (var M2 = 0, L2 = _3; M2 < L2.length; M2 += 1) {
        var R2 = L2[M2];
        t.addDynamicAttributes(u2, R2.point, R2.angle);
      }
      return {};
    }
    function re(t2, e2, i2, r2, o2) {
      var n2 = Yt(t2.add(t2.sub(e2)._unit()), o2).point, a2 = i2.sub(n2);
      return i2.add(a2._mult(r2 / a2.mag()));
    }
    function oe(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2, p2) {
      var f2 = o2 ? e2 - i2 : e2 + i2, d2 = f2 > 0 ? 1 : -1, _3 = 0;
      o2 && (d2 *= -1, _3 = Math.PI), d2 < 0 && (_3 += Math.PI);
      for (var m2 = d2 > 0 ? c2 + s2 : c2 + s2 + 1, g2 = n2, v2 = n2, y2 = 0, b2 = 0, w2 = Math.abs(f2), x2 = []; y2 + b2 <= w2; ) {
        if ((m2 += d2) < c2 || m2 >= l2)
          return null;
        if (v2 = g2, x2.push(g2), void 0 === (g2 = p2[m2])) {
          var T2 = new t.Point(u2.getx(m2), u2.gety(m2)), S2 = Yt(T2, h2);
          if (S2.signedDistanceFromCamera > 0)
            g2 = p2[m2] = S2.point;
          else {
            var E2 = m2 - d2;
            g2 = re(0 === y2 ? a2 : new t.Point(u2.getx(E2), u2.gety(E2)), T2, v2, w2 - y2 + 1, h2);
          }
        }
        y2 += b2, b2 = v2.dist(g2);
      }
      var A2 = (w2 - y2) / b2, k2 = g2.sub(v2), I2 = k2.mult(A2)._add(v2);
      I2._add(k2._unit()._perp()._mult(r2 * d2));
      var B2 = _3 + Math.atan2(g2.y - v2.y, g2.x - v2.x);
      return x2.push(I2), { point: I2, angle: B2, path: x2 };
    }
    Wt.prototype.keysLength = function() {
      return this.boxKeys.length + this.circleKeys.length;
    }, Wt.prototype.insert = function(t2, e2, i2, r2, o2) {
      this._forEachCell(e2, i2, r2, o2, this._insertBoxCell, this.boxUid++), this.boxKeys.push(t2), this.bboxes.push(e2), this.bboxes.push(i2), this.bboxes.push(r2), this.bboxes.push(o2);
    }, Wt.prototype.insertCircle = function(t2, e2, i2, r2) {
      this._forEachCell(e2 - r2, i2 - r2, e2 + r2, i2 + r2, this._insertCircleCell, this.circleUid++), this.circleKeys.push(t2), this.circles.push(e2), this.circles.push(i2), this.circles.push(r2);
    }, Wt.prototype._insertBoxCell = function(t2, e2, i2, r2, o2, n2) {
      this.boxCells[o2].push(n2);
    }, Wt.prototype._insertCircleCell = function(t2, e2, i2, r2, o2, n2) {
      this.circleCells[o2].push(n2);
    }, Wt.prototype._query = function(t2, e2, i2, r2, o2, n2) {
      if (i2 < 0 || t2 > this.width || r2 < 0 || e2 > this.height)
        return !o2 && [];
      var a2 = [];
      if (t2 <= 0 && e2 <= 0 && this.width <= i2 && this.height <= r2) {
        if (o2)
          return true;
        for (var s2 = 0; s2 < this.boxKeys.length; s2++)
          a2.push({ key: this.boxKeys[s2], x1: this.bboxes[4 * s2], y1: this.bboxes[4 * s2 + 1], x2: this.bboxes[4 * s2 + 2], y2: this.bboxes[4 * s2 + 3] });
        for (var c2 = 0; c2 < this.circleKeys.length; c2++) {
          var l2 = this.circles[3 * c2], u2 = this.circles[3 * c2 + 1], h2 = this.circles[3 * c2 + 2];
          a2.push({ key: this.circleKeys[c2], x1: l2 - h2, y1: u2 - h2, x2: l2 + h2, y2: u2 + h2 });
        }
        return n2 ? a2.filter(n2) : a2;
      }
      return this._forEachCell(t2, e2, i2, r2, this._queryCell, a2, { hitTest: o2, seenUids: { box: {}, circle: {} } }, n2), o2 ? a2.length > 0 : a2;
    }, Wt.prototype._queryCircle = function(t2, e2, i2, r2, o2) {
      var n2 = t2 - i2, a2 = t2 + i2, s2 = e2 - i2, c2 = e2 + i2;
      if (a2 < 0 || n2 > this.width || c2 < 0 || s2 > this.height)
        return !r2 && [];
      var l2 = [];
      return this._forEachCell(n2, s2, a2, c2, this._queryCellCircle, l2, { hitTest: r2, circle: { x: t2, y: e2, radius: i2 }, seenUids: { box: {}, circle: {} } }, o2), r2 ? l2.length > 0 : l2;
    }, Wt.prototype.query = function(t2, e2, i2, r2, o2) {
      return this._query(t2, e2, i2, r2, false, o2);
    }, Wt.prototype.hitTest = function(t2, e2, i2, r2, o2) {
      return this._query(t2, e2, i2, r2, true, o2);
    }, Wt.prototype.hitTestCircle = function(t2, e2, i2, r2) {
      return this._queryCircle(t2, e2, i2, true, r2);
    }, Wt.prototype._queryCell = function(t2, e2, i2, r2, o2, n2, a2, s2) {
      var c2 = a2.seenUids, l2 = this.boxCells[o2];
      if (null !== l2)
        for (var u2 = this.bboxes, h2 = 0, p2 = l2; h2 < p2.length; h2 += 1) {
          var f2 = p2[h2];
          if (!c2.box[f2]) {
            c2.box[f2] = true;
            var d2 = 4 * f2;
            if (t2 <= u2[d2 + 2] && e2 <= u2[d2 + 3] && i2 >= u2[d2 + 0] && r2 >= u2[d2 + 1] && (!s2 || s2(this.boxKeys[f2]))) {
              if (a2.hitTest)
                return n2.push(true), true;
              n2.push({ key: this.boxKeys[f2], x1: u2[d2], y1: u2[d2 + 1], x2: u2[d2 + 2], y2: u2[d2 + 3] });
            }
          }
        }
      var _3 = this.circleCells[o2];
      if (null !== _3)
        for (var m2 = this.circles, g2 = 0, v2 = _3; g2 < v2.length; g2 += 1) {
          var y2 = v2[g2];
          if (!c2.circle[y2]) {
            c2.circle[y2] = true;
            var b2 = 3 * y2;
            if (this._circleAndRectCollide(m2[b2], m2[b2 + 1], m2[b2 + 2], t2, e2, i2, r2) && (!s2 || s2(this.circleKeys[y2]))) {
              if (a2.hitTest)
                return n2.push(true), true;
              var w2 = m2[b2], x2 = m2[b2 + 1], T2 = m2[b2 + 2];
              n2.push({ key: this.circleKeys[y2], x1: w2 - T2, y1: x2 - T2, x2: w2 + T2, y2: x2 + T2 });
            }
          }
        }
    }, Wt.prototype._queryCellCircle = function(t2, e2, i2, r2, o2, n2, a2, s2) {
      var c2 = a2.circle, l2 = a2.seenUids, u2 = this.boxCells[o2];
      if (null !== u2)
        for (var h2 = this.bboxes, p2 = 0, f2 = u2; p2 < f2.length; p2 += 1) {
          var d2 = f2[p2];
          if (!l2.box[d2]) {
            l2.box[d2] = true;
            var _3 = 4 * d2;
            if (this._circleAndRectCollide(c2.x, c2.y, c2.radius, h2[_3 + 0], h2[_3 + 1], h2[_3 + 2], h2[_3 + 3]) && (!s2 || s2(this.boxKeys[d2])))
              return n2.push(true), true;
          }
        }
      var m2 = this.circleCells[o2];
      if (null !== m2)
        for (var g2 = this.circles, v2 = 0, y2 = m2; v2 < y2.length; v2 += 1) {
          var b2 = y2[v2];
          if (!l2.circle[b2]) {
            l2.circle[b2] = true;
            var w2 = 3 * b2;
            if (this._circlesCollide(g2[w2], g2[w2 + 1], g2[w2 + 2], c2.x, c2.y, c2.radius) && (!s2 || s2(this.circleKeys[b2])))
              return n2.push(true), true;
          }
        }
    }, Wt.prototype._forEachCell = function(t2, e2, i2, r2, o2, n2, a2, s2) {
      for (var c2 = this._convertToXCellCoord(t2), l2 = this._convertToYCellCoord(e2), u2 = this._convertToXCellCoord(i2), h2 = this._convertToYCellCoord(r2), p2 = c2; p2 <= u2; p2++)
        for (var f2 = l2; f2 <= h2; f2++)
          if (o2.call(this, t2, e2, i2, r2, this.xCellCount * f2 + p2, n2, a2, s2))
            return;
    }, Wt.prototype._convertToXCellCoord = function(t2) {
      return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(t2 * this.xScale)));
    }, Wt.prototype._convertToYCellCoord = function(t2) {
      return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(t2 * this.yScale)));
    }, Wt.prototype._circlesCollide = function(t2, e2, i2, r2, o2, n2) {
      var a2 = r2 - t2, s2 = o2 - e2, c2 = i2 + n2;
      return c2 * c2 > a2 * a2 + s2 * s2;
    }, Wt.prototype._circleAndRectCollide = function(t2, e2, i2, r2, o2, n2, a2) {
      var s2 = (n2 - r2) / 2, c2 = Math.abs(t2 - (r2 + s2));
      if (c2 > s2 + i2)
        return false;
      var l2 = (a2 - o2) / 2, u2 = Math.abs(e2 - (o2 + l2));
      if (u2 > l2 + i2)
        return false;
      if (c2 <= s2 || u2 <= l2)
        return true;
      var h2 = c2 - s2, p2 = u2 - l2;
      return h2 * h2 + p2 * p2 <= i2 * i2;
    };
    var ne = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);
    function ae(t2, e2) {
      for (var i2 = 0; i2 < t2; i2++) {
        var r2 = e2.length;
        e2.resize(r2 + 4), e2.float32.set(ne, 3 * r2);
      }
    }
    function se(t2, e2, i2) {
      var r2 = e2[0], o2 = e2[1];
      return t2[0] = i2[0] * r2 + i2[4] * o2 + i2[12], t2[1] = i2[1] * r2 + i2[5] * o2 + i2[13], t2[3] = i2[3] * r2 + i2[7] * o2 + i2[15], t2;
    }
    var ce = function(t2, e2, i2) {
      void 0 === e2 && (e2 = new Wt(t2.width + 200, t2.height + 200, 25)), void 0 === i2 && (i2 = new Wt(t2.width + 200, t2.height + 200, 25)), this.transform = t2, this.grid = e2, this.ignoredGrid = i2, this.pitchfactor = Math.cos(t2._pitch) * t2.cameraToCenterDistance, this.screenRightBoundary = t2.width + 100, this.screenBottomBoundary = t2.height + 100, this.gridRightBoundary = t2.width + 200, this.gridBottomBoundary = t2.height + 200;
    };
    ce.prototype.placeCollisionBox = function(t2, e2, i2, r2, o2) {
      var n2 = this.projectAndGetPerspectiveRatio(r2, t2.anchorPointX, t2.anchorPointY), a2 = i2 * n2.perspectiveRatio, s2 = t2.x1 * a2 + n2.point.x, c2 = t2.y1 * a2 + n2.point.y, l2 = t2.x2 * a2 + n2.point.x, u2 = t2.y2 * a2 + n2.point.y;
      return !this.isInsideGrid(s2, c2, l2, u2) || !e2 && this.grid.hitTest(s2, c2, l2, u2, o2) ? { box: [], offscreen: false } : { box: [s2, c2, l2, u2], offscreen: this.isOffscreen(s2, c2, l2, u2) };
    }, ce.prototype.placeCollisionCircles = function(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2, p2, f2) {
      var d2 = [], _3 = new t.Point(i2.anchorX, i2.anchorY), m2 = Yt(_3, a2), g2 = Jt(this.transform.cameraToCenterDistance, m2.signedDistanceFromCamera), v2 = (u2 ? n2 / g2 : n2 * g2) / t.ONE_EM, y2 = Yt(_3, s2).point, b2 = te(v2, o2, i2.lineOffsetX * v2, i2.lineOffsetY * v2, false, y2, _3, i2, r2, s2, {}), w2 = false, x2 = false, T2 = true;
      if (b2) {
        for (var S2 = 0.5 * p2 * g2 + f2, E2 = new t.Point(-100, -100), A2 = new t.Point(this.screenRightBoundary, this.screenBottomBoundary), k2 = new Ht(), I2 = b2.first, B2 = b2.last, P2 = [], C2 = I2.path.length - 1; C2 >= 1; C2--)
          P2.push(I2.path[C2]);
        for (var z2 = 1; z2 < B2.path.length; z2++)
          P2.push(B2.path[z2]);
        var D2 = 2.5 * S2;
        if (c2) {
          var M2 = P2.map(function(t2) {
            return Yt(t2, c2);
          });
          P2 = M2.some(function(t2) {
            return t2.signedDistanceFromCamera <= 0;
          }) ? [] : M2.map(function(t2) {
            return t2.point;
          });
        }
        var L2 = [];
        if (P2.length > 0) {
          for (var R2 = P2[0].clone(), O2 = P2[0].clone(), F2 = 1; F2 < P2.length; F2++)
            R2.x = Math.min(R2.x, P2[F2].x), R2.y = Math.min(R2.y, P2[F2].y), O2.x = Math.max(O2.x, P2[F2].x), O2.y = Math.max(O2.y, P2[F2].y);
          L2 = R2.x >= E2.x && O2.x <= A2.x && R2.y >= E2.y && O2.y <= A2.y ? [P2] : O2.x < E2.x || R2.x > A2.x || O2.y < E2.y || R2.y > A2.y ? [] : t.clipLine([P2], E2.x, E2.y, A2.x, A2.y);
        }
        for (var U2 = 0, N2 = L2; U2 < N2.length; U2 += 1) {
          var j2;
          k2.reset(N2[U2], 0.25 * S2), j2 = k2.length <= 0.5 * S2 ? 1 : Math.ceil(k2.paddedLength / D2) + 1;
          for (var V2 = 0; V2 < j2; V2++) {
            var q2 = V2 / Math.max(j2 - 1, 1), Z2 = k2.lerp(q2), G2 = Z2.x + 100, H2 = Z2.y + 100;
            d2.push(G2, H2, S2, 0);
            var W2 = G2 - S2, X2 = H2 - S2, K2 = G2 + S2, Y2 = H2 + S2;
            if (T2 = T2 && this.isOffscreen(W2, X2, K2, Y2), x2 = x2 || this.isInsideGrid(W2, X2, K2, Y2), !e2 && this.grid.hitTestCircle(G2, H2, S2, h2) && (w2 = true, !l2))
              return { circles: [], offscreen: false, collisionDetected: w2 };
          }
        }
      }
      return { circles: !l2 && w2 || !x2 ? [] : d2, offscreen: T2, collisionDetected: w2 };
    }, ce.prototype.queryRenderedSymbols = function(e2) {
      if (0 === e2.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength())
        return {};
      for (var i2 = [], r2 = 1 / 0, o2 = 1 / 0, n2 = -1 / 0, a2 = -1 / 0, s2 = 0, c2 = e2; s2 < c2.length; s2 += 1) {
        var l2 = c2[s2], u2 = new t.Point(l2.x + 100, l2.y + 100);
        r2 = Math.min(r2, u2.x), o2 = Math.min(o2, u2.y), n2 = Math.max(n2, u2.x), a2 = Math.max(a2, u2.y), i2.push(u2);
      }
      for (var h2 = {}, p2 = {}, f2 = 0, d2 = this.grid.query(r2, o2, n2, a2).concat(this.ignoredGrid.query(r2, o2, n2, a2)); f2 < d2.length; f2 += 1) {
        var _3 = d2[f2], m2 = _3.key;
        if (void 0 === h2[m2.bucketInstanceId] && (h2[m2.bucketInstanceId] = {}), !h2[m2.bucketInstanceId][m2.featureIndex]) {
          var g2 = [new t.Point(_3.x1, _3.y1), new t.Point(_3.x2, _3.y1), new t.Point(_3.x2, _3.y2), new t.Point(_3.x1, _3.y2)];
          t.polygonIntersectsPolygon(i2, g2) && (h2[m2.bucketInstanceId][m2.featureIndex] = true, void 0 === p2[m2.bucketInstanceId] && (p2[m2.bucketInstanceId] = []), p2[m2.bucketInstanceId].push(m2.featureIndex));
        }
      }
      return p2;
    }, ce.prototype.insertCollisionBox = function(t2, e2, i2, r2, o2) {
      (e2 ? this.ignoredGrid : this.grid).insert({ bucketInstanceId: i2, featureIndex: r2, collisionGroupID: o2 }, t2[0], t2[1], t2[2], t2[3]);
    }, ce.prototype.insertCollisionCircles = function(t2, e2, i2, r2, o2) {
      for (var n2 = e2 ? this.ignoredGrid : this.grid, a2 = { bucketInstanceId: i2, featureIndex: r2, collisionGroupID: o2 }, s2 = 0; s2 < t2.length; s2 += 4)
        n2.insertCircle(a2, t2[s2], t2[s2 + 1], t2[s2 + 2]);
    }, ce.prototype.projectAndGetPerspectiveRatio = function(e2, i2, r2) {
      var o2 = [i2, r2, 0, 1];
      return se(o2, o2, e2), { point: new t.Point((o2[0] / o2[3] + 1) / 2 * this.transform.width + 100, (-o2[1] / o2[3] + 1) / 2 * this.transform.height + 100), perspectiveRatio: 0.5 + this.transform.cameraToCenterDistance / o2[3] * 0.5 };
    }, ce.prototype.isOffscreen = function(t2, e2, i2, r2) {
      return i2 < 100 || t2 >= this.screenRightBoundary || r2 < 100 || e2 > this.screenBottomBoundary;
    }, ce.prototype.isInsideGrid = function(t2, e2, i2, r2) {
      return i2 >= 0 && t2 < this.gridRightBoundary && r2 >= 0 && e2 < this.gridBottomBoundary;
    }, ce.prototype.getViewportMatrix = function() {
      var e2 = t.identity([]);
      return t.translate(e2, e2, [-100, -100, 0]), e2;
    };
    var le = function(t2, e2, i2, r2) {
      this.opacity = t2 ? Math.max(0, Math.min(1, t2.opacity + (t2.placed ? e2 : -e2))) : r2 && i2 ? 1 : 0, this.placed = i2;
    };
    le.prototype.isHidden = function() {
      return 0 === this.opacity && !this.placed;
    };
    var ue = function(t2, e2, i2, r2, o2) {
      this.text = new le(t2 ? t2.text : null, e2, i2, o2), this.icon = new le(t2 ? t2.icon : null, e2, r2, o2);
    };
    ue.prototype.isHidden = function() {
      return this.text.isHidden() && this.icon.isHidden();
    };
    var he = function(t2, e2, i2) {
      this.text = t2, this.icon = e2, this.skipFade = i2;
    }, pe = function() {
      this.invProjMatrix = t.create(), this.viewportMatrix = t.create(), this.circles = [];
    }, fe = function(t2, e2, i2, r2, o2) {
      this.bucketInstanceId = t2, this.featureIndex = e2, this.sourceLayerIndex = i2, this.bucketIndex = r2, this.tileID = o2;
    }, de = function(t2) {
      this.crossSourceCollisions = t2, this.maxGroupID = 0, this.collisionGroups = {};
    };
    function _e(e2, i2, r2, o2, n2) {
      var a2 = t.getAnchorAlignment(e2), s2 = -(a2.horizontalAlign - 0.5) * i2, c2 = -(a2.verticalAlign - 0.5) * r2, l2 = t.evaluateVariableOffset(e2, o2);
      return new t.Point(s2 + l2[0] * n2, c2 + l2[1] * n2);
    }
    function me(e2, i2, r2, o2, n2, a2) {
      var s2 = e2.x1, c2 = e2.x2, l2 = e2.y1, u2 = e2.y2, h2 = e2.anchorPointX, p2 = e2.anchorPointY, f2 = new t.Point(i2, r2);
      return o2 && f2._rotate(n2 ? a2 : -a2), { x1: s2 + f2.x, y1: l2 + f2.y, x2: c2 + f2.x, y2: u2 + f2.y, anchorPointX: h2, anchorPointY: p2 };
    }
    de.prototype.get = function(t2) {
      if (this.crossSourceCollisions)
        return { ID: 0, predicate: null };
      if (!this.collisionGroups[t2]) {
        var e2 = ++this.maxGroupID;
        this.collisionGroups[t2] = { ID: e2, predicate: function(t3) {
          return t3.collisionGroupID === e2;
        } };
      }
      return this.collisionGroups[t2];
    };
    var ge = function(t2, e2, i2, r2) {
      this.transform = t2.clone(), this.collisionIndex = new ce(this.transform), this.placements = {}, this.opacities = {}, this.variableOffsets = {}, this.stale = false, this.commitTime = 0, this.fadeDuration = e2, this.retainedQueryData = {}, this.collisionGroups = new de(i2), this.collisionCircleArrays = {}, this.prevPlacement = r2, r2 && (r2.prevPlacement = void 0), this.placedOrientations = {};
    };
    function ve(t2, e2, i2, r2, o2) {
      t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, r2 || 0, o2 || 0), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, r2 || 0, o2 || 0), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, r2 || 0, o2 || 0), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, r2 || 0, o2 || 0);
    }
    ge.prototype.getBucketParts = function(e2, i2, r2, o2) {
      var n2 = r2.getBucket(i2), a2 = r2.latestFeatureIndex;
      if (n2 && a2 && i2.id === n2.layerIds[0]) {
        var s2 = r2.collisionBoxArray, c2 = n2.layers[0].layout, l2 = Math.pow(2, this.transform.zoom - r2.tileID.overscaledZ), u2 = r2.tileSize / t.EXTENT, h2 = this.transform.calculatePosMatrix(r2.tileID.toUnwrapped()), p2 = "map" === c2.get("text-pitch-alignment"), f2 = "map" === c2.get("text-rotation-alignment"), d2 = y(r2, 1, this.transform.zoom, "xy"), _3 = Xt(h2, p2, f2, this.transform, d2), m2 = null;
        if (p2) {
          var g2 = Kt(h2, p2, f2, this.transform, d2);
          m2 = t.multiply([], this.transform.labelPlaneMatrix, g2);
        }
        this.retainedQueryData[n2.bucketInstanceId] = new fe(n2.bucketInstanceId, a2, n2.sourceLayerIndex, n2.index, r2.tileID);
        var v2 = { bucket: n2, layout: c2, posMatrix: h2, textLabelPlaneMatrix: _3, labelToScreenMatrix: m2, scale: l2, textPixelRatio: u2, holdingForFade: r2.holdingForFade(), collisionBoxArray: s2, partiallyEvaluatedTextSize: t.evaluateSizeForZoom(n2.textSizeData, this.transform.zoom), collisionGroup: this.collisionGroups.get(n2.sourceID) };
        if (o2)
          for (var b2 = 0, w2 = n2.sortKeyRanges; b2 < w2.length; b2 += 1) {
            var x2 = w2[b2];
            e2.push({ sortKey: x2.sortKey, symbolInstanceStart: x2.symbolInstanceStart, symbolInstanceEnd: x2.symbolInstanceEnd, parameters: v2 });
          }
        else
          e2.push({ symbolInstanceStart: 0, symbolInstanceEnd: n2.symbolInstances.length, parameters: v2 });
      }
    }, ge.prototype.attemptAnchorPlacement = function(t2, e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2, p2, f2, d2) {
      var _3, m2 = [h2.textOffset0, h2.textOffset1], g2 = _e(t2, i2, r2, m2, o2), v2 = this.collisionIndex.placeCollisionBox(me(e2, g2.x, g2.y, n2, a2, this.transform.angle), u2, s2, c2, l2.predicate);
      if (!d2 || 0 !== this.collisionIndex.placeCollisionBox(me(d2, g2.x, g2.y, n2, a2, this.transform.angle), u2, s2, c2, l2.predicate).box.length)
        return v2.box.length > 0 ? (this.prevPlacement && this.prevPlacement.variableOffsets[h2.crossTileID] && this.prevPlacement.placements[h2.crossTileID] && this.prevPlacement.placements[h2.crossTileID].text && (_3 = this.prevPlacement.variableOffsets[h2.crossTileID].anchor), this.variableOffsets[h2.crossTileID] = { textOffset: m2, width: i2, height: r2, anchor: t2, textBoxScale: o2, prevAnchor: _3 }, this.markUsedJustification(p2, t2, h2, f2), p2.allowVerticalPlacement && (this.markUsedOrientation(p2, f2, h2), this.placedOrientations[h2.crossTileID] = f2), { shift: g2, placedGlyphBoxes: v2 }) : void 0;
    }, ge.prototype.placeLayerBucketPart = function(e2, i2, r2) {
      var o2 = this, n2 = e2.parameters, a2 = n2.bucket, s2 = n2.layout, c2 = n2.posMatrix, l2 = n2.textLabelPlaneMatrix, u2 = n2.labelToScreenMatrix, h2 = n2.textPixelRatio, p2 = n2.holdingForFade, f2 = n2.collisionBoxArray, d2 = n2.partiallyEvaluatedTextSize, _3 = n2.collisionGroup, m2 = s2.get("text-optional"), g2 = s2.get("icon-optional"), v2 = s2.get("text-allow-overlap"), y2 = s2.get("icon-allow-overlap"), b2 = "map" === s2.get("text-rotation-alignment"), w2 = "map" === s2.get("text-pitch-alignment"), x2 = "none" !== s2.get("icon-text-fit"), T2 = "viewport-y" === s2.get("symbol-z-order"), S2 = v2 && (y2 || !a2.hasIconData() || g2), E2 = y2 && (v2 || !a2.hasTextData() || m2);
      !a2.collisionArrays && f2 && a2.deserializeCollisionBoxes(f2);
      var A2 = this.transform.zoom, k2 = a2.feature_values.map(function(t2) {
        return t2[0];
      }), I2 = function(e3, n3) {
        if (!i2[e3.crossTileID])
          if (p2)
            o2.placements[e3.crossTileID] = new he(false, false, false);
          else {
            var f3 = k2.indexOf(e3.featureIndex);
            if (f3 >= 0) {
              var T3 = a2.feature_values[f3];
              if (T3 && (A2 < T3[1] || A2 > T3[2]))
                return;
            }
            var I3, B3 = false, P3 = false, C3 = true, z3 = null, D3 = { box: null, offscreen: null }, M2 = { box: null, offscreen: null }, L2 = null, R2 = null, O2 = 0, F2 = 0, U2 = 0;
            n3.textFeatureIndex ? O2 = n3.textFeatureIndex : e3.useRuntimeCollisionCircles && (O2 = e3.featureIndex), n3.verticalTextFeatureIndex && (F2 = n3.verticalTextFeatureIndex);
            var N2 = n3.textBox;
            if (N2) {
              var j2 = function(i3) {
                var r3 = t.WritingMode.horizontal;
                if (a2.allowVerticalPlacement && !i3 && o2.prevPlacement) {
                  var n4 = o2.prevPlacement.placedOrientations[e3.crossTileID];
                  n4 && (o2.placedOrientations[e3.crossTileID] = n4, o2.markUsedOrientation(a2, r3 = n4, e3));
                }
                return r3;
              }, V2 = function(i3, r3) {
                if (a2.allowVerticalPlacement && e3.numVerticalGlyphVertices > 0 && n3.verticalTextBox)
                  for (var o3 = 0, s3 = a2.writingModes; o3 < s3.length && (s3[o3] === t.WritingMode.vertical ? (D3 = r3(), M2 = D3) : D3 = i3(), !(D3 && D3.box && D3.box.length)); o3 += 1)
                    ;
                else
                  D3 = i3();
              };
              if (s2.get("text-variable-anchor")) {
                var q2 = s2.get("text-variable-anchor");
                if (o2.prevPlacement && o2.prevPlacement.variableOffsets[e3.crossTileID]) {
                  var Z2 = o2.prevPlacement.variableOffsets[e3.crossTileID];
                  q2.indexOf(Z2.anchor) > 0 && (q2 = q2.filter(function(t2) {
                    return t2 !== Z2.anchor;
                  })).unshift(Z2.anchor);
                }
                var G2 = function(t2, i3, r3) {
                  for (var n4 = t2.x2 - t2.x1, s3 = t2.y2 - t2.y1, l3 = e3.textBoxScale, u3 = x2 && !y2 ? i3 : null, p3 = { box: [], offscreen: false }, f4 = v2 ? 2 * q2.length : q2.length, d3 = 0; d3 < f4; ++d3) {
                    var m3 = o2.attemptAnchorPlacement(q2[d3 % q2.length], t2, n4, s3, l3, b2, w2, h2, c2, _3, d3 >= q2.length, e3, a2, r3, u3);
                    if (m3 && (p3 = m3.placedGlyphBoxes) && p3.box && p3.box.length) {
                      B3 = true, z3 = m3.shift;
                      break;
                    }
                  }
                  return p3;
                };
                V2(function() {
                  return G2(N2, n3.iconBox, t.WritingMode.horizontal);
                }, function() {
                  var i3 = n3.verticalTextBox;
                  return a2.allowVerticalPlacement && !(D3 && D3.box && D3.box.length) && e3.numVerticalGlyphVertices > 0 && i3 ? G2(i3, n3.verticalIconBox, t.WritingMode.vertical) : { box: null, offscreen: null };
                }), D3 && (B3 = D3.box, C3 = D3.offscreen);
                var H2 = j2(D3 && D3.box);
                if (!B3 && o2.prevPlacement) {
                  var W2 = o2.prevPlacement.variableOffsets[e3.crossTileID];
                  W2 && (o2.variableOffsets[e3.crossTileID] = W2, o2.markUsedJustification(a2, W2.anchor, e3, H2));
                }
              } else {
                var X2 = function(t2, i3) {
                  var r3 = o2.collisionIndex.placeCollisionBox(t2, v2, h2, c2, _3.predicate);
                  return r3 && r3.box && r3.box.length && (o2.markUsedOrientation(a2, i3, e3), o2.placedOrientations[e3.crossTileID] = i3), r3;
                };
                V2(function() {
                  return X2(N2, t.WritingMode.horizontal);
                }, function() {
                  var i3 = n3.verticalTextBox;
                  return a2.allowVerticalPlacement && e3.numVerticalGlyphVertices > 0 && i3 ? X2(i3, t.WritingMode.vertical) : { box: null, offscreen: null };
                }), j2(D3 && D3.box && D3.box.length);
              }
            }
            if (B3 = (I3 = D3) && I3.box && I3.box.length > 0, C3 = I3 && I3.offscreen, e3.useRuntimeCollisionCircles) {
              var K2 = a2.text.placedSymbolArray.get(e3.centerJustifiedTextSymbolIndex), Y2 = t.evaluateSizeForFeature(a2.textSizeData, d2, K2), J2 = s2.get("text-padding");
              L2 = o2.collisionIndex.placeCollisionCircles(v2, K2, a2.lineVertexArray, a2.glyphOffsetArray, Y2, c2, l2, u2, r2, w2, _3.predicate, e3.collisionCircleDiameter, J2), B3 = v2 || L2.circles.length > 0 && !L2.collisionDetected, C3 = C3 && L2.offscreen;
            }
            if (n3.iconFeatureIndex && (U2 = n3.iconFeatureIndex), n3.iconBox) {
              var Q2 = function(t2) {
                var e4 = x2 && z3 ? me(t2, z3.x, z3.y, b2, w2, o2.transform.angle) : t2;
                return o2.collisionIndex.placeCollisionBox(e4, y2, h2, c2, _3.predicate);
              };
              P3 = M2 && M2.box && M2.box.length && n3.verticalIconBox ? (R2 = Q2(n3.verticalIconBox)).box.length > 0 : (R2 = Q2(n3.iconBox)).box.length > 0, C3 = C3 && R2.offscreen;
            }
            var $2 = m2 || 0 === e3.numHorizontalGlyphVertices && 0 === e3.numVerticalGlyphVertices, tt2 = g2 || 0 === e3.numIconVertices;
            if ($2 || tt2 ? tt2 ? $2 || (P3 = P3 && B3) : B3 = P3 && B3 : P3 = B3 = P3 && B3, B3 && I3 && I3.box && o2.collisionIndex.insertCollisionBox(I3.box, s2.get("text-ignore-placement"), a2.bucketInstanceId, M2 && M2.box && F2 ? F2 : O2, _3.ID), P3 && R2 && o2.collisionIndex.insertCollisionBox(R2.box, s2.get("icon-ignore-placement"), a2.bucketInstanceId, U2, _3.ID), L2 && (B3 && o2.collisionIndex.insertCollisionCircles(L2.circles, s2.get("text-ignore-placement"), a2.bucketInstanceId, O2, _3.ID), r2)) {
              var et2 = a2.bucketInstanceId, it2 = o2.collisionCircleArrays[et2];
              void 0 === it2 && (it2 = o2.collisionCircleArrays[et2] = new pe());
              for (var rt2 = 0; rt2 < L2.circles.length; rt2 += 4)
                it2.circles.push(L2.circles[rt2 + 0]), it2.circles.push(L2.circles[rt2 + 1]), it2.circles.push(L2.circles[rt2 + 2]), it2.circles.push(L2.collisionDetected ? 1 : 0);
            }
            o2.placements[e3.crossTileID] = new he(B3 || S2, P3 || E2, C3 || a2.justReloaded), i2[e3.crossTileID] = true;
          }
      };
      if (T2)
        for (var B2 = a2.getSortedSymbolIndexes(this.transform.angle), P2 = B2.length - 1; P2 >= 0; --P2) {
          var C2 = B2[P2];
          I2(a2.symbolInstances.get(C2), a2.collisionArrays[C2]);
        }
      else
        for (var z2 = e2.symbolInstanceStart; z2 < e2.symbolInstanceEnd; z2++)
          I2(a2.symbolInstances.get(z2), a2.collisionArrays[z2]);
      if (r2 && a2.bucketInstanceId in this.collisionCircleArrays) {
        var D2 = this.collisionCircleArrays[a2.bucketInstanceId];
        t.invert(D2.invProjMatrix, c2), D2.viewportMatrix = this.collisionIndex.getViewportMatrix();
      }
      a2.justReloaded = false;
    }, ge.prototype.markUsedJustification = function(e2, i2, r2, o2) {
      var n2;
      n2 = o2 === t.WritingMode.vertical ? r2.verticalPlacedTextSymbolIndex : { left: r2.leftJustifiedTextSymbolIndex, center: r2.centerJustifiedTextSymbolIndex, right: r2.rightJustifiedTextSymbolIndex }[t.getAnchorJustification(i2)];
      for (var a2 = 0, s2 = [r2.leftJustifiedTextSymbolIndex, r2.centerJustifiedTextSymbolIndex, r2.rightJustifiedTextSymbolIndex, r2.verticalPlacedTextSymbolIndex]; a2 < s2.length; a2 += 1) {
        var c2 = s2[a2];
        c2 >= 0 && (e2.text.placedSymbolArray.get(c2).crossTileID = n2 >= 0 && c2 !== n2 ? 0 : r2.crossTileID);
      }
    }, ge.prototype.markUsedOrientation = function(e2, i2, r2) {
      for (var o2 = i2 === t.WritingMode.horizontal || i2 === t.WritingMode.horizontalOnly ? i2 : 0, n2 = i2 === t.WritingMode.vertical ? i2 : 0, a2 = 0, s2 = [r2.leftJustifiedTextSymbolIndex, r2.centerJustifiedTextSymbolIndex, r2.rightJustifiedTextSymbolIndex]; a2 < s2.length; a2 += 1)
        e2.text.placedSymbolArray.get(s2[a2]).placedOrientation = o2;
      r2.verticalPlacedTextSymbolIndex && (e2.text.placedSymbolArray.get(r2.verticalPlacedTextSymbolIndex).placedOrientation = n2);
    }, ge.prototype.commit = function(t2) {
      this.commitTime = t2, this.zoomAtLastRecencyCheck = this.transform.zoom;
      var e2 = this.prevPlacement, i2 = false;
      this.prevZoomAdjustment = e2 ? e2.zoomAdjustment(this.transform.zoom) : 0;
      var r2 = e2 ? e2.symbolFadeChange(t2) : 1, o2 = e2 ? e2.opacities : {}, n2 = e2 ? e2.variableOffsets : {}, a2 = e2 ? e2.placedOrientations : {};
      for (var s2 in this.placements) {
        var c2 = this.placements[s2], l2 = o2[s2];
        l2 ? (this.opacities[s2] = new ue(l2, r2, c2.text, c2.icon), i2 = i2 || c2.text !== l2.text.placed || c2.icon !== l2.icon.placed) : (this.opacities[s2] = new ue(null, r2, c2.text, c2.icon, c2.skipFade), i2 = i2 || c2.text || c2.icon);
      }
      for (var u2 in o2) {
        var h2 = o2[u2];
        if (!this.opacities[u2]) {
          var p2 = new ue(h2, r2, false, false);
          p2.isHidden() || (this.opacities[u2] = p2, i2 = i2 || h2.text.placed || h2.icon.placed);
        }
      }
      for (var f2 in n2)
        this.variableOffsets[f2] || !this.opacities[f2] || this.opacities[f2].isHidden() || (this.variableOffsets[f2] = n2[f2]);
      for (var d2 in a2)
        this.placedOrientations[d2] || !this.opacities[d2] || this.opacities[d2].isHidden() || (this.placedOrientations[d2] = a2[d2]);
      i2 ? this.lastPlacementChangeTime = t2 : "number" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = e2 ? e2.lastPlacementChangeTime : t2);
    }, ge.prototype.updateLayerOpacities = function(t2, e2) {
      for (var i2 = {}, r2 = 0, o2 = e2; r2 < o2.length; r2 += 1) {
        var n2 = o2[r2], a2 = n2.getBucket(t2);
        a2 && n2.latestFeatureIndex && t2.id === a2.layerIds[0] && this.updateBucketOpacities(a2, i2, n2.collisionBoxArray);
      }
    }, ge.prototype.updateBucketOpacities = function(e2, i2, r2) {
      var o2 = this;
      e2.hasTextData() && e2.text.opacityVertexArray.clear(), e2.hasIconData() && e2.icon.opacityVertexArray.clear(), e2.hasIconCollisionBoxData() && e2.iconCollisionBox.collisionVertexArray.clear(), e2.hasTextCollisionBoxData() && e2.textCollisionBox.collisionVertexArray.clear();
      var n2 = e2.layers[0].layout, a2 = new ue(null, 0, false, false, true), s2 = n2.get("text-allow-overlap"), c2 = n2.get("icon-allow-overlap"), l2 = n2.get("text-variable-anchor"), u2 = "map" === n2.get("text-rotation-alignment"), h2 = "map" === n2.get("text-pitch-alignment"), p2 = "none" !== n2.get("icon-text-fit"), f2 = new ue(null, 0, s2 && (c2 || !e2.hasIconData() || n2.get("icon-optional")), c2 && (s2 || !e2.hasTextData() || n2.get("text-optional")), true);
      !e2.collisionArrays && r2 && (e2.hasIconCollisionBoxData() || e2.hasTextCollisionBoxData()) && e2.deserializeCollisionBoxes(r2);
      for (var d2 = function(t2, e3, i3) {
        for (var r3 = 0; r3 < e3 / 4; r3++)
          t2.opacityVertexArray.emplaceBack(i3);
      }, _3 = function(r3) {
        var n3 = e2.symbolInstances.get(r3), s3 = n3.numHorizontalGlyphVertices, c3 = n3.numVerticalGlyphVertices, _4 = n3.crossTileID, m3 = o2.opacities[_4];
        i2[_4] ? m3 = a2 : m3 || (o2.opacities[_4] = m3 = f2), i2[_4] = true;
        var g3 = n3.numIconVertices > 0, v2 = o2.placedOrientations[n3.crossTileID], y2 = v2 === t.WritingMode.vertical, b2 = v2 === t.WritingMode.horizontal || v2 === t.WritingMode.horizontalOnly;
        if (s3 > 0 || c3 > 0) {
          var w2 = Ae(m3.text);
          d2(e2.text, s3, y2 ? ke : w2), d2(e2.text, c3, b2 ? ke : w2);
          var x2 = m3.text.isHidden();
          [n3.rightJustifiedTextSymbolIndex, n3.centerJustifiedTextSymbolIndex, n3.leftJustifiedTextSymbolIndex].forEach(function(t2) {
            t2 >= 0 && (e2.text.placedSymbolArray.get(t2).hidden = x2 || y2 ? 1 : 0);
          }), n3.verticalPlacedTextSymbolIndex >= 0 && (e2.text.placedSymbolArray.get(n3.verticalPlacedTextSymbolIndex).hidden = x2 || b2 ? 1 : 0);
          var T2 = o2.variableOffsets[n3.crossTileID];
          T2 && o2.markUsedJustification(e2, T2.anchor, n3, v2);
          var S2 = o2.placedOrientations[n3.crossTileID];
          S2 && (o2.markUsedJustification(e2, "left", n3, S2), o2.markUsedOrientation(e2, S2, n3));
        }
        if (g3) {
          var E2 = Ae(m3.icon), A2 = !(p2 && n3.verticalPlacedIconSymbolIndex && y2);
          n3.placedIconSymbolIndex >= 0 && (d2(e2.icon, n3.numIconVertices, A2 ? E2 : ke), e2.icon.placedSymbolArray.get(n3.placedIconSymbolIndex).hidden = m3.icon.isHidden()), n3.verticalPlacedIconSymbolIndex >= 0 && (d2(e2.icon, n3.numVerticalIconVertices, A2 ? ke : E2), e2.icon.placedSymbolArray.get(n3.verticalPlacedIconSymbolIndex).hidden = m3.icon.isHidden());
        }
        if (e2.hasIconCollisionBoxData() || e2.hasTextCollisionBoxData()) {
          var k2 = e2.collisionArrays[r3];
          if (k2) {
            var I2 = new t.Point(0, 0);
            if (k2.textBox || k2.verticalTextBox) {
              var B2 = true;
              if (l2) {
                var P2 = o2.variableOffsets[_4];
                P2 ? (I2 = _e(P2.anchor, P2.width, P2.height, P2.textOffset, P2.textBoxScale), u2 && I2._rotate(h2 ? o2.transform.angle : -o2.transform.angle)) : B2 = false;
              }
              k2.textBox && ve(e2.textCollisionBox.collisionVertexArray, m3.text.placed, !B2 || y2, I2.x, I2.y), k2.verticalTextBox && ve(e2.textCollisionBox.collisionVertexArray, m3.text.placed, !B2 || b2, I2.x, I2.y);
            }
            var C2 = Boolean(!b2 && k2.verticalIconBox);
            k2.iconBox && ve(e2.iconCollisionBox.collisionVertexArray, m3.icon.placed, C2, p2 ? I2.x : 0, p2 ? I2.y : 0), k2.verticalIconBox && ve(e2.iconCollisionBox.collisionVertexArray, m3.icon.placed, !C2, p2 ? I2.x : 0, p2 ? I2.y : 0);
          }
        }
      }, m2 = 0; m2 < e2.symbolInstances.length; m2++)
        _3(m2);
      if (e2.sortFeatures(this.transform.angle), this.retainedQueryData[e2.bucketInstanceId] && (this.retainedQueryData[e2.bucketInstanceId].featureSortOrder = e2.featureSortOrder), e2.hasTextData() && e2.text.opacityVertexBuffer && e2.text.opacityVertexBuffer.updateData(e2.text.opacityVertexArray), e2.hasIconData() && e2.icon.opacityVertexBuffer && e2.icon.opacityVertexBuffer.updateData(e2.icon.opacityVertexArray), e2.hasIconCollisionBoxData() && e2.iconCollisionBox.collisionVertexBuffer && e2.iconCollisionBox.collisionVertexBuffer.updateData(e2.iconCollisionBox.collisionVertexArray), e2.hasTextCollisionBoxData() && e2.textCollisionBox.collisionVertexBuffer && e2.textCollisionBox.collisionVertexBuffer.updateData(e2.textCollisionBox.collisionVertexArray), e2.bucketInstanceId in this.collisionCircleArrays) {
        var g2 = this.collisionCircleArrays[e2.bucketInstanceId];
        e2.placementInvProjMatrix = g2.invProjMatrix, e2.placementViewportMatrix = g2.viewportMatrix, e2.collisionCircleArray = g2.circles, delete this.collisionCircleArrays[e2.bucketInstanceId];
      }
    }, ge.prototype.symbolFadeChange = function(t2) {
      return 0 === this.fadeDuration ? 1 : (t2 - this.commitTime) / this.fadeDuration + this.prevZoomAdjustment;
    }, ge.prototype.zoomAdjustment = function(t2) {
      return Math.max(0, (this.transform.zoom - t2) / 1.5);
    }, ge.prototype.hasTransitions = function(t2) {
      return this.stale || t2 - this.lastPlacementChangeTime < this.fadeDuration;
    }, ge.prototype.stillRecent = function(t2, e2) {
      var i2 = this.zoomAtLastRecencyCheck === e2 ? 1 - this.zoomAdjustment(e2) : 1;
      return this.zoomAtLastRecencyCheck = e2, this.commitTime + this.fadeDuration * i2 > t2;
    }, ge.prototype.setStale = function() {
      this.stale = true;
    };
    var ye = Math.pow(2, 25), be = Math.pow(2, 24), we = Math.pow(2, 17), xe = Math.pow(2, 16), Te = Math.pow(2, 9), Se = Math.pow(2, 8), Ee = Math.pow(2, 1);
    function Ae(t2) {
      if (0 === t2.opacity && !t2.placed)
        return 0;
      if (1 === t2.opacity && t2.placed)
        return 4294967295;
      var e2 = t2.placed ? 1 : 0, i2 = Math.floor(127 * t2.opacity);
      return i2 * ye + e2 * be + i2 * we + e2 * xe + i2 * Te + e2 * Se + i2 * Ee + e2;
    }
    var ke = 0, Ie = function(t2) {
      this._sortAcrossTiles = "viewport-y" !== t2.layout.get("symbol-z-order") && void 0 !== t2.layout.get("symbol-sort-key").constantOr(1), this._currentTileIndex = 0, this._currentPartIndex = 0, this._seenCrossTileIDs = {}, this._bucketParts = [];
    };
    Ie.prototype.continuePlacement = function(t2, e2, i2, r2, o2) {
      for (var n2 = this._bucketParts; this._currentTileIndex < t2.length; )
        if (e2.getBucketParts(n2, r2, t2[this._currentTileIndex], this._sortAcrossTiles), this._currentTileIndex++, o2())
          return true;
      for (this._sortAcrossTiles && (this._sortAcrossTiles = false, n2.sort(function(t3, e3) {
        return t3.sortKey - e3.sortKey;
      })); this._currentPartIndex < n2.length; )
        if (e2.placeLayerBucketPart(n2[this._currentPartIndex], this._seenCrossTileIDs, i2), this._currentPartIndex++, o2())
          return true;
      return false;
    };
    var Be = function(t2, e2, i2, r2, o2, n2, a2) {
      this.placement = new ge(t2, o2, n2, a2), this._currentPlacementIndex = e2.length - 1, this._forceFullPlacement = i2, this._showCollisionBoxes = r2, this._done = false;
    };
    Be.prototype.isDone = function() {
      return this._done;
    }, Be.prototype.continuePlacement = function(e2, i2, r2) {
      for (var o2 = this, n2 = t.browser.now(), a2 = function() {
        var e3 = t.browser.now() - n2;
        return !o2._forceFullPlacement && e3 > 2;
      }; this._currentPlacementIndex >= 0; ) {
        var s2 = i2[e2[this._currentPlacementIndex]], c2 = this.placement.collisionIndex.transform.zoom;
        if ("symbol" === s2.type && (!s2.minzoom || s2.minzoom <= c2) && (!s2.maxzoom || s2.maxzoom > c2)) {
          if (this._inProgressLayer || (this._inProgressLayer = new Ie(s2)), !(r2[s2.source].length <= 0) && this._inProgressLayer.continuePlacement(r2[s2.source], this.placement, this._showCollisionBoxes, s2, a2))
            return;
          this._inProgressLayer = null, delete this._inProgressLayer;
        }
        this._currentPlacementIndex--;
      }
      this._done = true;
    }, Be.prototype.commit = function(t2) {
      return this.placement.commit(t2), this.placement;
    };
    var Pe = 512 / t.EXTENT / 2, Ce = function(t2, e2, i2) {
      this.tileID = t2, this.indexedSymbolInstances = {}, this.bucketInstanceId = i2;
      for (var r2 = 0; r2 < e2.length; r2++) {
        var o2 = e2.get(r2), n2 = o2.key;
        this.indexedSymbolInstances[n2] || (this.indexedSymbolInstances[n2] = []), this.indexedSymbolInstances[n2].push({ crossTileID: o2.crossTileID, coord: this.getScaledCoordinates(o2, t2) });
      }
    };
    Ce.prototype.getScaledCoordinates = function(e2, i2) {
      var r2 = Pe / Math.pow(2, i2.canonical.z - this.tileID.canonical.z);
      return { x: Math.floor((i2.canonical.x * t.EXTENT + e2.anchorX) * r2), y: Math.floor((i2.canonical.y * t.EXTENT + e2.anchorY) * r2) };
    }, Ce.prototype.findMatches = function(t2, e2, i2) {
      for (var r2 = this.tileID.canonical.z < e2.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - e2.canonical.z), o2 = 0; o2 < t2.length; o2++) {
        var n2 = t2.get(o2);
        if (!n2.crossTileID) {
          var a2 = this.indexedSymbolInstances[n2.key];
          if (a2)
            for (var s2 = this.getScaledCoordinates(n2, e2), c2 = 0, l2 = a2; c2 < l2.length; c2 += 1) {
              var u2 = l2[c2];
              if (Math.abs(u2.coord.x - s2.x) <= r2 && Math.abs(u2.coord.y - s2.y) <= r2 && !i2[u2.crossTileID]) {
                i2[u2.crossTileID] = true, n2.crossTileID = u2.crossTileID;
                break;
              }
            }
        }
      }
    };
    var ze = function() {
      this.maxCrossTileID = 0;
    };
    ze.prototype.generate = function() {
      return ++this.maxCrossTileID;
    };
    var De = function() {
      this.indexes = {}, this.usedCrossTileIDs = {}, this.lng = 0;
    };
    De.prototype.handleWrapJump = function(t2) {
      var e2 = Math.round((t2 - this.lng) / 360);
      if (0 !== e2)
        for (var i2 in this.indexes) {
          var r2 = this.indexes[i2], o2 = {};
          for (var n2 in r2) {
            var a2 = r2[n2];
            a2.tileID = a2.tileID.unwrapTo(a2.tileID.wrap + e2), o2[a2.tileID.key] = a2;
          }
          this.indexes[i2] = o2;
        }
      this.lng = t2;
    }, De.prototype.addBucket = function(t2, e2, i2) {
      if (this.indexes[t2.overscaledZ] && this.indexes[t2.overscaledZ][t2.key]) {
        if (this.indexes[t2.overscaledZ][t2.key].bucketInstanceId === e2.bucketInstanceId)
          return false;
        this.removeBucketCrossTileIDs(t2.overscaledZ, this.indexes[t2.overscaledZ][t2.key]);
      }
      for (var r2 = 0; r2 < e2.symbolInstances.length; r2++)
        e2.symbolInstances.get(r2).crossTileID = 0;
      this.usedCrossTileIDs[t2.overscaledZ] || (this.usedCrossTileIDs[t2.overscaledZ] = {});
      var o2 = this.usedCrossTileIDs[t2.overscaledZ];
      for (var n2 in this.indexes) {
        var a2 = this.indexes[n2];
        if (Number(n2) > t2.overscaledZ)
          for (var s2 in a2) {
            var c2 = a2[s2];
            c2.tileID.isChildOf(t2) && c2.findMatches(e2.symbolInstances, t2, o2);
          }
        else {
          var l2 = a2[t2.scaledTo(Number(n2)).key];
          l2 && l2.findMatches(e2.symbolInstances, t2, o2);
        }
      }
      for (var u2 = 0; u2 < e2.symbolInstances.length; u2++) {
        var h2 = e2.symbolInstances.get(u2);
        h2.crossTileID || (h2.crossTileID = i2.generate(), o2[h2.crossTileID] = true);
      }
      return void 0 === this.indexes[t2.overscaledZ] && (this.indexes[t2.overscaledZ] = {}), this.indexes[t2.overscaledZ][t2.key] = new Ce(t2, e2.symbolInstances, e2.bucketInstanceId), true;
    }, De.prototype.removeBucketCrossTileIDs = function(t2, e2) {
      for (var i2 in e2.indexedSymbolInstances)
        for (var r2 = 0, o2 = e2.indexedSymbolInstances[i2]; r2 < o2.length; r2 += 1)
          delete this.usedCrossTileIDs[t2][o2[r2].crossTileID];
    }, De.prototype.removeStaleBuckets = function(t2) {
      var e2 = false;
      for (var i2 in this.indexes) {
        var r2 = this.indexes[i2];
        for (var o2 in r2)
          t2[r2[o2].bucketInstanceId] || (this.removeBucketCrossTileIDs(i2, r2[o2]), delete r2[o2], e2 = true);
      }
      return e2;
    };
    var Me = function() {
      this.layerIndexes = {}, this.crossTileIDs = new ze(), this.maxBucketInstanceId = 0, this.bucketsInCurrentPlacement = {};
    };
    Me.prototype.addLayer = function(t2, e2, i2) {
      var r2 = this.layerIndexes[t2.id];
      void 0 === r2 && (r2 = this.layerIndexes[t2.id] = new De());
      var o2 = false, n2 = {};
      r2.handleWrapJump(i2);
      for (var a2 = 0, s2 = e2; a2 < s2.length; a2 += 1) {
        var c2 = s2[a2], l2 = c2.getBucket(t2);
        l2 && t2.id === l2.layerIds[0] && (l2.bucketInstanceId || (l2.bucketInstanceId = ++this.maxBucketInstanceId), r2.addBucket(c2.tileID, l2, this.crossTileIDs) && (o2 = true), n2[l2.bucketInstanceId] = true);
      }
      return r2.removeStaleBuckets(n2) && (o2 = true), o2;
    }, Me.prototype.pruneUnusedLayers = function(t2) {
      var e2 = {};
      for (var i2 in t2.forEach(function(t3) {
        e2[t3] = true;
      }), this.layerIndexes)
        e2[i2] || delete this.layerIndexes[i2];
    };
    var Le = function(e2, i2) {
      return t.emitValidationErrors(e2, i2 && i2.filter(function(t2) {
        return "source.canvas" !== t2.identifier;
      }));
    }, Re = t.pick(Ft, ["addLayer", "removeLayer", "setPaintProperty", "setLayoutProperty", "setFilter", "addSource", "removeSource", "setLayerZoomRange", "setLight", "setTransition", "setGeoJSONSourceData"]), Oe = t.pick(Ft, ["setCenter", "setZoom", "setBearing", "setPitch"]), Fe = function() {
      var e2 = {}, i2 = t.styleSpec.$version;
      for (var r2 in t.styleSpec.$root) {
        var o2, n2 = t.styleSpec.$root[r2];
        if (n2.required)
          null != (o2 = "version" === r2 ? i2 : "array" === n2.type ? [] : {}) && (e2[r2] = o2);
      }
      return e2;
    }(), Ue = function(e2) {
      function i2(r2, o2) {
        var n2 = this;
        void 0 === o2 && (o2 = {}), e2.call(this), this.map = r2, this.dispatcher = new v((Mt || (Mt = new Lt()), Mt), this), this.imageManager = new d(), this.imageManager.setEventedParent(this), this.glyphManager = new t.GlyphManager(r2._requestManager, o2.localFontFamily ? t.LocalGlyphMode.all : o2.localIdeographFontFamily ? t.LocalGlyphMode.ideographs : t.LocalGlyphMode.none, o2.localFontFamily || o2.localIdeographFontFamily), this.lineAtlas = new t.LineAtlas(256, 512), this.crossTileSymbolIndex = new Me(), this._layers = {}, this._serializedLayers = {}, this._order = [], this._sourceCaches = {}, this._otherSourceCaches = {}, this._symbolSourceCaches = {}, this.zoomHistory = new t.ZoomHistory(), this._loaded = false, this._availableImages = [], this._resetUpdates(), this.dispatcher.broadcast("setReferrer", t.getReferrer());
        var a2 = this;
        this._rtlTextPluginCallback = i2.registerForPluginStateChange(function(e3) {
          a2.dispatcher.broadcast("syncRTLPluginState", { pluginStatus: e3.pluginStatus, pluginURL: e3.pluginURL }, function(e4, i3) {
            if (t.triggerPluginCompletionEvent(e4), i3 && i3.every(function(t2) {
              return t2;
            }))
              for (var r3 in a2._sourceCaches) {
                var o3 = a2._sourceCaches[r3], n3 = o3.getSource().type;
                "vector" !== n3 && "geojson" !== n3 || o3.reload();
              }
          });
        }), this.on("data", function(t2) {
          if ("source" === t2.dataType && "metadata" === t2.sourceDataType) {
            var e3 = n2.getSource(t2.sourceId);
            if (e3 && e3.vectorLayerIds)
              for (var i3 in n2._layers) {
                var r3 = n2._layers[i3];
                r3.source === e3.id && n2._validateLayer(r3);
              }
          }
        });
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.loadURL = function(e3, i3) {
        var r2 = this;
        void 0 === i3 && (i3 = {}), this.fire(new t.Event("dataloading", { dataType: "style" }));
        var o2 = "boolean" == typeof i3.validate ? i3.validate : !t.issgmapURL(e3);
        e3.indexOf(".sg") == e3.length - 3 || (e3 = this.map._requestManager.normalizeStyleURL(e3, i3.accessToken));
        var n2 = this.map._requestManager.transformRequest(e3, t.ResourceType.Style);
        this._request = e3.indexOf(".sg") == e3.length - 3 ? t.getArrayBuffer(n2, function(e4, i4, n3, a2) {
          if (r2._request = null, e4)
            r2.fire(new t.ErrorEvent(e4));
          else if (i4) {
            var s2 = t.BufferTostyle(new t.Protobuf(i4));
            r2._load(s2, o2, i4);
          }
        }) : t.getJSON(n2, function(e4, i4) {
          r2._request = null, e4 ? r2.fire(new t.ErrorEvent(e4)) : i4 && r2._load(i4, o2);
        });
      }, i2.prototype.loadJSON = function(e3, i3) {
        var r2 = this;
        void 0 === i3 && (i3 = {}), this.fire(new t.Event("dataloading", { dataType: "style" })), this._request = t.browser.frame(function() {
          r2._request = null, r2._load(e3, false !== i3.validate);
        });
      }, i2.prototype.loadEmpty = function() {
        this.fire(new t.Event("dataloading", { dataType: "style" })), this._load(Fe, false);
      }, i2.prototype._resetOldstyle = function(t2) {
        return t2 ? t2.map(function(t3) {
          var e3 = t3.paint && t3.paint["line-pattern-mode"];
          if (null != e3 || null != e3) {
            var i3 = t3.paint["line-pattern"];
            "number" == typeof e3 && "string" == typeof i3 ? (t3.paint["line-pattern"] = 0 == e3 || 3 == e3 ? i3 : "dash_100_0", t3.paint["line-outline-pattern"] = 1 == e3 || 3 == e3 ? i3 : "dash_100_0") : (e3 = JSON.parse(JSON.stringify(e3)), i3 = JSON.parse(JSON.stringify(i3)), t3.paint["line-pattern"] = ["match", e3, [0, 3], i3, "dash_100_0"], t3.paint["line-outline-pattern"] = ["match", e3, [1, 3], i3, "dash_100_0"]), delete t3.paint["line-pattern-mode"];
          }
          return t3;
        }) : [];
      }, i2.prototype._load = function(e3, i3, r2) {
        for (var o2 in e3.layers = this._resetOldstyle(e3.layers), this._loaded = true, this.stylesheet = e3, e3.sources)
          this.addSource(o2, e3.sources[o2], { validate: false });
        this._changed = false, e3.sprite ? this._loadSprite(e3.sprite) : this.imageManager.setLoaded(true), this.glyphManager.setURL(e3.glyphs);
        var n2 = Ot(this.stylesheet.layers);
        this._order = n2.map(function(t2) {
          return t2.id;
        }), this._layers = {}, this._serializedLayers = {};
        for (var a2 = 0, s2 = n2; a2 < s2.length; a2 += 1) {
          var c2 = s2[a2];
          (c2 = t.createStyleLayer(c2)).setEventedParent(this, { layer: { id: c2.id } }), this._layers[c2.id] = c2, this._serializedLayers[c2.id] = c2.serialize();
        }
        r2 ? this.dispatcher.broadcast("setLayersbuffer", t.isIE11() ? [].slice.call(new Uint8Array(data)) : r2.slice(0)) : (this.dispatcher.broadcast("setLayers", this._serializeLayers(this._order)), e3.xml && this.dispatcher.broadcast("setXml", e3.xml)), this.light = new g(this.stylesheet.light), this.fire(new t.Event("data", { dataType: "style" })), this.fire(new t.Event("style.load"));
      }, i2.prototype._loadSprite = function(e3) {
        var i3 = this;
        this._spriteRequest = p(e3, this.map._requestManager, function(e4, r2) {
          if (i3._spriteRequest = null, e4)
            i3.fire(new t.ErrorEvent(e4));
          else if (r2)
            for (var o2 in r2)
              i3.getImage(o2) || i3.imageManager.addImage(o2, r2[o2]);
          i3.imageManager.setLoaded(true), i3._availableImages = i3.imageManager.listImages(), i3.dispatcher.broadcast("setImages", i3._availableImages), i3.fire(new t.Event("data", { dataType: "style" }));
        });
      }, i2.prototype._validateLayer = function(e3) {
        var i3 = this.getSource(e3.source);
        if (i3) {
          var r2 = e3.sourceLayer;
          r2 && ("geojson" === i3.type || i3.vectorLayerIds && -1 === i3.vectorLayerIds.indexOf(r2)) && this.fire(new t.ErrorEvent(new Error('Source layer "' + r2 + '" does not exist on source "' + i3.id + '" as specified by style layer "' + e3.id + '"')));
        }
      }, i2.prototype.loaded = function() {
        if (!this._loaded)
          return false;
        if (Object.keys(this._updatedSources).length)
          return false;
        for (var t2 in this._sourceCaches)
          if (!this._sourceCaches[t2].loaded())
            return false;
        return !!this.imageManager.isLoaded();
      }, i2.prototype._serializeLayers = function(t2) {
        for (var e3 = [], i3 = 0, r2 = t2; i3 < r2.length; i3 += 1) {
          var o2 = this._layers[r2[i3]];
          "custom" !== o2.type && e3.push(o2.serialize());
        }
        return e3;
      }, i2.prototype.hasTransitions = function() {
        if (this.light && this.light.hasTransition())
          return true;
        for (var t2 in this._sourceCaches)
          if (this._sourceCaches[t2].hasTransition())
            return true;
        for (var e3 in this._layers)
          if (this._layers[e3].hasTransition())
            return true;
        return false;
      }, i2.prototype._checkLoaded = function() {
        if (!this._loaded)
          throw new Error("Style is not done loading");
      }, i2.prototype.update = function(e3) {
        if (this._loaded) {
          var i3 = this._changed;
          if (this._changed) {
            var r2 = Object.keys(this._updatedLayers), o2 = Object.keys(this._removedLayers);
            for (var n2 in (r2.length || o2.length) && this._updateWorkerLayers(r2, o2), this._updatedSources) {
              var a2 = this._updatedSources[n2];
              "reload" === a2 ? this._reloadSource(n2) : "clear" === a2 && this._clearSource(n2);
            }
            for (var s2 in this._updateTilesForChangedImages(), this._updatedPaintProps)
              this._layers[s2].updateTransitions(e3);
            this.light.updateTransitions(e3), this._resetUpdates();
          }
          var c2 = {};
          for (var l2 in this._sourceCaches) {
            var u2 = this._sourceCaches[l2];
            c2[l2] = u2.used, u2.used = false;
          }
          for (var h2 = 0, p2 = this._order; h2 < p2.length; h2 += 1) {
            var f2 = this._layers[p2[h2]];
            if (f2.recalculate(e3, this._availableImages), !f2.isHidden(e3.zoom)) {
              var d2 = this._getLayerSourceCache(f2);
              d2 && (d2.used = true);
            }
          }
          for (var _3 in c2) {
            var m2 = this._sourceCaches[_3];
            c2[_3] !== m2.used && m2.getSource().fire(new t.Event("data", { sourceDataType: "visibility", dataType: "source", sourceId: m2.getSource().id }));
          }
          this.light.recalculate(e3), this.z = e3.zoom, i3 && this.fire(new t.Event("data", { dataType: "style" }));
        }
      }, i2.prototype._updateTilesForChangedImages = function() {
        var t2 = Object.keys(this._changedImages);
        if (t2.length) {
          for (var e3 in this._sourceCaches)
            this._sourceCaches[e3].reloadTilesForDependencies(["icons", "patterns"], t2);
          this._changedImages = {};
        }
      }, i2.prototype._updateWorkerLayers = function(t2, e3) {
        this.dispatcher.broadcast("updateLayers", { layers: this._serializeLayers(t2), removedIds: e3 });
      }, i2.prototype._resetUpdates = function() {
        this._changed = false, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {}, this._changedImages = {};
      }, i2.prototype.setState = function(e3, i3) {
        var r2 = this;
        if (this._checkLoaded(), Le(this, t.validateStyle(e3)))
          return false;
        (e3 = t.clone$1(e3)).layers = Ot(e3.layers);
        var o2 = function(e4, i4) {
          if (!e4)
            return [{ command: Ft.setStyle, args: [i4] }];
          var r3 = [];
          try {
            if (!t.deepEqual(e4.version, i4.version))
              return [{ command: Ft.setStyle, args: [i4] }];
            t.deepEqual(e4.center, i4.center) || r3.push({ command: Ft.setCenter, args: [i4.center] }), t.deepEqual(e4.zoom, i4.zoom) || r3.push({ command: Ft.setZoom, args: [i4.zoom] }), t.deepEqual(e4.bearing, i4.bearing) || r3.push({ command: Ft.setBearing, args: [i4.bearing] }), t.deepEqual(e4.pitch, i4.pitch) || r3.push({ command: Ft.setPitch, args: [i4.pitch] }), t.deepEqual(e4.sprite, i4.sprite) || r3.push({ command: Ft.setSprite, args: [i4.sprite] }), t.deepEqual(e4.glyphs, i4.glyphs) || r3.push({ command: Ft.setGlyphs, args: [i4.glyphs] }), t.deepEqual(e4.transition, i4.transition) || r3.push({ command: Ft.setTransition, args: [i4.transition] }), t.deepEqual(e4.light, i4.light) || r3.push({ command: Ft.setLight, args: [i4.light] });
            var o3 = {}, n3 = [];
            !function(e5, i5, r4, o4) {
              var n4;
              for (n4 in i5 = i5 || {}, e5 = e5 || {})
                e5.hasOwnProperty(n4) && (i5.hasOwnProperty(n4) || Nt(n4, r4, o4));
              for (n4 in i5)
                i5.hasOwnProperty(n4) && (e5.hasOwnProperty(n4) ? t.deepEqual(e5[n4], i5[n4]) || ("geojson" === e5[n4].type && "geojson" === i5[n4].type && Vt(e5, i5, n4) ? r4.push({ command: Ft.setGeoJSONSourceData, args: [n4, i5[n4].data] }) : jt(n4, i5, r4, o4)) : Ut(n4, i5, r4));
            }(e4.sources, i4.sources, n3, o3);
            var a2 = [];
            e4.layers && e4.layers.forEach(function(t2) {
              o3[t2.source] ? r3.push({ command: Ft.removeLayer, args: [t2.id] }) : a2.push(t2);
            }), r3 = r3.concat(n3), function(e5, i5, r4) {
              i5 = i5 || [];
              var o4, n4, a3, s2, c2, l2, u2, h2 = (e5 = e5 || []).map(Zt), p2 = i5.map(Zt), f2 = e5.reduce(Gt, {}), d2 = i5.reduce(Gt, {}), _3 = h2.slice(), m2 = /* @__PURE__ */ Object.create(null);
              for (o4 = 0, n4 = 0; o4 < h2.length; o4++)
                d2.hasOwnProperty(a3 = h2[o4]) ? n4++ : (r4.push({ command: Ft.removeLayer, args: [a3] }), _3.splice(_3.indexOf(a3, n4), 1));
              for (o4 = 0, n4 = 0; o4 < p2.length; o4++)
                _3[_3.length - 1 - o4] !== (a3 = p2[p2.length - 1 - o4]) && (f2.hasOwnProperty(a3) ? (r4.push({ command: Ft.removeLayer, args: [a3] }), _3.splice(_3.lastIndexOf(a3, _3.length - n4), 1)) : n4++, r4.push({ command: Ft.addLayer, args: [d2[a3], l2 = _3[_3.length - o4]] }), _3.splice(_3.length - o4, 0, a3), m2[a3] = true);
              for (o4 = 0; o4 < p2.length; o4++)
                if (s2 = f2[a3 = p2[o4]], c2 = d2[a3], !m2[a3] && !t.deepEqual(s2, c2))
                  if (t.deepEqual(s2.source, c2.source) && t.deepEqual(s2["source-layer"], c2["source-layer"]) && t.deepEqual(s2.type, c2.type)) {
                    for (u2 in qt(s2.layout, c2.layout, r4, a3, null, Ft.setLayoutProperty), qt(s2.paint, c2.paint, r4, a3, null, Ft.setPaintProperty), t.deepEqual(s2.filter, c2.filter) || r4.push({ command: Ft.setFilter, args: [a3, c2.filter] }), t.deepEqual(s2.minzoom, c2.minzoom) && t.deepEqual(s2.maxzoom, c2.maxzoom) || r4.push({ command: Ft.setLayerZoomRange, args: [a3, c2.minzoom, c2.maxzoom] }), s2)
                      s2.hasOwnProperty(u2) && "layout" !== u2 && "paint" !== u2 && "filter" !== u2 && "metadata" !== u2 && "minzoom" !== u2 && "maxzoom" !== u2 && (0 === u2.indexOf("paint.") ? qt(s2[u2], c2[u2], r4, a3, u2.slice(6), Ft.setPaintProperty) : t.deepEqual(s2[u2], c2[u2]) || r4.push({ command: Ft.setLayerProperty, args: [a3, u2, c2[u2]] }));
                    for (u2 in c2)
                      c2.hasOwnProperty(u2) && !s2.hasOwnProperty(u2) && "layout" !== u2 && "paint" !== u2 && "filter" !== u2 && "metadata" !== u2 && "minzoom" !== u2 && "maxzoom" !== u2 && (0 === u2.indexOf("paint.") ? qt(s2[u2], c2[u2], r4, a3, u2.slice(6), Ft.setPaintProperty) : t.deepEqual(s2[u2], c2[u2]) || r4.push({ command: Ft.setLayerProperty, args: [a3, u2, c2[u2]] }));
                  } else
                    r4.push({ command: Ft.removeLayer, args: [a3] }), l2 = _3[_3.lastIndexOf(a3) + 1], r4.push({ command: Ft.addLayer, args: [c2, l2] });
            }(a2, i4.layers, r3);
          } catch (t2) {
            console.warn("Unable to compute style diff:", t2), r3 = [{ command: Ft.setStyle, args: [i4] }];
          }
          return r3;
        }(this.serialize(), e3).filter(function(t2) {
          return !(t2.command in Oe);
        });
        if (0 === o2.length)
          return false;
        var n2 = o2.filter(function(t2) {
          return !(t2.command in Re);
        });
        if (n2.length > 0)
          throw new Error("Unimplemented: " + n2.map(function(t2) {
            return t2.command;
          }).join(", ") + ".");
        return o2.forEach(function(t2) {
          "setTransition" !== t2.command && r2[t2.command].apply(r2, t2.args);
        }), this.stylesheet = e3, true;
      }, i2.prototype.addImage = function(e3, i3) {
        if (this.getImage(e3))
          return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));
        this.imageManager.addImage(e3, i3), this._afterImageUpdated(e3);
      }, i2.prototype.updateImage = function(t2, e3) {
        this.imageManager.updateImage(t2, e3);
      }, i2.prototype.getImage = function(t2) {
        return this.imageManager.getImage(t2);
      }, i2.prototype.removeImage = function(e3) {
        if (!this.getImage(e3))
          return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));
        this.imageManager.removeImage(e3), this._afterImageUpdated(e3);
      }, i2.prototype._afterImageUpdated = function(e3) {
        this._availableImages = this.imageManager.listImages(), this._changedImages[e3] = true, this._changed = true, this.dispatcher.broadcast("setImages", this._availableImages), this.fire(new t.Event("data", { dataType: "style" }));
      }, i2.prototype.listImages = function() {
        return this._checkLoaded(), this.imageManager.listImages();
      }, i2.prototype.addSource = function(e3, i3, r2) {
        var o2 = this;
        if (void 0 === r2 && (r2 = {}), this._checkLoaded(), void 0 !== this.getSource(e3))
          throw new Error("There is already a source with this ID");
        if (!i3.type)
          throw new Error("The type property must be defined, but only the following properties were given: " + Object.keys(i3).join(", ") + ".");
        if (!(["vector", "raster", "geojson", "video", "image"].indexOf(i3.type) >= 0 && this._validate(t.validateStyle.source, "sources." + e3, i3, null, r2))) {
          this.map && this.map._collectResourceTiming && (i3.collectResourceTiming = true);
          var n2 = function(e4, i4, r3, o3) {
            var n3 = new M[i4.type](e4, i4, r3, o3);
            if (n3.id !== e4)
              throw new Error("Expected Source id to be " + e4 + " instead of " + n3.id);
            return t.bindAll(["load", "abort", "unload", "serialize", "prepare"], n3), n3;
          }(e3, i3, this.dispatcher, this);
          n2.setEventedParent(this, function() {
            return { isSourceLoaded: o2.loaded(), source: n2.serialize(), sourceId: e3 };
          });
          var a2 = function(t2) {
            var i4 = (t2 ? "symbol:" : "other:") + e3, r3 = o2._sourceCaches[i4] = new Pt(i4, n2, t2);
            (t2 ? o2._symbolSourceCaches : o2._otherSourceCaches)[e3] = r3, r3.style = o2, r3.onAdd(o2.map);
          };
          a2(false), "vector" !== i3.type && "geojson" !== i3.type || a2(true), n2.onAdd && n2.onAdd(this.map), this._changed = true;
        }
      }, i2.prototype.removeSource = function(e3) {
        this._checkLoaded();
        var i3 = this.getSource(e3);
        if (void 0 === i3)
          throw new Error("There is no source with this ID");
        for (var r2 in this._layers)
          if (this._layers[r2].source === e3)
            return this.fire(new t.ErrorEvent(new Error('Source "' + e3 + '" cannot be removed while layer "' + r2 + '" is using it.')));
        for (var o2 = 0, n2 = this._getSourceCaches(e3); o2 < n2.length; o2 += 1) {
          var a2 = n2[o2];
          delete this._sourceCaches[a2.id], delete this._updatedSources[a2.id], a2.fire(new t.Event("data", { sourceDataType: "metadata", dataType: "source", sourceId: a2.getSource().id })), a2.setEventedParent(null), a2.clearTiles();
        }
        delete this._otherSourceCaches[e3], delete this._symbolSourceCaches[e3], i3.setEventedParent(null), i3.onRemove && i3.onRemove(this.map), this._changed = true;
      }, i2.prototype.setGeoJSONSourceData = function(t2, e3) {
        this._checkLoaded(), this.getSource(t2).setData(e3), this._changed = true;
      }, i2.prototype.getSource = function(t2) {
        var e3 = this._getSourceCache(t2);
        return e3 && e3.getSource();
      }, i2.prototype.addLayer = function(e3, i3, r2) {
        void 0 === r2 && (r2 = {}), this._checkLoaded();
        var o2 = e3.id;
        if (this.getLayer(o2))
          this.fire(new t.ErrorEvent(new Error('Layer with id "' + o2 + '" already exists on this map')));
        else {
          var n2;
          if ("esymbol" === e3.type || "eline" === e3.type) {
            if (!t.window.SGMap.pluginData && !this.arrowVertexArray)
              return void this.fire(new t.ErrorEvent(new Error("\u8BF7\u9884\u5148\u52A0\u8F7D\u7535\u7F51\u7B26\u53F7\u7ED8\u5236\u63D2\u4EF6")));
            !this.arrowVertexArray && t.window.SGMap.pluginData && this.getArrowVertexArray();
          }
          if ("custom" === e3.type) {
            if (Le(this, t.validateCustomStyleLayer(e3)))
              return;
            n2 = t.createStyleLayer(e3);
          } else {
            if ("object" == typeof e3.source && (this.addSource(o2, e3.source), e3 = t.clone$1(e3), e3 = t.extend(e3, { source: o2 })), this._validate(t.validateStyle.layer, "layers." + o2, e3, { arrayIndex: -1 }, r2))
              return;
            n2 = t.createStyleLayer(e3), this._validateLayer(n2), n2.setEventedParent(this, { layer: { id: o2 } }), this._serializedLayers[n2.id] = n2.serialize();
          }
          var a2 = i3 ? this._order.indexOf(i3) : this._order.length;
          if (i3 && -1 === a2)
            this.fire(new t.ErrorEvent(new Error('Layer with id "' + i3 + '" does not exist on this map.')));
          else {
            this._order.splice(a2, 0, o2), this._layerOrderChanged = true, this._layers[o2] = n2;
            var s2 = this._getLayerSourceCache(n2);
            if (this._removedLayers[o2] && n2.source && s2 && "custom" !== n2.type) {
              var c2 = this._removedLayers[o2];
              delete this._removedLayers[o2], c2.type !== n2.type ? this._updatedSources[n2.source] = "clear" : (this._updatedSources[n2.source] = "reload", s2.pause());
            }
            this._updateLayer(n2), n2.onAdd && n2.onAdd(this.map);
          }
        }
      }, i2.prototype.moveLayer = function(e3, i3) {
        if (this._checkLoaded(), this._changed = true, this._layers[e3]) {
          if (e3 !== i3) {
            var r2 = this._order.indexOf(e3);
            this._order.splice(r2, 1);
            var o2 = i3 ? this._order.indexOf(i3) : this._order.length;
            i3 && -1 === o2 ? this.fire(new t.ErrorEvent(new Error('Layer with id "' + i3 + '" does not exist on this map.'))) : (this._order.splice(o2, 0, e3), this._layerOrderChanged = true);
          }
        } else
          this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be moved.")));
      }, i2.prototype.removeLayer = function(e3) {
        this._checkLoaded();
        var i3 = this._layers[e3];
        if (i3) {
          i3.setEventedParent(null);
          var r2 = this._order.indexOf(e3);
          this._order.splice(r2, 1), this._layerOrderChanged = true, this._changed = true, this._removedLayers[e3] = i3, delete this._layers[e3], delete this._serializedLayers[e3], delete this._updatedLayers[e3], delete this._updatedPaintProps[e3], i3.onRemove && i3.onRemove(this.map);
        } else
          this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be removed.")));
      }, i2.prototype.getLayer = function(t2) {
        return this._layers[t2];
      }, i2.prototype.hasLayer = function(t2) {
        return t2 in this._layers;
      }, i2.prototype.setLayerZoomRange = function(e3, i3, r2) {
        this._checkLoaded();
        var o2 = this.getLayer(e3);
        o2 ? o2.minzoom === i3 && o2.maxzoom === r2 || (null != i3 && (o2.minzoom = i3), null != r2 && (o2.maxzoom = r2), this._updateLayer(o2)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot have zoom extent.")));
      }, i2.prototype.setFilter = function(e3, i3, r2) {
        void 0 === r2 && (r2 = {}), this._checkLoaded();
        var o2 = this.getLayer(e3);
        if (o2) {
          if (!t.deepEqual(o2.filter, i3))
            return null == i3 ? (o2.filter = void 0, void this._updateLayer(o2)) : void (this._validate(t.validateStyle.filter, "layers." + o2.id + ".filter", i3, null, r2) || (o2.filter = t.clone$1(i3), this._updateLayer(o2)));
        } else
          this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be filtered.")));
      }, i2.prototype.getFilter = function(e3) {
        return t.clone$1(this.getLayer(e3).filter);
      }, i2.prototype.setLayoutProperty = function(e3, i3, r2, o2) {
        void 0 === o2 && (o2 = {}), this._checkLoaded();
        var n2 = this.getLayer(e3);
        n2 ? t.deepEqual(n2.getLayoutProperty(i3), r2) || (n2.setLayoutProperty(i3, r2, o2), this._updateLayer(n2)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be styled.")));
      }, i2.prototype.getLayoutProperty = function(e3, i3) {
        var r2 = this.getLayer(e3);
        if (r2)
          return r2.getLayoutProperty(i3);
        this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style.")));
      }, i2.prototype.setPaintProperty = function(e3, i3, r2, o2) {
        void 0 === o2 && (o2 = {}), this._checkLoaded();
        var n2 = this.getLayer(e3);
        n2 ? t.deepEqual(n2.getPaintProperty(i3), r2) || (n2.setPaintProperty(i3, r2, o2) && this._updateLayer(n2), this._changed = true, this._updatedPaintProps[e3] = true) : this.fire(new t.ErrorEvent(new Error("The layer '" + e3 + "' does not exist in the map's style and cannot be styled.")));
      }, i2.prototype.getPaintProperty = function(t2, e3) {
        return this.getLayer(t2).getPaintProperty(e3);
      }, i2.prototype.setFeatureState = function(e3, i3) {
        this._checkLoaded();
        var r2 = e3.source, o2 = e3.sourceLayer, n2 = this.getSource(r2);
        if (void 0 !== n2) {
          var a2 = n2.type;
          if ("geojson" === a2 && o2)
            this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));
          else if ("vector" !== a2 || o2) {
            void 0 === e3.id && this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided.")));
            for (var s2 = 0, c2 = this._getSourceCaches(r2); s2 < c2.length; s2 += 1)
              c2[s2].setFeatureState(o2, e3.id, i3);
          } else
            this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
        } else
          this.fire(new t.ErrorEvent(new Error("The source '" + r2 + "' does not exist in the map's style.")));
      }, i2.prototype.removeFeatureState = function(e3, i3) {
        this._checkLoaded();
        var r2 = e3.source, o2 = this.getSource(r2);
        if (void 0 !== o2) {
          var n2 = o2.type, a2 = "vector" === n2 ? e3.sourceLayer : void 0;
          if ("vector" !== n2 || a2)
            if (i3 && "string" != typeof e3.id && "number" != typeof e3.id)
              this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));
            else
              for (var s2 = 0, c2 = this._getSourceCaches(r2); s2 < c2.length; s2 += 1)
                c2[s2].removeFeatureState(a2, e3.id, i3);
          else
            this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
        } else
          this.fire(new t.ErrorEvent(new Error("The source '" + r2 + "' does not exist in the map's style.")));
      }, i2.prototype.getFeatureState = function(e3) {
        this._checkLoaded();
        var i3 = e3.source, r2 = e3.sourceLayer, o2 = this.getSource(i3);
        if (void 0 !== o2) {
          if ("vector" !== o2.type || r2)
            return void 0 === e3.id && this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))), this._getSourceCaches(i3)[0].getFeatureState(r2, e3.id);
          this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
        } else
          this.fire(new t.ErrorEvent(new Error("The source '" + i3 + "' does not exist in the map's style.")));
      }, i2.prototype.getTransition = function() {
        return t.extend({ duration: 300, delay: 0 }, this.stylesheet && this.stylesheet.transition);
      }, i2.prototype.serialize = function() {
        var e3 = {};
        for (var i3 in this._sourceCaches) {
          var r2 = this._sourceCaches[i3].getSource();
          e3[r2.id] || (e3[r2.id] = r2.serialize());
        }
        return t.filterObject({ version: this.stylesheet.version, name: this.stylesheet.name, metadata: this.stylesheet.metadata, light: this.stylesheet.light, center: this.stylesheet.center, zoom: this.stylesheet.zoom, bearing: this.stylesheet.bearing, pitch: this.stylesheet.pitch, sprite: this.stylesheet.sprite, glyphs: this.stylesheet.glyphs, transition: this.stylesheet.transition, sources: e3, layers: this._serializeLayers(this._order), xml: this.stylesheet.xml }, function(t2) {
          return void 0 !== t2;
        });
      }, i2.prototype._updateLayer = function(t2) {
        this._updatedLayers[t2.id] = true;
        var e3 = this._getLayerSourceCache(t2);
        t2.source && !this._updatedSources[t2.source] && e3 && "raster" !== e3.getSource().type && (this._updatedSources[t2.source] = "reload", e3.pause()), this._changed = true;
      }, i2.prototype._flattenAndSortRenderedFeatures = function(t2) {
        for (var e3 = this, i3 = function(t3) {
          return "fill-extrusion" === e3._layers[t3].type;
        }, r2 = {}, o2 = [], n2 = this._order.length - 1; n2 >= 0; n2--) {
          var a2 = this._order[n2];
          if (i3(a2)) {
            r2[a2] = n2;
            for (var s2 = 0, c2 = t2; s2 < c2.length; s2 += 1) {
              var l2 = c2[s2][a2];
              if (l2)
                for (var u2 = 0, h2 = l2; u2 < h2.length; u2 += 1)
                  o2.push(h2[u2]);
            }
          }
        }
        o2.sort(function(t3, e4) {
          return e4.intersectionZ - t3.intersectionZ;
        });
        for (var p2 = [], f2 = this._order.length - 1; f2 >= 0; f2--) {
          var d2 = this._order[f2];
          if (i3(d2))
            for (var _3 = o2.length - 1; _3 >= 0; _3--) {
              var m2 = o2[_3].feature;
              if (r2[m2.layer.id] < f2)
                break;
              p2.push(m2), o2.pop();
            }
          else
            for (var g2 = 0, v2 = t2; g2 < v2.length; g2 += 1) {
              var y2 = v2[g2][d2];
              if (y2)
                for (var b2 = 0, w2 = y2; b2 < w2.length; b2 += 1)
                  p2.push(w2[b2].feature);
            }
        }
        return p2;
      }, i2.prototype.queryRenderedFeatures = function(e3, i3, r2) {
        i3 && i3.filter && this._validate(t.validateStyle.filter, "queryRenderedFeatures.filter", i3.filter, null, i3);
        var o2 = {};
        if (i3 && i3.layers) {
          if (!Array.isArray(i3.layers))
            return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))), [];
          for (var n2 = 0, a2 = i3.layers; n2 < a2.length; n2 += 1) {
            var s2 = a2[n2], c2 = this._layers[s2];
            if (!c2)
              return this.fire(new t.ErrorEvent(new Error("The layer '" + s2 + "' does not exist in the map's style and cannot be queried for features."))), [];
            o2[c2.source] = true;
          }
        }
        var l2 = [];
        for (var u2 in i3.availableImages = this._availableImages, this._sourceCaches) {
          var h2 = this._sourceCaches[u2].getSource().id;
          i3.layers && !o2[h2] || l2.push(R(this._sourceCaches[u2], this._layers, this._serializedLayers, e3, i3, r2));
        }
        return this.placement && l2.push(function(t2, e4, i4, r3, o3, n3, a3) {
          for (var s3 = {}, c3 = n3.queryRenderedSymbols(r3), l3 = [], u3 = 0, h3 = Object.keys(c3).map(Number); u3 < h3.length; u3 += 1)
            l3.push(a3[h3[u3]]);
          l3.sort(F);
          for (var p2 = function() {
            var i5 = d2[f2], r4 = i5.featureIndex.lookupSymbolFeatures(c3[i5.bucketInstanceId], e4, i5.bucketIndex, i5.sourceLayerIndex, o3.filter, o3.layers, o3.availableImages, t2);
            for (var n4 in r4) {
              var a4 = s3[n4] = s3[n4] || [], l4 = r4[n4];
              l4.sort(function(t3, e5) {
                var r5 = i5.featureSortOrder;
                if (r5) {
                  var o4 = r5.indexOf(t3.featureIndex);
                  return r5.indexOf(e5.featureIndex) - o4;
                }
                return e5.featureIndex - t3.featureIndex;
              });
              for (var u4 = 0, h4 = l4; u4 < h4.length; u4 += 1)
                a4.push(h4[u4]);
            }
          }, f2 = 0, d2 = l3; f2 < d2.length; f2 += 1)
            p2();
          var _3 = function(e5) {
            s3[e5].forEach(function(r4) {
              var o4 = r4.feature, n4 = i4(t2[e5]).getFeatureState(o4.layer["source-layer"], o4.id);
              o4.source = o4.layer.source, o4.layer["source-layer"] && (o4.sourceLayer = o4.layer["source-layer"]), o4.state = n4;
            });
          };
          for (var m2 in s3)
            _3(m2);
          return s3;
        }(this._layers, this._serializedLayers, this._getLayerSourceCache.bind(this), e3, i3, this.placement.collisionIndex, this.placement.retainedQueryData)), this._flattenAndSortRenderedFeatures(l2);
      }, i2.prototype.querySourceFeatures = function(e3, i3) {
        i3 && i3.filter && this._validate(t.validateStyle.filter, "querySourceFeatures.filter", i3.filter, null, i3);
        for (var r2 = [], o2 = 0, n2 = this._getSourceCaches(e3); o2 < n2.length; o2 += 1)
          r2 = r2.concat(O(n2[o2], i3));
        return r2;
      }, i2.prototype.addSourceType = function(t2, e3, r2) {
        return i2.getSourceType(t2) ? r2(new Error('A source type called "' + t2 + '" already exists.')) : (i2.setSourceType(t2, e3), e3.workerSourceURL ? void this.dispatcher.broadcast("loadWorkerSource", { name: t2, url: e3.workerSourceURL }, r2) : r2(null, null));
      }, i2.prototype.getLight = function() {
        return this.light.getLight();
      }, i2.prototype.setLight = function(e3, i3) {
        void 0 === i3 && (i3 = {}), this._checkLoaded();
        var r2 = this.light.getLight(), o2 = false;
        for (var n2 in e3)
          if (!t.deepEqual(e3[n2], r2[n2])) {
            o2 = true;
            break;
          }
        if (o2) {
          var a2 = { now: t.browser.now(), transition: t.extend({ duration: 300, delay: 0 }, this.stylesheet.transition) };
          this.light.setLight(e3, i3), this.light.updateTransitions(a2);
        }
      }, i2.prototype._validate = function(e3, i3, r2, o2, n2) {
        return void 0 === n2 && (n2 = {}), (!n2 || false !== n2.validate) && Le(this, e3.call(t.validateStyle, t.extend({ key: i3, style: this.serialize(), value: r2, styleSpec: t.styleSpec }, o2)));
      }, i2.prototype._remove = function() {
        for (var e3 in this._request && (this._request.cancel(), this._request = null), this._spriteRequest && (this._spriteRequest.cancel(), this._spriteRequest = null), t.evented.off("pluginStateChange", this._rtlTextPluginCallback), this._layers)
          this._layers[e3].setEventedParent(null);
        for (var i3 in this._sourceCaches)
          this._sourceCaches[i3].clearTiles(), this._sourceCaches[i3].setEventedParent(null);
        this.imageManager.setEventedParent(null), this.setEventedParent(null), this.dispatcher.remove();
      }, i2.prototype._clearSource = function(t2) {
        for (var e3 = 0, i3 = this._getSourceCaches(t2); e3 < i3.length; e3 += 1)
          i3[e3].clearTiles();
      }, i2.prototype._reloadSource = function(t2) {
        for (var e3 = 0, i3 = this._getSourceCaches(t2); e3 < i3.length; e3 += 1) {
          var r2 = i3[e3];
          r2.resume(), r2.reload();
        }
      }, i2.prototype._updateSources = function(t2) {
        for (var e3 in this._sourceCaches)
          this._sourceCaches[e3].update(t2);
      }, i2.prototype._generateCollisionBoxes = function() {
        for (var t2 in this._sourceCaches) {
          var e3 = this._sourceCaches[t2];
          e3.resume(), e3.reload();
        }
      }, i2.prototype._updatePlacement = function(e3, i3, r2, o2, n2) {
        void 0 === n2 && (n2 = false);
        for (var a2 = false, s2 = false, c2 = {}, l2 = 0, u2 = this._order; l2 < u2.length; l2 += 1) {
          var h2 = this._layers[u2[l2]];
          if ("symbol" === h2.type) {
            if (!c2[h2.source]) {
              var p2 = this._getLayerSourceCache(h2);
              if (!p2)
                continue;
              c2[h2.source] = p2.getRenderableIds(true).map(function(t2) {
                return p2.getTileByID(t2);
              }).sort(function(t2, e4) {
                return e4.tileID.overscaledZ - t2.tileID.overscaledZ || (t2.tileID.isLessThan(e4.tileID) ? -1 : 1);
              });
            }
            var f2 = this.crossTileSymbolIndex.addLayer(h2, c2[h2.source], e3.center.lng);
            a2 = a2 || f2;
          }
        }
        if (this.crossTileSymbolIndex.pruneUnusedLayers(this._order), ((n2 = n2 || this._layerOrderChanged || 0 === r2) || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(t.browser.now(), e3.zoom)) && (this.pauseablePlacement = new Be(e3, this._order, n2, i3, r2, o2, this.placement), this._layerOrderChanged = false), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, c2), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(t.browser.now()), s2 = true), a2 && this.pauseablePlacement.placement.setStale()), s2 || a2)
          for (var d2 = 0, _3 = this._order; d2 < _3.length; d2 += 1) {
            var m2 = this._layers[_3[d2]];
            "symbol" === m2.type && this.placement.updateLayerOpacities(m2, c2[m2.source]);
          }
        return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(t.browser.now());
      }, i2.prototype._releaseSymbolFadeTiles = function() {
        for (var t2 in this._sourceCaches)
          this._sourceCaches[t2].releaseSymbolFadeTiles();
      }, i2.prototype.getImages = function(t2, e3, i3) {
        this.imageManager.getImages(e3.icons, i3), this._updateTilesForChangedImages();
        var r2 = function(t3) {
          t3 && t3.setDependencies(e3.tileID.key, e3.type, e3.icons);
        };
        r2(this._otherSourceCaches[e3.source]), r2(this._symbolSourceCaches[e3.source]);
      }, i2.prototype.getGlyphs = function(t2, e3, i3) {
        this.glyphManager.getGlyphs(e3.stacks, i3);
      }, i2.prototype.getResource = function(e3, i3, r2) {
        return t.makeRequest(i3, r2);
      }, i2.prototype._getSourceCache = function(t2) {
        return this._otherSourceCaches[t2];
      }, i2.prototype._getLayerSourceCache = function(t2) {
        return "symbol" === t2.type ? this._symbolSourceCaches[t2.source] : this._otherSourceCaches[t2.source];
      }, i2.prototype._getSourceCaches = function(t2) {
        var e3 = [];
        return this._otherSourceCaches[t2] && e3.push(this._otherSourceCaches[t2]), this._symbolSourceCaches[t2] && e3.push(this._symbolSourceCaches[t2]), e3;
      }, i2.prototype.getArrowVertexArray = function() {
        this.arrowVertexArray = t.window.SGMap.pluginData.esymbolData;
        var e3 = t.window.SGMap.pluginData.elineData;
        for (var i3 in e3) {
          var r2 = e3[i3].width, o2 = e3[i3].height, n2 = new Uint8Array(e3[i3].data);
          this.map.hasImage(i3) || this.map.addImage(i3, { width: r2, height: o2, data: n2 }, { sdf: true });
        }
      }, i2.prototype.getEleSymbolVertexs = function(t2, e3, i3) {
        var r2 = {};
        if (this.arrowVertexArray && 0 != this.arrowVertexArray.length) {
          for (var o2 = 0; o2 < e3.eleSymbolVertexs.length; o2++) {
            var n2 = e3.eleSymbolVertexs[o2], a2 = this.arrowVertexArray[0].indexOf(n2);
            a2 < 0 ? console.log("\u7B26\u53F7\uFF1A" + n2 + "\u6CA1\u6709\u627E\u5230") : r2[n2] = [this.arrowVertexArray[a2 / 5 + 1], this.arrowVertexArray[0][a2 + 1], this.arrowVertexArray[0][a2 + 2], this.arrowVertexArray[0][a2 + 3], this.arrowVertexArray[0][a2 + 4]];
          }
          return i3(null, r2);
        }
      }, i2;
    }(t.Evented);
    Ue.getSourceType = function(t2) {
      return M[t2];
    }, Ue.setSourceType = function(t2, e2) {
      M[t2] = e2;
    }, Ue.registerForPluginStateChange = t.registerForPluginStateChange;
    var Ne = t.createLayout([{ name: "a_pos", type: "Int16", components: 2 }]), je = _i("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif", "#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"), Ve = _i("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"), qe = _i("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"), Ze = _i("varying vec3 v_data;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define mediump float radius\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define highp vec4 stroke_color\n#pragma sgmap: define mediump float stroke_width\n#pragma sgmap: define lowp float stroke_opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize mediump float radius\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize highp vec4 stroke_color\n#pragma sgmap: initialize mediump float stroke_width\n#pragma sgmap: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define mediump float radius\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define highp vec4 stroke_color\n#pragma sgmap: define mediump float stroke_width\n#pragma sgmap: define lowp float stroke_opacity\nvoid main(void) {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize mediump float radius\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize highp vec4 stroke_color\n#pragma sgmap: initialize mediump float stroke_width\n#pragma sgmap: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"), Ge = _i("void main() {gl_FragColor=vec4(1.0);}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"), He = _i("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma sgmap: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma sgmap: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma sgmap: define highp float weight\n#pragma sgmap: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma sgmap: initialize highp float weight\n#pragma sgmap: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"), We = _i("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"), Xe = _i("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}", "attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"), Ke = _i("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}", "attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"), Ye = _i("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}", "attribute vec2 a_pos;attribute vec2 a_uv;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_uv;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"), Je = _i("#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"), Qe = _i("varying vec2 v_pos;\n#pragma sgmap: define highp vec4 outline_color\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 outline_color\n#pragma sgmap: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma sgmap: define highp vec4 outline_color\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 outline_color\n#pragma sgmap: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}", "fillOutline"), $e = _i("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\nvoid main() {\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\n#pragma sgmap: define lowp float pixel_ratio_from\n#pragma sgmap: define lowp float pixel_ratio_to\nvoid main() {\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\n#pragma sgmap: initialize lowp float pixel_ratio_from\n#pragma sgmap: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}", "fillOutlinePattern"), ti = _i("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\nvoid main() {\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\n#pragma sgmap: define lowp float pixel_ratio_from\n#pragma sgmap: define lowp float pixel_ratio_to\nvoid main() {\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\n#pragma sgmap: initialize lowp float pixel_ratio_from\n#pragma sgmap: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}", "fillPattern"), ei = _i("varying vec4 v_color;void main() {gl_FragColor=v_color*zoom_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma sgmap: define highp float base\n#pragma sgmap: define highp float height\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define highp vec4 topcolor\nvoid main() {\n#pragma sgmap: initialize highp float base\n#pragma sgmap: initialize highp float height\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize highp vec4 topcolor\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);vec3 ambientLightColor=u_lightcolor;float ambientStrength=u_lightintensity+0.39;vec3 ambient=ambientStrength*ambientLightColor;vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;float lightStrength=0.1;float nDotL=max(dot(normal/16384.0,lightDir),0.0);vec3 diff=lightStrength*lightColor*nDotL;v_color=t > 0.0 ? (topcolor.a==0.0?color: topcolor): color ;v_color.rgb*=diff+ambient;v_color*=u_opacity;}", "fillExtrusion"), ii = _i("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;varying float flag_top;\n#pragma sgmap: define lowp float base\n#pragma sgmap: define lowp float height\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\n#pragma sgmap: define lowp float pixel_ratio_from\n#pragma sgmap: define lowp float pixel_ratio_to\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define highp vec4 topcolor\nvoid main() {\n#pragma sgmap: initialize lowp float base\n#pragma sgmap: initialize lowp float height\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\n#pragma sgmap: initialize lowp float pixel_ratio_from\n#pragma sgmap: initialize lowp float pixel_ratio_to\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize highp vec4 topcolor\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);vec4 buildTopColor=v_lighting;if(topcolor.a!=0.0){buildTopColor= topcolor*buildTopColor;}gl_FragColor=flag_top+0.005>=1.0? buildTopColor : (mixedColor*v_lighting);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;varying float flag_top;\n#pragma sgmap: define lowp float base\n#pragma sgmap: define lowp float height\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\n#pragma sgmap: define lowp float pixel_ratio_from\n#pragma sgmap: define lowp float pixel_ratio_to\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define highp vec4 topcolor\nvoid main() {\n#pragma sgmap: initialize lowp float base\n#pragma sgmap: initialize lowp float height\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\n#pragma sgmap: initialize lowp float pixel_ratio_from\n#pragma sgmap: initialize lowp float pixel_ratio_to\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize highp vec4 topcolor\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);flag_top=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0 ?1.0 :0.0;vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=tileRatio*pos/display_size_a;v_pos_b=tileRatio*pos/display_size_b;v_lighting=vec4(0.0,0.0,0.0,1.0);vec3 ambientLightColor=u_lightcolor;float ambientStrength=u_lightintensity+0.39;vec3 ambient=ambientStrength*ambientLightColor;vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;float lightStrength=0.1;float nDotL=max(dot(normal/16384.0,lightDir),0.0);vec3 diff=lightStrength*lightColor*nDotL;v_lighting.rgb+=diff+ambient;v_lighting*=u_opacity;}", "fillExtrusionPattern"), ri = _i("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"), oi = _i("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"), ni = _i("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump vec2 u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define mediump float gapwidth\n#pragma sgmap: define lowp float offset\n#pragma sgmap: define mediump float width\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump float gapwidth\n#pragma sgmap: initialize lowp float offset\n#pragma sgmap: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist.x/u_ratio.x,dist.y/u_ratio.y,0.0,0.0);gl_Position=u_matrix*vec4(pos.x+offset2.x/u_ratio.x,pos.y+offset2.y/u_ratio.y,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"), ai = _i("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump vec2 u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define mediump float gapwidth\n#pragma sgmap: define lowp float offset\n#pragma sgmap: define mediump float width\nvoid main() {\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump float gapwidth\n#pragma sgmap: initialize lowp float offset\n#pragma sgmap: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist.x/u_ratio.x,dist.y/u_ratio.y,0.0,0.0);gl_Position=u_matrix*vec4(pos.x+offset2.x/u_ratio.x,pos.y+offset2.y/u_ratio.y,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"), si = _i("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;uniform float u_use_color;uniform lowp float u_outline;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\n#pragma sgmap: define lowp float pixel_ratio_from\n#pragma sgmap: define lowp float pixel_ratio_to\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\n#pragma sgmap: initialize lowp float pixel_ratio_from\n#pragma sgmap: initialize lowp float pixel_ratio_to\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/u_device_pixel_ratio;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/u_device_pixel_ratio;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y=0.5*v_normal.y+0.5;float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size ,pattern_br_a*texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size ,pattern_br_b*texel_size,vec2(x_b,y));vec4 img_color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);if(u_use_color==1.0 ){gl_FragColor= color*img_color*alpha*opacity;}else{gl_FragColor=img_color*alpha*opacity;}\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump vec2 u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp float offset\n#pragma sgmap: define mediump float gapwidth\n#pragma sgmap: define mediump float width\n#pragma sgmap: define lowp float floorwidth\n#pragma sgmap: define lowp vec4 pattern_from\n#pragma sgmap: define lowp vec4 pattern_to\n#pragma sgmap: define lowp float pixel_ratio_from\n#pragma sgmap: define lowp float pixel_ratio_to\n#pragma sgmap: define highp vec4 color\nvoid main() {\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize lowp float offset\n#pragma sgmap: initialize mediump float gapwidth\n#pragma sgmap: initialize mediump float width\n#pragma sgmap: initialize lowp float floorwidth\n#pragma sgmap: initialize mediump vec4 pattern_from\n#pragma sgmap: initialize mediump vec4 pattern_to\n#pragma sgmap: initialize lowp float pixel_ratio_from\n#pragma sgmap: initialize lowp float pixel_ratio_to\n#pragma sgmap: initialize highp vec4 color\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist.x/u_ratio.x,dist.y/u_ratio.y,0.0,0.0);gl_Position=u_matrix*vec4(pos.x+offset2.x/u_ratio.x,pos.y+offset2.y/u_ratio.y,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"), ci = _i("\nuniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define mediump float width\n#pragma sgmap: define lowp float floorwidth\n#pragma sgmap: define lowp vec4 dash_from\n#pragma sgmap: define lowp vec4 dash_to\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump float width\n#pragma sgmap: initialize lowp float floorwidth\n#pragma sgmap: initialize mediump vec4 dash_from\n#pragma sgmap: initialize mediump vec4 dash_to\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define EXTRUDE_SCALE 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump vec2 u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define mediump float gapwidth\n#pragma sgmap: define lowp float offset\n#pragma sgmap: define mediump float width\n#pragma sgmap: define lowp float floorwidth\n#pragma sgmap: define lowp vec4 dash_from\n#pragma sgmap: define lowp vec4 dash_to\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump float gapwidth\n#pragma sgmap: initialize lowp float offset\n#pragma sgmap: initialize mediump float width\n#pragma sgmap: initialize lowp float floorwidth\n#pragma sgmap: initialize mediump vec4 dash_from\n#pragma sgmap: initialize mediump vec4 dash_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist.x/u_ratio.x,dist.y/u_ratio.y,0.0,0.0);gl_Position=u_matrix*vec4(pos.x+offset2.x/u_ratio.x,pos.y+offset2.y/u_ratio.y,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float widthA=dash_from.z*fromScale;float widthB=dash_to.z*toScale;float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*(tileZoomRatio/widthA)/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*(tileZoomRatio/widthB)/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);v_width2=vec2(outset,inset);}"), li = _i("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"), ui = _i("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha*zoom_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}", "symbolIcon"), hi = _i("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform highp float u_scale_ratio;varying vec2 v_data0;varying vec3 v_data1;varying float v_scaleable;\n#pragma sgmap: define highp vec4 fill_color\n#pragma sgmap: define highp vec4 halo_color\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp float halo_width\n#pragma sgmap: define lowp float halo_blur\nvoid main() {\n#pragma sgmap: initialize highp vec4 fill_color\n#pragma sgmap: initialize highp vec4 halo_color\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize lowp float halo_width\n#pragma sgmap: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0*(v_scaleable==0.0?u_scale_ratio:1.0): size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity*zoom_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform highp float u_scale_ratio;varying vec2 v_data0;varying vec3 v_data1;varying float v_scaleable;\n#pragma sgmap: define highp vec4 fill_color\n#pragma sgmap: define highp vec4 halo_color\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp float halo_width\n#pragma sgmap: define lowp float halo_blur\nvoid main() {\n#pragma sgmap: initialize highp vec4 fill_color\n#pragma sgmap: initialize highp vec4 halo_color\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize lowp float halo_width\n#pragma sgmap: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float a_scaleable=1.0;if(a_projected_pos[2]+100.0<=0.0){a_scaleable=0.0;segment_angle=a_projected_pos[2]+100.0;}float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0*(a_scaleable==0.0?u_scale_ratio:1.0) : size;v_scaleable=a_scaleable;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}", "symbolSDF"), pi = _i("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma sgmap: define highp vec4 fill_color\n#pragma sgmap: define highp vec4 halo_color\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp float halo_width\n#pragma sgmap: define lowp float halo_blur\nvoid main() {\n#pragma sgmap: initialize highp vec4 fill_color\n#pragma sgmap: initialize highp vec4 halo_color\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize lowp float halo_width\n#pragma sgmap: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma sgmap: define highp vec4 fill_color\n#pragma sgmap: define highp vec4 halo_color\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define lowp float halo_width\n#pragma sgmap: define lowp float halo_blur\nvoid main() {\n#pragma sgmap: initialize highp vec4 fill_color\n#pragma sgmap: initialize highp vec4 halo_color\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize lowp float halo_width\n#pragma sgmap: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}", "symbolTextAndIcon"), fi = _i("uniform lowp float u_device_pixel_ratio;varying vec3 v_data;varying vec3 v_normal;varying float v_gap;varying vec4 v_ecolor;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\nfloat extrude_length=length(v_normal);float gap=v_gap;float antiblur;if(v_gap==0.0 || 1.0-extrude_length>=gap){antiblur=1.0;}else{antiblur=smoothstep(0.0,gap,1.0-extrude_length);}gl_FragColor=v_ecolor*(opacity*zoom_opacity)*antiblur;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\nconst float PI=3.141592653589793;attribute vec2 a_pos;attribute vec2 a_eoffset;attribute vec4 a_normal;attribute float a_ecolor;attribute float a_erotate;attribute float a_esize;uniform vec2 u_units_to_pixels;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform lowp float u_device_pixel_ratio;uniform highp float u_scale_ratio;varying vec3 v_normal;varying float v_gap;varying vec4 v_ecolor;\n#pragma sgmap: define highp vec4 color\n#pragma sgmap: define lowp float blur\n#pragma sgmap: define lowp float opacity\n#pragma sgmap: define mediump float gapwidth\n#pragma sgmap: define lowp float offset\n#pragma sgmap: define mediump float width\nvoid main() {\n#pragma sgmap: initialize highp vec4 color\n#pragma sgmap: initialize lowp float blur\n#pragma sgmap: initialize lowp float opacity\n#pragma sgmap: initialize mediump float gapwidth\n#pragma sgmap: initialize lowp float offset\n#pragma sgmap: initialize mediump float width\nfloat symbol_size=abs(a_esize);float scale_ratio=1.0;if(a_esize>=0.0){scale_ratio=u_scale_ratio;}float ANTIALIASING=1.3/u_device_pixel_ratio;highp float angle_sin=sin((a_erotate/180.0)*PI);highp float angle_cos=cos((a_erotate/180.0)*PI);mat2 rotation_matrix=mat2(angle_cos,angle_sin,-1.0*angle_sin,angle_cos);vec3 normal=normalize(vec3(a_normal));vec4 projected_pos=u_label_plane_matrix*vec4(a_pos.xy,0.0,1.0);vec4 geoPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_eoffset*scale_ratio*symbol_size),0.0,1.0);vec4 new_vect=u_coord_matrix*vec4(rotation_matrix*(a_normal.xy*scale_ratio*symbol_size),0.0,0.0);float halp=length(new_vect.xy);vec2 blurNormal=new_vect.xy/length( new_vect.xy/geoPos.w*u_units_to_pixels)*ANTIALIASING;float blurLength=length(blurNormal.xy);v_gap=blurLength/(halp+blurLength);v_normal=normal;if(a_normal.x==0.0 && a_normal.y==0.0){v_gap=0.0;blurNormal=vec2(0.0,0.0);}if(a_ecolor>=0.0){v_ecolor=color;}else{float staticColor=a_ecolor;if(a_ecolor==-0.1){staticColor=0.0;}float color_b=mod(0.0-staticColor,256.0);float color_g=mod(0.0-staticColor-color_b,256.0*256.0)/256.0;float color_r=(0.0-staticColor-color_b-color_g*256.0)/(256.0*256.0);v_ecolor=vec4( color_r/256.0,color_g/256.0,color_b/256.0,1.0);}gl_Position=geoPos+vec4(blurNormal.xy,0.0,0.0);}", "eleSymbol");
    function di(t2, e2, i2) {
      if (!i2)
        return t2;
      var r2 = t2.indexOf("#pragma sgmap: define"), o2 = (t2 = t2.slice(0, r2 = r2 >= 0 ? r2 : 0) + "\n     #pragma sgmap: define lowp float minzoom\n     #pragma sgmap: define lowp float maxzoom\n     uniform lowp float u_featureZoom;\n    " + t2.slice(r2)).indexOf("#pragma sgmap: initialize");
      if (o2 < 0 && (o2 = t2.indexOf("void main() {") + "void main() {".length), t2 = t2.slice(0, o2) + "\n     #pragma sgmap: initialize lowp float minzoom\n     #pragma sgmap: initialize lowp float maxzoom\n    " + t2.slice(o2), "fragment" == e2) {
        var n2 = "#pragma sgmap: initialize lowp float opacity", a2 = t2.indexOf(n2);
        a2 < 0 && (a2 = t2.indexOf(n2 = "#pragma sgmap: initialize lowp float maxzoom"));
        var s2 = "fill" == i2 ? "(maxzoom+1.0)" : "maxzoom";
        t2 = t2.slice(0, a2 += n2.length) + "\n        float feature_maxzoom = (maxzoom>=19.0)? 25.0: (maxzoom>minzoom?" + s2 + ":(minzoom+1.0));\n        float feature_minzoom = (minzoom<=3.0)? 0.0: (minzoom-1.0);\n        float zoom_opacity= 1.0;\n        #ifndef HAS_UNIFORM_u_opacity\n        if(u_featureZoom+0.005<feature_minzoom || u_featureZoom+0.005>feature_maxzoom){\n            zoom_opacity=0.0;\n        }else{\n            zoom_opacity=1.0;\n        }\n        #else\n        if(u_featureZoom+0.005<feature_minzoom || u_featureZoom+0.005>feature_maxzoom){\n            opacity=0.0;\n            zoom_opacity=0.0;\n        }else{\n            zoom_opacity=1.0;\n        }\n        #endif" + t2.slice(a2);
      }
      return t2;
    }
    function _i(t2, e2, i2) {
      var r2 = /#pragma sgmap: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g, o2 = {};
      return t2 = di(t2, "fragment", i2), e2 = di(e2, "vertex", i2), { fragmentSource: t2 = t2.replace(r2, function(t3, e3, i3, r3, n2) {
        return o2[n2] = true, "define" === e3 ? "\n#ifndef HAS_UNIFORM_u_" + n2 + "\nvarying " + i3 + " " + r3 + " " + n2 + ";\n#else\nuniform " + i3 + " " + r3 + " u_" + n2 + ";\n#endif\n" : "\n#ifdef HAS_UNIFORM_u_" + n2 + "\n    " + i3 + " " + r3 + " " + n2 + " = u_" + n2 + ";\n#endif\n";
      }), vertexSource: e2 = e2.replace(r2, function(t3, e3, i3, r3, n2) {
        var a2 = "float" === r3 ? "vec2" : "vec4", s2 = n2.match(/color/) ? "color" : a2;
        return o2[n2] ? "define" === e3 ? "\n#ifndef HAS_UNIFORM_u_" + n2 + "\nuniform lowp float u_" + n2 + "_t;\nattribute " + i3 + " " + a2 + " a_" + n2 + ";\nvarying " + i3 + " " + r3 + " " + n2 + ";\n#else\nuniform " + i3 + " " + r3 + " u_" + n2 + ";\n#endif\n" : "vec4" === s2 ? "\n#ifndef HAS_UNIFORM_u_" + n2 + "\n    " + n2 + " = a_" + n2 + ";\n#else\n    " + i3 + " " + r3 + " " + n2 + " = u_" + n2 + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + n2 + "\n    " + n2 + " = unpack_mix_" + s2 + "(a_" + n2 + ", u_" + n2 + "_t);\n#else\n    " + i3 + " " + r3 + " " + n2 + " = u_" + n2 + ";\n#endif\n" : "define" === e3 ? "\n#ifndef HAS_UNIFORM_u_" + n2 + "\nuniform lowp float u_" + n2 + "_t;\nattribute " + i3 + " " + a2 + " a_" + n2 + ";\n#else\nuniform " + i3 + " " + r3 + " u_" + n2 + ";\n#endif\n" : "vec4" === s2 ? "\n#ifndef HAS_UNIFORM_u_" + n2 + "\n    " + i3 + " " + r3 + " " + n2 + " = a_" + n2 + ";\n#else\n    " + i3 + " " + r3 + " " + n2 + " = u_" + n2 + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + n2 + "\n    " + i3 + " " + r3 + " " + n2 + " = unpack_mix_" + s2 + "(a_" + n2 + ", u_" + n2 + "_t);\n#else\n    " + i3 + " " + r3 + " " + n2 + " = u_" + n2 + ";\n#endif\n";
      }) };
    }
    var mi = Object.freeze({ __proto__: null, prelude: je, background: Ve, backgroundPattern: qe, circle: Ze, clippingMask: Ge, heatmap: He, heatmapTexture: We, collisionBox: Xe, collisionCircle: Ke, debug: Ye, fill: Je, fillOutline: Qe, fillOutlinePattern: $e, fillPattern: ti, fillExtrusion: ei, fillExtrusionPattern: ii, hillshadePrepare: ri, hillshade: oi, line: ni, lineGradient: ai, linePattern: si, lineSDF: ci, raster: li, symbolIcon: ui, symbolSDF: hi, symbolTextAndIcon: pi, eleSymbol: fi }), gi = function() {
      this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;
    };
    gi.prototype.bind = function(t2, e2, i2, r2, o2, n2, a2, s2) {
      this.context = t2;
      for (var c2 = this.boundPaintVertexBuffers.length !== r2.length, l2 = 0; !c2 && l2 < r2.length; l2++)
        this.boundPaintVertexBuffers[l2] !== r2[l2] && (c2 = true);
      t2.extVertexArrayObject && this.vao && this.boundProgram === e2 && this.boundLayoutVertexBuffer === i2 && !c2 && this.boundIndexBuffer === o2 && this.boundVertexOffset === n2 && this.boundDynamicVertexBuffer === a2 && this.boundDynamicVertexBuffer2 === s2 ? (t2.bindVertexArrayOES.set(this.vao), a2 && a2.bind(), o2 && o2.dynamicDraw && o2.bind(), s2 && s2.bind()) : this.freshBind(e2, i2, r2, o2, n2, a2, s2);
    }, gi.prototype.freshBind = function(t2, e2, i2, r2, o2, n2, a2) {
      var s2, c2 = t2.numAttributes, l2 = this.context, u2 = l2.gl;
      if (l2.extVertexArrayObject)
        this.vao && this.destroy(), this.vao = l2.extVertexArrayObject.createVertexArrayOES(), l2.bindVertexArrayOES.set(this.vao), s2 = 0, this.boundProgram = t2, this.boundLayoutVertexBuffer = e2, this.boundPaintVertexBuffers = i2, this.boundIndexBuffer = r2, this.boundVertexOffset = o2, this.boundDynamicVertexBuffer = n2, this.boundDynamicVertexBuffer2 = a2;
      else {
        s2 = l2.currentNumAttributes || 0;
        for (var h2 = c2; h2 < s2; h2++)
          u2.disableVertexAttribArray(h2);
      }
      e2.enableAttributes(u2, t2);
      for (var p2 = 0, f2 = i2; p2 < f2.length; p2 += 1)
        f2[p2].enableAttributes(u2, t2);
      n2 && n2.enableAttributes(u2, t2), a2 && a2.enableAttributes(u2, t2), e2.bind(), e2.setVertexAttribPointers(u2, t2, o2);
      for (var d2 = 0, _3 = i2; d2 < _3.length; d2 += 1) {
        var m2 = _3[d2];
        m2.bind(), m2.setVertexAttribPointers(u2, t2, o2);
      }
      n2 && (n2.bind(), n2.setVertexAttribPointers(u2, t2, o2)), r2 && r2.bind(), a2 && (a2.bind(), a2.setVertexAttribPointers(u2, t2, o2)), l2.currentNumAttributes = c2;
    }, gi.prototype.destroy = function() {
      this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);
    };
    var vi = function(t2, e2, i2, r2, o2) {
      var n2 = t2.gl;
      this.program = n2.createProgram();
      var a2 = i2 ? i2.defines() : [];
      o2 && a2.push("#define OVERDRAW_INSPECTOR;");
      var s2 = a2.concat(je.fragmentSource, e2.fragmentSource).join("\n"), c2 = a2.concat(je.vertexSource, e2.vertexSource).join("\n"), l2 = n2.createShader(n2.FRAGMENT_SHADER);
      if (n2.isContextLost())
        this.failedToCreate = true;
      else {
        n2.shaderSource(l2, s2), n2.compileShader(l2), n2.attachShader(this.program, l2);
        var u2 = n2.createShader(n2.VERTEX_SHADER);
        if (n2.isContextLost())
          this.failedToCreate = true;
        else {
          n2.shaderSource(u2, c2), n2.compileShader(u2), n2.attachShader(this.program, u2);
          for (var h2 = i2 ? i2.layoutAttributes : [], p2 = 0; p2 < h2.length; p2++)
            n2.bindAttribLocation(this.program, p2, h2[p2].name);
          n2.linkProgram(this.program), n2.deleteShader(u2), n2.deleteShader(l2), this.numAttributes = n2.getProgramParameter(this.program, n2.ACTIVE_ATTRIBUTES), this.attributes = {};
          for (var f2 = {}, d2 = 0; d2 < this.numAttributes; d2++) {
            var _3 = n2.getActiveAttrib(this.program, d2);
            _3 && (this.attributes[_3.name] = n2.getAttribLocation(this.program, _3.name));
          }
          for (var m2 = n2.getProgramParameter(this.program, n2.ACTIVE_UNIFORMS), g2 = 0; g2 < m2; g2++) {
            var v2 = n2.getActiveUniform(this.program, g2);
            v2 && (f2[v2.name] = n2.getUniformLocation(this.program, v2.name));
          }
          this.fixedUniforms = r2(t2, f2), this.binderUniforms = i2 ? i2.getUniforms(t2, f2) : [];
        }
      }
    };
    vi.prototype.draw = function(t2, e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2, p2, f2, d2, _3) {
      var m2, g2 = t2.gl;
      if (!this.failedToCreate) {
        for (var v2 in t2.program.set(this.program), t2.setDepthMode(i2), t2.setStencilMode(r2), t2.setColorMode(o2), t2.setCullFace(n2), this.fixedUniforms)
          this.fixedUniforms[v2].set(a2[v2]);
        f2 && f2.setUniforms(t2, this.binderUniforms, h2, { zoom: p2 });
        for (var y2 = (m2 = {}, m2[g2.LINES] = 2, m2[g2.TRIANGLES] = 3, m2[g2.LINE_STRIP] = 1, m2)[e2], b2 = 0, w2 = u2.get(); b2 < w2.length; b2 += 1) {
          var x2 = w2[b2], T2 = x2.vaos || (x2.vaos = {});
          (T2[s2] || (T2[s2] = new gi())).bind(t2, this, c2, f2 ? f2.getPaintVertexBuffers() : [], l2, x2.vertexOffset, d2, _3), g2.drawElements(e2, x2.primitiveLength * y2, g2.UNSIGNED_SHORT, x2.primitiveOffset * y2 * 2);
        }
      }
    };
    var yi = function(e2, i2, r2, o2) {
      var n2 = i2.style.light, a2 = n2.properties.get("position"), s2 = [a2.x, a2.y, a2.z], c2 = t.create$1();
      "viewport" === n2.properties.get("anchor") && t.fromRotation(c2, -i2.transform.angle), t.transformMat3(s2, s2, c2);
      var l2 = n2.properties.get("color");
      return { u_matrix: e2, u_lightpos: s2, u_lightintensity: n2.properties.get("intensity"), u_lightcolor: [l2.r, l2.g, l2.b], u_vertical_gradient: +r2, u_opacity: o2, u_featureZoom: i2.transform.zoom };
    }, bi = function(e2, i2, r2, o2, n2, a2, s2) {
      return t.extend(yi(e2, i2, r2, o2), wi(a2, i2, s2), { u_height_factor: -Math.pow(2, n2.overscaledZ) / s2.tileSize / 8 });
    }, wi = function(t2, e2, i2) {
      var r2 = 1 / y(i2, 1, 18), o2 = Math.pow(2, i2.tileID.overscaledZ), n2 = i2.tileSize * Math.pow(2, e2.transform.tileZoom) / o2, a2 = n2 * (i2.tileID.canonical.x + i2.tileID.wrap * o2), s2 = n2 * i2.tileID.canonical.y;
      return { u_image: 0, u_texsize: i2.imageAtlasTexture.size, u_scale: [r2, t2.fromScale, t2.toScale], u_fade: t2.t, u_pixel_coord_upper: [a2 >> 16, s2 >> 16], u_pixel_coord_lower: [65535 & a2, 65535 & s2] };
    }, xi = function(t2, e2) {
      return { u_matrix: t2, u_featureZoom: e2.transform.zoom };
    }, Ti = function(e2, i2, r2, o2) {
      return t.extend(xi(e2, i2), function(t2, e3, i3) {
        var r3 = 1 / y(i3, 1, e3.transform.tileZoom), o3 = Math.pow(2, i3.tileID.overscaledZ), n2 = i3.tileSize * Math.pow(2, e3.transform.tileZoom) / o3, a2 = n2 * (i3.tileID.canonical.x + i3.tileID.wrap * o3), s2 = n2 * i3.tileID.canonical.y;
        return { u_image: 0, u_texsize: i3.imageAtlasTexture.size, u_scale: [r3, t2.fromScale, t2.toScale], u_fade: t2.t, u_pixel_coord_upper: [a2 >> 16, s2 >> 16], u_pixel_coord_lower: [65535 & a2, 65535 & s2] };
      }(r2, i2, o2));
    }, Si = function(t2, e2, i2) {
      return { u_matrix: t2, u_world: e2, u_featureZoom: i2.transform.zoom };
    }, Ei = function(e2, i2, r2, o2, n2) {
      return t.extend(Ti(e2, i2, r2, o2), { u_world: n2 });
    }, Ai = function(e2, i2, r2, o2) {
      var n2, a2, s2 = e2.transform;
      if ("map" === o2.paint.get("circle-pitch-alignment")) {
        var c2 = y(r2, 1, s2.zoom, "xy");
        n2 = true, a2 = [c2[0], c2[1]];
      } else
        n2 = false, a2 = s2.pixelsToGLUnits;
      return { u_camera_to_center_distance: s2.cameraToCenterDistance, u_scale_with_map: +("map" === o2.paint.get("circle-pitch-scale")), u_matrix: e2.translatePosMatrix(i2.posMatrix, r2, o2.paint.get("circle-translate"), o2.paint.get("circle-translate-anchor")), u_pitch_with_map: +n2, u_device_pixel_ratio: t.browser.devicePixelRatio, u_extrude_scale: a2, u_featureZoom: e2.transform.zoom };
    }, ki = function(t2, e2, i2) {
      var r2 = y(i2, 1, e2.zoom), o2 = Math.pow(2, e2.zoom - i2.tileID.overscaledZ), n2 = i2.tileID.overscaleFactor();
      return { u_matrix: t2, u_camera_to_center_distance: e2.cameraToCenterDistance, u_pixels_to_tile_units: r2, u_extrude_scale: [e2.pixelsToGLUnits[0] / (r2 * o2), e2.pixelsToGLUnits[1] / (r2 * o2)], u_overscale_factor: n2 };
    }, Ii = function(t2, e2, i2) {
      return { u_matrix: t2, u_inv_matrix: e2, u_camera_to_center_distance: i2.cameraToCenterDistance, u_viewport_size: [i2.width, i2.height] };
    }, Bi = function(t2, e2, i2) {
      return void 0 === i2 && (i2 = 1), { u_matrix: t2, u_color: e2, u_overlay: 0, u_overlay_scale: i2 };
    }, Pi = function(t2) {
      return { u_matrix: t2 };
    }, Ci = function(t2, e2, i2, r2) {
      return { u_matrix: t2, u_extrude_scale: y(e2, 1, i2), u_intensity: r2, u_featureZoom: i2 };
    }, zi = function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_ratio: new t.Uniform2f(e2, i2.u_ratio), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_units_to_pixels: new t.Uniform2f(e2, i2.u_units_to_pixels), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, Di = function(e2, i2, r2, o2) {
      var n2 = e2.transform;
      return { u_matrix: Ui(e2, i2, r2), u_ratio: Fi(i2, e2.transform), u_device_pixel_ratio: t.browser.devicePixelRatio, u_units_to_pixels: [1 / n2.pixelsToGLUnits[0], 1 / n2.pixelsToGLUnits[1]], u_featureZoom: e2.transform.zoom };
    }, Mi = function(e2, i2, r2, o2) {
      return t.extend(Di(e2, i2, r2), { u_image: 0 });
    }, Li = function(e2, i2, r2, o2, n2, a2) {
      var s2 = e2.transform, c2 = Oi(i2, s2);
      return { u_matrix: Ui(e2, i2, r2), u_texsize: i2.imageAtlasTexture.size, u_ratio: Fi(i2, e2.transform), u_device_pixel_ratio: t.browser.devicePixelRatio, u_image: 0, u_scale: [c2, o2.fromScale, o2.toScale], u_fade: o2.t, u_units_to_pixels: [1 / s2.pixelsToGLUnits[0], 1 / s2.pixelsToGLUnits[1]], u_use_color: n2 || "eline" == r2.type && r2.paint && r2.paint._values.hasOwnProperty("line-color") ? 1 : 0, u_featureZoom: e2.transform.zoom, u_outline: a2 || 0 };
    }, Ri = function(e2, i2, r2, o2, n2, a2) {
      var s2 = e2.transform, c2 = Oi(i2, e2.transform);
      return { u_matrix: Ui(e2, i2, r2), u_ratio: Fi(i2, e2.transform), u_device_pixel_ratio: t.browser.devicePixelRatio, u_units_to_pixels: [1 / s2.pixelsToGLUnits[0], 1 / s2.pixelsToGLUnits[1]], u_image: 0, u_mix: n2.t, u_featureZoom: e2.transform.zoom, u_texsize: i2.lineAtlasTexture.size, u_scale: [c2, n2.fromScale, n2.toScale] };
    };
    function Oi(t2, e2) {
      return 1 / y(t2, 1, e2.tileZoom);
    }
    function Fi(t2, e2) {
      var i2 = y(t2, 1, e2.zoom, "xy");
      return [1 / i2[0], 1 / i2[1]];
    }
    function Ui(t2, e2, i2) {
      return t2.translatePosMatrix(e2.tileID.posMatrix, e2, i2.paint.get("line-translate"), i2.paint.get("line-translate-anchor"));
    }
    var Ni = function(t2, e2, i2, r2, o2) {
      return { u_matrix: t2, u_tl_parent: e2, u_scale_parent: i2, u_buffer_scale: 1, u_fade_t: r2.mix, u_opacity: r2.opacity * o2.paint.get("raster-opacity"), u_image0: 0, u_image1: 1, u_brightness_low: o2.paint.get("raster-brightness-min"), u_brightness_high: o2.paint.get("raster-brightness-max"), u_saturation_factor: (a2 = o2.paint.get("raster-saturation"), a2 > 0 ? 1 - 1 / (1.001 - a2) : -a2), u_contrast_factor: (n2 = o2.paint.get("raster-contrast"), n2 > 0 ? 1 / (1 - n2) : 1 + n2), u_spin_weights: ji(o2.paint.get("raster-hue-rotate")) };
      var n2, a2;
    };
    function ji(t2) {
      t2 *= Math.PI / 180;
      var e2 = Math.sin(t2), i2 = Math.cos(t2);
      return [(2 * i2 + 1) / 3, (-Math.sqrt(3) * e2 - i2 + 1) / 3, (Math.sqrt(3) * e2 - i2 + 1) / 3];
    }
    var Vi, qi = function(t2, e2, i2, r2, o2, n2, a2, s2, c2, l2, u2) {
      var h2 = o2.transform;
      return { u_is_size_zoom_constant: +("constant" === t2 || "source" === t2), u_is_size_feature_constant: +("constant" === t2 || "camera" === t2), u_size_t: e2 ? e2.uSizeT : 0, u_size: e2 ? e2.uSize : 0, u_camera_to_center_distance: h2.cameraToCenterDistance, u_pitch: h2.pitch / 360 * 2 * Math.PI, u_rotate_symbol: +i2, u_aspect_ratio: h2.width / h2.height, u_fade_change: o2.options.fadeDuration ? o2.symbolFadeChange : 1, u_matrix: n2, u_label_plane_matrix: a2, u_coord_matrix: s2, u_is_text: +c2, u_pitch_with_map: +r2, u_texsize: l2, u_texture: 0, u_scale_ratio: u2 || 1, u_featureZoom: o2.transform.zoom };
    }, Zi = function(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2, p2) {
      var f2 = n2.transform;
      return t.extend(qi(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, p2), { u_gamma_scale: o2 ? Math.cos(f2._pitch) * f2.cameraToCenterDistance : 1, u_device_pixel_ratio: t.browser.devicePixelRatio, u_is_halo: +h2 });
    }, Gi = function(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2) {
      return t.extend(Zi(e2, i2, r2, o2, n2, a2, s2, c2, true, l2, true, h2), { u_texsize_icon: u2, u_texture_icon: 1 });
    }, Hi = function(t2, e2, i2) {
      return { u_matrix: t2, u_opacity: e2, u_color: i2 };
    }, Wi = function(e2, i2, r2, o2, n2, a2) {
      return t.extend(function(t2, e3, i3, r3) {
        var o3 = i3.imageManager.getPattern(t2.from.toString()), n3 = i3.imageManager.getPattern(t2.to.toString()), a3 = i3.imageManager.getPixelSize(), s2 = a3.width, c2 = a3.height, l2 = Math.pow(2, r3.tileID.overscaledZ), u2 = r3.tileSize * Math.pow(2, i3.transform.tileZoom) / l2, h2 = u2 * (r3.tileID.canonical.x + r3.tileID.wrap * l2), p2 = u2 * r3.tileID.canonical.y;
        return { u_image: 0, u_pattern_tl_a: o3.tl, u_pattern_br_a: o3.br, u_pattern_tl_b: n3.tl, u_pattern_br_b: n3.br, u_texsize: [s2, c2], u_mix: e3.t, u_pattern_size_a: o3.displaySize, u_pattern_size_b: n3.displaySize, u_scale_a: e3.fromScale, u_scale_b: e3.toScale, u_tile_units_to_pixels: 1 / y(r3, 1, i3.transform.tileZoom), u_pixel_coord_upper: [h2 >> 16, p2 >> 16], u_pixel_coord_lower: [65535 & h2, 65535 & p2] };
      }(o2, a2, r2, n2), { u_matrix: e2, u_opacity: i2 });
    }, Xi = function(e2, i2, r2, o2, n2, a2, s2) {
      var c2, l2, u2 = e2.transform;
      if ("map" === o2.paint.get("esymbol-pitch-alignment")) {
        var h2 = y(r2, 1, u2.zoom, "xy");
        c2 = true, l2 = [h2[0], h2[1]];
      } else
        c2 = false, l2 = u2.pixelsToGLUnits;
      return { u_camera_to_center_distance: u2.cameraToCenterDistance, u_scale_with_map: +("map" === o2.paint.get("esymbol-pitch-scale")), u_matrix: e2.translatePosMatrix(i2.posMatrix, r2, o2.paint.get("esymbol-translate"), o2.paint.get("esymbol-translate-anchor")), u_pitch_with_map: +c2, u_device_pixel_ratio: t.browser.devicePixelRatio, u_extrude_scale: l2, u_label_plane_matrix: n2, u_coord_matrix: a2, u_scale_ratio: s2 || 1, u_units_to_pixels: [1 / u2.pixelsToGLUnits[0], 1 / u2.pixelsToGLUnits[1]], u_featureZoom: e2.transform.zoom };
    }, Ki = { fillExtrusion: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_lightpos: new t.Uniform3f(e2, i2.u_lightpos), u_lightintensity: new t.Uniform1f(e2, i2.u_lightintensity), u_lightcolor: new t.Uniform3f(e2, i2.u_lightcolor), u_vertical_gradient: new t.Uniform1f(e2, i2.u_vertical_gradient), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, fillExtrusionPattern: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_lightpos: new t.Uniform3f(e2, i2.u_lightpos), u_lightintensity: new t.Uniform1f(e2, i2.u_lightintensity), u_lightcolor: new t.Uniform3f(e2, i2.u_lightcolor), u_vertical_gradient: new t.Uniform1f(e2, i2.u_vertical_gradient), u_height_factor: new t.Uniform1f(e2, i2.u_height_factor), u_image: new t.Uniform1i(e2, i2.u_image), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_scale: new t.Uniform3f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, fill: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, fillPattern: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_image: new t.Uniform1i(e2, i2.u_image), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_scale: new t.Uniform3f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, fillOutline: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_world: new t.Uniform2f(e2, i2.u_world), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, fillOutlinePattern: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_world: new t.Uniform2f(e2, i2.u_world), u_image: new t.Uniform1i(e2, i2.u_image), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_scale: new t.Uniform3f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, circle: function(e2, i2) {
      return { u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_scale_with_map: new t.Uniform1i(e2, i2.u_scale_with_map), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_extrude_scale: new t.Uniform2f(e2, i2.u_extrude_scale), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, collisionBox: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_pixels_to_tile_units: new t.Uniform1f(e2, i2.u_pixels_to_tile_units), u_extrude_scale: new t.Uniform2f(e2, i2.u_extrude_scale), u_overscale_factor: new t.Uniform1f(e2, i2.u_overscale_factor) };
    }, collisionCircle: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_inv_matrix: new t.UniformMatrix4f(e2, i2.u_inv_matrix), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_viewport_size: new t.Uniform2f(e2, i2.u_viewport_size) };
    }, debug: function(e2, i2) {
      return { u_color: new t.UniformColor(e2, i2.u_color), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_overlay: new t.Uniform1i(e2, i2.u_overlay), u_overlay_scale: new t.Uniform1f(e2, i2.u_overlay_scale) };
    }, clippingMask: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix) };
    }, heatmap: function(e2, i2) {
      return { u_extrude_scale: new t.Uniform1f(e2, i2.u_extrude_scale), u_intensity: new t.Uniform1f(e2, i2.u_intensity), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, heatmapTexture: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_world: new t.Uniform2f(e2, i2.u_world), u_image: new t.Uniform1i(e2, i2.u_image), u_color_ramp: new t.Uniform1i(e2, i2.u_color_ramp), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, hillshade: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_image: new t.Uniform1i(e2, i2.u_image), u_latrange: new t.Uniform2f(e2, i2.u_latrange), u_light: new t.Uniform2f(e2, i2.u_light), u_shadow: new t.UniformColor(e2, i2.u_shadow), u_highlight: new t.UniformColor(e2, i2.u_highlight), u_accent: new t.UniformColor(e2, i2.u_accent) };
    }, hillshadePrepare: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_image: new t.Uniform1i(e2, i2.u_image), u_dimension: new t.Uniform2f(e2, i2.u_dimension), u_zoom: new t.Uniform1f(e2, i2.u_zoom), u_maxzoom: new t.Uniform1f(e2, i2.u_maxzoom), u_unpack: new t.Uniform4f(e2, i2.u_unpack), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, line: zi, lineGradient: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_ratio: new t.Uniform2f(e2, i2.u_ratio), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_units_to_pixels: new t.Uniform2f(e2, i2.u_units_to_pixels), u_image: new t.Uniform1i(e2, i2.u_image), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, linePattern: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_ratio: new t.Uniform2f(e2, i2.u_ratio), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_image: new t.Uniform1i(e2, i2.u_image), u_units_to_pixels: new t.Uniform2f(e2, i2.u_units_to_pixels), u_scale: new t.Uniform3f(e2, i2.u_scale), u_fade: new t.Uniform1f(e2, i2.u_fade), u_use_color: new t.Uniform1f(e2, i2.u_use_color), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom), u_outline: new t.Uniform1f(e2, i2.u_outline) };
    }, lineSDF: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_ratio: new t.Uniform2f(e2, i2.u_ratio), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_units_to_pixels: new t.Uniform2f(e2, i2.u_units_to_pixels), u_image: new t.Uniform1i(e2, i2.u_image), u_mix: new t.Uniform1f(e2, i2.u_mix), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_scale: new t.Uniform3f(e2, i2.u_scale) };
    }, raster: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_tl_parent: new t.Uniform2f(e2, i2.u_tl_parent), u_scale_parent: new t.Uniform1f(e2, i2.u_scale_parent), u_buffer_scale: new t.Uniform1f(e2, i2.u_buffer_scale), u_fade_t: new t.Uniform1f(e2, i2.u_fade_t), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_image0: new t.Uniform1i(e2, i2.u_image0), u_image1: new t.Uniform1i(e2, i2.u_image1), u_brightness_low: new t.Uniform1f(e2, i2.u_brightness_low), u_brightness_high: new t.Uniform1f(e2, i2.u_brightness_high), u_saturation_factor: new t.Uniform1f(e2, i2.u_saturation_factor), u_contrast_factor: new t.Uniform1f(e2, i2.u_contrast_factor), u_spin_weights: new t.Uniform3f(e2, i2.u_spin_weights) };
    }, symbolIcon: function(e2, i2) {
      return { u_is_size_zoom_constant: new t.Uniform1i(e2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new t.Uniform1i(e2, i2.u_is_size_feature_constant), u_size_t: new t.Uniform1f(e2, i2.u_size_t), u_size: new t.Uniform1f(e2, i2.u_size), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_pitch: new t.Uniform1f(e2, i2.u_pitch), u_rotate_symbol: new t.Uniform1i(e2, i2.u_rotate_symbol), u_aspect_ratio: new t.Uniform1f(e2, i2.u_aspect_ratio), u_fade_change: new t.Uniform1f(e2, i2.u_fade_change), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_label_plane_matrix: new t.UniformMatrix4f(e2, i2.u_label_plane_matrix), u_coord_matrix: new t.UniformMatrix4f(e2, i2.u_coord_matrix), u_is_text: new t.Uniform1i(e2, i2.u_is_text), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_texture: new t.Uniform1i(e2, i2.u_texture), u_scale_ratio: new t.Uniform1f(e2, i2.u_scale_ratio), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, symbolSDF: function(e2, i2) {
      return { u_is_size_zoom_constant: new t.Uniform1i(e2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new t.Uniform1i(e2, i2.u_is_size_feature_constant), u_size_t: new t.Uniform1f(e2, i2.u_size_t), u_size: new t.Uniform1f(e2, i2.u_size), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_pitch: new t.Uniform1f(e2, i2.u_pitch), u_rotate_symbol: new t.Uniform1i(e2, i2.u_rotate_symbol), u_aspect_ratio: new t.Uniform1f(e2, i2.u_aspect_ratio), u_fade_change: new t.Uniform1f(e2, i2.u_fade_change), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_label_plane_matrix: new t.UniformMatrix4f(e2, i2.u_label_plane_matrix), u_coord_matrix: new t.UniformMatrix4f(e2, i2.u_coord_matrix), u_is_text: new t.Uniform1i(e2, i2.u_is_text), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_texture: new t.Uniform1i(e2, i2.u_texture), u_gamma_scale: new t.Uniform1f(e2, i2.u_gamma_scale), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_is_halo: new t.Uniform1i(e2, i2.u_is_halo), u_scale_ratio: new t.Uniform1f(e2, i2.u_scale_ratio), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, symbolTextAndIcon: function(e2, i2) {
      return { u_is_size_zoom_constant: new t.Uniform1i(e2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new t.Uniform1i(e2, i2.u_is_size_feature_constant), u_size_t: new t.Uniform1f(e2, i2.u_size_t), u_size: new t.Uniform1f(e2, i2.u_size), u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_pitch: new t.Uniform1f(e2, i2.u_pitch), u_rotate_symbol: new t.Uniform1i(e2, i2.u_rotate_symbol), u_aspect_ratio: new t.Uniform1f(e2, i2.u_aspect_ratio), u_fade_change: new t.Uniform1f(e2, i2.u_fade_change), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_label_plane_matrix: new t.UniformMatrix4f(e2, i2.u_label_plane_matrix), u_coord_matrix: new t.UniformMatrix4f(e2, i2.u_coord_matrix), u_is_text: new t.Uniform1i(e2, i2.u_is_text), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_texsize_icon: new t.Uniform2f(e2, i2.u_texsize_icon), u_texture: new t.Uniform1i(e2, i2.u_texture), u_texture_icon: new t.Uniform1i(e2, i2.u_texture_icon), u_gamma_scale: new t.Uniform1f(e2, i2.u_gamma_scale), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_is_halo: new t.Uniform1i(e2, i2.u_is_halo), u_scale_ratio: new t.Uniform1f(e2, i2.u_scale_ratio), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, background: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_color: new t.UniformColor(e2, i2.u_color) };
    }, backgroundPattern: function(e2, i2) {
      return { u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_opacity: new t.Uniform1f(e2, i2.u_opacity), u_image: new t.Uniform1i(e2, i2.u_image), u_pattern_tl_a: new t.Uniform2f(e2, i2.u_pattern_tl_a), u_pattern_br_a: new t.Uniform2f(e2, i2.u_pattern_br_a), u_pattern_tl_b: new t.Uniform2f(e2, i2.u_pattern_tl_b), u_pattern_br_b: new t.Uniform2f(e2, i2.u_pattern_br_b), u_texsize: new t.Uniform2f(e2, i2.u_texsize), u_mix: new t.Uniform1f(e2, i2.u_mix), u_pattern_size_a: new t.Uniform2f(e2, i2.u_pattern_size_a), u_pattern_size_b: new t.Uniform2f(e2, i2.u_pattern_size_b), u_scale_a: new t.Uniform1f(e2, i2.u_scale_a), u_scale_b: new t.Uniform1f(e2, i2.u_scale_b), u_pixel_coord_upper: new t.Uniform2f(e2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new t.Uniform2f(e2, i2.u_pixel_coord_lower), u_tile_units_to_pixels: new t.Uniform1f(e2, i2.u_tile_units_to_pixels) };
    }, eleSymbol: function(e2, i2) {
      return { u_camera_to_center_distance: new t.Uniform1f(e2, i2.u_camera_to_center_distance), u_scale_with_map: new t.Uniform1i(e2, i2.u_scale_with_map), u_pitch_with_map: new t.Uniform1i(e2, i2.u_pitch_with_map), u_extrude_scale: new t.Uniform2f(e2, i2.u_extrude_scale), u_device_pixel_ratio: new t.Uniform1f(e2, i2.u_device_pixel_ratio), u_matrix: new t.UniformMatrix4f(e2, i2.u_matrix), u_label_plane_matrix: new t.UniformMatrix4f(e2, i2.u_label_plane_matrix), u_coord_matrix: new t.UniformMatrix4f(e2, i2.u_coord_matrix), u_scale_ratio: new t.Uniform1f(e2, i2.u_scale_ratio), u_units_to_pixels: new t.Uniform2f(e2, i2.u_units_to_pixels), u_featureZoom: new t.Uniform1f(e2, i2.u_featureZoom) };
    }, outline: zi };
    function Yi(e2, i2, r2, o2, n2, a2, s2) {
      for (var c2 = e2.context, l2 = c2.gl, u2 = e2.useProgram("collisionBox"), h2 = [], p2 = 0, f2 = 0, d2 = 0; d2 < o2.length; d2++) {
        var _3 = o2[d2], m2 = i2.getTile(_3), g2 = m2.getBucket(r2);
        if (g2) {
          var v2 = _3.posMatrix;
          0 === n2[0] && 0 === n2[1] || (v2 = e2.translatePosMatrix(_3.posMatrix, m2, n2, a2));
          var y2 = s2 ? g2.textCollisionBox : g2.iconCollisionBox, b2 = g2.collisionCircleArray;
          if (b2.length > 0) {
            var w2 = t.create(), x2 = v2;
            t.mul(w2, g2.placementInvProjMatrix, e2.transform.glCoordMatrix), t.mul(w2, w2, g2.placementViewportMatrix), h2.push({ circleArray: b2, circleOffset: f2, transform: x2, invTransform: w2 }), f2 = p2 += b2.length / 4;
          }
          y2 && u2.draw(c2, l2.LINES, Et.disabled, At.disabled, e2.colorModeForRenderPass(), It.disabled, ki(v2, e2.transform, m2), r2.id, y2.layoutVertexBuffer, y2.indexBuffer, y2.segments, null, e2.transform.zoom, null, null, y2.collisionVertexBuffer);
        }
      }
      if (s2 && h2.length) {
        var T2 = e2.useProgram("collisionCircle"), S2 = new t.StructArrayLayout2f1f2i16();
        S2.resize(4 * p2), S2._trim();
        for (var E2 = 0, A2 = 0, k2 = h2; A2 < k2.length; A2 += 1)
          for (var I2 = k2[A2], B2 = 0; B2 < I2.circleArray.length / 4; B2++) {
            var P2 = 4 * B2, C2 = I2.circleArray[P2 + 0], z2 = I2.circleArray[P2 + 1], D2 = I2.circleArray[P2 + 2], M2 = I2.circleArray[P2 + 3];
            S2.emplace(E2++, C2, z2, D2, M2, 0), S2.emplace(E2++, C2, z2, D2, M2, 1), S2.emplace(E2++, C2, z2, D2, M2, 2), S2.emplace(E2++, C2, z2, D2, M2, 3);
          }
        (!Vi || Vi.length < 2 * p2) && (Vi = function(e3) {
          var i3 = 2 * e3, r3 = new t.StructArrayLayout3ui6();
          r3.resize(i3), r3._trim();
          for (var o3 = 0; o3 < i3; o3++) {
            var n3 = 6 * o3;
            r3.uint16[n3 + 0] = 4 * o3 + 0, r3.uint16[n3 + 1] = 4 * o3 + 1, r3.uint16[n3 + 2] = 4 * o3 + 2, r3.uint16[n3 + 3] = 4 * o3 + 2, r3.uint16[n3 + 4] = 4 * o3 + 3, r3.uint16[n3 + 5] = 4 * o3 + 0;
          }
          return r3;
        }(p2));
        for (var L2 = c2.createIndexBuffer(Vi, true), R2 = c2.createVertexBuffer(S2, t.collisionCircleLayout.members, true), O2 = 0, F2 = h2; O2 < F2.length; O2 += 1) {
          var U2 = F2[O2], N2 = Ii(U2.transform, U2.invTransform, e2.transform);
          T2.draw(c2, l2.TRIANGLES, Et.disabled, At.disabled, e2.colorModeForRenderPass(), It.disabled, N2, r2.id, R2, L2, t.SegmentVector.simpleSegment(0, 2 * U2.circleOffset, U2.circleArray.length, U2.circleArray.length / 2), null, e2.transform.zoom, null, null, null);
        }
        R2.destroy(), L2.destroy();
      }
    }
    var Ji = t.identity(new Float32Array(16));
    function Qi(e2, i2, r2, o2, n2, a2) {
      var s2 = t.getAnchorAlignment(e2), c2 = -(s2.horizontalAlign - 0.5) * i2, l2 = -(s2.verticalAlign - 0.5) * r2, u2 = t.evaluateVariableOffset(e2, o2);
      return new t.Point((c2 / n2 + u2[0]) * a2, (l2 / n2 + u2[1]) * a2);
    }
    function $i(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2) {
      var p2 = e2.text.placedSymbolArray, f2 = e2.text.dynamicLayoutVertexArray, d2 = e2.icon.dynamicLayoutVertexArray, _3 = {};
      f2.clear();
      for (var m2 = 0; m2 < p2.length; m2++) {
        var g2 = p2.get(m2), v2 = g2.hidden || !g2.crossTileID || e2.allowVerticalPlacement && !g2.placedOrientation ? null : o2[g2.crossTileID];
        if (v2) {
          var y2 = new t.Point(g2.anchorX, g2.anchorY), b2 = Yt(y2, r2 ? c2 : s2), w2 = Jt(a2.cameraToCenterDistance, b2.signedDistanceFromCamera), x2 = n2.evaluateSizeForFeature(e2.textSizeData, u2, g2) * w2 / t.ONE_EM;
          r2 && (x2 *= e2.tilePixelRatio / l2);
          for (var T2 = Qi(v2.anchor, v2.width, v2.height, v2.textOffset, v2.textBoxScale, x2), S2 = r2 ? Yt(y2.add(T2), s2).point : b2.point.add(i2 ? T2.rotate(-a2.angle) : T2), E2 = e2.allowVerticalPlacement && g2.placedOrientation === t.WritingMode.vertical ? Math.PI / 2 : 0, A2 = 0; A2 < g2.numGlyphs; A2++)
            t.addDynamicAttributes(f2, S2, E2);
          h2 && g2.associatedIconIndex >= 0 && (_3[g2.associatedIconIndex] = { shiftedAnchor: S2, angle: E2 });
        } else
          ae(g2.numGlyphs, f2);
      }
      if (h2) {
        d2.clear();
        for (var k2 = e2.icon.placedSymbolArray, I2 = 0; I2 < k2.length; I2++) {
          var B2 = k2.get(I2);
          if (B2.hidden)
            ae(B2.numGlyphs, d2);
          else {
            var P2 = _3[I2];
            if (P2)
              for (var C2 = 0; C2 < B2.numGlyphs; C2++)
                t.addDynamicAttributes(d2, P2.shiftedAnchor, P2.angle);
            else
              ae(B2.numGlyphs, d2);
          }
        }
        e2.icon.dynamicLayoutVertexBuffer.updateData(d2);
      }
      e2.text.dynamicLayoutVertexBuffer.updateData(f2);
    }
    function tr(t2, e2, i2) {
      return i2.iconsInText && e2 ? "symbolTextAndIcon" : t2 ? "symbolSDF" : "symbolIcon";
    }
    function er(e2, i2, r2, o2, n2, a2, s2, c2, l2, u2, h2, p2) {
      for (var f2 = e2.context, d2 = f2.gl, _3 = e2.transform, m2 = "map" === c2, g2 = "map" === l2, v2 = m2 && "point" !== r2.layout.get("symbol-placement"), b2 = m2 && !g2 && !v2, w2 = void 0 !== r2.layout.get("symbol-sort-key").constantOr(1), x2 = e2.depthModeForSublayer(0, Et.ReadOnly), T2 = r2.layout.get("text-variable-anchor"), S2 = [], E2 = 0, A2 = o2; E2 < A2.length; E2 += 1) {
        var k2 = A2[E2], I2 = i2.getTile(k2), B2 = I2.getBucket(r2);
        if (B2) {
          var P2 = n2 ? B2.text : B2.icon;
          if (P2 && P2.segments.get().length) {
            var C2 = P2.programConfigurations.get(r2.id), z2 = n2 || B2.sdfIcons, D2 = n2 ? B2.textSizeData : B2.iconSizeData, M2 = g2 || 0 !== _3.pitch, L2 = e2.useProgram(tr(z2, n2, B2), C2), R2 = t.evaluateSizeForZoom(D2, _3.zoom), O2 = void 0, F2 = [0, 0], U2 = void 0, N2 = void 0, j2 = null, V2 = void 0;
            if (n2)
              U2 = I2.glyphAtlasTexture, N2 = d2.LINEAR, O2 = I2.glyphAtlasTexture.size, B2.iconsInText && (F2 = I2.imageAtlasTexture.size, j2 = I2.imageAtlasTexture, V2 = M2 || e2.options.rotating || e2.options.zooming || "composite" === D2.kind || "camera" === D2.kind ? d2.LINEAR : d2.NEAREST);
            else {
              var q2 = 1 !== r2.layout.get("icon-size").constantOr(0) || B2.iconsNeedLinear;
              U2 = I2.imageAtlasTexture, N2 = z2 || e2.options.rotating || e2.options.zooming || q2 || M2 ? d2.LINEAR : d2.NEAREST, O2 = I2.imageAtlasTexture.size;
            }
            var Z2 = y(I2, 1, e2.transform.zoom, "xy"), G2 = Xt(k2.posMatrix, g2, m2, e2.transform, Z2), H2 = Kt(k2.posMatrix, g2, m2, e2.transform, Z2), W2 = T2 && B2.hasTextData(), X2 = "none" !== r2.layout.get("icon-text-fit") && W2 && B2.hasIconData();
            v2 && $t(B2, k2.posMatrix, e2, n2, G2, H2, g2, u2);
            var K2 = e2.translatePosMatrix(k2.posMatrix, I2, a2, s2), Y2 = v2 || n2 && T2 || X2 ? Ji : G2, J2 = e2.translatePosMatrix(H2, I2, a2, s2, true), Q2 = z2 && 0 !== r2.paint.get(n2 ? "text-halo-width" : "icon-halo-width").constantOr(1), $2 = 1;
            if (0 != r2.layout.get("symbol-scaleable").constantOr(0) && B2.collisionArrays) {
              n2 && e2.transform.zoom > 18 && ($2 = Math.pow(2, e2.transform.zoom - 19));
              var tt2 = I2.latestFeatureIndex.loadVTLayers()._geojsonTileLayer;
              if (tt2 && 1 != $2) {
                for (var et2 = 0; et2 < tt2.length; ++et2)
                  if (r2.layout.get("symbol-scaleable").evaluate(tt2.feature(et2), {}))
                    for (var it2 = 0; it2 < B2.collisionArrays.length; it2++) {
                      var rt2 = B2.collisionArrays[it2];
                      rt2.textBox && (rt2.oldBox || (rt2.oldBox = JSON.parse(JSON.stringify(rt2.textBox))), rt2.textBox.x1 = rt2.oldBox.x1 * $2, rt2.textBox.y1 = rt2.oldBox.y1 * $2, rt2.textBox.x2 = rt2.oldBox.x2 * $2, rt2.textBox.y2 = rt2.oldBox.y2 * $2);
                    }
              }
            }
            var ot2 = { program: L2, buffers: P2, uniformValues: z2 ? B2.iconsInText ? Gi(D2.kind, R2, b2, g2, e2, K2, Y2, J2, O2, F2, $2) : Zi(D2.kind, R2, b2, g2, e2, K2, Y2, J2, n2, O2, true, $2) : qi(D2.kind, R2, b2, g2, e2, K2, Y2, J2, n2, O2, $2), atlasTexture: U2, atlasTextureIcon: j2, atlasInterpolation: N2, atlasInterpolationIcon: V2, isSDF: z2, hasHalo: Q2, coord: k2 };
            if (w2)
              for (var nt2 = 0, at2 = P2.segments.get(); nt2 < at2.length; nt2 += 1) {
                var st2 = at2[nt2];
                S2.push({ segments: new t.SegmentVector([st2]), sortKey: st2.sortKey, state: ot2 });
              }
            else
              S2.push({ segments: P2.segments, sortKey: 0, state: ot2 });
          }
        }
      }
      w2 && S2.sort(function(t2, e3) {
        return t2.sortKey - e3.sortKey;
      });
      for (var ct2 = 0, lt2 = S2; ct2 < lt2.length; ct2 += 1) {
        var ut2 = lt2[ct2], ht2 = ut2.state;
        if (f2.activeTexture.set(d2.TEXTURE0), ht2.atlasTexture.bind(ht2.atlasInterpolation, d2.CLAMP_TO_EDGE), ht2.atlasTextureIcon && (f2.activeTexture.set(d2.TEXTURE1), ht2.atlasTextureIcon && ht2.atlasTextureIcon.bind(ht2.atlasInterpolationIcon, d2.CLAMP_TO_EDGE)), ht2.isSDF) {
          var pt2 = ht2.uniformValues;
          ht2.hasHalo && (pt2.u_is_halo = 1, ir(ht2.buffers, ut2.segments, r2, e2, ht2.program, x2, 0, p2, pt2, ht2.coord)), pt2.u_is_halo = 0;
        }
        ir(ht2.buffers, ut2.segments, r2, e2, ht2.program, x2, 0, p2, ht2.uniformValues, ht2.coord);
      }
    }
    function ir(t2, e2, i2, r2, o2, n2, a2, s2, c2, l2) {
      var u2 = r2.context, h2 = u2.gl;
      r2.beforeDrawMask(i2, l2), o2.draw(u2, h2.TRIANGLES, n2, r2.eleSymbolstencilModel(i2), s2, It.disabled, c2, i2.id, t2.layoutVertexBuffer, t2.indexBuffer, e2, i2.paint, r2.transform.zoom, t2.programConfigurations.get(i2.id), t2.dynamicLayoutVertexBuffer, t2.opacityVertexBuffer);
    }
    function rr(t2, e2, i2, r2) {
      if ("translucent" === t2.renderPass) {
        var o2 = i2.paint.get("line-opacity"), n2 = i2.paint.get("line-width"), a2 = i2.paint.get("line-outline-width");
        if (0 !== o2.constantOr(1) && (0 !== n2.constantOr(1) || 0 != a2.constantOr(1))) {
          var s2 = t2.depthModeForSublayer(0, Et.ReadOnly), c2 = t2.colorModeForRenderPass();
          0 !== a2.constantOr(1) && or(t2, e2, i2, r2, s2, c2, true), 0 !== n2.constantOr(1) && 0 !== o2.constantOr(1) && or(t2, e2, i2, r2, s2, c2, false);
        }
      }
    }
    function or(e2, i2, r2, o2, n2, a2, s2) {
      var c2 = r2.paint.get(s2 ? "line-outline-dasharray" : "line-dasharray"), l2 = c2.constantOr(1), u2 = r2.layout.get("line-cap"), h2 = r2.paint.get(s2 ? "line-outline-pattern" : "line-pattern"), p2 = r2.paint.get("line-pattern-color"), f2 = h2.constantOr(1), d2 = r2.paint.get("line-gradient"), _3 = r2.getCrossfadeParameters(), m2 = f2 ? "linePattern" : l2 ? "lineSDF" : d2 ? "lineGradient" : "line", g2 = e2.context, v2 = g2.gl;
      if (d2) {
        g2.activeTexture.set(v2.TEXTURE0);
        var y2 = r2.gradientTexture;
        if (!r2.gradient)
          return;
        y2 || (y2 = r2.gradientTexture = new t.Texture(g2, r2.gradient, v2.RGBA)), y2.bind(v2.LINEAR, v2.CLAMP_TO_EDGE);
      }
      for (var b2 = 0, w2 = o2; b2 < w2.length; b2 += 1) {
        var x2 = w2[b2], T2 = i2.getTile(x2);
        if (!f2 || T2.patternsLoaded()) {
          var S2 = T2.getBucket(r2);
          if (S2) {
            var E2 = s2 ? S2.programConfigurations_outline.get(r2.id) : S2.programConfigurations.get(r2.id), A2 = (e2.context.program.get(), e2.useProgram(m2, E2)), k2 = h2.constantOr(null);
            if (k2 && T2.imageAtlas) {
              var I2 = T2.imageAtlas, B2 = I2.patternPositions[k2.to.toString()], P2 = I2.patternPositions[k2.from.toString()];
              B2 && P2 && E2.setConstantPatternPositions(B2, P2);
            }
            var C2 = c2.constantOr(null), z2 = u2.constantOr(null);
            if (!f2 && C2 && z2 && T2.lineAtlas) {
              var D2 = T2.lineAtlas, M2 = D2.getDash(C2.to, z2), L2 = D2.getDash(C2.from, z2);
              M2 && L2 && E2.setConstantPatternPositions(M2, L2);
            }
            var R2 = f2 ? Li(e2, T2, r2, _3, p2, s2 ? 1 : 0) : l2 ? Ri(e2, T2, r2, 0, _3) : d2 ? Mi(e2, T2, r2) : Di(e2, T2, r2);
            f2 ? (g2.activeTexture.set(v2.TEXTURE0), T2.imageAtlasTexture.bind(v2.LINEAR, v2.CLAMP_TO_EDGE), E2.updatePaintBuffers(_3)) : l2 && (g2.activeTexture.set(v2.TEXTURE0), T2.lineAtlasTexture.bind(v2.LINEAR, v2.REPEAT), E2.updatePaintBuffers(_3)), e2.beforeDrawMask(r2, x2), A2.draw(g2, v2.TRIANGLES, n2, e2.stencilModeForClipping(x2, r2), a2, It.disabled, R2, r2.id, S2.layoutVertexBuffer, S2.indexBuffer, S2.segments, r2.paint, e2.transform.zoom, E2);
          }
        }
      }
    }
    function nr(t2, e2, i2, r2, o2, n2, a2) {
      var s2, c2, l2, u2, h2, p2 = t2.context.gl, f2 = i2.paint.get("fill-pattern"), d2 = f2 && f2.constantOr(1), _3 = i2.getCrossfadeParameters();
      a2 ? (c2 = d2 && !i2.getPaintProperty("fill-outline-color") ? "fillOutlinePattern" : "fillOutline", s2 = p2.LINES) : (c2 = d2 ? "fillPattern" : "fill", s2 = p2.TRIANGLES);
      for (var m2 = 0, g2 = r2; m2 < g2.length; m2 += 1) {
        var v2 = g2[m2], y2 = e2.getTile(v2);
        if (!d2 || y2.patternsLoaded()) {
          var b2 = y2.getBucket(i2);
          if (b2) {
            var w2 = b2.programConfigurations.get(i2.id), x2 = t2.useProgram(c2, w2);
            d2 && (t2.context.activeTexture.set(p2.TEXTURE0), y2.imageAtlasTexture.bind(p2.LINEAR, p2.CLAMP_TO_EDGE), w2.updatePaintBuffers(_3));
            var T2 = f2.constantOr(null);
            if (T2 && y2.imageAtlas) {
              var S2 = y2.imageAtlas, E2 = S2.patternPositions[T2.to.toString()], A2 = S2.patternPositions[T2.from.toString()];
              E2 && A2 && w2.setConstantPatternPositions(E2, A2);
            }
            var k2 = t2.translatePosMatrix(v2.posMatrix, y2, i2.paint.get("fill-translate"), i2.paint.get("fill-translate-anchor"));
            if (a2) {
              u2 = b2.indexBuffer2, h2 = b2.segments2;
              var I2 = [p2.drawingBufferWidth, p2.drawingBufferHeight];
              l2 = "fillOutlinePattern" === c2 && d2 ? Ei(k2, t2, _3, y2, I2) : Si(k2, I2, t2);
            } else
              u2 = b2.indexBuffer, h2 = b2.segments, l2 = d2 ? Ti(k2, t2, _3, y2) : xi(k2, t2);
            t2.beforeDrawMask(i2, v2), x2.draw(t2.context, s2, o2, t2.stencilModeForClipping(v2, i2), n2, It.disabled, l2, i2.id, b2.layoutVertexBuffer, u2, h2, i2.paint, t2.transform.zoom, w2);
          }
        }
      }
    }
    function ar(t2, e2, i2, r2, o2, n2, a2) {
      for (var s2 = t2.context, c2 = s2.gl, l2 = i2.paint.get("fill-extrusion-pattern"), u2 = l2.constantOr(1), h2 = i2.getCrossfadeParameters(), p2 = i2.paint.get("fill-extrusion-opacity"), f2 = 0, d2 = r2; f2 < d2.length; f2 += 1) {
        var _3 = d2[f2], m2 = e2.getTile(_3), g2 = m2.getBucket(i2);
        if (g2) {
          var v2 = g2.programConfigurations.get(i2.id), y2 = t2.useProgram(u2 ? "fillExtrusionPattern" : "fillExtrusion", v2);
          u2 && (t2.context.activeTexture.set(c2.TEXTURE0), m2.imageAtlasTexture.bind(c2.LINEAR, c2.CLAMP_TO_EDGE), v2.updatePaintBuffers(h2));
          var b2 = l2.constantOr(null);
          if (b2 && m2.imageAtlas) {
            var w2 = m2.imageAtlas, x2 = w2.patternPositions[b2.to.toString()], T2 = w2.patternPositions[b2.from.toString()];
            x2 && T2 && v2.setConstantPatternPositions(x2, T2);
          }
          var S2 = t2.translatePosMatrix(_3.posMatrix, m2, i2.paint.get("fill-extrusion-translate"), i2.paint.get("fill-extrusion-translate-anchor")), E2 = i2.paint.get("fill-extrusion-vertical-gradient"), A2 = u2 ? bi(S2, t2, E2, p2, _3, h2, m2) : yi(S2, t2, E2, p2);
          y2.draw(s2, s2.gl.TRIANGLES, o2, n2, a2, It.backCCW, A2, i2.id, g2.layoutVertexBuffer, g2.indexBuffer, g2.segments, i2.paint, t2.transform.zoom, v2);
        }
      }
    }
    function sr(e2, i2, r2, o2, n2, a2) {
      var s2 = e2.context, c2 = s2.gl, l2 = i2.fbo;
      if (l2) {
        var u2 = e2.useProgram("hillshade");
        s2.activeTexture.set(c2.TEXTURE0), c2.bindTexture(c2.TEXTURE_2D, l2.colorAttachment.get());
        var h2 = function(e3, i3, r3) {
          var o3 = r3.paint.get("hillshade-shadow-color"), n3 = r3.paint.get("hillshade-highlight-color"), a3 = r3.paint.get("hillshade-accent-color"), s3 = r3.paint.get("hillshade-illumination-direction") * (Math.PI / 180);
          "viewport" === r3.paint.get("hillshade-illumination-anchor") && (s3 -= e3.transform.angle);
          var c3, l3, u3, h3 = !e3.options.moving;
          return { u_matrix: e3.transform.calculatePosMatrix(i3.tileID.toUnwrapped(), h3), u_image: 0, u_latrange: (c3 = i3.tileID, l3 = Math.pow(2, c3.canonical.z), u3 = c3.canonical.y, [new t.config.parse.Coordinate(0, u3 / l3).toLngLat().lat, new t.config.parse.Coordinate(0, (u3 + 1) / l3).toLngLat().lat]), u_light: [r3.paint.get("hillshade-exaggeration"), s3], u_shadow: o3, u_highlight: n3, u_accent: a3 };
        }(e2, i2, r2);
        u2.draw(s2, c2.TRIANGLES, o2, n2, a2, It.disabled, h2, r2.id, e2.rasterBoundsBuffer, e2.quadTriangleIndexBuffer, e2.rasterBoundsSegments);
      }
    }
    function cr(e2, i2, r2, o2, n2, a2, s2) {
      var c2 = e2.context, l2 = c2.gl, u2 = i2.dem;
      if (u2 && u2.data) {
        var h2 = u2.dim, p2 = u2.stride, f2 = u2.getPixels();
        if (c2.activeTexture.set(l2.TEXTURE1), c2.pixelStoreUnpackPremultiplyAlpha.set(false), i2.demTexture = i2.demTexture || e2.getTileTexture(p2), i2.demTexture) {
          var d2 = i2.demTexture;
          d2.update(f2, { premultiply: false }), d2.bind(l2.NEAREST, l2.CLAMP_TO_EDGE);
        } else
          i2.demTexture = new t.Texture(c2, f2, l2.RGBA, { premultiply: false }), i2.demTexture.bind(l2.NEAREST, l2.CLAMP_TO_EDGE);
        c2.activeTexture.set(l2.TEXTURE0);
        var _3 = i2.fbo;
        if (!_3) {
          var m2 = new t.Texture(c2, { width: h2, height: h2, data: null }, l2.RGBA);
          m2.bind(l2.LINEAR, l2.CLAMP_TO_EDGE), (_3 = i2.fbo = c2.createFramebuffer(h2, h2, true)).colorAttachment.set(m2.texture);
        }
        c2.bindFramebuffer.set(_3.framebuffer), c2.viewport.set([0, 0, h2, h2]), e2.useProgram("hillshadePrepare").draw(c2, l2.TRIANGLES, n2, a2, s2, It.disabled, function(e3, i3, r3) {
          var o3 = i3.stride, n3 = t.create();
          return t.ortho(n3, 0, t.EXTENT, -t.EXTENT, 0, 0, 1), t.translate(n3, n3, [0, -t.EXTENT, 0]), { u_matrix: n3, u_image: 1, u_dimension: [o3, o3], u_zoom: e3.overscaledZ, u_maxzoom: r3, u_unpack: i3.getUnpackVector(), u_featureZoom: e3.overscaledZ };
        }(i2.tileID, u2, o2), r2.id, e2.rasterBoundsBuffer, e2.quadTriangleIndexBuffer, e2.rasterBoundsSegments), i2.needsHillshadePrepare = false;
      }
    }
    function lr(e2, i2, r2, o2, n2) {
      var a2 = o2.paint.get("raster-fade-duration");
      if (a2 > 0) {
        var s2 = t.browser.now(), c2 = (s2 - e2.timeAdded) / a2, l2 = i2 ? (s2 - i2.timeAdded) / a2 : -1, u2 = r2.getSource(), h2 = n2.coveringZoomLevel({ tileSize: u2.tileSize, roundZoom: u2.roundZoom }), p2 = !i2 || Math.abs(i2.tileID.overscaledZ - h2) > Math.abs(e2.tileID.overscaledZ - h2), f2 = p2 && e2.refreshedUponExpiration ? 1 : t.clamp(p2 ? c2 : 1 - l2, 0, 1);
        return e2.refreshedUponExpiration && c2 >= 1 && (e2.refreshedUponExpiration = false), i2 ? { opacity: 1, mix: 1 - f2 } : { opacity: f2, mix: 0 };
      }
      return { opacity: 1, mix: 0 };
    }
    var ur = new t.Color(1, 0, 0, 1), hr = new t.Color(0, 1, 0, 1), pr = new t.Color(0, 0, 1, 1), fr = new t.Color(1, 0, 1, 1), dr = new t.Color(0, 1, 1, 1);
    function _r(t2, e2, i2, r2) {
      gr(t2, 0, e2 + i2 / 2, t2.transform.width, i2, r2);
    }
    function mr(t2, e2, i2, r2) {
      gr(t2, e2 - i2 / 2, 0, i2, t2.transform.height, r2);
    }
    function gr(e2, i2, r2, o2, n2, a2) {
      var s2 = e2.context, c2 = s2.gl;
      c2.enable(c2.SCISSOR_TEST), c2.scissor(i2 * t.browser.devicePixelRatio, r2 * t.browser.devicePixelRatio, o2 * t.browser.devicePixelRatio, n2 * t.browser.devicePixelRatio), s2.clear({ color: a2 }), c2.disable(c2.SCISSOR_TEST);
    }
    function vr(e2, i2, r2) {
      var o2 = e2.context, n2 = o2.gl, a2 = r2.posMatrix, s2 = e2.useProgram("debug"), c2 = Et.disabled, l2 = At.disabled, u2 = e2.colorModeForRenderPass();
      e2.beforeDrawMask({ type: "debug" }, r2), o2.activeTexture.set(n2.TEXTURE0), e2.emptyTexture.bind(n2.LINEAR, n2.CLAMP_TO_EDGE), s2.draw(o2, n2.LINE_STRIP, c2, l2, u2, It.disabled, Bi(a2, t.Color.red), "$debug", e2.debugBuffer, e2.tileBorderIndexBuffer, e2.debugSegments);
      var h2 = i2.getTileByID(r2.key).latestRawTileData, p2 = Math.floor((h2 && h2.byteLength || 0) / 1024), f2 = i2.getTile(r2).tileSize, d2 = 512 / Math.min(f2, 512) * (r2.overscaledZ / e2.transform.zoom) * 0.5;
      "Sg4326" == r2.reference && (d2 = 1);
      var _3 = r2.canonical.toString();
      r2.overscaledZ !== r2.canonical.z && (_3 += " => " + r2.overscaledZ), function(t2, e3) {
        t2.initDebugOverlayCanvas();
        var i3 = t2.debugOverlayCanvas, r3 = t2.context.gl, o3 = t2.debugOverlayCanvas.getContext("2d");
        o3.clearRect(0, 0, i3.width, i3.height), o3.shadowColor = "white", o3.shadowBlur = 2, o3.lineWidth = 1.5, o3.strokeStyle = "white", o3.textBaseline = "top", o3.font = "bold 36px Open Sans, sans-serif", o3.fillText(e3, 5, 5), o3.strokeText(e3, 5, 5), t2.debugOverlayTexture.update(i3), t2.debugOverlayTexture.bind(r3.LINEAR, r3.CLAMP_TO_EDGE);
      }(e2, _3 + " " + p2 + "kb"), s2.draw(o2, n2.TRIANGLES, c2, l2, kt.alphaBlended, It.disabled, Bi(a2, t.Color.transparent, d2), "$debug", e2.debugBuffer, e2.quadTriangleIndexBuffer, e2.debugSegments);
    }
    var yr = function(t2) {
      this.id = "LogoWebglLayer" + new Date().getTime(), this.type = "custom", this.renderingMode = "2d", this.radio = t2.devicePixelRatio, this.logoWidth = 64, this.logoHeight = 22, this.logoLeft = 4, this.logoBottom = 2, this.context = t2.context, this.updateSize(t2);
    };
    yr.prototype.updateSize = function(t2) {
      this.width = t2.width, this.height = t2.height;
      var e2 = t2.logoSize ? parseInt(t2.logoSize) > 20 ? t2.logoSize : 20 : "";
      e2 && (this.logoWidth = e2 * (this.logoWidth / this.logoHeight), this.logoHeight = e2);
    }, yr.prototype.onAdd = function(e2, i2) {
      this.num = 4;
      var r2 = i2.createShader(i2.VERTEX_SHADER);
      i2.shaderSource(r2, "\n        uniform mat4 u_Matrix;\n        attribute vec4 a_Position;\n        attribute vec2 a_TexCoord;\n        varying vec2 v_TexCoord;\n        void main(){\n            gl_Position = u_Matrix*a_Position;\n            v_TexCoord = a_TexCoord;\n        }"), i2.compileShader(r2);
      var o2 = i2.createShader(i2.FRAGMENT_SHADER);
      i2.shaderSource(o2, "\n        precision mediump float;\n        uniform sampler2D u_Sampler;\n        varying vec2 v_TexCoord;\n        void main(){\n            gl_FragColor = texture2D(u_Sampler,v_TexCoord);\n        }"), i2.compileShader(o2), this.program = i2.createProgram(), i2.attachShader(this.program, r2), i2.attachShader(this.program, o2), i2.linkProgram(this.program), this.vertexSizeBuffer = i2.createBuffer(), this.a_Position = i2.getAttribLocation(this.program, "a_Position"), this.a_TexCoord = i2.getAttribLocation(this.program, "a_TexCoord"), this.u_Matrix = i2.getUniformLocation(this.program, "u_Matrix");
      var n2 = this.logoLeft * this.radio, a2 = (this.logoLeft + this.logoWidth) * this.radio, s2 = (this.logoHeight + this.logoBottom) * this.radio, c2 = this.logoBottom * this.radio, l2 = new Float32Array([n2, s2, 0, 0, n2, c2, 0, 1, a2, s2, 1, 0, a2, c2, 1, 1]);
      i2.bindBuffer(i2.ARRAY_BUFFER, this.vertexSizeBuffer), i2.bufferData(i2.ARRAY_BUFFER, l2, i2.STATIC_DRAW), this.fsize = l2.BYTES_PER_ELEMENT;
      var u2 = new Image();
      if (u2.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAABTCAYAAAC2/xobAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAFcVJREFUeNrsXW+MVcUVHxRbQWG3YqHWwK6JEayFfZBGUwX2kUrSJiqblEYNpi71Q0lL0/ULppjGp40m7hfXio1+sC6JRpqmcUETTbTJLqyY2oTddduKiU13MbSFWPoWGpFiur2/uzO7c8+dmTv3vbn3vgfzS25g35/77p05f37nzJlz501PTzMPD48LG5f4IfDw8Iru4eHhFd3Dw8MruoeHh1d0Dw8Pr+geHh5e0T08PLyie3h4eEX38PCK7uHh4RXdw8OjuTDfD4FHg6EUHK38/4N+OJpP0TGBXcFR5hPZUcD9TgbHRHCMciEacHju9uCo8Hts4a9N8d/p80KbCIxdd3C0kdf38vcmMvjNVi6X7fwoGhPkcIZ5OexeK/OJ6mxA4Zrk19Zf53m6uTK3GD7zdHD0pPBmWQhQEd5ZGPZRfkwolG0wwfBP8fOMOlLubn50sMbFJJdLyFW17rNB0TM8+qabAwPB0VrjPZZT/E6P4vvtwdEfHNWM77HKf6c14zkXYzKhuY5Bfs/is4Mprr+9zuvqyWGcs5i3nnrnJKuJhjCNNtmAjtaoBBMpf0cW1q4CBA+/V7K8t26iiBPcWJQTvmN7Dd0pr72/Dpnsn25u1OOMMqPuiH23aDnJJ2fZsX+dzZ0LtSyYz9asWGz6yBiniNUU1HQkwjE/Pc9eeud48O/nbNtt17K2qxfQ7zzI6ViJU9aWAmjhFP/9CcN99SdQW1UoEhsPi3xJLKR7Yv9H7Meb21jLwsuU4WYN94t7uf8CyGOM8TFuiBgdsc+LKuXGBL42coKdPvt5oaN1x9qlgSC1sw0rr6o1lhbA556SX7hnzxH2+sjJ8P+LA8Py9z230+/s5wm7wYLzFnv5XKli2AlLA/Qoz3FYGXgb/PCFcfby4eNsxZIFbN/OtSrDvElKbJalRGhVSrTSJN8jqt+CLI4fO8MOfniqYTR5YyCTq1csYneuXVZPricXRZ+gmVMMKCawaAWneO4Hq9l9gddV4DqDtysToxbxFF/d+XbkPt/YdTM1KGNc+F6lJ37/2OlZI+ESG1ZdpTJqU5rEX1rvJ4/VtOqenjjwEXs+GGuNh57FoUDhvtP73uzf64NrfjMYPwUTaEtgCj3c6MAA/E11TffsGSmEVdoChu75B1brnNGmtKs4rpfXYssjGNRGVHJgx6/Hw38Vyl5ReLsKFyCjp7O4zw6dkn87EPJMxukAY0/esypkMXIkw2kg9YD3q65tKrguCJ8iFOnhR9l0T/gXSpuk7BZos3j/Vc5YWK7j7BAwQjB6GmdUUY13noreRV/Yte9obFBBaUFNFEKjBejVsESxYO03qq2dEtUgdoa3pFZ81ysfBNeylApgOeXyT92A18tS+JAz0NB03X3Pxsu4NjFvH/R20rHSxowYb3FP4x+fYe8Hx4YUc1YnYLA+o/mTZlByKp8YM6IrnZytTBSl6GU6sMMk/vnR7W3s4S3Xp7fsgcDJ54KS7w7Okwa9994YJsqEJxceWCGAbdJAVlgO6637dq6bjU+zAOi7JsxKNLAJYyUMRncD6snl8h+Ye6rkyNcgaWqIiXMDQtzXj5yM5LHw78vBdStkvcxS1H+4VvQIrYVQUE9ek5I7BGgQJlw2GoeOnlIJr+C5P83r2hCT3bd+hqa9NHw8ovTbbr129r0k5nLvnmjiG+xHcX+TzE0RTTun/21Zj49YrcE9IokmG6I1yxclytb7x87ExgUG1uZ307DPWgFjExqcF1hk7nGPu9XjXhh1jyZXjp6KKVmRSi6ApRtZ0TUDqQxFBJ2iRsxEvVT33LpwvjJBJRSSjh0EzYb2gmpTPKxmPhULKu8iZrZWYsTPqnga/ybRbcwnwhMYS62if3w6Jo/6UOd8MHdHwwQhjMvxZ76Vm+xCPmVFH3awKpDrppbWBlDylNcRiz/T0utxg0FwmKCaFc49b03YevN+Sbn7WLRGPzPDLwyY8MQmJcbraYR8MiGLTufCpOjPvjUZ86p50fuEWo/GV/QmRGuSV6jXi1UDL+RK0SGcVGnAGgze3HnRDhjFwdC7no8plkjqNTpUBvPYJ2ebWpC9opuB2DNSAAIPDE88bknddRAFIa5iP5VwIq5XnH+Me/N210r+bPD7WSkzxmtFcC8IedYsn/F4SDDK6+6u8Pj++ArIQ/uOhodL7L7relMFoFf0HIGii0hVFSbl3cpt2i9c+cCbkb8VBTPW3l4GqqXMuYD4MqZmVaJH8upOqbpmCS8Ri3lpMmUBq5cvchra2OJXb0/m8jswippipuZWdGS7ay03pNSpnnNBoFJ49CFWQKkqjTdNeQUYBZo3wDKmhi1AwX/OFIUx8MhUWWPjPnw8ligUwgrvhHnRVZwJhiGW+mgBDq2Mg4K3NEhep9mRq6JDAFyVHbo8VwKQpPq3SrkQj/beuyqVMCKZh3VSrOmbkkFp42LqIR/W1xjAaL2hOocN7VYmIg8w9ucnO0Ol/UtvZ5hgw5hg/Vc+J5YHcyyYqRmoRoPBcir7io1cWMPPazw8dU9GbCebXEYJL6TZfBEDviOyyFh2c6HoKm++c3N7kvG5gr5Q78YOCLHwzllkjfPEfWEBzdLAIJ9UVaXVxGTlIi0RlmgSpV7RGwVyaScEHH/bCPcwqTJLE6qgIETJEIgAwZuDQqcFvmOzXq0ChLYZPHUa1iUbz4TdjolsizKlInIPuSo6soxpy1Z1A1bPuWgs2IigNE8lFIdI/b+I5e/eE98SDg9lKljCGvHG3qtihUBgHnKCDJtjZKNmsce/6UDzIzDkOJBTgEG0KfxCHghGmO5GLCrB6D16E+NZspxmyl3AIEC4TOEC3qdeiwoklPpC8t4qIL+hcgQYV7HMJkqSVWMBAwxWoIrJbbbrZgHf1z0Z5dw9CqHt8CRKxVyQTmBottxDDSjvKzvXhoqpA6g9jMHXdg3x1YrzM148UHC8TpUcqyCoq9co+Zj36BchqJCs0CSD4FFELbYNNEml3wXHd/2ox0MZHGGy853j2mVD2csjP6Lako36e0P5LDoOYRm3wyu6h9bzYDlLBznLH35evVV1K5vrud9Vg8ChU00/m1mdeORCG2MYR+SCcGBZFGXGuvp7quTYZwCqnpC138LqbL9VOHVvWRi1I43Smyu2M2xJuuWTqn3BjZPra11Ymz2mAqnI3A/xf+FRKqyGXmT8u/je4MXg5ZFIA623QdhGa/9HsV15RSBTj04TFRA83HTRWVpaE67xdPoJJJnppPLUeoHMLbLfKLKxNhZEyZHtVcSHo8zDWmlB31VdinQIm0YcnukrgPHHEp2im1FTKvqYTP2g0DRuQVM+2yUK13iJx1qUYmnWqK09lOvtt6odcqi/xnjaFtm8duSE0eimvceLDUisgYGCXSUpN2QcRUpV3upbVYuAJUoUzezibdSgA3k6PNeKPkhjPAyAvP4tJy/qAc7pYqcU4ijFgA8VKWRVzeYQeHUYJRsBoeu3GtbiFV0CEm/IoIOx2eyDFwou70AT7cpoF6OivbzrGL2PvoAkxurlixpyYsOMqLoMsV/6f3sRNFFHBcGIkjbl4PvUAymyvmBfVa/eTGKbR0LmlKTkcA6oh0fP/t2K9lVgXYjlUf+PZTXImQrCy9+4ayi2pNroio7gN9ZmFzeNG24kYLKw3dSwX7swRTeVoUKBadmrKkSRoVkPHvCqPQd4clOPATgrVAVCeSHPNiEUZAseHgYBhkHn8DDfquKnRqbuwhtGtkDC4uGGQVNeHzkRNumbLKB5vmhaAME30N/EzDO1+CuWuGscSL05hAPXLNdeg5Yjm6srAaa0/Q71Gq5XdOKFsUVXhIOYU+Q1EPK4oNY4Pw7ML5bo6BOLDmW8IpWFoldMFo48RKARkZrOuuwQOqmoccdWWCToZI+ja1oAAZJpO2ijwvugs4LPuJNxhuHcxscKcwovC3YE5cRYw+DWO9dwMCig6f10Vbg7Do6v1g0zRSo6tLhTleRI2rstngZie8OIU5E00Tw9xOgxoSTwchr61U28eilPgRsnLYnRvx5jhlwCffjA3c8ciYUf8BYJsTnNQTQtXO8Zl402SluFwQSDE11nZE9vmxjVGRbh5fNAFooemwxkiyGgU2fPK/toyzvTQFVNrZqEkst921DAYNuhE0+OwcQJ+vtu5VZqfLqIordSo5Ul6PlF0ZHwBHLP9pnk3JHZ8VLtZtPQ+wtC0WnDjY0OvSLCO1VLKSi/yJoLxrSRM6tG3vDjOhlXVim68EJQLlUsIlfM2TRdhCeXP0e9WJKRkCfttfhDDdtMXpxms9c7nlhK3WWPAWOG7bkRBhCMAzZSAI8TwV+vbpqApcOJZlVuUW0me9zZfIbDwiXsYNNly2kiDXKN5WJsZkHPQDghXOOhBnpKa+YePcvEVQJE9j+SGITFlY0EYiQFfSpLMWyu/eKSylbhoelz6OBd4PnpdzXtpPocX3IpL4ag6tQyq+TLFzntuw6Wh2w5DAsUFsfBo6esGnMMi/k5MHdtgu6LUKzZFb1ErW+WiasE9HNljSj6neuWRSiZ5jHF3TqFyHKrJ6Xt8CgqofhNEKp8s3I44tEozTQ8uMF1tr2FpXvMck1AklGn5IZ6iLoBRoVDJJExR4d4xZztzsFxzkDFHNmEp41O3TtMNHR9/vELMuj7qUenlAxCpLiPdmaxhu4yLqSlr7pED5QffepM1DLFY5iaAhhn1To0GkDgCa+KsTqXxXXAUYEBIl+CnYN4VBNyRKgTsS0Mg9KrHp3VLB69nOT91hRTITfIyDZAULzIuvSRkyraV1bFslkm42jG3TReEGzUJqi8nKa76CRrsiScvGsPxg2FKigWwjIX4vGE5S4wl7trYVVQQsiHnGHXNYnEdc0+HFHIPff4BxXJUQFsrKq1FVrjKTqNN4vZtYYJfyqiCOuWRhQdHv15FqN+XSr6Hl/ndjeEB1OOFzwLhJLSR/EkE+qMeEjSr8mt9DDNQyXzwgZeWgrjpeqSOsNk1tmc6mlWY3kvDIlQTlOGfYN6j8TsfeDYLYWwIs5HsRjmrZYGno2i6BEhUT17q6ClB3jlyK466r3D537Ht8+CBSTuvHFpvGhOI4kBoaBDFSNiqRIeT8FS+njeYpTQ+VQNI+D1kMQUCSps7EChiYv8y8yuxvn1JK0e5fdUU5ii6xcn5EQ0ipTD0Y2S17eJ84uAK0Vvp/H5QUW23VUiDueSt79ahAQD9PpAb+UJQ0a3N660sZkZzmjJBMoT2z5rMCIwCo8b4jwsubXtWkDP0cLHosQ9HhQ/1fPfVU0PYVgw36DWLlBj9nyMOWiAEXriu643PnGGykOjZdizTMbFKB/i3qy8OQwGhArKjmSMpiFDlSg6iWOjwqTJvpdtBCOLRJwpcSlaCcuGgSbm8B4+o9jp1sbHo5yk5GE5LclJ6IS/dWEhXcnQxgrLqJvY3JNh6wZi53oSbciuo7Dp2p/8Plzvh3GE4Zgs8ImsrmanWyUkNC52CXgqze4zgRFi7YnXWMp2EAHGRJDzLTHlHFwiTeISfdtpWCSMnZycC4tpgr8VcW0n0ywfznRROaEzfDEs5o0UUN5cAMTSnry8N8QcJR1pok1uRmG7Z53G+YcfubWQXJULRY/Rdrozpw46lujZLdGhmkRYaVo8Q+Io4/i4XC6kRkTX3gregQpY2GOcF/1ACOlON8TyiviwQxXz2zQEQeiE0Ac1CWkYDQzphpWZy3QnPz50blVqzLDTZF/ea+iuFL0nibab+mPrvEoexf74DVmw8bumhElWxTKqxKVqfZ4+KkjEhFjTnfPs8Z1uuMekOmxcgynmx+9gvEzZ5rhiRMULKwR5beIIsFJloOTQAw6pXgdEM+yHZj3+aWUlnU3MnkUzSRcxejcVGCqM2xImlwo1NsHkEc/QOB3KYereQru/uiqWUSUuqUDolJwmwMQSFI3ZsdMtaUxlocf3YaCx3IVYFV4IRjAN7aSfhZLlXShiyqek2SORKpkXxPiYA5TQgqqjYQXGEvG+TcKSXpcL5livRy/zOEmykieVMZxxcEBTD0QTSTc9NOSkftnUZALUP27lT2q9Du3+6moNnTIFyoBg+KiSY1x1T/7AfSXtdFPR0nCfdMgIzjhJMooqRNmrIUMP5oR7dN1UM6GhSPDeomAc5/4G1caYbAufnrosE+OSZmkNbADPn6dzrcnXTOSp6KUkobUZQAgEXe4SHtZmN5sJqECCFdUJAN2OqNnkYuWxsorPqYGB8uCeTDkKsdNNbqBpM5aq568lAMmvAX6A3UXW5KnBEZ5dtQW0XuBexXPadaEawhPZ8NB18UbDzNNxlUZiMG/qHh3M9VEl0VQAPUpfQBVUFrXwoqGiKU63DTN6AwomKDH+VVlaSplbpL+RNFN9jlJmU0gglNzGyIBCyuzAZtulTUqBzSxpbQ+OL3FW18c9TD9/P3Jvz+X4HHBT6CXKaB2NQy7AaoqLrcaXViqVeq7jchqj46IQC4rWPJtXf5l+B5tMdnBBmW3qcPlll4ZKt4J//+Tp/zqziAMPfoMta/mi8n28DuUOu9UEv/2Lrfq0MD57wzVXsJVfuZI9tvWG4F4Xxj6z+etXs9++9w927vP/hQIu3z+y1Lg39CZ7LPgdoazw4DN0dhnbu6MUu1aECH/861T4/i+/f5NOyWE85zFS5IPrwTXgaTRbb7lG9d3/BMcXEoZxkiv3z/jcwXujuu4zmsbgMlGmzAcG58Tpc+yfU+fCsckCdLx1c4gxeetPn4QdjRrZk/fv6GDfu/ka1dvb0yr6vOnp6XqvCT+YpnB3O7f8oP0jaShtLXBZkWcLZE1RE59V3KfAXm5wW7kCtqX8LuYDqydbJK89yhV6kKXvL2d8aCCM3THHzUENz2n/Q3DconpD1Azo+ugXARQe3REu4WkbUj7Nanh0lgtFR1XcqyniOdnaQzhfZB4ulFzOm4ykoOEl5r7jTCtTPMyjIFzHZure778A5nqM60/qDTsuYvQBpujlrqF/tFQWnmQTjeuyDuM4q5iyHNjtTaTkwpvaXnM3y6atVJUL5P6Cx+dBfn/dljLayBiqVclDwKM7OrqCY2Jajf7gaDV8F+9VgqM6nS1w/hL/zZLheoE+6Zrb+T3Q6xsNjm5+uMZgcAwY7qMnYT7KhvsblMYh66MrYZyzgmp8enKQsSxQqXceXFB3FW0r86SQ2BJZTfHdLun7nQ6t4QCbe443DT3KnMKOcg8wYPB0rUy9gaLEKeIWBSuo8M93Scky8Tut3OO082NQOhh/rUtKXIrY2RYliUlVa4y5XaDE7zPr9tm4t76E+evh19LWwB5ctP3qc8G6slB0j7k8RBoj55E/hHEtMdLWuyBUJZlxaoy9ont4XAS4xA+Bh4dXdA8PD6/oHh4eXtE9PDy8ont4eHhF9/Dw8Iru4eHhFd3Dw8MruoeHV3QPDw+v6B4eHs2F/wswAD9f5ORzGtg8AAAAAElFTkSuQmCC", u2.complete)
        this.image = u2, this.Texture = new t.Texture(this.context, this.image, i2.RGBA), this.Texture.bind(i2.LINEAR, i2.CLAMP_TO_EDGE);
      else {
        var h2 = this, p2 = i2;
        u2.onload = function() {
          h2.image = u2, h2.Texture = new t.Texture(h2.context, h2.image, p2.RGBA), h2.Texture.bind(p2.LINEAR, p2.CLAMP_TO_EDGE);
        };
      }
    }, yr.prototype.onRemove = function(t2, e2) {
      this.Texture && this.Texture.destroy(), this.image = void 0;
    }, yr.prototype.render = function(e2, i2) {
      if (this.Texture) {
        e2.useProgram(this.program), e2.bindBuffer(e2.ARRAY_BUFFER, this.vertexSizeBuffer), e2.vertexAttribPointer(this.a_Position, 2, e2.FLOAT, false, 4 * this.fsize, 0), e2.enableVertexAttribArray(this.a_Position), e2.vertexAttribPointer(this.a_TexCoord, 2, e2.FLOAT, false, 4 * this.fsize, 2 * this.fsize), e2.enableVertexAttribArray(this.a_TexCoord);
        var r2 = t.identity(new Array(16));
        t.translate(r2, r2, [-1, -1, 0]), t.scale(r2, r2, [2 / this.width, 2 / this.height, 1]), e2.uniformMatrix4fv(this.u_Matrix, false, r2), this.Texture.update(this.image, { useMipmap: true }), e2.drawArrays(e2.TRIANGLE_STRIP, 0, this.num);
      }
    };
    var br = t.createLayout([{ name: "a_pos", type: "Int16", components: 2 }, { name: "a_uv", type: "Int16", components: 2 }]), wr = { symbol: function(e2, i2, r2, o2, n2) {
      if ("translucent" === e2.renderPass) {
        var a2 = e2.colorModeForRenderPass();
        r2.layout.get("text-variable-anchor") && function(e3, i3, r3, o3, n3, a3, s2) {
          for (var c2 = i3.transform, l2 = "map" === n3, u2 = "map" === a3, h2 = 0, p2 = e3; h2 < p2.length; h2 += 1) {
            var f2 = p2[h2], d2 = o3.getTile(f2), _3 = d2.getBucket(r3);
            if (_3 && _3.text && _3.text.segments.get().length) {
              var m2 = t.evaluateSizeForZoom(_3.textSizeData, c2.zoom), g2 = y(d2, 1, i3.transform.zoom, "xy"), v2 = Xt(f2.posMatrix, u2, l2, i3.transform, g2), b2 = "none" !== r3.layout.get("icon-text-fit") && _3.hasIconData();
              if (m2) {
                var w2 = Math.pow(2, c2.zoom - d2.tileID.overscaledZ);
                $i(_3, l2, u2, s2, t.symbolSize, c2, v2, f2.posMatrix, w2, m2, b2);
              }
            }
          }
        }(o2, e2, r2, i2, r2.layout.get("text-rotation-alignment"), r2.layout.get("text-pitch-alignment"), n2), 0 !== r2.paint.get("icon-opacity").constantOr(1) && er(e2, i2, r2, o2, false, r2.paint.get("icon-translate"), r2.paint.get("icon-translate-anchor"), r2.layout.get("icon-rotation-alignment"), r2.layout.get("icon-pitch-alignment"), r2.layout.get("icon-keep-upright"), 0, a2), 0 !== r2.paint.get("text-opacity").constantOr(1) && er(e2, i2, r2, o2, true, r2.paint.get("text-translate"), r2.paint.get("text-translate-anchor"), r2.layout.get("text-rotation-alignment"), r2.layout.get("text-pitch-alignment"), r2.layout.get("text-keep-upright"), 0, a2), i2.map.showCollisionBoxes && (Yi(e2, i2, r2, o2, r2.paint.get("text-translate"), r2.paint.get("text-translate-anchor"), true), Yi(e2, i2, r2, o2, r2.paint.get("icon-translate"), r2.paint.get("icon-translate-anchor"), false));
      }
    }, circle: function(e2, i2, r2, o2) {
      if ("translucent" === e2.renderPass) {
        var n2 = r2.paint.get("circle-opacity"), a2 = r2.paint.get("circle-stroke-width"), s2 = r2.paint.get("circle-stroke-opacity"), c2 = void 0 !== r2.layout.get("circle-sort-key").constantOr(1);
        if (0 !== n2.constantOr(1) || 0 !== a2.constantOr(1) && 0 !== s2.constantOr(1)) {
          for (var l2 = e2.context, u2 = l2.gl, h2 = e2.depthModeForSublayer(0, Et.ReadOnly), p2 = e2.colorModeForRenderPass(), f2 = [], d2 = 0; d2 < o2.length; d2++) {
            var _3 = o2[d2], m2 = i2.getTile(_3), g2 = m2.getBucket(r2);
            if (g2) {
              var v2 = g2.programConfigurations.get(r2.id), y2 = { programConfiguration: v2, program: e2.useProgram("circle", v2), layoutVertexBuffer: g2.layoutVertexBuffer, indexBuffer: g2.indexBuffer, uniformValues: Ai(e2, _3, m2, r2), coord: _3 };
              if (c2)
                for (var b2 = 0, w2 = g2.segments.get(); b2 < w2.length; b2 += 1) {
                  var x2 = w2[b2];
                  f2.push({ segments: new t.SegmentVector([x2]), sortKey: x2.sortKey, state: y2 });
                }
              else
                f2.push({ segments: g2.segments, sortKey: 0, state: y2 });
            }
          }
          c2 && f2.sort(function(t2, e3) {
            return t2.sortKey - e3.sortKey;
          });
          for (var T2 = 0, S2 = f2; T2 < S2.length; T2 += 1) {
            var E2 = S2[T2], A2 = E2.state, k2 = A2.programConfiguration, I2 = A2.program, B2 = A2.layoutVertexBuffer, P2 = A2.indexBuffer, C2 = A2.uniformValues, z2 = E2.segments;
            e2.beforeDrawMask(r2, A2.coord), I2.draw(l2, u2.TRIANGLES, h2, e2.eleSymbolstencilModel(r2), p2, It.disabled, C2, r2.id, B2, P2, z2, r2.paint, e2.transform.zoom, k2);
          }
        }
      }
    }, heatmap: function(e2, i2, r2, o2) {
      if (0 !== r2.paint.get("heatmap-opacity"))
        if ("offscreen" === e2.renderPass) {
          var n2 = e2.context, a2 = n2.gl, s2 = At.disabled, c2 = new kt([a2.ONE, a2.ONE], t.Color.transparent, [true, true, true, true]);
          !function(t2, e3, i3) {
            var r3 = t2.gl;
            t2.activeTexture.set(r3.TEXTURE1), t2.viewport.set([0, 0, e3.width / 4, e3.height / 4]);
            var o3 = i3.heatmapFbo;
            if (o3)
              r3.bindTexture(r3.TEXTURE_2D, o3.colorAttachment.get()), t2.bindFramebuffer.set(o3.framebuffer);
            else {
              var n3 = r3.createTexture();
              r3.bindTexture(r3.TEXTURE_2D, n3), r3.texParameteri(r3.TEXTURE_2D, r3.TEXTURE_WRAP_S, r3.CLAMP_TO_EDGE), r3.texParameteri(r3.TEXTURE_2D, r3.TEXTURE_WRAP_T, r3.CLAMP_TO_EDGE), r3.texParameteri(r3.TEXTURE_2D, r3.TEXTURE_MIN_FILTER, r3.LINEAR), r3.texParameteri(r3.TEXTURE_2D, r3.TEXTURE_MAG_FILTER, r3.LINEAR), o3 = i3.heatmapFbo = t2.createFramebuffer(e3.width / 4, e3.height / 4, false), function(t3, e4, i4, r4) {
                var o4 = t3.gl;
                o4.texImage2D(o4.TEXTURE_2D, 0, o4.RGBA, e4.width / 4, e4.height / 4, 0, o4.RGBA, t3.extRenderToTextureHalfFloat ? t3.extTextureHalfFloat.HALF_FLOAT_OES : o4.UNSIGNED_BYTE, null), r4.colorAttachment.set(i4);
              }(t2, e3, n3, o3);
            }
          }(n2, e2, r2), n2.clear({ color: t.Color.transparent });
          for (var l2 = 0; l2 < o2.length; l2++) {
            var u2 = o2[l2];
            if (!i2.hasRenderableParent(u2)) {
              var h2 = i2.getTile(u2), p2 = h2.getBucket(r2);
              if (p2) {
                var f2 = p2.programConfigurations.get(r2.id);
                e2.useProgram("heatmap", f2).draw(n2, a2.TRIANGLES, Et.disabled, s2, c2, It.disabled, Ci(u2.posMatrix, h2, e2.transform.zoom, r2.paint.get("heatmap-intensity")), r2.id, p2.layoutVertexBuffer, p2.indexBuffer, p2.segments, r2.paint, e2.transform.zoom, f2);
              }
            }
          }
          n2.viewport.set([0, 0, e2.width, e2.height]);
        } else
          "translucent" === e2.renderPass && (e2.context.setColorMode(e2.colorModeForRenderPass()), function(e3, i3) {
            var r3 = e3.context, o3 = r3.gl, n3 = i3.heatmapFbo;
            if (n3) {
              r3.activeTexture.set(o3.TEXTURE0), o3.bindTexture(o3.TEXTURE_2D, n3.colorAttachment.get()), r3.activeTexture.set(o3.TEXTURE1);
              var a3 = i3.colorRampTexture;
              a3 || (a3 = i3.colorRampTexture = new t.Texture(r3, i3.colorRamp, o3.RGBA)), a3.bind(o3.LINEAR, o3.CLAMP_TO_EDGE), e3.useProgram("heatmapTexture").draw(r3, o3.TRIANGLES, Et.disabled, At.disabled, e3.colorModeForRenderPass(), It.disabled, function(e4, i4, r4, o4) {
                var n4 = t.create();
                t.ortho(n4, 0, e4.width, e4.height, 0, 0, 1);
                var a4 = e4.context.gl;
                return { u_matrix: n4, u_world: [a4.drawingBufferWidth, a4.drawingBufferHeight], u_image: 0, u_color_ramp: 1, u_opacity: i4.paint.get("heatmap-opacity"), u_featureZoom: e4.transform.zoom };
              }(e3, i3), i3.id, e3.viewportBuffer, e3.quadTriangleIndexBuffer, e3.viewportSegments, i3.paint, e3.transform.zoom);
            }
          }(e2, r2));
    }, line: rr, fill: function(e2, i2, r2, o2) {
      var n2 = r2.paint.get("fill-color"), a2 = r2.paint.get("fill-opacity");
      if (0 !== a2.constantOr(1)) {
        var s2 = e2.colorModeForRenderPass(), c2 = r2.paint.get("fill-pattern"), l2 = e2.opaquePassEnabledForLayer() && !c2.constantOr(1) && 1 === n2.constantOr(t.Color.transparent).a && 1 === a2.constantOr(0) && 0 == r2.paint.get("fill-minzoom").constantOr(1) && 24 == r2.paint.get("fill-maxzoom").constantOr(1) ? "opaque" : "translucent";
        if (e2.renderPass === l2) {
          var u2 = e2.depthModeForSublayer(1, "opaque" === e2.renderPass ? Et.ReadWrite : Et.ReadOnly);
          nr(e2, i2, r2, o2, u2, s2, false);
        }
        if ("translucent" === e2.renderPass && r2.paint.get("fill-antialias")) {
          var h2 = e2.depthModeForSublayer(r2.getPaintProperty("fill-outline-color") ? 2 : 0, Et.ReadOnly);
          nr(e2, i2, r2, o2, h2, s2, true);
        }
      }
    }, "fill-extrusion": function(t2, e2, i2, r2) {
      var o2 = i2.paint.get("fill-extrusion-opacity");
      if (0 !== o2 && "translucent" === t2.renderPass) {
        var n2 = new Et(t2.context.gl.LEQUAL, Et.ReadWrite, t2.depthRangeFor3D);
        if (1 !== o2 || i2.paint.get("fill-extrusion-pattern").constantOr(1))
          ar(t2, e2, i2, r2, n2, At.disabled, kt.disabled), ar(t2, e2, i2, r2, n2, t2.stencilModeFor3D(), t2.colorModeForRenderPass());
        else {
          var a2 = t2.colorModeForRenderPass();
          ar(t2, e2, i2, r2, n2, At.disabled, a2);
        }
      }
    }, hillshade: function(t2, e2, i2, r2) {
      if ("offscreen" === t2.renderPass || "translucent" === t2.renderPass) {
        for (var o2 = t2.context, n2 = e2.getSource().maxzoom, a2 = t2.depthModeForSublayer(0, Et.ReadOnly), s2 = t2.colorModeForRenderPass(), c2 = "translucent" === t2.renderPass ? t2.stencilConfigForOverlap(r2) : [{}, r2], l2 = c2[0], u2 = 0, h2 = c2[1]; u2 < h2.length; u2 += 1) {
          var p2 = h2[u2], f2 = e2.getTile(p2);
          f2.needsHillshadePrepare && "offscreen" === t2.renderPass ? cr(t2, f2, i2, n2, a2, At.disabled, s2) : "translucent" === t2.renderPass && sr(t2, f2, i2, a2, l2[p2.overscaledZ], s2);
        }
        o2.viewport.set([0, 0, t2.width, t2.height]);
      }
    }, raster: function(t2, e2, i2, r2) {
      if ("translucent" === t2.renderPass && 0 !== i2.paint.get("raster-opacity") && r2.length)
        for (var o2 = t2.context, n2 = o2.gl, a2 = e2.getSource(), s2 = t2.useProgram("raster"), c2 = t2.colorModeForRenderPass(), l2 = a2 instanceof C ? [{}, r2] : t2.stencilConfigForOverlap(r2), u2 = l2[0], h2 = l2[1], p2 = h2[h2.length - 1].overscaledZ, f2 = !t2.options.moving, d2 = 0, _3 = h2; d2 < _3.length; d2 += 1) {
          var m2 = _3[d2], g2 = t2.depthModeForSublayer(m2.overscaledZ - p2, 1 === i2.paint.get("raster-opacity") ? Et.ReadWrite : Et.ReadOnly, n2.LESS), v2 = e2.getTile(m2), y2 = t2.transform.calculatePosMatrix(m2.toUnwrapped(), f2);
          v2.registerFadeDuration(i2.paint.get("raster-fade-duration"));
          var b2 = e2.findLoadedParent(m2, 0), w2 = lr(v2, b2, e2, i2, t2.transform), x2 = void 0, T2 = void 0, S2 = "nearest" === i2.paint.get("raster-resampling") ? n2.NEAREST : n2.LINEAR;
          o2.activeTexture.set(n2.TEXTURE0), v2.texture.bind(S2, n2.CLAMP_TO_EDGE, n2.LINEAR_MIPMAP_NEAREST), o2.activeTexture.set(n2.TEXTURE1), b2 ? (b2.texture.bind(S2, n2.CLAMP_TO_EDGE, n2.LINEAR_MIPMAP_NEAREST), x2 = Math.pow(2, b2.tileID.overscaledZ - v2.tileID.overscaledZ), T2 = [v2.tileID.canonical.x * x2 % 1, v2.tileID.canonical.y * x2 % 1]) : v2.texture.bind(S2, n2.CLAMP_TO_EDGE, n2.LINEAR_MIPMAP_NEAREST);
          var E2 = Ni(y2, T2 || [0, 0], x2 || 1, w2, i2);
          a2 instanceof C ? s2.draw(o2, n2.TRIANGLES, g2, At.disabled, c2, It.disabled, E2, i2.id, a2.boundsBuffer, t2.quadTriangleIndexBuffer, a2.boundsSegments) : s2.draw(o2, n2.TRIANGLES, g2, u2[m2.overscaledZ], c2, It.disabled, E2, i2.id, t2.rasterBoundsBuffer, t2.quadTriangleIndexBuffer, t2.rasterBoundsSegments);
        }
    }, background: function(t2, e2, i2, r2) {
      var o2 = i2.paint.get("background-color"), n2 = i2.paint.get("background-opacity");
      if (0 !== n2) {
        var a2 = t2.context, s2 = a2.gl, c2 = t2.transform, l2 = c2.tileSize, u2 = i2.paint.get("background-pattern");
        if (!t2.isPatternMissing(u2)) {
          var h2 = !u2 && 1 === o2.a && 1 === n2 && t2.opaquePassEnabledForLayer() ? "opaque" : "translucent";
          if (t2.renderPass === h2) {
            var p2 = At.disabled, f2 = t2.depthModeForSublayer(0, "opaque" === h2 ? Et.ReadWrite : Et.ReadOnly), d2 = t2.colorModeForRenderPass(), _3 = t2.useProgram(u2 ? "backgroundPattern" : "background");
            if (!e2 || "Sg4326" != e2.getSource().reference || u2) {
              var m2 = r2 || c2.coveringTiles({ tileSize: l2 });
              u2 && (a2.activeTexture.set(s2.TEXTURE0), t2.imageManager.bind(t2.context));
              for (var g2 = i2.getCrossfadeParameters(), v2 = 0, y2 = m2; v2 < y2.length; v2 += 1) {
                var b2 = y2[v2], w2 = t2.transform.calculatePosMatrix(b2.toUnwrapped()), x2 = u2 ? Wi(w2, n2, t2, u2, { tileID: b2, tileSize: l2 }, g2) : Hi(w2, n2, o2);
                t2.beforeDrawMask(i2, b2), _3.draw(a2, s2.TRIANGLES, f2, p2, d2, It.disabled, x2, i2.id, t2.sgtileExtentBuffer, t2.quadTriangleIndexBuffer, t2.sgtileExtentSegments);
              }
            } else {
              var T2 = Hi(t2.clearMaxtrix, n2, o2);
              _3.draw(a2, s2.TRIANGLES, f2, p2, d2, It.disabled, T2, i2.id, t2.viewportBuffer, t2.quadTriangleIndexBuffer, t2.viewportSegments);
            }
          }
        }
      }
    }, debug: function(t2, e2, i2) {
      for (var r2 = 0; r2 < i2.length; r2++)
        vr(t2, e2, i2[r2]);
    }, custom: function(t2, e2, i2) {
      var r2 = t2.context, o2 = i2.implementation;
      if ("offscreen" === t2.renderPass) {
        var n2 = o2.prerender;
        n2 && (t2.setCustomLayerDefaults(), r2.setColorMode(t2.colorModeForRenderPass()), n2.call(o2, r2.gl, t2.transform.customLayerMatrix()), r2.setDirty(), t2.setBaseState());
      } else if ("translucent" === t2.renderPass) {
        t2.setCustomLayerDefaults(), r2.setColorMode(t2.colorModeForRenderPass()), r2.setStencilMode(At.disabled);
        var a2 = "3d" === o2.renderingMode ? new Et(t2.context.gl.LEQUAL, Et.ReadWrite, t2.depthRangeFor3D) : t2.depthModeForSublayer(0, Et.ReadOnly);
        r2.setDepthMode(a2), o2.render(r2.gl, t2.transform.customLayerMatrix()), r2.setDirty(), t2.setBaseState(), r2.bindFramebuffer.set(null);
      }
    }, esymbol: function(e2, i2, r2, o2) {
      if ("translucent" === e2.renderPass) {
        var n2 = r2.paint.get("esymbol-opacity"), a2 = r2.paint.get("esymbol-stroke-width"), s2 = r2.paint.get("esymbol-stroke-opacity"), c2 = void 0 !== r2.layout.get("esymbol-sort-key").constantOr(1);
        if (0 !== n2.constantOr(1) || 0 !== a2.constantOr(1) && 0 !== s2.constantOr(1)) {
          for (var l2 = e2.context, u2 = l2.gl, h2 = e2.depthModeForSublayer(0, Et.ReadOnly), p2 = e2.colorModeForRenderPass(), f2 = [], d2 = 0; d2 < o2.length; d2++) {
            var _3 = o2[d2], m2 = i2.getTile(_3), g2 = m2.getBucket(r2);
            if (g2) {
              var v2, b2 = g2.programConfigurations.get(r2.id), w2 = e2.useProgram("eleSymbol", b2), x2 = g2.layoutVertexBuffer, T2 = g2.indexBuffer, S2 = g2.colorVertexBuffer, E2 = y(m2, 1, e2.transform.zoom, "xy"), A2 = Xt(_3.posMatrix, true, true, e2.transform, E2), k2 = Kt(_3.posMatrix, true, true, e2.transform, E2), I2 = (e2.translatePosMatrix(_3.posMatrix, m2, [0, 0], "map"), A2), B2 = e2.translatePosMatrix(k2, m2, [0, 0], "map", true);
              v2 = Math.pow(2, e2.transform.zoom - 18);
              var P2 = { programConfiguration: b2, program: w2, layoutVertexBuffer: x2, indexBuffer: T2, colorVertexBuffer: S2, uniformValues: Xi(e2, _3, m2, r2, I2, B2, v2), coord: _3 };
              if (c2)
                for (var C2 = 0, z2 = g2.segments.get(); C2 < z2.length; C2 += 1) {
                  var D2 = z2[C2];
                  f2.push({ segments: new t.SegmentVector([D2]), sortKey: D2.sortKey, state: P2 });
                }
              else
                f2.push({ segments: g2.segments, sortKey: 0, state: P2 });
            }
          }
          c2 && f2.sort(function(t2, e3) {
            return t2.sortKey - e3.sortKey;
          });
          for (var M2 = 0, L2 = f2; M2 < L2.length; M2 += 1) {
            var R2 = L2[M2], O2 = R2.state, F2 = O2.programConfiguration, U2 = O2.program, N2 = O2.layoutVertexBuffer, j2 = O2.indexBuffer, V2 = O2.colorVertexBuffer, q2 = O2.uniformValues, Z2 = R2.segments;
            e2.beforeDrawMask(r2, O2.coord), U2.draw(l2, u2.TRIANGLES, h2, e2.eleSymbolstencilModel(r2), p2, It.disabled, q2, r2.id, N2, j2, Z2, r2.paint, e2.transform.zoom, F2, V2);
          }
        }
      }
    }, eline: rr }, xr = function(t2, e2) {
      this.context = new Bt(t2), this.transform = e2, this._tileTextures = {}, this.setup(), this.numSublayers = Pt.maxUnderzooming + Pt.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.crossTileSymbolIndex = new Me(), this.gpuTimers = {}, this.sg4326TileBoundds = {};
    };
    xr.prototype.resize = function(e2, i2) {
      if (this.width = e2 * t.browser.devicePixelRatio, this.height = i2 * t.browser.devicePixelRatio, this.context.viewport.set([0, 0, this.width, this.height]), this.style)
        for (var r2 = 0, o2 = this.style._order; r2 < o2.length; r2 += 1)
          this.style._layers[o2[r2]].resize();
    }, xr.prototype.DrawTileMask = function(t2) {
      var e2 = this.context, i2 = e2.gl, r2 = this._tileClippingMaskIDs[t2.key];
      this.useProgram("clippingMask").draw(e2, i2.TRIANGLES, Et.disabled, new At({ func: i2.ALWAYS, mask: 0 }, r2, 255, i2.KEEP, i2.KEEP, i2.REPLACE), kt.disabled, It.disabled, Pi(t2.posMatrix), "$clipping", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);
    }, xr.prototype.beforeDrawMask = function(e2, i2) {
      var r2 = this.context.gl, o2 = i2 && "Sg4326" == i2.reference;
      if (this.allowclipMask && e2 && "background" != e2.type && e2.layout && e2.layout.get("allow-clip"))
        if ("fill" != e2.type && "line" != e2.type && "eline" != e2.type) {
          var n2 = this.transform.customLayerMatrix();
          t.translate(n2, n2, [this.firstPoint.x, this.firstPoint.y, 0]), this.maskmatrix = n2, this.drawMask(n2, 255, r2.REPLACE, this.maskExtentBuffer, this.maskTriangleIndexBuffer, this.maskExtentSegments);
        } else {
          var a2 = i2.canonical;
          if (this.geoJSONTile = this._geoJSONIndex.getTile(a2.z, a2.x, a2.y), !this.geoJSONTile)
            return;
          var s2 = this.addMaskVertices(this.geoJSONTile.features);
          this.maskExtentBuffer1 = s2.maskExtentBuffer, this.maskTriangleIndexBuffer1 = s2.maskTriangleIndexBuffer, this.maskExtentSegments1 = s2.maskExtentSegments;
          var c2 = this._tileClippingMaskIDs[i2.key];
          o2 ? this.drawMask(i2.posMatrix, 255 - c2, r2.REPLACE, this.maskExtentBuffer1, this.maskTriangleIndexBuffer1, this.maskExtentSegments1) : (this.DrawTileMask(i2), this.drawMask(i2.posMatrix, c2, r2.INVERT, this.maskExtentBuffer1, this.maskTriangleIndexBuffer1, this.maskExtentSegments1));
        }
    }, xr.prototype.drawMask = function(t2, e2, i2, r2, o2, n2) {
      var a2 = this.context, s2 = a2.gl;
      this.useProgram("clippingMask").draw(a2, s2.TRIANGLES, Et.disabled, new At({ func: s2.ALWAYS, mask: 0 }, e2 || 255, 255, s2.KEEP, s2.KEEP, i2 || s2.REPLACE), kt.disabled, It.disabled, Pi(t2), "$clipping", r2, o2, n2);
    }, xr.prototype.removeMaskBuffer = function() {
      this.allowclipMask = false, this.maskExtentBuffer && (this.maskExtentBuffer.destroy(), this.maskTriangleIndexBuffer.destroy(), this.maskExtentSegments.destroy()), this.maskExtentBuffer1 && (this.maskExtentBuffer1.destroy(), this.maskTriangleIndexBuffer1.destroy(), this.maskExtentSegments1.destroy());
    }, xr.prototype.addMaskVertices = function(e2, i2) {
      var r2 = new t.StructArrayLayout2f8(), o2 = this.context, n2 = 0, a2 = [];
      if (0 == i2)
        for (var s2 = 0; s2 < e2.length; s2++) {
          for (var c2 = e2[s2].geometry.coordinates[0], l2 = [], u2 = 0; u2 < c2.length - 1; u2++) {
            var h2 = this.transform.locationCoordinate(c2[u2]);
            0 == s2 && 0 == u2 && (this.firstPoint = h2), r2.emplaceBack(h2.x - this.firstPoint.x, h2.y - this.firstPoint.y), l2.push(h2.x), l2.push(h2.y);
          }
          var p2 = t.earcut(l2).map(function(t2) {
            return t2 + n2;
          });
          a2 = a2.concat(p2), n2 += c2.length;
        }
      else
        for (var f2 = 0; f2 < e2.length; f2++)
          for (var d2 = e2[f2].geometry, _3 = [], m2 = 0; m2 < d2.length; m2++) {
            for (var g2 = d2[m2], v2 = 0; v2 < g2.length - 1; v2++) {
              var y2 = g2[v2][0], b2 = g2[v2][1];
              r2.emplaceBack(y2, b2), _3.push(y2), _3.push(b2);
            }
            var w2 = t.earcut(_3).map(function(t2) {
              return t2 + n2;
            });
            a2 = a2.concat(w2), n2 += g2.length;
          }
      for (var x2 = t.createLayout([{ name: "a_pos", type: "Float32", components: 2 }]), T2 = o2.createVertexBuffer(r2, x2.members), S2 = new t.StructArrayLayout3ui6(), E2 = 0; E2 < a2.length; E2 += 3)
        S2.emplaceBack(a2[E2], a2[E2 + 1], a2[E2 + 2]);
      return { maskExtentBuffer: T2, maskTriangleIndexBuffer: o2.createIndexBuffer(S2), maskExtentSegments: t.SegmentVector.simpleSegment(0, 0, n2, a2.length / 3) };
    }, xr.prototype.addMaskBuffer = function(e2) {
      this.allowclipMask = true;
      var i2 = this.style.getSource(e2), r2 = i2.serialize().data;
      this._geoJSONIndex = t.geojsonvt(r2, i2.workerOptions.geojsonVtOptions);
      var o2 = this.addMaskVertices(r2.features, 0);
      this.maskExtentBuffer = o2.maskExtentBuffer, this.maskTriangleIndexBuffer = o2.maskTriangleIndexBuffer, this.maskExtentSegments = o2.maskExtentSegments;
    }, xr.prototype.setup = function() {
      var e2 = this.context, i2 = new t.StructArrayLayout2i4();
      i2.emplaceBack(0, 0), i2.emplaceBack(t.EXTENT, 0), i2.emplaceBack(0, t.EXTENT), i2.emplaceBack(t.EXTENT, t.EXTENT), this.tileExtentBuffer = e2.createVertexBuffer(i2, Ne.members), this.tileExtentSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
      var r2 = new t.StructArrayLayout2i4();
      r2.emplaceBack(0, 0), r2.emplaceBack(t.EXTENT, 0), r2.emplaceBack(0, t.EXTENT), r2.emplaceBack(t.EXTENT, t.EXTENT), this.sgtileExtentBuffer = e2.createVertexBuffer(r2, Ne.members), this.sgtileExtentSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
      var o2 = new t.StructArrayLayout4i8();
      o2.emplaceBack(0, 0, 0, 0), o2.emplaceBack(t.EXTENT, 0, 1, 0), o2.emplaceBack(0, t.EXTENT, 0, 1), o2.emplaceBack(t.EXTENT, t.EXTENT, 1, 1), this.debugBuffer = e2.createVertexBuffer(o2, br.members), this.debugSegments = t.SegmentVector.simpleSegment(0, 0, 4, 5);
      var n2 = new t.StructArrayLayout4i8();
      n2.emplaceBack(0, 0, 0, 0), n2.emplaceBack(t.EXTENT, 0, t.EXTENT, 0), n2.emplaceBack(0, t.EXTENT, 0, t.EXTENT), n2.emplaceBack(t.EXTENT, t.EXTENT, t.EXTENT, t.EXTENT), this.rasterBoundsBuffer = e2.createVertexBuffer(n2, P.members), this.rasterBoundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
      var a2 = new t.StructArrayLayout2i4();
      a2.emplaceBack(0, 0), a2.emplaceBack(1, 0), a2.emplaceBack(0, 1), a2.emplaceBack(1, 1), this.viewportBuffer = e2.createVertexBuffer(a2, Ne.members), this.viewportSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
      var s2 = new t.StructArrayLayout1ui2();
      s2.emplaceBack(0), s2.emplaceBack(1), s2.emplaceBack(3), s2.emplaceBack(2), s2.emplaceBack(0), this.tileBorderIndexBuffer = e2.createIndexBuffer(s2);
      var c2 = new t.StructArrayLayout3ui6();
      c2.emplaceBack(0, 1, 2), c2.emplaceBack(2, 1, 3), this.quadTriangleIndexBuffer = e2.createIndexBuffer(c2), this.emptyTexture = new t.Texture(e2, { width: 1, height: 1, data: new Uint8Array([0, 0, 0, 0]) }, e2.gl.RGBA);
      var l2 = this.context.gl;
      this.stencilClearMode = new At({ func: l2.ALWAYS, mask: 0 }, 0, 255, l2.ZERO, l2.ZERO, l2.ZERO);
    }, xr.prototype.clearStencil = function() {
      var e2, i2 = this.context, r2 = i2.gl;
      this.nextStencilID = 1, this.currentStencilSource = void 0, this.clearMaxtrix ? e2 = this.clearMaxtrix : (e2 = t.create(), t.ortho(e2, 0, this.width, this.height, 0, 0, 1), t.scale(e2, e2, [r2.drawingBufferWidth, r2.drawingBufferHeight, 0]), this.clearMaxtrix = e2), this.useProgram("clippingMask").draw(i2, r2.TRIANGLES, Et.disabled, this.stencilClearMode, kt.disabled, It.disabled, Pi(e2), "$clipping", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments);
    }, xr.prototype._renderTileClippingMasks = function(t2, e2, i2) {
      if (e2 && this.currentStencilSource !== e2.id && t2.isTileClipped() && i2 && i2.length) {
        this.currentStencilSource = e2.id;
        var r2 = this.context, o2 = r2.gl;
        this.nextStencilID + i2.length > 256 && this.clearStencil(), r2.setColorMode(kt.disabled), r2.setDepthMode(Et.disabled);
        var n2 = this.useProgram("clippingMask");
        this._tileClippingMaskIDs = {};
        for (var a2 = 0, s2 = i2; a2 < s2.length; a2 += 1) {
          var c2 = s2[a2];
          if ("Sg4326" != c2.reference) {
            var l2 = this._tileClippingMaskIDs[c2.key] = this.nextStencilID++;
            n2.draw(r2, o2.TRIANGLES, Et.disabled, new At({ func: o2.ALWAYS, mask: 0 }, l2, 255, o2.KEEP, o2.KEEP, o2.REPLACE), kt.disabled, It.disabled, Pi(c2.posMatrix), "$clipping", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);
          }
        }
      }
    }, xr.prototype.stencilModeFor3D = function() {
      this.currentStencilSource = void 0, this.nextStencilID + 1 > 256 && this.clearStencil();
      var t2 = this.nextStencilID++, e2 = this.context.gl;
      return new At({ func: e2.NOTEQUAL, mask: 255 }, t2, 255, e2.KEEP, e2.KEEP, e2.REPLACE);
    }, xr.prototype.eleSymbolstencilModel = function(t2) {
      var e2 = this.context.gl;
      return this.allowclipMask && t2 && t2.layout.get("allow-clip") ? new At({ func: e2.EQUAL, mask: 255 }, 255, 0, e2.KEEP, e2.KEEP, e2.REPLACE) : At.disabled;
    }, xr.prototype.stencilModeForClipping = function(t2, e2) {
      var i2 = this.context.gl;
      return this.allowclipMask && e2 && e2.layout.get("allow-clip") ? new At({ func: i2.EQUAL, mask: 255 }, 255 - this._tileClippingMaskIDs[t2.key], 0, i2.KEEP, i2.KEEP, i2.REPLACE) : "Sg4326" == t2.reference ? At.disabled : new At({ func: i2.EQUAL, mask: 255 }, this._tileClippingMaskIDs[t2.key], 0, i2.KEEP, i2.KEEP, i2.REPLACE);
    }, xr.prototype.stencilConfigForOverlap = function(t2) {
      var e2, i2 = this.context.gl, r2 = t2.sort(function(t3, e3) {
        return e3.overscaledZ - t3.overscaledZ;
      }), o2 = r2[r2.length - 1].overscaledZ, n2 = r2[0].overscaledZ - o2 + 1;
      if (n2 > 1) {
        this.currentStencilSource = void 0, this.nextStencilID + n2 > 256 && this.clearStencil();
        for (var a2 = {}, s2 = 0; s2 < n2; s2++)
          a2[s2 + o2] = new At({ func: i2.GEQUAL, mask: 255 }, s2 + this.nextStencilID, 255, i2.KEEP, i2.KEEP, i2.REPLACE);
        return this.nextStencilID += n2, [a2, r2];
      }
      return [(e2 = {}, e2[o2] = At.disabled, e2), r2];
    }, xr.prototype.colorModeForRenderPass = function() {
      var e2 = this.context.gl;
      return this._showOverdrawInspector ? new kt([e2.CONSTANT_COLOR, e2.ONE], new t.Color(1 / 8, 1 / 8, 1 / 8, 0), [true, true, true, true]) : "opaque" === this.renderPass ? kt.unblended : kt.alphaBlended;
    }, xr.prototype.depthModeForSublayer = function(t2, e2, i2) {
      if (!this.opaquePassEnabledForLayer())
        return Et.disabled;
      var r2 = 1 - ((1 + this.currentLayer) * this.numSublayers + t2) * this.depthEpsilon;
      return new Et(i2 || this.context.gl.LEQUAL, e2, [r2, r2]);
    }, xr.prototype.opaquePassEnabledForLayer = function() {
      return this.currentLayer < this.opaquePassCutoff;
    }, xr.prototype.render = function(e2, i2) {
      var r2 = this;
      this.style = e2, this.options = i2, this.lineAtlas = e2.lineAtlas, this.imageManager = e2.imageManager, this.glyphManager = e2.glyphManager, this.symbolFadeChange = e2.placement.symbolFadeChange(t.browser.now()), this.imageManager.beginFrame();
      var o2 = this.style._order, n2 = this.style._sourceCaches;
      for (var a2 in n2) {
        var s2 = n2[a2];
        s2.used && s2.prepare(this.context);
      }
      var c2 = {}, l2 = {}, u2 = {};
      for (var h2 in n2) {
        var p2 = n2[h2];
        c2[h2] = p2.getVisibleCoordinates(), l2[h2] = c2[h2].slice().reverse(), u2[h2] = p2.getVisibleCoordinates(true).reverse();
      }
      this.opaquePassCutoff = 1 / 0;
      for (var f2 = 0; f2 < o2.length; f2++)
        if (this.style._layers[o2[f2]].is3D()) {
          this.opaquePassCutoff = f2;
          break;
        }
      this.renderPass = "offscreen";
      for (var d2 = 0, _3 = o2; d2 < _3.length; d2 += 1) {
        var m2 = this.style._layers[_3[d2]];
        if (m2.hasOffscreenPass() && !m2.isHidden(this.transform.zoom)) {
          var g2 = e2._getLayerSourceCache(m2), v2 = g2 ? l2[g2.id] : void 0;
          ("custom" === m2.type || v2.length) && this.renderLayer(this, g2, m2, v2);
        }
      }
      for (this.context.bindFramebuffer.set(null), this.context.clear({ color: i2.showOverdrawInspector ? t.Color.black : t.Color.transparent, depth: 1 }), this.clearStencil(), this._showOverdrawInspector = i2.showOverdrawInspector, this.depthRangeFor3D = [0, 1 - (e2._order.length + 2) * this.numSublayers * this.depthEpsilon], this.renderPass = "opaque", this.currentLayer = o2.length - 1; this.currentLayer >= 0; this.currentLayer--) {
        var y2 = this.style._layers[o2[this.currentLayer]];
        if (!y2.isHidden(this.transform.zoom)) {
          var b2 = e2._getLayerSourceCache(y2), w2 = b2 ? l2[b2.id] : void 0;
          this._renderTileClippingMasks(y2, b2, w2), this.renderLayer(this, b2, y2, w2);
        }
      }
      for (this.renderPass = "translucent", this.currentLayer = 0; this.currentLayer < o2.length; this.currentLayer++) {
        var x2 = this.style._layers[o2[this.currentLayer]];
        if (!x2.isHidden(this.transform.zoom)) {
          var T2 = e2._getLayerSourceCache(x2), S2 = T2 ? ("symbol" === x2.type ? u2 : l2)[T2.id] : void 0;
          this._renderTileClippingMasks(x2, T2, T2 ? c2[T2.id] : void 0), this.renderLayer(this, T2, x2, S2);
        }
      }
      if (this.options.showTileBoundaries) {
        var E2 = null;
        t.values(this.style._layers).forEach(function(t2) {
          var i3 = e2._getLayerSourceCache(t2);
          i3 && !t2.isHidden(r2.transform.zoom) && (!E2 || E2.getSource().maxzoom < i3.getSource().maxzoom) && (E2 = i3);
        }), E2 && wr.debug(this, E2, E2.getVisibleCoordinates());
      }
      this.options.showPadding && function(t2) {
        var e3 = t2.transform.padding;
        _r(t2, t2.transform.height - (e3.top || 0), 3, ur), _r(t2, e3.bottom || 0, 3, hr), mr(t2, e3.left || 0, 3, pr), mr(t2, t2.transform.width - (e3.right || 0), 3, fr);
        var i3 = t2.transform.centerPoint;
        !function(t3, e4, i4, r3) {
          gr(t3, e4 - 1, i4 - 10, 2, 20, r3), gr(t3, e4 - 10, i4 - 1, 20, 2, r3);
        }(t2, i3.x, t2.transform.height - i3.y, dr);
      }(this);
      var A2 = { context: this.context, devicePixelRatio: t.browser.devicePixelRatio, width: this.width, height: this.height, logoSize: i2.logoSize || "" };
      this.LogoLayer || (this.LogoLayer = t.createStyleLayer(new yr(A2)), this.LogoLayer.onAdd({ painter: { context: this.context } })), this.LogoLayer.implementation.updateSize(A2), this.renderLayer(this, "", this.LogoLayer), this.context.setDefault();
    }, xr.prototype.renderLayer = function(t2, e2, i2, r2) {
      i2.isHidden(this.transform.zoom) || ("background" === i2.type || "custom" === i2.type || r2.length) && (this.id = i2.id, this.gpuTimingStart(i2), wr[i2.type](t2, e2, i2, r2, this.style.placement.variableOffsets), this.gpuTimingEnd());
    }, xr.prototype.gpuTimingStart = function(t2) {
      if (this.options.gpuTiming) {
        var e2 = this.context.extTimerQuery, i2 = this.gpuTimers[t2.id];
        i2 || (i2 = this.gpuTimers[t2.id] = { calls: 0, cpuTime: 0, query: e2.createQueryEXT() }), i2.calls++, e2.beginQueryEXT(e2.TIME_ELAPSED_EXT, i2.query);
      }
    }, xr.prototype.gpuTimingEnd = function() {
      if (this.options.gpuTiming) {
        var t2 = this.context.extTimerQuery;
        t2.endQueryEXT(t2.TIME_ELAPSED_EXT);
      }
    }, xr.prototype.collectGpuTimers = function() {
      var t2 = this.gpuTimers;
      return this.gpuTimers = {}, t2;
    }, xr.prototype.queryGpuTimers = function(t2) {
      var e2 = {};
      for (var i2 in t2) {
        var r2 = t2[i2], o2 = this.context.extTimerQuery, n2 = o2.getQueryObjectEXT(r2.query, o2.QUERY_RESULT_EXT) / 1e6;
        o2.deleteQueryEXT(r2.query), e2[i2] = n2;
      }
      return e2;
    }, xr.prototype.translatePosMatrix = function(e2, i2, r2, o2, n2) {
      if (!r2[0] && !r2[1])
        return e2;
      var a2 = n2 ? "map" === o2 ? this.transform.angle : 0 : "viewport" === o2 ? -this.transform.angle : 0;
      if (a2) {
        var s2 = Math.sin(a2), c2 = Math.cos(a2);
        r2 = [r2[0] * c2 - r2[1] * s2, r2[0] * s2 + r2[1] * c2];
      }
      var l2 = [n2 ? r2[0] : y(i2, r2[0], this.transform.zoom), n2 ? r2[1] : y(i2, r2[1], this.transform.zoom, "xy")[1], 0], u2 = new Float32Array(16);
      return t.translate(u2, e2, l2), u2;
    }, xr.prototype.saveTileTexture = function(t2) {
      var e2 = this._tileTextures[t2.size[0]];
      e2 ? e2.push(t2) : this._tileTextures[t2.size[0]] = [t2];
    }, xr.prototype.getTileTexture = function(t2) {
      var e2 = this._tileTextures[t2];
      return e2 && e2.length > 0 ? e2.pop() : null;
    }, xr.prototype.isPatternMissing = function(t2) {
      if (!t2)
        return false;
      if (!t2.from || !t2.to)
        return true;
      var e2 = this.imageManager.getPattern(t2.from.toString()), i2 = this.imageManager.getPattern(t2.to.toString());
      return !e2 || !i2;
    }, xr.prototype.useProgram = function(t2, e2) {
      this.cache = this.cache || {};
      var i2 = "" + t2 + (e2 ? e2.cacheKey : "") + (this._showOverdrawInspector ? "/overdraw" : "");
      return this.cache[i2] || (this.cache[i2] = new vi(this.context, mi[t2], e2, Ki[t2], this._showOverdrawInspector)), this.cache[i2];
    }, xr.prototype.setCustomLayerDefaults = function() {
      this.context.unbindVAO(), this.context.cullFace.setDefault(), this.context.activeTexture.setDefault(), this.context.pixelStoreUnpack.setDefault(), this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.context.pixelStoreUnpackFlipY.setDefault();
    }, xr.prototype.setBaseState = function() {
      var t2 = this.context.gl;
      this.context.cullFace.set(false), this.context.viewport.set([0, 0, this.width, this.height]), this.context.blendEquation.set(t2.FUNC_ADD);
    }, xr.prototype.initDebugOverlayCanvas = function() {
      null == this.debugOverlayCanvas && (this.debugOverlayCanvas = t.window.document.createElement("canvas"), this.debugOverlayCanvas.width = 512, this.debugOverlayCanvas.height = 512, this.debugOverlayTexture = new t.Texture(this.context, this.debugOverlayCanvas, this.context.gl.RGBA));
    }, xr.prototype.destroy = function() {
      this.emptyTexture.destroy(), this.debugOverlayTexture && this.debugOverlayTexture.destroy();
    }, xr.prototype.setTileLoadedFlag = function(t2) {
      this.tileLoaded = t2;
    };
    var Tr = function(e2) {
      var i2, r2, o2, n2;
      this._hashName = e2 && encodeURIComponent(e2), t.bindAll(["_getCurrentHash", "_onHashChange", "_updateHash"], this), this._updateHash = (i2 = this._updateHashUnthrottled.bind(this), r2 = false, o2 = null, n2 = function() {
        o2 = null, r2 && (i2(), o2 = setTimeout(n2, 300), r2 = false);
      }, function() {
        return r2 = true, o2 || n2(), o2;
      });
    };
    Tr.prototype.addTo = function(e2) {
      return this._map = e2, t.window.addEventListener("hashchange", this._onHashChange, false), this._map.on("moveend", this._updateHash), this;
    }, Tr.prototype.remove = function() {
      return t.window.removeEventListener("hashchange", this._onHashChange, false), this._map.off("moveend", this._updateHash), clearTimeout(this._updateHash()), delete this._map, this;
    }, Tr.prototype.getHashString = function(e2) {
      var i2 = this._map.getCenter(), r2 = Math.round(100 * this._map.getZoom()) / 100, o2 = Math.ceil((r2 * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10), n2 = Math.pow(10, o2), a2 = Math.round(i2.lng * n2) / n2, s2 = Math.round(i2.lat * n2) / n2, c2 = this._map.getBearing(), l2 = this._map.getPitch(), u2 = "";
      if (u2 += e2 ? "/" + a2 + "/" + s2 + "/" + r2 : r2 + "/" + s2 + "/" + a2, (c2 || l2) && (u2 += "/" + Math.round(10 * c2) / 10), l2 && (u2 += "/" + Math.round(l2)), this._hashName) {
        var h2 = this._hashName, p2 = false, f2 = t.window.location.hash.slice(1).split("&").map(function(t2) {
          var e3 = t2.split("=")[0];
          return e3 === h2 ? (p2 = true, e3 + "=" + u2) : t2;
        }).filter(function(t2) {
          return t2;
        });
        return p2 || f2.push(h2 + "=" + u2), "#" + f2.join("&");
      }
      return "#" + u2;
    }, Tr.prototype._getCurrentHash = function() {
      var e2, i2 = this, r2 = t.window.location.hash.replace("#", "");
      return this._hashName ? (r2.split("&").map(function(t2) {
        return t2.split("=");
      }).forEach(function(t2) {
        t2[0] === i2._hashName && (e2 = t2);
      }), (e2 && e2[1] || "").split("/")) : r2.split("/");
    }, Tr.prototype._onHashChange = function() {
      var t2 = this._getCurrentHash();
      if (t2.length >= 3 && !t2.some(function(t3) {
        return isNaN(t3);
      })) {
        var e2 = this._map.dragRotate.isEnabled() && this._map.touchZoomRotate.isEnabled() ? +(t2[3] || 0) : this._map.getBearing();
        return this._map.jumpTo({ center: [+t2[2], +t2[1]], zoom: +t2[0], bearing: e2, pitch: +(t2[4] || 0) }), true;
      }
      return false;
    }, Tr.prototype._updateHashUnthrottled = function() {
      var e2 = this.getHashString();
      try {
        t.window.history.replaceState(t.window.history.state, "", e2);
      } catch (t2) {
      }
    };
    var Sr = { linearity: 0.3, easing: t.bezier(0, 0, 0.3, 1) }, Er = t.extend({ deceleration: 2500, maxSpeed: 1400 }, Sr), Ar = t.extend({ deceleration: 20, maxSpeed: 1400 }, Sr), kr = t.extend({ deceleration: 1e3, maxSpeed: 360 }, Sr), Ir = t.extend({ deceleration: 1e3, maxSpeed: 90 }, Sr), Br = function(t2) {
      this._map = t2, this.clear();
    };
    function Pr(t2, e2) {
      (!t2.duration || t2.duration < e2.duration) && (t2.duration = e2.duration, t2.easing = e2.easing);
    }
    function Cr(e2, i2, r2) {
      var o2 = r2.maxSpeed, n2 = r2.linearity, a2 = r2.deceleration, s2 = t.clamp(e2 * n2 / (i2 / 1e3), -o2, o2), c2 = Math.abs(s2) / (a2 * n2);
      return { easing: r2.easing, duration: 1e3 * c2, amount: s2 * (c2 / 2) };
    }
    Br.prototype.clear = function() {
      this._inertiaBuffer = [];
    }, Br.prototype.record = function(e2) {
      this._drainInertiaBuffer(), this._inertiaBuffer.push({ time: t.browser.now(), settings: e2 });
    }, Br.prototype._drainInertiaBuffer = function() {
      for (var e2 = this._inertiaBuffer, i2 = t.browser.now(); e2.length > 0 && i2 - e2[0].time > 160; )
        e2.shift();
    }, Br.prototype._onMoveEnd = function(e2) {
      if (this._drainInertiaBuffer(), !(this._inertiaBuffer.length < 2)) {
        for (var i2 = { zoom: 0, bearing: 0, pitch: 0, pan: new t.Point(0, 0), pinchAround: void 0, around: void 0 }, r2 = 0, o2 = this._inertiaBuffer; r2 < o2.length; r2 += 1) {
          var n2 = o2[r2].settings;
          i2.zoom += n2.zoomDelta || 0, i2.bearing += n2.bearingDelta || 0, i2.pitch += n2.pitchDelta || 0, n2.panDelta && i2.pan._add(n2.panDelta), n2.around && (i2.around = n2.around), n2.pinchAround && (i2.pinchAround = n2.pinchAround);
        }
        var a2 = this._inertiaBuffer[this._inertiaBuffer.length - 1].time - this._inertiaBuffer[0].time, s2 = {};
        if (i2.pan.mag()) {
          var c2 = Cr(i2.pan.mag(), a2, t.extend({}, Er, e2 || {}));
          s2.offset = i2.pan.mult(c2.amount / i2.pan.mag()), s2.center = this._map.transform.center, Pr(s2, c2);
        }
        if (i2.zoom) {
          var l2 = Cr(i2.zoom, a2, Ar);
          s2.zoom = this._map.transform.zoom + l2.amount, Pr(s2, l2);
        }
        if (i2.bearing) {
          var u2 = Cr(i2.bearing, a2, kr);
          s2.bearing = this._map.transform.bearing + t.clamp(u2.amount, -179, 179), Pr(s2, u2);
        }
        if (i2.pitch) {
          var h2 = Cr(i2.pitch, a2, Ir);
          s2.pitch = this._map.transform.pitch + h2.amount, Pr(s2, h2);
        }
        if (s2.zoom || s2.bearing) {
          var p2 = void 0 === i2.pinchAround ? i2.around : i2.pinchAround;
          s2.around = p2 ? this._map.unproject(p2) : this._map.getCenter();
        }
        return this.clear(), t.extend(s2, { noMoveStart: true });
      }
    };
    var zr = function(e2) {
      function i2(i3, o3, n2, a2) {
        void 0 === a2 && (a2 = {});
        var s2 = r.mousePos(o3.getCanvasContainer(), n2), c2 = o3.unproject(s2);
        e2.call(this, i3, t.extend({ point: s2, lngLat: c2, originalEvent: n2 }, a2)), this._defaultPrevented = false, this.target = o3;
      }
      e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2;
      var o2 = { defaultPrevented: { configurable: true } };
      return i2.prototype.preventDefault = function() {
        this._defaultPrevented = true;
      }, o2.defaultPrevented.get = function() {
        return this._defaultPrevented;
      }, Object.defineProperties(i2.prototype, o2), i2;
    }(t.Event), Dr = function(e2) {
      function i2(i3, o3, n2) {
        var a2 = "touchend" === i3 ? n2.changedTouches : n2.touches, s2 = r.touchPos(o3.getCanvasContainer(), a2), c2 = s2.map(function(t2) {
          return o3.unproject(t2);
        }), l2 = s2.reduce(function(t2, e3, i4, r2) {
          return t2.add(e3.div(r2.length));
        }, new t.Point(0, 0)), u2 = o3.unproject(l2);
        e2.call(this, i3, { points: s2, point: l2, lngLats: c2, lngLat: u2, originalEvent: n2 }), this._defaultPrevented = false;
      }
      e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2;
      var o2 = { defaultPrevented: { configurable: true } };
      return i2.prototype.preventDefault = function() {
        this._defaultPrevented = true;
      }, o2.defaultPrevented.get = function() {
        return this._defaultPrevented;
      }, Object.defineProperties(i2.prototype, o2), i2;
    }(t.Event), Mr = function(t2) {
      function e2(e3, i3, r2) {
        t2.call(this, e3, { originalEvent: r2 }), this._defaultPrevented = false;
      }
      t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2;
      var i2 = { defaultPrevented: { configurable: true } };
      return e2.prototype.preventDefault = function() {
        this._defaultPrevented = true;
      }, i2.defaultPrevented.get = function() {
        return this._defaultPrevented;
      }, Object.defineProperties(e2.prototype, i2), e2;
    }(t.Event), Lr = function(t2, e2) {
      this._map = t2, this._clickTolerance = e2.clickTolerance;
    };
    Lr.prototype.reset = function() {
      delete this._mousedownPos;
    }, Lr.prototype.wheel = function(t2) {
      return this._firePreventable(new Mr(t2.type, this._map, t2));
    }, Lr.prototype.mousedown = function(t2, e2) {
      return this._mousedownPos = e2, this._firePreventable(new zr(t2.type, this._map, t2));
    }, Lr.prototype.mouseup = function(t2) {
      this._map.fire(new zr(t2.type, this._map, t2));
    }, Lr.prototype.click = function(t2, e2) {
      this._mousedownPos && this._mousedownPos.dist(e2) >= this._clickTolerance || this._map.fire(new zr(t2.type, this._map, t2));
    }, Lr.prototype.dblclick = function(t2) {
      return this._firePreventable(new zr(t2.type, this._map, t2));
    }, Lr.prototype.mouseover = function(t2) {
      this._map.fire(new zr(t2.type, this._map, t2));
    }, Lr.prototype.mouseout = function(t2) {
      this._map.fire(new zr(t2.type, this._map, t2));
    }, Lr.prototype.touchstart = function(t2) {
      return this._firePreventable(new Dr(t2.type, this._map, t2));
    }, Lr.prototype.touchmove = function(t2) {
      this._map.fire(new Dr(t2.type, this._map, t2));
    }, Lr.prototype.touchend = function(t2) {
      this._map.fire(new Dr(t2.type, this._map, t2));
    }, Lr.prototype.touchcancel = function(t2) {
      this._map.fire(new Dr(t2.type, this._map, t2));
    }, Lr.prototype._firePreventable = function(t2) {
      if (this._map.fire(t2), t2.defaultPrevented)
        return {};
    }, Lr.prototype.isEnabled = function() {
      return true;
    }, Lr.prototype.isActive = function() {
      return false;
    }, Lr.prototype.enable = function() {
    }, Lr.prototype.disable = function() {
    };
    var Rr = function(t2) {
      this._map = t2;
    };
    Rr.prototype.reset = function() {
      this._delayContextMenu = false, delete this._contextMenuEvent;
    }, Rr.prototype.mousemove = function(t2) {
      this._map.fire(new zr(t2.type, this._map, t2));
    }, Rr.prototype.mousedown = function() {
      this._delayContextMenu = true;
    }, Rr.prototype.mouseup = function() {
      this._delayContextMenu = false, this._contextMenuEvent && (this._map.fire(new zr("contextmenu", this._map, this._contextMenuEvent)), delete this._contextMenuEvent);
    }, Rr.prototype.contextmenu = function(t2) {
      this._delayContextMenu ? this._contextMenuEvent = t2 : this._map.fire(new zr(t2.type, this._map, t2)), this._map.listens("contextmenu") && t2.preventDefault();
    }, Rr.prototype.isEnabled = function() {
      return true;
    }, Rr.prototype.isActive = function() {
      return false;
    }, Rr.prototype.enable = function() {
    }, Rr.prototype.disable = function() {
    };
    var Or = function(t2, e2) {
      this._map = t2, this._el = t2.getCanvasContainer(), this._container = t2.getContainer(), this._clickTolerance = e2.clickTolerance || 1;
    };
    function Fr(t2, e2) {
      for (var i2 = {}, r2 = 0; r2 < t2.length; r2++)
        i2[t2[r2].identifier] = e2[r2];
      return i2;
    }
    Or.prototype.isEnabled = function() {
      return !!this._enabled;
    }, Or.prototype.isActive = function() {
      return !!this._active;
    }, Or.prototype.enable = function() {
      this.isEnabled() || (this._enabled = true);
    }, Or.prototype.disable = function() {
      this.isEnabled() && (this._enabled = false);
    }, Or.prototype.mousedown = function(t2, e2) {
      this.isEnabled() && t2.shiftKey && 0 === t2.button && (r.disableDrag(), this._startPos = this._lastPos = e2, this._active = true);
    }, Or.prototype.mousemoveWindow = function(t2, e2) {
      if (this._active) {
        var i2 = e2;
        if (!(this._lastPos.equals(i2) || !this._box && i2.dist(this._startPos) < this._clickTolerance)) {
          var o2 = this._startPos;
          this._lastPos = i2, this._box || (this._box = r.create("div", "sgmap-boxzoom", this._container), this._container.classList.add("sgmap-crosshair"), this._fireEvent("boxzoomstart", t2));
          var n2 = Math.min(o2.x, i2.x), a2 = Math.max(o2.x, i2.x), s2 = Math.min(o2.y, i2.y), c2 = Math.max(o2.y, i2.y);
          r.setTransform(this._box, "translate(" + n2 + "px," + s2 + "px)"), this._box.style.width = a2 - n2 + "px", this._box.style.height = c2 - s2 + "px";
        }
      }
    }, Or.prototype.mouseupWindow = function(e2, i2) {
      var o2 = this;
      if (this._active && 0 === e2.button) {
        var n2 = this._startPos, a2 = i2;
        if (this.reset(), r.suppressClick(), n2.x !== a2.x || n2.y !== a2.y)
          return this._map.fire(new t.Event("boxzoomend", { originalEvent: e2 })), { cameraAnimation: function(t2) {
            return t2.fitScreenCoordinates(n2, a2, o2._map.getBearing(), { linear: true });
          } };
        this._fireEvent("boxzoomcancel", e2);
      }
    }, Or.prototype.keydown = function(t2) {
      this._active && 27 === t2.keyCode && (this.reset(), this._fireEvent("boxzoomcancel", t2));
    }, Or.prototype.reset = function() {
      this._active = false, this._container.classList.remove("sgmap-crosshair"), this._box && (r.remove(this._box), this._box = null), r.enableDrag(), delete this._startPos, delete this._lastPos;
    }, Or.prototype._fireEvent = function(e2, i2) {
      return this._map.fire(new t.Event(e2, { originalEvent: i2 }));
    };
    var Ur = function(t2) {
      this.reset(), this.numTouches = t2.numTouches;
    };
    Ur.prototype.reset = function() {
      delete this.centroid, delete this.startTime, delete this.touches, this.aborted = false;
    }, Ur.prototype.touchstart = function(e2, i2, r2) {
      (this.centroid || r2.length > this.numTouches) && (this.aborted = true), this.aborted || (void 0 === this.startTime && (this.startTime = e2.timeStamp), r2.length === this.numTouches && (this.centroid = function(e3) {
        for (var i3 = new t.Point(0, 0), r3 = 0, o2 = e3; r3 < o2.length; r3 += 1)
          i3._add(o2[r3]);
        return i3.div(e3.length);
      }(i2), this.touches = Fr(r2, i2)));
    }, Ur.prototype.touchmove = function(t2, e2, i2) {
      if (!this.aborted && this.centroid) {
        var r2 = Fr(i2, e2);
        for (var o2 in this.touches) {
          var n2 = r2[o2];
          (!n2 || n2.dist(this.touches[o2]) > 30) && (this.aborted = true);
        }
      }
    }, Ur.prototype.touchend = function(t2, e2, i2) {
      if ((!this.centroid || t2.timeStamp - this.startTime > 500) && (this.aborted = true), 0 === i2.length) {
        var r2 = !this.aborted && this.centroid;
        if (this.reset(), r2)
          return r2;
      }
    };
    var Nr = function(t2) {
      this.singleTap = new Ur(t2), this.numTaps = t2.numTaps, this.reset();
    };
    Nr.prototype.reset = function() {
      this.lastTime = 1 / 0, delete this.lastTap, this.count = 0, this.singleTap.reset();
    }, Nr.prototype.touchstart = function(t2, e2, i2) {
      this.singleTap.touchstart(t2, e2, i2);
    }, Nr.prototype.touchmove = function(t2, e2, i2) {
      this.singleTap.touchmove(t2, e2, i2);
    }, Nr.prototype.touchend = function(t2, e2, i2) {
      var r2 = this.singleTap.touchend(t2, e2, i2);
      if (r2) {
        var o2 = t2.timeStamp - this.lastTime < 500, n2 = !this.lastTap || this.lastTap.dist(r2) < 30;
        if (o2 && n2 || this.reset(), this.count++, this.lastTime = t2.timeStamp, this.lastTap = r2, this.count === this.numTaps)
          return this.reset(), r2;
      }
    };
    var jr = function() {
      this._zoomIn = new Nr({ numTouches: 1, numTaps: 2 }), this._zoomOut = new Nr({ numTouches: 2, numTaps: 1 }), this.reset();
    };
    jr.prototype.reset = function() {
      this._active = false, this._zoomIn.reset(), this._zoomOut.reset();
    }, jr.prototype.touchstart = function(t2, e2, i2) {
      this._zoomIn.touchstart(t2, e2, i2), this._zoomOut.touchstart(t2, e2, i2);
    }, jr.prototype.touchmove = function(t2, e2, i2) {
      this._zoomIn.touchmove(t2, e2, i2), this._zoomOut.touchmove(t2, e2, i2);
    }, jr.prototype.touchend = function(t2, e2, i2) {
      var r2 = this, o2 = this._zoomIn.touchend(t2, e2, i2), n2 = this._zoomOut.touchend(t2, e2, i2);
      return o2 ? (this._active = true, t2.preventDefault(), setTimeout(function() {
        return r2.reset();
      }, 0), { cameraAnimation: function(e3) {
        return e3.easeTo({ duration: 300, zoom: e3.getZoom() + 1, around: e3.unproject(o2) }, { originalEvent: t2 });
      } }) : n2 ? (this._active = true, t2.preventDefault(), setTimeout(function() {
        return r2.reset();
      }, 0), { cameraAnimation: function(e3) {
        return e3.easeTo({ duration: 300, zoom: e3.getZoom() - 1, around: e3.unproject(n2) }, { originalEvent: t2 });
      } }) : void 0;
    }, jr.prototype.touchcancel = function() {
      this.reset();
    }, jr.prototype.enable = function() {
      this._enabled = true;
    }, jr.prototype.disable = function() {
      this._enabled = false, this.reset();
    }, jr.prototype.isEnabled = function() {
      return this._enabled;
    }, jr.prototype.isActive = function() {
      return this._active;
    };
    var Vr = function(t2) {
      this.reset(), this._clickTolerance = t2.clickTolerance || 1;
    };
    Vr.prototype.reset = function() {
      this._active = false, this._moved = false, delete this._lastPoint, delete this._eventButton;
    }, Vr.prototype._correctButton = function(t2, e2) {
      return false;
    }, Vr.prototype._move = function(t2, e2) {
      return {};
    }, Vr.prototype.mousedown = function(t2, e2) {
      if (!this._lastPoint) {
        var i2 = r.mouseButton(t2);
        this._correctButton(t2, i2) && (this._lastPoint = e2, this._eventButton = i2);
      }
    }, Vr.prototype.mousemoveWindow = function(t2, e2) {
      var i2 = this._lastPoint;
      if (i2 && (t2.preventDefault(), this._moved || !(e2.dist(i2) < this._clickTolerance)))
        return this._moved = true, this._lastPoint = e2, this._move(i2, e2);
    }, Vr.prototype.mouseupWindow = function(t2) {
      r.mouseButton(t2) === this._eventButton && (this._moved && r.suppressClick(), this.reset());
    }, Vr.prototype.enable = function() {
      this._enabled = true;
    }, Vr.prototype.disable = function() {
      this._enabled = false, this.reset();
    }, Vr.prototype.isEnabled = function() {
      return this._enabled;
    }, Vr.prototype.isActive = function() {
      return this._active;
    };
    var qr = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.mousedown = function(e3, i2) {
        t2.prototype.mousedown.call(this, e3, i2), this._lastPoint && (this._active = true);
      }, e2.prototype._correctButton = function(t3, e3) {
        return 0 === e3 && !t3.ctrlKey;
      }, e2.prototype._move = function(t3, e3) {
        return { around: e3, panDelta: e3.sub(t3) };
      }, e2;
    }(Vr), Zr = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._correctButton = function(t3, e3) {
        return 0 === e3 && t3.ctrlKey || 2 === e3;
      }, e2.prototype._move = function(t3, e3) {
        var i2 = 0.8 * (e3.x - t3.x);
        if (i2)
          return this._active = true, { bearingDelta: i2 };
      }, e2.prototype.contextmenu = function(t3) {
        t3.preventDefault();
      }, e2;
    }(Vr), Gr = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype._correctButton = function(t3, e3) {
        return 0 === e3 && t3.ctrlKey || 2 === e3;
      }, e2.prototype._move = function(t3, e3) {
        var i2 = -0.5 * (e3.y - t3.y);
        if (i2)
          return this._active = true, { pitchDelta: i2 };
      }, e2.prototype.contextmenu = function(t3) {
        t3.preventDefault();
      }, e2;
    }(Vr), Hr = function(t2) {
      this._minTouches = 1, this._clickTolerance = t2.clickTolerance || 1, this.reset();
    };
    Hr.prototype.reset = function() {
      this._active = false, this._touches = {}, this._sum = new t.Point(0, 0);
    }, Hr.prototype.touchstart = function(t2, e2, i2) {
      return this._calculateTransform(t2, e2, i2);
    }, Hr.prototype.touchmove = function(t2, e2, i2) {
      if (this._active)
        return t2.preventDefault(), this._calculateTransform(t2, e2, i2);
    }, Hr.prototype.touchend = function(t2, e2, i2) {
      this._calculateTransform(t2, e2, i2), this._active && i2.length < this._minTouches && this.reset();
    }, Hr.prototype.touchcancel = function() {
      this.reset();
    }, Hr.prototype._calculateTransform = function(e2, i2, r2) {
      r2.length > 0 && (this._active = true);
      var o2 = Fr(r2, i2), n2 = new t.Point(0, 0), a2 = new t.Point(0, 0), s2 = 0;
      for (var c2 in o2) {
        var l2 = o2[c2], u2 = this._touches[c2];
        u2 && (n2._add(l2), a2._add(l2.sub(u2)), s2++, o2[c2] = l2);
      }
      if (this._touches = o2, !(s2 < this._minTouches) && a2.mag()) {
        var h2 = a2.div(s2);
        if (this._sum._add(h2), !(this._sum.mag() < this._clickTolerance))
          return { around: n2.div(s2), panDelta: h2 };
      }
    }, Hr.prototype.enable = function() {
      this._enabled = true;
    }, Hr.prototype.disable = function() {
      this._enabled = false, this.reset();
    }, Hr.prototype.isEnabled = function() {
      return this._enabled;
    }, Hr.prototype.isActive = function() {
      return this._active;
    };
    var Wr = function() {
      this.reset();
    };
    function Xr(t2, e2, i2) {
      for (var r2 = 0; r2 < t2.length; r2++)
        if (t2[r2].identifier === i2)
          return e2[r2];
    }
    function Kr(t2, e2) {
      return Math.log(t2 / e2) / Math.LN2;
    }
    Wr.prototype.reset = function() {
      this._active = false, delete this._firstTwoTouches;
    }, Wr.prototype._start = function(t2) {
    }, Wr.prototype._move = function(t2, e2, i2) {
      return {};
    }, Wr.prototype.touchstart = function(t2, e2, i2) {
      this._firstTwoTouches || i2.length < 2 || (this._firstTwoTouches = [i2[0].identifier, i2[1].identifier], this._start([e2[0], e2[1]]));
    }, Wr.prototype.touchmove = function(t2, e2, i2) {
      if (this._firstTwoTouches) {
        t2.preventDefault();
        var r2 = this._firstTwoTouches, o2 = r2[1], n2 = Xr(i2, e2, r2[0]), a2 = Xr(i2, e2, o2);
        if (n2 && a2) {
          var s2 = this._aroundCenter ? null : n2.add(a2).div(2);
          return this._move([n2, a2], s2, t2);
        }
      }
    }, Wr.prototype.touchend = function(t2, e2, i2) {
      if (this._firstTwoTouches) {
        var o2 = this._firstTwoTouches, n2 = o2[1], a2 = Xr(i2, e2, o2[0]), s2 = Xr(i2, e2, n2);
        a2 && s2 || (this._active && r.suppressClick(), this.reset());
      }
    }, Wr.prototype.touchcancel = function() {
      this.reset();
    }, Wr.prototype.enable = function(t2) {
      this._enabled = true, this._aroundCenter = !!t2 && "center" === t2.around;
    }, Wr.prototype.disable = function() {
      this._enabled = false, this.reset();
    }, Wr.prototype.isEnabled = function() {
      return this._enabled;
    }, Wr.prototype.isActive = function() {
      return this._active;
    };
    var Yr = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.reset = function() {
        t2.prototype.reset.call(this), delete this._distance, delete this._startDistance;
      }, e2.prototype._start = function(t3) {
        this._startDistance = this._distance = t3[0].dist(t3[1]);
      }, e2.prototype._move = function(t3, e3) {
        var i2 = this._distance;
        if (this._distance = t3[0].dist(t3[1]), this._active || !(Math.abs(Kr(this._distance, this._startDistance)) < 0.1))
          return this._active = true, { zoomDelta: Kr(this._distance, i2), pinchAround: e3 };
      }, e2;
    }(Wr);
    function Jr(t2, e2) {
      return 180 * t2.angleWith(e2) / Math.PI;
    }
    var Qr = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.reset = function() {
        t2.prototype.reset.call(this), delete this._minDiameter, delete this._startVector, delete this._vector;
      }, e2.prototype._start = function(t3) {
        this._startVector = this._vector = t3[0].sub(t3[1]), this._minDiameter = t3[0].dist(t3[1]);
      }, e2.prototype._move = function(t3, e3) {
        var i2 = this._vector;
        if (this._vector = t3[0].sub(t3[1]), this._active || !this._isBelowThreshold(this._vector))
          return this._active = true, { bearingDelta: Jr(this._vector, i2), pinchAround: e3 };
      }, e2.prototype._isBelowThreshold = function(t3) {
        this._minDiameter = Math.min(this._minDiameter, t3.mag());
        var e3 = 25 / (Math.PI * this._minDiameter) * 360, i2 = Jr(t3, this._startVector);
        return Math.abs(i2) < e3;
      }, e2;
    }(Wr);
    function $r(t2) {
      return Math.abs(t2.y) > Math.abs(t2.x);
    }
    var to = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2.prototype.reset = function() {
        t2.prototype.reset.call(this), this._valid = void 0, delete this._firstMove, delete this._lastPoints;
      }, e2.prototype._start = function(t3) {
        this._lastPoints = t3, $r(t3[0].sub(t3[1])) && (this._valid = false);
      }, e2.prototype._move = function(t3, e3, i2) {
        var r2 = t3[0].sub(this._lastPoints[0]), o2 = t3[1].sub(this._lastPoints[1]);
        if (this._valid = this.gestureBeginsVertically(r2, o2, i2.timeStamp), this._valid)
          return this._lastPoints = t3, this._active = true, { pitchDelta: (r2.y + o2.y) / 2 * -0.5 };
      }, e2.prototype.gestureBeginsVertically = function(t3, e3, i2) {
        if (void 0 !== this._valid)
          return this._valid;
        var r2 = t3.mag() >= 2, o2 = e3.mag() >= 2;
        if (r2 || o2) {
          if (!r2 || !o2)
            return void 0 === this._firstMove && (this._firstMove = i2), i2 - this._firstMove < 100 && void 0;
          var n2 = t3.y > 0 == e3.y > 0;
          return $r(t3) && $r(e3) && n2;
        }
      }, e2;
    }(Wr), eo = { panStep: 100, bearingStep: 15, pitchStep: 10 }, io = function() {
      var t2 = eo;
      this._panStep = t2.panStep, this._bearingStep = t2.bearingStep, this._pitchStep = t2.pitchStep;
    };
    function ro(t2) {
      return t2 * (2 - t2);
    }
    io.prototype.reset = function() {
      this._active = false;
    }, io.prototype.keydown = function(t2) {
      var e2 = this;
      if (!(t2.altKey || t2.ctrlKey || t2.metaKey)) {
        var i2 = 0, r2 = 0, o2 = 0, n2 = 0, a2 = 0;
        switch (t2.keyCode) {
          case 61:
          case 107:
          case 171:
          case 187:
            i2 = 1;
            break;
          case 189:
          case 109:
          case 173:
            i2 = -1;
            break;
          case 37:
            t2.shiftKey ? r2 = -1 : (t2.preventDefault(), n2 = -1);
            break;
          case 39:
            t2.shiftKey ? r2 = 1 : (t2.preventDefault(), n2 = 1);
            break;
          case 38:
            t2.shiftKey ? o2 = 1 : (t2.preventDefault(), a2 = -1);
            break;
          case 40:
            t2.shiftKey ? o2 = -1 : (t2.preventDefault(), a2 = 1);
            break;
          default:
            return;
        }
        return { cameraAnimation: function(s2) {
          var c2 = s2.getZoom();
          s2.easeTo({ duration: 300, easeId: "keyboardHandler", easing: ro, zoom: i2 ? Math.round(c2) + i2 * (t2.shiftKey ? 2 : 1) : c2, bearing: s2.getBearing() + r2 * e2._bearingStep, pitch: s2.getPitch() + o2 * e2._pitchStep, offset: [-n2 * e2._panStep, -a2 * e2._panStep], center: s2.getCenter() }, { originalEvent: t2 });
        } };
      }
    }, io.prototype.enable = function() {
      this._enabled = true;
    }, io.prototype.disable = function() {
      this._enabled = false, this.reset();
    }, io.prototype.isEnabled = function() {
      return this._enabled;
    }, io.prototype.isActive = function() {
      return this._active;
    };
    var oo = function(e2, i2) {
      this._map = e2, this._el = e2.getCanvasContainer(), this._handler = i2, this._delta = 0, this._defaultZoomRate = 0.01, this._wheelZoomRate = 1 / 450, t.bindAll(["_onWheel", "_onTimeout", "_onScrollFrame", "_onScrollFinished"], this);
    };
    oo.prototype.setZoomRate = function(t2) {
      this._defaultZoomRate = t2;
    }, oo.prototype.setWheelZoomRate = function(t2) {
      this._wheelZoomRate = t2;
    }, oo.prototype.isEnabled = function() {
      return !!this._enabled;
    }, oo.prototype.isActive = function() {
      return !!this._active || void 0 !== this._finishTimeout;
    }, oo.prototype.isZooming = function() {
      return !!this._zooming;
    }, oo.prototype.enable = function(t2) {
      this.isEnabled() || (this._enabled = true, this._aroundCenter = t2 && "center" === t2.around);
    }, oo.prototype.disable = function() {
      this.isEnabled() && (this._enabled = false);
    }, oo.prototype.wheel = function(e2) {
      if (this.isEnabled()) {
        var i2 = e2.deltaMode === t.window.WheelEvent.DOM_DELTA_LINE ? 40 * e2.deltaY : e2.deltaY, r2 = t.browser.now(), o2 = r2 - (this._lastWheelEventTime || 0);
        this._lastWheelEventTime = r2, 0 !== i2 && i2 % 4.000244140625 == 0 ? this._type = "wheel" : 0 !== i2 && Math.abs(i2) < 4 ? this._type = "trackpad" : o2 > 400 ? (this._type = null, this._lastValue = i2, this._timeout = setTimeout(this._onTimeout, 40, e2)) : this._type || (this._type = Math.abs(o2 * i2) < 200 ? "trackpad" : "wheel", this._timeout && (clearTimeout(this._timeout), this._timeout = null, i2 += this._lastValue)), e2.shiftKey && i2 && (i2 /= 4), this._type && (this._lastWheelEvent = e2, this._delta -= i2, this._active || this._start(e2)), e2.preventDefault();
      }
    }, oo.prototype._onTimeout = function(t2) {
      this._type = "wheel", this._delta -= this._lastValue, this._active || this._start(t2);
    }, oo.prototype._start = function(e2) {
      if (this._delta) {
        this._frameId && (this._frameId = null), this._active = true, this.isZooming() || (this._zooming = true), this._finishTimeout && (clearTimeout(this._finishTimeout), delete this._finishTimeout);
        var i2 = r.mousePos(this._el, e2);
        this._around = t.LngLat.convert(this._aroundCenter ? this._map.getCenter() : this._map.unproject(i2)), this._aroundPoint = this._map.transform.locationPoint(this._around), this._frameId || (this._frameId = true, this._handler._triggerRenderFrame());
      }
    }, oo.prototype.renderFrame = function() {
      return this._onScrollFrame();
    }, oo.prototype._onScrollFrame = function() {
      var e2 = this;
      if (this._frameId && (this._frameId = null, this.isActive())) {
        var i2 = this._map.transform;
        if (0 !== this._delta) {
          var r2 = "wheel" === this._type && Math.abs(this._delta) > 4.000244140625 ? this._wheelZoomRate : this._defaultZoomRate, o2 = 2 / (1 + Math.exp(-Math.abs(this._delta * r2)));
          this._delta < 0 && 0 !== o2 && (o2 = 1 / o2);
          var n2 = "number" == typeof this._targetZoom ? i2.zoomScale(this._targetZoom) : i2.scale;
          this._targetZoom = Math.min(i2.maxZoom, Math.max(i2.minZoom, i2.scaleZoom(n2 * o2))), "wheel" === this._type && (this._startZoom = i2.zoom, this._easing = this._smoothOutEasing(200)), this._delta = 0;
        }
        var a2, s2 = "number" == typeof this._targetZoom ? this._targetZoom : i2.zoom, c2 = this._startZoom, l2 = this._easing, u2 = false;
        if ("wheel" === this._type && c2 && l2) {
          var h2 = Math.min((t.browser.now() - this._lastWheelEventTime) / 200, 1), p2 = l2(h2);
          a2 = t.number(c2, s2, p2), h2 < 1 ? this._frameId || (this._frameId = true) : u2 = true;
        } else
          a2 = s2, u2 = true;
        return this._active = true, u2 && (this._active = false, this._finishTimeout = setTimeout(function() {
          e2._zooming = false, e2._handler._triggerRenderFrame(), delete e2._targetZoom, delete e2._finishTimeout;
        }, 200)), { noInertia: true, needsRenderFrame: !u2, zoomDelta: a2 - i2.zoom, around: this._aroundPoint, originalEvent: this._lastWheelEvent };
      }
    }, oo.prototype._smoothOutEasing = function(e2) {
      var i2 = t.ease;
      if (this._prevEase) {
        var r2 = this._prevEase, o2 = (t.browser.now() - r2.start) / r2.duration, n2 = r2.easing(o2 + 0.01) - r2.easing(o2), a2 = 0.27 / Math.sqrt(n2 * n2 + 1e-4) * 0.01, s2 = Math.sqrt(0.0729 - a2 * a2);
        i2 = t.bezier(a2, s2, 0.25, 1);
      }
      return this._prevEase = { start: t.browser.now(), duration: e2, easing: i2 }, i2;
    }, oo.prototype.reset = function() {
      this._active = false;
    };
    var no = function(t2, e2) {
      this._clickZoom = t2, this._tapZoom = e2;
    };
    no.prototype.enable = function() {
      this._clickZoom.enable(), this._tapZoom.enable();
    }, no.prototype.disable = function() {
      this._clickZoom.disable(), this._tapZoom.disable();
    }, no.prototype.isEnabled = function() {
      return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();
    }, no.prototype.isActive = function() {
      return this._clickZoom.isActive() || this._tapZoom.isActive();
    };
    var ao = function() {
      this.reset();
    };
    ao.prototype.reset = function() {
      this._active = false;
    }, ao.prototype.dblclick = function(t2, e2) {
      return t2.preventDefault(), { cameraAnimation: function(i2) {
        i2.easeTo({ duration: 300, zoom: i2.getZoom() + (t2.shiftKey ? -1 : 1), around: i2.unproject(e2) }, { originalEvent: t2 });
      } };
    }, ao.prototype.enable = function() {
      this._enabled = true;
    }, ao.prototype.disable = function() {
      this._enabled = false, this.reset();
    }, ao.prototype.isEnabled = function() {
      return this._enabled;
    }, ao.prototype.isActive = function() {
      return this._active;
    };
    var so = function() {
      this._tap = new Nr({ numTouches: 1, numTaps: 1 }), this.reset();
    };
    so.prototype.reset = function() {
      this._active = false, delete this._swipePoint, delete this._swipeTouch, delete this._tapTime, this._tap.reset();
    }, so.prototype.touchstart = function(t2, e2, i2) {
      this._swipePoint || (this._tapTime && t2.timeStamp - this._tapTime > 500 && this.reset(), this._tapTime ? i2.length > 0 && (this._swipePoint = e2[0], this._swipeTouch = i2[0].identifier) : this._tap.touchstart(t2, e2, i2));
    }, so.prototype.touchmove = function(t2, e2, i2) {
      if (this._tapTime) {
        if (this._swipePoint) {
          if (i2[0].identifier !== this._swipeTouch)
            return;
          var r2 = e2[0], o2 = r2.y - this._swipePoint.y;
          return this._swipePoint = r2, t2.preventDefault(), this._active = true, { zoomDelta: o2 / 128 };
        }
      } else
        this._tap.touchmove(t2, e2, i2);
    }, so.prototype.touchend = function(t2, e2, i2) {
      this._tapTime ? this._swipePoint && 0 === i2.length && this.reset() : this._tap.touchend(t2, e2, i2) && (this._tapTime = t2.timeStamp);
    }, so.prototype.touchcancel = function() {
      this.reset();
    }, so.prototype.enable = function() {
      this._enabled = true;
    }, so.prototype.disable = function() {
      this._enabled = false, this.reset();
    }, so.prototype.isEnabled = function() {
      return this._enabled;
    }, so.prototype.isActive = function() {
      return this._active;
    };
    var co = function(t2, e2, i2) {
      this._el = t2, this._mousePan = e2, this._touchPan = i2;
    };
    co.prototype.enable = function(t2) {
      this._inertiaOptions = t2 || {}, this._mousePan.enable(), this._touchPan.enable(), this._el.classList.add("sgmap-touch-drag-pan");
    }, co.prototype.disable = function() {
      this._mousePan.disable(), this._touchPan.disable(), this._el.classList.remove("sgmap-touch-drag-pan");
    }, co.prototype.isEnabled = function() {
      return this._mousePan.isEnabled() && this._touchPan.isEnabled();
    }, co.prototype.isActive = function() {
      return this._mousePan.isActive() || this._touchPan.isActive();
    };
    var lo = function(t2, e2, i2) {
      this._pitchWithRotate = t2.pitchWithRotate, this._mouseRotate = e2, this._mousePitch = i2;
    };
    lo.prototype.enable = function() {
      this._mouseRotate.enable(), this._pitchWithRotate && this._mousePitch.enable();
    }, lo.prototype.disable = function() {
      this._mouseRotate.disable(), this._mousePitch.disable();
    }, lo.prototype.isEnabled = function() {
      return this._mouseRotate.isEnabled() && (!this._pitchWithRotate || this._mousePitch.isEnabled());
    }, lo.prototype.isActive = function() {
      return this._mouseRotate.isActive() || this._mousePitch.isActive();
    };
    var uo = function(t2, e2, i2, r2) {
      this._el = t2, this._touchZoom = e2, this._touchRotate = i2, this._tapDragZoom = r2, this._rotationDisabled = false, this._enabled = true;
    };
    uo.prototype.enable = function(t2) {
      this._touchZoom.enable(t2), this._rotationDisabled || this._touchRotate.enable(t2), this._tapDragZoom.enable(), this._el.classList.add("sgmap-touch-zoom-rotate");
    }, uo.prototype.disable = function() {
      this._touchZoom.disable(), this._touchRotate.disable(), this._tapDragZoom.disable(), this._el.classList.remove("sgmap-touch-zoom-rotate");
    }, uo.prototype.isEnabled = function() {
      return this._touchZoom.isEnabled() && (this._rotationDisabled || this._touchRotate.isEnabled()) && this._tapDragZoom.isEnabled();
    }, uo.prototype.isActive = function() {
      return this._touchZoom.isActive() || this._touchRotate.isActive() || this._tapDragZoom.isActive();
    }, uo.prototype.disableRotation = function() {
      this._rotationDisabled = true, this._touchRotate.disable();
    }, uo.prototype.enableRotation = function() {
      this._rotationDisabled = false, this._touchZoom.isEnabled() && this._touchRotate.enable();
    };
    var ho = function(t2) {
      return t2.zoom || t2.drag || t2.pitch || t2.rotate;
    }, po = function(t2) {
      function e2() {
        t2.apply(this, arguments);
      }
      return t2 && (e2.__proto__ = t2), (e2.prototype = Object.create(t2 && t2.prototype)).constructor = e2, e2;
    }(t.Event);
    function fo(t2) {
      return t2.panDelta && t2.panDelta.mag() || t2.zoomDelta || t2.bearingDelta || t2.pitchDelta;
    }
    var _o = function(e2, i2) {
      this._map = e2, this._el = this._map.getCanvasContainer(), this._handlers = [], this._handlersById = {}, this._changes = [], this._inertia = new Br(e2), this._bearingSnap = i2.bearingSnap, this._previousActiveHandlers = {}, this._eventsInProgress = {}, this._addDefaultHandlers(i2), t.bindAll(["handleEvent", "handleWindowEvent"], this);
      var o2 = this._el;
      this._listeners = [[o2, "touchstart", { passive: false }], [o2, "touchmove", { passive: false }], [o2, "touchend", void 0], [o2, "touchcancel", void 0], [o2, "mousedown", void 0], [o2, "mousemove", void 0], [o2, "mouseup", void 0], [t.window.document, "mousemove", { capture: true }], [t.window.document, "mouseup", void 0], [o2, "mouseover", void 0], [o2, "mouseout", void 0], [o2, "dblclick", void 0], [o2, "click", void 0], [o2, "keydown", { capture: false }], [o2, "keyup", void 0], [o2, "wheel", { passive: false }], [o2, "contextmenu", void 0], [t.window, "blur", void 0]];
      for (var n2 = 0, a2 = this._listeners; n2 < a2.length; n2 += 1) {
        var s2 = a2[n2], c2 = s2[0];
        r.addEventListener(c2, s2[1], c2 === t.window.document ? this.handleWindowEvent : this.handleEvent, s2[2]);
      }
    };
    _o.prototype.destroy = function() {
      for (var e2 = 0, i2 = this._listeners; e2 < i2.length; e2 += 1) {
        var o2 = i2[e2], n2 = o2[0];
        r.removeEventListener(n2, o2[1], n2 === t.window.document ? this.handleWindowEvent : this.handleEvent, o2[2]);
      }
    }, _o.prototype._addDefaultHandlers = function(t2) {
      var e2 = this._map, i2 = e2.getCanvasContainer();
      this._add("mapEvent", new Lr(e2, t2));
      var r2 = e2.boxZoom = new Or(e2, t2);
      this._add("boxZoom", r2);
      var o2 = new jr(), n2 = new ao();
      e2.doubleClickZoom = new no(n2, o2), this._add("tapZoom", o2), this._add("clickZoom", n2);
      var a2 = new so();
      this._add("tapDragZoom", a2);
      var s2 = e2.touchPitch = new to();
      this._add("touchPitch", s2);
      var c2 = new Zr(t2), l2 = new Gr(t2);
      e2.dragRotate = new lo(t2, c2, l2), this._add("mouseRotate", c2, ["mousePitch"]), this._add("mousePitch", l2, ["mouseRotate"]);
      var u2 = new qr(t2), h2 = new Hr(t2);
      e2.dragPan = new co(i2, u2, h2), this._add("mousePan", u2), this._add("touchPan", h2, ["touchZoom", "touchRotate"]);
      var p2 = new Qr(), f2 = new Yr();
      e2.touchZoomRotate = new uo(i2, f2, p2, a2), this._add("touchRotate", p2, ["touchPan", "touchZoom"]), this._add("touchZoom", f2, ["touchPan", "touchRotate"]);
      var d2 = e2.scrollZoom = new oo(e2, this);
      this._add("scrollZoom", d2, ["mousePan"]);
      var _3 = e2.keyboard = new io();
      this._add("keyboard", _3), this._add("blockableMapEvent", new Rr(e2));
      for (var m2 = 0, g2 = ["boxZoom", "doubleClickZoom", "tapDragZoom", "touchPitch", "dragRotate", "dragPan", "touchZoomRotate", "scrollZoom", "keyboard"]; m2 < g2.length; m2 += 1) {
        var v2 = g2[m2];
        t2.interactive && t2[v2] && e2[v2].enable(t2[v2]);
      }
    }, _o.prototype._add = function(t2, e2, i2) {
      this._handlers.push({ handlerName: t2, handler: e2, allowed: i2 }), this._handlersById[t2] = e2;
    }, _o.prototype.stop = function() {
      if (!this._updatingCamera) {
        for (var t2 = 0, e2 = this._handlers; t2 < e2.length; t2 += 1)
          e2[t2].handler.reset();
        this._inertia.clear(), this._fireEvents({}, {}), this._changes = [];
      }
    }, _o.prototype.isActive = function() {
      for (var t2 = 0, e2 = this._handlers; t2 < e2.length; t2 += 1)
        if (e2[t2].handler.isActive())
          return true;
      return false;
    }, _o.prototype.isZooming = function() {
      return !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming();
    }, _o.prototype.isRotating = function() {
      return !!this._eventsInProgress.rotate;
    }, _o.prototype.isMoving = function() {
      return Boolean(ho(this._eventsInProgress)) || this.isZooming();
    }, _o.prototype._blockedByActive = function(t2, e2, i2) {
      for (var r2 in t2)
        if (r2 !== i2 && (!e2 || e2.indexOf(r2) < 0))
          return true;
      return false;
    }, _o.prototype.handleWindowEvent = function(t2) {
      this.handleEvent(t2, t2.type + "Window");
    }, _o.prototype._getMapTouches = function(t2) {
      for (var e2 = [], i2 = 0, r2 = t2; i2 < r2.length; i2 += 1) {
        var o2 = r2[i2];
        this._el.contains(o2.target) && e2.push(o2);
      }
      return e2;
    }, _o.prototype.handleEvent = function(t2, e2) {
      if ("blur" !== t2.type) {
        this._updatingCamera = true;
        for (var i2 = "renderFrame" === t2.type ? void 0 : t2, o2 = { needsRenderFrame: false }, n2 = {}, a2 = {}, s2 = t2.touches ? this._getMapTouches(t2.touches) : void 0, c2 = s2 ? r.touchPos(this._el, s2) : r.mousePos(this._el, t2), l2 = 0, u2 = this._handlers; l2 < u2.length; l2 += 1) {
          var h2 = u2[l2], p2 = h2.handlerName, f2 = h2.handler, d2 = h2.allowed;
          if (f2.isEnabled()) {
            var _3 = void 0;
            this._blockedByActive(a2, d2, p2) ? f2.reset() : f2[e2 || t2.type] && (_3 = f2[e2 || t2.type](t2, c2, s2), this.mergeHandlerResult(o2, n2, _3, p2, i2), _3 && _3.needsRenderFrame && this._triggerRenderFrame()), (_3 || f2.isActive()) && (a2[p2] = f2);
          }
        }
        var m2 = {};
        for (var g2 in this._previousActiveHandlers)
          a2[g2] || (m2[g2] = i2);
        this._previousActiveHandlers = a2, (Object.keys(m2).length || fo(o2)) && (this._changes.push([o2, n2, m2]), this._triggerRenderFrame()), (Object.keys(a2).length || fo(o2)) && this._map._stop(true), this._updatingCamera = false;
        var v2 = o2.cameraAnimation;
        v2 && (this._inertia.clear(), this._fireEvents({}, {}), this._changes = [], v2(this._map));
      } else
        this.stop();
    }, _o.prototype.mergeHandlerResult = function(e2, i2, r2, o2, n2) {
      if (r2) {
        t.extend(e2, r2);
        var a2 = { handlerName: o2, originalEvent: r2.originalEvent || n2 };
        void 0 !== r2.zoomDelta && (i2.zoom = a2), void 0 !== r2.panDelta && (i2.drag = a2), void 0 !== r2.pitchDelta && (i2.pitch = a2), void 0 !== r2.bearingDelta && (i2.rotate = a2);
      }
    }, _o.prototype._applyChanges = function() {
      for (var e2 = {}, i2 = {}, r2 = {}, o2 = 0, n2 = this._changes; o2 < n2.length; o2 += 1) {
        var a2 = n2[o2], s2 = a2[0], c2 = a2[1], l2 = a2[2];
        s2.panDelta && (e2.panDelta = (e2.panDelta || new t.Point(0, 0))._add(s2.panDelta)), s2.zoomDelta && (e2.zoomDelta = (e2.zoomDelta || 0) + s2.zoomDelta), s2.bearingDelta && (e2.bearingDelta = (e2.bearingDelta || 0) + s2.bearingDelta), s2.pitchDelta && (e2.pitchDelta = (e2.pitchDelta || 0) + s2.pitchDelta), void 0 !== s2.around && (e2.around = s2.around), void 0 !== s2.pinchAround && (e2.pinchAround = s2.pinchAround), s2.noInertia && (e2.noInertia = s2.noInertia), t.extend(i2, c2), t.extend(r2, l2);
      }
      this._updateMapTransform(e2, i2, r2), this._changes = [];
    }, _o.prototype._updateMapTransform = function(t2, e2, i2) {
      var r2 = this._map, o2 = r2.transform;
      if (!fo(t2))
        return this._fireEvents(e2, i2);
      var n2 = t2.panDelta, a2 = t2.zoomDelta, s2 = t2.bearingDelta, c2 = t2.pitchDelta, l2 = t2.around, u2 = t2.pinchAround;
      void 0 !== u2 && (l2 = u2), r2._stop(true), l2 = l2 || r2.transform.centerPoint;
      var h2 = o2.pointLocation(n2 ? l2.sub(n2) : l2);
      s2 && (o2.bearing += s2), c2 && (o2.pitch += c2), a2 && (o2.zoom += a2), o2.setLocationAtPoint(h2, l2), this._map._update(), t2.noInertia || this._inertia.record(t2), this._fireEvents(e2, i2);
    }, _o.prototype._fireEvents = function(e2, i2) {
      var r2 = this, o2 = ho(this._eventsInProgress), n2 = ho(e2), a2 = {};
      for (var s2 in e2)
        this._eventsInProgress[s2] || (a2[s2 + "start"] = e2[s2].originalEvent), this._eventsInProgress[s2] = e2[s2];
      for (var c2 in !o2 && n2 && this._fireEvent("movestart", n2.originalEvent), a2)
        this._fireEvent(c2, a2[c2]);
      for (var l2 in e2.rotate && (this._bearingChanged = true), n2 && this._fireEvent("move", n2.originalEvent), e2)
        this._fireEvent(l2, e2[l2].originalEvent);
      var u2, h2 = {};
      for (var p2 in this._eventsInProgress) {
        var f2 = this._eventsInProgress[p2], d2 = f2.handlerName, _3 = f2.originalEvent;
        this._handlersById[d2].isActive() || (delete this._eventsInProgress[p2], h2[p2 + "end"] = u2 = i2[d2] || _3);
      }
      for (var m2 in h2)
        this._fireEvent(m2, h2[m2]);
      var g2 = ho(this._eventsInProgress);
      if ((o2 || n2) && !g2) {
        this._updatingCamera = true;
        var v2 = this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions), y2 = function(t2) {
          return 0 !== t2 && -r2._bearingSnap < t2 && t2 < r2._bearingSnap;
        };
        v2 ? (y2(v2.bearing || this._map.getBearing()) && (v2.bearing = 0), this._map.easeTo(v2, { originalEvent: u2 })) : (this._map.fire(new t.Event("moveend", { originalEvent: u2 })), y2(this._map.getBearing()) && this._map.resetNorth()), this._bearingChanged = false, this._updatingCamera = false;
      }
    }, _o.prototype._fireEvent = function(e2, i2) {
      this._map.fire(new t.Event(e2, i2 ? { originalEvent: i2 } : {}));
    }, _o.prototype._triggerRenderFrame = function() {
      var t2 = this;
      void 0 === this._frameId && (this._frameId = this._map._requestRenderFrame(function(e2) {
        delete t2._frameId, t2.handleEvent(new po("renderFrame", { timeStamp: e2 })), t2._applyChanges();
      }));
    };
    var mo = function(e2) {
      function i2(i3, r2) {
        e2.call(this), this._moving = false, this._zooming = false, this.transform = i3, this._bearingSnap = r2.bearingSnap, t.bindAll(["_renderFrameCallback"], this);
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.getCenter = function() {
        return new t.LngLat(this.transform.center.lng, this.transform.center.lat);
      }, i2.prototype.setCenter = function(t2, e3) {
        return this.jumpTo({ center: t2 }, e3);
      }, i2.prototype.panBy = function(e3, i3, r2) {
        return e3 = t.Point.convert(e3).mult(-1), this.panTo(this.transform.center, t.extend({ offset: e3 }, i3), r2);
      }, i2.prototype.panTo = function(e3, i3, r2) {
        return this.easeTo(t.extend({ center: e3 }, i3), r2);
      }, i2.prototype.getZoom = function() {
        return this.transform.zoom;
      }, i2.prototype.setZoom = function(t2, e3) {
        return this.jumpTo({ zoom: t2 }, e3), this;
      }, i2.prototype.zoomTo = function(e3, i3, r2) {
        return this.easeTo(t.extend({ zoom: e3 }, i3), r2);
      }, i2.prototype.zoomIn = function(t2, e3) {
        return this.zoomTo(this.getZoom() + 1, t2, e3), this;
      }, i2.prototype.zoomOut = function(t2, e3) {
        return this.zoomTo(this.getZoom() - 1, t2, e3), this;
      }, i2.prototype.getBearing = function() {
        return this.transform.bearing;
      }, i2.prototype.setBearing = function(t2, e3) {
        return this.jumpTo({ bearing: t2 }, e3), this;
      }, i2.prototype.getPadding = function() {
        return this.transform.padding;
      }, i2.prototype.setPadding = function(t2, e3) {
        return this.jumpTo({ padding: t2 }, e3), this;
      }, i2.prototype.rotateTo = function(e3, i3, r2) {
        return this.easeTo(t.extend({ bearing: e3 }, i3), r2);
      }, i2.prototype.resetNorth = function(e3, i3) {
        return this.rotateTo(0, t.extend({ duration: 1e3 }, e3), i3), this;
      }, i2.prototype.resetNorthPitch = function(e3, i3) {
        return this.easeTo(t.extend({ bearing: 0, pitch: 0, duration: 1e3 }, e3), i3), this;
      }, i2.prototype.snapToNorth = function(t2, e3) {
        return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t2, e3) : this;
      }, i2.prototype.getPitch = function() {
        return this.transform.pitch;
      }, i2.prototype.setPitch = function(t2, e3) {
        return this.jumpTo({ pitch: t2 }, e3), this;
      }, i2.prototype.cameraForBounds = function(e3, i3) {
        return e3 = t.LngLatBounds.convert(e3), this._cameraForBoxAndBearing(e3.getNorthWest(), e3.getSouthEast(), 0, i3);
      }, i2.prototype._cameraForBoxAndBearing = function(e3, i3, r2, o2) {
        var n2 = { top: 0, bottom: 0, right: 0, left: 0 };
        if ("number" == typeof (o2 = t.extend({ padding: n2, offset: [0, 0], maxZoom: this.transform.maxZoom }, o2)).padding) {
          var a2 = o2.padding;
          o2.padding = { top: a2, bottom: a2, right: a2, left: a2 };
        }
        o2.padding = t.extend(n2, o2.padding);
        var s2 = this.transform, c2 = s2.padding, l2 = s2.project(t.LngLat.convert(e3)), u2 = s2.project(t.LngLat.convert(i3)), h2 = l2.rotate(-r2 * Math.PI / 180), p2 = u2.rotate(-r2 * Math.PI / 180), f2 = new t.Point(Math.max(h2.x, p2.x), Math.max(h2.y, p2.y)), d2 = new t.Point(Math.min(h2.x, p2.x), Math.min(h2.y, p2.y)), _3 = f2.sub(d2), m2 = (s2.width - (c2.left + c2.right + o2.padding.left + o2.padding.right)) / _3.x, g2 = (s2.height - (c2.top + c2.bottom + o2.padding.top + o2.padding.bottom)) / _3.y;
        if (!(g2 < 0 || m2 < 0)) {
          var v2 = Math.min(s2.scaleZoom(s2.scale * Math.min(m2, g2)), o2.maxZoom), y2 = t.Point.convert(o2.offset), b2 = new t.Point(y2.x + (o2.padding.left - o2.padding.right) / 2, y2.y + (o2.padding.top - o2.padding.bottom) / 2).mult(s2.scale / s2.zoomScale(v2));
          return { center: s2.unproject(l2.add(u2).div(2).sub(b2)), zoom: v2, bearing: r2 };
        }
        t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");
      }, i2.prototype.fitBounds = function(t2, e3, i3) {
        return this._fitInternal(this.cameraForBounds(t2, e3), e3, i3);
      }, i2.prototype.fitScreenCoordinates = function(e3, i3, r2, o2, n2) {
        return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e3)), this.transform.pointLocation(t.Point.convert(i3)), r2, o2), o2, n2);
      }, i2.prototype._fitInternal = function(e3, i3, r2) {
        return e3 ? (delete (i3 = t.extend(e3, i3)).padding, i3.linear ? this.easeTo(i3, r2) : this.flyTo(i3, r2)) : this;
      }, i2.prototype.jumpTo = function(e3, i3) {
        this.stop();
        var r2 = this.transform, o2 = false, n2 = false, a2 = false;
        return "zoom" in e3 && r2.zoom !== +e3.zoom && (o2 = true, r2.zoom = +e3.zoom), void 0 !== e3.center && (r2.center = t.LngLat.convert(e3.center)), "bearing" in e3 && r2.bearing !== +e3.bearing && (n2 = true, r2.bearing = +e3.bearing), "pitch" in e3 && r2.pitch !== +e3.pitch && (a2 = true, r2.pitch = +e3.pitch), null == e3.padding || r2.isPaddingEqual(e3.padding) || (r2.padding = e3.padding), this.fire(new t.Event("movestart", i3)).fire(new t.Event("move", i3)), o2 && this.fire(new t.Event("zoomstart", i3)).fire(new t.Event("zoom", i3)).fire(new t.Event("zoomend", i3)), n2 && this.fire(new t.Event("rotatestart", i3)).fire(new t.Event("rotate", i3)).fire(new t.Event("rotateend", i3)), a2 && this.fire(new t.Event("pitchstart", i3)).fire(new t.Event("pitch", i3)).fire(new t.Event("pitchend", i3)), this.fire(new t.Event("moveend", i3));
      }, i2.prototype.easeTo = function(e3, i3) {
        var r2 = this;
        this._stop(false, e3.easeId), (false === (e3 = t.extend({ offset: [0, 0], duration: 500, easing: t.ease }, e3)).animate || !e3.essential && t.browser.prefersReducedMotion) && (e3.duration = 0);
        var o2 = this.transform, n2 = this.getZoom(), a2 = this.getBearing(), s2 = this.getPitch(), c2 = this.getPadding(), l2 = "zoom" in e3 ? +e3.zoom : n2, u2 = "bearing" in e3 ? this._normalizeBearing(e3.bearing, a2) : a2, h2 = "pitch" in e3 ? +e3.pitch : s2, p2 = "padding" in e3 ? e3.padding : o2.padding, f2 = t.Point.convert(e3.offset), d2 = o2.centerPoint.add(f2), _3 = o2.pointLocation(d2), m2 = t.LngLat.convert(e3.center || _3);
        this._normalizeCenter(m2);
        var g2, v2, y2 = o2.project(_3), b2 = o2.project(m2).sub(y2), w2 = o2.zoomScale(l2 - n2);
        e3.around && (g2 = t.LngLat.convert(e3.around), v2 = o2.locationPoint(g2));
        var x2 = { moving: this._moving, zooming: this._zooming, rotating: this._rotating, pitching: this._pitching };
        return this._zooming = this._zooming || l2 !== n2, this._rotating = this._rotating || a2 !== u2, this._pitching = this._pitching || h2 !== s2, this._padding = !o2.isPaddingEqual(p2), this._easeId = e3.easeId, this._prepareEase(i3, e3.noMoveStart, x2), clearTimeout(this._easeEndTimeoutID), this._ease(function(e4) {
          if (r2._zooming && (o2.zoom = t.number(n2, l2, e4)), r2._rotating && (o2.bearing = t.number(a2, u2, e4)), r2._pitching && (o2.pitch = t.number(s2, h2, e4)), r2._padding && (o2.interpolatePadding(c2, p2, e4), d2 = o2.centerPoint.add(f2)), g2)
            o2.setLocationAtPoint(g2, v2);
          else {
            var _4 = o2.zoomScale(o2.zoom - n2), m3 = l2 > n2 ? Math.min(2, w2) : Math.max(0.5, w2), x3 = Math.pow(m3, 1 - e4), T2 = o2.unproject(y2.add(b2.mult(e4 * x3)).mult(_4));
            o2.setLocationAtPoint(o2.renderWorldCopies ? T2.wrap() : T2, d2);
          }
          r2._fireMoveEvents(i3);
        }, function(t2) {
          r2._afterEase(i3, t2);
        }, e3), this;
      }, i2.prototype._prepareEase = function(e3, i3, r2) {
        void 0 === r2 && (r2 = {}), this._moving = true, i3 || r2.moving || this.fire(new t.Event("movestart", e3)), this._zooming && !r2.zooming && this.fire(new t.Event("zoomstart", e3)), this._rotating && !r2.rotating && this.fire(new t.Event("rotatestart", e3)), this._pitching && !r2.pitching && this.fire(new t.Event("pitchstart", e3));
      }, i2.prototype._fireMoveEvents = function(e3) {
        this.fire(new t.Event("move", e3)), this._zooming && this.fire(new t.Event("zoom", e3)), this._rotating && this.fire(new t.Event("rotate", e3)), this._pitching && this.fire(new t.Event("pitch", e3));
      }, i2.prototype._afterEase = function(e3, i3) {
        if (!this._easeId || !i3 || this._easeId !== i3) {
          delete this._easeId;
          var r2 = this._zooming, o2 = this._rotating, n2 = this._pitching;
          this._moving = false, this._zooming = false, this._rotating = false, this._pitching = false, this._padding = false, r2 && this.fire(new t.Event("zoomend", e3)), o2 && this.fire(new t.Event("rotateend", e3)), n2 && this.fire(new t.Event("pitchend", e3)), this.fire(new t.Event("moveend", e3));
        }
      }, i2.prototype.flyTo = function(e3, i3) {
        var r2 = this;
        if (!e3.essential && t.browser.prefersReducedMotion) {
          var o2 = t.pick(e3, ["center", "zoom", "bearing", "pitch", "around"]);
          return this.jumpTo(o2, i3);
        }
        this.stop(), e3 = t.extend({ offset: [0, 0], speed: 1.2, curve: 1.42, easing: t.ease }, e3);
        var n2 = this.transform, a2 = this.getZoom(), s2 = this.getBearing(), c2 = this.getPitch(), l2 = this.getPadding(), u2 = "zoom" in e3 ? t.clamp(+e3.zoom, n2.minZoom, n2.maxZoom) : a2, h2 = "bearing" in e3 ? this._normalizeBearing(e3.bearing, s2) : s2, p2 = "pitch" in e3 ? +e3.pitch : c2, f2 = "padding" in e3 ? e3.padding : n2.padding, d2 = n2.zoomScale(u2 - a2), _3 = t.Point.convert(e3.offset), m2 = n2.centerPoint.add(_3), g2 = n2.pointLocation(m2), v2 = t.LngLat.convert(e3.center || g2);
        this._normalizeCenter(v2);
        var y2 = n2.project(g2), b2 = n2.project(v2).sub(y2), w2 = e3.curve, x2 = Math.max(n2.width, n2.height), T2 = x2 / d2, S2 = b2.mag();
        if ("minZoom" in e3) {
          var E2 = t.clamp(Math.min(e3.minZoom, a2, u2), n2.minZoom, n2.maxZoom), A2 = x2 / n2.zoomScale(E2 - a2);
          w2 = Math.sqrt(A2 / S2 * 2);
        }
        var k2 = w2 * w2;
        function I2(t2) {
          var e4 = (T2 * T2 - x2 * x2 + (t2 ? -1 : 1) * k2 * k2 * S2 * S2) / (2 * (t2 ? T2 : x2) * k2 * S2);
          return Math.log(Math.sqrt(e4 * e4 + 1) - e4);
        }
        function B2(t2) {
          return (Math.exp(t2) - Math.exp(-t2)) / 2;
        }
        function P2(t2) {
          return (Math.exp(t2) + Math.exp(-t2)) / 2;
        }
        var C2 = I2(0), z2 = function(t2) {
          return P2(C2) / P2(C2 + w2 * t2);
        }, D2 = function(t2) {
          return x2 * ((P2(C2) * (B2(e4 = C2 + w2 * t2) / P2(e4)) - B2(C2)) / k2) / S2;
          var e4;
        }, M2 = (I2(1) - C2) / w2;
        if (Math.abs(S2) < 1e-6 || !isFinite(M2)) {
          if (Math.abs(x2 - T2) < 1e-6)
            return this.easeTo(e3, i3);
          var L2 = T2 < x2 ? -1 : 1;
          M2 = Math.abs(Math.log(T2 / x2)) / w2, D2 = function() {
            return 0;
          }, z2 = function(t2) {
            return Math.exp(L2 * w2 * t2);
          };
        }
        return e3.duration = "duration" in e3 ? +e3.duration : 1e3 * M2 / ("screenSpeed" in e3 ? +e3.screenSpeed / w2 : +e3.speed), e3.maxDuration && e3.duration > e3.maxDuration && (e3.duration = 0), this._zooming = true, this._rotating = s2 !== h2, this._pitching = p2 !== c2, this._padding = !n2.isPaddingEqual(f2), this._prepareEase(i3, false), this._ease(function(e4) {
          var o3 = e4 * M2, d3 = 1 / z2(o3);
          n2.zoom = 1 === e4 ? u2 : a2 + n2.scaleZoom(d3), r2._rotating && (n2.bearing = t.number(s2, h2, e4)), r2._pitching && (n2.pitch = t.number(c2, p2, e4)), r2._padding && (n2.interpolatePadding(l2, f2, e4), m2 = n2.centerPoint.add(_3));
          var g3 = 1 === e4 ? v2 : n2.unproject(y2.add(b2.mult(D2(o3))).mult(d3));
          n2.setLocationAtPoint(n2.renderWorldCopies ? g3.wrap() : g3, m2), r2._fireMoveEvents(i3);
        }, function() {
          return r2._afterEase(i3);
        }, e3), this;
      }, i2.prototype.isEasing = function() {
        return !!this._easeFrameId;
      }, i2.prototype.stop = function() {
        return this._stop();
      }, i2.prototype._stop = function(t2, e3) {
        if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId), delete this._easeFrameId, delete this._onEaseFrame), this._onEaseEnd) {
          var i3 = this._onEaseEnd;
          delete this._onEaseEnd, i3.call(this, e3);
        }
        if (!t2) {
          var r2 = this.handlers;
          r2 && r2.stop();
        }
        return this;
      }, i2.prototype._ease = function(e3, i3, r2) {
        false === r2.animate || 0 === r2.duration ? (e3(1), i3()) : (this._easeStart = t.browser.now(), this._easeOptions = r2, this._onEaseFrame = e3, this._onEaseEnd = i3, this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback));
      }, i2.prototype._renderFrameCallback = function() {
        var e3 = Math.min((t.browser.now() - this._easeStart) / this._easeOptions.duration, 1);
        this._onEaseFrame(this._easeOptions.easing(e3)), e3 < 1 ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop();
      }, i2.prototype._normalizeBearing = function(e3, i3) {
        e3 = t.wrap(e3, -180, 180);
        var r2 = Math.abs(e3 - i3);
        return Math.abs(e3 - 360 - i3) < r2 && (e3 -= 360), Math.abs(e3 + 360 - i3) < r2 && (e3 += 360), e3;
      }, i2.prototype._normalizeCenter = function(t2) {
        var e3 = this.transform;
        if (e3.renderWorldCopies && !e3.lngRange) {
          var i3 = t2.lng - e3.center.lng;
          t2.lng += i3 > 180 ? -360 : i3 < -180 ? 360 : 0;
        }
      }, i2;
    }(t.Evented), go = function(e2) {
      void 0 === e2 && (e2 = {}), this.options = e2, t.bindAll(["_updateEditLink", "_updateData", "_updateCompact"], this);
    };
    go.prototype.getDefaultPosition = function() {
      return "bottom-right";
    }, go.prototype.onAdd = function(t2) {
      var e2 = this.options && this.options.compact;
      return this._map = t2, this._container = r.create("div", "sgmap-ctrl sgmap-ctrl-attrib"), this._innerContainer = r.create("div", "sgmap-ctrl-attrib-inner", this._container), e2 && this._container.classList.add("sgmap-compact"), this._updateAttributions(), this._updateEditLink(), this._map.on("styledata", this._updateData), this._map.on("sourcedata", this._updateData), this._map.on("moveend", this._updateEditLink), void 0 === e2 && (this._map.on("resize", this._updateCompact), this._updateCompact()), this._container;
    }, go.prototype.onRemove = function() {
      r.remove(this._container), this._map.off("styledata", this._updateData), this._map.off("sourcedata", this._updateData), this._map.off("moveend", this._updateEditLink), this._map.off("resize", this._updateCompact), this._map = void 0, this._attribHTML = void 0;
    }, go.prototype._updateEditLink = function() {
      var e2 = this._editLink;
      e2 || (e2 = this._editLink = this._container.querySelector(".sgmap-improve-map"));
      var i2 = [{ key: "owner", value: this.styleOwner }, { key: "id", value: this.styleId }, { key: "access_token", value: this._map._requestManager._customAccessToken || t.config$1.ACCESS_TOKEN }];
      if (e2) {
        var r2 = i2.reduce(function(t2, e3, r3) {
          return e3.value && (t2 += e3.key + "=" + e3.value + (r3 < i2.length - 1 ? "&" : "")), t2;
        }, "?");
        e2.href = t.config$1.FEEDBACK_URL + "/" + r2 + (this._map._hash ? this._map._hash.getHashString(true) : ""), e2.rel = "noopener nofollow";
      }
    }, go.prototype._updateData = function(t2) {
      !t2 || "metadata" !== t2.sourceDataType && "style" !== t2.dataType || (this._updateAttributions(), this._updateEditLink());
    }, go.prototype._updateAttributions = function() {
      if (this._map.style) {
        var t2 = [];
        if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? t2 = t2.concat(this.options.customAttribution.map(function(t3) {
          return "string" != typeof t3 ? "" : t3;
        })) : "string" == typeof this.options.customAttribution && t2.push(this.options.customAttribution)), this._map.style.stylesheet) {
          var e2 = this._map.style.stylesheet;
          this.styleOwner = e2.owner, this.styleId = e2.id;
        }
        var i2 = this._map.style.sourceCaches;
        for (var r2 in i2) {
          var o2 = i2[r2];
          if (o2.used) {
            var n2 = o2.getSource();
            n2.attribution && t2.indexOf(n2.attribution) < 0 && t2.push(n2.attribution);
          }
        }
        t2.sort(function(t3, e3) {
          return t3.length - e3.length;
        });
        var a2 = (t2 = t2.filter(function(e3, i3) {
          for (var r3 = i3 + 1; r3 < t2.length; r3++)
            if (t2[r3].indexOf(e3) >= 0)
              return false;
          return true;
        })).join(" | ");
        a2 !== this._attribHTML && (this._attribHTML = a2, t2.length ? (this._innerContainer.innerHTML = a2, this._container.classList.remove("sgmap-attrib-empty")) : this._container.classList.add("sgmap-attrib-empty"), this._editLink = null);
      }
    }, go.prototype._updateCompact = function() {
      this._map.getCanvasContainer().offsetWidth <= 640 ? this._container.classList.add("sgmap-compact") : this._container.classList.remove("sgmap-compact");
    };
    var vo = t.createCommonjsModule(function(t2, e2) {
      !function(i2, r2) {
        var o2 = "model", n2 = "name", a2 = "type", s2 = "vendor", c2 = "version", l2 = "mobile", u2 = "tablet", h2 = "smarttv", p2 = function(t3) {
          for (var e3 = {}, i3 = 0; i3 < t3.length; i3++)
            e3[t3[i3].toUpperCase()] = t3[i3];
          return e3;
        }, f2 = function(t3, e3) {
          return "string" == typeof t3 && -1 !== d2(e3).indexOf(d2(t3));
        }, d2 = function(t3) {
          return t3.toLowerCase();
        }, _3 = function(t3, e3) {
          if ("string" == typeof t3)
            return t3 = t3.replace(/^\s\s*/, "").replace(/\s\s*$/, ""), void 0 === e3 ? t3 : t3.substring(0, 255);
        }, m2 = function(t3, e3) {
          for (var i3, r3, o3, n3, a3, s3, c3 = 0; c3 < e3.length && !a3; ) {
            var l3 = e3[c3], u3 = e3[c3 + 1];
            for (i3 = r3 = 0; i3 < l3.length && !a3; )
              if (a3 = l3[i3++].exec(t3))
                for (o3 = 0; o3 < u3.length; o3++)
                  s3 = a3[++r3], "object" == typeof (n3 = u3[o3]) && n3.length > 0 ? 2 === n3.length ? this[n3[0]] = "function" == typeof n3[1] ? n3[1].call(this, s3) : n3[1] : 3 === n3.length ? this[n3[0]] = "function" != typeof n3[1] || n3[1].exec && n3[1].test ? s3 ? s3.replace(n3[1], n3[2]) : void 0 : s3 ? n3[1].call(this, s3, n3[2]) : void 0 : 4 === n3.length && (this[n3[0]] = s3 ? n3[3].call(this, s3.replace(n3[1], n3[2])) : void 0) : this[n3] = s3 || void 0;
            c3 += 2;
          }
        }, g2 = function(t3, e3) {
          for (var i3 in e3)
            if ("object" == typeof e3[i3] && e3[i3].length > 0) {
              for (var r3 = 0; r3 < e3[i3].length; r3++)
                if (f2(e3[i3][r3], t3))
                  return "?" === i3 ? void 0 : i3;
            } else if (f2(e3[i3], t3))
              return "?" === i3 ? void 0 : i3;
          return t3;
        }, v2 = { ME: "4.90", "NT 3.11": "NT3.51", "NT 4.0": "NT4.0", 2e3: "NT 5.0", XP: ["NT 5.1", "NT 5.2"], Vista: "NT 6.0", 7: "NT 6.1", 8: "NT 6.2", 8.1: "NT 6.3", 10: ["NT 6.4", "NT 10.0"], RT: "ARM" }, y2 = { browser: [[/\b(?:crmo|crios)\/([\w\.]+)/i], [c2, [n2, "Chrome"]], [/edg(?:e|ios|a)?\/([\w\.]+)/i], [c2, [n2, "Edge"]], [/(opera mini)\/([-\w\.]+)/i, /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i, /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i], [n2, c2], [/opios[\/ ]+([\w\.]+)/i], [c2, [n2, "Opera Mini"]], [/\bopr\/([\w\.]+)/i], [c2, [n2, "Opera"]], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i, /(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i, /(ba?idubrowser)[\/ ]?([\w\.]+)/i, /(?:ms|\()(ie) ([\w\.]+)/i, /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i, /(weibo)__([\d\.]+)/i], [n2, c2], [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i], [c2, [n2, "UCBrowser"]], [/\bqbcore\/([\w\.]+)/i], [c2, [n2, "WeChat(Win) Desktop"]], [/micromessenger\/([\w\.]+)/i], [c2, [n2, "WeChat"]], [/konqueror\/([\w\.]+)/i], [c2, [n2, "Konqueror"]], [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i], [c2, [n2, "IE"]], [/yabrowser\/([\w\.]+)/i], [c2, [n2, "Yandex"]], [/(avast|avg)\/([\w\.]+)/i], [[n2, /(.+)/, "$1 Secure Browser"], c2], [/\bfocus\/([\w\.]+)/i], [c2, [n2, "Firefox Focus"]], [/\bopt\/([\w\.]+)/i], [c2, [n2, "Opera Touch"]], [/coc_coc\w+\/([\w\.]+)/i], [c2, [n2, "Coc Coc"]], [/dolfin\/([\w\.]+)/i], [c2, [n2, "Dolphin"]], [/coast\/([\w\.]+)/i], [c2, [n2, "Opera Coast"]], [/miuibrowser\/([\w\.]+)/i], [c2, [n2, "MIUI Browser"]], [/fxios\/([-\w\.]+)/i], [c2, [n2, "Firefox"]], [/\bqihu|(qi?ho?o?|360)browser/i], [[n2, "360 Browser"]], [/(oculus|samsung|sailfish)browser\/([\w\.]+)/i], [[n2, /(.+)/, "$1 Browser"], c2], [/(comodo_dragon)\/([\w\.]+)/i], [[n2, /_/g, " "], c2], [/(electron)\/([\w\.]+) safari/i, /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i, /m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i], [n2, c2], [/(metasr)[\/ ]?([\w\.]+)/i, /(lbbrowser)/i], [n2], [/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i], [[n2, "Facebook"], c2], [/safari (line)\/([\w\.]+)/i, /\b(line)\/([\w\.]+)\/iab/i, /(chromium|instagram)[\/ ]([-\w\.]+)/i], [n2, c2], [/\bgsa\/([\w\.]+) .*safari\//i], [c2, [n2, "GSA"]], [/headlesschrome(?:\/([\w\.]+)| )/i], [c2, [n2, "Chrome Headless"]], [/ wv\).+(chrome)\/([\w\.]+)/i], [[n2, "Chrome WebView"], c2], [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i], [c2, [n2, "Android Browser"]], [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i], [n2, c2], [/version\/([\w\.]+) .*mobile\/\w+ (safari)/i], [c2, [n2, "Mobile Safari"]], [/version\/([\w\.]+) .*(mobile ?safari|safari)/i], [c2, n2], [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i], [n2, [c2, g2, { "1.0": "/8", 1.2: "/1", 1.3: "/3", "2.0": "/412", "2.0.2": "/416", "2.0.3": "/417", "2.0.4": "/419", "?": "/" }]], [/(webkit|khtml)\/([\w\.]+)/i], [n2, c2], [/(navigator|netscape\d?)\/([-\w\.]+)/i], [[n2, "Netscape"], c2], [/mobile vr; rv:([\w\.]+)\).+firefox/i], [c2, [n2, "Firefox Reality"]], [/ekiohf.+(flow)\/([\w\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i, /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i, /(firefox)\/([\w\.]+)/i, /(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i, /(links) \(([\w\.]+)/i], [n2, c2]], cpu: [[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i], [["architecture", "amd64"]], [/(ia32(?=;))/i], [["architecture", d2]], [/((?:i[346]|x)86)[;\)]/i], [["architecture", "ia32"]], [/\b(aarch64|arm(v?8e?l?|_?64))\b/i], [["architecture", "arm64"]], [/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i], [["architecture", "armhf"]], [/windows (ce|mobile); ppc;/i], [["architecture", "arm"]], [/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i], [["architecture", /ower/, "", d2]], [/(sun4\w)[;\)]/i], [["architecture", "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i], [["architecture", d2]]], device: [[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i], [o2, [s2, "Samsung"], [a2, u2]], [/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i, /samsung[- ]([-\w]+)/i, /sec-(sgh\w+)/i], [o2, [s2, "Samsung"], [a2, l2]], [/\((ip(?:hone|od)[\w ]*);/i], [o2, [s2, "Apple"], [a2, l2]], [/\((ipad);[-\w\),; ]+apple/i, /applecoremedia\/[\w\.]+ \((ipad)/i, /\b(ipad)\d\d?,\d\d?[;\]].+ios/i], [o2, [s2, "Apple"], [a2, u2]], [/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i], [o2, [s2, "Huawei"], [a2, u2]], [/(?:huawei|honor)([-\w ]+)[;\)]/i, /\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i], [o2, [s2, "Huawei"], [a2, l2]], [/\b(poco[\w ]+)(?: bui|\))/i, /\b; (\w+) build\/hm\1/i, /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i, /\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i, /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i], [[o2, /_/g, " "], [s2, "Xiaomi"], [a2, l2]], [/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i], [[o2, /_/g, " "], [s2, "Xiaomi"], [a2, u2]], [/; (\w+) bui.+ oppo/i, /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i], [o2, [s2, "OPPO"], [a2, l2]], [/vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i], [o2, [s2, "Vivo"], [a2, l2]], [/\b(rmx[12]\d{3})(?: bui|;|\))/i], [o2, [s2, "Realme"], [a2, l2]], [/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i, /\bmot(?:orola)?[- ](\w*)/i, /((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i], [o2, [s2, "Motorola"], [a2, l2]], [/\b(mz60\d|xoom[2 ]{0,2}) build\//i], [o2, [s2, "Motorola"], [a2, u2]], [/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i], [o2, [s2, "LG"], [a2, u2]], [/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i, /\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i, /\blg-?([\d\w]+) bui/i], [o2, [s2, "LG"], [a2, l2]], [/(ideatab[-\w ]+)/i, /lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i], [o2, [s2, "Lenovo"], [a2, u2]], [/(?:maemo|nokia).*(n900|lumia \d+)/i, /nokia[-_ ]?([-\w\.]*)/i], [[o2, /_/g, " "], [s2, "Nokia"], [a2, l2]], [/(pixel c)\b/i], [o2, [s2, "Google"], [a2, u2]], [/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i], [o2, [s2, "Google"], [a2, l2]], [/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [o2, [s2, "Sony"], [a2, l2]], [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i], [[o2, "Xperia Tablet"], [s2, "Sony"], [a2, u2]], [/ (kb2005|in20[12]5|be20[12][59])\b/i, /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i], [o2, [s2, "OnePlus"], [a2, l2]], [/(alexa)webm/i, /(kf[a-z]{2}wi)( bui|\))/i, /(kf[a-z]+)( bui|\)).+silk\//i], [o2, [s2, "Amazon"], [a2, u2]], [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i], [[o2, /(.+)/g, "Fire Phone $1"], [s2, "Amazon"], [a2, l2]], [/(playbook);[-\w\),; ]+(rim)/i], [o2, s2, [a2, u2]], [/\b((?:bb[a-f]|st[hv])100-\d)/i, /\(bb10; (\w+)/i], [o2, [s2, "BlackBerry"], [a2, l2]], [/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i], [o2, [s2, "ASUS"], [a2, u2]], [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i], [o2, [s2, "ASUS"], [a2, l2]], [/(nexus 9)/i], [o2, [s2, "HTC"], [a2, u2]], [/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i, /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i, /(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i], [s2, [o2, /_/g, " "], [a2, l2]], [/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i], [o2, [s2, "Acer"], [a2, u2]], [/droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i], [o2, [s2, "Meizu"], [a2, l2]], [/\b(sh-?[altvz]?\d\d[a-ekm]?)/i], [o2, [s2, "Sharp"], [a2, l2]], [/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i, /(hp) ([\w ]+\w)/i, /(asus)-?(\w+)/i, /(microsoft); (lumia[\w ]+)/i, /(lenovo)[-_ ]?([-\w]+)/i, /(jolla)/i, /(oppo) ?([\w ]+) bui/i], [s2, o2, [a2, l2]], [/(archos) (gamepad2?)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\/([\w\.]+)/i, /(nook)[\w ]+build\/(\w+)/i, /(dell) (strea[kpr\d ]*[\dko])/i, /(le[- ]+pan)[- ]+(\w{1,9}) bui/i, /(trinity)[- ]*(t\d{3}) bui/i, /(gigaset)[- ]+(q\w{1,9}) bui/i, /(vodafone) ([\w ]+)(?:\)| bui)/i], [s2, o2, [a2, u2]], [/(surface duo)/i], [o2, [s2, "Microsoft"], [a2, u2]], [/droid [\d\.]+; (fp\du?)(?: b|\))/i], [o2, [s2, "Fairphone"], [a2, l2]], [/(u304aa)/i], [o2, [s2, "AT&T"], [a2, l2]], [/\bsie-(\w*)/i], [o2, [s2, "Siemens"], [a2, l2]], [/\b(rct\w+) b/i], [o2, [s2, "RCA"], [a2, u2]], [/\b(venue[\d ]{2,7}) b/i], [o2, [s2, "Dell"], [a2, u2]], [/\b(q(?:mv|ta)\w+) b/i], [o2, [s2, "Verizon"], [a2, u2]], [/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i], [o2, [s2, "Barnes & Noble"], [a2, u2]], [/\b(tm\d{3}\w+) b/i], [o2, [s2, "NuVision"], [a2, u2]], [/\b(k88) b/i], [o2, [s2, "ZTE"], [a2, u2]], [/\b(nx\d{3}j) b/i], [o2, [s2, "ZTE"], [a2, l2]], [/\b(gen\d{3}) b.+49h/i], [o2, [s2, "Swiss"], [a2, l2]], [/\b(zur\d{3}) b/i], [o2, [s2, "Swiss"], [a2, u2]], [/\b((zeki)?tb.*\b) b/i], [o2, [s2, "Zeki"], [a2, u2]], [/\b([yr]\d{2}) b/i, /\b(dragon[- ]+touch |dt)(\w{5}) b/i], [[s2, "Dragon Touch"], o2, [a2, u2]], [/\b(ns-?\w{0,9}) b/i], [o2, [s2, "Insignia"], [a2, u2]], [/\b((nxa|next)-?\w{0,9}) b/i], [o2, [s2, "NextBook"], [a2, u2]], [/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i], [[s2, "Voice"], o2, [a2, l2]], [/\b(lvtel\-)?(v1[12]) b/i], [[s2, "LvTel"], o2, [a2, l2]], [/\b(ph-1) /i], [o2, [s2, "Essential"], [a2, l2]], [/\b(v(100md|700na|7011|917g).*\b) b/i], [o2, [s2, "Envizen"], [a2, u2]], [/\b(trio[-\w\. ]+) b/i], [o2, [s2, "MachSpeed"], [a2, u2]], [/\btu_(1491) b/i], [o2, [s2, "Rotor"], [a2, u2]], [/(shield[\w ]+) b/i], [o2, [s2, "Nvidia"], [a2, u2]], [/(sprint) (\w+)/i], [s2, o2, [a2, l2]], [/(kin\.[onetw]{3})/i], [[o2, /\./g, " "], [s2, "Microsoft"], [a2, l2]], [/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i], [o2, [s2, "Zebra"], [a2, u2]], [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i], [o2, [s2, "Zebra"], [a2, l2]], [/(ouya)/i, /(nintendo) ([wids3utch]+)/i], [s2, o2, [a2, "console"]], [/droid.+; (shield) bui/i], [o2, [s2, "Nvidia"], [a2, "console"]], [/(playstation [345portablevi]+)/i], [o2, [s2, "Sony"], [a2, "console"]], [/\b(xbox(?: one)?(?!; xbox))[\); ]/i], [o2, [s2, "Microsoft"], [a2, "console"]], [/smart-tv.+(samsung)/i], [s2, [a2, h2]], [/hbbtv.+maple;(\d+)/i], [[o2, /^/, "SmartTV"], [s2, "Samsung"], [a2, h2]], [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i], [[s2, "LG"], [a2, h2]], [/(apple) ?tv/i], [s2, [o2, "Apple TV"], [a2, h2]], [/crkey/i], [[o2, "Chromecast"], [s2, "Google"], [a2, h2]], [/droid.+aft(\w)( bui|\))/i], [o2, [s2, "Amazon"], [a2, h2]], [/\(dtv[\);].+(aquos)/i], [o2, [s2, "Sharp"], [a2, h2]], [/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i, /hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i], [[s2, _3], [o2, _3], [a2, h2]], [/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i], [[a2, h2]], [/((pebble))app/i], [s2, o2, [a2, "wearable"]], [/droid.+; (glass) \d/i], [o2, [s2, "Google"], [a2, "wearable"]], [/droid.+; (wt63?0{2,3})\)/i], [o2, [s2, "Zebra"], [a2, "wearable"]], [/(quest( 2)?)/i], [o2, [s2, "Facebook"], [a2, "wearable"]], [/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i], [s2, [a2, "embedded"]], [/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i], [o2, [a2, l2]], [/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i], [o2, [a2, u2]], [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i], [[a2, u2]], [/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i], [[a2, l2]], [/(android[-\w\. ]{0,9});.+buil/i], [o2, [s2, "Generic"]]], engine: [[/windows.+ edge\/([\w\.]+)/i], [c2, [n2, "EdgeHTML"]], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i], [c2, [n2, "Blink"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /ekioh(flow)\/([\w\.]+)/i, /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i, /(icab)[\/ ]([23]\.[\d\.]+)/i], [n2, c2], [/rv\:([\w\.]{1,9})\b.+(gecko)/i], [c2, n2]], os: [[/microsoft (windows) (vista|xp)/i], [n2, c2], [/(windows) nt 6\.2; (arm)/i, /(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i, /(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i], [n2, [c2, g2, v2]], [/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i], [[n2, "Windows"], [c2, g2, v2]], [/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i, /cfnetwork\/.+darwin/i], [[c2, /_/g, "."], [n2, "iOS"]], [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+haiku)/i], [[n2, "Mac OS"], [c2, /_/g, "."]], [/droid ([\w\.]+)\b.+(android[- ]x86)/i], [c2, n2], [/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i, /(blackberry)\w*\/([\w\.]*)/i, /(tizen|kaios)[\/ ]([\w\.]+)/i, /\((series40);/i], [n2, c2], [/\(bb(10);/i], [c2, [n2, "BlackBerry"]], [/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i], [c2, [n2, "Symbian"]], [/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i], [c2, [n2, "Firefox OS"]], [/web0s;.+rt(tv)/i, /\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i], [c2, [n2, "webOS"]], [/crkey\/([\d\.]+)/i], [c2, [n2, "Chromecast"]], [/(cros) [\w]+ ([\w\.]+\w)/i], [[n2, "Chromium OS"], c2], [/(nintendo|playstation) ([wids345portablevuch]+)/i, /(xbox); +xbox ([^\);]+)/i, /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i, /(mint)[\/\(\) ]?(\w*)/i, /(mageia|vectorlinux)[; ]/i, /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i, /(hurd|linux) ?([\w\.]*)/i, /(gnu) ?([\w\.]*)/i, /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i, /(haiku) (\w+)/i], [n2, c2], [/(sunos) ?([\w\.\d]*)/i], [[n2, "Solaris"], c2], [/((?:open)?solaris)[-\/ ]?([\w\.]*)/i, /(aix) ((\d)(?=\.|\)| )[\w\.])*/i, /\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i, /(unix) ?([\w\.]*)/i], [n2, c2]] }, b2 = function(t3, e3) {
          if ("object" == typeof t3 && (e3 = t3, t3 = void 0), !(this instanceof b2))
            return new b2(t3, e3).getResult();
          var r3 = t3 || (void 0 !== i2 && i2.navigator && i2.navigator.userAgent ? i2.navigator.userAgent : ""), o3 = e3 ? function(t4, e4) {
            var i3 = {};
            for (var r4 in t4)
              i3[r4] = e4[r4] && e4[r4].length % 2 == 0 ? e4[r4].concat(t4[r4]) : t4[r4];
            return i3;
          }(y2, e3) : y2;
          return this.getBrowser = function() {
            var t4, e4 = { name: void 0, version: void 0 };
            return m2.call(e4, r3, o3.browser), e4.major = "string" == typeof (t4 = e4.version) ? t4.replace(/[^\d\.]/g, "").split(".")[0] : void 0, e4;
          }, this.getCPU = function() {
            var t4 = { architecture: void 0 };
            return m2.call(t4, r3, o3.cpu), t4;
          }, this.getDevice = function() {
            var t4 = { vendor: void 0, model: void 0, type: void 0 };
            return m2.call(t4, r3, o3.device), t4;
          }, this.getEngine = function() {
            var t4 = { name: void 0, version: void 0 };
            return m2.call(t4, r3, o3.engine), t4;
          }, this.getOS = function() {
            var t4 = { name: void 0, version: void 0 };
            return m2.call(t4, r3, o3.os), t4;
          }, this.getResult = function() {
            return { ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS(), device: this.getDevice(), cpu: this.getCPU() };
          }, this.getUA = function() {
            return r3;
          }, this.setUA = function(t4) {
            return r3 = "string" == typeof t4 && t4.length > 255 ? _3(t4, 255) : t4, this;
          }, this.setUA(r3), this;
        };
        b2.VERSION = "1.0.2", b2.BROWSER = p2([n2, c2, "major"]), b2.CPU = p2(["architecture"]), b2.DEVICE = p2([o2, s2, a2, "console", l2, h2, u2, "wearable", "embedded"]), b2.ENGINE = b2.OS = p2([n2, c2]), t2.exports && (e2 = t2.exports = b2), e2.UAParser = b2;
        var w2 = void 0 !== i2 && (i2.jQuery || i2.Zepto);
        if (w2 && !w2.ua) {
          var x2 = new b2();
          w2.ua = x2.getResult(), w2.ua.get = function() {
            return x2.getUA();
          }, w2.ua.set = function(t3) {
            x2.setUA(t3);
            var e3 = x2.getResult();
            for (var i3 in e3)
              w2.ua[i3] = e3[i3];
          };
        }
      }("object" == typeof window ? window : this);
    }), yo = function(e2) {
      this.options = e2, this._UAParser = new vo(), t.bindAll(["_updateLogo"], this), t.bindAll(["_updateCompact"], this), this.Year = new Date().getFullYear();
    };
    yo.prototype.onAdd = function(t2) {
      if (this.isMob = "mobile" == this._UAParser.getDevice().type, this._map = t2, this._container = r.create("div", "sgmap-logo-wrap"), !this.isMob) {
        var e2 = r.create("p", "sgmap-logo-copyright");
        e2.innerText = "\xA9 " + this.Year + " \u4EBF\u529B\u5409\u5965 -GS(2022)192\u53F7 - \u7532\u6D4B\u8D44\u5B5735100192", this._container.appendChild(e2);
      }
      return this._map.on("resize", this._updateCompact), this._updateCompact(), this._container;
    }, yo.prototype.onRemove = function() {
      r.remove(this._container), this._map.off("resize", this._updateCompact);
    }, yo.prototype.getDefaultPosition = function() {
      return "bottom-left";
    }, yo.prototype._updateLogo = function(t2) {
      t2 && "metadata" !== t2.sourceDataType || (this._container.style.display = this._logoRequired() ? "block" : "none");
    }, yo.prototype._logoRequired = function() {
      if (this._map.style) {
        var t2 = this._map.style._sourceCaches;
        for (var e2 in t2)
          if (t2[e2].getSource().sgmap_logo)
            return true;
        return false;
      }
    }, yo.prototype._updateCompact = function() {
      var t2 = this._container.children;
      if (t2.length) {
        var e2 = t2[0];
        this._map.getCanvasContainer().offsetWidth < 250 ? e2.classList.add("sgmap-compact") : e2.classList.remove("sgmap-compact");
      }
    };
    var bo = function() {
      this._queue = [], this._id = 0, this._cleared = false, this._currentlyRunning = false;
    };
    bo.prototype.add = function(t2) {
      var e2 = ++this._id;
      return this._queue.push({ callback: t2, id: e2, cancelled: false }), e2;
    }, bo.prototype.remove = function(t2) {
      for (var e2 = this._currentlyRunning, i2 = 0, r2 = e2 ? this._queue.concat(e2) : this._queue; i2 < r2.length; i2 += 1) {
        var o2 = r2[i2];
        if (o2.id === t2)
          return void (o2.cancelled = true);
      }
    }, bo.prototype.run = function(t2) {
      void 0 === t2 && (t2 = 0);
      var e2 = this._currentlyRunning = this._queue;
      this._queue = [];
      for (var i2 = 0, r2 = e2; i2 < r2.length; i2 += 1) {
        var o2 = r2[i2];
        if (!o2.cancelled && (o2.callback(t2), this._cleared))
          break;
      }
      this._cleared = false, this._currentlyRunning = false;
    }, bo.prototype.clear = function() {
      this._currentlyRunning && (this._cleared = true), this._queue = [];
    };
    var wo = { "FullscreenControl.Enter": "Enter fullscreen", "FullscreenControl.Exit": "Exit fullscreen", "GeolocateControl.FindMyLocation": "Find my location", "GeolocateControl.LocationNotAvailable": "Location not available", "LogoControl.Title": "sgmap logo", "NavigationControl.ResetBearing": "Reset bearing to north", "NavigationControl.ZoomIn": "Zoom in", "NavigationControl.ZoomOut": "Zoom out", "ScaleControl.Feet": "ft", "ScaleControl.Meters": "m", "ScaleControl.Kilometers": "km", "ScaleControl.Miles": "mi", "ScaleControl.NauticalMiles": "nm" }, xo = t.window.HTMLImageElement, To = t.window.HTMLElement, So = t.window.ImageBitmap, Eo = { center: [0, 0], zoom: 0, bearing: 0, pitch: 0, minZoom: 1, maxZoom: 22, minPitch: 0, maxPitch: 60, interactive: true, scrollZoom: true, boxZoom: true, dragRotate: true, dragPan: true, keyboard: true, doubleClickZoom: true, touchZoomRotate: true, touchPitch: true, bearingSnap: 7, clickTolerance: 3, pitchWithRotate: true, hash: false, attributionControl: true, failIfMajorPerformanceCaveat: false, preserveDrawingBuffer: false, trackResize: true, renderWorldCopies: true, refreshExpiredTiles: true, maxTileCacheSize: null, localIdeographFontFamily: "sans-serif", localFontFamily: null, transformRequest: null, accessToken: null, fadeDuration: 300, crossSourceCollisions: true, crs: "EPSG:3857" };
    function Ao(t2) {
      t2.parentNode && t2.parentNode.removeChild(t2);
    }
    var ko = function(e2) {
      function i2(i3) {
        if (!t.config$1.ACCESS_TOKEN)
          throw new Error("\u8BF7\u53C2\u8003. See https://lbs.sgmap.cn/products/docs/#/guide/quick-quickstart \u8FDB\u884C\u767B\u9646\u540E\u83B7\u53D6\u8D44\u6E90");
        this._userLayerData = new t.UserLayerData(), e2.call(this, i3), this._userDatas = { layers: [], images: {} };
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.setStyle = function() {
        for (var t2 = [], i3 = arguments.length; i3--; )
          t2[i3] = arguments[i3];
        return t2[2] || this._userLayerData.clear(), e2.prototype.setStyle.apply(this, t2);
      }, i2.prototype.addSource = function() {
        for (var t2, i3 = [], r2 = arguments.length; r2--; )
          i3[r2] = arguments[r2];
        return (t2 = this._userLayerData).addSource.apply(t2, i3), e2.prototype.addSource.apply(this, i3);
      }, i2.prototype.removeSource = function() {
        for (var t2, i3 = [], r2 = arguments.length; r2--; )
          i3[r2] = arguments[r2];
        return (t2 = this._userLayerData).removeSource.apply(t2, i3), e2.prototype.removeSource.apply(this, i3);
      }, i2.prototype.removeImage = function() {
        for (var t2, i3 = [], r2 = arguments.length; r2--; )
          i3[r2] = arguments[r2];
        return (t2 = this._userLayerData).removeImage.apply(t2, i3), e2.prototype.removeImage.apply(this, i3);
      }, i2.prototype.setBaseStyle = function(t2, e3) {
        var i3 = this;
        return this._userLayerData.pre_getLayer(this), this._userLayerData.pre_getSource(this), this.once("style.load", function(t3) {
          i3._userLayerData.render(i3);
        }), this.setStyle(t2, e3, true);
      }, i2.prototype._loadStyle = function(e3, i3) {
        var r2 = this, o2 = this._requestManager.normalizeStyleURL(e3), n2 = this._requestManager.transformRequest(o2, t.ResourceType.Style);
        t.getJSON(n2, function(e4, o3) {
          e4 ? r2.fire(new t.ErrorEvent(e4)) : o3 && i3 && i3(o3);
        });
      }, i2.prototype.addLayer = function() {
        for (var t2, i3 = [], r2 = arguments.length; r2--; )
          i3[r2] = arguments[r2];
        var o2 = i3[0].id;
        return this._userDatas.layers.indexOf(o2) < 0 && this._userDatas.layers.push(o2), (t2 = this._userLayerData).addLayer.apply(t2, i3), e2.prototype.addLayer.apply(this, i3);
      }, i2.prototype.removeLayer = function() {
        for (var t2, i3 = [], r2 = arguments.length; r2--; )
          i3[r2] = arguments[r2];
        var o2 = i3[0], n2 = this._userDatas.layers.indexOf(o2);
        return n2 >= 0 && this._userDatas.layers.splice(n2, 1), (t2 = this._userLayerData).removeLayer.apply(t2, i3), e2.prototype.removeLayer.apply(this, i3);
      }, i2.prototype.addImage = function() {
        for (var t2, i3 = [], r2 = arguments.length; r2--; )
          i3[r2] = arguments[r2];
        var o2 = i3[0];
        return this._userDatas.images[o2] = i3, (t2 = this._userLayerData).addImage.apply(t2, i3), e2.prototype.addImage.apply(this, i3);
      }, i2.prototype.removeImage = function() {
        for (var t2 = [], i3 = arguments.length; i3--; )
          t2[i3] = arguments[i3];
        var r2 = t2[0];
        return delete this._userDatas.images[r2], e2.prototype.removeImage.apply(this, t2);
      }, i2.prototype._loadStyle = function(e3, i3) {
        var r2 = this, o2 = this._requestManager.normalizeStyleURL(e3), n2 = this._requestManager.transformRequest(o2, t.ResourceType.Style);
        t.getJSON(n2, function(e4, o3) {
          e4 ? r2.fire(new t.ErrorEvent(e4)) : o3 && i3 && i3(o3);
        });
      }, i2.prototype.setBaseMap = function(e3) {
        var i3 = this, r2 = i3.getStyle().layers, o2 = {}, n2 = i3.style;
        for (var a2 in r2.forEach(function(t2) {
          i3._userDatas.layers.indexOf(t2.id) < 0 && (n2.getLayer(t2.id) && n2.removeLayer(t2.id), o2[t2.source] = true);
        }), o2)
          n2.getSource(a2) && n2.removeSource(a2);
        i3.listImages().forEach(function(t2) {
          i3._userDatas.images[t2] || n2.imageManager.removeImage(t2);
        });
        var s2 = JSON.parse(JSON.stringify(n2._order)), c2 = function(e4) {
          for (var r3 = e4.layers.length - 1; r3 >= 0; r3--) {
            var o3 = e4.layers[r3];
            n2.addLayer(o3), s2.unshift(o3.id);
          }
          n2._order = s2, n2.fire(new t.Event("data", { dataType: "style" })), n2.fire(new t.Event("style.load")), i3._update(true);
        }, l2 = function(e4) {
          if (n2.stylesheet = e4, e4.glyphs && n2.glyphManager.setURL(e4.glyphs), e4.xml && n2.dispatcher.broadcast("setXml", e4.xml), n2.light = new g(n2.stylesheet.light), e4.sources)
            for (var i4 in e4.sources)
              n2.addSource(i4, e4.sources[i4]);
          e4.sprite ? n2._spriteRequest = p(e4.sprite, n2.map._requestManager, function(i5, r3) {
            if (n2._spriteRequest = null, i5)
              n2.fire(new t.ErrorEvent(i5));
            else if (r3) {
              for (var o3 in r3)
                n2.getImage(o3) || n2.addImage(o3, r3[o3]);
              c2(e4);
            }
          }) : c2(e4);
        };
        if ("string" == typeof e3) {
          var u2 = i3._requestManager.normalizeStyleURL(e3), h2 = i3._requestManager.transformRequest(u2, t.ResourceType.Style);
          n2._request = t.getJSON(h2, function(e4, i4) {
            n2._request = null, e4 ? n2.fire(new t.ErrorEvent(e4)) : i4 && l2(i4);
          });
        } else
          l2(e3);
      }, i2.prototype.addEleSymbolVertexs = function(t2, e3) {
        this.style.addEleSymbolVertexs(t2, e3);
      }, i2.prototype.addMask = function(t2) {
        if (t2)
          return t2 ? "geojson" != t2.type ? void console.warn("Error:\u8F93\u5165\u53C2\u6570\u5E94\u4E3AGeoJSON\u6570\u636E\u6E90") : this.hasMask() ? void console.warn("Error:\u5730\u56FE\u5DF2\u7ECF\u5B58\u5728\u906E\u7F69") : (t2.maxzoom || (t2.maxzoom = this.getMaxZoom()), this.style.addSource("__tileMask", t2), this.painter.addMaskBuffer("__tileMask"), this._update(true)) : void 0;
        console.warn("Error:\u8F93\u5165\u53C2\u6570\u4E0D\u80FD\u4E3A\u7A7A");
      }, i2.prototype.hasMask = function() {
        return !!this.style.getSource("__tileMask");
      }, i2.prototype.removeMask = function() {
        return this.hasMask() && (this.style.removeSource("__tileMask"), this.painter.removeMaskBuffer()), this._update(true);
      }, i2;
    }(function(i2) {
      function o2(e2) {
        var r2 = this;
        if (null != (e2 = t.extend({}, Eo, e2)).minZoom && null != e2.maxZoom && e2.minZoom > e2.maxZoom)
          throw new Error("maxZoom must be greater than or equal to minZoom");
        if (null != e2.minPitch && null != e2.maxPitch && e2.minPitch > e2.maxPitch)
          throw new Error("maxPitch must be greater than or equal to minPitch");
        if (null != e2.minPitch && e2.minPitch < 0)
          throw new Error("minPitch must be greater than or equal to 0");
        if (null != e2.maxPitch && e2.maxPitch > 60)
          throw new Error("maxPitch must be less than or equal to 60");
        var o3 = t.crs(e2);
        if (i2.call(this, o3, e2), this._interactive = e2.interactive, this._maxTileCacheSize = e2.maxTileCacheSize, this._failIfMajorPerformanceCaveat = e2.failIfMajorPerformanceCaveat, this._preserveDrawingBuffer = e2.preserveDrawingBuffer, this._antialias = e2.antialias, this._trackResize = e2.trackResize, this._bearingSnap = e2.bearingSnap, this._refreshExpiredTiles = e2.refreshExpiredTiles, this._fadeDuration = e2.fadeDuration, this._isInitialLoad = true, this._crossSourceCollisions = e2.crossSourceCollisions, this._crossFadingFactor = 1, this._collectResourceTiming = e2.collectResourceTiming, this._renderTaskQueue = new bo(), this._controls = [], this._mapId = t.uniqueId(), this._locale = t.extend({}, wo, e2.locale), this._requestManager = new t.RequestManager(e2.transformRequest, e2.accessToken), "string" == typeof e2.container) {
          if (this._container = t.window.document.getElementById(e2.container), !this._container)
            throw new Error("Container '" + e2.container + "' not found.");
        } else {
          if (!(e2.container instanceof To))
            throw new Error("Invalid type: 'container' must be a String or HTMLElement.");
          this._container = e2.container;
        }
        if (e2.maxBounds && this.setMaxBounds(e2.maxBounds), t.bindAll(["_onWindowOnline", "_onWindowResize", "_contextLost", "_contextRestored"], this), this._setupContainer(), this._setupPainter(), void 0 === this.painter)
          throw new Error("Failed to initialize WebGL.");
        this.on("move", function() {
          return r2._update(false);
        }), this.on("moveend", function() {
          return r2._update(false);
        }), this.on("zoom", function() {
          return r2._update(true);
        }), void 0 !== t.window && (t.window.addEventListener("online", this._onWindowOnline, false), t.window.addEventListener("resize", this._onWindowResize, false)), this.handlers = new _o(this, e2), this._hash = e2.hash && new Tr("string" == typeof e2.hash && e2.hash || void 0).addTo(this), this._hash && this._hash._onHashChange() || (this.jumpTo({ center: e2.center, zoom: e2.zoom, bearing: e2.bearing, pitch: e2.pitch }), e2.bounds && (this.resize(), this.fitBounds(e2.bounds, t.extend({}, e2.fitBoundsOptions, { duration: 0 })))), this.resize(), this._localFontFamily = e2.localFontFamily, this._localIdeographFontFamily = e2.localIdeographFontFamily, e2.style && this.setStyle(e2.style, { localFontFamily: this._localFontFamily, localIdeographFontFamily: e2.localIdeographFontFamily }), e2.attributionControl && this.addControl(new go({ customAttribution: e2.customAttribution })), this.addControl(new yo(), e2.logoPosition), this.on("style.load", function(e3) {
          r2.transform.unmodified && r2.jumpTo(r2.style.stylesheet), t.addWaterMarkLayer(r2);
        }), this.on("data", function(e3) {
          r2._update("style" === e3.dataType), r2.fire(new t.Event(e3.dataType + "data", e3));
        }), this.on("dataloading", function(e3) {
          r2.fire(new t.Event(e3.dataType + "dataloading", e3));
        });
      }
      i2 && (o2.__proto__ = i2), (o2.prototype = Object.create(i2 && i2.prototype)).constructor = o2;
      var n2 = { showTileBoundaries: { configurable: true }, showPadding: { configurable: true }, showCollisionBoxes: { configurable: true }, showOverdrawInspector: { configurable: true }, repaint: { configurable: true }, vertices: { configurable: true }, version: { configurable: true } };
      return o2.prototype._getMapId = function() {
        return this._mapId;
      }, o2.prototype.addControl = function(e2, i3) {
        if (void 0 === i3 && e2.getDefaultPosition && (i3 = e2.getDefaultPosition()), void 0 === i3 && (i3 = "top-right"), !e2 || !e2.onAdd)
          return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
        var r2 = e2.onAdd(this);
        this._controls.push(e2);
        var o3 = this._controlPositions[i3];
        return -1 !== i3.indexOf("bottom") ? o3.insertBefore(r2, o3.firstChild) : o3.appendChild(r2), this;
      }, o2.prototype.removeControl = function(e2) {
        if (!e2 || !e2.onRemove)
          return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));
        var i3 = this._controls.indexOf(e2);
        return i3 > -1 && this._controls.splice(i3, 1), e2.onRemove(this), this;
      }, o2.prototype.resize = function(e2) {
        var i3 = this._containerDimensions(), r2 = i3[0], o3 = i3[1];
        this._resizeCanvas(r2, o3), this.transform.resize(r2, o3), this.painter.resize(r2, o3);
        var n3 = !this._moving;
        return n3 && (this.stop(), this.fire(new t.Event("movestart", e2)).fire(new t.Event("move", e2))), this.fire(new t.Event("resize", e2)), n3 && this.fire(new t.Event("moveend", e2)), this;
      }, o2.prototype.getBounds = function() {
        return this.transform.getBounds();
      }, o2.prototype.getMaxBounds = function() {
        return this.transform.getMaxBounds();
      }, o2.prototype.setMaxBounds = function(e2) {
        return this.transform.setMaxBounds(t.LngLatBounds.convert(e2)), this._update();
      }, o2.prototype.setMinZoom = function(t2) {
        if ((t2 = null == t2 ? 1 : t2) >= 1 && t2 <= this.transform.maxZoom)
          return this.transform.minZoom = t2, this._update(), this.getZoom() < t2 && this.setZoom(t2), this;
        throw new Error("minZoom must be between 1 and the current maxZoom, inclusive");
      }, o2.prototype.getMinZoom = function() {
        return this.transform.minZoom;
      }, o2.prototype.setMaxZoom = function(t2) {
        if ((t2 = null == t2 ? 22 : t2) >= this.transform.minZoom)
          return this.transform.maxZoom = t2, this._update(), this.getZoom() > t2 && this.setZoom(t2), this;
        throw new Error("maxZoom must be greater than the current minZoom");
      }, o2.prototype.getMaxZoom = function() {
        return this.transform.maxZoom;
      }, o2.prototype.setMinPitch = function(t2) {
        if ((t2 = null == t2 ? 0 : t2) < 0)
          throw new Error("minPitch must be greater than or equal to 0");
        if (t2 >= 0 && t2 <= this.transform.maxPitch)
          return this.transform.minPitch = t2, this._update(), this.getPitch() < t2 && this.setPitch(t2), this;
        throw new Error("minPitch must be between 0 and the current maxPitch, inclusive");
      }, o2.prototype.getMinPitch = function() {
        return this.transform.minPitch;
      }, o2.prototype.setMaxPitch = function(t2) {
        if ((t2 = null == t2 ? 60 : t2) > 60)
          throw new Error("maxPitch must be less than or equal to 60");
        if (t2 >= this.transform.minPitch)
          return this.transform.maxPitch = t2, this._update(), this.getPitch() > t2 && this.setPitch(t2), this;
        throw new Error("maxPitch must be greater than the current minPitch");
      }, o2.prototype.getMaxPitch = function() {
        return this.transform.maxPitch;
      }, o2.prototype.getRenderWorldCopies = function() {
        return this.transform.renderWorldCopies;
      }, o2.prototype.setRenderWorldCopies = function(t2) {
        return this.transform.renderWorldCopies = t2, this._update();
      }, o2.prototype.project = function(e2) {
        return this.transform.locationPoint(t.LngLat.convert(e2));
      }, o2.prototype.unproject = function(e2) {
        return this.transform.pointLocation(t.Point.convert(e2));
      }, o2.prototype.isMoving = function() {
        return this._moving || this.handlers.isMoving();
      }, o2.prototype.isZooming = function() {
        return this._zooming || this.handlers.isZooming();
      }, o2.prototype.isRotating = function() {
        return this._rotating || this.handlers.isRotating();
      }, o2.prototype._createDelegatedListener = function(t2, e2, i3) {
        var r2, o3 = this;
        if ("mouseenter" === t2 || "mouseover" === t2) {
          var n3 = false;
          return { layer: e2, listener: i3, delegates: { mousemove: function(r3) {
            var a3 = o3.getLayer(e2) ? o3.queryRenderedFeatures(r3.point, { layers: [e2] }) : [];
            a3.length ? n3 || (n3 = true, i3.call(o3, new zr(t2, o3, r3.originalEvent, { features: a3 }))) : n3 = false;
          }, mouseout: function() {
            n3 = false;
          } } };
        }
        if ("mouseleave" === t2 || "mouseout" === t2) {
          var a2 = false;
          return { layer: e2, listener: i3, delegates: { mousemove: function(r3) {
            (o3.getLayer(e2) ? o3.queryRenderedFeatures(r3.point, { layers: [e2] }) : []).length ? a2 = true : a2 && (a2 = false, i3.call(o3, new zr(t2, o3, r3.originalEvent)));
          }, mouseout: function(e3) {
            a2 && (a2 = false, i3.call(o3, new zr(t2, o3, e3.originalEvent)));
          } } };
        }
        return { layer: e2, listener: i3, delegates: (r2 = {}, r2[t2] = function(t3) {
          var r3 = o3.getLayer(e2) ? o3.queryRenderedFeatures(t3.point, { layers: [e2] }) : [];
          r3.length && (t3.features = r3, i3.call(o3, t3), delete t3.features);
        }, r2) };
      }, o2.prototype.on = function(t2, e2, r2) {
        if (void 0 === r2)
          return i2.prototype.on.call(this, t2, e2);
        var o3 = this._createDelegatedListener(t2, e2, r2);
        for (var n3 in this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[t2] = this._delegatedListeners[t2] || [], this._delegatedListeners[t2].push(o3), o3.delegates)
          this.on(n3, o3.delegates[n3]);
        return this;
      }, o2.prototype.once = function(t2, e2, r2) {
        if (void 0 === r2)
          return i2.prototype.once.call(this, t2, e2);
        var o3 = this._createDelegatedListener(t2, e2, r2);
        for (var n3 in o3.delegates)
          this.once(n3, o3.delegates[n3]);
        return this;
      }, o2.prototype.off = function(t2, e2, r2) {
        var o3 = this;
        return void 0 === r2 ? i2.prototype.off.call(this, t2, e2) : (this._delegatedListeners && this._delegatedListeners[t2] && function(i3) {
          for (var n3 = i3[t2], a2 = 0; a2 < n3.length; a2++) {
            var s2 = n3[a2];
            if (s2.layer === e2 && s2.listener === r2) {
              for (var c2 in s2.delegates)
                o3.off(c2, s2.delegates[c2]);
              return n3.splice(a2, 1), o3;
            }
          }
        }(this._delegatedListeners), this);
      }, o2.prototype.queryRenderedFeatures = function(e2, i3) {
        if (!this.style)
          return [];
        var r2;
        if (void 0 !== i3 || void 0 === e2 || e2 instanceof t.Point || Array.isArray(e2) || (i3 = e2, e2 = void 0), i3 = i3 || {}, (e2 = e2 || [[0, 0], [this.transform.width, this.transform.height]]) instanceof t.Point || "number" == typeof e2[0])
          r2 = [t.Point.convert(e2)];
        else {
          var o3 = t.Point.convert(e2[0]), n3 = t.Point.convert(e2[1]);
          r2 = [o3, new t.Point(n3.x, o3.y), n3, new t.Point(o3.x, n3.y), o3];
        }
        return this.style.queryRenderedFeatures(r2, i3, this.transform);
      }, o2.prototype.querySourceFeatures = function(t2, e2) {
        return this.style.querySourceFeatures(t2, e2);
      }, o2.prototype.setStyle = function(e2, i3) {
        return false !== (i3 = t.extend({}, { localIdeographFontFamily: this._localIdeographFontFamily, localFontFamily: this._localFontFamily }, i3)).diff && i3.localIdeographFontFamily === this._localIdeographFontFamily && i3.localFontFamily === this._localFontFamily && this.style && e2 ? (this._diffStyle(e2, i3), this) : (this._localIdeographFontFamily = i3.localIdeographFontFamily, this._localFontFamily = i3.localFontFamily, this._updateStyle(e2, i3));
      }, o2.prototype._getUIString = function(t2) {
        var e2 = this._locale[t2];
        if (null == e2)
          throw new Error("Missing UI string '" + t2 + "'");
        return e2;
      }, o2.prototype._updateStyle = function(t2, e2) {
        return this.style && (this.style.setEventedParent(null), this.style._remove()), t2 ? (this.style = new Ue(this, e2 || {}), this.style.setEventedParent(this, { style: this.style }), "string" == typeof t2 ? this.style.loadURL(t2) : this.style.loadJSON(t2), this) : (delete this.style, this);
      }, o2.prototype._lazyInitEmptyStyle = function() {
        this.style || (this.style = new Ue(this, {}), this.style.setEventedParent(this, { style: this.style }), this.style.loadEmpty());
      }, o2.prototype._diffStyle = function(e2, i3) {
        var r2 = this;
        if ("string" == typeof e2) {
          var o3 = this._requestManager.normalizeStyleURL(e2), n3 = this._requestManager.transformRequest(o3, t.ResourceType.Style);
          t.getJSON(n3, function(e3, o4) {
            e3 ? r2.fire(new t.ErrorEvent(e3)) : o4 && r2._updateDiff(o4, i3);
          });
        } else
          "object" == typeof e2 && this._updateDiff(e2, i3);
      }, o2.prototype._updateDiff = function(e2, i3) {
        try {
          this.style.setState(e2, i3) && (JSON.stringify(e2.xml) == JSON.stringify(this.getStyle().xml) ? (i3.diff = false, this._updateStyle(e2, i3)) : this._update(true));
        } catch (r2) {
          t.warnOnce("Unable to perform style diff: " + (r2.message || r2.error || r2) + ".  Rebuilding the style from scratch."), this._updateStyle(e2, i3);
        }
      }, o2.prototype.getStyle = function() {
        if (this.style)
          return this.style.serialize();
      }, o2.prototype.isStyleLoaded = function() {
        return this.style ? this.style.loaded() : t.warnOnce("There is no style added to the map.");
      }, o2.prototype.addSource = function(t2, e2) {
        return this._lazyInitEmptyStyle(), this.style.addSource(t2, e2), this._update(true);
      }, o2.prototype.isSourceLoaded = function(e2) {
        if (0 !== (this.style && this.style._getSourceCaches(e2)).length)
          return source.loaded();
        this.fire(new t.ErrorEvent(new Error("There is no source with ID '" + e2 + "'")));
      }, o2.prototype.areTilesLoaded = function() {
        var t2 = this.style && this.style._sourceCaches;
        for (var e2 in t2) {
          var i3 = t2[e2]._tiles;
          for (var r2 in i3) {
            var o3 = i3[r2];
            if ("loaded" !== o3.state && "errored" !== o3.state)
              return false;
          }
        }
        return true;
      }, o2.prototype.addSourceType = function(t2, e2, i3) {
        return this._lazyInitEmptyStyle(), this.style.addSourceType(t2, e2, i3);
      }, o2.prototype.removeSource = function(t2) {
        return this.style.removeSource(t2), this._update(true);
      }, o2.prototype.getSource = function(t2) {
        return this.style.getSource(t2);
      }, o2.prototype.addImage = function(e2, i3, r2) {
        void 0 === r2 && (r2 = {});
        var o3 = r2.pixelRatio;
        void 0 === o3 && (o3 = 1);
        var n3 = r2.sdf;
        void 0 === n3 && (n3 = false);
        var a2 = r2.stretchX, s2 = r2.stretchY, c2 = r2.content;
        if (this._lazyInitEmptyStyle(), i3 instanceof xo || So && i3 instanceof So) {
          var l2 = t.browser.getImageData(i3);
          this.style.addImage(e2, { data: new t.RGBAImage({ width: l2.width, height: l2.height }, l2.data), pixelRatio: o3, stretchX: a2, stretchY: s2, content: c2, sdf: n3, version: 0 });
        } else {
          if (void 0 === i3.width || void 0 === i3.height)
            return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
          var u2 = i3;
          this.style.addImage(e2, { data: new t.RGBAImage({ width: i3.width, height: i3.height }, new Uint8Array(i3.data)), pixelRatio: o3, stretchX: a2, stretchY: s2, content: c2, sdf: n3, version: 0, userImage: u2 }), u2.onAdd && u2.onAdd(this, e2);
        }
      }, o2.prototype.updateImage = function(e2, i3) {
        var r2 = this.style.getImage(e2);
        if (!r2)
          return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));
        var o3 = i3 instanceof xo || So && i3 instanceof So ? t.browser.getImageData(i3) : i3, n3 = o3.width, a2 = o3.height, s2 = o3.data;
        return void 0 === n3 || void 0 === a2 ? this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))) : n3 !== r2.data.width || a2 !== r2.data.height ? this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))) : (r2.data.replace(s2, !(i3 instanceof xo || So && i3 instanceof So)), void this.style.updateImage(e2, r2));
      }, o2.prototype.hasImage = function(e2) {
        return e2 ? !!this.style.getImage(e2) : (this.fire(new t.ErrorEvent(new Error("Missing required image id"))), false);
      }, o2.prototype.removeImage = function(t2) {
        this.style.removeImage(t2);
      }, o2.prototype.loadImage = function(e2, i3) {
        t.getImage(this._requestManager.transformRequest(e2, t.ResourceType.Image), i3);
      }, o2.prototype.listImages = function() {
        return this.style.listImages();
      }, o2.prototype.addLayer = function(t2, e2) {
        return this._lazyInitEmptyStyle(), this.style.addLayer(t2, e2), this._update(true);
      }, o2.prototype.moveLayer = function(t2, e2) {
        return this.style.moveLayer(t2, e2), this._update(true);
      }, o2.prototype.removeLayer = function(t2) {
        return this.style.removeLayer(t2), this._update(true);
      }, o2.prototype.getLayer = function(t2) {
        return this.style.getLayer(t2);
      }, o2.prototype.setLayerZoomRange = function(t2, e2, i3) {
        return this.style.setLayerZoomRange(t2, e2, i3), this._update(true);
      }, o2.prototype.setFilter = function(t2, e2, i3) {
        return void 0 === i3 && (i3 = {}), this.style.setFilter(t2, e2, i3), this._update(true);
      }, o2.prototype.getFilter = function(t2) {
        return this.style.getFilter(t2);
      }, o2.prototype.setPaintProperty = function(t2, e2, i3, r2) {
        return void 0 === r2 && (r2 = {}), this.style.setPaintProperty(t2, e2, i3, r2), this._update(true);
      }, o2.prototype.getPaintProperty = function(t2, e2) {
        return this.style.getPaintProperty(t2, e2);
      }, o2.prototype.setLayoutProperty = function(t2, e2, i3, r2) {
        return void 0 === r2 && (r2 = {}), this.style.setLayoutProperty(t2, e2, i3, r2), this._update(true);
      }, o2.prototype.getLayoutProperty = function(t2, e2) {
        return this.style.getLayoutProperty(t2, e2);
      }, o2.prototype.setLight = function(t2, e2) {
        return void 0 === e2 && (e2 = {}), this._lazyInitEmptyStyle(), this.style.setLight(t2, e2), this._update(true);
      }, o2.prototype.getLight = function() {
        return this.style.getLight();
      }, o2.prototype.setFeatureState = function(t2, e2) {
        return this.style.setFeatureState(t2, e2), this._update();
      }, o2.prototype.removeFeatureState = function(t2, e2) {
        return this.style.removeFeatureState(t2, e2), this._update();
      }, o2.prototype.getFeatureState = function(t2) {
        return this.style.getFeatureState(t2);
      }, o2.prototype.getContainer = function() {
        return this._container;
      }, o2.prototype.getCanvasContainer = function() {
        return this._canvasContainer;
      }, o2.prototype.getCanvas = function() {
        return this._canvas;
      }, o2.prototype._containerDimensions = function() {
        var t2 = 0, e2 = 0;
        return this._container && (t2 = this._container.clientWidth || 400, e2 = this._container.clientHeight || 300), [t2, e2];
      }, o2.prototype._detectMissingCSS = function() {
        "rgb(250, 128, 114)" !== t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color") && t.warnOnce("This page appears to be missing CSS declarations for sgmap JS, which may cause the map to display incorrectly. Please ensure your page includes sgmap.css, as described in https://www.sgmap.com/sgmap-js/api/.");
      }, o2.prototype._setupContainer = function() {
        var t2 = this._container;
        t2.classList.add("sgmap-map"), (this._missingCSSCanary = r.create("div", "sgmap-canary", t2)).style.visibility = "hidden", this._detectMissingCSS();
        var e2 = this._canvasContainer = r.create("div", "sgmap-canvas-container", t2);
        this._interactive && e2.classList.add("sgmap-interactive"), this._canvas = r.create("canvas", "sgmap-canvas", e2), this._canvas.addEventListener("webglcontextlost", this._contextLost, false), this._canvas.addEventListener("webglcontextrestored", this._contextRestored, false), this._canvas.setAttribute("tabindex", "0"), this._canvas.setAttribute("aria-label", "Map");
        var i3 = this._containerDimensions();
        this._resizeCanvas(i3[0], i3[1]);
        var o3 = this._controlContainer = r.create("div", "sgmap-control-container", t2), n3 = this._controlPositions = {};
        ["top-left", "top-right", "bottom-left", "bottom-right"].forEach(function(t3) {
          n3[t3] = r.create("div", "sgmap-ctrl-" + t3, o3);
        });
      }, o2.prototype._resizeCanvas = function(e2, i3) {
        var r2 = t.browser.devicePixelRatio || 1;
        this._canvas.width = r2 * e2, this._canvas.height = r2 * i3, this._canvas.style.width = e2 + "px", this._canvas.style.height = i3 + "px";
      }, o2.prototype._setupPainter = function() {
        var i3 = t.extend({}, e.webGLContextAttributes, { failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat, preserveDrawingBuffer: this._preserveDrawingBuffer, antialias: this._antialias || false }), r2 = this._canvas.getContext("webgl", i3) || this._canvas.getContext("experimental-webgl", i3);
        r2 ? (this.painter = new xr(r2, this.transform), t.webpSupported.testSupport(r2)) : this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));
      }, o2.prototype._contextLost = function(e2) {
        e2.preventDefault(), this._frame && (this._frame.cancel(), this._frame = null), this.fire(new t.Event("webglcontextlost", { originalEvent: e2 }));
      }, o2.prototype._contextRestored = function(e2) {
        this._setupPainter(), this.resize(), this._update(), this.fire(new t.Event("webglcontextrestored", { originalEvent: e2 }));
      }, o2.prototype.loaded = function() {
        return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded();
      }, o2.prototype._update = function(t2) {
        return this.style ? (this._styleDirty = this._styleDirty || t2, this._sourcesDirty = true, this.triggerRepaint(), this) : this;
      }, o2.prototype._requestRenderFrame = function(t2) {
        return this._update(), this._renderTaskQueue.add(t2);
      }, o2.prototype._cancelRenderFrame = function(t2) {
        this._renderTaskQueue.remove(t2);
      }, o2.prototype._render = function(e2) {
        var i3, r2 = this, o3 = 0, n3 = this.painter.context.extTimerQuery;
        if (this.listens("gpu-timing-frame") && (i3 = n3.createQueryEXT(), n3.beginQueryEXT(n3.TIME_ELAPSED_EXT, i3), o3 = t.browser.now()), this.painter.context.setDirty(), this.painter.setBaseState(), this._renderTaskQueue.run(e2), !this._removed) {
          var a2 = false, s2 = this._isInitialLoad ? 0 : this._fadeDuration;
          if (this.style && this._styleDirty) {
            this._styleDirty = false;
            var c2 = this.transform.zoom, l2 = t.browser.now();
            this.style.zoomHistory.update(c2, l2);
            var u2 = new t.EvaluationParameters(c2, { now: l2, fadeDuration: s2, zoomHistory: this.style.zoomHistory, transition: this.style.getTransition() }), h2 = u2.crossFadingFactor();
            1 === h2 && h2 === this._crossFadingFactor || (a2 = true, this._crossFadingFactor = h2), this.style.update(u2);
          }
          if (this.style && this._sourcesDirty && (this._sourcesDirty = false, this.style._updateSources(this.transform)), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, s2, this._crossSourceCollisions), this.painter.render(this.style, { showTileBoundaries: this.showTileBoundaries, showOverdrawInspector: this._showOverdrawInspector, rotating: this.isRotating(), zooming: this.isZooming(), moving: this.isMoving(), fadeDuration: s2, showPadding: this.showPadding, gpuTiming: !!this.listens("gpu-timing-layer") }), this.fire(new t.Event("render")), this.loaded() && !this._loaded && (this._loaded = true, this.fire(new t.Event("load"))), this.style && (this.style.hasTransitions() || a2) && (this._styleDirty = true), this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles(), this.listens("gpu-timing-frame")) {
            var p2 = t.browser.now() - o3;
            n3.endQueryEXT(n3.TIME_ELAPSED_EXT, i3), setTimeout(function() {
              var e3 = n3.getQueryObjectEXT(i3, n3.QUERY_RESULT_EXT) / 1e6;
              n3.deleteQueryEXT(i3), r2.fire(new t.Event("gpu-timing-frame", { cpuTime: p2, gpuTime: e3 }));
            }, 50);
          }
          if (this.listens("gpu-timing-layer")) {
            var f2 = this.painter.collectGpuTimers();
            setTimeout(function() {
              var e3 = r2.painter.queryGpuTimers(f2);
              r2.fire(new t.Event("gpu-timing-layer", { layerTimes: e3 }));
            }, 50);
          }
          return this._sourcesDirty || this._styleDirty || this._placementDirty || this._repaint ? this.triggerRepaint() : !this.isMoving() && this.loaded() && (this._fullyLoaded || (this._fullyLoaded = true), this._triggerFrame(false), this.fire(new t.Event("idle")), this._isInitialLoad = false, t.window.beginTime && console.log("\u52A0\u8F7D\u65F6\u95F4\uFF1A", new Date().getTime() - t.window.beginTime)), this;
        }
      }, o2.prototype.remove = function() {
        this._hash && this._hash.remove();
        for (var e2 = 0, i3 = this._controls; e2 < i3.length; e2 += 1)
          i3[e2].onRemove(this);
        this._controls = [], this._frame && (this._frame.cancel(), this._frame = null), this._renderTaskQueue.clear(), this.painter.destroy(), this.handlers.destroy(), delete this.handlers, this.setStyle(null), void 0 !== t.window && (t.window.removeEventListener("resize", this._onWindowResize, false), t.window.removeEventListener("online", this._onWindowOnline, false));
        var r2 = this.painter.context.gl.getExtension("WEBGL_lose_context");
        r2 && r2.loseContext(), Ao(this._canvasContainer), Ao(this._controlContainer), Ao(this._missingCSSCanary), this._container.classList.remove("sgmap-map"), this._removed = true, this.fire(new t.Event("remove"));
      }, o2.prototype.triggerRepaint = function() {
        this._triggerFrame(true);
      }, o2.prototype._triggerFrame = function(e2) {
        var i3 = this;
        this._renderNextFrame = this._renderNextFrame || e2, this.style && !this._frame && (this._frame = t.browser.frame(function(t2) {
          var e3 = !!i3._renderNextFrame;
          i3._frame = null, i3._renderNextFrame = null, e3 && i3._render(t2);
        }));
      }, o2.prototype._onWindowOnline = function() {
        this._update();
      }, o2.prototype._onWindowResize = function(t2) {
        this._trackResize && this.resize({ originalEvent: t2 })._update();
      }, n2.showTileBoundaries.get = function() {
        return !!this._showTileBoundaries;
      }, n2.showTileBoundaries.set = function(t2) {
        this._showTileBoundaries !== t2 && (this._showTileBoundaries = t2, this._update());
      }, n2.showPadding.get = function() {
        return !!this._showPadding;
      }, n2.showPadding.set = function(t2) {
        this._showPadding !== t2 && (this._showPadding = t2, this._update());
      }, n2.showCollisionBoxes.get = function() {
        return !!this._showCollisionBoxes;
      }, n2.showCollisionBoxes.set = function(t2) {
        this._showCollisionBoxes !== t2 && (this._showCollisionBoxes = t2, t2 ? this.style._generateCollisionBoxes() : this._update());
      }, n2.showOverdrawInspector.get = function() {
        return !!this._showOverdrawInspector;
      }, n2.showOverdrawInspector.set = function(t2) {
        this._showOverdrawInspector !== t2 && (this._showOverdrawInspector = t2, this._update());
      }, n2.repaint.get = function() {
        return !!this._repaint;
      }, n2.repaint.set = function(t2) {
        this._repaint !== t2 && (this._repaint = t2, this.triggerRepaint());
      }, n2.vertices.get = function() {
        return !!this._vertices;
      }, n2.vertices.set = function(t2) {
        this._vertices = t2, this._update();
      }, o2.prototype._setCacheLimits = function(e2, i3) {
        t.setCacheLimits(e2, i3);
      }, n2.version.get = function() {
        return t.version;
      }, Object.defineProperties(o2.prototype, n2), o2;
    }(mo)), Io = { showCompass: true, showZoom: true, visualizePitch: false }, Bo = function(e2) {
      var i2 = this;
      this.options = t.extend({}, Io, e2), this._container = r.create("div", "sgmap-ctrl sgmap-ctrl-group"), this._container.addEventListener("contextmenu", function(t2) {
        return t2.preventDefault();
      }), this.options.showZoom && (t.bindAll(["_setButtonTitle", "_updateZoomButtons"], this), this._zoomInButton = this._createButton("sgmap-ctrl-zoom-in", function(t2) {
        return i2._map.zoomIn({}, { originalEvent: t2 });
      }), r.create("span", "sgmap-ctrl-icon", this._zoomInButton).setAttribute("aria-hidden", true), this._zoomOutButton = this._createButton("sgmap-ctrl-zoom-out", function(t2) {
        return i2._map.zoomOut({}, { originalEvent: t2 });
      }), r.create("span", "sgmap-ctrl-icon", this._zoomOutButton).setAttribute("aria-hidden", true)), this.options.showCompass && (t.bindAll(["_rotateCompassArrow"], this), this._compass = this._createButton("sgmap-ctrl-compass", function(t2) {
        i2.options.visualizePitch ? i2._map.resetNorthPitch({}, { originalEvent: t2 }) : i2._map.resetNorth({}, { originalEvent: t2 });
      }), this._compassIcon = r.create("span", "sgmap-ctrl-icon", this._compass), this._compassIcon.setAttribute("aria-hidden", true));
    };
    Bo.prototype._updateZoomButtons = function() {
      var t2 = this._map.getZoom();
      this._zoomInButton.disabled = t2 === this._map.getMaxZoom(), this._zoomOutButton.disabled = t2 === this._map.getMinZoom();
    }, Bo.prototype._rotateCompassArrow = function() {
      var t2 = this.options.visualizePitch ? "scale(" + 1 / Math.pow(Math.cos(this._map.transform.pitch * (Math.PI / 180)), 0.5) + ") rotateX(" + this._map.transform.pitch + "deg) rotateZ(" + this._map.transform.angle * (180 / Math.PI) + "deg)" : "rotate(" + this._map.transform.angle * (180 / Math.PI) + "deg)";
      this._compassIcon.style.transform = t2;
    }, Bo.prototype.onAdd = function(t2) {
      return this._map = t2, this.options.showZoom && (this._setButtonTitle(this._zoomInButton, "ZoomIn"), this._setButtonTitle(this._zoomOutButton, "ZoomOut"), this._map.on("zoom", this._updateZoomButtons), this._updateZoomButtons()), this.options.showCompass && (this._setButtonTitle(this._compass, "ResetBearing"), this.options.visualizePitch && this._map.on("pitch", this._rotateCompassArrow), this._map.on("rotate", this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new Po(this._map, this._compass, this.options.visualizePitch)), this._container;
    }, Bo.prototype.onRemove = function() {
      r.remove(this._container), this.options.showZoom && this._map.off("zoom", this._updateZoomButtons), this.options.showCompass && (this.options.visualizePitch && this._map.off("pitch", this._rotateCompassArrow), this._map.off("rotate", this._rotateCompassArrow), this._handler.off(), delete this._handler), delete this._map;
    }, Bo.prototype._createButton = function(t2, e2) {
      var i2 = r.create("button", t2, this._container);
      return i2.type = "button", i2.addEventListener("click", e2), i2;
    }, Bo.prototype._setButtonTitle = function(t2, e2) {
      var i2 = this._map._getUIString("NavigationControl." + e2);
      t2.title = i2, t2.setAttribute("aria-label", i2);
    };
    var Po = function(e2, i2, o2) {
      void 0 === o2 && (o2 = false), this._clickTolerance = 10, this.element = i2, this.mouseRotate = new Zr({ clickTolerance: e2.dragRotate._mouseRotate._clickTolerance }), this.map = e2, o2 && (this.mousePitch = new Gr({ clickTolerance: e2.dragRotate._mousePitch._clickTolerance })), t.bindAll(["mousedown", "mousemove", "mouseup", "touchstart", "touchmove", "touchend", "reset"], this), r.addEventListener(i2, "mousedown", this.mousedown), r.addEventListener(i2, "touchstart", this.touchstart, { passive: false }), r.addEventListener(i2, "touchmove", this.touchmove), r.addEventListener(i2, "touchend", this.touchend), r.addEventListener(i2, "touchcancel", this.reset);
    };
    function Co(e2, i2, r2) {
      if (e2 = new t.LngLat(e2.lng, e2.lat), i2) {
        var o2 = new t.LngLat(e2.lng - 360, e2.lat), n2 = new t.LngLat(e2.lng + 360, e2.lat), a2 = r2.locationPoint(e2).distSqr(i2);
        r2.locationPoint(o2).distSqr(i2) < a2 ? e2 = o2 : r2.locationPoint(n2).distSqr(i2) < a2 && (e2 = n2);
      }
      for (; Math.abs(e2.lng - r2.center.lng) > 180; ) {
        var s2 = r2.locationPoint(e2);
        if (s2.x >= 0 && s2.y >= 0 && s2.x <= r2.width && s2.y <= r2.height)
          break;
        e2.lng > r2.center.lng ? e2.lng -= 360 : e2.lng += 360;
      }
      return e2;
    }
    Po.prototype.down = function(t2, e2) {
      this.mouseRotate.mousedown(t2, e2), this.mousePitch && this.mousePitch.mousedown(t2, e2), r.disableDrag();
    }, Po.prototype.move = function(t2, e2) {
      var i2 = this.map, r2 = this.mouseRotate.mousemoveWindow(t2, e2);
      if (r2 && r2.bearingDelta && i2.setBearing(i2.getBearing() + r2.bearingDelta), this.mousePitch) {
        var o2 = this.mousePitch.mousemoveWindow(t2, e2);
        o2 && o2.pitchDelta && i2.setPitch(i2.getPitch() + o2.pitchDelta);
      }
    }, Po.prototype.off = function() {
      var t2 = this.element;
      r.removeEventListener(t2, "mousedown", this.mousedown), r.removeEventListener(t2, "touchstart", this.touchstart, { passive: false }), r.removeEventListener(t2, "touchmove", this.touchmove), r.removeEventListener(t2, "touchend", this.touchend), r.removeEventListener(t2, "touchcancel", this.reset), this.offTemp();
    }, Po.prototype.offTemp = function() {
      r.enableDrag(), r.removeEventListener(t.window, "mousemove", this.mousemove), r.removeEventListener(t.window, "mouseup", this.mouseup);
    }, Po.prototype.mousedown = function(e2) {
      this.down(t.extend({}, e2, { ctrlKey: true, preventDefault: function() {
        return e2.preventDefault();
      } }), r.mousePos(this.element, e2)), r.addEventListener(t.window, "mousemove", this.mousemove), r.addEventListener(t.window, "mouseup", this.mouseup);
    }, Po.prototype.mousemove = function(t2) {
      this.move(t2, r.mousePos(this.element, t2));
    }, Po.prototype.mouseup = function(t2) {
      this.mouseRotate.mouseupWindow(t2), this.mousePitch && this.mousePitch.mouseupWindow(t2), this.offTemp();
    }, Po.prototype.touchstart = function(t2) {
      1 !== t2.targetTouches.length ? this.reset() : (this._startPos = this._lastPos = r.touchPos(this.element, t2.targetTouches)[0], this.down({ type: "mousedown", button: 0, ctrlKey: true, preventDefault: function() {
        return t2.preventDefault();
      } }, this._startPos));
    }, Po.prototype.touchmove = function(t2) {
      1 !== t2.targetTouches.length ? this.reset() : (this._lastPos = r.touchPos(this.element, t2.targetTouches)[0], this.move({ preventDefault: function() {
        return t2.preventDefault();
      } }, this._lastPos));
    }, Po.prototype.touchend = function(t2) {
      0 === t2.targetTouches.length && this._startPos && this._lastPos && this._startPos.dist(this._lastPos) < this._clickTolerance && this.element.click(), this.reset();
    }, Po.prototype.reset = function() {
      this.mouseRotate.reset(), this.mousePitch && this.mousePitch.reset(), delete this._startPos, delete this._lastPos, this.offTemp();
    };
    var zo = { center: "translate(-50%,-50%)", top: "translate(-50%,0)", "top-left": "translate(0,0)", "top-right": "translate(-100%,0)", bottom: "translate(-50%,-100%)", "bottom-left": "translate(0,-100%)", "bottom-right": "translate(-100%,-100%)", left: "translate(0,-50%)", right: "translate(-100%,-50%)" };
    function Do(t2, e2, i2) {
      var r2 = t2.classList;
      for (var o2 in zo)
        r2.remove("sgmap-" + i2 + "-anchor-" + o2);
      r2.add("sgmap-" + i2 + "-anchor-" + e2);
    }
    var Mo, Lo = function(e2) {
      function i2(i3, o2) {
        var n2 = this;
        if (e2.call(this), (i3 instanceof t.window.HTMLElement || o2) && (i3 = t.extend({ element: i3 }, o2)), t.bindAll(["_update", "_onMove", "_onUp", "_addDragHandler", "_onMapClick", "_onKeyPress"], this), this._anchor = i3 && i3.anchor || "center", this._color = i3 && i3.color || "#3FB1CE", this._draggable = i3 && i3.draggable || false, this._state = "inactive", this._rotation = i3 && i3.rotation || 0, this._rotationAlignment = i3 && i3.rotationAlignment || "auto", this._pitchAlignment = i3 && i3.pitchAlignment && "auto" !== i3.pitchAlignment ? i3.pitchAlignment : this._rotationAlignment, i3 && i3.element)
          this._element = i3.element, this._offset = t.Point.convert(i3 && i3.offset || [0, 0]);
        else {
          this._defaultMarker = true, this._element = r.create("div"), this._element.setAttribute("aria-label", "Map marker");
          var a2 = r.createNS("http://www.w3.org/2000/svg", "svg");
          a2.setAttributeNS(null, "display", "block"), a2.setAttributeNS(null, "height", "41px"), a2.setAttributeNS(null, "width", "27px"), a2.setAttributeNS(null, "viewBox", "0 0 27 41");
          var s2 = r.createNS("http://www.w3.org/2000/svg", "g");
          s2.setAttributeNS(null, "stroke", "none"), s2.setAttributeNS(null, "stroke-width", "1"), s2.setAttributeNS(null, "fill", "none"), s2.setAttributeNS(null, "fill-rule", "evenodd");
          var c2 = r.createNS("http://www.w3.org/2000/svg", "g");
          c2.setAttributeNS(null, "fill-rule", "nonzero");
          var l2 = r.createNS("http://www.w3.org/2000/svg", "g");
          l2.setAttributeNS(null, "transform", "translate(3.0, 29.0)"), l2.setAttributeNS(null, "fill", "#000000");
          for (var u2 = 0, h2 = [{ rx: "10.5", ry: "5.25002273" }, { rx: "10.5", ry: "5.25002273" }, { rx: "9.5", ry: "4.77275007" }, { rx: "8.5", ry: "4.29549936" }, { rx: "7.5", ry: "3.81822308" }, { rx: "6.5", ry: "3.34094679" }, { rx: "5.5", ry: "2.86367051" }, { rx: "4.5", ry: "2.38636864" }]; u2 < h2.length; u2 += 1) {
            var p2 = h2[u2], f2 = r.createNS("http://www.w3.org/2000/svg", "ellipse");
            f2.setAttributeNS(null, "opacity", "0.04"), f2.setAttributeNS(null, "cx", "10.5"), f2.setAttributeNS(null, "cy", "5.80029008"), f2.setAttributeNS(null, "rx", p2.rx), f2.setAttributeNS(null, "ry", p2.ry), l2.appendChild(f2);
          }
          var d2 = r.createNS("http://www.w3.org/2000/svg", "g");
          d2.setAttributeNS(null, "fill", this._color);
          var _3 = r.createNS("http://www.w3.org/2000/svg", "path");
          _3.setAttributeNS(null, "d", "M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"), d2.appendChild(_3);
          var m2 = r.createNS("http://www.w3.org/2000/svg", "g");
          m2.setAttributeNS(null, "opacity", "0.25"), m2.setAttributeNS(null, "fill", "#000000");
          var g2 = r.createNS("http://www.w3.org/2000/svg", "path");
          g2.setAttributeNS(null, "d", "M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"), m2.appendChild(g2);
          var v2 = r.createNS("http://www.w3.org/2000/svg", "g");
          v2.setAttributeNS(null, "transform", "translate(6.0, 7.0)"), v2.setAttributeNS(null, "fill", "#FFFFFF");
          var y2 = r.createNS("http://www.w3.org/2000/svg", "g");
          y2.setAttributeNS(null, "transform", "translate(8.0, 8.0)");
          var b2 = r.createNS("http://www.w3.org/2000/svg", "circle");
          b2.setAttributeNS(null, "fill", "#000000"), b2.setAttributeNS(null, "opacity", "0.25"), b2.setAttributeNS(null, "cx", "5.5"), b2.setAttributeNS(null, "cy", "5.5"), b2.setAttributeNS(null, "r", "5.4999962");
          var w2 = r.createNS("http://www.w3.org/2000/svg", "circle");
          w2.setAttributeNS(null, "fill", "#FFFFFF"), w2.setAttributeNS(null, "cx", "5.5"), w2.setAttributeNS(null, "cy", "5.5"), w2.setAttributeNS(null, "r", "5.4999962"), y2.appendChild(b2), y2.appendChild(w2), c2.appendChild(l2), c2.appendChild(d2), c2.appendChild(m2), c2.appendChild(v2), c2.appendChild(y2), a2.appendChild(c2), this._element.appendChild(a2), this._offset = t.Point.convert(i3 && i3.offset || [0, -14]);
        }
        this._element.classList.add("sgmap-marker"), this._element.addEventListener("dragstart", function(t2) {
          t2.preventDefault();
        }), this._element.addEventListener("mousedown", function(t2) {
          t2.preventDefault();
        }), this._element.addEventListener("focus", function() {
          var t2 = n2._map.getContainer();
          t2.scrollTop = 0, t2.scrollLeft = 0;
        }), Do(this._element, this._anchor, "marker"), this._popup = null;
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.addTo = function(t2) {
        return this.remove(), this._map = t2, t2.getCanvasContainer().appendChild(this._element), t2.on("move", this._update), t2.on("moveend", this._update), this.setDraggable(this._draggable), this._update(), this._map.on("click", this._onMapClick), this;
      }, i2.prototype.remove = function() {
        return this._map && (this._map.off("click", this._onMapClick), this._map.off("move", this._update), this._map.off("moveend", this._update), this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler), this._map.off("mouseup", this._onUp), this._map.off("touchend", this._onUp), this._map.off("mousemove", this._onMove), this._map.off("touchmove", this._onMove), delete this._map), r.remove(this._element), this._popup && this._popup.remove(), this;
      }, i2.prototype.getLngLat = function() {
        return this._lngLat;
      }, i2.prototype.setLngLat = function(e3) {
        return this._lngLat = t.LngLat.convert(e3), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;
      }, i2.prototype.getElement = function() {
        return this._element;
      }, i2.prototype.setPopup = function(t2) {
        if (this._popup && (this._popup.remove(), this._popup = null, this._element.removeEventListener("keypress", this._onKeyPress), this._originalTabIndex || this._element.removeAttribute("tabindex")), t2) {
          if (!("offset" in t2.options)) {
            var e3 = Math.sqrt(Math.pow(13.5, 2) / 2);
            t2.options.offset = this._defaultMarker ? { top: [0, 0], "top-left": [0, 0], "top-right": [0, 0], bottom: [0, -38.1], "bottom-left": [e3, -1 * (24.6 + e3)], "bottom-right": [-e3, -1 * (24.6 + e3)], left: [13.5, -24.6], right: [-13.5, -24.6] } : this._offset;
          }
          this._popup = t2, this._lngLat && this._popup.setLngLat(this._lngLat), this._originalTabIndex = this._element.getAttribute("tabindex"), this._originalTabIndex || this._element.setAttribute("tabindex", "0"), this._element.addEventListener("keypress", this._onKeyPress);
        }
        return this;
      }, i2.prototype._onKeyPress = function(t2) {
        var e3 = t2.code, i3 = t2.charCode || t2.keyCode;
        "Space" !== e3 && "Enter" !== e3 && 32 !== i3 && 13 !== i3 || this.togglePopup();
      }, i2.prototype._onMapClick = function(t2) {
        var e3 = t2.originalEvent.target, i3 = this._element;
        this._popup && (e3 === i3 || i3.contains(e3)) && this.togglePopup();
      }, i2.prototype.getPopup = function() {
        return this._popup;
      }, i2.prototype.togglePopup = function() {
        var t2 = this._popup;
        return t2 ? (t2.isOpen() ? t2.remove() : t2.addTo(this._map), this) : this;
      }, i2.prototype._update = function(t2) {
        if (this._map) {
          this._map.transform.renderWorldCopies && (this._lngLat = Co(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._offset);
          var e3 = "";
          "viewport" === this._rotationAlignment || "auto" === this._rotationAlignment ? e3 = "rotateZ(" + this._rotation + "deg)" : "map" === this._rotationAlignment && (e3 = "rotateZ(" + (this._rotation - this._map.getBearing()) + "deg)");
          var i3 = "";
          "viewport" === this._pitchAlignment || "auto" === this._pitchAlignment ? i3 = "rotateX(0deg)" : "map" === this._pitchAlignment && (i3 = "rotateX(" + this._map.getPitch() + "deg)"), t2 && "moveend" !== t2.type || (this._pos = this._pos.round()), r.setTransform(this._element, zo[this._anchor] + " translate(" + this._pos.x + "px, " + this._pos.y + "px) " + i3 + " " + e3);
        }
      }, i2.prototype.getOffset = function() {
        return this._offset;
      }, i2.prototype.setOffset = function(e3) {
        return this._offset = t.Point.convert(e3), this._update(), this;
      }, i2.prototype._onMove = function(e3) {
        this._pos = e3.point.sub(this._positionDelta), this._lngLat = this._map.unproject(this._pos), this.setLngLat(this._lngLat), this._element.style.pointerEvents = "none", "pending" === this._state && (this._state = "active", this.fire(new t.Event("dragstart"))), this.fire(new t.Event("drag"));
      }, i2.prototype._onUp = function() {
        this._element.style.pointerEvents = "auto", this._positionDelta = null, this._map.off("mousemove", this._onMove), this._map.off("touchmove", this._onMove), "active" === this._state && this.fire(new t.Event("dragend")), this._state = "inactive";
      }, i2.prototype._addDragHandler = function(t2) {
        this._element.contains(t2.originalEvent.target) && (t2.preventDefault(), this._positionDelta = t2.point.sub(this._pos).add(this._offset), this._state = "pending", this._map.on("mousemove", this._onMove), this._map.on("touchmove", this._onMove), this._map.once("mouseup", this._onUp), this._map.once("touchend", this._onUp));
      }, i2.prototype.setDraggable = function(t2) {
        return this._draggable = !!t2, this._map && (t2 ? (this._map.on("mousedown", this._addDragHandler), this._map.on("touchstart", this._addDragHandler)) : (this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler))), this;
      }, i2.prototype.isDraggable = function() {
        return this._draggable;
      }, i2.prototype.setRotation = function(t2) {
        return this._rotation = t2 || 0, this._update(), this;
      }, i2.prototype.getRotation = function() {
        return this._rotation;
      }, i2.prototype.setRotationAlignment = function(t2) {
        return this._rotationAlignment = t2 || "auto", this._update(), this;
      }, i2.prototype.getRotationAlignment = function() {
        return this._rotationAlignment;
      }, i2.prototype.setPitchAlignment = function(t2) {
        return this._pitchAlignment = t2 && "auto" !== t2 ? t2 : this._rotationAlignment, this._update(), this;
      }, i2.prototype.getPitchAlignment = function() {
        return this._pitchAlignment;
      }, i2;
    }(t.Evented), Ro = { positionOptions: { enableHighAccuracy: false, maximumAge: 0, timeout: 6e3 }, fitBoundsOptions: { maxZoom: 15 }, trackUserLocation: false, showAccuracyCircle: true, showUserLocation: true }, Oo = 0, Fo = false, Uo = function(e2) {
      function i2() {
        e2.apply(this, arguments);
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype._parsePosition = function(e3, i3) {
        t.makeRequest({ method: "POST", url: t.config$1.API_URL + "/geoconv/v2", type: "json", body: "coords=" + e3.join(",") + "&from=1&encode=0", headers: { Authorization: t.config$1.ACCESS_TOKEN, "Content-Type": "application/x-www-form-urlencoded;charset=utf-8" } }, i3);
      }, i2.prototype._onSuccess = function(t2) {
        var i3 = this;
        this._parsePosition([t2.coords.longitude, t2.coords.latitude], function(r2, o2) {
          if (!r2 && 1e4 === o2.code) {
            var n2 = o2.value.map(function(t3) {
              return [t3.x, t3.y];
            });
            e2.prototype._onSuccess.call(i3, { coords: { longitude: n2[0][0], latitude: n2[0][1], accuracy: t2.coords.accuracy } });
          }
        });
      }, i2;
    }(function(e2) {
      function i2(i3) {
        e2.call(this), this.options = t.extend({}, Ro, i3), t.bindAll(["_onSuccess", "_onError", "_onZoom", "_finish", "_setupUI", "_updateCamera", "_updateMarker"], this);
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.onAdd = function(e3) {
        var i3;
        return this._map = e3, this._container = r.create("div", "sgmap-ctrl sgmap-ctrl-group"), i3 = this._setupUI, void 0 !== Mo ? i3(Mo) : void 0 !== t.window.navigator.permissions ? t.window.navigator.permissions.query({ name: "geolocation" }).then(function(t2) {
          i3(Mo = "denied" !== t2.state);
        }) : i3(Mo = !!t.window.navigator.geolocation), this._container;
      }, i2.prototype.onRemove = function() {
        void 0 !== this._geolocationWatchID && (t.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(), this.options.showAccuracyCircle && this._accuracyCircleMarker && this._accuracyCircleMarker.remove(), r.remove(this._container), this._map.off("zoom", this._onZoom), this._map = void 0, Oo = 0, Fo = false;
      }, i2.prototype._isOutOfMapMaxBounds = function(t2) {
        var e3 = this._map.getMaxBounds(), i3 = t2.coords;
        return e3 && (i3.longitude < e3.getWest() || i3.longitude > e3.getEast() || i3.latitude < e3.getSouth() || i3.latitude > e3.getNorth());
      }, i2.prototype._setErrorState = function() {
        switch (this._watchState) {
          case "WAITING_ACTIVE":
            this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-active-error");
            break;
          case "ACTIVE_LOCK":
            this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-waiting");
            break;
          case "BACKGROUND":
            this._watchState = "BACKGROUND_ERROR", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-background"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-waiting");
        }
      }, i2.prototype._onSuccess = function(e3) {
        if (this._map) {
          if (this._isOutOfMapMaxBounds(e3))
            return this._setErrorState(), this.fire(new t.Event("outofmaxbounds", e3)), this._updateMarker(), void this._finish();
          if (this.options.trackUserLocation)
            switch (this._lastKnownPosition = e3, this._watchState) {
              case "WAITING_ACTIVE":
              case "ACTIVE_LOCK":
              case "ACTIVE_ERROR":
                this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-active");
                break;
              case "BACKGROUND":
              case "BACKGROUND_ERROR":
                this._watchState = "BACKGROUND", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-background");
            }
          this.options.showUserLocation && "OFF" !== this._watchState && this._updateMarker(e3), this.options.trackUserLocation && "ACTIVE_LOCK" !== this._watchState || this._updateCamera(e3), this.options.showUserLocation && this._dotElement.classList.remove("sgmap-user-location-dot-stale"), this.fire(new t.Event("geolocate", e3)), this._finish();
        }
      }, i2.prototype._updateCamera = function(e3) {
        var i3 = new t.LngLat(e3.coords.longitude, e3.coords.latitude), r2 = e3.coords.accuracy, o2 = this._map.getBearing(), n2 = t.extend({ bearing: o2 }, this.options.fitBoundsOptions);
        this._map.fitBounds(i3.toBounds(r2), n2, { geolocateSource: true });
      }, i2.prototype._updateMarker = function(e3) {
        if (e3) {
          var i3 = new t.LngLat(e3.coords.longitude, e3.coords.latitude);
          this._accuracyCircleMarker.setLngLat(i3).addTo(this._map), this._userLocationDotMarker.setLngLat(i3).addTo(this._map), this._accuracy = e3.coords.accuracy, this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();
        } else
          this._userLocationDotMarker.remove(), this._accuracyCircleMarker.remove();
      }, i2.prototype._updateCircleRadius = function() {
        var t2 = this._map._container.clientHeight / 2, e3 = this._map.unproject([0, t2]), i3 = this._map.unproject([1, t2]), r2 = e3.distanceTo(i3), o2 = Math.ceil(2 * this._accuracy / r2);
        this._circleElement.style.width = o2 + "px", this._circleElement.style.height = o2 + "px";
      }, i2.prototype._onZoom = function() {
        this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();
      }, i2.prototype._onError = function(e3) {
        if (this._map) {
          if (this.options.trackUserLocation)
            if (1 === e3.code) {
              this._watchState = "OFF", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-background"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-background-error"), this._geolocateButton.disabled = true;
              var i3 = this._map._getUIString("GeolocateControl.LocationNotAvailable");
              this._geolocateButton.title = i3, this._geolocateButton.setAttribute("aria-label", i3), void 0 !== this._geolocationWatchID && this._clearWatch();
            } else {
              if (3 === e3.code && Fo)
                return;
              this._setErrorState();
            }
          "OFF" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add("sgmap-user-location-dot-stale"), this.fire(new t.Event("error", e3)), this._finish();
        }
      }, i2.prototype._finish = function() {
        this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;
      }, i2.prototype._setupUI = function(e3) {
        var i3 = this;
        if (this._container.addEventListener("contextmenu", function(t2) {
          return t2.preventDefault();
        }), this._geolocateButton = r.create("button", "sgmap-ctrl-geolocate", this._container), r.create("span", "sgmap-ctrl-icon", this._geolocateButton).setAttribute("aria-hidden", true), this._geolocateButton.type = "button", false === e3) {
          t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");
          var o2 = this._map._getUIString("GeolocateControl.LocationNotAvailable");
          this._geolocateButton.disabled = true, this._geolocateButton.title = o2, this._geolocateButton.setAttribute("aria-label", o2);
        } else {
          var n2 = this._map._getUIString("GeolocateControl.FindMyLocation");
          this._geolocateButton.title = n2, this._geolocateButton.setAttribute("aria-label", n2);
        }
        this.options.trackUserLocation && (this._geolocateButton.setAttribute("aria-pressed", "false"), this._watchState = "OFF"), this.options.showUserLocation && (this._dotElement = r.create("div", "sgmap-user-location-dot"), this._userLocationDotMarker = new Lo(this._dotElement), this._circleElement = r.create("div", "sgmap-user-location-accuracy-circle"), this._accuracyCircleMarker = new Lo({ element: this._circleElement, pitchAlignment: "map" }), this.options.trackUserLocation && (this._watchState = "OFF"), this._map.on("zoom", this._onZoom)), this._geolocateButton.addEventListener("click", this.trigger.bind(this)), this._setup = true, this.options.trackUserLocation && this._map.on("movestart", function(e4) {
          e4.geolocateSource || "ACTIVE_LOCK" !== i3._watchState || e4.originalEvent && "resize" === e4.originalEvent.type || (i3._watchState = "BACKGROUND", i3._geolocateButton.classList.add("sgmap-ctrl-geolocate-background"), i3._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active"), i3.fire(new t.Event("trackuserlocationend")));
        });
      }, i2.prototype.trigger = function() {
        if (!this._setup)
          return t.warnOnce("Geolocate control triggered before added to a map"), false;
        if (this.options.trackUserLocation) {
          switch (this._watchState) {
            case "OFF":
              this._watchState = "WAITING_ACTIVE", this.fire(new t.Event("trackuserlocationstart"));
              break;
            case "WAITING_ACTIVE":
            case "ACTIVE_LOCK":
            case "ACTIVE_ERROR":
            case "BACKGROUND_ERROR":
              Oo--, Fo = false, this._watchState = "OFF", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-background"), this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-background-error"), this.fire(new t.Event("trackuserlocationend"));
              break;
            case "BACKGROUND":
              this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-background"), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire(new t.Event("trackuserlocationstart"));
          }
          switch (this._watchState) {
            case "WAITING_ACTIVE":
              this._geolocateButton.classList.add("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-active");
              break;
            case "ACTIVE_LOCK":
              this._geolocateButton.classList.add("sgmap-ctrl-geolocate-active");
              break;
            case "ACTIVE_ERROR":
              this._geolocateButton.classList.add("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-active-error");
              break;
            case "BACKGROUND":
              this._geolocateButton.classList.add("sgmap-ctrl-geolocate-background");
              break;
            case "BACKGROUND_ERROR":
              this._geolocateButton.classList.add("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("sgmap-ctrl-geolocate-background-error");
          }
          if ("OFF" === this._watchState && void 0 !== this._geolocationWatchID)
            this._clearWatch();
          else if (void 0 === this._geolocationWatchID) {
            var e3;
            this._geolocateButton.classList.add("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "true"), ++Oo > 1 ? (e3 = { maximumAge: 6e5, timeout: 0 }, Fo = true) : (e3 = this.options.positionOptions, Fo = false), this._geolocationWatchID = t.window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, e3);
          }
        } else
          t.window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 1e4);
        return true;
      }, i2.prototype._clearWatch = function() {
        t.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove("sgmap-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "false"), this.options.showUserLocation && this._updateMarker(null);
      }, i2;
    }(t.Evented)), No = function() {
      t.bindAll(["_onClickPitch", "_changeIcon"], this);
    };
    No.prototype.getDefaultPosition = function() {
      return "bottom-right";
    }, No.prototype.onAdd = function(t2) {
      return this._map = t2, this._container = r.create("div", "sgmap-ctrl sgmap-ctrl-group"), this._pitchControlBtn = r.create("button", "sgmap-ctrl-pitch-text", this._container), this._pitchControlBtn.innerHTML = "2D", this._pitchControlBtn.addEventListener("click", this._onClickPitch), this._map.on("pitch", this._changeIcon), this._container;
    }, No.prototype.onRemove = function() {
      this._map.off("pitch", this._changeIcon), r.remove(this._container);
    }, No.prototype._onClickPitch = function() {
      this._ispitch ? (this._pitchControlBtn.innerHTML = "2D", this._map.easeTo({ pitch: 0 }), this._ispitch = false) : (this._pitchControlBtn.innerHTML = "3D", this._map.easeTo({ pitch: 50 }), this._ispitch = true);
    }, No.prototype._changeIcon = function() {
      0 != this._map.getPitch() ? (this._pitchControlBtn.innerHTML = "3D", this._ispitch = true) : (this._pitchControlBtn.innerHTML = "2D", this._ispitch = false);
    };
    var jo = { maxWidth: 100, unit: "metric" }, Vo = function(e2) {
      this.options = t.extend({}, jo, e2), t.bindAll(["_onMove", "setUnit"], this);
    };
    function qo(t2, e2, i2) {
      var r2, o2, n2, a2, s2, c2, l2 = i2 && i2.maxWidth || 100, u2 = t2._container.clientHeight / 2, h2 = (r2 = t2.unproject([0, u2]), o2 = t2.unproject([l2, u2]), n2 = Math.PI / 180, a2 = r2.lat * n2, s2 = o2.lat * n2, c2 = Math.sin(a2) * Math.sin(s2) + Math.cos(a2) * Math.cos(s2) * Math.cos((o2.lng - r2.lng) * n2), 6371e3 * Math.acos(Math.min(c2, 1)));
      if (i2 && "imperial" === i2.unit) {
        var p2 = 3.2808 * h2;
        p2 > 5280 ? Zo(e2, l2, p2 / 5280, "mi") : Zo(e2, l2, p2, "ft");
      } else
        i2 && "nautical" === i2.unit ? Zo(e2, l2, h2 / 1852, "nm") : Zo(e2, l2, h2, "m");
    }
    function Zo(t2, e2, i2, r2) {
      var o2, n2, a2, s2 = (o2 = i2, (n2 = Math.pow(10, ("" + Math.floor(o2)).length - 1)) * (a2 = (a2 = o2 / n2) >= 10 ? 10 : a2 >= 5 ? 5 : a2 >= 3 ? 3 : a2 >= 2 ? 2 : a2 >= 1 ? 1 : function(t3) {
        var e3 = Math.pow(10, Math.ceil(-Math.log(t3) / Math.LN10));
        return Math.round(t3 * e3) / e3;
      }(a2))), c2 = s2 / i2;
      "m" === r2 && s2 >= 1e3 && (s2 /= 1e3, r2 = "km"), t2.parentElement.style.width = e2 * c2 + "px", t2.innerHTML = s2 + r2;
    }
    Vo.prototype.getDefaultPosition = function() {
      return "bottom-left";
    }, Vo.prototype._onMove = function() {
      qo(this._map, this._scaleText, this.options);
    }, Vo.prototype.onAdd = function(t2) {
      return this._map = t2, this._container = r.create("div", "sgmap-ctrl-scale-ruler", t2.getContainer()), this._scaleText = r.create("div", "sgmap-csr-text", this._container), r.create("div", "sgmap-csr-barbg sgmap-csr-barbg--h", this._container), r.create("div", "sgmap-csr-barbg sgmap-csr-barbg--r", this._container), r.create("div", "sgmap-csr-barbg sgmap-csr-barbg--l", this._container), r.create("div", "sgmap-csr-bar sgmap-csr-bar--h", this._container), r.create("div", "sgmap-csr-bar sgmap-csr-bar--r", this._container), r.create("div", "sgmap-csr-bar sgmap-csr-bar--l", this._container), this._map.on("move", this._onMove), this._onMove(), this._container;
    }, Vo.prototype.onRemove = function() {
      r.remove(this._container), this._map.off("move", this._onMove), this._map = void 0;
    }, Vo.prototype.setUnit = function(t2) {
      this.options.unit = t2, qo(this._map, this._scaleText, this.options);
    };
    var Go = function(e2) {
      this._fullscreen = false, e2 && e2.container && (e2.container instanceof t.window.HTMLElement ? this._container = e2.container : t.warnOnce("Full screen control 'container' must be a DOM element.")), t.bindAll(["_onClickFullscreen", "_changeIcon"], this), "onfullscreenchange" in t.window.document ? this._fullscreenchange = "fullscreenchange" : "onmozfullscreenchange" in t.window.document ? this._fullscreenchange = "mozfullscreenchange" : "onwebkitfullscreenchange" in t.window.document ? this._fullscreenchange = "webkitfullscreenchange" : "onmsfullscreenchange" in t.window.document && (this._fullscreenchange = "MSFullscreenChange");
    };
    Go.prototype.onAdd = function(e2) {
      return this._map = e2, this._container || (this._container = this._map.getContainer()), this._controlContainer = r.create("div", "sgmap-ctrl sgmap-ctrl-group"), this._checkFullscreenSupport() ? this._setupUI() : (this._controlContainer.style.display = "none", t.warnOnce("This device does not support fullscreen mode.")), this._controlContainer;
    }, Go.prototype.onRemove = function() {
      r.remove(this._controlContainer), this._map = null, t.window.document.removeEventListener(this._fullscreenchange, this._changeIcon);
    }, Go.prototype._checkFullscreenSupport = function() {
      return !!(t.window.document.fullscreenEnabled || t.window.document.mozFullScreenEnabled || t.window.document.msFullscreenEnabled || t.window.document.webkitFullscreenEnabled);
    }, Go.prototype._setupUI = function() {
      var e2 = this._fullscreenButton = r.create("button", "sgmap-ctrl-fullscreen", this._controlContainer);
      r.create("span", "sgmap-ctrl-icon", e2).setAttribute("aria-hidden", true), e2.type = "button", this._updateTitle(), this._fullscreenButton.addEventListener("click", this._onClickFullscreen), t.window.document.addEventListener(this._fullscreenchange, this._changeIcon);
    }, Go.prototype._updateTitle = function() {
      var t2 = this._getTitle();
      this._fullscreenButton.setAttribute("aria-label", t2), this._fullscreenButton.title = t2;
    }, Go.prototype._getTitle = function() {
      return this._map._getUIString(this._isFullscreen() ? "FullscreenControl.Exit" : "FullscreenControl.Enter");
    }, Go.prototype._isFullscreen = function() {
      return this._fullscreen;
    }, Go.prototype._changeIcon = function() {
      (t.window.document.fullscreenElement || t.window.document.mozFullScreenElement || t.window.document.webkitFullscreenElement || t.window.document.msFullscreenElement) === this._container !== this._fullscreen && (this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle("sgmap-ctrl-shrink"), this._fullscreenButton.classList.toggle("sgmap-ctrl-fullscreen"), this._updateTitle());
    }, Go.prototype._onClickFullscreen = function() {
      this._isFullscreen() ? t.window.document.exitFullscreen ? t.window.document.exitFullscreen() : t.window.document.mozCancelFullScreen ? t.window.document.mozCancelFullScreen() : t.window.document.msExitFullscreen ? t.window.document.msExitFullscreen() : t.window.document.webkitCancelFullScreen && t.window.document.webkitCancelFullScreen() : this._container.requestFullscreen ? this._container.requestFullscreen() : this._container.mozRequestFullScreen ? this._container.mozRequestFullScreen() : this._container.msRequestFullscreen ? this._container.msRequestFullscreen() : this._container.webkitRequestFullscreen && this._container.webkitRequestFullscreen();
    };
    var Ho = { closeButton: true, closeOnClick: true, className: "", maxWidth: "240px" }, Wo = function(e2) {
      function i2(i3) {
        e2.call(this), this.options = t.extend(Object.create(Ho), i3), t.bindAll(["_update", "_onClose", "remove", "_onMouseMove", "_onMouseUp", "_onDrag"], this);
      }
      return e2 && (i2.__proto__ = e2), (i2.prototype = Object.create(e2 && e2.prototype)).constructor = i2, i2.prototype.addTo = function(e3) {
        return this._map && this.remove(), this._map = e3, this.options.closeOnClick && this._map.on("click", this._onClose), this.options.closeOnMove && this._map.on("move", this._onClose), this._map.on("remove", this.remove), this._update(), this._trackPointer ? (this._map.on("mousemove", this._onMouseMove), this._map.on("mouseup", this._onMouseUp), this._container && this._container.classList.add("sgmap-popup-track-pointer"), this._map._canvasContainer.classList.add("sgmap-track-pointer")) : this._map.on("move", this._update), this.fire(new t.Event("open")), this;
      }, i2.prototype.isOpen = function() {
        return !!this._map;
      }, i2.prototype.remove = function() {
        return this._content && r.remove(this._content), this._container && (r.remove(this._container), delete this._container), this._map && (this._map.off("move", this._update), this._map.off("move", this._onClose), this._map.off("click", this._onClose), this._map.off("remove", this.remove), this._map.off("mousemove", this._onMouseMove), this._map.off("mouseup", this._onMouseUp), this._map.off("drag", this._onDrag), delete this._map), this.fire(new t.Event("close")), this;
      }, i2.prototype.getLngLat = function() {
        return this._lngLat;
      }, i2.prototype.setLngLat = function(e3) {
        return this._lngLat = t.LngLat.convert(e3), this._pos = null, this._trackPointer = false, this._update(), this._map && (this._map.on("move", this._update), this._map.off("mousemove", this._onMouseMove), this._container && this._container.classList.remove("sgmap-popup-track-pointer"), this._map._canvasContainer.classList.remove("sgmap-track-pointer")), this;
      }, i2.prototype.trackPointer = function() {
        return this._trackPointer = true, this._pos = null, this._update(), this._map && (this._map.off("move", this._update), this._map.on("mousemove", this._onMouseMove), this._map.on("drag", this._onDrag), this._container && this._container.classList.add("sgmap-popup-track-pointer"), this._map._canvasContainer.classList.add("sgmap-track-pointer")), this;
      }, i2.prototype.getElement = function() {
        return this._container;
      }, i2.prototype.setText = function(e3) {
        return this.setDOMContent(t.window.document.createTextNode(e3));
      }, i2.prototype.setHTML = function(e3) {
        var i3, r2 = t.window.document.createDocumentFragment(), o2 = t.window.document.createElement("body");
        for (o2.innerHTML = e3; i3 = o2.firstChild; )
          r2.appendChild(i3);
        return this.setDOMContent(r2);
      }, i2.prototype.getMaxWidth = function() {
        return this._container && this._container.style.maxWidth;
      }, i2.prototype.setMaxWidth = function(t2) {
        return this.options.maxWidth = t2, this._update(), this;
      }, i2.prototype.setDOMContent = function(t2) {
        return this._createContent(), this._content.appendChild(t2), this._update(), this;
      }, i2.prototype.addClassName = function(t2) {
        this._container && this._container.classList.add(t2);
      }, i2.prototype.removeClassName = function(t2) {
        this._container && this._container.classList.remove(t2);
      }, i2.prototype.toggleClassName = function(t2) {
        if (this._container)
          return this._container.classList.toggle(t2);
      }, i2.prototype._createContent = function() {
        this._content && r.remove(this._content), this._content = r.create("div", "sgmap-popup-content", this._container), this.options.closeButton && (this._closeButton = r.create("button", "sgmap-popup-close-button", this._content), this._closeButton.type = "button", this._closeButton.setAttribute("aria-label", "Close popup"), this._closeButton.innerHTML = "&#215;", this._closeButton.addEventListener("click", this._onClose));
      }, i2.prototype._onMouseUp = function(t2) {
        this._update(t2.point);
      }, i2.prototype._onMouseMove = function(t2) {
        this._update(t2.point);
      }, i2.prototype._onDrag = function(t2) {
        this._update(t2.point);
      }, i2.prototype._update = function(e3) {
        var i3 = this;
        if (this._map && (this._lngLat || this._trackPointer) && this._content && (this._container || (this._container = r.create("div", "sgmap-popup", this._map.getContainer()), this._tip = r.create("div", "sgmap-popup-tip", this._container), this._container.appendChild(this._content), this.options.className && this.options.className.split(" ").forEach(function(t2) {
          return i3._container.classList.add(t2);
        }), this._trackPointer && this._container.classList.add("sgmap-popup-track-pointer")), this.options.maxWidth && this._container.style.maxWidth !== this.options.maxWidth && (this._container.style.maxWidth = this.options.maxWidth), this._map.transform.renderWorldCopies && !this._trackPointer && (this._lngLat = Co(this._lngLat, this._pos, this._map.transform)), !this._trackPointer || e3)) {
          var o2 = this._pos = this._trackPointer && e3 ? e3 : this._map.project(this._lngLat), n2 = this.options.anchor, a2 = function e4(i4) {
            if (i4) {
              if ("number" == typeof i4) {
                var r2 = Math.round(Math.sqrt(0.5 * Math.pow(i4, 2)));
                return { center: new t.Point(0, 0), top: new t.Point(0, i4), "top-left": new t.Point(r2, r2), "top-right": new t.Point(-r2, r2), bottom: new t.Point(0, -i4), "bottom-left": new t.Point(r2, -r2), "bottom-right": new t.Point(-r2, -r2), left: new t.Point(i4, 0), right: new t.Point(-i4, 0) };
              }
              if (i4 instanceof t.Point || Array.isArray(i4)) {
                var o3 = t.Point.convert(i4);
                return { center: o3, top: o3, "top-left": o3, "top-right": o3, bottom: o3, "bottom-left": o3, "bottom-right": o3, left: o3, right: o3 };
              }
              return { center: t.Point.convert(i4.center || [0, 0]), top: t.Point.convert(i4.top || [0, 0]), "top-left": t.Point.convert(i4["top-left"] || [0, 0]), "top-right": t.Point.convert(i4["top-right"] || [0, 0]), bottom: t.Point.convert(i4.bottom || [0, 0]), "bottom-left": t.Point.convert(i4["bottom-left"] || [0, 0]), "bottom-right": t.Point.convert(i4["bottom-right"] || [0, 0]), left: t.Point.convert(i4.left || [0, 0]), right: t.Point.convert(i4.right || [0, 0]) };
            }
            return e4(new t.Point(0, 0));
          }(this.options.offset);
          if (!n2) {
            var s2, c2 = this._container.offsetWidth, l2 = this._container.offsetHeight;
            s2 = o2.y + a2.bottom.y < l2 ? ["top"] : o2.y > this._map.transform.height - l2 ? ["bottom"] : [], o2.x < c2 / 2 ? s2.push("left") : o2.x > this._map.transform.width - c2 / 2 && s2.push("right"), n2 = 0 === s2.length ? "bottom" : s2.join("-");
          }
          var u2 = o2.add(a2[n2]).round();
          r.setTransform(this._container, zo[n2] + " translate(" + u2.x + "px," + u2.y + "px)"), Do(this._container, n2, "popup");
        }
      }, i2.prototype._onClose = function() {
        this.remove();
      }, i2;
    }(t.Evented), Xo = t.createCommonjsModule(function(e2, i2) {
      e2.exports = function() {
        function e3(t2, e4) {
          (null == e4 || e4 > t2.length) && (e4 = t2.length);
          for (var i4 = 0, r3 = new Array(e4); i4 < e4; i4++)
            r3[i4] = t2[i4];
          return r3;
        }
        function i3(t2, i4) {
          var r3;
          if ("undefined" == typeof Symbol || null == t2[Symbol.iterator]) {
            if (Array.isArray(t2) || (r3 = function(t3, i5) {
              if (t3) {
                if ("string" == typeof t3)
                  return e3(t3, i5);
                var r4 = Object.prototype.toString.call(t3).slice(8, -1);
                return "Object" === r4 && t3.constructor && (r4 = t3.constructor.name), "Map" === r4 || "Set" === r4 ? Array.from(t3) : "Arguments" === r4 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r4) ? e3(t3, i5) : void 0;
              }
            }(t2)) || i4 && t2 && "number" == typeof t2.length) {
              r3 && (t2 = r3);
              var o3 = 0, n3 = function() {
              };
              return { s: n3, n: function() {
                return o3 >= t2.length ? { done: true } : { done: false, value: t2[o3++] };
              }, e: function(t3) {
                throw t3;
              }, f: n3 };
            }
            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          }
          var a3, s3 = true, c3 = false;
          return { s: function() {
            r3 = t2[Symbol.iterator]();
          }, n: function() {
            var t3 = r3.next();
            return s3 = t3.done, t3;
          }, e: function(t3) {
            c3 = true, a3 = t3;
          }, f: function() {
            try {
              s3 || null == r3.return || r3.return();
            } finally {
              if (c3)
                throw a3;
            }
          } };
        }
        var r2 = null, o2 = r2 = r2 || function() {
          var t2, e4, i4, r3, o3, n3, a3, s3, c3, l3, u3, h3, p3, f3, d3, _4, m3, g3, v3, y3, b3, w3, x3, T3, S3, E3, A3, k3, I3, B3, P3, C3, z3, D3, M3, L3, R3, O3, F3, U3, N3, j3, V3, q3, Z3, G3, H3, W3, X3, K3, Y3, J3, Q3, $3, tt3, et3, it3, rt3, ot3, nt2, at2, st2, ct2, lt2, ut2, ht2, pt2, ft2, dt2, _t2, mt2, gt2, vt2, yt2, bt2, wt2, xt2, Tt2, St2, Et2, At2, kt2, It2, Bt2, Pt2, Ct2 = Ct2 || (t2 = Math, e4 = Object.create || function(t3) {
            var e5;
            return zt2.prototype = t3, e5 = new zt2(), zt2.prototype = null, e5;
          }, r3 = (i4 = {}).lib = {}, o3 = r3.Base = { extend: function(t3) {
            var i5 = e4(this);
            return t3 && i5.mixIn(t3), i5.hasOwnProperty("init") && this.init !== i5.init || (i5.init = function() {
              i5.$super.init.apply(this, arguments);
            }), (i5.init.prototype = i5).$super = this, i5;
          }, create: function() {
            var t3 = this.extend();
            return t3.init.apply(t3, arguments), t3;
          }, init: function() {
          }, mixIn: function(t3) {
            for (var e5 in t3)
              t3.hasOwnProperty(e5) && (this[e5] = t3[e5]);
            t3.hasOwnProperty("toString") && (this.toString = t3.toString);
          }, clone: function() {
            return this.init.prototype.extend(this);
          } }, n3 = r3.WordArray = o3.extend({ init: function(t3, e5) {
            t3 = this.words = t3 || [], this.sigBytes = null != e5 ? e5 : 4 * t3.length;
          }, toString: function(t3) {
            return (t3 || s3).stringify(this);
          }, concat: function(t3) {
            var e5 = this.words, i5 = t3.words, r4 = this.sigBytes, o4 = t3.sigBytes;
            if (this.clamp(), r4 % 4)
              for (var n4 = 0; n4 < o4; n4++)
                e5[r4 + n4 >>> 2] |= (i5[n4 >>> 2] >>> 24 - n4 % 4 * 8 & 255) << 24 - (r4 + n4) % 4 * 8;
            else
              for (n4 = 0; n4 < o4; n4 += 4)
                e5[r4 + n4 >>> 2] = i5[n4 >>> 2];
            return this.sigBytes += o4, this;
          }, clamp: function() {
            var e5 = this.words, i5 = this.sigBytes;
            e5[i5 >>> 2] &= 4294967295 << 32 - i5 % 4 * 8, e5.length = t2.ceil(i5 / 4);
          }, clone: function() {
            var t3 = o3.clone.call(this);
            return t3.words = this.words.slice(0), t3;
          }, random: function(e5) {
            for (var i5 = [], r4 = function(e6) {
              e6 = e6;
              var i6 = 987654321, r5 = 4294967295;
              return function() {
                var o5 = ((i6 = 36969 * (65535 & i6) + (i6 >> 16) & r5) << 16) + (e6 = 18e3 * (65535 & e6) + (e6 >> 16) & r5) & r5;
                return o5 /= 4294967296, (o5 += 0.5) * (0.5 < t2.random() ? 1 : -1);
              };
            }, o4 = 0; o4 < e5; o4 += 4) {
              var a4 = r4(4294967296 * (s4 || t2.random())), s4 = 987654071 * a4();
              i5.push(4294967296 * a4() | 0);
            }
            return new n3.init(i5, e5);
          } }), a3 = i4.enc = {}, s3 = a3.Hex = { stringify: function(t3) {
            for (var e5 = t3.words, i5 = t3.sigBytes, r4 = [], o4 = 0; o4 < i5; o4++) {
              var n4 = e5[o4 >>> 2] >>> 24 - o4 % 4 * 8 & 255;
              r4.push((n4 >>> 4).toString(16)), r4.push((15 & n4).toString(16));
            }
            return r4.join("");
          }, parse: function(t3) {
            for (var e5 = t3.length, i5 = [], r4 = 0; r4 < e5; r4 += 2)
              i5[r4 >>> 3] |= parseInt(t3.substr(r4, 2), 16) << 24 - r4 % 8 * 4;
            return new n3.init(i5, e5 / 2);
          } }, c3 = a3.Latin1 = { stringify: function(t3) {
            for (var e5 = t3.words, i5 = t3.sigBytes, r4 = [], o4 = 0; o4 < i5; o4++)
              r4.push(String.fromCharCode(e5[o4 >>> 2] >>> 24 - o4 % 4 * 8 & 255));
            return r4.join("");
          }, parse: function(t3) {
            for (var e5 = t3.length, i5 = [], r4 = 0; r4 < e5; r4++)
              i5[r4 >>> 2] |= (255 & t3.charCodeAt(r4)) << 24 - r4 % 4 * 8;
            return new n3.init(i5, e5);
          } }, l3 = a3.Utf8 = { stringify: function(t3) {
            try {
              return decodeURIComponent(escape(c3.stringify(t3)));
            } catch (t4) {
              throw new Error("Malformed UTF-8 data");
            }
          }, parse: function(t3) {
            return c3.parse(unescape(encodeURIComponent(t3)));
          } }, u3 = r3.BufferedBlockAlgorithm = o3.extend({ reset: function() {
            this._data = new n3.init(), this._nDataBytes = 0;
          }, _append: function(t3) {
            "string" == typeof t3 && (t3 = l3.parse(t3)), this._data.concat(t3), this._nDataBytes += t3.sigBytes;
          }, _process: function(e5) {
            var i5 = this._data, r4 = i5.words, o4 = i5.sigBytes, a4 = this.blockSize, s4 = o4 / (4 * a4), c4 = (s4 = e5 ? t2.ceil(s4) : t2.max((0 | s4) - this._minBufferSize, 0)) * a4, l4 = t2.min(4 * c4, o4);
            if (c4) {
              for (var u4 = 0; u4 < c4; u4 += a4)
                this._doProcessBlock(r4, u4);
              var h4 = r4.splice(0, c4);
              i5.sigBytes -= l4;
            }
            return new n3.init(h4, l4);
          }, clone: function() {
            var t3 = o3.clone.call(this);
            return t3._data = this._data.clone(), t3;
          }, _minBufferSize: 0 }), r3.Hasher = u3.extend({ cfg: o3.extend(), init: function(t3) {
            this.cfg = this.cfg.extend(t3), this.reset();
          }, reset: function() {
            u3.reset.call(this), this._doReset();
          }, update: function(t3) {
            return this._append(t3), this._process(), this;
          }, finalize: function(t3) {
            return t3 && this._append(t3), this._doFinalize();
          }, blockSize: 16, _createHelper: function(t3) {
            return function(e5, i5) {
              return new t3.init(i5).finalize(e5);
            };
          }, _createHmacHelper: function(t3) {
            return function(e5, i5) {
              return new h3.HMAC.init(t3, i5).finalize(e5);
            };
          } }), h3 = i4.algo = {}, i4);
          function zt2() {
          }
          function Dt2(t3, e5, i5) {
            return t3 & e5 | ~t3 & i5;
          }
          function Mt2(t3, e5, i5) {
            return t3 & i5 | e5 & ~i5;
          }
          function Lt2(t3, e5) {
            return t3 << e5 | t3 >>> 32 - e5;
          }
          function Rt2(t3, e5, i5, r4) {
            var o4, n4 = this._iv;
            n4 ? (o4 = n4.slice(0), this._iv = void 0) : o4 = this._prevBlock, r4.encryptBlock(o4, 0);
            for (var a4 = 0; a4 < i5; a4++)
              t3[e5 + a4] ^= o4[a4];
          }
          function Ot2(t3) {
            var e5, i5, r4;
            return 255 == (t3 >> 24 & 255) ? (i5 = t3 >> 8 & 255, r4 = 255 & t3, 255 == (e5 = t3 >> 16 & 255) ? (e5 = 0, 255 === i5 ? (i5 = 0, 255 === r4 ? r4 = 0 : ++r4) : ++i5) : ++e5, t3 = 0, t3 += e5 << 16, t3 += i5 << 8, t3 += r4) : t3 += 1 << 24, t3;
          }
          function Ft2() {
            for (var t3 = this._X, e5 = this._C, i5 = 0; i5 < 8; i5++)
              bt2[i5] = e5[i5];
            for (e5[0] = e5[0] + 1295307597 + this._b | 0, e5[1] = e5[1] + 3545052371 + (e5[0] >>> 0 < bt2[0] >>> 0 ? 1 : 0) | 0, e5[2] = e5[2] + 886263092 + (e5[1] >>> 0 < bt2[1] >>> 0 ? 1 : 0) | 0, e5[3] = e5[3] + 1295307597 + (e5[2] >>> 0 < bt2[2] >>> 0 ? 1 : 0) | 0, e5[4] = e5[4] + 3545052371 + (e5[3] >>> 0 < bt2[3] >>> 0 ? 1 : 0) | 0, e5[5] = e5[5] + 886263092 + (e5[4] >>> 0 < bt2[4] >>> 0 ? 1 : 0) | 0, e5[6] = e5[6] + 1295307597 + (e5[5] >>> 0 < bt2[5] >>> 0 ? 1 : 0) | 0, e5[7] = e5[7] + 3545052371 + (e5[6] >>> 0 < bt2[6] >>> 0 ? 1 : 0) | 0, this._b = e5[7] >>> 0 < bt2[7] >>> 0 ? 1 : 0, i5 = 0; i5 < 8; i5++) {
              var r4 = t3[i5] + e5[i5], o4 = 65535 & r4, n4 = r4 >>> 16;
              wt2[i5] = ((o4 * o4 >>> 17) + o4 * n4 >>> 15) + n4 * n4 ^ ((4294901760 & r4) * r4 | 0) + ((65535 & r4) * r4 | 0);
            }
            t3[0] = wt2[0] + (wt2[7] << 16 | wt2[7] >>> 16) + (wt2[6] << 16 | wt2[6] >>> 16) | 0, t3[1] = wt2[1] + (wt2[0] << 8 | wt2[0] >>> 24) + wt2[7] | 0, t3[2] = wt2[2] + (wt2[1] << 16 | wt2[1] >>> 16) + (wt2[0] << 16 | wt2[0] >>> 16) | 0, t3[3] = wt2[3] + (wt2[2] << 8 | wt2[2] >>> 24) + wt2[1] | 0, t3[4] = wt2[4] + (wt2[3] << 16 | wt2[3] >>> 16) + (wt2[2] << 16 | wt2[2] >>> 16) | 0, t3[5] = wt2[5] + (wt2[4] << 8 | wt2[4] >>> 24) + wt2[3] | 0, t3[6] = wt2[6] + (wt2[5] << 16 | wt2[5] >>> 16) + (wt2[4] << 16 | wt2[4] >>> 16) | 0, t3[7] = wt2[7] + (wt2[6] << 8 | wt2[6] >>> 24) + wt2[5] | 0;
          }
          function Ut2() {
            for (var t3 = this._X, e5 = this._C, i5 = 0; i5 < 8; i5++)
              It2[i5] = e5[i5];
            for (e5[0] = e5[0] + 1295307597 + this._b | 0, e5[1] = e5[1] + 3545052371 + (e5[0] >>> 0 < It2[0] >>> 0 ? 1 : 0) | 0, e5[2] = e5[2] + 886263092 + (e5[1] >>> 0 < It2[1] >>> 0 ? 1 : 0) | 0, e5[3] = e5[3] + 1295307597 + (e5[2] >>> 0 < It2[2] >>> 0 ? 1 : 0) | 0, e5[4] = e5[4] + 3545052371 + (e5[3] >>> 0 < It2[3] >>> 0 ? 1 : 0) | 0, e5[5] = e5[5] + 886263092 + (e5[4] >>> 0 < It2[4] >>> 0 ? 1 : 0) | 0, e5[6] = e5[6] + 1295307597 + (e5[5] >>> 0 < It2[5] >>> 0 ? 1 : 0) | 0, e5[7] = e5[7] + 3545052371 + (e5[6] >>> 0 < It2[6] >>> 0 ? 1 : 0) | 0, this._b = e5[7] >>> 0 < It2[7] >>> 0 ? 1 : 0, i5 = 0; i5 < 8; i5++) {
              var r4 = t3[i5] + e5[i5], o4 = 65535 & r4, n4 = r4 >>> 16;
              Bt2[i5] = ((o4 * o4 >>> 17) + o4 * n4 >>> 15) + n4 * n4 ^ ((4294901760 & r4) * r4 | 0) + ((65535 & r4) * r4 | 0);
            }
            t3[0] = Bt2[0] + (Bt2[7] << 16 | Bt2[7] >>> 16) + (Bt2[6] << 16 | Bt2[6] >>> 16) | 0, t3[1] = Bt2[1] + (Bt2[0] << 8 | Bt2[0] >>> 24) + Bt2[7] | 0, t3[2] = Bt2[2] + (Bt2[1] << 16 | Bt2[1] >>> 16) + (Bt2[0] << 16 | Bt2[0] >>> 16) | 0, t3[3] = Bt2[3] + (Bt2[2] << 8 | Bt2[2] >>> 24) + Bt2[1] | 0, t3[4] = Bt2[4] + (Bt2[3] << 16 | Bt2[3] >>> 16) + (Bt2[2] << 16 | Bt2[2] >>> 16) | 0, t3[5] = Bt2[5] + (Bt2[4] << 8 | Bt2[4] >>> 24) + Bt2[3] | 0, t3[6] = Bt2[6] + (Bt2[5] << 16 | Bt2[5] >>> 16) + (Bt2[4] << 16 | Bt2[4] >>> 16) | 0, t3[7] = Bt2[7] + (Bt2[6] << 8 | Bt2[6] >>> 24) + Bt2[5] | 0;
          }
          return p3 = Ct2.lib.WordArray, Ct2.enc.Base64 = { stringify: function(t3) {
            var e5 = t3.words, i5 = t3.sigBytes, r4 = this._map;
            t3.clamp();
            for (var o4 = [], n4 = 0; n4 < i5; n4 += 3)
              for (var a4 = (e5[n4 >>> 2] >>> 24 - n4 % 4 * 8 & 255) << 16 | (e5[n4 + 1 >>> 2] >>> 24 - (n4 + 1) % 4 * 8 & 255) << 8 | e5[n4 + 2 >>> 2] >>> 24 - (n4 + 2) % 4 * 8 & 255, s4 = 0; s4 < 4 && n4 + 0.75 * s4 < i5; s4++)
                o4.push(r4.charAt(a4 >>> 6 * (3 - s4) & 63));
            var c4 = r4.charAt(64);
            if (c4)
              for (; o4.length % 4; )
                o4.push(c4);
            return o4.join("");
          }, parse: function(t3) {
            var e5 = t3.length, i5 = this._map, r4 = this._reverseMap;
            if (!r4) {
              r4 = this._reverseMap = [];
              for (var o4 = 0; o4 < i5.length; o4++)
                r4[i5.charCodeAt(o4)] = o4;
            }
            var n4, a4 = i5.charAt(64);
            return !a4 || -1 !== (n4 = t3.indexOf(a4)) && (e5 = n4), function(t4, e6, i6) {
              for (var r5 = [], o5 = 0, n5 = 0; n5 < e6; n5++) {
                var a5, s4;
                n5 % 4 && (a5 = i6[t4.charCodeAt(n5 - 1)] << n5 % 4 * 2, s4 = i6[t4.charCodeAt(n5)] >>> 6 - n5 % 4 * 2, r5[o5 >>> 2] |= (a5 | s4) << 24 - o5 % 4 * 8, o5++);
              }
              return p3.create(r5, o5);
            }(t3, e5, r4);
          }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, function(t3) {
            var e5 = Ct2, i5 = e5.lib, r4 = i5.WordArray, o4 = i5.Hasher, n4 = e5.algo, a4 = [];
            !function() {
              for (var e6 = 0; e6 < 64; e6++)
                a4[e6] = 4294967296 * t3.abs(t3.sin(e6 + 1)) | 0;
            }();
            var s4 = n4.MD5 = o4.extend({ _doReset: function() {
              this._hash = new r4.init([1732584193, 4023233417, 2562383102, 271733878]);
            }, _doProcessBlock: function(t4, e6) {
              for (var i6 = 0; i6 < 16; i6++) {
                var r5 = e6 + i6, o5 = t4[r5];
                t4[r5] = 16711935 & (o5 << 8 | o5 >>> 24) | 4278255360 & (o5 << 24 | o5 >>> 8);
              }
              var n5 = this._hash.words, s5 = t4[e6 + 0], p4 = t4[e6 + 1], f4 = t4[e6 + 2], d4 = t4[e6 + 3], _5 = t4[e6 + 4], m4 = t4[e6 + 5], g4 = t4[e6 + 6], v4 = t4[e6 + 7], y4 = t4[e6 + 8], b4 = t4[e6 + 9], w4 = t4[e6 + 10], x4 = t4[e6 + 11], T4 = t4[e6 + 12], S4 = t4[e6 + 13], E4 = t4[e6 + 14], A4 = t4[e6 + 15], k4 = c4(k4 = n5[0], P4 = n5[1], B4 = n5[2], I4 = n5[3], s5, 7, a4[0]), I4 = c4(I4, k4, P4, B4, p4, 12, a4[1]), B4 = c4(B4, I4, k4, P4, f4, 17, a4[2]), P4 = c4(P4, B4, I4, k4, d4, 22, a4[3]);
              k4 = c4(k4, P4, B4, I4, _5, 7, a4[4]), I4 = c4(I4, k4, P4, B4, m4, 12, a4[5]), B4 = c4(B4, I4, k4, P4, g4, 17, a4[6]), P4 = c4(P4, B4, I4, k4, v4, 22, a4[7]), k4 = c4(k4, P4, B4, I4, y4, 7, a4[8]), I4 = c4(I4, k4, P4, B4, b4, 12, a4[9]), B4 = c4(B4, I4, k4, P4, w4, 17, a4[10]), P4 = c4(P4, B4, I4, k4, x4, 22, a4[11]), k4 = c4(k4, P4, B4, I4, T4, 7, a4[12]), I4 = c4(I4, k4, P4, B4, S4, 12, a4[13]), B4 = c4(B4, I4, k4, P4, E4, 17, a4[14]), k4 = l4(k4, P4 = c4(P4, B4, I4, k4, A4, 22, a4[15]), B4, I4, p4, 5, a4[16]), I4 = l4(I4, k4, P4, B4, g4, 9, a4[17]), B4 = l4(B4, I4, k4, P4, x4, 14, a4[18]), P4 = l4(P4, B4, I4, k4, s5, 20, a4[19]), k4 = l4(k4, P4, B4, I4, m4, 5, a4[20]), I4 = l4(I4, k4, P4, B4, w4, 9, a4[21]), B4 = l4(B4, I4, k4, P4, A4, 14, a4[22]), P4 = l4(P4, B4, I4, k4, _5, 20, a4[23]), k4 = l4(k4, P4, B4, I4, b4, 5, a4[24]), I4 = l4(I4, k4, P4, B4, E4, 9, a4[25]), B4 = l4(B4, I4, k4, P4, d4, 14, a4[26]), P4 = l4(P4, B4, I4, k4, y4, 20, a4[27]), k4 = l4(k4, P4, B4, I4, S4, 5, a4[28]), I4 = l4(I4, k4, P4, B4, f4, 9, a4[29]), B4 = l4(B4, I4, k4, P4, v4, 14, a4[30]), k4 = u4(k4, P4 = l4(P4, B4, I4, k4, T4, 20, a4[31]), B4, I4, m4, 4, a4[32]), I4 = u4(I4, k4, P4, B4, y4, 11, a4[33]), B4 = u4(B4, I4, k4, P4, x4, 16, a4[34]), P4 = u4(P4, B4, I4, k4, E4, 23, a4[35]), k4 = u4(k4, P4, B4, I4, p4, 4, a4[36]), I4 = u4(I4, k4, P4, B4, _5, 11, a4[37]), B4 = u4(B4, I4, k4, P4, v4, 16, a4[38]), P4 = u4(P4, B4, I4, k4, w4, 23, a4[39]), k4 = u4(k4, P4, B4, I4, S4, 4, a4[40]), I4 = u4(I4, k4, P4, B4, s5, 11, a4[41]), B4 = u4(B4, I4, k4, P4, d4, 16, a4[42]), P4 = u4(P4, B4, I4, k4, g4, 23, a4[43]), k4 = u4(k4, P4, B4, I4, b4, 4, a4[44]), I4 = u4(I4, k4, P4, B4, T4, 11, a4[45]), B4 = u4(B4, I4, k4, P4, A4, 16, a4[46]), k4 = h4(k4, P4 = u4(P4, B4, I4, k4, f4, 23, a4[47]), B4, I4, s5, 6, a4[48]), I4 = h4(I4, k4, P4, B4, v4, 10, a4[49]), B4 = h4(B4, I4, k4, P4, E4, 15, a4[50]), P4 = h4(P4, B4, I4, k4, m4, 21, a4[51]), k4 = h4(k4, P4, B4, I4, T4, 6, a4[52]), I4 = h4(I4, k4, P4, B4, d4, 10, a4[53]), B4 = h4(B4, I4, k4, P4, w4, 15, a4[54]), P4 = h4(P4, B4, I4, k4, p4, 21, a4[55]), k4 = h4(k4, P4, B4, I4, y4, 6, a4[56]), I4 = h4(I4, k4, P4, B4, A4, 10, a4[57]), B4 = h4(B4, I4, k4, P4, g4, 15, a4[58]), P4 = h4(P4, B4, I4, k4, S4, 21, a4[59]), k4 = h4(k4, P4, B4, I4, _5, 6, a4[60]), I4 = h4(I4, k4, P4, B4, x4, 10, a4[61]), B4 = h4(B4, I4, k4, P4, f4, 15, a4[62]), P4 = h4(P4, B4, I4, k4, b4, 21, a4[63]), n5[0] = n5[0] + k4 | 0, n5[1] = n5[1] + P4 | 0, n5[2] = n5[2] + B4 | 0, n5[3] = n5[3] + I4 | 0;
            }, _doFinalize: function() {
              var e6 = this._data, i6 = e6.words, r5 = 8 * this._nDataBytes, o5 = 8 * e6.sigBytes;
              i6[o5 >>> 5] |= 128 << 24 - o5 % 32;
              var n5 = t3.floor(r5 / 4294967296), a5 = r5;
              i6[15 + (64 + o5 >>> 9 << 4)] = 16711935 & (n5 << 8 | n5 >>> 24) | 4278255360 & (n5 << 24 | n5 >>> 8), i6[14 + (64 + o5 >>> 9 << 4)] = 16711935 & (a5 << 8 | a5 >>> 24) | 4278255360 & (a5 << 24 | a5 >>> 8), e6.sigBytes = 4 * (i6.length + 1), this._process();
              for (var s5 = this._hash, c5 = s5.words, l5 = 0; l5 < 4; l5++) {
                var u5 = c5[l5];
                c5[l5] = 16711935 & (u5 << 8 | u5 >>> 24) | 4278255360 & (u5 << 24 | u5 >>> 8);
              }
              return s5;
            }, clone: function() {
              var t4 = o4.clone.call(this);
              return t4._hash = this._hash.clone(), t4;
            } });
            function c4(t4, e6, i6, r5, o5, n5, a5) {
              var s5 = t4 + (e6 & i6 | ~e6 & r5) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            function l4(t4, e6, i6, r5, o5, n5, a5) {
              var s5 = t4 + (e6 & r5 | i6 & ~r5) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            function u4(t4, e6, i6, r5, o5, n5, a5) {
              var s5 = t4 + (e6 ^ i6 ^ r5) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            function h4(t4, e6, i6, r5, o5, n5, a5) {
              var s5 = t4 + (i6 ^ (e6 | ~r5)) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            e5.MD5 = o4._createHelper(s4), e5.HmacMD5 = o4._createHmacHelper(s4);
          }(Math), d3 = (f3 = Ct2).lib, _4 = d3.WordArray, g3 = [], v3 = f3.algo.SHA1 = (m3 = d3.Hasher).extend({ _doReset: function() {
            this._hash = new _4.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
          }, _doProcessBlock: function(t3, e5) {
            for (var i5, r4 = this._hash.words, o4 = r4[0], n4 = r4[1], a4 = r4[2], s4 = r4[3], c4 = r4[4], l4 = 0; l4 < 80; l4++) {
              g3[l4] = l4 < 16 ? 0 | t3[e5 + l4] : (i5 = g3[l4 - 3] ^ g3[l4 - 8] ^ g3[l4 - 14] ^ g3[l4 - 16]) << 1 | i5 >>> 31;
              var u4 = (o4 << 5 | o4 >>> 27) + c4 + g3[l4];
              u4 += l4 < 20 ? 1518500249 + (n4 & a4 | ~n4 & s4) : l4 < 40 ? 1859775393 + (n4 ^ a4 ^ s4) : l4 < 60 ? (n4 & a4 | n4 & s4 | a4 & s4) - 1894007588 : (n4 ^ a4 ^ s4) - 899497514, c4 = s4, s4 = a4, a4 = n4 << 30 | n4 >>> 2, n4 = o4, o4 = u4;
            }
            r4[0] = r4[0] + o4 | 0, r4[1] = r4[1] + n4 | 0, r4[2] = r4[2] + a4 | 0, r4[3] = r4[3] + s4 | 0, r4[4] = r4[4] + c4 | 0;
          }, _doFinalize: function() {
            var t3 = this._data, e5 = t3.words, i5 = 8 * this._nDataBytes, r4 = 8 * t3.sigBytes;
            return e5[r4 >>> 5] |= 128 << 24 - r4 % 32, e5[14 + (64 + r4 >>> 9 << 4)] = Math.floor(i5 / 4294967296), e5[15 + (64 + r4 >>> 9 << 4)] = i5, t3.sigBytes = 4 * e5.length, this._process(), this._hash;
          }, clone: function() {
            var t3 = m3.clone.call(this);
            return t3._hash = this._hash.clone(), t3;
          } }), f3.SHA1 = m3._createHelper(v3), f3.HmacSHA1 = m3._createHmacHelper(v3), function(t3) {
            var e5 = Ct2, i5 = e5.lib, r4 = i5.WordArray, o4 = i5.Hasher, n4 = e5.algo, a4 = [], s4 = [];
            !function() {
              function e6(t4) {
                return 4294967296 * (t4 - (0 | t4)) | 0;
              }
              for (var i6 = 2, r5 = 0; r5 < 64; )
                !function(e7) {
                  for (var i7 = t3.sqrt(e7), r6 = 2; r6 <= i7; r6++)
                    if (!(e7 % r6))
                      return;
                  return 1;
                }(i6) || (r5 < 8 && (a4[r5] = e6(t3.pow(i6, 0.5))), s4[r5] = e6(t3.pow(i6, 1 / 3)), r5++), i6++;
            }();
            var c4 = [], l4 = n4.SHA256 = o4.extend({ _doReset: function() {
              this._hash = new r4.init(a4.slice(0));
            }, _doProcessBlock: function(t4, e6) {
              for (var i6, r5, o5, n5, a5 = this._hash.words, l5 = a5[0], u4 = a5[1], h4 = a5[2], p4 = a5[3], f4 = a5[4], d4 = a5[5], _5 = a5[6], m4 = a5[7], g4 = 0; g4 < 64; g4++) {
                g4 < 16 ? c4[g4] = 0 | t4[e6 + g4] : (r5 = ((i6 = c4[g4 - 15]) << 25 | i6 >>> 7) ^ (i6 << 14 | i6 >>> 18) ^ i6 >>> 3, n5 = ((o5 = c4[g4 - 2]) << 15 | o5 >>> 17) ^ (o5 << 13 | o5 >>> 19) ^ o5 >>> 10, c4[g4] = r5 + c4[g4 - 7] + n5 + c4[g4 - 16]);
                var v4 = l5 & u4 ^ l5 & h4 ^ u4 & h4, y4 = m4 + ((f4 << 26 | f4 >>> 6) ^ (f4 << 21 | f4 >>> 11) ^ (f4 << 7 | f4 >>> 25)) + (f4 & d4 ^ ~f4 & _5) + s4[g4] + c4[g4];
                m4 = _5, _5 = d4, d4 = f4, f4 = p4 + y4 | 0, p4 = h4, h4 = u4, u4 = l5, l5 = y4 + (((l5 << 30 | l5 >>> 2) ^ (l5 << 19 | l5 >>> 13) ^ (l5 << 10 | l5 >>> 22)) + v4) | 0;
              }
              a5[0] = a5[0] + l5 | 0, a5[1] = a5[1] + u4 | 0, a5[2] = a5[2] + h4 | 0, a5[3] = a5[3] + p4 | 0, a5[4] = a5[4] + f4 | 0, a5[5] = a5[5] + d4 | 0, a5[6] = a5[6] + _5 | 0, a5[7] = a5[7] + m4 | 0;
            }, _doFinalize: function() {
              var e6 = this._data, i6 = e6.words, r5 = 8 * this._nDataBytes, o5 = 8 * e6.sigBytes;
              return i6[o5 >>> 5] |= 128 << 24 - o5 % 32, i6[14 + (64 + o5 >>> 9 << 4)] = t3.floor(r5 / 4294967296), i6[15 + (64 + o5 >>> 9 << 4)] = r5, e6.sigBytes = 4 * i6.length, this._process(), this._hash;
            }, clone: function() {
              var t4 = o4.clone.call(this);
              return t4._hash = this._hash.clone(), t4;
            } });
            e5.SHA256 = o4._createHelper(l4), e5.HmacSHA256 = o4._createHmacHelper(l4);
          }(Math), function() {
            var t3 = Ct2.lib.WordArray, e5 = Ct2.enc;
            function i5(t4) {
              return t4 << 8 & 4278255360 | t4 >>> 8 & 16711935;
            }
            e5.Utf16 = e5.Utf16BE = { stringify: function(t4) {
              for (var e6 = t4.words, i6 = t4.sigBytes, r4 = [], o4 = 0; o4 < i6; o4 += 2)
                r4.push(String.fromCharCode(e6[o4 >>> 2] >>> 16 - o4 % 4 * 8 & 65535));
              return r4.join("");
            }, parse: function(e6) {
              for (var i6 = e6.length, r4 = [], o4 = 0; o4 < i6; o4++)
                r4[o4 >>> 1] |= e6.charCodeAt(o4) << 16 - o4 % 2 * 16;
              return t3.create(r4, 2 * i6);
            } }, e5.Utf16LE = { stringify: function(t4) {
              for (var e6 = t4.words, r4 = t4.sigBytes, o4 = [], n4 = 0; n4 < r4; n4 += 2) {
                var a4 = i5(e6[n4 >>> 2] >>> 16 - n4 % 4 * 8 & 65535);
                o4.push(String.fromCharCode(a4));
              }
              return o4.join("");
            }, parse: function(e6) {
              for (var r4 = e6.length, o4 = [], n4 = 0; n4 < r4; n4++)
                o4[n4 >>> 1] |= i5(e6.charCodeAt(n4) << 16 - n4 % 2 * 16);
              return t3.create(o4, 2 * r4);
            } };
          }(), "function" == typeof ArrayBuffer && (b3 = (y3 = Ct2.lib.WordArray).init, (y3.init = function(t3) {
            if (t3 instanceof ArrayBuffer && (t3 = new Uint8Array(t3)), (t3 instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && t3 instanceof Uint8ClampedArray || t3 instanceof Int16Array || t3 instanceof Uint16Array || t3 instanceof Int32Array || t3 instanceof Uint32Array || t3 instanceof Float32Array || t3 instanceof Float64Array) && (t3 = new Uint8Array(t3.buffer, t3.byteOffset, t3.byteLength)), t3 instanceof Uint8Array) {
              for (var e5 = t3.byteLength, i5 = [], r4 = 0; r4 < e5; r4++)
                i5[r4 >>> 2] |= t3[r4] << 24 - r4 % 4 * 8;
              b3.call(this, i5, e5);
            } else
              b3.apply(this, arguments);
          }).prototype = y3), x3 = (w3 = Ct2).lib, S3 = x3.Hasher, E3 = w3.algo, A3 = (T3 = x3.WordArray).create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]), k3 = T3.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]), I3 = T3.create([11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]), B3 = T3.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]), P3 = T3.create([0, 1518500249, 1859775393, 2400959708, 2840853838]), C3 = T3.create([1352829926, 1548603684, 1836072691, 2053994217, 0]), z3 = E3.RIPEMD160 = S3.extend({ _doReset: function() {
            this._hash = T3.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
          }, _doProcessBlock: function(t3, e5) {
            for (var i5 = 0; i5 < 16; i5++) {
              var r4 = e5 + i5, o4 = t3[r4];
              t3[r4] = 16711935 & (o4 << 8 | o4 >>> 24) | 4278255360 & (o4 << 24 | o4 >>> 8);
            }
            var n4, a4, s4, c4, l4, u4, h4 = this._hash.words, p4 = P3.words, f4 = C3.words, d4 = A3.words, _5 = k3.words, m4 = I3.words, g4 = B3.words, v4 = n4 = h4[0], y4 = a4 = h4[1], b4 = s4 = h4[2], w4 = c4 = h4[3], x4 = l4 = h4[4];
            for (i5 = 0; i5 < 80; i5 += 1)
              u4 = n4 + t3[e5 + d4[i5]] | 0, u4 += i5 < 16 ? (a4 ^ s4 ^ c4) + p4[0] : i5 < 32 ? Dt2(a4, s4, c4) + p4[1] : i5 < 48 ? ((a4 | ~s4) ^ c4) + p4[2] : i5 < 64 ? Mt2(a4, s4, c4) + p4[3] : (a4 ^ (s4 | ~c4)) + p4[4], u4 = (u4 = Lt2(u4 |= 0, m4[i5])) + l4 | 0, n4 = l4, l4 = c4, c4 = Lt2(s4, 10), s4 = a4, a4 = u4, u4 = v4 + t3[e5 + _5[i5]] | 0, u4 += i5 < 16 ? (y4 ^ (b4 | ~w4)) + f4[0] : i5 < 32 ? Mt2(y4, b4, w4) + f4[1] : i5 < 48 ? ((y4 | ~b4) ^ w4) + f4[2] : i5 < 64 ? Dt2(y4, b4, w4) + f4[3] : (y4 ^ b4 ^ w4) + f4[4], u4 = (u4 = Lt2(u4 |= 0, g4[i5])) + x4 | 0, v4 = x4, x4 = w4, w4 = Lt2(b4, 10), b4 = y4, y4 = u4;
            u4 = h4[1] + s4 + w4 | 0, h4[1] = h4[2] + c4 + x4 | 0, h4[2] = h4[3] + l4 + v4 | 0, h4[3] = h4[4] + n4 + y4 | 0, h4[4] = h4[0] + a4 + b4 | 0, h4[0] = u4;
          }, _doFinalize: function() {
            var t3 = this._data, e5 = t3.words, i5 = 8 * this._nDataBytes, r4 = 8 * t3.sigBytes;
            e5[r4 >>> 5] |= 128 << 24 - r4 % 32, e5[14 + (64 + r4 >>> 9 << 4)] = 16711935 & (i5 << 8 | i5 >>> 24) | 4278255360 & (i5 << 24 | i5 >>> 8), t3.sigBytes = 4 * (e5.length + 1), this._process();
            for (var o4 = this._hash, n4 = o4.words, a4 = 0; a4 < 5; a4++) {
              var s4 = n4[a4];
              n4[a4] = 16711935 & (s4 << 8 | s4 >>> 24) | 4278255360 & (s4 << 24 | s4 >>> 8);
            }
            return o4;
          }, clone: function() {
            var t3 = S3.clone.call(this);
            return t3._hash = this._hash.clone(), t3;
          } }), w3.RIPEMD160 = S3._createHelper(z3), w3.HmacRIPEMD160 = S3._createHmacHelper(z3), D3 = Ct2.enc.Utf8, Ct2.algo.HMAC = Ct2.lib.Base.extend({ init: function(t3, e5) {
            t3 = this._hasher = new t3.init(), "string" == typeof e5 && (e5 = D3.parse(e5));
            var i5 = t3.blockSize, r4 = 4 * i5;
            e5.sigBytes > r4 && (e5 = t3.finalize(e5)), e5.clamp();
            for (var o4 = this._oKey = e5.clone(), n4 = this._iKey = e5.clone(), a4 = o4.words, s4 = n4.words, c4 = 0; c4 < i5; c4++)
              a4[c4] ^= 1549556828, s4[c4] ^= 909522486;
            o4.sigBytes = n4.sigBytes = r4, this.reset();
          }, reset: function() {
            var t3 = this._hasher;
            t3.reset(), t3.update(this._iKey);
          }, update: function(t3) {
            return this._hasher.update(t3), this;
          }, finalize: function(t3) {
            var e5 = this._hasher, i5 = e5.finalize(t3);
            return e5.reset(), e5.finalize(this._oKey.clone().concat(i5));
          } }), L3 = (M3 = Ct2).lib, O3 = L3.WordArray, U3 = (F3 = M3.algo).HMAC, N3 = F3.PBKDF2 = (R3 = L3.Base).extend({ cfg: R3.extend({ keySize: 4, hasher: F3.SHA1, iterations: 1 }), init: function(t3) {
            this.cfg = this.cfg.extend(t3);
          }, compute: function(t3, e5) {
            for (var i5 = this.cfg, r4 = U3.create(i5.hasher, t3), o4 = O3.create(), n4 = O3.create([1]), a4 = o4.words, s4 = n4.words, c4 = i5.keySize, l4 = i5.iterations; a4.length < c4; ) {
              var u4 = r4.update(e5).finalize(n4);
              r4.reset();
              for (var h4 = u4.words, p4 = h4.length, f4 = u4, d4 = 1; d4 < l4; d4++) {
                f4 = r4.finalize(f4), r4.reset();
                for (var _5 = f4.words, m4 = 0; m4 < p4; m4++)
                  h4[m4] ^= _5[m4];
              }
              o4.concat(u4), s4[0]++;
            }
            return o4.sigBytes = 4 * c4, o4;
          } }), M3.PBKDF2 = function(t3, e5, i5) {
            return N3.create(i5).compute(t3, e5);
          }, V3 = (j3 = Ct2).lib, Z3 = V3.WordArray, H3 = (G3 = j3.algo).EvpKDF = (q3 = V3.Base).extend({ cfg: q3.extend({ keySize: 4, hasher: G3.MD5, iterations: 1 }), init: function(t3) {
            this.cfg = this.cfg.extend(t3);
          }, compute: function(t3, e5) {
            for (var i5 = this.cfg, r4 = i5.hasher.create(), o4 = Z3.create(), n4 = o4.words, a4 = i5.keySize, s4 = i5.iterations; n4.length < a4; ) {
              c4 && r4.update(c4);
              var c4 = r4.update(t3).finalize(e5);
              r4.reset();
              for (var l4 = 1; l4 < s4; l4++)
                c4 = r4.finalize(c4), r4.reset();
              o4.concat(c4);
            }
            return o4.sigBytes = 4 * a4, o4;
          } }), j3.EvpKDF = function(t3, e5, i5) {
            return H3.create(i5).compute(t3, e5);
          }, X3 = (W3 = Ct2).lib.WordArray, J3 = (K3 = W3.algo).SHA224 = (Y3 = K3.SHA256).extend({ _doReset: function() {
            this._hash = new X3.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428]);
          }, _doFinalize: function() {
            var t3 = Y3._doFinalize.call(this);
            return t3.sigBytes -= 4, t3;
          } }), W3.SHA224 = Y3._createHelper(J3), W3.HmacSHA224 = Y3._createHmacHelper(J3), $3 = (Q3 = Ct2.lib).Base, tt3 = Q3.WordArray, (et3 = Ct2.x64 = {}).Word = $3.extend({ init: function(t3, e5) {
            this.high = t3, this.low = e5;
          } }), et3.WordArray = $3.extend({ init: function(t3, e5) {
            t3 = this.words = t3 || [], this.sigBytes = null != e5 ? e5 : 8 * t3.length;
          }, toX32: function() {
            for (var t3 = this.words, e5 = t3.length, i5 = [], r4 = 0; r4 < e5; r4++) {
              var o4 = t3[r4];
              i5.push(o4.high), i5.push(o4.low);
            }
            return tt3.create(i5, this.sigBytes);
          }, clone: function() {
            for (var t3 = $3.clone.call(this), e5 = t3.words = this.words.slice(0), i5 = e5.length, r4 = 0; r4 < i5; r4++)
              e5[r4] = e5[r4].clone();
            return t3;
          } }), function(t3) {
            var e5 = Ct2, i5 = e5.lib, r4 = i5.WordArray, o4 = i5.Hasher, n4 = e5.x64.Word, a4 = e5.algo, s4 = [], c4 = [], l4 = [];
            !function() {
              for (var t4 = 1, e6 = 0, i6 = 0; i6 < 24; i6++) {
                s4[t4 + 5 * e6] = (i6 + 1) * (i6 + 2) / 2 % 64;
                var r5 = (2 * t4 + 3 * e6) % 5;
                t4 = e6 % 5, e6 = r5;
              }
              for (t4 = 0; t4 < 5; t4++)
                for (e6 = 0; e6 < 5; e6++)
                  c4[t4 + 5 * e6] = e6 + (2 * t4 + 3 * e6) % 5 * 5;
              for (var o5 = 1, a5 = 0; a5 < 24; a5++) {
                for (var u5, h5 = 0, p4 = 0, f4 = 0; f4 < 7; f4++)
                  1 & o5 && ((u5 = (1 << f4) - 1) < 32 ? p4 ^= 1 << u5 : h5 ^= 1 << u5 - 32), 128 & o5 ? o5 = o5 << 1 ^ 113 : o5 <<= 1;
                l4[a5] = n4.create(h5, p4);
              }
            }();
            var u4 = [];
            !function() {
              for (var t4 = 0; t4 < 25; t4++)
                u4[t4] = n4.create();
            }();
            var h4 = a4.SHA3 = o4.extend({ cfg: o4.cfg.extend({ outputLength: 512 }), _doReset: function() {
              for (var t4 = this._state = [], e6 = 0; e6 < 25; e6++)
                t4[e6] = new n4.init();
              this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;
            }, _doProcessBlock: function(t4, e6) {
              for (var i6 = this._state, r5 = this.blockSize / 2, o5 = 0; o5 < r5; o5++) {
                var n5 = 16711935 & ((n5 = t4[e6 + 2 * o5]) << 8 | n5 >>> 24) | 4278255360 & (n5 << 24 | n5 >>> 8), a5 = 16711935 & ((a5 = t4[e6 + 2 * o5 + 1]) << 8 | a5 >>> 24) | 4278255360 & (a5 << 24 | a5 >>> 8);
                (I4 = i6[o5]).high ^= a5, I4.low ^= n5;
              }
              for (var h5 = 0; h5 < 24; h5++) {
                for (var p4 = 0; p4 < 5; p4++) {
                  for (var f4 = 0, d4 = 0, _5 = 0; _5 < 5; _5++)
                    f4 ^= (I4 = i6[p4 + 5 * _5]).high, d4 ^= I4.low;
                  var m4 = u4[p4];
                  m4.high = f4, m4.low = d4;
                }
                for (p4 = 0; p4 < 5; p4++) {
                  var g4 = u4[(p4 + 4) % 5], v4 = u4[(p4 + 1) % 5], y4 = v4.high, b4 = v4.low;
                  for (f4 = g4.high ^ (y4 << 1 | b4 >>> 31), d4 = g4.low ^ (b4 << 1 | y4 >>> 31), _5 = 0; _5 < 5; _5++)
                    (I4 = i6[p4 + 5 * _5]).high ^= f4, I4.low ^= d4;
                }
                for (var w4 = 1; w4 < 25; w4++) {
                  var x4 = (I4 = i6[w4]).high, T4 = I4.low, S4 = s4[w4];
                  d4 = S4 < 32 ? (f4 = x4 << S4 | T4 >>> 32 - S4, T4 << S4 | x4 >>> 32 - S4) : (f4 = T4 << S4 - 32 | x4 >>> 64 - S4, x4 << S4 - 32 | T4 >>> 64 - S4);
                  var E4 = u4[c4[w4]];
                  E4.high = f4, E4.low = d4;
                }
                var A4 = u4[0], k4 = i6[0];
                for (A4.high = k4.high, A4.low = k4.low, p4 = 0; p4 < 5; p4++)
                  for (_5 = 0; _5 < 5; _5++) {
                    var I4 = i6[w4 = p4 + 5 * _5], B4 = u4[w4], P4 = u4[(p4 + 1) % 5 + 5 * _5], C4 = u4[(p4 + 2) % 5 + 5 * _5];
                    I4.high = B4.high ^ ~P4.high & C4.high, I4.low = B4.low ^ ~P4.low & C4.low;
                  }
                var z4 = l4[h5];
                (I4 = i6[0]).high ^= z4.high, I4.low ^= z4.low;
              }
            }, _doFinalize: function() {
              var e6 = this._data, i6 = e6.words, o5 = 8 * e6.sigBytes, n5 = 32 * this.blockSize;
              i6[o5 >>> 5] |= 1 << 24 - o5 % 32, i6[(t3.ceil((1 + o5) / n5) * n5 >>> 5) - 1] |= 128, e6.sigBytes = 4 * i6.length, this._process();
              for (var a5 = this._state, s5 = this.cfg.outputLength / 8, c5 = s5 / 8, l5 = [], u5 = 0; u5 < c5; u5++) {
                var h5 = a5[u5], p4 = 16711935 & ((p4 = h5.high) << 8 | p4 >>> 24) | 4278255360 & (p4 << 24 | p4 >>> 8), f4 = 16711935 & ((f4 = h5.low) << 8 | f4 >>> 24) | 4278255360 & (f4 << 24 | f4 >>> 8);
                l5.push(f4), l5.push(p4);
              }
              return new r4.init(l5, s5);
            }, clone: function() {
              for (var t4 = o4.clone.call(this), e6 = t4._state = this._state.slice(0), i6 = 0; i6 < 25; i6++)
                e6[i6] = e6[i6].clone();
              return t4;
            } });
            e5.SHA3 = o4._createHelper(h4), e5.HmacSHA3 = o4._createHmacHelper(h4);
          }(Math), function() {
            var t3 = Ct2, e5 = t3.lib.Hasher, i5 = t3.x64, r4 = i5.Word, o4 = i5.WordArray, n4 = t3.algo;
            function a4() {
              return r4.create.apply(r4, arguments);
            }
            var s4 = [a4(1116352408, 3609767458), a4(1899447441, 602891725), a4(3049323471, 3964484399), a4(3921009573, 2173295548), a4(961987163, 4081628472), a4(1508970993, 3053834265), a4(2453635748, 2937671579), a4(2870763221, 3664609560), a4(3624381080, 2734883394), a4(310598401, 1164996542), a4(607225278, 1323610764), a4(1426881987, 3590304994), a4(1925078388, 4068182383), a4(2162078206, 991336113), a4(2614888103, 633803317), a4(3248222580, 3479774868), a4(3835390401, 2666613458), a4(4022224774, 944711139), a4(264347078, 2341262773), a4(604807628, 2007800933), a4(770255983, 1495990901), a4(1249150122, 1856431235), a4(1555081692, 3175218132), a4(1996064986, 2198950837), a4(2554220882, 3999719339), a4(2821834349, 766784016), a4(2952996808, 2566594879), a4(3210313671, 3203337956), a4(3336571891, 1034457026), a4(3584528711, 2466948901), a4(113926993, 3758326383), a4(338241895, 168717936), a4(666307205, 1188179964), a4(773529912, 1546045734), a4(1294757372, 1522805485), a4(1396182291, 2643833823), a4(1695183700, 2343527390), a4(1986661051, 1014477480), a4(2177026350, 1206759142), a4(2456956037, 344077627), a4(2730485921, 1290863460), a4(2820302411, 3158454273), a4(3259730800, 3505952657), a4(3345764771, 106217008), a4(3516065817, 3606008344), a4(3600352804, 1432725776), a4(4094571909, 1467031594), a4(275423344, 851169720), a4(430227734, 3100823752), a4(506948616, 1363258195), a4(659060556, 3750685593), a4(883997877, 3785050280), a4(958139571, 3318307427), a4(1322822218, 3812723403), a4(1537002063, 2003034995), a4(1747873779, 3602036899), a4(1955562222, 1575990012), a4(2024104815, 1125592928), a4(2227730452, 2716904306), a4(2361852424, 442776044), a4(2428436474, 593698344), a4(2756734187, 3733110249), a4(3204031479, 2999351573), a4(3329325298, 3815920427), a4(3391569614, 3928383900), a4(3515267271, 566280711), a4(3940187606, 3454069534), a4(4118630271, 4000239992), a4(116418474, 1914138554), a4(174292421, 2731055270), a4(289380356, 3203993006), a4(460393269, 320620315), a4(685471733, 587496836), a4(852142971, 1086792851), a4(1017036298, 365543100), a4(1126000580, 2618297676), a4(1288033470, 3409855158), a4(1501505948, 4234509866), a4(1607167915, 987167468), a4(1816402316, 1246189591)], c4 = [];
            !function() {
              for (var t4 = 0; t4 < 80; t4++)
                c4[t4] = a4();
            }();
            var l4 = n4.SHA512 = e5.extend({ _doReset: function() {
              this._hash = new o4.init([new r4.init(1779033703, 4089235720), new r4.init(3144134277, 2227873595), new r4.init(1013904242, 4271175723), new r4.init(2773480762, 1595750129), new r4.init(1359893119, 2917565137), new r4.init(2600822924, 725511199), new r4.init(528734635, 4215389547), new r4.init(1541459225, 327033209)]);
            }, _doProcessBlock: function(t4, e6) {
              for (var i6 = this._hash.words, r5 = i6[0], o5 = i6[1], n5 = i6[2], a5 = i6[3], l5 = i6[4], u4 = i6[5], h4 = i6[6], p4 = i6[7], f4 = r5.high, d4 = r5.low, _5 = o5.high, m4 = o5.low, g4 = n5.high, v4 = n5.low, y4 = a5.high, b4 = a5.low, w4 = l5.high, x4 = l5.low, T4 = u4.high, S4 = u4.low, E4 = h4.high, A4 = h4.low, k4 = p4.high, I4 = p4.low, B4 = f4, P4 = d4, C4 = _5, z4 = m4, D4 = g4, M4 = v4, L4 = y4, R4 = b4, O4 = w4, F4 = x4, U4 = T4, N4 = S4, j4 = E4, V4 = A4, q4 = k4, Z4 = I4, G4 = 0; G4 < 80; G4++) {
                var H4, W4, X4, K4, Y4, J4, Q4, $4, tt4, et4, it4, rt4, ot4, nt3, at3, st3 = c4[G4];
                G4 < 16 ? (at3 = st3.high = 0 | t4[e6 + 2 * G4], nt3 = st3.low = 0 | t4[e6 + 2 * G4 + 1]) : (K4 = ((W4 = (H4 = c4[G4 - 15]).high) >>> 1 | (X4 = H4.low) << 31) ^ (W4 >>> 8 | X4 << 24) ^ W4 >>> 7, tt4 = ((Q4 = (J4 = c4[G4 - 2]).high) >>> 19 | ($4 = J4.low) << 13) ^ (Q4 << 3 | $4 >>> 29) ^ Q4 >>> 6, at3 = (at3 = (at3 = K4 + (it4 = c4[G4 - 7]).high + ((nt3 = (Y4 = (X4 >>> 1 | W4 << 31) ^ (X4 >>> 8 | W4 << 24) ^ (X4 >>> 7 | W4 << 25)) + it4.low) >>> 0 < Y4 >>> 0 ? 1 : 0)) + tt4 + ((nt3 += et4 = ($4 >>> 19 | Q4 << 13) ^ ($4 << 3 | Q4 >>> 29) ^ ($4 >>> 6 | Q4 << 26)) >>> 0 < et4 >>> 0 ? 1 : 0)) + (rt4 = c4[G4 - 16]).high + ((nt3 += ot4 = rt4.low) >>> 0 < ot4 >>> 0 ? 1 : 0), st3.high = at3, st3.low = nt3);
                var ct3 = O4 & U4 ^ ~O4 & j4, lt3 = F4 & N4 ^ ~F4 & V4, ut3 = B4 & C4 ^ B4 & D4 ^ C4 & D4, ht3 = (P4 >>> 28 | B4 << 4) ^ (P4 << 30 | B4 >>> 2) ^ (P4 << 25 | B4 >>> 7), pt3 = s4[G4], ft3 = pt3.low, dt3 = Z4 + ((F4 >>> 14 | O4 << 18) ^ (F4 >>> 18 | O4 << 14) ^ (F4 << 23 | O4 >>> 9)), _t3 = q4 + ((O4 >>> 14 | F4 << 18) ^ (O4 >>> 18 | F4 << 14) ^ (O4 << 23 | F4 >>> 9)) + (dt3 >>> 0 < Z4 >>> 0 ? 1 : 0), mt3 = ht3 + (P4 & z4 ^ P4 & M4 ^ z4 & M4);
                q4 = j4, Z4 = V4, j4 = U4, V4 = N4, U4 = O4, N4 = F4, O4 = L4 + (_t3 = (_t3 = (_t3 = _t3 + ct3 + ((dt3 += lt3) >>> 0 < lt3 >>> 0 ? 1 : 0)) + pt3.high + ((dt3 += ft3) >>> 0 < ft3 >>> 0 ? 1 : 0)) + at3 + ((dt3 += nt3) >>> 0 < nt3 >>> 0 ? 1 : 0)) + ((F4 = R4 + dt3 | 0) >>> 0 < R4 >>> 0 ? 1 : 0) | 0, L4 = D4, R4 = M4, D4 = C4, M4 = z4, C4 = B4, z4 = P4, B4 = _t3 + (((B4 >>> 28 | P4 << 4) ^ (B4 << 30 | P4 >>> 2) ^ (B4 << 25 | P4 >>> 7)) + ut3 + (mt3 >>> 0 < ht3 >>> 0 ? 1 : 0)) + ((P4 = dt3 + mt3 | 0) >>> 0 < dt3 >>> 0 ? 1 : 0) | 0;
              }
              d4 = r5.low = d4 + P4, r5.high = f4 + B4 + (d4 >>> 0 < P4 >>> 0 ? 1 : 0), m4 = o5.low = m4 + z4, o5.high = _5 + C4 + (m4 >>> 0 < z4 >>> 0 ? 1 : 0), v4 = n5.low = v4 + M4, n5.high = g4 + D4 + (v4 >>> 0 < M4 >>> 0 ? 1 : 0), b4 = a5.low = b4 + R4, a5.high = y4 + L4 + (b4 >>> 0 < R4 >>> 0 ? 1 : 0), x4 = l5.low = x4 + F4, l5.high = w4 + O4 + (x4 >>> 0 < F4 >>> 0 ? 1 : 0), S4 = u4.low = S4 + N4, u4.high = T4 + U4 + (S4 >>> 0 < N4 >>> 0 ? 1 : 0), A4 = h4.low = A4 + V4, h4.high = E4 + j4 + (A4 >>> 0 < V4 >>> 0 ? 1 : 0), I4 = p4.low = I4 + Z4, p4.high = k4 + q4 + (I4 >>> 0 < Z4 >>> 0 ? 1 : 0);
            }, _doFinalize: function() {
              var t4 = this._data, e6 = t4.words, i6 = 8 * this._nDataBytes, r5 = 8 * t4.sigBytes;
              return e6[r5 >>> 5] |= 128 << 24 - r5 % 32, e6[30 + (128 + r5 >>> 10 << 5)] = Math.floor(i6 / 4294967296), e6[31 + (128 + r5 >>> 10 << 5)] = i6, t4.sigBytes = 4 * e6.length, this._process(), this._hash.toX32();
            }, clone: function() {
              var t4 = e5.clone.call(this);
              return t4._hash = this._hash.clone(), t4;
            }, blockSize: 32 });
            t3.SHA512 = e5._createHelper(l4), t3.HmacSHA512 = e5._createHmacHelper(l4);
          }(), rt3 = (it3 = Ct2).x64, ot3 = rt3.Word, nt2 = rt3.WordArray, ct2 = (at2 = it3.algo).SHA384 = (st2 = at2.SHA512).extend({ _doReset: function() {
            this._hash = new nt2.init([new ot3.init(3418070365, 3238371032), new ot3.init(1654270250, 914150663), new ot3.init(2438529370, 812702999), new ot3.init(355462360, 4144912697), new ot3.init(1731405415, 4290775857), new ot3.init(2394180231, 1750603025), new ot3.init(3675008525, 1694076839), new ot3.init(1203062813, 3204075428)]);
          }, _doFinalize: function() {
            var t3 = st2._doFinalize.call(this);
            return t3.sigBytes -= 16, t3;
          } }), it3.SHA384 = st2._createHelper(ct2), it3.HmacSHA384 = st2._createHmacHelper(ct2), Ct2.lib.Cipher || function() {
            var t3 = Ct2, e5 = t3.lib, i5 = e5.Base, r4 = e5.WordArray, o4 = e5.BufferedBlockAlgorithm, n4 = t3.enc.Base64, a4 = t3.algo.EvpKDF, s4 = e5.Cipher = o4.extend({ cfg: i5.extend(), createEncryptor: function(t4, e6) {
              return this.create(this._ENC_XFORM_MODE, t4, e6);
            }, createDecryptor: function(t4, e6) {
              return this.create(this._DEC_XFORM_MODE, t4, e6);
            }, init: function(t4, e6, i6) {
              this.cfg = this.cfg.extend(i6), this._xformMode = t4, this._key = e6, this.reset();
            }, reset: function() {
              o4.reset.call(this), this._doReset();
            }, process: function(t4) {
              return this._append(t4), this._process();
            }, finalize: function(t4) {
              return t4 && this._append(t4), this._doFinalize();
            }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function(t4) {
              return { encrypt: function(e6, i6, r5) {
                return c4(i6).encrypt(t4, e6, i6, r5);
              }, decrypt: function(e6, i6, r5) {
                return c4(i6).decrypt(t4, e6, i6, r5);
              } };
            } });
            function c4(t4) {
              return "string" == typeof t4 ? y4 : g4;
            }
            e5.StreamCipher = s4.extend({ _doFinalize: function() {
              return this._process(true);
            }, blockSize: 1 });
            var l4, u4 = t3.mode = {}, h4 = e5.BlockCipherMode = i5.extend({ createEncryptor: function(t4, e6) {
              return this.Encryptor.create(t4, e6);
            }, createDecryptor: function(t4, e6) {
              return this.Decryptor.create(t4, e6);
            }, init: function(t4, e6) {
              this._cipher = t4, this._iv = e6;
            } }), p4 = u4.CBC = ((l4 = h4.extend()).Encryptor = l4.extend({ processBlock: function(t4, e6) {
              var i6 = this._cipher, r5 = i6.blockSize;
              f4.call(this, t4, e6, r5), i6.encryptBlock(t4, e6), this._prevBlock = t4.slice(e6, e6 + r5);
            } }), l4.Decryptor = l4.extend({ processBlock: function(t4, e6) {
              var i6 = this._cipher, r5 = i6.blockSize, o5 = t4.slice(e6, e6 + r5);
              i6.decryptBlock(t4, e6), f4.call(this, t4, e6, r5), this._prevBlock = o5;
            } }), l4);
            function f4(t4, e6, i6) {
              var r5, o5 = this._iv;
              o5 ? (r5 = o5, this._iv = void 0) : r5 = this._prevBlock;
              for (var n5 = 0; n5 < i6; n5++)
                t4[e6 + n5] ^= r5[n5];
            }
            var d4 = (t3.pad = {}).Pkcs7 = { pad: function(t4, e6) {
              for (var i6 = 4 * e6, o5 = i6 - t4.sigBytes % i6, n5 = o5 << 24 | o5 << 16 | o5 << 8 | o5, a5 = [], s5 = 0; s5 < o5; s5 += 4)
                a5.push(n5);
              var c5 = r4.create(a5, o5);
              t4.concat(c5);
            }, unpad: function(t4) {
              t4.sigBytes -= 255 & t4.words[t4.sigBytes - 1 >>> 2];
            } }, _5 = (e5.BlockCipher = s4.extend({ cfg: s4.cfg.extend({ mode: p4, padding: d4 }), reset: function() {
              s4.reset.call(this);
              var t4, e6 = this.cfg, i6 = e6.iv, r5 = e6.mode;
              this._xformMode == this._ENC_XFORM_MODE ? t4 = r5.createEncryptor : (t4 = r5.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == t4 ? this._mode.init(this, i6 && i6.words) : (this._mode = t4.call(r5, this, i6 && i6.words), this._mode.__creator = t4);
            }, _doProcessBlock: function(t4, e6) {
              this._mode.processBlock(t4, e6);
            }, _doFinalize: function() {
              var t4, e6 = this.cfg.padding;
              return this._xformMode == this._ENC_XFORM_MODE ? (e6.pad(this._data, this.blockSize), t4 = this._process(true)) : (t4 = this._process(true), e6.unpad(t4)), t4;
            }, blockSize: 4 }), e5.CipherParams = i5.extend({ init: function(t4) {
              this.mixIn(t4);
            }, toString: function(t4) {
              return (t4 || this.formatter).stringify(this);
            } })), m4 = (t3.format = {}).OpenSSL = { stringify: function(t4) {
              var e6 = t4.ciphertext, i6 = t4.salt;
              return (i6 ? r4.create([1398893684, 1701076831]).concat(i6).concat(e6) : e6).toString(n4);
            }, parse: function(t4) {
              var e6, i6 = n4.parse(t4), o5 = i6.words;
              return 1398893684 == o5[0] && 1701076831 == o5[1] && (e6 = r4.create(o5.slice(2, 4)), o5.splice(0, 4), i6.sigBytes -= 16), _5.create({ ciphertext: i6, salt: e6 });
            } }, g4 = e5.SerializableCipher = i5.extend({ cfg: i5.extend({ format: m4 }), encrypt: function(t4, e6, i6, r5) {
              r5 = this.cfg.extend(r5);
              var o5 = t4.createEncryptor(i6, r5), n5 = o5.finalize(e6), a5 = o5.cfg;
              return _5.create({ ciphertext: n5, key: i6, iv: a5.iv, algorithm: t4, mode: a5.mode, padding: a5.padding, blockSize: t4.blockSize, formatter: r5.format });
            }, decrypt: function(t4, e6, i6, r5) {
              return r5 = this.cfg.extend(r5), e6 = this._parse(e6, r5.format), t4.createDecryptor(i6, r5).finalize(e6.ciphertext);
            }, _parse: function(t4, e6) {
              return "string" == typeof t4 ? e6.parse(t4, this) : t4;
            } }), v4 = (t3.kdf = {}).OpenSSL = { execute: function(t4, e6, i6, o5) {
              o5 = o5 || r4.random(8);
              var n5 = a4.create({ keySize: e6 + i6 }).compute(t4, o5), s5 = r4.create(n5.words.slice(e6), 4 * i6);
              return n5.sigBytes = 4 * e6, _5.create({ key: n5, iv: s5, salt: o5 });
            } }, y4 = e5.PasswordBasedCipher = g4.extend({ cfg: g4.cfg.extend({ kdf: v4 }), encrypt: function(t4, e6, i6, r5) {
              var o5 = (r5 = this.cfg.extend(r5)).kdf.execute(i6, t4.keySize, t4.ivSize);
              r5.iv = o5.iv;
              var n5 = g4.encrypt.call(this, t4, e6, o5.key, r5);
              return n5.mixIn(o5), n5;
            }, decrypt: function(t4, e6, i6, r5) {
              r5 = this.cfg.extend(r5), e6 = this._parse(e6, r5.format);
              var o5 = r5.kdf.execute(i6, t4.keySize, t4.ivSize, e6.salt);
              return r5.iv = o5.iv, g4.decrypt.call(this, t4, e6, o5.key, r5);
            } });
          }(), Ct2.mode.CFB = ((lt2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = lt2.extend({ processBlock: function(t3, e5) {
            var i5 = this._cipher, r4 = i5.blockSize;
            Rt2.call(this, t3, e5, r4, i5), this._prevBlock = t3.slice(e5, e5 + r4);
          } }), lt2.Decryptor = lt2.extend({ processBlock: function(t3, e5) {
            var i5 = this._cipher, r4 = i5.blockSize, o4 = t3.slice(e5, e5 + r4);
            Rt2.call(this, t3, e5, r4, i5), this._prevBlock = o4;
          } }), lt2), Ct2.mode.ECB = ((ut2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = ut2.extend({ processBlock: function(t3, e5) {
            this._cipher.encryptBlock(t3, e5);
          } }), ut2.Decryptor = ut2.extend({ processBlock: function(t3, e5) {
            this._cipher.decryptBlock(t3, e5);
          } }), ut2), Ct2.pad.AnsiX923 = { pad: function(t3, e5) {
            var i5 = t3.sigBytes, r4 = 4 * e5, o4 = r4 - i5 % r4, n4 = i5 + o4 - 1;
            t3.clamp(), t3.words[n4 >>> 2] |= o4 << 24 - n4 % 4 * 8, t3.sigBytes += o4;
          }, unpad: function(t3) {
            t3.sigBytes -= 255 & t3.words[t3.sigBytes - 1 >>> 2];
          } }, Ct2.pad.Iso10126 = { pad: function(t3, e5) {
            var i5 = 4 * e5, r4 = i5 - t3.sigBytes % i5;
            t3.concat(Ct2.lib.WordArray.random(r4 - 1)).concat(Ct2.lib.WordArray.create([r4 << 24], 1));
          }, unpad: function(t3) {
            t3.sigBytes -= 255 & t3.words[t3.sigBytes - 1 >>> 2];
          } }, Ct2.pad.Iso97971 = { pad: function(t3, e5) {
            t3.concat(Ct2.lib.WordArray.create([2147483648], 1)), Ct2.pad.ZeroPadding.pad(t3, e5);
          }, unpad: function(t3) {
            Ct2.pad.ZeroPadding.unpad(t3), t3.sigBytes--;
          } }, Ct2.mode.OFB = (pt2 = (ht2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = ht2.extend({ processBlock: function(t3, e5) {
            var i5 = this._cipher, r4 = i5.blockSize, o4 = this._iv, n4 = this._keystream;
            o4 && (n4 = this._keystream = o4.slice(0), this._iv = void 0), i5.encryptBlock(n4, 0);
            for (var a4 = 0; a4 < r4; a4++)
              t3[e5 + a4] ^= n4[a4];
          } }), ht2.Decryptor = pt2, ht2), Ct2.pad.NoPadding = { pad: function() {
          }, unpad: function() {
          } }, ft2 = Ct2.lib.CipherParams, dt2 = Ct2.enc.Hex, Ct2.format.Hex = { stringify: function(t3) {
            return t3.ciphertext.toString(dt2);
          }, parse: function(t3) {
            var e5 = dt2.parse(t3);
            return ft2.create({ ciphertext: e5 });
          } }, function() {
            var t3 = Ct2, e5 = t3.lib.BlockCipher, i5 = t3.algo, r4 = [], o4 = [], n4 = [], a4 = [], s4 = [], c4 = [], l4 = [], u4 = [], h4 = [], p4 = [];
            !function() {
              for (var t4 = [], e6 = 0; e6 < 256; e6++)
                t4[e6] = e6 < 128 ? e6 << 1 : e6 << 1 ^ 283;
              var i6 = 0, f5 = 0;
              for (e6 = 0; e6 < 256; e6++) {
                var d5 = (d5 = f5 ^ f5 << 1 ^ f5 << 2 ^ f5 << 3 ^ f5 << 4) >>> 8 ^ 255 & d5 ^ 99;
                r4[i6] = d5;
                var _5 = t4[o4[d5] = i6], m4 = t4[_5], g4 = t4[m4], v4 = 257 * t4[d5] ^ 16843008 * d5;
                n4[i6] = v4 << 24 | v4 >>> 8, a4[i6] = v4 << 16 | v4 >>> 16, s4[i6] = v4 << 8 | v4 >>> 24, c4[i6] = v4, l4[d5] = (v4 = 16843009 * g4 ^ 65537 * m4 ^ 257 * _5 ^ 16843008 * i6) << 24 | v4 >>> 8, u4[d5] = v4 << 16 | v4 >>> 16, h4[d5] = v4 << 8 | v4 >>> 24, p4[d5] = v4, i6 ? (i6 = _5 ^ t4[t4[t4[g4 ^ _5]]], f5 ^= t4[t4[f5]]) : i6 = f5 = 1;
              }
            }();
            var f4 = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], d4 = i5.AES = e5.extend({ _doReset: function() {
              if (!this._nRounds || this._keyPriorReset !== this._key) {
                for (var t4 = this._keyPriorReset = this._key, e6 = t4.words, i6 = t4.sigBytes / 4, o5 = 4 * (1 + (this._nRounds = 6 + i6)), n5 = this._keySchedule = [], a5 = 0; a5 < o5; a5++)
                  a5 < i6 ? n5[a5] = e6[a5] : (d5 = n5[a5 - 1], a5 % i6 ? 6 < i6 && a5 % i6 == 4 && (d5 = r4[d5 >>> 24] << 24 | r4[d5 >>> 16 & 255] << 16 | r4[d5 >>> 8 & 255] << 8 | r4[255 & d5]) : (d5 = r4[(d5 = d5 << 8 | d5 >>> 24) >>> 24] << 24 | r4[d5 >>> 16 & 255] << 16 | r4[d5 >>> 8 & 255] << 8 | r4[255 & d5], d5 ^= f4[a5 / i6 | 0] << 24), n5[a5] = n5[a5 - i6] ^ d5);
                for (var s5 = this._invKeySchedule = [], c5 = 0; c5 < o5; c5++) {
                  var d5;
                  a5 = o5 - c5, d5 = c5 % 4 ? n5[a5] : n5[a5 - 4], s5[c5] = c5 < 4 || a5 <= 4 ? d5 : l4[r4[d5 >>> 24]] ^ u4[r4[d5 >>> 16 & 255]] ^ h4[r4[d5 >>> 8 & 255]] ^ p4[r4[255 & d5]];
                }
              }
            }, encryptBlock: function(t4, e6) {
              this._doCryptBlock(t4, e6, this._keySchedule, n4, a4, s4, c4, r4);
            }, decryptBlock: function(t4, e6) {
              var i6 = t4[e6 + 1];
              t4[e6 + 1] = t4[e6 + 3], t4[e6 + 3] = i6, this._doCryptBlock(t4, e6, this._invKeySchedule, l4, u4, h4, p4, o4), i6 = t4[e6 + 1], t4[e6 + 1] = t4[e6 + 3], t4[e6 + 3] = i6;
            }, _doCryptBlock: function(t4, e6, i6, r5, o5, n5, a5, s5) {
              for (var c5 = this._nRounds, l5 = t4[e6] ^ i6[0], u5 = t4[e6 + 1] ^ i6[1], h5 = t4[e6 + 2] ^ i6[2], p5 = t4[e6 + 3] ^ i6[3], f5 = 4, d5 = 1; d5 < c5; d5++) {
                var _5 = r5[l5 >>> 24] ^ o5[u5 >>> 16 & 255] ^ n5[h5 >>> 8 & 255] ^ a5[255 & p5] ^ i6[f5++], m4 = r5[u5 >>> 24] ^ o5[h5 >>> 16 & 255] ^ n5[p5 >>> 8 & 255] ^ a5[255 & l5] ^ i6[f5++], g4 = r5[h5 >>> 24] ^ o5[p5 >>> 16 & 255] ^ n5[l5 >>> 8 & 255] ^ a5[255 & u5] ^ i6[f5++], v4 = r5[p5 >>> 24] ^ o5[l5 >>> 16 & 255] ^ n5[u5 >>> 8 & 255] ^ a5[255 & h5] ^ i6[f5++];
                l5 = _5, u5 = m4, h5 = g4, p5 = v4;
              }
              _5 = (s5[l5 >>> 24] << 24 | s5[u5 >>> 16 & 255] << 16 | s5[h5 >>> 8 & 255] << 8 | s5[255 & p5]) ^ i6[f5++], m4 = (s5[u5 >>> 24] << 24 | s5[h5 >>> 16 & 255] << 16 | s5[p5 >>> 8 & 255] << 8 | s5[255 & l5]) ^ i6[f5++], g4 = (s5[h5 >>> 24] << 24 | s5[p5 >>> 16 & 255] << 16 | s5[l5 >>> 8 & 255] << 8 | s5[255 & u5]) ^ i6[f5++], v4 = (s5[p5 >>> 24] << 24 | s5[l5 >>> 16 & 255] << 16 | s5[u5 >>> 8 & 255] << 8 | s5[255 & h5]) ^ i6[f5++], t4[e6] = _5, t4[e6 + 1] = m4, t4[e6 + 2] = g4, t4[e6 + 3] = v4;
            }, keySize: 8 });
            t3.AES = e5._createHelper(d4);
          }(), function() {
            var t3 = Ct2, e5 = t3.lib, i5 = e5.WordArray, r4 = e5.BlockCipher, o4 = t3.algo, n4 = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4], a4 = [14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32], s4 = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28], c4 = [{ 0: 8421888, 268435456: 32768, 536870912: 8421378, 805306368: 2, 1073741824: 512, 1342177280: 8421890, 1610612736: 8389122, 1879048192: 8388608, 2147483648: 514, 2415919104: 8389120, 2684354560: 33280, 2952790016: 8421376, 3221225472: 32770, 3489660928: 8388610, 3758096384: 0, 4026531840: 33282, 134217728: 0, 402653184: 8421890, 671088640: 33282, 939524096: 32768, 1207959552: 8421888, 1476395008: 512, 1744830464: 8421378, 2013265920: 2, 2281701376: 8389120, 2550136832: 33280, 2818572288: 8421376, 3087007744: 8389122, 3355443200: 8388610, 3623878656: 32770, 3892314112: 514, 4160749568: 8388608, 1: 32768, 268435457: 2, 536870913: 8421888, 805306369: 8388608, 1073741825: 8421378, 1342177281: 33280, 1610612737: 512, 1879048193: 8389122, 2147483649: 8421890, 2415919105: 8421376, 2684354561: 8388610, 2952790017: 33282, 3221225473: 514, 3489660929: 8389120, 3758096385: 32770, 4026531841: 0, 134217729: 8421890, 402653185: 8421376, 671088641: 8388608, 939524097: 512, 1207959553: 32768, 1476395009: 8388610, 1744830465: 2, 2013265921: 33282, 2281701377: 32770, 2550136833: 8389122, 2818572289: 514, 3087007745: 8421888, 3355443201: 8389120, 3623878657: 0, 3892314113: 33280, 4160749569: 8421378 }, { 0: 1074282512, 16777216: 16384, 33554432: 524288, 50331648: 1074266128, 67108864: 1073741840, 83886080: 1074282496, 100663296: 1073758208, 117440512: 16, 134217728: 540672, 150994944: 1073758224, 167772160: 1073741824, 184549376: 540688, 201326592: 524304, 218103808: 0, 234881024: 16400, 251658240: 1074266112, 8388608: 1073758208, 25165824: 540688, 41943040: 16, 58720256: 1073758224, 75497472: 1074282512, 92274688: 1073741824, 109051904: 524288, 125829120: 1074266128, 142606336: 524304, 159383552: 0, 176160768: 16384, 192937984: 1074266112, 209715200: 1073741840, 226492416: 540672, 243269632: 1074282496, 260046848: 16400, 268435456: 0, 285212672: 1074266128, 301989888: 1073758224, 318767104: 1074282496, 335544320: 1074266112, 352321536: 16, 369098752: 540688, 385875968: 16384, 402653184: 16400, 419430400: 524288, 436207616: 524304, 452984832: 1073741840, 469762048: 540672, 486539264: 1073758208, 503316480: 1073741824, 520093696: 1074282512, 276824064: 540688, 293601280: 524288, 310378496: 1074266112, 327155712: 16384, 343932928: 1073758208, 360710144: 1074282512, 377487360: 16, 394264576: 1073741824, 411041792: 1074282496, 427819008: 1073741840, 444596224: 1073758224, 461373440: 524304, 478150656: 0, 494927872: 16400, 511705088: 1074266128, 528482304: 540672 }, { 0: 260, 1048576: 0, 2097152: 67109120, 3145728: 65796, 4194304: 65540, 5242880: 67108868, 6291456: 67174660, 7340032: 67174400, 8388608: 67108864, 9437184: 67174656, 10485760: 65792, 11534336: 67174404, 12582912: 67109124, 13631488: 65536, 14680064: 4, 15728640: 256, 524288: 67174656, 1572864: 67174404, 2621440: 0, 3670016: 67109120, 4718592: 67108868, 5767168: 65536, 6815744: 65540, 7864320: 260, 8912896: 4, 9961472: 256, 11010048: 67174400, 12058624: 65796, 13107200: 65792, 14155776: 67109124, 15204352: 67174660, 16252928: 67108864, 16777216: 67174656, 17825792: 65540, 18874368: 65536, 19922944: 67109120, 20971520: 256, 22020096: 67174660, 23068672: 67108868, 24117248: 0, 25165824: 67109124, 26214400: 67108864, 27262976: 4, 28311552: 65792, 29360128: 67174400, 30408704: 260, 31457280: 65796, 32505856: 67174404, 17301504: 67108864, 18350080: 260, 19398656: 67174656, 20447232: 0, 21495808: 65540, 22544384: 67109120, 23592960: 256, 24641536: 67174404, 25690112: 65536, 26738688: 67174660, 27787264: 65796, 28835840: 67108868, 29884416: 67109124, 30932992: 67174400, 31981568: 4, 33030144: 65792 }, { 0: 2151682048, 65536: 2147487808, 131072: 4198464, 196608: 2151677952, 262144: 0, 327680: 4198400, 393216: 2147483712, 458752: 4194368, 524288: 2147483648, 589824: 4194304, 655360: 64, 720896: 2147487744, 786432: 2151678016, 851968: 4160, 917504: 4096, 983040: 2151682112, 32768: 2147487808, 98304: 64, 163840: 2151678016, 229376: 2147487744, 294912: 4198400, 360448: 2151682112, 425984: 0, 491520: 2151677952, 557056: 4096, 622592: 2151682048, 688128: 4194304, 753664: 4160, 819200: 2147483648, 884736: 4194368, 950272: 4198464, 1015808: 2147483712, 1048576: 4194368, 1114112: 4198400, 1179648: 2147483712, 1245184: 0, 1310720: 4160, 1376256: 2151678016, 1441792: 2151682048, 1507328: 2147487808, 1572864: 2151682112, 1638400: 2147483648, 1703936: 2151677952, 1769472: 4198464, 1835008: 2147487744, 1900544: 4194304, 1966080: 64, 2031616: 4096, 1081344: 2151677952, 1146880: 2151682112, 1212416: 0, 1277952: 4198400, 1343488: 4194368, 1409024: 2147483648, 1474560: 2147487808, 1540096: 64, 1605632: 2147483712, 1671168: 4096, 1736704: 2147487744, 1802240: 2151678016, 1867776: 4160, 1933312: 2151682048, 1998848: 4194304, 2064384: 4198464 }, { 0: 128, 4096: 17039360, 8192: 262144, 12288: 536870912, 16384: 537133184, 20480: 16777344, 24576: 553648256, 28672: 262272, 32768: 16777216, 36864: 537133056, 40960: 536871040, 45056: 553910400, 49152: 553910272, 53248: 0, 57344: 17039488, 61440: 553648128, 2048: 17039488, 6144: 553648256, 10240: 128, 14336: 17039360, 18432: 262144, 22528: 537133184, 26624: 553910272, 30720: 536870912, 34816: 537133056, 38912: 0, 43008: 553910400, 47104: 16777344, 51200: 536871040, 55296: 553648128, 59392: 16777216, 63488: 262272, 65536: 262144, 69632: 128, 73728: 536870912, 77824: 553648256, 81920: 16777344, 86016: 553910272, 90112: 537133184, 94208: 16777216, 98304: 553910400, 102400: 553648128, 106496: 17039360, 110592: 537133056, 114688: 262272, 118784: 536871040, 122880: 0, 126976: 17039488, 67584: 553648256, 71680: 16777216, 75776: 17039360, 79872: 537133184, 83968: 536870912, 88064: 17039488, 92160: 128, 96256: 553910272, 100352: 262272, 104448: 553910400, 108544: 0, 112640: 553648128, 116736: 16777344, 120832: 262144, 124928: 537133056, 129024: 536871040 }, { 0: 268435464, 256: 8192, 512: 270532608, 768: 270540808, 1024: 268443648, 1280: 2097152, 1536: 2097160, 1792: 268435456, 2048: 0, 2304: 268443656, 2560: 2105344, 2816: 8, 3072: 270532616, 3328: 2105352, 3584: 8200, 3840: 270540800, 128: 270532608, 384: 270540808, 640: 8, 896: 2097152, 1152: 2105352, 1408: 268435464, 1664: 268443648, 1920: 8200, 2176: 2097160, 2432: 8192, 2688: 268443656, 2944: 270532616, 3200: 0, 3456: 270540800, 3712: 2105344, 3968: 268435456, 4096: 268443648, 4352: 270532616, 4608: 270540808, 4864: 8200, 5120: 2097152, 5376: 268435456, 5632: 268435464, 5888: 2105344, 6144: 2105352, 6400: 0, 6656: 8, 6912: 270532608, 7168: 8192, 7424: 268443656, 7680: 270540800, 7936: 2097160, 4224: 8, 4480: 2105344, 4736: 2097152, 4992: 268435464, 5248: 268443648, 5504: 8200, 5760: 270540808, 6016: 270532608, 6272: 270540800, 6528: 270532616, 6784: 8192, 7040: 2105352, 7296: 2097160, 7552: 0, 7808: 268435456, 8064: 268443656 }, { 0: 1048576, 16: 33555457, 32: 1024, 48: 1049601, 64: 34604033, 80: 0, 96: 1, 112: 34603009, 128: 33555456, 144: 1048577, 160: 33554433, 176: 34604032, 192: 34603008, 208: 1025, 224: 1049600, 240: 33554432, 8: 34603009, 24: 0, 40: 33555457, 56: 34604032, 72: 1048576, 88: 33554433, 104: 33554432, 120: 1025, 136: 1049601, 152: 33555456, 168: 34603008, 184: 1048577, 200: 1024, 216: 34604033, 232: 1, 248: 1049600, 256: 33554432, 272: 1048576, 288: 33555457, 304: 34603009, 320: 1048577, 336: 33555456, 352: 34604032, 368: 1049601, 384: 1025, 400: 34604033, 416: 1049600, 432: 1, 448: 0, 464: 34603008, 480: 33554433, 496: 1024, 264: 1049600, 280: 33555457, 296: 34603009, 312: 1, 328: 33554432, 344: 1048576, 360: 1025, 376: 34604032, 392: 33554433, 408: 34603008, 424: 0, 440: 34604033, 456: 1049601, 472: 1024, 488: 33555456, 504: 1048577 }, { 0: 134219808, 1: 131072, 2: 134217728, 3: 32, 4: 131104, 5: 134350880, 6: 134350848, 7: 2048, 8: 134348800, 9: 134219776, 10: 133120, 11: 134348832, 12: 2080, 13: 0, 14: 134217760, 15: 133152, 2147483648: 2048, 2147483649: 134350880, 2147483650: 134219808, 2147483651: 134217728, 2147483652: 134348800, 2147483653: 133120, 2147483654: 133152, 2147483655: 32, 2147483656: 134217760, 2147483657: 2080, 2147483658: 131104, 2147483659: 134350848, 2147483660: 0, 2147483661: 134348832, 2147483662: 134219776, 2147483663: 131072, 16: 133152, 17: 134350848, 18: 32, 19: 2048, 20: 134219776, 21: 134217760, 22: 134348832, 23: 131072, 24: 0, 25: 131104, 26: 134348800, 27: 134219808, 28: 134350880, 29: 133120, 30: 2080, 31: 134217728, 2147483664: 131072, 2147483665: 2048, 2147483666: 134348832, 2147483667: 133152, 2147483668: 32, 2147483669: 134348800, 2147483670: 134217728, 2147483671: 134219808, 2147483672: 134350880, 2147483673: 134217760, 2147483674: 134219776, 2147483675: 0, 2147483676: 133120, 2147483677: 2080, 2147483678: 131104, 2147483679: 134350848 }], l4 = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679], u4 = o4.DES = r4.extend({ _doReset: function() {
              for (var t4 = this._key.words, e6 = [], i6 = 0; i6 < 56; i6++) {
                var r5 = n4[i6] - 1;
                e6[i6] = t4[r5 >>> 5] >>> 31 - r5 % 32 & 1;
              }
              for (var o5 = this._subKeys = [], c5 = 0; c5 < 16; c5++) {
                var l5 = o5[c5] = [], u5 = s4[c5];
                for (i6 = 0; i6 < 24; i6++)
                  l5[i6 / 6 | 0] |= e6[(a4[i6] - 1 + u5) % 28] << 31 - i6 % 6, l5[4 + (i6 / 6 | 0)] |= e6[28 + (a4[i6 + 24] - 1 + u5) % 28] << 31 - i6 % 6;
                for (l5[0] = l5[0] << 1 | l5[0] >>> 31, i6 = 1; i6 < 7; i6++)
                  l5[i6] = l5[i6] >>> 4 * (i6 - 1) + 3;
                l5[7] = l5[7] << 5 | l5[7] >>> 27;
              }
              var h5 = this._invSubKeys = [];
              for (i6 = 0; i6 < 16; i6++)
                h5[i6] = o5[15 - i6];
            }, encryptBlock: function(t4, e6) {
              this._doCryptBlock(t4, e6, this._subKeys);
            }, decryptBlock: function(t4, e6) {
              this._doCryptBlock(t4, e6, this._invSubKeys);
            }, _doCryptBlock: function(t4, e6, i6) {
              this._lBlock = t4[e6], this._rBlock = t4[e6 + 1], h4.call(this, 4, 252645135), h4.call(this, 16, 65535), p4.call(this, 2, 858993459), p4.call(this, 8, 16711935), h4.call(this, 1, 1431655765);
              for (var r5 = 0; r5 < 16; r5++) {
                for (var o5 = i6[r5], n5 = this._lBlock, a5 = this._rBlock, s5 = 0, u5 = 0; u5 < 8; u5++)
                  s5 |= c4[u5][((a5 ^ o5[u5]) & l4[u5]) >>> 0];
                this._lBlock = a5, this._rBlock = n5 ^ s5;
              }
              var f5 = this._lBlock;
              this._lBlock = this._rBlock, this._rBlock = f5, h4.call(this, 1, 1431655765), p4.call(this, 8, 16711935), p4.call(this, 2, 858993459), h4.call(this, 16, 65535), h4.call(this, 4, 252645135), t4[e6] = this._lBlock, t4[e6 + 1] = this._rBlock;
            }, keySize: 2, ivSize: 2, blockSize: 2 });
            function h4(t4, e6) {
              var i6 = (this._lBlock >>> t4 ^ this._rBlock) & e6;
              this._rBlock ^= i6, this._lBlock ^= i6 << t4;
            }
            function p4(t4, e6) {
              var i6 = (this._rBlock >>> t4 ^ this._lBlock) & e6;
              this._lBlock ^= i6, this._rBlock ^= i6 << t4;
            }
            t3.DES = r4._createHelper(u4);
            var f4 = o4.TripleDES = r4.extend({ _doReset: function() {
              var t4 = this._key.words;
              this._des1 = u4.createEncryptor(i5.create(t4.slice(0, 2))), this._des2 = u4.createEncryptor(i5.create(t4.slice(2, 4))), this._des3 = u4.createEncryptor(i5.create(t4.slice(4, 6)));
            }, encryptBlock: function(t4, e6) {
              this._des1.encryptBlock(t4, e6), this._des2.decryptBlock(t4, e6), this._des3.encryptBlock(t4, e6);
            }, decryptBlock: function(t4, e6) {
              this._des3.decryptBlock(t4, e6), this._des2.encryptBlock(t4, e6), this._des1.decryptBlock(t4, e6);
            }, keySize: 6, ivSize: 2, blockSize: 2 });
            t3.TripleDES = r4._createHelper(f4);
          }(), function() {
            var t3 = Ct2, e5 = t3.lib.StreamCipher, i5 = t3.algo, r4 = i5.RC4 = e5.extend({ _doReset: function() {
              for (var t4 = this._key, e6 = t4.words, i6 = t4.sigBytes, r5 = this._S = [], o5 = 0; o5 < 256; o5++)
                r5[o5] = o5;
              o5 = 0;
              for (var n5 = 0; o5 < 256; o5++) {
                var a4 = o5 % i6, s4 = r5[o5];
                r5[o5] = r5[n5 = (n5 + r5[o5] + (e6[a4 >>> 2] >>> 24 - a4 % 4 * 8 & 255)) % 256], r5[n5] = s4;
              }
              this._i = this._j = 0;
            }, _doProcessBlock: function(t4, e6) {
              t4[e6] ^= o4.call(this);
            }, keySize: 8, ivSize: 0 });
            function o4() {
              for (var t4 = this._S, e6 = this._i, i6 = this._j, r5 = 0, o5 = 0; o5 < 4; o5++) {
                i6 = (i6 + t4[e6 = (e6 + 1) % 256]) % 256;
                var n5 = t4[e6];
                t4[e6] = t4[i6], t4[i6] = n5, r5 |= t4[(t4[e6] + t4[i6]) % 256] << 24 - 8 * o5;
              }
              return this._i = e6, this._j = i6, r5;
            }
            t3.RC4 = e5._createHelper(r4);
            var n4 = i5.RC4Drop = r4.extend({ cfg: r4.cfg.extend({ drop: 192 }), _doReset: function() {
              r4._doReset.call(this);
              for (var t4 = this.cfg.drop; 0 < t4; t4--)
                o4.call(this);
            } });
            t3.RC4Drop = e5._createHelper(n4);
          }(), Ct2.mode.CTRGladman = (mt2 = (_t2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = _t2.extend({ processBlock: function(t3, e5) {
            var i5, r4 = this._cipher, o4 = r4.blockSize, n4 = this._iv, a4 = this._counter;
            n4 && (a4 = this._counter = n4.slice(0), this._iv = void 0), 0 === ((i5 = a4)[0] = Ot2(i5[0])) && (i5[1] = Ot2(i5[1]));
            var s4 = a4.slice(0);
            r4.encryptBlock(s4, 0);
            for (var c4 = 0; c4 < o4; c4++)
              t3[e5 + c4] ^= s4[c4];
          } }), _t2.Decryptor = mt2, _t2), vt2 = (gt2 = Ct2).lib.StreamCipher, yt2 = [], bt2 = [], wt2 = [], xt2 = gt2.algo.Rabbit = vt2.extend({ _doReset: function() {
            for (var t3 = this._key.words, e5 = this.cfg.iv, i5 = 0; i5 < 4; i5++)
              t3[i5] = 16711935 & (t3[i5] << 8 | t3[i5] >>> 24) | 4278255360 & (t3[i5] << 24 | t3[i5] >>> 8);
            var r4 = this._X = [t3[0], t3[3] << 16 | t3[2] >>> 16, t3[1], t3[0] << 16 | t3[3] >>> 16, t3[2], t3[1] << 16 | t3[0] >>> 16, t3[3], t3[2] << 16 | t3[1] >>> 16], o4 = this._C = [t3[2] << 16 | t3[2] >>> 16, 4294901760 & t3[0] | 65535 & t3[1], t3[3] << 16 | t3[3] >>> 16, 4294901760 & t3[1] | 65535 & t3[2], t3[0] << 16 | t3[0] >>> 16, 4294901760 & t3[2] | 65535 & t3[3], t3[1] << 16 | t3[1] >>> 16, 4294901760 & t3[3] | 65535 & t3[0]];
            for (i5 = this._b = 0; i5 < 4; i5++)
              Ft2.call(this);
            for (i5 = 0; i5 < 8; i5++)
              o4[i5] ^= r4[i5 + 4 & 7];
            if (e5) {
              var n4 = e5.words, a4 = n4[0], s4 = n4[1], c4 = 16711935 & (a4 << 8 | a4 >>> 24) | 4278255360 & (a4 << 24 | a4 >>> 8), l4 = 16711935 & (s4 << 8 | s4 >>> 24) | 4278255360 & (s4 << 24 | s4 >>> 8), u4 = c4 >>> 16 | 4294901760 & l4, h4 = l4 << 16 | 65535 & c4;
              for (o4[0] ^= c4, o4[1] ^= u4, o4[2] ^= l4, o4[3] ^= h4, o4[4] ^= c4, o4[5] ^= u4, o4[6] ^= l4, o4[7] ^= h4, i5 = 0; i5 < 4; i5++)
                Ft2.call(this);
            }
          }, _doProcessBlock: function(t3, e5) {
            var i5 = this._X;
            Ft2.call(this), yt2[0] = i5[0] ^ i5[5] >>> 16 ^ i5[3] << 16, yt2[1] = i5[2] ^ i5[7] >>> 16 ^ i5[5] << 16, yt2[2] = i5[4] ^ i5[1] >>> 16 ^ i5[7] << 16, yt2[3] = i5[6] ^ i5[3] >>> 16 ^ i5[1] << 16;
            for (var r4 = 0; r4 < 4; r4++)
              yt2[r4] = 16711935 & (yt2[r4] << 8 | yt2[r4] >>> 24) | 4278255360 & (yt2[r4] << 24 | yt2[r4] >>> 8), t3[e5 + r4] ^= yt2[r4];
          }, blockSize: 4, ivSize: 2 }), gt2.Rabbit = vt2._createHelper(xt2), Ct2.mode.CTR = (St2 = (Tt2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = Tt2.extend({ processBlock: function(t3, e5) {
            var i5 = this._cipher, r4 = i5.blockSize, o4 = this._iv, n4 = this._counter;
            o4 && (n4 = this._counter = o4.slice(0), this._iv = void 0);
            var a4 = n4.slice(0);
            i5.encryptBlock(a4, 0), n4[r4 - 1] = n4[r4 - 1] + 1 | 0;
            for (var s4 = 0; s4 < r4; s4++)
              t3[e5 + s4] ^= a4[s4];
          } }), Tt2.Decryptor = St2, Tt2), At2 = (Et2 = Ct2).lib.StreamCipher, kt2 = [], It2 = [], Bt2 = [], Pt2 = Et2.algo.RabbitLegacy = At2.extend({ _doReset: function() {
            for (var t3 = this._key.words, e5 = this.cfg.iv, i5 = this._X = [t3[0], t3[3] << 16 | t3[2] >>> 16, t3[1], t3[0] << 16 | t3[3] >>> 16, t3[2], t3[1] << 16 | t3[0] >>> 16, t3[3], t3[2] << 16 | t3[1] >>> 16], r4 = this._C = [t3[2] << 16 | t3[2] >>> 16, 4294901760 & t3[0] | 65535 & t3[1], t3[3] << 16 | t3[3] >>> 16, 4294901760 & t3[1] | 65535 & t3[2], t3[0] << 16 | t3[0] >>> 16, 4294901760 & t3[2] | 65535 & t3[3], t3[1] << 16 | t3[1] >>> 16, 4294901760 & t3[3] | 65535 & t3[0]], o4 = this._b = 0; o4 < 4; o4++)
              Ut2.call(this);
            for (o4 = 0; o4 < 8; o4++)
              r4[o4] ^= i5[o4 + 4 & 7];
            if (e5) {
              var n4 = e5.words, a4 = n4[0], s4 = n4[1], c4 = 16711935 & (a4 << 8 | a4 >>> 24) | 4278255360 & (a4 << 24 | a4 >>> 8), l4 = 16711935 & (s4 << 8 | s4 >>> 24) | 4278255360 & (s4 << 24 | s4 >>> 8), u4 = c4 >>> 16 | 4294901760 & l4, h4 = l4 << 16 | 65535 & c4;
              for (r4[0] ^= c4, r4[1] ^= u4, r4[2] ^= l4, r4[3] ^= h4, r4[4] ^= c4, r4[5] ^= u4, r4[6] ^= l4, r4[7] ^= h4, o4 = 0; o4 < 4; o4++)
                Ut2.call(this);
            }
          }, _doProcessBlock: function(t3, e5) {
            var i5 = this._X;
            Ut2.call(this), kt2[0] = i5[0] ^ i5[5] >>> 16 ^ i5[3] << 16, kt2[1] = i5[2] ^ i5[7] >>> 16 ^ i5[5] << 16, kt2[2] = i5[4] ^ i5[1] >>> 16 ^ i5[7] << 16, kt2[3] = i5[6] ^ i5[3] >>> 16 ^ i5[1] << 16;
            for (var r4 = 0; r4 < 4; r4++)
              kt2[r4] = 16711935 & (kt2[r4] << 8 | kt2[r4] >>> 24) | 4278255360 & (kt2[r4] << 24 | kt2[r4] >>> 8), t3[e5 + r4] ^= kt2[r4];
          }, blockSize: 4, ivSize: 2 }), Et2.RabbitLegacy = At2._createHelper(Pt2), Ct2.pad.ZeroPadding = { pad: function(t3, e5) {
            var i5 = 4 * e5;
            t3.clamp(), t3.sigBytes += i5 - (t3.sigBytes % i5 || i5);
          }, unpad: function(t3) {
            for (var e5 = t3.words, i5 = t3.sigBytes - 1; !(e5[i5 >>> 2] >>> 24 - i5 % 4 * 8 & 255); )
              i5--;
            t3.sigBytes = i5 + 1;
          } }, Ct2;
        }(), n2 = null, a2 = (n2 || (function(t2) {
          !function() {
            function e4(t3, e5) {
              return t3 << (e5 %= 32) | t3 >>> 32 - e5;
            }
            function i4(t3) {
              return a3[(4026531840 & t3) >>> 28][(251658240 & t3) >>> 24] << 24 | a3[(15728640 & t3) >>> 20][(983040 & t3) >>> 16] << 16 | a3[(61440 & t3) >>> 12][(3840 & t3) >>> 8] << 8 | a3[(240 & t3) >>> 4][(15 & t3) >>> 0] << 0;
            }
            var r3 = t2, o3 = r3.lib.BlockCipher, n3 = r3.algo, a3 = new Array();
            a3[0] = new Array(214, 144, 233, 254, 204, 225, 61, 183, 22, 182, 20, 194, 40, 251, 44, 5), a3[1] = new Array(43, 103, 154, 118, 42, 190, 4, 195, 170, 68, 19, 38, 73, 134, 6, 153), a3[2] = new Array(156, 66, 80, 244, 145, 239, 152, 122, 51, 84, 11, 67, 237, 207, 172, 98), a3[3] = new Array(228, 179, 28, 169, 201, 8, 232, 149, 128, 223, 148, 250, 117, 143, 63, 166), a3[4] = new Array(71, 7, 167, 252, 243, 115, 23, 186, 131, 89, 60, 25, 230, 133, 79, 168), a3[5] = new Array(104, 107, 129, 178, 113, 100, 218, 139, 248, 235, 15, 75, 112, 86, 157, 53), a3[6] = new Array(30, 36, 14, 94, 99, 88, 209, 162, 37, 34, 124, 59, 1, 33, 120, 135), a3[7] = new Array(212, 0, 70, 87, 159, 211, 39, 82, 76, 54, 2, 231, 160, 196, 200, 158), a3[8] = new Array(234, 191, 138, 210, 64, 199, 56, 181, 163, 247, 242, 206, 249, 97, 21, 161), a3[9] = new Array(224, 174, 93, 164, 155, 52, 26, 85, 173, 147, 50, 48, 245, 140, 177, 227), a3[10] = new Array(29, 246, 226, 46, 130, 102, 202, 96, 192, 41, 35, 171, 13, 83, 78, 111), a3[11] = new Array(213, 219, 55, 69, 222, 253, 142, 47, 3, 255, 106, 114, 109, 108, 91, 81), a3[12] = new Array(141, 27, 175, 146, 187, 221, 188, 127, 17, 217, 92, 65, 31, 16, 90, 216), a3[13] = new Array(10, 193, 49, 136, 165, 205, 123, 189, 45, 116, 208, 18, 184, 229, 180, 176), a3[14] = new Array(137, 105, 151, 74, 12, 150, 119, 126, 101, 185, 241, 9, 197, 110, 198, 132), a3[15] = new Array(24, 240, 125, 236, 58, 220, 77, 32, 121, 238, 95, 62, 215, 203, 57, 72);
            var s3 = [462357, 472066609, 943670861, 1415275113, 1886879365, 2358483617, 2830087869, 3301692121, 3773296373, 4228057617, 404694573, 876298825, 1347903077, 1819507329, 2291111581, 2762715833, 3234320085, 3705924337, 4177462797, 337322537, 808926789, 1280531041, 1752135293, 2223739545, 2695343797, 3166948049, 3638552301, 4110090761, 269950501, 741554753, 1213159005, 1684763257], c3 = [2746333894, 1453994832, 1736282519, 2993693404], l3 = n3.SM4 = o3.extend({ _doReset: function() {
              for (var t3 = function(t4) {
                var r5 = new Array(), o5 = new Array();
                r5[0] = t4[0] ^ c3[0], r5[1] = t4[1] ^ c3[1], r5[2] = t4[2] ^ c3[2], r5[3] = t4[3] ^ c3[3];
                for (var n5, a4 = 0; a4 < 32; a4++)
                  r5[a4 + 4] = r5[a4] ^ (n5 = i4(n5 = r5[a4 + 1] ^ r5[a4 + 2] ^ r5[a4 + 3] ^ s3[a4])) ^ e4(n5, 13) ^ e4(n5, 23), o5[a4] = r5[a4 + 4].toString(16);
                return o5;
              }(this._key.words), r4 = this._SK = [], o4 = 0; o4 < t3.length; o4++)
                r4[o4] = t3[o4];
              var n4 = this._invSK = [];
              for (o4 = t3.length - 1; 0 <= o4; o4--)
                n4[t3.length - 1 - o4] = t3[o4];
            }, encryptBlock: function(t3, e5) {
              this._doCryptBlock(t3, e5, this._SK);
            }, decryptBlock: function(t3, e5) {
              this._doCryptBlock(t3, e5, this._invSK);
            }, _doCryptBlock: function(t3, r4, o4) {
              var n4 = [];
              n4[0] = t3[r4], n4[1] = t3[r4 + 1], n4[2] = t3[r4 + 2], n4[3] = t3[r4 + 3];
              for (var a4, s4 = 0; s4 < 32; s4++)
                n4[s4 + 4] = n4[s4] ^ (a4 = i4(a4 = n4[s4 + 1] ^ n4[s4 + 2] ^ n4[s4 + 3] ^ parseInt(o4[s4], 16))) ^ e4(a4, 2) ^ e4(a4, 10) ^ e4(a4, 18) ^ e4(a4, 24);
              t3[r4] = n4[35], t3[r4 + 1] = n4[34], t3[r4 + 2] = n4[33], t3[r4 + 3] = n4[32];
            }, keySize: 4, ivSize: 4, blockSize: 4 });
            r3.SM4 = o3._createHelper(l3);
          }();
        }(o2), n2 = o2.SM4), n2), s2 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : void 0 !== t.window ? t.window : {};
        function c2(t2, e4) {
          return t2(e4 = { exports: {} }, e4.exports), e4.exports;
        }
        var l2 = c2(function(t2) {
          var e4, i4;
          e4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", i4 = { rotl: function(t3, e5) {
            return t3 << e5 | t3 >>> 32 - e5;
          }, rotr: function(t3, e5) {
            return t3 << 32 - e5 | t3 >>> e5;
          }, endian: function(t3) {
            if (t3.constructor == Number)
              return 16711935 & i4.rotl(t3, 8) | 4278255360 & i4.rotl(t3, 24);
            for (var e5 = 0; e5 < t3.length; e5++)
              t3[e5] = i4.endian(t3[e5]);
            return t3;
          }, randomBytes: function(t3) {
            for (var e5 = []; 0 < t3; t3--)
              e5.push(Math.floor(256 * Math.random()));
            return e5;
          }, bytesToWords: function(t3) {
            for (var e5 = [], i5 = 0, r3 = 0; i5 < t3.length; i5++, r3 += 8)
              e5[r3 >>> 5] |= t3[i5] << 24 - r3 % 32;
            return e5;
          }, wordsToBytes: function(t3) {
            for (var e5 = [], i5 = 0; i5 < 32 * t3.length; i5 += 8)
              e5.push(t3[i5 >>> 5] >>> 24 - i5 % 32 & 255);
            return e5;
          }, bytesToHex: function(t3) {
            for (var e5 = [], i5 = 0; i5 < t3.length; i5++)
              e5.push((t3[i5] >>> 4).toString(16)), e5.push((15 & t3[i5]).toString(16));
            return e5.join("");
          }, hexToBytes: function(t3) {
            for (var e5 = [], i5 = 0; i5 < t3.length; i5 += 2)
              e5.push(parseInt(t3.substr(i5, 2), 16));
            return e5;
          }, bytesToBase64: function(t3) {
            for (var i5 = [], r3 = 0; r3 < t3.length; r3 += 3)
              for (var o3 = t3[r3] << 16 | t3[r3 + 1] << 8 | t3[r3 + 2], n3 = 0; n3 < 4; n3++)
                i5.push(8 * r3 + 6 * n3 <= 8 * t3.length ? e4.charAt(o3 >>> 6 * (3 - n3) & 63) : "=");
            return i5.join("");
          }, base64ToBytes: function(t3) {
            t3 = t3.replace(/[^A-Z0-9+\/]/gi, "");
            for (var i5 = [], r3 = 0, o3 = 0; r3 < t3.length; o3 = ++r3 % 4)
              0 != o3 && i5.push((e4.indexOf(t3.charAt(r3 - 1)) & Math.pow(2, -2 * o3 + 8) - 1) << 2 * o3 | e4.indexOf(t3.charAt(r3)) >>> 6 - 2 * o3);
            return i5;
          } }, t2.exports = i4;
        }), u2 = { utf8: { stringToBytes: function(t2) {
          return u2.bin.stringToBytes(unescape(encodeURIComponent(t2)));
        }, bytesToString: function(t2) {
          return decodeURIComponent(escape(u2.bin.bytesToString(t2)));
        } }, bin: { stringToBytes: function(t2) {
          for (var e4 = [], i4 = 0; i4 < t2.length; i4++)
            e4.push(255 & t2.charCodeAt(i4));
          return e4;
        }, bytesToString: function(t2) {
          for (var e4 = [], i4 = 0; i4 < t2.length; i4++)
            e4.push(String.fromCharCode(t2[i4]));
          return e4.join("");
        } } }, h2 = u2, p2 = function(t2) {
          return null != t2 && (f2(t2) || "function" == typeof (e4 = t2).readFloatLE && "function" == typeof e4.slice && f2(e4.slice(0, 0)) || !!t2._isBuffer);
          var e4;
        };
        function f2(t2) {
          return !!t2.constructor && "function" == typeof t2.constructor.isBuffer && t2.constructor.isBuffer(t2);
        }
        var d2, _3, m2, g2, v2, y2, b2, w2, x2, T2, S2, E2, A2 = c2(function(t2) {
          var e4, i4, r3, o3, n3;
          e4 = l2, i4 = h2.utf8, r3 = p2, o3 = h2.bin, (n3 = function(t3, a3) {
            t3.constructor == String ? t3 = a3 && "binary" === a3.encoding ? o3.stringToBytes(t3) : i4.stringToBytes(t3) : r3(t3) ? t3 = Array.prototype.slice.call(t3, 0) : Array.isArray(t3) || (t3 = t3.toString());
            for (var s3 = e4.bytesToWords(t3), c3 = 8 * t3.length, l3 = 1732584193, u3 = -271733879, h3 = -1732584194, p3 = 271733878, f3 = 0; f3 < s3.length; f3++)
              s3[f3] = 16711935 & (s3[f3] << 8 | s3[f3] >>> 24) | 4278255360 & (s3[f3] << 24 | s3[f3] >>> 8);
            s3[c3 >>> 5] |= 128 << c3 % 32, s3[14 + (64 + c3 >>> 9 << 4)] = c3;
            var d3 = n3._ff, _4 = n3._gg, m3 = n3._hh, g3 = n3._ii;
            for (f3 = 0; f3 < s3.length; f3 += 16) {
              var v3 = l3, y3 = u3, b3 = h3, w3 = p3;
              l3 = d3(l3, u3, h3, p3, s3[f3 + 0], 7, -680876936), p3 = d3(p3, l3, u3, h3, s3[f3 + 1], 12, -389564586), h3 = d3(h3, p3, l3, u3, s3[f3 + 2], 17, 606105819), u3 = d3(u3, h3, p3, l3, s3[f3 + 3], 22, -1044525330), l3 = d3(l3, u3, h3, p3, s3[f3 + 4], 7, -176418897), p3 = d3(p3, l3, u3, h3, s3[f3 + 5], 12, 1200080426), h3 = d3(h3, p3, l3, u3, s3[f3 + 6], 17, -1473231341), u3 = d3(u3, h3, p3, l3, s3[f3 + 7], 22, -45705983), l3 = d3(l3, u3, h3, p3, s3[f3 + 8], 7, 1770035416), p3 = d3(p3, l3, u3, h3, s3[f3 + 9], 12, -1958414417), h3 = d3(h3, p3, l3, u3, s3[f3 + 10], 17, -42063), u3 = d3(u3, h3, p3, l3, s3[f3 + 11], 22, -1990404162), l3 = d3(l3, u3, h3, p3, s3[f3 + 12], 7, 1804603682), p3 = d3(p3, l3, u3, h3, s3[f3 + 13], 12, -40341101), h3 = d3(h3, p3, l3, u3, s3[f3 + 14], 17, -1502002290), l3 = _4(l3, u3 = d3(u3, h3, p3, l3, s3[f3 + 15], 22, 1236535329), h3, p3, s3[f3 + 1], 5, -165796510), p3 = _4(p3, l3, u3, h3, s3[f3 + 6], 9, -1069501632), h3 = _4(h3, p3, l3, u3, s3[f3 + 11], 14, 643717713), u3 = _4(u3, h3, p3, l3, s3[f3 + 0], 20, -373897302), l3 = _4(l3, u3, h3, p3, s3[f3 + 5], 5, -701558691), p3 = _4(p3, l3, u3, h3, s3[f3 + 10], 9, 38016083), h3 = _4(h3, p3, l3, u3, s3[f3 + 15], 14, -660478335), u3 = _4(u3, h3, p3, l3, s3[f3 + 4], 20, -405537848), l3 = _4(l3, u3, h3, p3, s3[f3 + 9], 5, 568446438), p3 = _4(p3, l3, u3, h3, s3[f3 + 14], 9, -1019803690), h3 = _4(h3, p3, l3, u3, s3[f3 + 3], 14, -187363961), u3 = _4(u3, h3, p3, l3, s3[f3 + 8], 20, 1163531501), l3 = _4(l3, u3, h3, p3, s3[f3 + 13], 5, -1444681467), p3 = _4(p3, l3, u3, h3, s3[f3 + 2], 9, -51403784), h3 = _4(h3, p3, l3, u3, s3[f3 + 7], 14, 1735328473), l3 = m3(l3, u3 = _4(u3, h3, p3, l3, s3[f3 + 12], 20, -1926607734), h3, p3, s3[f3 + 5], 4, -378558), p3 = m3(p3, l3, u3, h3, s3[f3 + 8], 11, -2022574463), h3 = m3(h3, p3, l3, u3, s3[f3 + 11], 16, 1839030562), u3 = m3(u3, h3, p3, l3, s3[f3 + 14], 23, -35309556), l3 = m3(l3, u3, h3, p3, s3[f3 + 1], 4, -1530992060), p3 = m3(p3, l3, u3, h3, s3[f3 + 4], 11, 1272893353), h3 = m3(h3, p3, l3, u3, s3[f3 + 7], 16, -155497632), u3 = m3(u3, h3, p3, l3, s3[f3 + 10], 23, -1094730640), l3 = m3(l3, u3, h3, p3, s3[f3 + 13], 4, 681279174), p3 = m3(p3, l3, u3, h3, s3[f3 + 0], 11, -358537222), h3 = m3(h3, p3, l3, u3, s3[f3 + 3], 16, -722521979), u3 = m3(u3, h3, p3, l3, s3[f3 + 6], 23, 76029189), l3 = m3(l3, u3, h3, p3, s3[f3 + 9], 4, -640364487), p3 = m3(p3, l3, u3, h3, s3[f3 + 12], 11, -421815835), h3 = m3(h3, p3, l3, u3, s3[f3 + 15], 16, 530742520), l3 = g3(l3, u3 = m3(u3, h3, p3, l3, s3[f3 + 2], 23, -995338651), h3, p3, s3[f3 + 0], 6, -198630844), p3 = g3(p3, l3, u3, h3, s3[f3 + 7], 10, 1126891415), h3 = g3(h3, p3, l3, u3, s3[f3 + 14], 15, -1416354905), u3 = g3(u3, h3, p3, l3, s3[f3 + 5], 21, -57434055), l3 = g3(l3, u3, h3, p3, s3[f3 + 12], 6, 1700485571), p3 = g3(p3, l3, u3, h3, s3[f3 + 3], 10, -1894986606), h3 = g3(h3, p3, l3, u3, s3[f3 + 10], 15, -1051523), u3 = g3(u3, h3, p3, l3, s3[f3 + 1], 21, -2054922799), l3 = g3(l3, u3, h3, p3, s3[f3 + 8], 6, 1873313359), p3 = g3(p3, l3, u3, h3, s3[f3 + 15], 10, -30611744), h3 = g3(h3, p3, l3, u3, s3[f3 + 6], 15, -1560198380), u3 = g3(u3, h3, p3, l3, s3[f3 + 13], 21, 1309151649), l3 = g3(l3, u3, h3, p3, s3[f3 + 4], 6, -145523070), p3 = g3(p3, l3, u3, h3, s3[f3 + 11], 10, -1120210379), h3 = g3(h3, p3, l3, u3, s3[f3 + 2], 15, 718787259), u3 = g3(u3, h3, p3, l3, s3[f3 + 9], 21, -343485551), l3 = l3 + v3 >>> 0, u3 = u3 + y3 >>> 0, h3 = h3 + b3 >>> 0, p3 = p3 + w3 >>> 0;
            }
            return e4.endian([l3, u3, h3, p3]);
          })._ff = function(t3, e5, i5, r4, o4, n4, a3) {
            var s3 = t3 + (e5 & i5 | ~e5 & r4) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._gg = function(t3, e5, i5, r4, o4, n4, a3) {
            var s3 = t3 + (e5 & r4 | i5 & ~r4) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._hh = function(t3, e5, i5, r4, o4, n4, a3) {
            var s3 = t3 + (e5 ^ i5 ^ r4) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._ii = function(t3, e5, i5, r4, o4, n4, a3) {
            var s3 = t3 + (i5 ^ (e5 | ~r4)) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._blocksize = 16, n3._digestsize = 16, t2.exports = function(t3, i5) {
            if (null == t3)
              throw new Error("Illegal argument " + t3);
            var r4 = e4.wordsToBytes(n3(t3, i5));
            return i5 && i5.asBytes ? r4 : i5 && i5.asString ? o3.bytesToString(r4) : e4.bytesToHex(r4);
          };
        }), k2 = k2 || (d2 = Math, m2 = (_3 = {}).lib = {}, g2 = m2.Base = { extend: function(t2) {
          I2.prototype = this;
          var e4 = new I2();
          return t2 && e4.mixIn(t2), e4.hasOwnProperty("init") || (e4.init = function() {
            e4.$super.init.apply(this, arguments);
          }), (e4.init.prototype = e4).$super = this, e4;
        }, create: function() {
          var t2 = this.extend();
          return t2.init.apply(t2, arguments), t2;
        }, init: function() {
        }, mixIn: function(t2) {
          for (var e4 in t2)
            t2.hasOwnProperty(e4) && (this[e4] = t2[e4]);
          t2.hasOwnProperty("toString") && (this.toString = t2.toString);
        }, clone: function() {
          return this.init.prototype.extend(this);
        } }, v2 = m2.WordArray = g2.extend({ init: function(t2, e4) {
          t2 = this.words = t2 || [], this.sigBytes = null != e4 ? e4 : 4 * t2.length;
        }, toString: function(t2) {
          return (t2 || b2).stringify(this);
        }, concat: function(t2) {
          var e4 = this.words, i4 = t2.words, r3 = this.sigBytes, o3 = t2.sigBytes;
          if (this.clamp(), r3 % 4)
            for (var n3 = 0; n3 < o3; n3++)
              e4[r3 + n3 >>> 2] |= (i4[n3 >>> 2] >>> 24 - n3 % 4 * 8 & 255) << 24 - (r3 + n3) % 4 * 8;
          else if (65535 < i4.length)
            for (n3 = 0; n3 < o3; n3 += 4)
              e4[r3 + n3 >>> 2] = i4[n3 >>> 2];
          else
            e4.push.apply(e4, i4);
          return this.sigBytes += o3, this;
        }, clamp: function() {
          var t2 = this.words, e4 = this.sigBytes;
          t2[e4 >>> 2] &= 4294967295 << 32 - e4 % 4 * 8, t2.length = d2.ceil(e4 / 4);
        }, clone: function() {
          var t2 = g2.clone.call(this);
          return t2.words = this.words.slice(0), t2;
        }, random: function(t2) {
          for (var e4 = [], i4 = 0; i4 < t2; i4 += 4)
            e4.push(4294967296 * d2.random() | 0);
          return new v2.init(e4, t2);
        } }), y2 = _3.enc = {}, b2 = y2.Hex = { stringify: function(t2) {
          for (var e4 = t2.words, i4 = t2.sigBytes, r3 = [], o3 = 0; o3 < i4; o3++) {
            var n3 = e4[o3 >>> 2] >>> 24 - o3 % 4 * 8 & 255;
            r3.push((n3 >>> 4).toString(16)), r3.push((15 & n3).toString(16));
          }
          return r3.join("");
        }, parse: function(t2) {
          for (var e4 = t2.length, i4 = [], r3 = 0; r3 < e4; r3 += 2)
            i4[r3 >>> 3] |= parseInt(t2.substr(r3, 2), 16) << 24 - r3 % 8 * 4;
          return new v2.init(i4, e4 / 2);
        } }, w2 = y2.Latin1 = { stringify: function(t2) {
          for (var e4 = t2.words, i4 = t2.sigBytes, r3 = [], o3 = 0; o3 < i4; o3++)
            r3.push(String.fromCharCode(e4[o3 >>> 2] >>> 24 - o3 % 4 * 8 & 255));
          return r3.join("");
        }, parse: function(t2) {
          for (var e4 = t2.length, i4 = [], r3 = 0; r3 < e4; r3++)
            i4[r3 >>> 2] |= (255 & t2.charCodeAt(r3)) << 24 - r3 % 4 * 8;
          return new v2.init(i4, e4);
        } }, x2 = y2.Utf8 = { stringify: function(t2) {
          try {
            return decodeURIComponent(escape(w2.stringify(t2)));
          } catch (t3) {
            throw new Error("Malformed UTF-8 data");
          }
        }, parse: function(t2) {
          return w2.parse(unescape(encodeURIComponent(t2)));
        } }, T2 = m2.BufferedBlockAlgorithm = g2.extend({ reset: function() {
          this._data = new v2.init(), this._nDataBytes = 0;
        }, _append: function(t2) {
          "string" == typeof t2 && (t2 = x2.parse(t2)), this._data.concat(t2), this._nDataBytes += t2.sigBytes;
        }, _process: function(t2) {
          var e4 = this._data, i4 = e4.words, r3 = e4.sigBytes, o3 = this.blockSize, n3 = r3 / (4 * o3), a3 = (n3 = t2 ? d2.ceil(n3) : d2.max((0 | n3) - this._minBufferSize, 0)) * o3, s3 = d2.min(4 * a3, r3);
          if (a3) {
            for (var c3 = 0; c3 < a3; c3 += o3)
              this._doProcessBlock(i4, c3);
            var l3 = i4.splice(0, a3);
            e4.sigBytes -= s3;
          }
          return new v2.init(l3, s3);
        }, clone: function() {
          var t2 = g2.clone.call(this);
          return t2._data = this._data.clone(), t2;
        }, _minBufferSize: 0 }), m2.Hasher = T2.extend({ cfg: g2.extend(), init: function(t2) {
          this.cfg = this.cfg.extend(t2), this.reset();
        }, reset: function() {
          T2.reset.call(this), this._doReset();
        }, update: function(t2) {
          return this._append(t2), this._process(), this;
        }, finalize: function(t2) {
          return t2 && this._append(t2), this._doFinalize();
        }, blockSize: 16, _createHelper: function(t2) {
          return function(e4, i4) {
            return new t2.init(i4).finalize(e4);
          };
        }, _createHmacHelper: function(t2) {
          return function(e4, i4) {
            return new S2.HMAC.init(t2, i4).finalize(e4);
          };
        } }), S2 = _3.algo = {}, _3);
        function I2() {
        }
        function B2() {
          this.BYTE_LENGTH = 64, this.xBuf = new Array(), this.xBufOff = 0, this.byteCount = 0, this.DIGEST_LENGTH = 32, this.v0 = [1937774191, 1226093241, 388252375, 3666478592, 2842636476, 372324522, 3817729613, 2969243214], this.v0 = [1937774191, 1226093241, 388252375, -628488704, -1452330820, 372324522, -477237683, -1325724082], this.v = new Array(8), this.v_ = new Array(8), this.X0 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], this.X = new Array(68), this.xOff = 0, this.T_00_15 = 2043430169, this.T_16_63 = 2055708042, 0 < arguments.length ? this.InitDigest(arguments[0]) : this.Init();
        }
        function P2(t2, e4, i4) {
          null != t2 && ("number" == typeof t2 ? this.fromNumber(t2, e4, i4) : this.fromString(t2, null == e4 && "string" != typeof t2 ? 256 : e4));
        }
        function C2() {
          return new P2(null);
        }
        function z2(t2) {
          return F2.charAt(t2);
        }
        function D2(t2, e4) {
          var i4 = U2[t2.charCodeAt(e4)];
          return null == i4 ? -1 : i4;
        }
        function M2(t2) {
          var e4 = C2();
          return e4.fromInt(t2), e4;
        }
        function L2(t2) {
          var e4, i4 = 1;
          return 0 != (e4 = t2 >>> 16) && (t2 = e4, i4 += 16), 0 != (e4 = t2 >> 8) && (t2 = e4, i4 += 8), 0 != (e4 = t2 >> 4) && (t2 = e4, i4 += 4), 0 != (e4 = t2 >> 2) && (t2 = e4, i4 += 2), 0 != (e4 = t2 >> 1) && (t2 = e4, i4 += 1), i4;
        }
        function R2(t2) {
          this.m = t2;
        }
        function O2(t2) {
          this.m = t2, this.mp = t2.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << t2.DB - 15) - 1, this.mt2 = 2 * t2.t;
        }
        B2.prototype = { Init: function() {
          this.xBuf = new Array(4), this.Reset();
        }, InitDigest: function(t2) {
          this.xBuf = new Array(t2.xBuf.length), Array.Copy(t2.xBuf, 0, this.xBuf, 0, t2.xBuf.length), this.xBufOff = t2.xBufOff, this.byteCount = t2.byteCount, Array.Copy(t2.X, 0, this.X, 0, t2.X.length), this.xOff = t2.xOff, Array.Copy(t2.v, 0, this.v, 0, t2.v.length);
        }, GetDigestSize: function() {
          return this.DIGEST_LENGTH;
        }, Reset: function() {
          this.byteCount = 0, this.xBufOff = 0, Array.Clear(this.xBuf, 0, this.xBuf.length), Array.Copy(this.v0, 0, this.v, 0, this.v0.length), this.xOff = 0, Array.Copy(this.X0, 0, this.X, 0, this.X0.length);
        }, GetByteLength: function() {
          return this.BYTE_LENGTH;
        }, ProcessBlock: function() {
          for (var t2 = this.X, e4 = new Array(64), i4 = 16; i4 < 68; i4++)
            t2[i4] = this.P1(t2[i4 - 16] ^ t2[i4 - 9] ^ this.ROTATE(t2[i4 - 3], 15)) ^ this.ROTATE(t2[i4 - 13], 7) ^ t2[i4 - 6];
          for (i4 = 0; i4 < 64; i4++)
            e4[i4] = t2[i4] ^ t2[i4 + 4];
          var r3, o3, n3, a3, s3, c3 = this.v, l3 = this.v_;
          for (Array.Copy(c3, 0, l3, 0, this.v0.length), i4 = 0; i4 < 16; i4++)
            s3 = this.ROTATE(l3[0], 12), r3 = epgis_Int32.parse(epgis_Int32.parse(s3 + l3[4]) + this.ROTATE(this.T_00_15, i4)), o3 = (r3 = this.ROTATE(r3, 7)) ^ s3, n3 = epgis_Int32.parse(epgis_Int32.parse(this.FF_00_15(l3[0], l3[1], l3[2]) + l3[3]) + o3) + e4[i4], a3 = epgis_Int32.parse(epgis_Int32.parse(this.GG_00_15(l3[4], l3[5], l3[6]) + l3[7]) + r3) + t2[i4], l3[3] = l3[2], l3[2] = this.ROTATE(l3[1], 9), l3[1] = l3[0], l3[0] = n3, l3[7] = l3[6], l3[6] = this.ROTATE(l3[5], 19), l3[5] = l3[4], l3[4] = this.P0(a3);
          for (i4 = 16; i4 < 64; i4++)
            s3 = this.ROTATE(l3[0], 12), r3 = epgis_Int32.parse(epgis_Int32.parse(s3 + l3[4]) + this.ROTATE(this.T_16_63, i4)), o3 = (r3 = this.ROTATE(r3, 7)) ^ s3, n3 = epgis_Int32.parse(epgis_Int32.parse(this.FF_16_63(l3[0], l3[1], l3[2]) + l3[3]) + o3) + e4[i4], a3 = epgis_Int32.parse(epgis_Int32.parse(this.GG_16_63(l3[4], l3[5], l3[6]) + l3[7]) + r3) + t2[i4], l3[3] = l3[2], l3[2] = this.ROTATE(l3[1], 9), l3[1] = l3[0], l3[0] = n3, l3[7] = l3[6], l3[6] = this.ROTATE(l3[5], 19), l3[5] = l3[4], l3[4] = this.P0(a3);
          for (i4 = 0; i4 < 8; i4++)
            c3[i4] ^= epgis_Int32.parse(l3[i4]);
          this.xOff = 0, Array.Copy(this.X0, 0, this.X, 0, this.X0.length);
        }, ProcessWord: function(t2, e4) {
          var i4 = t2[e4] << 24;
          i4 |= (255 & t2[++e4]) << 16, i4 |= (255 & t2[++e4]) << 8, i4 |= 255 & t2[++e4], this.X[this.xOff] = i4, 16 == ++this.xOff && this.ProcessBlock();
        }, ProcessLength: function(t2) {
          14 < this.xOff && this.ProcessBlock(), this.X[14] = this.URShiftLong(t2, 32), this.X[15] = 4294967295 & t2;
        }, IntToBigEndian: function(t2, e4, i4) {
          e4[i4] = epgis_Int32.parseByte(this.URShift(t2, 24)), e4[++i4] = epgis_Int32.parseByte(this.URShift(t2, 16)), e4[++i4] = epgis_Int32.parseByte(this.URShift(t2, 8)), e4[++i4] = epgis_Int32.parseByte(t2);
        }, DoFinal: function(t2, e4) {
          this.Finish();
          for (var i4 = 0; i4 < 8; i4++)
            this.IntToBigEndian(this.v[i4], t2, e4 + 4 * i4);
          return this.Reset(), this.DIGEST_LENGTH;
        }, Update: function(t2) {
          this.xBuf[this.xBufOff++] = t2, this.xBufOff == this.xBuf.length && (this.ProcessWord(this.xBuf, 0), this.xBufOff = 0), this.byteCount++;
        }, BlockUpdate: function(t2, e4, i4) {
          for (; 0 != this.xBufOff && 0 < i4; )
            this.Update(t2[e4]), e4++, i4--;
          for (; i4 > this.xBuf.length; )
            this.ProcessWord(t2, e4), e4 += this.xBuf.length, i4 -= this.xBuf.length, this.byteCount += this.xBuf.length;
          for (; 0 < i4; )
            this.Update(t2[e4]), e4++, i4--;
        }, Finish: function() {
          var t2 = this.byteCount << 3;
          for (this.Update(128); 0 != this.xBufOff; )
            this.Update(0);
          this.ProcessLength(t2), this.ProcessBlock();
        }, ROTATE: function(t2, e4) {
          return t2 << e4 | this.URShift(t2, 32 - e4);
        }, P0: function(t2) {
          return t2 ^ this.ROTATE(t2, 9) ^ this.ROTATE(t2, 17);
        }, P1: function(t2) {
          return t2 ^ this.ROTATE(t2, 15) ^ this.ROTATE(t2, 23);
        }, FF_00_15: function(t2, e4, i4) {
          return t2 ^ e4 ^ i4;
        }, FF_16_63: function(t2, e4, i4) {
          return t2 & e4 | t2 & i4 | e4 & i4;
        }, GG_00_15: function(t2, e4, i4) {
          return t2 ^ e4 ^ i4;
        }, GG_16_63: function(t2, e4, i4) {
          return t2 & e4 | ~t2 & i4;
        }, URShift: function(t2, e4) {
          return (t2 > epgis_Int32.maxValue || t2 < epgis_Int32.minValue) && (t2 = epgis_Int32.parse(t2)), 0 <= t2 ? t2 >> e4 : (t2 >> e4) + (2 << ~e4);
        }, URShiftLong: function(t2, e4) {
          var i4 = new P2();
          if (i4.fromInt(t2), 0 <= i4.signum())
            u3 = i4.shiftRight(e4).intValue();
          else {
            var r3 = new P2();
            r3.fromInt(2);
            var o3 = ~e4, n3 = "";
            if (o3 < 0) {
              for (var a3 = 64 + o3, s3 = 0; s3 < a3; s3++)
                n3 += "0";
              var c3 = new P2();
              c3.fromInt(t2 >> e4);
              var l3 = new P2("10" + n3, 2), u3 = (n3 = l3.toRadix(10), l3.add(c3).toRadix(10));
            } else
              u3 = (t2 >> e4) + (n3 = r3.shiftLeft(~e4).intValue());
          }
          return u3;
        }, GetZ: function(t2, e4) {
          var i4 = k2.enc.Utf8.parse("1234567812345678"), r3 = 4 * i4.words.length * 8;
          this.Update(r3 >> 8 & 255), this.Update(255 & r3);
          var o3 = this.GetWords(i4.toString());
          this.BlockUpdate(o3, 0, o3.length);
          var n3 = this.GetWords(t2.curve.a.toBigInteger().toRadix(16)), a3 = this.GetWords(t2.curve.b.toBigInteger().toRadix(16)), s3 = this.GetWords(t2.getX().toBigInteger().toRadix(16)), c3 = this.GetWords(t2.getY().toBigInteger().toRadix(16)), l3 = this.GetWords(e4.substr(0, 64)), u3 = this.GetWords(e4.substr(64, 64));
          this.BlockUpdate(n3, 0, n3.length), this.BlockUpdate(a3, 0, a3.length), this.BlockUpdate(s3, 0, s3.length), this.BlockUpdate(c3, 0, c3.length), this.BlockUpdate(l3, 0, l3.length), this.BlockUpdate(u3, 0, u3.length);
          var h3 = new Array(this.GetDigestSize());
          return this.DoFinal(h3, 0), h3;
        }, GetWords: function(t2) {
          for (var e4 = [], i4 = t2.length, r3 = 0; r3 < i4; r3 += 2)
            e4[e4.length] = parseInt(t2.substr(r3, 2), 16);
          return e4;
        }, GetHex: function(t2) {
          for (var e4 = [], i4 = 0, r3 = 0; r3 < 2 * t2.length; r3 += 2)
            e4[r3 >>> 3] |= parseInt(t2[i4]) << 24 - r3 % 8 * 4, i4++;
          return new k2.lib.WordArray.init(e4, t2.length);
        } }, Array.Clear = function(t2, e4, i4) {
          for (var r3 in t2)
            t2[r3] = null;
        }, Array.Copy = function(t2, e4, i4, r3, o3) {
          for (var n3 = t2.slice(e4, e4 + o3), a3 = 0; a3 < n3.length; a3++)
            i4[r3] = n3[a3], r3++;
        }, window.epgis_Int32 = { minValue: -parseInt("10000000000000000000000000000000", 2), maxValue: parseInt("1111111111111111111111111111111", 2), parse: function(t2) {
          if (t2 < this.minValue) {
            for (var e4 = (o3 = new Number(-t2).toString(2)).substr(o3.length - 31, 31), i4 = "", r3 = 0; r3 < e4.length; r3++)
              i4 += "0" == e4.substr(r3, 1) ? "1" : "0";
            return parseInt(i4, 2) + 1;
          }
          if (t2 > this.maxValue) {
            var o3;
            for (e4 = (o3 = Number(t2).toString(2)).substr(o3.length - 31, 31), i4 = "", r3 = 0; r3 < e4.length; r3++)
              i4 += "0" == e4.substr(r3, 1) ? "1" : "0";
            return -(parseInt(i4, 2) + 1);
          }
          return t2;
        }, parseByte: function(t2) {
          if (t2 < 0) {
            for (var e4 = (o3 = new Number(-t2).toString(2)).substr(o3.length - 8, 8), i4 = "", r3 = 0; r3 < e4.length; r3++)
              i4 += "0" == e4.substr(r3, 1) ? "1" : "0";
            return parseInt(i4, 2) + 1;
          }
          if (255 < t2) {
            var o3 = Number(t2).toString(2);
            return parseInt(o3.substr(o3.length - 8, 8), 2);
          }
          return t2;
        } }, E2 = "Microsoft Internet Explorer" == navigator.appName ? (P2.prototype.am = function(t2, e4, i4, r3, o3, n3) {
          for (var a3 = 32767 & e4, s3 = e4 >> 15; 0 <= --n3; ) {
            var c3 = 32767 & this[t2], l3 = this[t2++] >> 15, u3 = s3 * c3 + l3 * a3;
            o3 = ((c3 = a3 * c3 + ((32767 & u3) << 15) + i4[r3] + (1073741823 & o3)) >>> 30) + (u3 >>> 15) + s3 * l3 + (o3 >>> 30), i4[r3++] = 1073741823 & c3;
          }
          return o3;
        }, 30) : "Netscape" != navigator.appName ? (P2.prototype.am = function(t2, e4, i4, r3, o3, n3) {
          for (; 0 <= --n3; ) {
            var a3 = e4 * this[t2++] + i4[r3] + o3;
            o3 = Math.floor(a3 / 67108864), i4[r3++] = 67108863 & a3;
          }
          return o3;
        }, 26) : (P2.prototype.am = function(t2, e4, i4, r3, o3, n3) {
          for (var a3 = 16383 & e4, s3 = e4 >> 14; 0 <= --n3; ) {
            var c3 = 16383 & this[t2], l3 = this[t2++] >> 14, u3 = s3 * c3 + l3 * a3;
            o3 = ((c3 = a3 * c3 + ((16383 & u3) << 14) + i4[r3] + o3) >> 28) + (u3 >> 14) + s3 * l3, i4[r3++] = 268435455 & c3;
          }
          return o3;
        }, 28), P2.prototype.DB = E2, P2.prototype.DM = (1 << E2) - 1, P2.prototype.DV = 1 << E2, P2.prototype.FV = Math.pow(2, 52), P2.prototype.F1 = 52 - E2, P2.prototype.F2 = 2 * E2 - 52;
        for (var F2 = "0123456789abcdefghijklmnopqrstuvwxyz", U2 = new Array(), N2 = "0".charCodeAt(0), j2 = 0; j2 <= 9; ++j2)
          U2[N2++] = j2;
        for (N2 = "a".charCodeAt(0), j2 = 10; j2 < 36; ++j2)
          U2[N2++] = j2;
        for (N2 = "A".charCodeAt(0), j2 = 10; j2 < 36; ++j2)
          U2[N2++] = j2;
        function V2(t2, e4) {
          return t2 & e4;
        }
        function q2(t2, e4) {
          return t2 | e4;
        }
        function Z2(t2, e4) {
          return t2 ^ e4;
        }
        function G2(t2, e4) {
          return t2 & ~e4;
        }
        function H2() {
        }
        function W2(t2) {
          return t2;
        }
        function X2(t2) {
          this.r2 = C2(), this.q3 = C2(), P2.ONE.dlShiftTo(2 * t2.t, this.r2), this.mu = this.r2.divide(t2), this.m = t2;
        }
        R2.prototype.convert = function(t2) {
          return t2.s < 0 || 0 <= t2.compareTo(this.m) ? t2.mod(this.m) : t2;
        }, R2.prototype.revert = function(t2) {
          return t2;
        }, R2.prototype.reduce = function(t2) {
          t2.divRemTo(this.m, null, t2);
        }, R2.prototype.mulTo = function(t2, e4, i4) {
          t2.multiplyTo(e4, i4), this.reduce(i4);
        }, R2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4), this.reduce(e4);
        }, O2.prototype.convert = function(t2) {
          var e4 = C2();
          return t2.abs().dlShiftTo(this.m.t, e4), e4.divRemTo(this.m, null, e4), t2.s < 0 && 0 < e4.compareTo(P2.ZERO) && this.m.subTo(e4, e4), e4;
        }, O2.prototype.revert = function(t2) {
          var e4 = C2();
          return t2.copyTo(e4), this.reduce(e4), e4;
        }, O2.prototype.reduce = function(t2) {
          for (; t2.t <= this.mt2; )
            t2[t2.t++] = 0;
          for (var e4 = 0; e4 < this.m.t; ++e4) {
            var i4 = 32767 & t2[e4], r3 = i4 * this.mpl + ((i4 * this.mph + (t2[e4] >> 15) * this.mpl & this.um) << 15) & t2.DM;
            for (t2[i4 = e4 + this.m.t] += this.m.am(0, r3, t2, e4, 0, this.m.t); t2[i4] >= t2.DV; )
              t2[i4] -= t2.DV, t2[++i4]++;
          }
          t2.clamp(), t2.drShiftTo(this.m.t, t2), 0 <= t2.compareTo(this.m) && t2.subTo(this.m, t2);
        }, O2.prototype.mulTo = function(t2, e4, i4) {
          t2.multiplyTo(e4, i4), this.reduce(i4);
        }, O2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4), this.reduce(e4);
        }, P2.prototype.copyTo = function(t2) {
          for (var e4 = this.t - 1; 0 <= e4; --e4)
            t2[e4] = this[e4];
          t2.t = this.t, t2.s = this.s;
        }, P2.prototype.fromInt = function(t2) {
          this.t = 1, this.s = t2 < 0 ? -1 : 0, 0 < t2 ? this[0] = t2 : t2 < -1 ? this[0] = t2 + this.DV : this.t = 0;
        }, P2.prototype.fromString = function(t2, e4) {
          var i4;
          if (16 == e4)
            i4 = 4;
          else if (8 == e4)
            i4 = 3;
          else if (256 == e4)
            i4 = 8;
          else if (2 == e4)
            i4 = 1;
          else if (32 == e4)
            i4 = 5;
          else {
            if (4 != e4)
              return void this.fromRadix(t2, e4);
            i4 = 2;
          }
          this.t = 0, this.s = 0;
          for (var r3 = t2.length, o3 = false, n3 = 0; 0 <= --r3; ) {
            var a3 = 8 == i4 ? 255 & t2[r3] : D2(t2, r3);
            a3 < 0 ? "-" == t2.charAt(r3) && (o3 = true) : (o3 = false, 0 == n3 ? this[this.t++] = a3 : n3 + i4 > this.DB ? (this[this.t - 1] |= (a3 & (1 << this.DB - n3) - 1) << n3, this[this.t++] = a3 >> this.DB - n3) : this[this.t - 1] |= a3 << n3, (n3 += i4) >= this.DB && (n3 -= this.DB));
          }
          8 == i4 && 0 != (128 & t2[0]) && (this.s = -1, 0 < n3 && (this[this.t - 1] |= (1 << this.DB - n3) - 1 << n3)), this.clamp(), o3 && P2.ZERO.subTo(this, this);
        }, P2.prototype.clamp = function() {
          for (var t2 = this.s & this.DM; 0 < this.t && this[this.t - 1] == t2; )
            --this.t;
        }, P2.prototype.dlShiftTo = function(t2, e4) {
          for (var i4 = this.t - 1; 0 <= i4; --i4)
            e4[i4 + t2] = this[i4];
          for (i4 = t2 - 1; 0 <= i4; --i4)
            e4[i4] = 0;
          e4.t = this.t + t2, e4.s = this.s;
        }, P2.prototype.drShiftTo = function(t2, e4) {
          for (var i4 = t2; i4 < this.t; ++i4)
            e4[i4 - t2] = this[i4];
          e4.t = Math.max(this.t - t2, 0), e4.s = this.s;
        }, P2.prototype.lShiftTo = function(t2, e4) {
          for (var i4 = t2 % this.DB, r3 = this.DB - i4, o3 = (1 << r3) - 1, n3 = Math.floor(t2 / this.DB), a3 = this.s << i4 & this.DM, s3 = this.t - 1; 0 <= s3; --s3)
            e4[s3 + n3 + 1] = this[s3] >> r3 | a3, a3 = (this[s3] & o3) << i4;
          for (s3 = n3 - 1; 0 <= s3; --s3)
            e4[s3] = 0;
          e4[n3] = a3, e4.t = this.t + n3 + 1, e4.s = this.s, e4.clamp();
        }, P2.prototype.rShiftTo = function(t2, e4) {
          e4.s = this.s;
          var i4 = Math.floor(t2 / this.DB);
          if (i4 >= this.t)
            e4.t = 0;
          else {
            var r3 = t2 % this.DB, o3 = this.DB - r3, n3 = (1 << r3) - 1;
            e4[0] = this[i4] >> r3;
            for (var a3 = i4 + 1; a3 < this.t; ++a3)
              e4[a3 - i4 - 1] |= (this[a3] & n3) << o3, e4[a3 - i4] = this[a3] >> r3;
            0 < r3 && (e4[this.t - i4 - 1] |= (this.s & n3) << o3), e4.t = this.t - i4, e4.clamp();
          }
        }, P2.prototype.subTo = function(t2, e4) {
          for (var i4 = 0, r3 = 0, o3 = Math.min(t2.t, this.t); i4 < o3; )
            r3 += this[i4] - t2[i4], e4[i4++] = r3 & this.DM, r3 >>= this.DB;
          if (t2.t < this.t) {
            for (r3 -= t2.s; i4 < this.t; )
              r3 += this[i4], e4[i4++] = r3 & this.DM, r3 >>= this.DB;
            r3 += this.s;
          } else {
            for (r3 += this.s; i4 < t2.t; )
              r3 -= t2[i4], e4[i4++] = r3 & this.DM, r3 >>= this.DB;
            r3 -= t2.s;
          }
          e4.s = r3 < 0 ? -1 : 0, r3 < -1 ? e4[i4++] = this.DV + r3 : 0 < r3 && (e4[i4++] = r3), e4.t = i4, e4.clamp();
        }, P2.prototype.multiplyTo = function(t2, e4) {
          var i4 = this.abs(), r3 = t2.abs(), o3 = i4.t;
          for (e4.t = o3 + r3.t; 0 <= --o3; )
            e4[o3] = 0;
          for (o3 = 0; o3 < r3.t; ++o3)
            e4[o3 + i4.t] = i4.am(0, r3[o3], e4, o3, 0, i4.t);
          e4.s = 0, e4.clamp(), this.s != t2.s && P2.ZERO.subTo(e4, e4);
        }, P2.prototype.squareTo = function(t2) {
          for (var e4 = this.abs(), i4 = t2.t = 2 * e4.t; 0 <= --i4; )
            t2[i4] = 0;
          for (i4 = 0; i4 < e4.t - 1; ++i4) {
            var r3 = e4.am(i4, e4[i4], t2, 2 * i4, 0, 1);
            (t2[i4 + e4.t] += e4.am(i4 + 1, 2 * e4[i4], t2, 2 * i4 + 1, r3, e4.t - i4 - 1)) >= e4.DV && (t2[i4 + e4.t] -= e4.DV, t2[i4 + e4.t + 1] = 1);
          }
          0 < t2.t && (t2[t2.t - 1] += e4.am(i4, e4[i4], t2, 2 * i4, 0, 1)), t2.s = 0, t2.clamp();
        }, P2.prototype.divRemTo = function(t2, e4, i4) {
          var r3 = t2.abs();
          if (!(r3.t <= 0)) {
            var o3 = this.abs();
            if (o3.t < r3.t)
              return null != e4 && e4.fromInt(0), void (null != i4 && this.copyTo(i4));
            null == i4 && (i4 = C2());
            var n3 = C2(), a3 = this.s, s3 = t2.s, c3 = this.DB - L2(r3[r3.t - 1]);
            0 < c3 ? (r3.lShiftTo(c3, n3), o3.lShiftTo(c3, i4)) : (r3.copyTo(n3), o3.copyTo(i4));
            var l3 = n3.t, u3 = n3[l3 - 1];
            if (0 != u3) {
              var h3 = u3 * (1 << this.F1) + (1 < l3 ? n3[l3 - 2] >> this.F2 : 0), p3 = this.FV / h3, f3 = (1 << this.F1) / h3, d3 = 1 << this.F2, _4 = i4.t, m3 = _4 - l3, g3 = null == e4 ? C2() : e4;
              for (n3.dlShiftTo(m3, g3), 0 <= i4.compareTo(g3) && (i4[i4.t++] = 1, i4.subTo(g3, i4)), P2.ONE.dlShiftTo(l3, g3), g3.subTo(n3, n3); n3.t < l3; )
                n3[n3.t++] = 0;
              for (; 0 <= --m3; ) {
                var v3 = i4[--_4] == u3 ? this.DM : Math.floor(i4[_4] * p3 + (i4[_4 - 1] + d3) * f3);
                if ((i4[_4] += n3.am(0, v3, i4, m3, 0, l3)) < v3)
                  for (n3.dlShiftTo(m3, g3), i4.subTo(g3, i4); i4[_4] < --v3; )
                    i4.subTo(g3, i4);
              }
              null != e4 && (i4.drShiftTo(l3, e4), a3 != s3 && P2.ZERO.subTo(e4, e4)), i4.t = l3, i4.clamp(), 0 < c3 && i4.rShiftTo(c3, i4), a3 < 0 && P2.ZERO.subTo(i4, i4);
            }
          }
        }, P2.prototype.invDigit = function() {
          if (this.t < 1)
            return 0;
          var t2 = this[0];
          if (0 == (1 & t2))
            return 0;
          var e4 = 3 & t2;
          return 0 < (e4 = (e4 = (e4 = (e4 = e4 * (2 - (15 & t2) * e4) & 15) * (2 - (255 & t2) * e4) & 255) * (2 - ((65535 & t2) * e4 & 65535)) & 65535) * (2 - t2 * e4 % this.DV) % this.DV) ? this.DV - e4 : -e4;
        }, P2.prototype.isEven = function() {
          return 0 == (0 < this.t ? 1 & this[0] : this.s);
        }, P2.prototype.exp = function(t2, e4) {
          if (4294967295 < t2 || t2 < 1)
            return P2.ONE;
          var i4, r3 = C2(), o3 = C2(), n3 = e4.convert(this), a3 = L2(t2) - 1;
          for (n3.copyTo(r3); 0 <= --a3; )
            e4.sqrTo(r3, o3), 0 < (t2 & 1 << a3) ? e4.mulTo(o3, n3, r3) : (i4 = r3, r3 = o3, o3 = i4);
          return e4.revert(r3);
        }, P2.prototype.toString = function(t2) {
          if (this.s < 0)
            return "-" + this.negate().toString(t2);
          var e4;
          if (16 == t2)
            e4 = 4;
          else if (8 == t2)
            e4 = 3;
          else if (2 == t2)
            e4 = 1;
          else if (32 == t2)
            e4 = 5;
          else {
            if (4 != t2)
              return this.toRadix(t2);
            e4 = 2;
          }
          var i4, r3 = (1 << e4) - 1, o3 = false, n3 = "", a3 = this.t, s3 = this.DB - a3 * this.DB % e4;
          if (0 < a3--)
            for (s3 < this.DB && 0 < (i4 = this[a3] >> s3) && (o3 = true, n3 = z2(i4)); 0 <= a3; )
              s3 < e4 ? (i4 = (this[a3] & (1 << s3) - 1) << e4 - s3, i4 |= this[--a3] >> (s3 += this.DB - e4)) : (i4 = this[a3] >> (s3 -= e4) & r3, s3 <= 0 && (s3 += this.DB, --a3)), 0 < i4 && (o3 = true), o3 && (n3 += z2(i4));
          return o3 ? n3 : "0";
        }, P2.prototype.negate = function() {
          var t2 = C2();
          return P2.ZERO.subTo(this, t2), t2;
        }, P2.prototype.abs = function() {
          return this.s < 0 ? this.negate() : this;
        }, P2.prototype.compareTo = function(t2) {
          var e4 = this.s - t2.s;
          if (0 != e4)
            return e4;
          var i4 = this.t;
          if (0 != (e4 = i4 - t2.t))
            return this.s < 0 ? -e4 : e4;
          for (; 0 <= --i4; )
            if (0 != (e4 = this[i4] - t2[i4]))
              return e4;
          return 0;
        }, P2.prototype.bitLength = function() {
          return this.t <= 0 ? 0 : this.DB * (this.t - 1) + L2(this[this.t - 1] ^ this.s & this.DM);
        }, P2.prototype.mod = function(t2) {
          var e4 = C2();
          return this.abs().divRemTo(t2, null, e4), this.s < 0 && 0 < e4.compareTo(P2.ZERO) && t2.subTo(e4, e4), e4;
        }, P2.prototype.modPowInt = function(t2, e4) {
          var i4 = new (t2 < 256 || e4.isEven() ? R2 : O2)(e4);
          return this.exp(t2, i4);
        }, P2.ZERO = M2(0), P2.ONE = M2(1), H2.prototype.convert = W2, H2.prototype.revert = W2, H2.prototype.mulTo = function(t2, e4, i4) {
          t2.multiplyTo(e4, i4);
        }, H2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4);
        }, X2.prototype.convert = function(t2) {
          if (t2.s < 0 || t2.t > 2 * this.m.t)
            return t2.mod(this.m);
          if (t2.compareTo(this.m) < 0)
            return t2;
          var e4 = C2();
          return t2.copyTo(e4), this.reduce(e4), e4;
        }, X2.prototype.revert = function(t2) {
          return t2;
        }, X2.prototype.reduce = function(t2) {
          for (t2.drShiftTo(this.m.t - 1, this.r2), t2.t > this.m.t + 1 && (t2.t = this.m.t + 1, t2.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); t2.compareTo(this.r2) < 0; )
            t2.dAddOffset(1, this.m.t + 1);
          for (t2.subTo(this.r2, t2); 0 <= t2.compareTo(this.m); )
            t2.subTo(this.m, t2);
        }, X2.prototype.mulTo = function(t2, e4, i4) {
          t2.multiplyTo(e4, i4), this.reduce(i4);
        }, X2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4), this.reduce(e4);
        };
        var K2 = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997], Y2 = (1 << 26) / K2[K2.length - 1];
        P2.prototype.chunkSize = function(t2) {
          return Math.floor(Math.LN2 * this.DB / Math.log(t2));
        }, P2.prototype.toRadix = function(t2) {
          if (null == t2 && (t2 = 10), 0 == this.signum() || t2 < 2 || 36 < t2)
            return "0";
          var e4 = this.chunkSize(t2), i4 = Math.pow(t2, e4), r3 = M2(i4), o3 = C2(), n3 = C2(), a3 = "";
          for (this.divRemTo(r3, o3, n3); 0 < o3.signum(); )
            a3 = (i4 + n3.intValue()).toString(t2).substr(1) + a3, o3.divRemTo(r3, o3, n3);
          return n3.intValue().toString(t2) + a3;
        }, P2.prototype.fromRadix = function(t2, e4) {
          this.fromInt(0), null == e4 && (e4 = 10);
          for (var i4 = this.chunkSize(e4), r3 = Math.pow(e4, i4), o3 = false, n3 = 0, a3 = 0, s3 = 0; s3 < t2.length; ++s3) {
            var c3 = D2(t2, s3);
            c3 < 0 ? "-" == t2.charAt(s3) && 0 == this.signum() && (o3 = true) : (a3 = e4 * a3 + c3, ++n3 >= i4 && (this.dMultiply(r3), this.dAddOffset(a3, 0), a3 = n3 = 0));
          }
          0 < n3 && (this.dMultiply(Math.pow(e4, n3)), this.dAddOffset(a3, 0)), o3 && P2.ZERO.subTo(this, this);
        }, P2.prototype.fromNumber = function(t2, e4, i4) {
          if ("number" == typeof e4)
            if (t2 < 2)
              this.fromInt(1);
            else
              for (this.fromNumber(t2, i4), this.testBit(t2 - 1) || this.bitwiseTo(P2.ONE.shiftLeft(t2 - 1), q2, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(e4); )
                this.dAddOffset(2, 0), this.bitLength() > t2 && this.subTo(P2.ONE.shiftLeft(t2 - 1), this);
          else {
            var r3 = new Array(), o3 = 7 & t2;
            r3.length = 1 + (t2 >> 3), e4.nextBytes(r3), 0 < o3 ? r3[0] &= (1 << o3) - 1 : r3[0] = 0, this.fromString(r3, 256);
          }
        }, P2.prototype.bitwiseTo = function(t2, e4, i4) {
          for (var r3, o3 = Math.min(t2.t, this.t), n3 = 0; n3 < o3; ++n3)
            i4[n3] = e4(this[n3], t2[n3]);
          if (t2.t < this.t) {
            for (r3 = t2.s & this.DM, n3 = o3; n3 < this.t; ++n3)
              i4[n3] = e4(this[n3], r3);
            i4.t = this.t;
          } else {
            for (r3 = this.s & this.DM, n3 = o3; n3 < t2.t; ++n3)
              i4[n3] = e4(r3, t2[n3]);
            i4.t = t2.t;
          }
          i4.s = e4(this.s, t2.s), i4.clamp();
        }, P2.prototype.changeBit = function(t2, e4) {
          var i4 = P2.ONE.shiftLeft(t2);
          return this.bitwiseTo(i4, e4, i4), i4;
        }, P2.prototype.addTo = function(t2, e4) {
          for (var i4 = 0, r3 = 0, o3 = Math.min(t2.t, this.t); i4 < o3; )
            r3 += this[i4] + t2[i4], e4[i4++] = r3 & this.DM, r3 >>= this.DB;
          if (t2.t < this.t) {
            for (r3 += t2.s; i4 < this.t; )
              r3 += this[i4], e4[i4++] = r3 & this.DM, r3 >>= this.DB;
            r3 += this.s;
          } else {
            for (r3 += this.s; i4 < t2.t; )
              r3 += t2[i4], e4[i4++] = r3 & this.DM, r3 >>= this.DB;
            r3 += t2.s;
          }
          e4.s = r3 < 0 ? -1 : 0, 0 < r3 ? e4[i4++] = r3 : r3 < -1 && (e4[i4++] = this.DV + r3), e4.t = i4, e4.clamp();
        }, P2.prototype.dMultiply = function(t2) {
          this[this.t] = this.am(0, t2 - 1, this, 0, 0, this.t), ++this.t, this.clamp();
        }, P2.prototype.dAddOffset = function(t2, e4) {
          if (0 != t2) {
            for (; this.t <= e4; )
              this[this.t++] = 0;
            for (this[e4] += t2; this[e4] >= this.DV; )
              this[e4] -= this.DV, ++e4 >= this.t && (this[this.t++] = 0), ++this[e4];
          }
        }, P2.prototype.multiplyLowerTo = function(t2, e4, i4) {
          var r3, o3 = Math.min(this.t + t2.t, e4);
          for (i4.s = 0, i4.t = o3; 0 < o3; )
            i4[--o3] = 0;
          for (r3 = i4.t - this.t; o3 < r3; ++o3)
            i4[o3 + this.t] = this.am(0, t2[o3], i4, o3, 0, this.t);
          for (r3 = Math.min(t2.t, e4); o3 < r3; ++o3)
            this.am(0, t2[o3], i4, o3, 0, e4 - o3);
          i4.clamp();
        }, P2.prototype.multiplyUpperTo = function(t2, e4, i4) {
          --e4;
          var r3 = i4.t = this.t + t2.t - e4;
          for (i4.s = 0; 0 <= --r3; )
            i4[r3] = 0;
          for (r3 = Math.max(e4 - this.t, 0); r3 < t2.t; ++r3)
            i4[this.t + r3 - e4] = this.am(e4 - r3, t2[r3], i4, 0, 0, this.t + r3 - e4);
          i4.clamp(), i4.drShiftTo(1, i4);
        }, P2.prototype.modInt = function(t2) {
          if (t2 <= 0)
            return 0;
          var e4 = this.DV % t2, i4 = this.s < 0 ? t2 - 1 : 0;
          if (0 < this.t)
            if (0 == e4)
              i4 = this[0] % t2;
            else
              for (var r3 = this.t - 1; 0 <= r3; --r3)
                i4 = (e4 * i4 + this[r3]) % t2;
          return i4;
        }, P2.prototype.millerRabin = function(t2) {
          var e4 = this.subtract(P2.ONE), i4 = e4.getLowestSetBit();
          if (i4 <= 0)
            return false;
          var r3 = e4.shiftRight(i4);
          K2.length < (t2 = t2 + 1 >> 1) && (t2 = K2.length);
          for (var o3 = C2(), n3 = 0; n3 < t2; ++n3) {
            o3.fromInt(K2[Math.floor(Math.random() * K2.length)]);
            var a3 = o3.modPow(r3, this);
            if (0 != a3.compareTo(P2.ONE) && 0 != a3.compareTo(e4)) {
              for (var s3 = 1; s3++ < i4 && 0 != a3.compareTo(e4); )
                if (0 == (a3 = a3.modPowInt(2, this)).compareTo(P2.ONE))
                  return false;
              if (0 != a3.compareTo(e4))
                return false;
            }
          }
          return true;
        }, P2.prototype.clone = function() {
          var t2 = C2();
          return this.copyTo(t2), t2;
        }, P2.prototype.intValue = function() {
          if (this.s < 0) {
            if (1 == this.t)
              return this[0] - this.DV;
            if (0 == this.t)
              return -1;
          } else {
            if (1 == this.t)
              return this[0];
            if (0 == this.t)
              return 0;
          }
          return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];
        }, P2.prototype.byteValue = function() {
          return 0 == this.t ? this.s : this[0] << 24 >> 24;
        }, P2.prototype.shortValue = function() {
          return 0 == this.t ? this.s : this[0] << 16 >> 16;
        }, P2.prototype.signum = function() {
          return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1;
        }, P2.prototype.toByteArray = function() {
          var t2 = this.t, e4 = new Array();
          e4[0] = this.s;
          var i4, r3 = this.DB - t2 * this.DB % 8, o3 = 0;
          if (0 < t2--)
            for (r3 < this.DB && (i4 = this[t2] >> r3) != (this.s & this.DM) >> r3 && (e4[o3++] = i4 | this.s << this.DB - r3); 0 <= t2; )
              r3 < 8 ? (i4 = (this[t2] & (1 << r3) - 1) << 8 - r3, i4 |= this[--t2] >> (r3 += this.DB - 8)) : (i4 = this[t2] >> (r3 -= 8) & 255, r3 <= 0 && (r3 += this.DB, --t2)), 0 != (128 & i4) && (i4 |= -256), 0 == o3 && (128 & this.s) != (128 & i4) && ++o3, (0 < o3 || i4 != this.s) && (e4[o3++] = i4);
          return e4;
        }, P2.prototype.equals = function(t2) {
          return 0 == this.compareTo(t2);
        }, P2.prototype.min = function(t2) {
          return this.compareTo(t2) < 0 ? this : t2;
        }, P2.prototype.max = function(t2) {
          return 0 < this.compareTo(t2) ? this : t2;
        }, P2.prototype.and = function(t2) {
          var e4 = C2();
          return this.bitwiseTo(t2, V2, e4), e4;
        }, P2.prototype.or = function(t2) {
          var e4 = C2();
          return this.bitwiseTo(t2, q2, e4), e4;
        }, P2.prototype.xor = function(t2) {
          var e4 = C2();
          return this.bitwiseTo(t2, Z2, e4), e4;
        }, P2.prototype.andNot = function(t2) {
          var e4 = C2();
          return this.bitwiseTo(t2, G2, e4), e4;
        }, P2.prototype.not = function() {
          for (var t2 = C2(), e4 = 0; e4 < this.t; ++e4)
            t2[e4] = this.DM & ~this[e4];
          return t2.t = this.t, t2.s = ~this.s, t2;
        }, P2.prototype.shiftLeft = function(t2) {
          var e4 = C2();
          return t2 < 0 ? this.rShiftTo(-t2, e4) : this.lShiftTo(t2, e4), e4;
        }, P2.prototype.shiftRight = function(t2) {
          var e4 = C2();
          return t2 < 0 ? this.lShiftTo(-t2, e4) : this.rShiftTo(t2, e4), e4;
        }, P2.prototype.getLowestSetBit = function() {
          for (var t2 = 0; t2 < this.t; ++t2)
            if (0 != this[t2])
              return t2 * this.DB + function(t3) {
                if (0 == t3)
                  return -1;
                var e4 = 0;
                return 0 == (65535 & t3) && (t3 >>= 16, e4 += 16), 0 == (255 & t3) && (t3 >>= 8, e4 += 8), 0 == (15 & t3) && (t3 >>= 4, e4 += 4), 0 == (3 & t3) && (t3 >>= 2, e4 += 2), 0 == (1 & t3) && ++e4, e4;
              }(this[t2]);
          return this.s < 0 ? this.t * this.DB : -1;
        }, P2.prototype.bitCount = function() {
          for (var t2 = 0, e4 = this.s & this.DM, i4 = 0; i4 < this.t; ++i4)
            t2 += function(t3) {
              for (var e5 = 0; 0 != t3; )
                t3 &= t3 - 1, ++e5;
              return e5;
            }(this[i4] ^ e4);
          return t2;
        }, P2.prototype.testBit = function(t2) {
          var e4 = Math.floor(t2 / this.DB);
          return e4 >= this.t ? 0 != this.s : 0 != (this[e4] & 1 << t2 % this.DB);
        }, P2.prototype.setBit = function(t2) {
          return this.changeBit(t2, q2);
        }, P2.prototype.clearBit = function(t2) {
          return this.changeBit(t2, G2);
        }, P2.prototype.flipBit = function(t2) {
          return this.changeBit(t2, Z2);
        }, P2.prototype.add = function(t2) {
          var e4 = C2();
          return this.addTo(t2, e4), e4;
        }, P2.prototype.subtract = function(t2) {
          var e4 = C2();
          return this.subTo(t2, e4), e4;
        }, P2.prototype.multiply = function(t2) {
          var e4 = C2();
          return this.multiplyTo(t2, e4), e4;
        }, P2.prototype.divide = function(t2) {
          var e4 = C2();
          return this.divRemTo(t2, e4, null), e4;
        }, P2.prototype.remainder = function(t2) {
          var e4 = C2();
          return this.divRemTo(t2, null, e4), e4;
        }, P2.prototype.divideAndRemainder = function(t2) {
          var e4 = C2(), i4 = C2();
          return this.divRemTo(t2, e4, i4), new Array(e4, i4);
        }, P2.prototype.modPow = function(t2, e4) {
          var i4, r3, o3 = t2.bitLength(), n3 = M2(1);
          if (o3 <= 0)
            return n3;
          i4 = o3 < 18 ? 1 : o3 < 48 ? 3 : o3 < 144 ? 4 : o3 < 768 ? 5 : 6, r3 = new (o3 < 8 ? R2 : e4.isEven() ? X2 : O2)(e4);
          var a3 = new Array(), s3 = 3, c3 = i4 - 1, l3 = (1 << i4) - 1;
          if (a3[1] = r3.convert(this), 1 < i4) {
            var u3 = C2();
            for (r3.sqrTo(a3[1], u3); s3 <= l3; )
              a3[s3] = C2(), r3.mulTo(u3, a3[s3 - 2], a3[s3]), s3 += 2;
          }
          var h3, p3, f3 = t2.t - 1, d3 = true, _4 = C2();
          for (o3 = L2(t2[f3]) - 1; 0 <= f3; ) {
            for (c3 <= o3 ? h3 = t2[f3] >> o3 - c3 & l3 : (h3 = (t2[f3] & (1 << o3 + 1) - 1) << c3 - o3, 0 < f3 && (h3 |= t2[f3 - 1] >> this.DB + o3 - c3)), s3 = i4; 0 == (1 & h3); )
              h3 >>= 1, --s3;
            if ((o3 -= s3) < 0 && (o3 += this.DB, --f3), d3)
              a3[h3].copyTo(n3), d3 = false;
            else {
              for (; 1 < s3; )
                r3.sqrTo(n3, _4), r3.sqrTo(_4, n3), s3 -= 2;
              0 < s3 ? r3.sqrTo(n3, _4) : (p3 = n3, n3 = _4, _4 = p3), r3.mulTo(_4, a3[h3], n3);
            }
            for (; 0 <= f3 && 0 == (t2[f3] & 1 << o3); )
              r3.sqrTo(n3, _4), p3 = n3, n3 = _4, _4 = p3, --o3 < 0 && (o3 = this.DB - 1, --f3);
          }
          return r3.revert(n3);
        }, P2.prototype.modInverse = function(t2) {
          var e4 = t2.isEven();
          if (this.isEven() && e4 || 0 == t2.signum())
            return P2.ZERO;
          for (var i4 = t2.clone(), r3 = this.clone(), o3 = M2(1), n3 = M2(0), a3 = M2(0), s3 = M2(1); 0 != i4.signum(); ) {
            for (; i4.isEven(); )
              i4.rShiftTo(1, i4), e4 ? (o3.isEven() && n3.isEven() || (o3.addTo(this, o3), n3.subTo(t2, n3)), o3.rShiftTo(1, o3)) : n3.isEven() || n3.subTo(t2, n3), n3.rShiftTo(1, n3);
            for (; r3.isEven(); )
              r3.rShiftTo(1, r3), e4 ? (a3.isEven() && s3.isEven() || (a3.addTo(this, a3), s3.subTo(t2, s3)), a3.rShiftTo(1, a3)) : s3.isEven() || s3.subTo(t2, s3), s3.rShiftTo(1, s3);
            0 <= i4.compareTo(r3) ? (i4.subTo(r3, i4), e4 && o3.subTo(a3, o3), n3.subTo(s3, n3)) : (r3.subTo(i4, r3), e4 && a3.subTo(o3, a3), s3.subTo(n3, s3));
          }
          return 0 != r3.compareTo(P2.ONE) ? P2.ZERO : 0 <= s3.compareTo(t2) ? s3.subtract(t2) : s3.signum() < 0 ? (s3.addTo(t2, s3), s3.signum() < 0 ? s3.add(t2) : s3) : s3;
        }, P2.prototype.pow = function(t2) {
          return this.exp(t2, new H2());
        }, P2.prototype.gcd = function(t2) {
          var e4, i4 = this.s < 0 ? this.negate() : this.clone(), r3 = t2.s < 0 ? t2.negate() : t2.clone();
          i4.compareTo(r3) < 0 && (e4 = i4, i4 = r3, r3 = e4);
          var o3 = i4.getLowestSetBit(), n3 = r3.getLowestSetBit();
          if (n3 < 0)
            return i4;
          for (o3 < n3 && (n3 = o3), 0 < n3 && (i4.rShiftTo(n3, i4), r3.rShiftTo(n3, r3)); 0 < i4.signum(); )
            0 < (o3 = i4.getLowestSetBit()) && i4.rShiftTo(o3, i4), 0 < (o3 = r3.getLowestSetBit()) && r3.rShiftTo(o3, r3), 0 <= i4.compareTo(r3) ? (i4.subTo(r3, i4), i4.rShiftTo(1, i4)) : (r3.subTo(i4, r3), r3.rShiftTo(1, r3));
          return 0 < n3 && r3.lShiftTo(n3, r3), r3;
        }, P2.prototype.isProbablePrime = function(t2) {
          var e4, i4 = this.abs();
          if (1 == i4.t && i4[0] <= K2[K2.length - 1]) {
            for (e4 = 0; e4 < K2.length; ++e4)
              if (i4[0] == K2[e4])
                return true;
            return false;
          }
          if (i4.isEven())
            return false;
          for (e4 = 1; e4 < K2.length; ) {
            for (var r3 = K2[e4], o3 = e4 + 1; o3 < K2.length && r3 < Y2; )
              r3 *= K2[o3++];
            for (r3 = i4.modInt(r3); e4 < o3; )
              if (r3 % K2[e4++] == 0)
                return false;
          }
          return i4.millerRabin(t2);
        }, P2.prototype.square = function() {
          var t2 = C2();
          return this.squareTo(t2), t2;
        };
        var J2 = function(t2) {
          return A2(t2);
        }, Q2 = function(t2) {
          if (null == t2 || "" == t2)
            return "";
          var e4 = [], i4 = new B2(), r3 = k2.enc.Utf8.parse(t2);
          return r3 = i4.GetWords(r3.toString()), i4.BlockUpdate(r3, 0, r3.length), (i4.DoFinal(e4, 0), i4.GetHex(e4)).toString();
        }, $2 = function(t2, e4) {
          if (!o2)
            return null;
          var i4 = o2.enc.Utf8.parse(e4);
          return a2.encrypt(o2.enc.Utf8.parse(t2), i4, { mode: o2.mode.ECB, padding: o2.pad.Pkcs7 }).ciphertext.toString(o2.enc.Base64);
        }, tt2 = function(t2, e4) {
          if (!o2)
            return null;
          var i4 = o2.enc.Utf8.parse(e4);
          return a2.decrypt({ ciphertext: o2.enc.Base64.parse(t2) }, i4, { mode: o2.mode.ECB, padding: o2.pad.Pkcs7 }).toString(o2.enc.Utf8);
        }, et2 = function(t2) {
          var e4 = [];
          for (var i4 in t2) {
            var r3 = t2[i4];
            e4.push("".concat(i4, "=").concat(r3));
          }
          return e4.join("&");
        }, it2 = function() {
          return window.SGMap;
        }, rt2 = c2(function(t2, e4) {
          !function(i4, r3) {
            var o3 = "function", n3 = "model", a3 = "name", s3 = "type", c3 = "vendor", l3 = "version", u3 = "architecture", h3 = "console", p3 = "mobile", f3 = "tablet", d3 = "smarttv", _4 = "wearable", m3 = { extend: function(t3, e5) {
              var i5 = {};
              for (var r4 in t3)
                i5[r4] = e5[r4] && e5[r4].length % 2 == 0 ? e5[r4].concat(t3[r4]) : t3[r4];
              return i5;
            }, has: function(t3, e5) {
              return "string" == typeof t3 && -1 !== e5.toLowerCase().indexOf(t3.toLowerCase());
            }, lowerize: function(t3) {
              return t3.toLowerCase();
            }, major: function(t3) {
              return "string" == typeof t3 ? t3.replace(/[^\d\.]/g, "").split(".")[0] : r3;
            }, trim: function(t3) {
              return t3.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
            } }, g3 = { rgx: function(t3, e5) {
              for (var i5, n4, a4, s4, c4, l4 = 0; l4 < e5.length && !s4; ) {
                for (var u4 = e5[l4], h4 = e5[l4 + 1], p4 = i5 = 0; p4 < u4.length && !s4; )
                  if (s4 = u4[p4++].exec(t3))
                    for (n4 = 0; n4 < h4.length; n4++)
                      c4 = s4[++i5], "object" == typeof (a4 = h4[n4]) && 0 < a4.length ? 2 == a4.length ? this[a4[0]] = typeof a4[1] == o3 ? a4[1].call(this, c4) : a4[1] : 3 == a4.length ? this[a4[0]] = typeof a4[1] != o3 || a4[1].exec && a4[1].test ? c4 ? c4.replace(a4[1], a4[2]) : r3 : c4 ? a4[1].call(this, c4, a4[2]) : r3 : 4 == a4.length && (this[a4[0]] = c4 ? a4[3].call(this, c4.replace(a4[1], a4[2])) : r3) : this[a4] = c4 || r3;
                l4 += 2;
              }
            }, str: function(t3, e5) {
              for (var i5 in e5)
                if ("object" == typeof e5[i5] && 0 < e5[i5].length) {
                  for (var o4 = 0; o4 < e5[i5].length; o4++)
                    if (m3.has(e5[i5][o4], t3))
                      return "?" === i5 ? r3 : i5;
                } else if (m3.has(e5[i5], t3))
                  return "?" === i5 ? r3 : i5;
              return t3;
            } }, v3 = { browser: { oldsafari: { version: { "1.0": "/8", 1.2: "/1", 1.3: "/3", "2.0": "/412", "2.0.2": "/416", "2.0.3": "/417", "2.0.4": "/419", "?": "/" } } }, device: { amazon: { model: { "Fire Phone": ["SD", "KF"] } }, sprint: { model: { "Evo Shift 4G": "7373KT" }, vendor: { HTC: "APA", Sprint: "Sprint" } } }, os: { windows: { version: { ME: "4.90", "NT 3.11": "NT3.51", "NT 4.0": "NT4.0", 2e3: "NT 5.0", XP: ["NT 5.1", "NT 5.2"], Vista: "NT 6.0", 7: "NT 6.1", 8: "NT 6.2", 8.1: "NT 6.3", 10: ["NT 6.4", "NT 10.0"], RT: "ARM" } } } }, y3 = { browser: [[/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i], [a3, l3], [/(opios)[\/\s]+([\w\.]+)/i], [[a3, "Opera Mini"], l3], [/\s(opr)\/([\w\.]+)/i], [[a3, "Opera"], l3], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i, /(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i, /(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]*)/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i], [a3, l3], [/(konqueror)\/([\w\.]+)/i], [[a3, "Konqueror"], l3], [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i], [[a3, "IE"], l3], [/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i], [[a3, "Edge"], l3], [/(yabrowser)\/([\w\.]+)/i], [[a3, "Yandex"], l3], [/(Avast)\/([\w\.]+)/i], [[a3, "Avast Secure Browser"], l3], [/(AVG)\/([\w\.]+)/i], [[a3, "AVG Secure Browser"], l3], [/(puffin)\/([\w\.]+)/i], [[a3, "Puffin"], l3], [/(focus)\/([\w\.]+)/i], [[a3, "Firefox Focus"], l3], [/(opt)\/([\w\.]+)/i], [[a3, "Opera Touch"], l3], [/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i], [[a3, "UCBrowser"], l3], [/(comodo_dragon)\/([\w\.]+)/i], [[a3, /_/g, " "], l3], [/(windowswechat qbcore)\/([\w\.]+)/i], [[a3, "WeChat(Win) Desktop"], l3], [/(micromessenger)\/([\w\.]+)/i], [[a3, "WeChat"], l3], [/(brave)\/([\w\.]+)/i], [[a3, "Brave"], l3], [/(qqbrowserlite)\/([\w\.]+)/i], [a3, l3], [/(QQ)\/([\d\.]+)/i], [a3, l3], [/m?(qqbrowser)[\/\s]?([\w\.]+)/i], [a3, l3], [/(baiduboxapp)[\/\s]?([\w\.]+)/i], [a3, l3], [/(2345Explorer)[\/\s]?([\w\.]+)/i], [a3, l3], [/(MetaSr)[\/\s]?([\w\.]+)/i], [a3], [/(LBBROWSER)/i], [a3], [/xiaomi\/miuibrowser\/([\w\.]+)/i], [l3, [a3, "MIUI Browser"]], [/;fbav\/([\w\.]+);/i], [l3, [a3, "Facebook"]], [/safari\s(line)\/([\w\.]+)/i, /android.+(line)\/([\w\.]+)\/iab/i], [a3, l3], [/headlesschrome(?:\/([\w\.]+)|\s)/i], [l3, [a3, "Chrome Headless"]], [/\swv\).+(chrome)\/([\w\.]+)/i], [[a3, /(.+)/, "$1 WebView"], l3], [/((?:oculus|samsung)browser)\/([\w\.]+)/i], [[a3, /(.+(?:g|us))(.+)/, "$1 $2"], l3], [/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i], [l3, [a3, "Android Browser"]], [/(sailfishbrowser)\/([\w\.]+)/i], [[a3, "Sailfish Browser"], l3], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i], [a3, l3], [/(dolfin)\/([\w\.]+)/i], [[a3, "Dolphin"], l3], [/(qihu|qhbrowser|qihoobrowser|360browser)/i], [[a3, "360 Browser"]], [/((?:android.+)crmo|crios)\/([\w\.]+)/i], [[a3, "Chrome"], l3], [/(coast)\/([\w\.]+)/i], [[a3, "Opera Coast"], l3], [/fxios\/([\w\.-]+)/i], [l3, [a3, "Firefox"]], [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i], [l3, [a3, "Mobile Safari"]], [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i], [l3, a3], [/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [[a3, "GSA"], l3], [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [a3, [l3, g3.str, v3.browser.oldsafari.version]], [/(webkit|khtml)\/([\w\.]+)/i], [a3, l3], [/(navigator|netscape)\/([\w\.-]+)/i], [[a3, "Netscape"], l3], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]*)/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i], [a3, l3]], cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i], [[u3, "amd64"]], [/(ia32(?=;))/i], [[u3, m3.lowerize]], [/((?:i[346]|x)86)[;\)]/i], [[u3, "ia32"]], [/windows\s(ce|mobile);\sppc;/i], [[u3, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i], [[u3, /ower/, "", m3.lowerize]], [/(sun4\w)[;\)]/i], [[u3, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i], [[u3, m3.lowerize]]], device: [[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i], [n3, c3, [s3, f3]], [/applecoremedia\/[\w\.]+ \((ipad)/], [n3, [c3, "Apple"], [s3, f3]], [/(apple\s{0,1}tv)/i], [[n3, "Apple TV"], [c3, "Apple"], [s3, d3]], [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(hp).+(tablet)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i], [c3, n3, [s3, f3]], [/(kf[A-z]+)\sbuild\/.+silk\//i], [n3, [c3, "Amazon"], [s3, f3]], [/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i], [[n3, g3.str, v3.device.amazon.model], [c3, "Amazon"], [s3, p3]], [/android.+aft([bms])\sbuild/i], [n3, [c3, "Amazon"], [s3, d3]], [/\((ip[honed|\s\w*]+);.+(apple)/i], [n3, c3, [s3, p3]], [/\((ip[honed|\s\w*]+);/i], [n3, [c3, "Apple"], [s3, p3]], [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i], [c3, n3, [s3, p3]], [/\(bb10;\s(\w+)/i], [n3, [c3, "BlackBerry"], [s3, p3]], [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i], [n3, [c3, "Asus"], [s3, f3]], [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i], [[c3, "Sony"], [n3, "Xperia Tablet"], [s3, f3]], [/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [n3, [c3, "Sony"], [s3, p3]], [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i], [c3, n3, [s3, h3]], [/android.+;\s(shield)\sbuild/i], [n3, [c3, "Nvidia"], [s3, h3]], [/(playstation\s[34portablevi]+)/i], [n3, [c3, "Sony"], [s3, h3]], [/(sprint\s(\w+))/i], [[c3, g3.str, v3.device.sprint.vendor], [n3, g3.str, v3.device.sprint.model], [s3, p3]], [/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i, /(zte)-(\w*)/i, /(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i], [c3, [n3, /_/g, " "], [s3, p3]], [/(nexus\s9)/i], [n3, [c3, "HTC"], [s3, f3]], [/d\/huawei([\w\s-]+)[;\)]/i, /(nexus\s6p|vog-l29|ane-lx1|eml-l29|ele-l29)/i], [n3, [c3, "Huawei"], [s3, p3]], [/android.+(bah2?-a?[lw]\d{2})/i], [n3, [c3, "Huawei"], [s3, f3]], [/(microsoft);\s(lumia[\s\w]+)/i], [c3, n3, [s3, p3]], [/[\s\(;](xbox(?:\sone)?)[\s\);]/i], [n3, [c3, "Microsoft"], [s3, h3]], [/(kin\.[onetw]{3})/i], [[n3, /\./g, " "], [c3, "Microsoft"], [s3, p3]], [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w*)/i, /(XT\d{3,4}) build\//i, /(nexus\s6)/i], [n3, [c3, "Motorola"], [s3, p3]], [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i], [n3, [c3, "Motorola"], [s3, f3]], [/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i], [[c3, m3.trim], [n3, m3.trim], [s3, d3]], [/hbbtv.+maple;(\d+)/i], [[n3, /^/, "SmartTV"], [c3, "Samsung"], [s3, d3]], [/\(dtv[\);].+(aquos)/i], [n3, [c3, "Sharp"], [s3, d3]], [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i], [[c3, "Samsung"], n3, [s3, f3]], [/smart-tv.+(samsung)/i], [c3, [s3, d3], n3], [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i, /sec-((sgh\w+))/i], [[c3, "Samsung"], n3, [s3, p3]], [/sie-(\w*)/i], [n3, [c3, "Siemens"], [s3, p3]], [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]*)/i], [[c3, "Nokia"], n3, [s3, p3]], [/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i], [n3, [c3, "Acer"], [s3, f3]], [/android.+([vl]k\-?\d{3})\s+build/i], [n3, [c3, "LG"], [s3, f3]], [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i], [[c3, "LG"], n3, [s3, f3]], [/(lg) netcast\.tv/i], [c3, n3, [s3, d3]], [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w*)/i, /android.+lg(\-?[\d\w]+)\s+build/i], [n3, [c3, "LG"], [s3, p3]], [/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i], [c3, n3, [s3, f3]], [/android.+(ideatab[a-z0-9\-\s]+)/i], [n3, [c3, "Lenovo"], [s3, f3]], [/(lenovo)[_\s-]?([\w-]+)/i], [c3, n3, [s3, p3]], [/linux;.+((jolla));/i], [c3, n3, [s3, p3]], [/((pebble))app\/[\d\.]+\s/i], [c3, n3, [s3, _4]], [/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i], [c3, n3, [s3, p3]], [/crkey/i], [[n3, "Chromecast"], [c3, "Google"], [s3, d3]], [/android.+;\s(glass)\s\d/i], [n3, [c3, "Google"], [s3, _4]], [/android.+;\s(pixel c)[\s)]/i], [n3, [c3, "Google"], [s3, f3]], [/android.+;\s(pixel( [23])?( xl)?)[\s)]/i], [n3, [c3, "Google"], [s3, p3]], [/android.+;\s(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i, /android.+(redmi[\s\-_]*(?:note)?(?:[\s_]?[\w\s]+))\s+build/i], [[n3, /_/g, " "], [c3, "Xiaomi"], [s3, p3]], [/android.+(mi[\s\-_]*(?:pad)(?:[\s_]?[\w\s]+))\s+build/i], [[n3, /_/g, " "], [c3, "Xiaomi"], [s3, f3]], [/android.+;\s(m[1-5]\snote)\sbuild/i], [n3, [c3, "Meizu"], [s3, p3]], [/(mz)-([\w-]{2,})/i], [[c3, "Meizu"], n3, [s3, p3]], [/android.+a000(1)\s+build/i, /android.+oneplus\s(a\d{4})[\s)]/i], [n3, [c3, "OnePlus"], [s3, p3]], [/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i], [n3, [c3, "RCA"], [s3, f3]], [/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i], [n3, [c3, "Dell"], [s3, f3]], [/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i], [n3, [c3, "Verizon"], [s3, f3]], [/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i], [[c3, "Barnes & Noble"], n3, [s3, f3]], [/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i], [n3, [c3, "NuVision"], [s3, f3]], [/android.+;\s(k88)\sbuild/i], [n3, [c3, "ZTE"], [s3, f3]], [/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i], [n3, [c3, "Swiss"], [s3, p3]], [/android.+[;\/]\s*(zur\d{3})\s+build/i], [n3, [c3, "Swiss"], [s3, f3]], [/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i], [n3, [c3, "Zeki"], [s3, f3]], [/(android).+[;\/]\s+([YR]\d{2})\s+build/i, /android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i], [[c3, "Dragon Touch"], n3, [s3, f3]], [/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i], [n3, [c3, "Insignia"], [s3, f3]], [/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i], [n3, [c3, "NextBook"], [s3, f3]], [/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i], [[c3, "Voice"], n3, [s3, p3]], [/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i], [[c3, "LvTel"], n3, [s3, p3]], [/android.+;\s(PH-1)\s/i], [n3, [c3, "Essential"], [s3, p3]], [/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i], [n3, [c3, "Envizen"], [s3, f3]], [/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i], [c3, n3, [s3, f3]], [/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i], [n3, [c3, "MachSpeed"], [s3, f3]], [/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i], [c3, n3, [s3, f3]], [/android.+[;\/]\s*TU_(1491)\s+build/i], [n3, [c3, "Rotor"], [s3, f3]], [/android.+(KS(.+))\s+build/i], [n3, [c3, "Amazon"], [s3, f3]], [/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i], [c3, n3, [s3, f3]], [/\s(tablet|tab)[;\/]/i, /\s(mobile)(?:[;\/]|\ssafari)/i], [[s3, m3.lowerize], c3, n3], [/[\s\/\(](smart-?tv)[;\)]/i], [[s3, d3]], [/(android[\w\.\s\-]{0,9});.+build/i], [n3, [c3, "Generic"]]], engine: [[/windows.+\sedge\/([\w\.]+)/i], [l3, [a3, "EdgeHTML"]], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i], [l3, [a3, "Blink"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [a3, l3], [/rv\:([\w\.]{1,9}).+(gecko)/i], [l3, a3]], os: [[/microsoft\s(windows)\s(vista|xp)/i], [a3, l3], [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i, /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [a3, [l3, g3.str, v3.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[a3, "Windows"], [l3, g3.str, v3.os.windows.version]], [/\((bb)(10);/i], [[a3, "BlackBerry"], l3], [/(blackberry)\w*\/?([\w\.]*)/i, /(tizen|kaios)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i], [a3, l3], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i], [[a3, "Symbian"], l3], [/\((series40);/i], [a3], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[a3, "Firefox OS"], l3], [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w*)/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i, /(hurd|linux)\s?([\w\.]*)/i, /(gnu)\s?([\w\.]*)/i], [a3, l3], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[a3, "Chromium OS"], l3], [/(sunos)\s?([\w\.\d]*)/i], [[a3, "Solaris"], l3], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i], [a3, l3], [/(haiku)\s(\w+)/i], [a3, l3], [/cfnetwork\/.+darwin/i, /ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i], [[l3, /_/g, "."], [a3, "iOS"]], [/(mac\sos\sx)\s?([\w\s\.]*)/i, /(macintosh|mac(?=_powerpc)\s)/i], [[a3, "Mac OS"], [l3, /_/g, "."]], [/((?:open)?solaris)[\/\s-]?([\w\.]*)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i, /(unix)\s?([\w\.]*)/i], [a3, l3]] }, b3 = function(t3, e5) {
              if ("object" == typeof t3 && (e5 = t3, t3 = r3), !(this instanceof b3))
                return new b3(t3, e5).getResult();
              var o4 = t3 || (i4 && i4.navigator && i4.navigator.userAgent ? i4.navigator.userAgent : ""), n4 = e5 ? m3.extend(y3, e5) : y3;
              return this.getBrowser = function() {
                var t4 = { name: r3, version: r3 };
                return g3.rgx.call(t4, o4, n4.browser), t4.major = m3.major(t4.version), t4;
              }, this.getCPU = function() {
                var t4 = { architecture: r3 };
                return g3.rgx.call(t4, o4, n4.cpu), t4;
              }, this.getDevice = function() {
                var t4 = { vendor: r3, model: r3, type: r3 };
                return g3.rgx.call(t4, o4, n4.device), t4;
              }, this.getEngine = function() {
                var t4 = { name: r3, version: r3 };
                return g3.rgx.call(t4, o4, n4.engine), t4;
              }, this.getOS = function() {
                var t4 = { name: r3, version: r3 };
                return g3.rgx.call(t4, o4, n4.os), t4;
              }, this.getResult = function() {
                return { ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS(), device: this.getDevice(), cpu: this.getCPU() };
              }, this.getUA = function() {
                return o4;
              }, this.setUA = function(t4) {
                return o4 = t4, this;
              }, this;
            };
            b3.VERSION = "0.7.22", b3.BROWSER = { NAME: a3, MAJOR: "major", VERSION: l3 }, b3.CPU = { ARCHITECTURE: u3 }, b3.DEVICE = { MODEL: n3, VENDOR: c3, TYPE: s3, CONSOLE: h3, MOBILE: p3, SMARTTV: d3, TABLET: f3, WEARABLE: _4, EMBEDDED: "embedded" }, b3.ENGINE = { NAME: a3, VERSION: l3 }, b3.OS = { NAME: a3, VERSION: l3 }, t2.exports && (e4 = t2.exports = b3), e4.UAParser = b3;
            var w3, x3 = i4 && (i4.jQuery || i4.Zepto);
            x3 && !x3.ua && (w3 = new b3(), x3.ua = w3.getResult(), x3.ua.get = function() {
              return w3.getUA();
            }, x3.ua.set = function(t3) {
              w3.setUA(t3);
              var e5 = w3.getResult();
              for (var i5 in e5)
                x3.ua[i5] = e5[i5];
            });
          }("object" == typeof window ? window : s2);
        }), ot2 = function() {
          this._OPTS = { isAuto: true }, this._firstLogin = true, this._timer = null;
        };
        return ot2.prototype.login = function(t2, e4, r3) {
          var o3, n3;
          this._opts = (o3 = this._OPTS, n3 = r3, Object.assign = Object.assign || function(t3, e5) {
            var r4, o4 = i3(e5);
            try {
              for (o4.s(); !(r4 = o4.n()).done; ) {
                var n4 = r4.value;
                for (var a4 in t3)
                  t3[a4] = n4[a4];
              }
            } catch (t4) {
              o4.e(t4);
            } finally {
              o4.f();
            }
            return t3;
          }, Object.assign(o3, n3)), this._key = t2, this._sn = e4;
          var a3 = J2(t2 + e4).substring(5, 21), s3 = Q2(JSON.stringify({ appKey: t2, appSecret: e4 })), c3 = $2(JSON.stringify({ appKey: t2, appSecret: e4 }), a3);
          this._firstLogin && (this._parseOpts(), this._firstLogin = false);
          var l3 = s3 + c3;
          it2()._loader.config.enc = l3;
          var u3 = this;
          return it2().ajax({ method: "POST", url: "".concat(it2().config.API_URL, "/authentication/v2/login/sysLogin"), type: "json", headers: { "Content-Type": "application/x-www-form-urlencoded;charset=utf-8" }, body: et2({ key: t2, enc: encodeURIComponent(l3) }) }).then(function(i4) {
            if ("10000" != i4.code)
              throw new Error("\u6821\u9A8C\u9519\u8BEF");
            var r4 = JSON.parse(tt2(i4.resultValue.substring(64), a3)).token;
            u3._setToken(r4.accessToken, r4.refreshToken), it2().config.LOG_PLUGIN && it2().plugin(["SGMap.Logan"]).then(function() {
              var i5 = new (it2()).Logan({ key: t2, sn: e4 });
              i5.addErrorListener(), it2().Logan = i5;
            }).catch(function(t3) {
              console.warn(t3.toString());
            });
            var o4, n4, s4, c4 = JSON.parse(localStorage.getItem("SGMAP_KEY")), l4 = window.location.origin;
            return c4 ? c4[l4] && -1 != c4[l4].indexOf(u3._key) || (c4[l4] ? c4[l4].push(u3._key) : c4[l4] = [u3._key], localStorage.setItem("SGMAP_KEY", JSON.stringify(c4))) : localStorage.setItem("SGMAP_KEY", JSON.stringify((s4 = [u3._key], (n4 = l4) in (o4 = {}) ? Object.defineProperty(o4, n4, { value: s4, enumerable: true, configurable: true, writable: true }) : o4[n4] = s4, o4))), new Promise(function(t3, e5) {
              t3(i4), e5("error");
            });
          }).catch(function(t3) {
            console.log(t3);
          });
        }, ot2.prototype.getAccessToken = function() {
          return it2().config.ACCESS_TOKEN;
        }, ot2.prototype._parseOpts = function() {
          this._opts.isAuto && window && this._initAutoLogin();
        }, ot2.prototype._initAutoLogin = function() {
          var t2, e4, i4;
          t2 = window, e4 = "online", i4 = this._autoLogin.bind(this), t2.addEventListener ? t2.addEventListener(e4, i4, false) : t2.attachEvent("on" + e4, i4);
        }, ot2.prototype._autoLogin = function() {
          this.login(this._key, this._sn);
          var t2 = null;
          this._opts && this._opts.onAutoLogin && (t2 = this._opts.onAutoLogin), t2 && t2(this);
        }, ot2.prototype._setToken = function(t2, e4) {
          this._setConfigAccessToken(t2);
          var i4 = this._accessToken, r3 = this._refreshToken;
          this._accessToken = t2, this._refreshToken = e4, i4 && r3 && this.loginoutToken(i4, r3), this._triggerTimer();
        }, ot2.prototype._setConfigAccessToken = function(t2) {
          it2().config.ACCESS_TOKEN = t2, it2().accessToken = t2;
        }, ot2.prototype._triggerTimer = function() {
          this._timer && clearTimeout(this._timer);
          var t2 = this;
          this._timer = setTimeout(function() {
            t2._refreshTokens();
          }, this._getInterval());
        }, ot2.prototype._getInterval = function() {
          var t2 = this._accessToken.split("."), e4 = JSON.parse(atob(t2[1])), i4 = e4.exp - e4.iat - 60;
          return 1e3 * (2e6 < i4 ? 2e6 : i4);
        }, ot2.prototype._refreshTokens = function() {
          var t2 = this;
          return it2().ajax({ url: "".concat(it2().config.API_URL, "/authentication/token/refresh"), method: "POST", body: et2({ accessToken: t2._accessToken, refreshToken: t2._refreshToken }), headers: { Authorization: t2._accessToken, "Content-Type": "application/x-www-form-urlencoded;charset=utf-8" } }).then(function(e4) {
            var i4 = JSON.parse(e4);
            t2._setToken(i4.resultValue.accessToken, i4.resultValue.refreshToken);
          }).catch(function(t3) {
            throw new Error(t3);
          });
        }, ot2.prototype.loginout = function() {
          return this.loginoutToken(this._accessToken, this._refreshToken);
        }, ot2.prototype.loginoutToken = function(t2, e4) {
          var i4 = this._key, r3 = J2(i4 + this._sn).substring(5, 21), o3 = Q2(JSON.stringify({ accessToken: t2, refreshToken: e4 })) + $2(JSON.stringify({ accessToken: t2, refreshToken: e4 }), r3);
          return it2()._loader.config.enc = o3, it2().ajax({ url: "".concat(it2().config.API_URL, "/authentication/v2/sysLogout"), body: et2({ key: i4, enc: encodeURIComponent(o3) }), headers: { Authorization: this._accessToken, "Content-Type": "application/x-www-form-urlencoded;charset=utf-8" }, method: "POST" }).then(function(t3) {
            return true;
          }).catch(function(t3) {
            throw new Error(t3);
          });
        }, ot2.prototype._loggerTask = function() {
          var t2 = new rt2(), e4 = [{ ServiceName: "map_api_js", LogLevel: "info", Extension: { SDK_version: it2().version, uaInfo: t2.getBrowser(), initTime: new Date().getTime(), pageTitle: document.title, key: this._key, referer: window.location.href } }], i4 = $2(JSON.stringify(e4), "JeF8U9wHFOMfs2Y8");
          return it2().ajax({ url: "".concat(it2().config.API_URL, "/log/v1/collection"), data: i4, type: "json", headers: { Authorization: this._accessToken }, method: "POST" }).catch(function(t3) {
            throw new Error(t3);
          });
        }, ot2;
      }();
    }), Ko = t.createCommonjsModule(function(e2, r2) {
      !function(t2, i2) {
        e2.exports = i2();
      }(0, function() {
        var e3 = { isDev: false, apiUrl: "https://lbs.sgmap.cn", version: "1.3.0", expires: 36e4, enc: "epgis" }, r3 = null, o2 = r3 = r3 || function() {
          var t2, e4, i2, r4, o3, n3, a3, s3, c3, l3, u3, h3, p3, f3, d3, _4, m3, g3, v3, y3, b3, w3, x3, T3, S3, E3, A3, k3, I3, B3, P3, C3, z3, D3, M3, L3, R3, O3, F3, U3, N3, j3, V3, q3, Z3, G3, H3, W3, X3, K3, Y3, J3, Q3, $3, tt3, et3, it3, rt3, ot3, nt3, at3, st3, ct2, lt2, ut2, ht2, pt2, ft2, dt2, _t2, mt2, gt2, vt2, yt2, bt2, wt2, xt2, Tt2, St2, Et2, At2, kt2, It2, Bt2, Pt2, Ct2 = Ct2 || (t2 = Math, e4 = Object.create || function(t3) {
            var e5;
            return zt2.prototype = t3, e5 = new zt2(), zt2.prototype = null, e5;
          }, r4 = (i2 = {}).lib = {}, o3 = r4.Base = { extend: function(t3) {
            var i3 = e4(this);
            return t3 && i3.mixIn(t3), i3.hasOwnProperty("init") && this.init !== i3.init || (i3.init = function() {
              i3.$super.init.apply(this, arguments);
            }), (i3.init.prototype = i3).$super = this, i3;
          }, create: function() {
            var t3 = this.extend();
            return t3.init.apply(t3, arguments), t3;
          }, init: function() {
          }, mixIn: function(t3) {
            for (var e5 in t3)
              t3.hasOwnProperty(e5) && (this[e5] = t3[e5]);
            t3.hasOwnProperty("toString") && (this.toString = t3.toString);
          }, clone: function() {
            return this.init.prototype.extend(this);
          } }, n3 = r4.WordArray = o3.extend({ init: function(t3, e5) {
            t3 = this.words = t3 || [], this.sigBytes = null != e5 ? e5 : 4 * t3.length;
          }, toString: function(t3) {
            return (t3 || s3).stringify(this);
          }, concat: function(t3) {
            var e5 = this.words, i3 = t3.words, r5 = this.sigBytes, o4 = t3.sigBytes;
            if (this.clamp(), r5 % 4)
              for (var n4 = 0; n4 < o4; n4++)
                e5[r5 + n4 >>> 2] |= (i3[n4 >>> 2] >>> 24 - n4 % 4 * 8 & 255) << 24 - (r5 + n4) % 4 * 8;
            else
              for (n4 = 0; n4 < o4; n4 += 4)
                e5[r5 + n4 >>> 2] = i3[n4 >>> 2];
            return this.sigBytes += o4, this;
          }, clamp: function() {
            var e5 = this.words, i3 = this.sigBytes;
            e5[i3 >>> 2] &= 4294967295 << 32 - i3 % 4 * 8, e5.length = t2.ceil(i3 / 4);
          }, clone: function() {
            var t3 = o3.clone.call(this);
            return t3.words = this.words.slice(0), t3;
          }, random: function(e5) {
            for (var i3 = [], r5 = function(e6) {
              e6 = e6;
              var i4 = 987654321, r6 = 4294967295;
              return function() {
                var o5 = ((i4 = 36969 * (65535 & i4) + (i4 >> 16) & r6) << 16) + (e6 = 18e3 * (65535 & e6) + (e6 >> 16) & r6) & r6;
                return o5 /= 4294967296, (o5 += 0.5) * (0.5 < t2.random() ? 1 : -1);
              };
            }, o4 = 0; o4 < e5; o4 += 4) {
              var a4 = r5(4294967296 * (s4 || t2.random())), s4 = 987654071 * a4();
              i3.push(4294967296 * a4() | 0);
            }
            return new n3.init(i3, e5);
          } }), a3 = i2.enc = {}, s3 = a3.Hex = { stringify: function(t3) {
            for (var e5 = t3.words, i3 = t3.sigBytes, r5 = [], o4 = 0; o4 < i3; o4++) {
              var n4 = e5[o4 >>> 2] >>> 24 - o4 % 4 * 8 & 255;
              r5.push((n4 >>> 4).toString(16)), r5.push((15 & n4).toString(16));
            }
            return r5.join("");
          }, parse: function(t3) {
            for (var e5 = t3.length, i3 = [], r5 = 0; r5 < e5; r5 += 2)
              i3[r5 >>> 3] |= parseInt(t3.substr(r5, 2), 16) << 24 - r5 % 8 * 4;
            return new n3.init(i3, e5 / 2);
          } }, c3 = a3.Latin1 = { stringify: function(t3) {
            for (var e5 = t3.words, i3 = t3.sigBytes, r5 = [], o4 = 0; o4 < i3; o4++)
              r5.push(String.fromCharCode(e5[o4 >>> 2] >>> 24 - o4 % 4 * 8 & 255));
            return r5.join("");
          }, parse: function(t3) {
            for (var e5 = t3.length, i3 = [], r5 = 0; r5 < e5; r5++)
              i3[r5 >>> 2] |= (255 & t3.charCodeAt(r5)) << 24 - r5 % 4 * 8;
            return new n3.init(i3, e5);
          } }, l3 = a3.Utf8 = { stringify: function(t3) {
            try {
              return decodeURIComponent(escape(c3.stringify(t3)));
            } catch (t4) {
              throw new Error("Malformed UTF-8 data");
            }
          }, parse: function(t3) {
            return c3.parse(unescape(encodeURIComponent(t3)));
          } }, u3 = r4.BufferedBlockAlgorithm = o3.extend({ reset: function() {
            this._data = new n3.init(), this._nDataBytes = 0;
          }, _append: function(t3) {
            "string" == typeof t3 && (t3 = l3.parse(t3)), this._data.concat(t3), this._nDataBytes += t3.sigBytes;
          }, _process: function(e5) {
            var i3 = this._data, r5 = i3.words, o4 = i3.sigBytes, a4 = this.blockSize, s4 = o4 / (4 * a4), c4 = (s4 = e5 ? t2.ceil(s4) : t2.max((0 | s4) - this._minBufferSize, 0)) * a4, l4 = t2.min(4 * c4, o4);
            if (c4) {
              for (var u4 = 0; u4 < c4; u4 += a4)
                this._doProcessBlock(r5, u4);
              var h4 = r5.splice(0, c4);
              i3.sigBytes -= l4;
            }
            return new n3.init(h4, l4);
          }, clone: function() {
            var t3 = o3.clone.call(this);
            return t3._data = this._data.clone(), t3;
          }, _minBufferSize: 0 }), r4.Hasher = u3.extend({ cfg: o3.extend(), init: function(t3) {
            this.cfg = this.cfg.extend(t3), this.reset();
          }, reset: function() {
            u3.reset.call(this), this._doReset();
          }, update: function(t3) {
            return this._append(t3), this._process(), this;
          }, finalize: function(t3) {
            return t3 && this._append(t3), this._doFinalize();
          }, blockSize: 16, _createHelper: function(t3) {
            return function(e5, i3) {
              return new t3.init(i3).finalize(e5);
            };
          }, _createHmacHelper: function(t3) {
            return function(e5, i3) {
              return new h3.HMAC.init(t3, i3).finalize(e5);
            };
          } }), h3 = i2.algo = {}, i2);
          function zt2() {
          }
          function Dt2(t3, e5, i3) {
            return t3 & e5 | ~t3 & i3;
          }
          function Mt2(t3, e5, i3) {
            return t3 & i3 | e5 & ~i3;
          }
          function Lt2(t3, e5) {
            return t3 << e5 | t3 >>> 32 - e5;
          }
          function Rt2(t3, e5, i3, r5) {
            var o4, n4 = this._iv;
            n4 ? (o4 = n4.slice(0), this._iv = void 0) : o4 = this._prevBlock, r5.encryptBlock(o4, 0);
            for (var a4 = 0; a4 < i3; a4++)
              t3[e5 + a4] ^= o4[a4];
          }
          function Ot2(t3) {
            var e5, i3, r5;
            return 255 == (t3 >> 24 & 255) ? (i3 = t3 >> 8 & 255, r5 = 255 & t3, 255 == (e5 = t3 >> 16 & 255) ? (e5 = 0, 255 === i3 ? (i3 = 0, 255 === r5 ? r5 = 0 : ++r5) : ++i3) : ++e5, t3 = 0, t3 += e5 << 16, t3 += i3 << 8, t3 += r5) : t3 += 1 << 24, t3;
          }
          function Ft2() {
            for (var t3 = this._X, e5 = this._C, i3 = 0; i3 < 8; i3++)
              bt2[i3] = e5[i3];
            for (e5[0] = e5[0] + 1295307597 + this._b | 0, e5[1] = e5[1] + 3545052371 + (e5[0] >>> 0 < bt2[0] >>> 0 ? 1 : 0) | 0, e5[2] = e5[2] + 886263092 + (e5[1] >>> 0 < bt2[1] >>> 0 ? 1 : 0) | 0, e5[3] = e5[3] + 1295307597 + (e5[2] >>> 0 < bt2[2] >>> 0 ? 1 : 0) | 0, e5[4] = e5[4] + 3545052371 + (e5[3] >>> 0 < bt2[3] >>> 0 ? 1 : 0) | 0, e5[5] = e5[5] + 886263092 + (e5[4] >>> 0 < bt2[4] >>> 0 ? 1 : 0) | 0, e5[6] = e5[6] + 1295307597 + (e5[5] >>> 0 < bt2[5] >>> 0 ? 1 : 0) | 0, e5[7] = e5[7] + 3545052371 + (e5[6] >>> 0 < bt2[6] >>> 0 ? 1 : 0) | 0, this._b = e5[7] >>> 0 < bt2[7] >>> 0 ? 1 : 0, i3 = 0; i3 < 8; i3++) {
              var r5 = t3[i3] + e5[i3], o4 = 65535 & r5, n4 = r5 >>> 16;
              wt2[i3] = ((o4 * o4 >>> 17) + o4 * n4 >>> 15) + n4 * n4 ^ ((4294901760 & r5) * r5 | 0) + ((65535 & r5) * r5 | 0);
            }
            t3[0] = wt2[0] + (wt2[7] << 16 | wt2[7] >>> 16) + (wt2[6] << 16 | wt2[6] >>> 16) | 0, t3[1] = wt2[1] + (wt2[0] << 8 | wt2[0] >>> 24) + wt2[7] | 0, t3[2] = wt2[2] + (wt2[1] << 16 | wt2[1] >>> 16) + (wt2[0] << 16 | wt2[0] >>> 16) | 0, t3[3] = wt2[3] + (wt2[2] << 8 | wt2[2] >>> 24) + wt2[1] | 0, t3[4] = wt2[4] + (wt2[3] << 16 | wt2[3] >>> 16) + (wt2[2] << 16 | wt2[2] >>> 16) | 0, t3[5] = wt2[5] + (wt2[4] << 8 | wt2[4] >>> 24) + wt2[3] | 0, t3[6] = wt2[6] + (wt2[5] << 16 | wt2[5] >>> 16) + (wt2[4] << 16 | wt2[4] >>> 16) | 0, t3[7] = wt2[7] + (wt2[6] << 8 | wt2[6] >>> 24) + wt2[5] | 0;
          }
          function Ut2() {
            for (var t3 = this._X, e5 = this._C, i3 = 0; i3 < 8; i3++)
              It2[i3] = e5[i3];
            for (e5[0] = e5[0] + 1295307597 + this._b | 0, e5[1] = e5[1] + 3545052371 + (e5[0] >>> 0 < It2[0] >>> 0 ? 1 : 0) | 0, e5[2] = e5[2] + 886263092 + (e5[1] >>> 0 < It2[1] >>> 0 ? 1 : 0) | 0, e5[3] = e5[3] + 1295307597 + (e5[2] >>> 0 < It2[2] >>> 0 ? 1 : 0) | 0, e5[4] = e5[4] + 3545052371 + (e5[3] >>> 0 < It2[3] >>> 0 ? 1 : 0) | 0, e5[5] = e5[5] + 886263092 + (e5[4] >>> 0 < It2[4] >>> 0 ? 1 : 0) | 0, e5[6] = e5[6] + 1295307597 + (e5[5] >>> 0 < It2[5] >>> 0 ? 1 : 0) | 0, e5[7] = e5[7] + 3545052371 + (e5[6] >>> 0 < It2[6] >>> 0 ? 1 : 0) | 0, this._b = e5[7] >>> 0 < It2[7] >>> 0 ? 1 : 0, i3 = 0; i3 < 8; i3++) {
              var r5 = t3[i3] + e5[i3], o4 = 65535 & r5, n4 = r5 >>> 16;
              Bt2[i3] = ((o4 * o4 >>> 17) + o4 * n4 >>> 15) + n4 * n4 ^ ((4294901760 & r5) * r5 | 0) + ((65535 & r5) * r5 | 0);
            }
            t3[0] = Bt2[0] + (Bt2[7] << 16 | Bt2[7] >>> 16) + (Bt2[6] << 16 | Bt2[6] >>> 16) | 0, t3[1] = Bt2[1] + (Bt2[0] << 8 | Bt2[0] >>> 24) + Bt2[7] | 0, t3[2] = Bt2[2] + (Bt2[1] << 16 | Bt2[1] >>> 16) + (Bt2[0] << 16 | Bt2[0] >>> 16) | 0, t3[3] = Bt2[3] + (Bt2[2] << 8 | Bt2[2] >>> 24) + Bt2[1] | 0, t3[4] = Bt2[4] + (Bt2[3] << 16 | Bt2[3] >>> 16) + (Bt2[2] << 16 | Bt2[2] >>> 16) | 0, t3[5] = Bt2[5] + (Bt2[4] << 8 | Bt2[4] >>> 24) + Bt2[3] | 0, t3[6] = Bt2[6] + (Bt2[5] << 16 | Bt2[5] >>> 16) + (Bt2[4] << 16 | Bt2[4] >>> 16) | 0, t3[7] = Bt2[7] + (Bt2[6] << 8 | Bt2[6] >>> 24) + Bt2[5] | 0;
          }
          return p3 = Ct2.lib.WordArray, Ct2.enc.Base64 = { stringify: function(t3) {
            var e5 = t3.words, i3 = t3.sigBytes, r5 = this._map;
            t3.clamp();
            for (var o4 = [], n4 = 0; n4 < i3; n4 += 3)
              for (var a4 = (e5[n4 >>> 2] >>> 24 - n4 % 4 * 8 & 255) << 16 | (e5[n4 + 1 >>> 2] >>> 24 - (n4 + 1) % 4 * 8 & 255) << 8 | e5[n4 + 2 >>> 2] >>> 24 - (n4 + 2) % 4 * 8 & 255, s4 = 0; s4 < 4 && n4 + 0.75 * s4 < i3; s4++)
                o4.push(r5.charAt(a4 >>> 6 * (3 - s4) & 63));
            var c4 = r5.charAt(64);
            if (c4)
              for (; o4.length % 4; )
                o4.push(c4);
            return o4.join("");
          }, parse: function(t3) {
            var e5 = t3.length, i3 = this._map, r5 = this._reverseMap;
            if (!r5) {
              r5 = this._reverseMap = [];
              for (var o4 = 0; o4 < i3.length; o4++)
                r5[i3.charCodeAt(o4)] = o4;
            }
            var n4, a4 = i3.charAt(64);
            return !a4 || -1 !== (n4 = t3.indexOf(a4)) && (e5 = n4), function(t4, e6, i4) {
              for (var r6 = [], o5 = 0, n5 = 0; n5 < e6; n5++) {
                var a5, s4;
                n5 % 4 && (a5 = i4[t4.charCodeAt(n5 - 1)] << n5 % 4 * 2, s4 = i4[t4.charCodeAt(n5)] >>> 6 - n5 % 4 * 2, r6[o5 >>> 2] |= (a5 | s4) << 24 - o5 % 4 * 8, o5++);
              }
              return p3.create(r6, o5);
            }(t3, e5, r5);
          }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }, function(t3) {
            var e5 = Ct2, i3 = e5.lib, r5 = i3.WordArray, o4 = i3.Hasher, n4 = e5.algo, a4 = [];
            !function() {
              for (var e6 = 0; e6 < 64; e6++)
                a4[e6] = 4294967296 * t3.abs(t3.sin(e6 + 1)) | 0;
            }();
            var s4 = n4.MD5 = o4.extend({ _doReset: function() {
              this._hash = new r5.init([1732584193, 4023233417, 2562383102, 271733878]);
            }, _doProcessBlock: function(t4, e6) {
              for (var i4 = 0; i4 < 16; i4++) {
                var r6 = e6 + i4, o5 = t4[r6];
                t4[r6] = 16711935 & (o5 << 8 | o5 >>> 24) | 4278255360 & (o5 << 24 | o5 >>> 8);
              }
              var n5 = this._hash.words, s5 = t4[e6 + 0], p4 = t4[e6 + 1], f4 = t4[e6 + 2], d4 = t4[e6 + 3], _5 = t4[e6 + 4], m4 = t4[e6 + 5], g4 = t4[e6 + 6], v4 = t4[e6 + 7], y4 = t4[e6 + 8], b4 = t4[e6 + 9], w4 = t4[e6 + 10], x4 = t4[e6 + 11], T4 = t4[e6 + 12], S4 = t4[e6 + 13], E4 = t4[e6 + 14], A4 = t4[e6 + 15], k4 = c4(k4 = n5[0], P4 = n5[1], B4 = n5[2], I4 = n5[3], s5, 7, a4[0]), I4 = c4(I4, k4, P4, B4, p4, 12, a4[1]), B4 = c4(B4, I4, k4, P4, f4, 17, a4[2]), P4 = c4(P4, B4, I4, k4, d4, 22, a4[3]);
              k4 = c4(k4, P4, B4, I4, _5, 7, a4[4]), I4 = c4(I4, k4, P4, B4, m4, 12, a4[5]), B4 = c4(B4, I4, k4, P4, g4, 17, a4[6]), P4 = c4(P4, B4, I4, k4, v4, 22, a4[7]), k4 = c4(k4, P4, B4, I4, y4, 7, a4[8]), I4 = c4(I4, k4, P4, B4, b4, 12, a4[9]), B4 = c4(B4, I4, k4, P4, w4, 17, a4[10]), P4 = c4(P4, B4, I4, k4, x4, 22, a4[11]), k4 = c4(k4, P4, B4, I4, T4, 7, a4[12]), I4 = c4(I4, k4, P4, B4, S4, 12, a4[13]), B4 = c4(B4, I4, k4, P4, E4, 17, a4[14]), k4 = l4(k4, P4 = c4(P4, B4, I4, k4, A4, 22, a4[15]), B4, I4, p4, 5, a4[16]), I4 = l4(I4, k4, P4, B4, g4, 9, a4[17]), B4 = l4(B4, I4, k4, P4, x4, 14, a4[18]), P4 = l4(P4, B4, I4, k4, s5, 20, a4[19]), k4 = l4(k4, P4, B4, I4, m4, 5, a4[20]), I4 = l4(I4, k4, P4, B4, w4, 9, a4[21]), B4 = l4(B4, I4, k4, P4, A4, 14, a4[22]), P4 = l4(P4, B4, I4, k4, _5, 20, a4[23]), k4 = l4(k4, P4, B4, I4, b4, 5, a4[24]), I4 = l4(I4, k4, P4, B4, E4, 9, a4[25]), B4 = l4(B4, I4, k4, P4, d4, 14, a4[26]), P4 = l4(P4, B4, I4, k4, y4, 20, a4[27]), k4 = l4(k4, P4, B4, I4, S4, 5, a4[28]), I4 = l4(I4, k4, P4, B4, f4, 9, a4[29]), B4 = l4(B4, I4, k4, P4, v4, 14, a4[30]), k4 = u4(k4, P4 = l4(P4, B4, I4, k4, T4, 20, a4[31]), B4, I4, m4, 4, a4[32]), I4 = u4(I4, k4, P4, B4, y4, 11, a4[33]), B4 = u4(B4, I4, k4, P4, x4, 16, a4[34]), P4 = u4(P4, B4, I4, k4, E4, 23, a4[35]), k4 = u4(k4, P4, B4, I4, p4, 4, a4[36]), I4 = u4(I4, k4, P4, B4, _5, 11, a4[37]), B4 = u4(B4, I4, k4, P4, v4, 16, a4[38]), P4 = u4(P4, B4, I4, k4, w4, 23, a4[39]), k4 = u4(k4, P4, B4, I4, S4, 4, a4[40]), I4 = u4(I4, k4, P4, B4, s5, 11, a4[41]), B4 = u4(B4, I4, k4, P4, d4, 16, a4[42]), P4 = u4(P4, B4, I4, k4, g4, 23, a4[43]), k4 = u4(k4, P4, B4, I4, b4, 4, a4[44]), I4 = u4(I4, k4, P4, B4, T4, 11, a4[45]), B4 = u4(B4, I4, k4, P4, A4, 16, a4[46]), k4 = h4(k4, P4 = u4(P4, B4, I4, k4, f4, 23, a4[47]), B4, I4, s5, 6, a4[48]), I4 = h4(I4, k4, P4, B4, v4, 10, a4[49]), B4 = h4(B4, I4, k4, P4, E4, 15, a4[50]), P4 = h4(P4, B4, I4, k4, m4, 21, a4[51]), k4 = h4(k4, P4, B4, I4, T4, 6, a4[52]), I4 = h4(I4, k4, P4, B4, d4, 10, a4[53]), B4 = h4(B4, I4, k4, P4, w4, 15, a4[54]), P4 = h4(P4, B4, I4, k4, p4, 21, a4[55]), k4 = h4(k4, P4, B4, I4, y4, 6, a4[56]), I4 = h4(I4, k4, P4, B4, A4, 10, a4[57]), B4 = h4(B4, I4, k4, P4, g4, 15, a4[58]), P4 = h4(P4, B4, I4, k4, S4, 21, a4[59]), k4 = h4(k4, P4, B4, I4, _5, 6, a4[60]), I4 = h4(I4, k4, P4, B4, x4, 10, a4[61]), B4 = h4(B4, I4, k4, P4, f4, 15, a4[62]), P4 = h4(P4, B4, I4, k4, b4, 21, a4[63]), n5[0] = n5[0] + k4 | 0, n5[1] = n5[1] + P4 | 0, n5[2] = n5[2] + B4 | 0, n5[3] = n5[3] + I4 | 0;
            }, _doFinalize: function() {
              var e6 = this._data, i4 = e6.words, r6 = 8 * this._nDataBytes, o5 = 8 * e6.sigBytes;
              i4[o5 >>> 5] |= 128 << 24 - o5 % 32;
              var n5 = t3.floor(r6 / 4294967296), a5 = r6;
              i4[15 + (64 + o5 >>> 9 << 4)] = 16711935 & (n5 << 8 | n5 >>> 24) | 4278255360 & (n5 << 24 | n5 >>> 8), i4[14 + (64 + o5 >>> 9 << 4)] = 16711935 & (a5 << 8 | a5 >>> 24) | 4278255360 & (a5 << 24 | a5 >>> 8), e6.sigBytes = 4 * (i4.length + 1), this._process();
              for (var s5 = this._hash, c5 = s5.words, l5 = 0; l5 < 4; l5++) {
                var u5 = c5[l5];
                c5[l5] = 16711935 & (u5 << 8 | u5 >>> 24) | 4278255360 & (u5 << 24 | u5 >>> 8);
              }
              return s5;
            }, clone: function() {
              var t4 = o4.clone.call(this);
              return t4._hash = this._hash.clone(), t4;
            } });
            function c4(t4, e6, i4, r6, o5, n5, a5) {
              var s5 = t4 + (e6 & i4 | ~e6 & r6) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            function l4(t4, e6, i4, r6, o5, n5, a5) {
              var s5 = t4 + (e6 & r6 | i4 & ~r6) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            function u4(t4, e6, i4, r6, o5, n5, a5) {
              var s5 = t4 + (e6 ^ i4 ^ r6) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            function h4(t4, e6, i4, r6, o5, n5, a5) {
              var s5 = t4 + (i4 ^ (e6 | ~r6)) + o5 + a5;
              return (s5 << n5 | s5 >>> 32 - n5) + e6;
            }
            e5.MD5 = o4._createHelper(s4), e5.HmacMD5 = o4._createHmacHelper(s4);
          }(Math), d3 = (f3 = Ct2).lib, _4 = d3.WordArray, g3 = [], v3 = f3.algo.SHA1 = (m3 = d3.Hasher).extend({ _doReset: function() {
            this._hash = new _4.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
          }, _doProcessBlock: function(t3, e5) {
            for (var i3, r5 = this._hash.words, o4 = r5[0], n4 = r5[1], a4 = r5[2], s4 = r5[3], c4 = r5[4], l4 = 0; l4 < 80; l4++) {
              g3[l4] = l4 < 16 ? 0 | t3[e5 + l4] : (i3 = g3[l4 - 3] ^ g3[l4 - 8] ^ g3[l4 - 14] ^ g3[l4 - 16]) << 1 | i3 >>> 31;
              var u4 = (o4 << 5 | o4 >>> 27) + c4 + g3[l4];
              u4 += l4 < 20 ? 1518500249 + (n4 & a4 | ~n4 & s4) : l4 < 40 ? 1859775393 + (n4 ^ a4 ^ s4) : l4 < 60 ? (n4 & a4 | n4 & s4 | a4 & s4) - 1894007588 : (n4 ^ a4 ^ s4) - 899497514, c4 = s4, s4 = a4, a4 = n4 << 30 | n4 >>> 2, n4 = o4, o4 = u4;
            }
            r5[0] = r5[0] + o4 | 0, r5[1] = r5[1] + n4 | 0, r5[2] = r5[2] + a4 | 0, r5[3] = r5[3] + s4 | 0, r5[4] = r5[4] + c4 | 0;
          }, _doFinalize: function() {
            var t3 = this._data, e5 = t3.words, i3 = 8 * this._nDataBytes, r5 = 8 * t3.sigBytes;
            return e5[r5 >>> 5] |= 128 << 24 - r5 % 32, e5[14 + (64 + r5 >>> 9 << 4)] = Math.floor(i3 / 4294967296), e5[15 + (64 + r5 >>> 9 << 4)] = i3, t3.sigBytes = 4 * e5.length, this._process(), this._hash;
          }, clone: function() {
            var t3 = m3.clone.call(this);
            return t3._hash = this._hash.clone(), t3;
          } }), f3.SHA1 = m3._createHelper(v3), f3.HmacSHA1 = m3._createHmacHelper(v3), function(t3) {
            var e5 = Ct2, i3 = e5.lib, r5 = i3.WordArray, o4 = i3.Hasher, n4 = e5.algo, a4 = [], s4 = [];
            !function() {
              function e6(t4) {
                return 4294967296 * (t4 - (0 | t4)) | 0;
              }
              for (var i4 = 2, r6 = 0; r6 < 64; )
                !function(e7) {
                  for (var i5 = t3.sqrt(e7), r7 = 2; r7 <= i5; r7++)
                    if (!(e7 % r7))
                      return;
                  return 1;
                }(i4) || (r6 < 8 && (a4[r6] = e6(t3.pow(i4, 0.5))), s4[r6] = e6(t3.pow(i4, 1 / 3)), r6++), i4++;
            }();
            var c4 = [], l4 = n4.SHA256 = o4.extend({ _doReset: function() {
              this._hash = new r5.init(a4.slice(0));
            }, _doProcessBlock: function(t4, e6) {
              for (var i4, r6, o5, n5, a5 = this._hash.words, l5 = a5[0], u4 = a5[1], h4 = a5[2], p4 = a5[3], f4 = a5[4], d4 = a5[5], _5 = a5[6], m4 = a5[7], g4 = 0; g4 < 64; g4++) {
                g4 < 16 ? c4[g4] = 0 | t4[e6 + g4] : (r6 = ((i4 = c4[g4 - 15]) << 25 | i4 >>> 7) ^ (i4 << 14 | i4 >>> 18) ^ i4 >>> 3, n5 = ((o5 = c4[g4 - 2]) << 15 | o5 >>> 17) ^ (o5 << 13 | o5 >>> 19) ^ o5 >>> 10, c4[g4] = r6 + c4[g4 - 7] + n5 + c4[g4 - 16]);
                var v4 = l5 & u4 ^ l5 & h4 ^ u4 & h4, y4 = m4 + ((f4 << 26 | f4 >>> 6) ^ (f4 << 21 | f4 >>> 11) ^ (f4 << 7 | f4 >>> 25)) + (f4 & d4 ^ ~f4 & _5) + s4[g4] + c4[g4];
                m4 = _5, _5 = d4, d4 = f4, f4 = p4 + y4 | 0, p4 = h4, h4 = u4, u4 = l5, l5 = y4 + (((l5 << 30 | l5 >>> 2) ^ (l5 << 19 | l5 >>> 13) ^ (l5 << 10 | l5 >>> 22)) + v4) | 0;
              }
              a5[0] = a5[0] + l5 | 0, a5[1] = a5[1] + u4 | 0, a5[2] = a5[2] + h4 | 0, a5[3] = a5[3] + p4 | 0, a5[4] = a5[4] + f4 | 0, a5[5] = a5[5] + d4 | 0, a5[6] = a5[6] + _5 | 0, a5[7] = a5[7] + m4 | 0;
            }, _doFinalize: function() {
              var e6 = this._data, i4 = e6.words, r6 = 8 * this._nDataBytes, o5 = 8 * e6.sigBytes;
              return i4[o5 >>> 5] |= 128 << 24 - o5 % 32, i4[14 + (64 + o5 >>> 9 << 4)] = t3.floor(r6 / 4294967296), i4[15 + (64 + o5 >>> 9 << 4)] = r6, e6.sigBytes = 4 * i4.length, this._process(), this._hash;
            }, clone: function() {
              var t4 = o4.clone.call(this);
              return t4._hash = this._hash.clone(), t4;
            } });
            e5.SHA256 = o4._createHelper(l4), e5.HmacSHA256 = o4._createHmacHelper(l4);
          }(Math), function() {
            var t3 = Ct2.lib.WordArray, e5 = Ct2.enc;
            function i3(t4) {
              return t4 << 8 & 4278255360 | t4 >>> 8 & 16711935;
            }
            e5.Utf16 = e5.Utf16BE = { stringify: function(t4) {
              for (var e6 = t4.words, i4 = t4.sigBytes, r5 = [], o4 = 0; o4 < i4; o4 += 2)
                r5.push(String.fromCharCode(e6[o4 >>> 2] >>> 16 - o4 % 4 * 8 & 65535));
              return r5.join("");
            }, parse: function(e6) {
              for (var i4 = e6.length, r5 = [], o4 = 0; o4 < i4; o4++)
                r5[o4 >>> 1] |= e6.charCodeAt(o4) << 16 - o4 % 2 * 16;
              return t3.create(r5, 2 * i4);
            } }, e5.Utf16LE = { stringify: function(t4) {
              for (var e6 = t4.words, r5 = t4.sigBytes, o4 = [], n4 = 0; n4 < r5; n4 += 2) {
                var a4 = i3(e6[n4 >>> 2] >>> 16 - n4 % 4 * 8 & 65535);
                o4.push(String.fromCharCode(a4));
              }
              return o4.join("");
            }, parse: function(e6) {
              for (var r5 = e6.length, o4 = [], n4 = 0; n4 < r5; n4++)
                o4[n4 >>> 1] |= i3(e6.charCodeAt(n4) << 16 - n4 % 2 * 16);
              return t3.create(o4, 2 * r5);
            } };
          }(), "function" == typeof ArrayBuffer && (b3 = (y3 = Ct2.lib.WordArray).init, (y3.init = function(t3) {
            if (t3 instanceof ArrayBuffer && (t3 = new Uint8Array(t3)), (t3 instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && t3 instanceof Uint8ClampedArray || t3 instanceof Int16Array || t3 instanceof Uint16Array || t3 instanceof Int32Array || t3 instanceof Uint32Array || t3 instanceof Float32Array || t3 instanceof Float64Array) && (t3 = new Uint8Array(t3.buffer, t3.byteOffset, t3.byteLength)), t3 instanceof Uint8Array) {
              for (var e5 = t3.byteLength, i3 = [], r5 = 0; r5 < e5; r5++)
                i3[r5 >>> 2] |= t3[r5] << 24 - r5 % 4 * 8;
              b3.call(this, i3, e5);
            } else
              b3.apply(this, arguments);
          }).prototype = y3), x3 = (w3 = Ct2).lib, S3 = x3.Hasher, E3 = w3.algo, A3 = (T3 = x3.WordArray).create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]), k3 = T3.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]), I3 = T3.create([11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]), B3 = T3.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]), P3 = T3.create([0, 1518500249, 1859775393, 2400959708, 2840853838]), C3 = T3.create([1352829926, 1548603684, 1836072691, 2053994217, 0]), z3 = E3.RIPEMD160 = S3.extend({ _doReset: function() {
            this._hash = T3.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
          }, _doProcessBlock: function(t3, e5) {
            for (var i3 = 0; i3 < 16; i3++) {
              var r5 = e5 + i3, o4 = t3[r5];
              t3[r5] = 16711935 & (o4 << 8 | o4 >>> 24) | 4278255360 & (o4 << 24 | o4 >>> 8);
            }
            var n4, a4, s4, c4, l4, u4, h4 = this._hash.words, p4 = P3.words, f4 = C3.words, d4 = A3.words, _5 = k3.words, m4 = I3.words, g4 = B3.words, v4 = n4 = h4[0], y4 = a4 = h4[1], b4 = s4 = h4[2], w4 = c4 = h4[3], x4 = l4 = h4[4];
            for (i3 = 0; i3 < 80; i3 += 1)
              u4 = n4 + t3[e5 + d4[i3]] | 0, u4 += i3 < 16 ? (a4 ^ s4 ^ c4) + p4[0] : i3 < 32 ? Dt2(a4, s4, c4) + p4[1] : i3 < 48 ? ((a4 | ~s4) ^ c4) + p4[2] : i3 < 64 ? Mt2(a4, s4, c4) + p4[3] : (a4 ^ (s4 | ~c4)) + p4[4], u4 = (u4 = Lt2(u4 |= 0, m4[i3])) + l4 | 0, n4 = l4, l4 = c4, c4 = Lt2(s4, 10), s4 = a4, a4 = u4, u4 = v4 + t3[e5 + _5[i3]] | 0, u4 += i3 < 16 ? (y4 ^ (b4 | ~w4)) + f4[0] : i3 < 32 ? Mt2(y4, b4, w4) + f4[1] : i3 < 48 ? ((y4 | ~b4) ^ w4) + f4[2] : i3 < 64 ? Dt2(y4, b4, w4) + f4[3] : (y4 ^ b4 ^ w4) + f4[4], u4 = (u4 = Lt2(u4 |= 0, g4[i3])) + x4 | 0, v4 = x4, x4 = w4, w4 = Lt2(b4, 10), b4 = y4, y4 = u4;
            u4 = h4[1] + s4 + w4 | 0, h4[1] = h4[2] + c4 + x4 | 0, h4[2] = h4[3] + l4 + v4 | 0, h4[3] = h4[4] + n4 + y4 | 0, h4[4] = h4[0] + a4 + b4 | 0, h4[0] = u4;
          }, _doFinalize: function() {
            var t3 = this._data, e5 = t3.words, i3 = 8 * this._nDataBytes, r5 = 8 * t3.sigBytes;
            e5[r5 >>> 5] |= 128 << 24 - r5 % 32, e5[14 + (64 + r5 >>> 9 << 4)] = 16711935 & (i3 << 8 | i3 >>> 24) | 4278255360 & (i3 << 24 | i3 >>> 8), t3.sigBytes = 4 * (e5.length + 1), this._process();
            for (var o4 = this._hash, n4 = o4.words, a4 = 0; a4 < 5; a4++) {
              var s4 = n4[a4];
              n4[a4] = 16711935 & (s4 << 8 | s4 >>> 24) | 4278255360 & (s4 << 24 | s4 >>> 8);
            }
            return o4;
          }, clone: function() {
            var t3 = S3.clone.call(this);
            return t3._hash = this._hash.clone(), t3;
          } }), w3.RIPEMD160 = S3._createHelper(z3), w3.HmacRIPEMD160 = S3._createHmacHelper(z3), D3 = Ct2.enc.Utf8, Ct2.algo.HMAC = Ct2.lib.Base.extend({ init: function(t3, e5) {
            t3 = this._hasher = new t3.init(), "string" == typeof e5 && (e5 = D3.parse(e5));
            var i3 = t3.blockSize, r5 = 4 * i3;
            e5.sigBytes > r5 && (e5 = t3.finalize(e5)), e5.clamp();
            for (var o4 = this._oKey = e5.clone(), n4 = this._iKey = e5.clone(), a4 = o4.words, s4 = n4.words, c4 = 0; c4 < i3; c4++)
              a4[c4] ^= 1549556828, s4[c4] ^= 909522486;
            o4.sigBytes = n4.sigBytes = r5, this.reset();
          }, reset: function() {
            var t3 = this._hasher;
            t3.reset(), t3.update(this._iKey);
          }, update: function(t3) {
            return this._hasher.update(t3), this;
          }, finalize: function(t3) {
            var e5 = this._hasher, i3 = e5.finalize(t3);
            return e5.reset(), e5.finalize(this._oKey.clone().concat(i3));
          } }), L3 = (M3 = Ct2).lib, O3 = L3.WordArray, U3 = (F3 = M3.algo).HMAC, N3 = F3.PBKDF2 = (R3 = L3.Base).extend({ cfg: R3.extend({ keySize: 4, hasher: F3.SHA1, iterations: 1 }), init: function(t3) {
            this.cfg = this.cfg.extend(t3);
          }, compute: function(t3, e5) {
            for (var i3 = this.cfg, r5 = U3.create(i3.hasher, t3), o4 = O3.create(), n4 = O3.create([1]), a4 = o4.words, s4 = n4.words, c4 = i3.keySize, l4 = i3.iterations; a4.length < c4; ) {
              var u4 = r5.update(e5).finalize(n4);
              r5.reset();
              for (var h4 = u4.words, p4 = h4.length, f4 = u4, d4 = 1; d4 < l4; d4++) {
                f4 = r5.finalize(f4), r5.reset();
                for (var _5 = f4.words, m4 = 0; m4 < p4; m4++)
                  h4[m4] ^= _5[m4];
              }
              o4.concat(u4), s4[0]++;
            }
            return o4.sigBytes = 4 * c4, o4;
          } }), M3.PBKDF2 = function(t3, e5, i3) {
            return N3.create(i3).compute(t3, e5);
          }, V3 = (j3 = Ct2).lib, Z3 = V3.WordArray, H3 = (G3 = j3.algo).EvpKDF = (q3 = V3.Base).extend({ cfg: q3.extend({ keySize: 4, hasher: G3.MD5, iterations: 1 }), init: function(t3) {
            this.cfg = this.cfg.extend(t3);
          }, compute: function(t3, e5) {
            for (var i3 = this.cfg, r5 = i3.hasher.create(), o4 = Z3.create(), n4 = o4.words, a4 = i3.keySize, s4 = i3.iterations; n4.length < a4; ) {
              c4 && r5.update(c4);
              var c4 = r5.update(t3).finalize(e5);
              r5.reset();
              for (var l4 = 1; l4 < s4; l4++)
                c4 = r5.finalize(c4), r5.reset();
              o4.concat(c4);
            }
            return o4.sigBytes = 4 * a4, o4;
          } }), j3.EvpKDF = function(t3, e5, i3) {
            return H3.create(i3).compute(t3, e5);
          }, X3 = (W3 = Ct2).lib.WordArray, J3 = (K3 = W3.algo).SHA224 = (Y3 = K3.SHA256).extend({ _doReset: function() {
            this._hash = new X3.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428]);
          }, _doFinalize: function() {
            var t3 = Y3._doFinalize.call(this);
            return t3.sigBytes -= 4, t3;
          } }), W3.SHA224 = Y3._createHelper(J3), W3.HmacSHA224 = Y3._createHmacHelper(J3), $3 = (Q3 = Ct2.lib).Base, tt3 = Q3.WordArray, (et3 = Ct2.x64 = {}).Word = $3.extend({ init: function(t3, e5) {
            this.high = t3, this.low = e5;
          } }), et3.WordArray = $3.extend({ init: function(t3, e5) {
            t3 = this.words = t3 || [], this.sigBytes = null != e5 ? e5 : 8 * t3.length;
          }, toX32: function() {
            for (var t3 = this.words, e5 = t3.length, i3 = [], r5 = 0; r5 < e5; r5++) {
              var o4 = t3[r5];
              i3.push(o4.high), i3.push(o4.low);
            }
            return tt3.create(i3, this.sigBytes);
          }, clone: function() {
            for (var t3 = $3.clone.call(this), e5 = t3.words = this.words.slice(0), i3 = e5.length, r5 = 0; r5 < i3; r5++)
              e5[r5] = e5[r5].clone();
            return t3;
          } }), function(t3) {
            var e5 = Ct2, i3 = e5.lib, r5 = i3.WordArray, o4 = i3.Hasher, n4 = e5.x64.Word, a4 = e5.algo, s4 = [], c4 = [], l4 = [];
            !function() {
              for (var t4 = 1, e6 = 0, i4 = 0; i4 < 24; i4++) {
                s4[t4 + 5 * e6] = (i4 + 1) * (i4 + 2) / 2 % 64;
                var r6 = (2 * t4 + 3 * e6) % 5;
                t4 = e6 % 5, e6 = r6;
              }
              for (t4 = 0; t4 < 5; t4++)
                for (e6 = 0; e6 < 5; e6++)
                  c4[t4 + 5 * e6] = e6 + (2 * t4 + 3 * e6) % 5 * 5;
              for (var o5 = 1, a5 = 0; a5 < 24; a5++) {
                for (var u5, h5 = 0, p4 = 0, f4 = 0; f4 < 7; f4++)
                  1 & o5 && ((u5 = (1 << f4) - 1) < 32 ? p4 ^= 1 << u5 : h5 ^= 1 << u5 - 32), 128 & o5 ? o5 = o5 << 1 ^ 113 : o5 <<= 1;
                l4[a5] = n4.create(h5, p4);
              }
            }();
            var u4 = [];
            !function() {
              for (var t4 = 0; t4 < 25; t4++)
                u4[t4] = n4.create();
            }();
            var h4 = a4.SHA3 = o4.extend({ cfg: o4.cfg.extend({ outputLength: 512 }), _doReset: function() {
              for (var t4 = this._state = [], e6 = 0; e6 < 25; e6++)
                t4[e6] = new n4.init();
              this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;
            }, _doProcessBlock: function(t4, e6) {
              for (var i4 = this._state, r6 = this.blockSize / 2, o5 = 0; o5 < r6; o5++) {
                var n5 = 16711935 & ((n5 = t4[e6 + 2 * o5]) << 8 | n5 >>> 24) | 4278255360 & (n5 << 24 | n5 >>> 8), a5 = 16711935 & ((a5 = t4[e6 + 2 * o5 + 1]) << 8 | a5 >>> 24) | 4278255360 & (a5 << 24 | a5 >>> 8);
                (I4 = i4[o5]).high ^= a5, I4.low ^= n5;
              }
              for (var h5 = 0; h5 < 24; h5++) {
                for (var p4 = 0; p4 < 5; p4++) {
                  for (var f4 = 0, d4 = 0, _5 = 0; _5 < 5; _5++)
                    f4 ^= (I4 = i4[p4 + 5 * _5]).high, d4 ^= I4.low;
                  var m4 = u4[p4];
                  m4.high = f4, m4.low = d4;
                }
                for (p4 = 0; p4 < 5; p4++) {
                  var g4 = u4[(p4 + 4) % 5], v4 = u4[(p4 + 1) % 5], y4 = v4.high, b4 = v4.low;
                  for (f4 = g4.high ^ (y4 << 1 | b4 >>> 31), d4 = g4.low ^ (b4 << 1 | y4 >>> 31), _5 = 0; _5 < 5; _5++)
                    (I4 = i4[p4 + 5 * _5]).high ^= f4, I4.low ^= d4;
                }
                for (var w4 = 1; w4 < 25; w4++) {
                  var x4 = (I4 = i4[w4]).high, T4 = I4.low, S4 = s4[w4];
                  d4 = S4 < 32 ? (f4 = x4 << S4 | T4 >>> 32 - S4, T4 << S4 | x4 >>> 32 - S4) : (f4 = T4 << S4 - 32 | x4 >>> 64 - S4, x4 << S4 - 32 | T4 >>> 64 - S4);
                  var E4 = u4[c4[w4]];
                  E4.high = f4, E4.low = d4;
                }
                var A4 = u4[0], k4 = i4[0];
                for (A4.high = k4.high, A4.low = k4.low, p4 = 0; p4 < 5; p4++)
                  for (_5 = 0; _5 < 5; _5++) {
                    var I4 = i4[w4 = p4 + 5 * _5], B4 = u4[w4], P4 = u4[(p4 + 1) % 5 + 5 * _5], C4 = u4[(p4 + 2) % 5 + 5 * _5];
                    I4.high = B4.high ^ ~P4.high & C4.high, I4.low = B4.low ^ ~P4.low & C4.low;
                  }
                var z4 = l4[h5];
                (I4 = i4[0]).high ^= z4.high, I4.low ^= z4.low;
              }
            }, _doFinalize: function() {
              var e6 = this._data, i4 = e6.words, o5 = 8 * e6.sigBytes, n5 = 32 * this.blockSize;
              i4[o5 >>> 5] |= 1 << 24 - o5 % 32, i4[(t3.ceil((1 + o5) / n5) * n5 >>> 5) - 1] |= 128, e6.sigBytes = 4 * i4.length, this._process();
              for (var a5 = this._state, s5 = this.cfg.outputLength / 8, c5 = s5 / 8, l5 = [], u5 = 0; u5 < c5; u5++) {
                var h5 = a5[u5], p4 = 16711935 & ((p4 = h5.high) << 8 | p4 >>> 24) | 4278255360 & (p4 << 24 | p4 >>> 8), f4 = 16711935 & ((f4 = h5.low) << 8 | f4 >>> 24) | 4278255360 & (f4 << 24 | f4 >>> 8);
                l5.push(f4), l5.push(p4);
              }
              return new r5.init(l5, s5);
            }, clone: function() {
              for (var t4 = o4.clone.call(this), e6 = t4._state = this._state.slice(0), i4 = 0; i4 < 25; i4++)
                e6[i4] = e6[i4].clone();
              return t4;
            } });
            e5.SHA3 = o4._createHelper(h4), e5.HmacSHA3 = o4._createHmacHelper(h4);
          }(Math), function() {
            var t3 = Ct2, e5 = t3.lib.Hasher, i3 = t3.x64, r5 = i3.Word, o4 = i3.WordArray, n4 = t3.algo;
            function a4() {
              return r5.create.apply(r5, arguments);
            }
            var s4 = [a4(1116352408, 3609767458), a4(1899447441, 602891725), a4(3049323471, 3964484399), a4(3921009573, 2173295548), a4(961987163, 4081628472), a4(1508970993, 3053834265), a4(2453635748, 2937671579), a4(2870763221, 3664609560), a4(3624381080, 2734883394), a4(310598401, 1164996542), a4(607225278, 1323610764), a4(1426881987, 3590304994), a4(1925078388, 4068182383), a4(2162078206, 991336113), a4(2614888103, 633803317), a4(3248222580, 3479774868), a4(3835390401, 2666613458), a4(4022224774, 944711139), a4(264347078, 2341262773), a4(604807628, 2007800933), a4(770255983, 1495990901), a4(1249150122, 1856431235), a4(1555081692, 3175218132), a4(1996064986, 2198950837), a4(2554220882, 3999719339), a4(2821834349, 766784016), a4(2952996808, 2566594879), a4(3210313671, 3203337956), a4(3336571891, 1034457026), a4(3584528711, 2466948901), a4(113926993, 3758326383), a4(338241895, 168717936), a4(666307205, 1188179964), a4(773529912, 1546045734), a4(1294757372, 1522805485), a4(1396182291, 2643833823), a4(1695183700, 2343527390), a4(1986661051, 1014477480), a4(2177026350, 1206759142), a4(2456956037, 344077627), a4(2730485921, 1290863460), a4(2820302411, 3158454273), a4(3259730800, 3505952657), a4(3345764771, 106217008), a4(3516065817, 3606008344), a4(3600352804, 1432725776), a4(4094571909, 1467031594), a4(275423344, 851169720), a4(430227734, 3100823752), a4(506948616, 1363258195), a4(659060556, 3750685593), a4(883997877, 3785050280), a4(958139571, 3318307427), a4(1322822218, 3812723403), a4(1537002063, 2003034995), a4(1747873779, 3602036899), a4(1955562222, 1575990012), a4(2024104815, 1125592928), a4(2227730452, 2716904306), a4(2361852424, 442776044), a4(2428436474, 593698344), a4(2756734187, 3733110249), a4(3204031479, 2999351573), a4(3329325298, 3815920427), a4(3391569614, 3928383900), a4(3515267271, 566280711), a4(3940187606, 3454069534), a4(4118630271, 4000239992), a4(116418474, 1914138554), a4(174292421, 2731055270), a4(289380356, 3203993006), a4(460393269, 320620315), a4(685471733, 587496836), a4(852142971, 1086792851), a4(1017036298, 365543100), a4(1126000580, 2618297676), a4(1288033470, 3409855158), a4(1501505948, 4234509866), a4(1607167915, 987167468), a4(1816402316, 1246189591)], c4 = [];
            !function() {
              for (var t4 = 0; t4 < 80; t4++)
                c4[t4] = a4();
            }();
            var l4 = n4.SHA512 = e5.extend({ _doReset: function() {
              this._hash = new o4.init([new r5.init(1779033703, 4089235720), new r5.init(3144134277, 2227873595), new r5.init(1013904242, 4271175723), new r5.init(2773480762, 1595750129), new r5.init(1359893119, 2917565137), new r5.init(2600822924, 725511199), new r5.init(528734635, 4215389547), new r5.init(1541459225, 327033209)]);
            }, _doProcessBlock: function(t4, e6) {
              for (var i4 = this._hash.words, r6 = i4[0], o5 = i4[1], n5 = i4[2], a5 = i4[3], l5 = i4[4], u4 = i4[5], h4 = i4[6], p4 = i4[7], f4 = r6.high, d4 = r6.low, _5 = o5.high, m4 = o5.low, g4 = n5.high, v4 = n5.low, y4 = a5.high, b4 = a5.low, w4 = l5.high, x4 = l5.low, T4 = u4.high, S4 = u4.low, E4 = h4.high, A4 = h4.low, k4 = p4.high, I4 = p4.low, B4 = f4, P4 = d4, C4 = _5, z4 = m4, D4 = g4, M4 = v4, L4 = y4, R4 = b4, O4 = w4, F4 = x4, U4 = T4, N4 = S4, j4 = E4, V4 = A4, q4 = k4, Z4 = I4, G4 = 0; G4 < 80; G4++) {
                var H4, W4, X4, K4, Y4, J4, Q4, $4, tt4, et4, it4, rt4, ot4, nt4, at4, st4 = c4[G4];
                G4 < 16 ? (at4 = st4.high = 0 | t4[e6 + 2 * G4], nt4 = st4.low = 0 | t4[e6 + 2 * G4 + 1]) : (K4 = ((W4 = (H4 = c4[G4 - 15]).high) >>> 1 | (X4 = H4.low) << 31) ^ (W4 >>> 8 | X4 << 24) ^ W4 >>> 7, tt4 = ((Q4 = (J4 = c4[G4 - 2]).high) >>> 19 | ($4 = J4.low) << 13) ^ (Q4 << 3 | $4 >>> 29) ^ Q4 >>> 6, at4 = (at4 = (at4 = K4 + (it4 = c4[G4 - 7]).high + ((nt4 = (Y4 = (X4 >>> 1 | W4 << 31) ^ (X4 >>> 8 | W4 << 24) ^ (X4 >>> 7 | W4 << 25)) + it4.low) >>> 0 < Y4 >>> 0 ? 1 : 0)) + tt4 + ((nt4 += et4 = ($4 >>> 19 | Q4 << 13) ^ ($4 << 3 | Q4 >>> 29) ^ ($4 >>> 6 | Q4 << 26)) >>> 0 < et4 >>> 0 ? 1 : 0)) + (rt4 = c4[G4 - 16]).high + ((nt4 += ot4 = rt4.low) >>> 0 < ot4 >>> 0 ? 1 : 0), st4.high = at4, st4.low = nt4);
                var ct3 = O4 & U4 ^ ~O4 & j4, lt3 = F4 & N4 ^ ~F4 & V4, ut3 = B4 & C4 ^ B4 & D4 ^ C4 & D4, ht3 = (P4 >>> 28 | B4 << 4) ^ (P4 << 30 | B4 >>> 2) ^ (P4 << 25 | B4 >>> 7), pt3 = s4[G4], ft3 = pt3.low, dt3 = Z4 + ((F4 >>> 14 | O4 << 18) ^ (F4 >>> 18 | O4 << 14) ^ (F4 << 23 | O4 >>> 9)), _t3 = q4 + ((O4 >>> 14 | F4 << 18) ^ (O4 >>> 18 | F4 << 14) ^ (O4 << 23 | F4 >>> 9)) + (dt3 >>> 0 < Z4 >>> 0 ? 1 : 0), mt3 = ht3 + (P4 & z4 ^ P4 & M4 ^ z4 & M4);
                q4 = j4, Z4 = V4, j4 = U4, V4 = N4, U4 = O4, N4 = F4, O4 = L4 + (_t3 = (_t3 = (_t3 = _t3 + ct3 + ((dt3 += lt3) >>> 0 < lt3 >>> 0 ? 1 : 0)) + pt3.high + ((dt3 += ft3) >>> 0 < ft3 >>> 0 ? 1 : 0)) + at4 + ((dt3 += nt4) >>> 0 < nt4 >>> 0 ? 1 : 0)) + ((F4 = R4 + dt3 | 0) >>> 0 < R4 >>> 0 ? 1 : 0) | 0, L4 = D4, R4 = M4, D4 = C4, M4 = z4, C4 = B4, z4 = P4, B4 = _t3 + (((B4 >>> 28 | P4 << 4) ^ (B4 << 30 | P4 >>> 2) ^ (B4 << 25 | P4 >>> 7)) + ut3 + (mt3 >>> 0 < ht3 >>> 0 ? 1 : 0)) + ((P4 = dt3 + mt3 | 0) >>> 0 < dt3 >>> 0 ? 1 : 0) | 0;
              }
              d4 = r6.low = d4 + P4, r6.high = f4 + B4 + (d4 >>> 0 < P4 >>> 0 ? 1 : 0), m4 = o5.low = m4 + z4, o5.high = _5 + C4 + (m4 >>> 0 < z4 >>> 0 ? 1 : 0), v4 = n5.low = v4 + M4, n5.high = g4 + D4 + (v4 >>> 0 < M4 >>> 0 ? 1 : 0), b4 = a5.low = b4 + R4, a5.high = y4 + L4 + (b4 >>> 0 < R4 >>> 0 ? 1 : 0), x4 = l5.low = x4 + F4, l5.high = w4 + O4 + (x4 >>> 0 < F4 >>> 0 ? 1 : 0), S4 = u4.low = S4 + N4, u4.high = T4 + U4 + (S4 >>> 0 < N4 >>> 0 ? 1 : 0), A4 = h4.low = A4 + V4, h4.high = E4 + j4 + (A4 >>> 0 < V4 >>> 0 ? 1 : 0), I4 = p4.low = I4 + Z4, p4.high = k4 + q4 + (I4 >>> 0 < Z4 >>> 0 ? 1 : 0);
            }, _doFinalize: function() {
              var t4 = this._data, e6 = t4.words, i4 = 8 * this._nDataBytes, r6 = 8 * t4.sigBytes;
              return e6[r6 >>> 5] |= 128 << 24 - r6 % 32, e6[30 + (128 + r6 >>> 10 << 5)] = Math.floor(i4 / 4294967296), e6[31 + (128 + r6 >>> 10 << 5)] = i4, t4.sigBytes = 4 * e6.length, this._process(), this._hash.toX32();
            }, clone: function() {
              var t4 = e5.clone.call(this);
              return t4._hash = this._hash.clone(), t4;
            }, blockSize: 32 });
            t3.SHA512 = e5._createHelper(l4), t3.HmacSHA512 = e5._createHmacHelper(l4);
          }(), rt3 = (it3 = Ct2).x64, ot3 = rt3.Word, nt3 = rt3.WordArray, ct2 = (at3 = it3.algo).SHA384 = (st3 = at3.SHA512).extend({ _doReset: function() {
            this._hash = new nt3.init([new ot3.init(3418070365, 3238371032), new ot3.init(1654270250, 914150663), new ot3.init(2438529370, 812702999), new ot3.init(355462360, 4144912697), new ot3.init(1731405415, 4290775857), new ot3.init(2394180231, 1750603025), new ot3.init(3675008525, 1694076839), new ot3.init(1203062813, 3204075428)]);
          }, _doFinalize: function() {
            var t3 = st3._doFinalize.call(this);
            return t3.sigBytes -= 16, t3;
          } }), it3.SHA384 = st3._createHelper(ct2), it3.HmacSHA384 = st3._createHmacHelper(ct2), Ct2.lib.Cipher || function() {
            var t3 = Ct2, e5 = t3.lib, i3 = e5.Base, r5 = e5.WordArray, o4 = e5.BufferedBlockAlgorithm, n4 = t3.enc.Base64, a4 = t3.algo.EvpKDF, s4 = e5.Cipher = o4.extend({ cfg: i3.extend(), createEncryptor: function(t4, e6) {
              return this.create(this._ENC_XFORM_MODE, t4, e6);
            }, createDecryptor: function(t4, e6) {
              return this.create(this._DEC_XFORM_MODE, t4, e6);
            }, init: function(t4, e6, i4) {
              this.cfg = this.cfg.extend(i4), this._xformMode = t4, this._key = e6, this.reset();
            }, reset: function() {
              o4.reset.call(this), this._doReset();
            }, process: function(t4) {
              return this._append(t4), this._process();
            }, finalize: function(t4) {
              return t4 && this._append(t4), this._doFinalize();
            }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function(t4) {
              return { encrypt: function(e6, i4, r6) {
                return c4(i4).encrypt(t4, e6, i4, r6);
              }, decrypt: function(e6, i4, r6) {
                return c4(i4).decrypt(t4, e6, i4, r6);
              } };
            } });
            function c4(t4) {
              return "string" == typeof t4 ? y4 : g4;
            }
            e5.StreamCipher = s4.extend({ _doFinalize: function() {
              return this._process(true);
            }, blockSize: 1 });
            var l4, u4 = t3.mode = {}, h4 = e5.BlockCipherMode = i3.extend({ createEncryptor: function(t4, e6) {
              return this.Encryptor.create(t4, e6);
            }, createDecryptor: function(t4, e6) {
              return this.Decryptor.create(t4, e6);
            }, init: function(t4, e6) {
              this._cipher = t4, this._iv = e6;
            } }), p4 = u4.CBC = ((l4 = h4.extend()).Encryptor = l4.extend({ processBlock: function(t4, e6) {
              var i4 = this._cipher, r6 = i4.blockSize;
              f4.call(this, t4, e6, r6), i4.encryptBlock(t4, e6), this._prevBlock = t4.slice(e6, e6 + r6);
            } }), l4.Decryptor = l4.extend({ processBlock: function(t4, e6) {
              var i4 = this._cipher, r6 = i4.blockSize, o5 = t4.slice(e6, e6 + r6);
              i4.decryptBlock(t4, e6), f4.call(this, t4, e6, r6), this._prevBlock = o5;
            } }), l4);
            function f4(t4, e6, i4) {
              var r6, o5 = this._iv;
              o5 ? (r6 = o5, this._iv = void 0) : r6 = this._prevBlock;
              for (var n5 = 0; n5 < i4; n5++)
                t4[e6 + n5] ^= r6[n5];
            }
            var d4 = (t3.pad = {}).Pkcs7 = { pad: function(t4, e6) {
              for (var i4 = 4 * e6, o5 = i4 - t4.sigBytes % i4, n5 = o5 << 24 | o5 << 16 | o5 << 8 | o5, a5 = [], s5 = 0; s5 < o5; s5 += 4)
                a5.push(n5);
              var c5 = r5.create(a5, o5);
              t4.concat(c5);
            }, unpad: function(t4) {
              t4.sigBytes -= 255 & t4.words[t4.sigBytes - 1 >>> 2];
            } }, _5 = (e5.BlockCipher = s4.extend({ cfg: s4.cfg.extend({ mode: p4, padding: d4 }), reset: function() {
              s4.reset.call(this);
              var t4, e6 = this.cfg, i4 = e6.iv, r6 = e6.mode;
              this._xformMode == this._ENC_XFORM_MODE ? t4 = r6.createEncryptor : (t4 = r6.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == t4 ? this._mode.init(this, i4 && i4.words) : (this._mode = t4.call(r6, this, i4 && i4.words), this._mode.__creator = t4);
            }, _doProcessBlock: function(t4, e6) {
              this._mode.processBlock(t4, e6);
            }, _doFinalize: function() {
              var t4, e6 = this.cfg.padding;
              return this._xformMode == this._ENC_XFORM_MODE ? (e6.pad(this._data, this.blockSize), t4 = this._process(true)) : (t4 = this._process(true), e6.unpad(t4)), t4;
            }, blockSize: 4 }), e5.CipherParams = i3.extend({ init: function(t4) {
              this.mixIn(t4);
            }, toString: function(t4) {
              return (t4 || this.formatter).stringify(this);
            } })), m4 = (t3.format = {}).OpenSSL = { stringify: function(t4) {
              var e6 = t4.ciphertext, i4 = t4.salt;
              return (i4 ? r5.create([1398893684, 1701076831]).concat(i4).concat(e6) : e6).toString(n4);
            }, parse: function(t4) {
              var e6, i4 = n4.parse(t4), o5 = i4.words;
              return 1398893684 == o5[0] && 1701076831 == o5[1] && (e6 = r5.create(o5.slice(2, 4)), o5.splice(0, 4), i4.sigBytes -= 16), _5.create({ ciphertext: i4, salt: e6 });
            } }, g4 = e5.SerializableCipher = i3.extend({ cfg: i3.extend({ format: m4 }), encrypt: function(t4, e6, i4, r6) {
              r6 = this.cfg.extend(r6);
              var o5 = t4.createEncryptor(i4, r6), n5 = o5.finalize(e6), a5 = o5.cfg;
              return _5.create({ ciphertext: n5, key: i4, iv: a5.iv, algorithm: t4, mode: a5.mode, padding: a5.padding, blockSize: t4.blockSize, formatter: r6.format });
            }, decrypt: function(t4, e6, i4, r6) {
              return r6 = this.cfg.extend(r6), e6 = this._parse(e6, r6.format), t4.createDecryptor(i4, r6).finalize(e6.ciphertext);
            }, _parse: function(t4, e6) {
              return "string" == typeof t4 ? e6.parse(t4, this) : t4;
            } }), v4 = (t3.kdf = {}).OpenSSL = { execute: function(t4, e6, i4, o5) {
              o5 = o5 || r5.random(8);
              var n5 = a4.create({ keySize: e6 + i4 }).compute(t4, o5), s5 = r5.create(n5.words.slice(e6), 4 * i4);
              return n5.sigBytes = 4 * e6, _5.create({ key: n5, iv: s5, salt: o5 });
            } }, y4 = e5.PasswordBasedCipher = g4.extend({ cfg: g4.cfg.extend({ kdf: v4 }), encrypt: function(t4, e6, i4, r6) {
              var o5 = (r6 = this.cfg.extend(r6)).kdf.execute(i4, t4.keySize, t4.ivSize);
              r6.iv = o5.iv;
              var n5 = g4.encrypt.call(this, t4, e6, o5.key, r6);
              return n5.mixIn(o5), n5;
            }, decrypt: function(t4, e6, i4, r6) {
              r6 = this.cfg.extend(r6), e6 = this._parse(e6, r6.format);
              var o5 = r6.kdf.execute(i4, t4.keySize, t4.ivSize, e6.salt);
              return r6.iv = o5.iv, g4.decrypt.call(this, t4, e6, o5.key, r6);
            } });
          }(), Ct2.mode.CFB = ((lt2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = lt2.extend({ processBlock: function(t3, e5) {
            var i3 = this._cipher, r5 = i3.blockSize;
            Rt2.call(this, t3, e5, r5, i3), this._prevBlock = t3.slice(e5, e5 + r5);
          } }), lt2.Decryptor = lt2.extend({ processBlock: function(t3, e5) {
            var i3 = this._cipher, r5 = i3.blockSize, o4 = t3.slice(e5, e5 + r5);
            Rt2.call(this, t3, e5, r5, i3), this._prevBlock = o4;
          } }), lt2), Ct2.mode.ECB = ((ut2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = ut2.extend({ processBlock: function(t3, e5) {
            this._cipher.encryptBlock(t3, e5);
          } }), ut2.Decryptor = ut2.extend({ processBlock: function(t3, e5) {
            this._cipher.decryptBlock(t3, e5);
          } }), ut2), Ct2.pad.AnsiX923 = { pad: function(t3, e5) {
            var i3 = t3.sigBytes, r5 = 4 * e5, o4 = r5 - i3 % r5, n4 = i3 + o4 - 1;
            t3.clamp(), t3.words[n4 >>> 2] |= o4 << 24 - n4 % 4 * 8, t3.sigBytes += o4;
          }, unpad: function(t3) {
            t3.sigBytes -= 255 & t3.words[t3.sigBytes - 1 >>> 2];
          } }, Ct2.pad.Iso10126 = { pad: function(t3, e5) {
            var i3 = 4 * e5, r5 = i3 - t3.sigBytes % i3;
            t3.concat(Ct2.lib.WordArray.random(r5 - 1)).concat(Ct2.lib.WordArray.create([r5 << 24], 1));
          }, unpad: function(t3) {
            t3.sigBytes -= 255 & t3.words[t3.sigBytes - 1 >>> 2];
          } }, Ct2.pad.Iso97971 = { pad: function(t3, e5) {
            t3.concat(Ct2.lib.WordArray.create([2147483648], 1)), Ct2.pad.ZeroPadding.pad(t3, e5);
          }, unpad: function(t3) {
            Ct2.pad.ZeroPadding.unpad(t3), t3.sigBytes--;
          } }, Ct2.mode.OFB = (pt2 = (ht2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = ht2.extend({ processBlock: function(t3, e5) {
            var i3 = this._cipher, r5 = i3.blockSize, o4 = this._iv, n4 = this._keystream;
            o4 && (n4 = this._keystream = o4.slice(0), this._iv = void 0), i3.encryptBlock(n4, 0);
            for (var a4 = 0; a4 < r5; a4++)
              t3[e5 + a4] ^= n4[a4];
          } }), ht2.Decryptor = pt2, ht2), Ct2.pad.NoPadding = { pad: function() {
          }, unpad: function() {
          } }, ft2 = Ct2.lib.CipherParams, dt2 = Ct2.enc.Hex, Ct2.format.Hex = { stringify: function(t3) {
            return t3.ciphertext.toString(dt2);
          }, parse: function(t3) {
            var e5 = dt2.parse(t3);
            return ft2.create({ ciphertext: e5 });
          } }, function() {
            var t3 = Ct2, e5 = t3.lib.BlockCipher, i3 = t3.algo, r5 = [], o4 = [], n4 = [], a4 = [], s4 = [], c4 = [], l4 = [], u4 = [], h4 = [], p4 = [];
            !function() {
              for (var t4 = [], e6 = 0; e6 < 256; e6++)
                t4[e6] = e6 < 128 ? e6 << 1 : e6 << 1 ^ 283;
              var i4 = 0, f5 = 0;
              for (e6 = 0; e6 < 256; e6++) {
                var d5 = (d5 = f5 ^ f5 << 1 ^ f5 << 2 ^ f5 << 3 ^ f5 << 4) >>> 8 ^ 255 & d5 ^ 99;
                r5[i4] = d5;
                var _5 = t4[o4[d5] = i4], m4 = t4[_5], g4 = t4[m4], v4 = 257 * t4[d5] ^ 16843008 * d5;
                n4[i4] = v4 << 24 | v4 >>> 8, a4[i4] = v4 << 16 | v4 >>> 16, s4[i4] = v4 << 8 | v4 >>> 24, c4[i4] = v4, l4[d5] = (v4 = 16843009 * g4 ^ 65537 * m4 ^ 257 * _5 ^ 16843008 * i4) << 24 | v4 >>> 8, u4[d5] = v4 << 16 | v4 >>> 16, h4[d5] = v4 << 8 | v4 >>> 24, p4[d5] = v4, i4 ? (i4 = _5 ^ t4[t4[t4[g4 ^ _5]]], f5 ^= t4[t4[f5]]) : i4 = f5 = 1;
              }
            }();
            var f4 = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], d4 = i3.AES = e5.extend({ _doReset: function() {
              if (!this._nRounds || this._keyPriorReset !== this._key) {
                for (var t4 = this._keyPriorReset = this._key, e6 = t4.words, i4 = t4.sigBytes / 4, o5 = 4 * (1 + (this._nRounds = 6 + i4)), n5 = this._keySchedule = [], a5 = 0; a5 < o5; a5++)
                  a5 < i4 ? n5[a5] = e6[a5] : (d5 = n5[a5 - 1], a5 % i4 ? 6 < i4 && a5 % i4 == 4 && (d5 = r5[d5 >>> 24] << 24 | r5[d5 >>> 16 & 255] << 16 | r5[d5 >>> 8 & 255] << 8 | r5[255 & d5]) : (d5 = r5[(d5 = d5 << 8 | d5 >>> 24) >>> 24] << 24 | r5[d5 >>> 16 & 255] << 16 | r5[d5 >>> 8 & 255] << 8 | r5[255 & d5], d5 ^= f4[a5 / i4 | 0] << 24), n5[a5] = n5[a5 - i4] ^ d5);
                for (var s5 = this._invKeySchedule = [], c5 = 0; c5 < o5; c5++) {
                  var d5;
                  a5 = o5 - c5, d5 = c5 % 4 ? n5[a5] : n5[a5 - 4], s5[c5] = c5 < 4 || a5 <= 4 ? d5 : l4[r5[d5 >>> 24]] ^ u4[r5[d5 >>> 16 & 255]] ^ h4[r5[d5 >>> 8 & 255]] ^ p4[r5[255 & d5]];
                }
              }
            }, encryptBlock: function(t4, e6) {
              this._doCryptBlock(t4, e6, this._keySchedule, n4, a4, s4, c4, r5);
            }, decryptBlock: function(t4, e6) {
              var i4 = t4[e6 + 1];
              t4[e6 + 1] = t4[e6 + 3], t4[e6 + 3] = i4, this._doCryptBlock(t4, e6, this._invKeySchedule, l4, u4, h4, p4, o4), i4 = t4[e6 + 1], t4[e6 + 1] = t4[e6 + 3], t4[e6 + 3] = i4;
            }, _doCryptBlock: function(t4, e6, i4, r6, o5, n5, a5, s5) {
              for (var c5 = this._nRounds, l5 = t4[e6] ^ i4[0], u5 = t4[e6 + 1] ^ i4[1], h5 = t4[e6 + 2] ^ i4[2], p5 = t4[e6 + 3] ^ i4[3], f5 = 4, d5 = 1; d5 < c5; d5++) {
                var _5 = r6[l5 >>> 24] ^ o5[u5 >>> 16 & 255] ^ n5[h5 >>> 8 & 255] ^ a5[255 & p5] ^ i4[f5++], m4 = r6[u5 >>> 24] ^ o5[h5 >>> 16 & 255] ^ n5[p5 >>> 8 & 255] ^ a5[255 & l5] ^ i4[f5++], g4 = r6[h5 >>> 24] ^ o5[p5 >>> 16 & 255] ^ n5[l5 >>> 8 & 255] ^ a5[255 & u5] ^ i4[f5++], v4 = r6[p5 >>> 24] ^ o5[l5 >>> 16 & 255] ^ n5[u5 >>> 8 & 255] ^ a5[255 & h5] ^ i4[f5++];
                l5 = _5, u5 = m4, h5 = g4, p5 = v4;
              }
              _5 = (s5[l5 >>> 24] << 24 | s5[u5 >>> 16 & 255] << 16 | s5[h5 >>> 8 & 255] << 8 | s5[255 & p5]) ^ i4[f5++], m4 = (s5[u5 >>> 24] << 24 | s5[h5 >>> 16 & 255] << 16 | s5[p5 >>> 8 & 255] << 8 | s5[255 & l5]) ^ i4[f5++], g4 = (s5[h5 >>> 24] << 24 | s5[p5 >>> 16 & 255] << 16 | s5[l5 >>> 8 & 255] << 8 | s5[255 & u5]) ^ i4[f5++], v4 = (s5[p5 >>> 24] << 24 | s5[l5 >>> 16 & 255] << 16 | s5[u5 >>> 8 & 255] << 8 | s5[255 & h5]) ^ i4[f5++], t4[e6] = _5, t4[e6 + 1] = m4, t4[e6 + 2] = g4, t4[e6 + 3] = v4;
            }, keySize: 8 });
            t3.AES = e5._createHelper(d4);
          }(), function() {
            var t3 = Ct2, e5 = t3.lib, i3 = e5.WordArray, r5 = e5.BlockCipher, o4 = t3.algo, n4 = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4], a4 = [14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32], s4 = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28], c4 = [{ 0: 8421888, 268435456: 32768, 536870912: 8421378, 805306368: 2, 1073741824: 512, 1342177280: 8421890, 1610612736: 8389122, 1879048192: 8388608, 2147483648: 514, 2415919104: 8389120, 2684354560: 33280, 2952790016: 8421376, 3221225472: 32770, 3489660928: 8388610, 3758096384: 0, 4026531840: 33282, 134217728: 0, 402653184: 8421890, 671088640: 33282, 939524096: 32768, 1207959552: 8421888, 1476395008: 512, 1744830464: 8421378, 2013265920: 2, 2281701376: 8389120, 2550136832: 33280, 2818572288: 8421376, 3087007744: 8389122, 3355443200: 8388610, 3623878656: 32770, 3892314112: 514, 4160749568: 8388608, 1: 32768, 268435457: 2, 536870913: 8421888, 805306369: 8388608, 1073741825: 8421378, 1342177281: 33280, 1610612737: 512, 1879048193: 8389122, 2147483649: 8421890, 2415919105: 8421376, 2684354561: 8388610, 2952790017: 33282, 3221225473: 514, 3489660929: 8389120, 3758096385: 32770, 4026531841: 0, 134217729: 8421890, 402653185: 8421376, 671088641: 8388608, 939524097: 512, 1207959553: 32768, 1476395009: 8388610, 1744830465: 2, 2013265921: 33282, 2281701377: 32770, 2550136833: 8389122, 2818572289: 514, 3087007745: 8421888, 3355443201: 8389120, 3623878657: 0, 3892314113: 33280, 4160749569: 8421378 }, { 0: 1074282512, 16777216: 16384, 33554432: 524288, 50331648: 1074266128, 67108864: 1073741840, 83886080: 1074282496, 100663296: 1073758208, 117440512: 16, 134217728: 540672, 150994944: 1073758224, 167772160: 1073741824, 184549376: 540688, 201326592: 524304, 218103808: 0, 234881024: 16400, 251658240: 1074266112, 8388608: 1073758208, 25165824: 540688, 41943040: 16, 58720256: 1073758224, 75497472: 1074282512, 92274688: 1073741824, 109051904: 524288, 125829120: 1074266128, 142606336: 524304, 159383552: 0, 176160768: 16384, 192937984: 1074266112, 209715200: 1073741840, 226492416: 540672, 243269632: 1074282496, 260046848: 16400, 268435456: 0, 285212672: 1074266128, 301989888: 1073758224, 318767104: 1074282496, 335544320: 1074266112, 352321536: 16, 369098752: 540688, 385875968: 16384, 402653184: 16400, 419430400: 524288, 436207616: 524304, 452984832: 1073741840, 469762048: 540672, 486539264: 1073758208, 503316480: 1073741824, 520093696: 1074282512, 276824064: 540688, 293601280: 524288, 310378496: 1074266112, 327155712: 16384, 343932928: 1073758208, 360710144: 1074282512, 377487360: 16, 394264576: 1073741824, 411041792: 1074282496, 427819008: 1073741840, 444596224: 1073758224, 461373440: 524304, 478150656: 0, 494927872: 16400, 511705088: 1074266128, 528482304: 540672 }, { 0: 260, 1048576: 0, 2097152: 67109120, 3145728: 65796, 4194304: 65540, 5242880: 67108868, 6291456: 67174660, 7340032: 67174400, 8388608: 67108864, 9437184: 67174656, 10485760: 65792, 11534336: 67174404, 12582912: 67109124, 13631488: 65536, 14680064: 4, 15728640: 256, 524288: 67174656, 1572864: 67174404, 2621440: 0, 3670016: 67109120, 4718592: 67108868, 5767168: 65536, 6815744: 65540, 7864320: 260, 8912896: 4, 9961472: 256, 11010048: 67174400, 12058624: 65796, 13107200: 65792, 14155776: 67109124, 15204352: 67174660, 16252928: 67108864, 16777216: 67174656, 17825792: 65540, 18874368: 65536, 19922944: 67109120, 20971520: 256, 22020096: 67174660, 23068672: 67108868, 24117248: 0, 25165824: 67109124, 26214400: 67108864, 27262976: 4, 28311552: 65792, 29360128: 67174400, 30408704: 260, 31457280: 65796, 32505856: 67174404, 17301504: 67108864, 18350080: 260, 19398656: 67174656, 20447232: 0, 21495808: 65540, 22544384: 67109120, 23592960: 256, 24641536: 67174404, 25690112: 65536, 26738688: 67174660, 27787264: 65796, 28835840: 67108868, 29884416: 67109124, 30932992: 67174400, 31981568: 4, 33030144: 65792 }, { 0: 2151682048, 65536: 2147487808, 131072: 4198464, 196608: 2151677952, 262144: 0, 327680: 4198400, 393216: 2147483712, 458752: 4194368, 524288: 2147483648, 589824: 4194304, 655360: 64, 720896: 2147487744, 786432: 2151678016, 851968: 4160, 917504: 4096, 983040: 2151682112, 32768: 2147487808, 98304: 64, 163840: 2151678016, 229376: 2147487744, 294912: 4198400, 360448: 2151682112, 425984: 0, 491520: 2151677952, 557056: 4096, 622592: 2151682048, 688128: 4194304, 753664: 4160, 819200: 2147483648, 884736: 4194368, 950272: 4198464, 1015808: 2147483712, 1048576: 4194368, 1114112: 4198400, 1179648: 2147483712, 1245184: 0, 1310720: 4160, 1376256: 2151678016, 1441792: 2151682048, 1507328: 2147487808, 1572864: 2151682112, 1638400: 2147483648, 1703936: 2151677952, 1769472: 4198464, 1835008: 2147487744, 1900544: 4194304, 1966080: 64, 2031616: 4096, 1081344: 2151677952, 1146880: 2151682112, 1212416: 0, 1277952: 4198400, 1343488: 4194368, 1409024: 2147483648, 1474560: 2147487808, 1540096: 64, 1605632: 2147483712, 1671168: 4096, 1736704: 2147487744, 1802240: 2151678016, 1867776: 4160, 1933312: 2151682048, 1998848: 4194304, 2064384: 4198464 }, { 0: 128, 4096: 17039360, 8192: 262144, 12288: 536870912, 16384: 537133184, 20480: 16777344, 24576: 553648256, 28672: 262272, 32768: 16777216, 36864: 537133056, 40960: 536871040, 45056: 553910400, 49152: 553910272, 53248: 0, 57344: 17039488, 61440: 553648128, 2048: 17039488, 6144: 553648256, 10240: 128, 14336: 17039360, 18432: 262144, 22528: 537133184, 26624: 553910272, 30720: 536870912, 34816: 537133056, 38912: 0, 43008: 553910400, 47104: 16777344, 51200: 536871040, 55296: 553648128, 59392: 16777216, 63488: 262272, 65536: 262144, 69632: 128, 73728: 536870912, 77824: 553648256, 81920: 16777344, 86016: 553910272, 90112: 537133184, 94208: 16777216, 98304: 553910400, 102400: 553648128, 106496: 17039360, 110592: 537133056, 114688: 262272, 118784: 536871040, 122880: 0, 126976: 17039488, 67584: 553648256, 71680: 16777216, 75776: 17039360, 79872: 537133184, 83968: 536870912, 88064: 17039488, 92160: 128, 96256: 553910272, 100352: 262272, 104448: 553910400, 108544: 0, 112640: 553648128, 116736: 16777344, 120832: 262144, 124928: 537133056, 129024: 536871040 }, { 0: 268435464, 256: 8192, 512: 270532608, 768: 270540808, 1024: 268443648, 1280: 2097152, 1536: 2097160, 1792: 268435456, 2048: 0, 2304: 268443656, 2560: 2105344, 2816: 8, 3072: 270532616, 3328: 2105352, 3584: 8200, 3840: 270540800, 128: 270532608, 384: 270540808, 640: 8, 896: 2097152, 1152: 2105352, 1408: 268435464, 1664: 268443648, 1920: 8200, 2176: 2097160, 2432: 8192, 2688: 268443656, 2944: 270532616, 3200: 0, 3456: 270540800, 3712: 2105344, 3968: 268435456, 4096: 268443648, 4352: 270532616, 4608: 270540808, 4864: 8200, 5120: 2097152, 5376: 268435456, 5632: 268435464, 5888: 2105344, 6144: 2105352, 6400: 0, 6656: 8, 6912: 270532608, 7168: 8192, 7424: 268443656, 7680: 270540800, 7936: 2097160, 4224: 8, 4480: 2105344, 4736: 2097152, 4992: 268435464, 5248: 268443648, 5504: 8200, 5760: 270540808, 6016: 270532608, 6272: 270540800, 6528: 270532616, 6784: 8192, 7040: 2105352, 7296: 2097160, 7552: 0, 7808: 268435456, 8064: 268443656 }, { 0: 1048576, 16: 33555457, 32: 1024, 48: 1049601, 64: 34604033, 80: 0, 96: 1, 112: 34603009, 128: 33555456, 144: 1048577, 160: 33554433, 176: 34604032, 192: 34603008, 208: 1025, 224: 1049600, 240: 33554432, 8: 34603009, 24: 0, 40: 33555457, 56: 34604032, 72: 1048576, 88: 33554433, 104: 33554432, 120: 1025, 136: 1049601, 152: 33555456, 168: 34603008, 184: 1048577, 200: 1024, 216: 34604033, 232: 1, 248: 1049600, 256: 33554432, 272: 1048576, 288: 33555457, 304: 34603009, 320: 1048577, 336: 33555456, 352: 34604032, 368: 1049601, 384: 1025, 400: 34604033, 416: 1049600, 432: 1, 448: 0, 464: 34603008, 480: 33554433, 496: 1024, 264: 1049600, 280: 33555457, 296: 34603009, 312: 1, 328: 33554432, 344: 1048576, 360: 1025, 376: 34604032, 392: 33554433, 408: 34603008, 424: 0, 440: 34604033, 456: 1049601, 472: 1024, 488: 33555456, 504: 1048577 }, { 0: 134219808, 1: 131072, 2: 134217728, 3: 32, 4: 131104, 5: 134350880, 6: 134350848, 7: 2048, 8: 134348800, 9: 134219776, 10: 133120, 11: 134348832, 12: 2080, 13: 0, 14: 134217760, 15: 133152, 2147483648: 2048, 2147483649: 134350880, 2147483650: 134219808, 2147483651: 134217728, 2147483652: 134348800, 2147483653: 133120, 2147483654: 133152, 2147483655: 32, 2147483656: 134217760, 2147483657: 2080, 2147483658: 131104, 2147483659: 134350848, 2147483660: 0, 2147483661: 134348832, 2147483662: 134219776, 2147483663: 131072, 16: 133152, 17: 134350848, 18: 32, 19: 2048, 20: 134219776, 21: 134217760, 22: 134348832, 23: 131072, 24: 0, 25: 131104, 26: 134348800, 27: 134219808, 28: 134350880, 29: 133120, 30: 2080, 31: 134217728, 2147483664: 131072, 2147483665: 2048, 2147483666: 134348832, 2147483667: 133152, 2147483668: 32, 2147483669: 134348800, 2147483670: 134217728, 2147483671: 134219808, 2147483672: 134350880, 2147483673: 134217760, 2147483674: 134219776, 2147483675: 0, 2147483676: 133120, 2147483677: 2080, 2147483678: 131104, 2147483679: 134350848 }], l4 = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679], u4 = o4.DES = r5.extend({ _doReset: function() {
              for (var t4 = this._key.words, e6 = [], i4 = 0; i4 < 56; i4++) {
                var r6 = n4[i4] - 1;
                e6[i4] = t4[r6 >>> 5] >>> 31 - r6 % 32 & 1;
              }
              for (var o5 = this._subKeys = [], c5 = 0; c5 < 16; c5++) {
                var l5 = o5[c5] = [], u5 = s4[c5];
                for (i4 = 0; i4 < 24; i4++)
                  l5[i4 / 6 | 0] |= e6[(a4[i4] - 1 + u5) % 28] << 31 - i4 % 6, l5[4 + (i4 / 6 | 0)] |= e6[28 + (a4[i4 + 24] - 1 + u5) % 28] << 31 - i4 % 6;
                for (l5[0] = l5[0] << 1 | l5[0] >>> 31, i4 = 1; i4 < 7; i4++)
                  l5[i4] = l5[i4] >>> 4 * (i4 - 1) + 3;
                l5[7] = l5[7] << 5 | l5[7] >>> 27;
              }
              var h5 = this._invSubKeys = [];
              for (i4 = 0; i4 < 16; i4++)
                h5[i4] = o5[15 - i4];
            }, encryptBlock: function(t4, e6) {
              this._doCryptBlock(t4, e6, this._subKeys);
            }, decryptBlock: function(t4, e6) {
              this._doCryptBlock(t4, e6, this._invSubKeys);
            }, _doCryptBlock: function(t4, e6, i4) {
              this._lBlock = t4[e6], this._rBlock = t4[e6 + 1], h4.call(this, 4, 252645135), h4.call(this, 16, 65535), p4.call(this, 2, 858993459), p4.call(this, 8, 16711935), h4.call(this, 1, 1431655765);
              for (var r6 = 0; r6 < 16; r6++) {
                for (var o5 = i4[r6], n5 = this._lBlock, a5 = this._rBlock, s5 = 0, u5 = 0; u5 < 8; u5++)
                  s5 |= c4[u5][((a5 ^ o5[u5]) & l4[u5]) >>> 0];
                this._lBlock = a5, this._rBlock = n5 ^ s5;
              }
              var f5 = this._lBlock;
              this._lBlock = this._rBlock, this._rBlock = f5, h4.call(this, 1, 1431655765), p4.call(this, 8, 16711935), p4.call(this, 2, 858993459), h4.call(this, 16, 65535), h4.call(this, 4, 252645135), t4[e6] = this._lBlock, t4[e6 + 1] = this._rBlock;
            }, keySize: 2, ivSize: 2, blockSize: 2 });
            function h4(t4, e6) {
              var i4 = (this._lBlock >>> t4 ^ this._rBlock) & e6;
              this._rBlock ^= i4, this._lBlock ^= i4 << t4;
            }
            function p4(t4, e6) {
              var i4 = (this._rBlock >>> t4 ^ this._lBlock) & e6;
              this._lBlock ^= i4, this._rBlock ^= i4 << t4;
            }
            t3.DES = r5._createHelper(u4);
            var f4 = o4.TripleDES = r5.extend({ _doReset: function() {
              var t4 = this._key.words;
              this._des1 = u4.createEncryptor(i3.create(t4.slice(0, 2))), this._des2 = u4.createEncryptor(i3.create(t4.slice(2, 4))), this._des3 = u4.createEncryptor(i3.create(t4.slice(4, 6)));
            }, encryptBlock: function(t4, e6) {
              this._des1.encryptBlock(t4, e6), this._des2.decryptBlock(t4, e6), this._des3.encryptBlock(t4, e6);
            }, decryptBlock: function(t4, e6) {
              this._des3.decryptBlock(t4, e6), this._des2.encryptBlock(t4, e6), this._des1.decryptBlock(t4, e6);
            }, keySize: 6, ivSize: 2, blockSize: 2 });
            t3.TripleDES = r5._createHelper(f4);
          }(), function() {
            var t3 = Ct2, e5 = t3.lib.StreamCipher, i3 = t3.algo, r5 = i3.RC4 = e5.extend({ _doReset: function() {
              for (var t4 = this._key, e6 = t4.words, i4 = t4.sigBytes, r6 = this._S = [], o5 = 0; o5 < 256; o5++)
                r6[o5] = o5;
              o5 = 0;
              for (var n5 = 0; o5 < 256; o5++) {
                var a4 = o5 % i4, s4 = r6[o5];
                r6[o5] = r6[n5 = (n5 + r6[o5] + (e6[a4 >>> 2] >>> 24 - a4 % 4 * 8 & 255)) % 256], r6[n5] = s4;
              }
              this._i = this._j = 0;
            }, _doProcessBlock: function(t4, e6) {
              t4[e6] ^= o4.call(this);
            }, keySize: 8, ivSize: 0 });
            function o4() {
              for (var t4 = this._S, e6 = this._i, i4 = this._j, r6 = 0, o5 = 0; o5 < 4; o5++) {
                i4 = (i4 + t4[e6 = (e6 + 1) % 256]) % 256;
                var n5 = t4[e6];
                t4[e6] = t4[i4], t4[i4] = n5, r6 |= t4[(t4[e6] + t4[i4]) % 256] << 24 - 8 * o5;
              }
              return this._i = e6, this._j = i4, r6;
            }
            t3.RC4 = e5._createHelper(r5);
            var n4 = i3.RC4Drop = r5.extend({ cfg: r5.cfg.extend({ drop: 192 }), _doReset: function() {
              r5._doReset.call(this);
              for (var t4 = this.cfg.drop; 0 < t4; t4--)
                o4.call(this);
            } });
            t3.RC4Drop = e5._createHelper(n4);
          }(), Ct2.mode.CTRGladman = (mt2 = (_t2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = _t2.extend({ processBlock: function(t3, e5) {
            var i3, r5 = this._cipher, o4 = r5.blockSize, n4 = this._iv, a4 = this._counter;
            n4 && (a4 = this._counter = n4.slice(0), this._iv = void 0), 0 === ((i3 = a4)[0] = Ot2(i3[0])) && (i3[1] = Ot2(i3[1]));
            var s4 = a4.slice(0);
            r5.encryptBlock(s4, 0);
            for (var c4 = 0; c4 < o4; c4++)
              t3[e5 + c4] ^= s4[c4];
          } }), _t2.Decryptor = mt2, _t2), vt2 = (gt2 = Ct2).lib.StreamCipher, yt2 = [], bt2 = [], wt2 = [], xt2 = gt2.algo.Rabbit = vt2.extend({ _doReset: function() {
            for (var t3 = this._key.words, e5 = this.cfg.iv, i3 = 0; i3 < 4; i3++)
              t3[i3] = 16711935 & (t3[i3] << 8 | t3[i3] >>> 24) | 4278255360 & (t3[i3] << 24 | t3[i3] >>> 8);
            var r5 = this._X = [t3[0], t3[3] << 16 | t3[2] >>> 16, t3[1], t3[0] << 16 | t3[3] >>> 16, t3[2], t3[1] << 16 | t3[0] >>> 16, t3[3], t3[2] << 16 | t3[1] >>> 16], o4 = this._C = [t3[2] << 16 | t3[2] >>> 16, 4294901760 & t3[0] | 65535 & t3[1], t3[3] << 16 | t3[3] >>> 16, 4294901760 & t3[1] | 65535 & t3[2], t3[0] << 16 | t3[0] >>> 16, 4294901760 & t3[2] | 65535 & t3[3], t3[1] << 16 | t3[1] >>> 16, 4294901760 & t3[3] | 65535 & t3[0]];
            for (i3 = this._b = 0; i3 < 4; i3++)
              Ft2.call(this);
            for (i3 = 0; i3 < 8; i3++)
              o4[i3] ^= r5[i3 + 4 & 7];
            if (e5) {
              var n4 = e5.words, a4 = n4[0], s4 = n4[1], c4 = 16711935 & (a4 << 8 | a4 >>> 24) | 4278255360 & (a4 << 24 | a4 >>> 8), l4 = 16711935 & (s4 << 8 | s4 >>> 24) | 4278255360 & (s4 << 24 | s4 >>> 8), u4 = c4 >>> 16 | 4294901760 & l4, h4 = l4 << 16 | 65535 & c4;
              for (o4[0] ^= c4, o4[1] ^= u4, o4[2] ^= l4, o4[3] ^= h4, o4[4] ^= c4, o4[5] ^= u4, o4[6] ^= l4, o4[7] ^= h4, i3 = 0; i3 < 4; i3++)
                Ft2.call(this);
            }
          }, _doProcessBlock: function(t3, e5) {
            var i3 = this._X;
            Ft2.call(this), yt2[0] = i3[0] ^ i3[5] >>> 16 ^ i3[3] << 16, yt2[1] = i3[2] ^ i3[7] >>> 16 ^ i3[5] << 16, yt2[2] = i3[4] ^ i3[1] >>> 16 ^ i3[7] << 16, yt2[3] = i3[6] ^ i3[3] >>> 16 ^ i3[1] << 16;
            for (var r5 = 0; r5 < 4; r5++)
              yt2[r5] = 16711935 & (yt2[r5] << 8 | yt2[r5] >>> 24) | 4278255360 & (yt2[r5] << 24 | yt2[r5] >>> 8), t3[e5 + r5] ^= yt2[r5];
          }, blockSize: 4, ivSize: 2 }), gt2.Rabbit = vt2._createHelper(xt2), Ct2.mode.CTR = (St2 = (Tt2 = Ct2.lib.BlockCipherMode.extend()).Encryptor = Tt2.extend({ processBlock: function(t3, e5) {
            var i3 = this._cipher, r5 = i3.blockSize, o4 = this._iv, n4 = this._counter;
            o4 && (n4 = this._counter = o4.slice(0), this._iv = void 0);
            var a4 = n4.slice(0);
            i3.encryptBlock(a4, 0), n4[r5 - 1] = n4[r5 - 1] + 1 | 0;
            for (var s4 = 0; s4 < r5; s4++)
              t3[e5 + s4] ^= a4[s4];
          } }), Tt2.Decryptor = St2, Tt2), At2 = (Et2 = Ct2).lib.StreamCipher, kt2 = [], It2 = [], Bt2 = [], Pt2 = Et2.algo.RabbitLegacy = At2.extend({ _doReset: function() {
            for (var t3 = this._key.words, e5 = this.cfg.iv, i3 = this._X = [t3[0], t3[3] << 16 | t3[2] >>> 16, t3[1], t3[0] << 16 | t3[3] >>> 16, t3[2], t3[1] << 16 | t3[0] >>> 16, t3[3], t3[2] << 16 | t3[1] >>> 16], r5 = this._C = [t3[2] << 16 | t3[2] >>> 16, 4294901760 & t3[0] | 65535 & t3[1], t3[3] << 16 | t3[3] >>> 16, 4294901760 & t3[1] | 65535 & t3[2], t3[0] << 16 | t3[0] >>> 16, 4294901760 & t3[2] | 65535 & t3[3], t3[1] << 16 | t3[1] >>> 16, 4294901760 & t3[3] | 65535 & t3[0]], o4 = this._b = 0; o4 < 4; o4++)
              Ut2.call(this);
            for (o4 = 0; o4 < 8; o4++)
              r5[o4] ^= i3[o4 + 4 & 7];
            if (e5) {
              var n4 = e5.words, a4 = n4[0], s4 = n4[1], c4 = 16711935 & (a4 << 8 | a4 >>> 24) | 4278255360 & (a4 << 24 | a4 >>> 8), l4 = 16711935 & (s4 << 8 | s4 >>> 24) | 4278255360 & (s4 << 24 | s4 >>> 8), u4 = c4 >>> 16 | 4294901760 & l4, h4 = l4 << 16 | 65535 & c4;
              for (r5[0] ^= c4, r5[1] ^= u4, r5[2] ^= l4, r5[3] ^= h4, r5[4] ^= c4, r5[5] ^= u4, r5[6] ^= l4, r5[7] ^= h4, o4 = 0; o4 < 4; o4++)
                Ut2.call(this);
            }
          }, _doProcessBlock: function(t3, e5) {
            var i3 = this._X;
            Ut2.call(this), kt2[0] = i3[0] ^ i3[5] >>> 16 ^ i3[3] << 16, kt2[1] = i3[2] ^ i3[7] >>> 16 ^ i3[5] << 16, kt2[2] = i3[4] ^ i3[1] >>> 16 ^ i3[7] << 16, kt2[3] = i3[6] ^ i3[3] >>> 16 ^ i3[1] << 16;
            for (var r5 = 0; r5 < 4; r5++)
              kt2[r5] = 16711935 & (kt2[r5] << 8 | kt2[r5] >>> 24) | 4278255360 & (kt2[r5] << 24 | kt2[r5] >>> 8), t3[e5 + r5] ^= kt2[r5];
          }, blockSize: 4, ivSize: 2 }), Et2.RabbitLegacy = At2._createHelper(Pt2), Ct2.pad.ZeroPadding = { pad: function(t3, e5) {
            var i3 = 4 * e5;
            t3.clamp(), t3.sigBytes += i3 - (t3.sigBytes % i3 || i3);
          }, unpad: function(t3) {
            for (var e5 = t3.words, i3 = t3.sigBytes - 1; !(e5[i3 >>> 2] >>> 24 - i3 % 4 * 8 & 255); )
              i3--;
            t3.sigBytes = i3 + 1;
          } }, Ct2;
        }(), n2 = null, a2 = (n2 || (function(t2) {
          !function() {
            function e4(t3, e5) {
              return t3 << (e5 %= 32) | t3 >>> 32 - e5;
            }
            function i2(t3) {
              return a3[(4026531840 & t3) >>> 28][(251658240 & t3) >>> 24] << 24 | a3[(15728640 & t3) >>> 20][(983040 & t3) >>> 16] << 16 | a3[(61440 & t3) >>> 12][(3840 & t3) >>> 8] << 8 | a3[(240 & t3) >>> 4][(15 & t3) >>> 0] << 0;
            }
            var r4 = t2, o3 = r4.lib.BlockCipher, n3 = r4.algo, a3 = new Array();
            a3[0] = new Array(214, 144, 233, 254, 204, 225, 61, 183, 22, 182, 20, 194, 40, 251, 44, 5), a3[1] = new Array(43, 103, 154, 118, 42, 190, 4, 195, 170, 68, 19, 38, 73, 134, 6, 153), a3[2] = new Array(156, 66, 80, 244, 145, 239, 152, 122, 51, 84, 11, 67, 237, 207, 172, 98), a3[3] = new Array(228, 179, 28, 169, 201, 8, 232, 149, 128, 223, 148, 250, 117, 143, 63, 166), a3[4] = new Array(71, 7, 167, 252, 243, 115, 23, 186, 131, 89, 60, 25, 230, 133, 79, 168), a3[5] = new Array(104, 107, 129, 178, 113, 100, 218, 139, 248, 235, 15, 75, 112, 86, 157, 53), a3[6] = new Array(30, 36, 14, 94, 99, 88, 209, 162, 37, 34, 124, 59, 1, 33, 120, 135), a3[7] = new Array(212, 0, 70, 87, 159, 211, 39, 82, 76, 54, 2, 231, 160, 196, 200, 158), a3[8] = new Array(234, 191, 138, 210, 64, 199, 56, 181, 163, 247, 242, 206, 249, 97, 21, 161), a3[9] = new Array(224, 174, 93, 164, 155, 52, 26, 85, 173, 147, 50, 48, 245, 140, 177, 227), a3[10] = new Array(29, 246, 226, 46, 130, 102, 202, 96, 192, 41, 35, 171, 13, 83, 78, 111), a3[11] = new Array(213, 219, 55, 69, 222, 253, 142, 47, 3, 255, 106, 114, 109, 108, 91, 81), a3[12] = new Array(141, 27, 175, 146, 187, 221, 188, 127, 17, 217, 92, 65, 31, 16, 90, 216), a3[13] = new Array(10, 193, 49, 136, 165, 205, 123, 189, 45, 116, 208, 18, 184, 229, 180, 176), a3[14] = new Array(137, 105, 151, 74, 12, 150, 119, 126, 101, 185, 241, 9, 197, 110, 198, 132), a3[15] = new Array(24, 240, 125, 236, 58, 220, 77, 32, 121, 238, 95, 62, 215, 203, 57, 72);
            var s3 = [462357, 472066609, 943670861, 1415275113, 1886879365, 2358483617, 2830087869, 3301692121, 3773296373, 4228057617, 404694573, 876298825, 1347903077, 1819507329, 2291111581, 2762715833, 3234320085, 3705924337, 4177462797, 337322537, 808926789, 1280531041, 1752135293, 2223739545, 2695343797, 3166948049, 3638552301, 4110090761, 269950501, 741554753, 1213159005, 1684763257], c3 = [2746333894, 1453994832, 1736282519, 2993693404], l3 = n3.SM4 = o3.extend({ _doReset: function() {
              for (var t3 = function(t4) {
                var r6 = new Array(), o5 = new Array();
                r6[0] = t4[0] ^ c3[0], r6[1] = t4[1] ^ c3[1], r6[2] = t4[2] ^ c3[2], r6[3] = t4[3] ^ c3[3];
                for (var n5, a4 = 0; a4 < 32; a4++)
                  r6[a4 + 4] = r6[a4] ^ (n5 = i2(n5 = r6[a4 + 1] ^ r6[a4 + 2] ^ r6[a4 + 3] ^ s3[a4])) ^ e4(n5, 13) ^ e4(n5, 23), o5[a4] = r6[a4 + 4].toString(16);
                return o5;
              }(this._key.words), r5 = this._SK = [], o4 = 0; o4 < t3.length; o4++)
                r5[o4] = t3[o4];
              var n4 = this._invSK = [];
              for (o4 = t3.length - 1; 0 <= o4; o4--)
                n4[t3.length - 1 - o4] = t3[o4];
            }, encryptBlock: function(t3, e5) {
              this._doCryptBlock(t3, e5, this._SK);
            }, decryptBlock: function(t3, e5) {
              this._doCryptBlock(t3, e5, this._invSK);
            }, _doCryptBlock: function(t3, r5, o4) {
              var n4 = [];
              n4[0] = t3[r5], n4[1] = t3[r5 + 1], n4[2] = t3[r5 + 2], n4[3] = t3[r5 + 3];
              for (var a4, s4 = 0; s4 < 32; s4++)
                n4[s4 + 4] = n4[s4] ^ (a4 = i2(a4 = n4[s4 + 1] ^ n4[s4 + 2] ^ n4[s4 + 3] ^ parseInt(o4[s4], 16))) ^ e4(a4, 2) ^ e4(a4, 10) ^ e4(a4, 18) ^ e4(a4, 24);
              t3[r5] = n4[35], t3[r5 + 1] = n4[34], t3[r5 + 2] = n4[33], t3[r5 + 3] = n4[32];
            }, keySize: 4, ivSize: 4, blockSize: 4 });
            r4.SM4 = o3._createHelper(l3);
          }();
        }(o2), n2 = o2.SM4), n2), s2 = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : void 0 !== t.window ? t.window : {};
        function c2(t2, e4) {
          return t2(e4 = { exports: {} }, e4.exports), e4.exports;
        }
        var l2, u2, h2, p2, f2, d2, _3, m2, g2, v2, y2, b2, w2 = c2(function(t2) {
          var e4, i2;
          e4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", i2 = { rotl: function(t3, e5) {
            return t3 << e5 | t3 >>> 32 - e5;
          }, rotr: function(t3, e5) {
            return t3 << 32 - e5 | t3 >>> e5;
          }, endian: function(t3) {
            if (t3.constructor == Number)
              return 16711935 & i2.rotl(t3, 8) | 4278255360 & i2.rotl(t3, 24);
            for (var e5 = 0; e5 < t3.length; e5++)
              t3[e5] = i2.endian(t3[e5]);
            return t3;
          }, randomBytes: function(t3) {
            for (var e5 = []; 0 < t3; t3--)
              e5.push(Math.floor(256 * Math.random()));
            return e5;
          }, bytesToWords: function(t3) {
            for (var e5 = [], i3 = 0, r4 = 0; i3 < t3.length; i3++, r4 += 8)
              e5[r4 >>> 5] |= t3[i3] << 24 - r4 % 32;
            return e5;
          }, wordsToBytes: function(t3) {
            for (var e5 = [], i3 = 0; i3 < 32 * t3.length; i3 += 8)
              e5.push(t3[i3 >>> 5] >>> 24 - i3 % 32 & 255);
            return e5;
          }, bytesToHex: function(t3) {
            for (var e5 = [], i3 = 0; i3 < t3.length; i3++)
              e5.push((t3[i3] >>> 4).toString(16)), e5.push((15 & t3[i3]).toString(16));
            return e5.join("");
          }, hexToBytes: function(t3) {
            for (var e5 = [], i3 = 0; i3 < t3.length; i3 += 2)
              e5.push(parseInt(t3.substr(i3, 2), 16));
            return e5;
          }, bytesToBase64: function(t3) {
            for (var i3 = [], r4 = 0; r4 < t3.length; r4 += 3)
              for (var o3 = t3[r4] << 16 | t3[r4 + 1] << 8 | t3[r4 + 2], n3 = 0; n3 < 4; n3++)
                i3.push(8 * r4 + 6 * n3 <= 8 * t3.length ? e4.charAt(o3 >>> 6 * (3 - n3) & 63) : "=");
            return i3.join("");
          }, base64ToBytes: function(t3) {
            t3 = t3.replace(/[^A-Z0-9+\/]/gi, "");
            for (var i3 = [], r4 = 0, o3 = 0; r4 < t3.length; o3 = ++r4 % 4)
              0 != o3 && i3.push((e4.indexOf(t3.charAt(r4 - 1)) & Math.pow(2, -2 * o3 + 8) - 1) << 2 * o3 | e4.indexOf(t3.charAt(r4)) >>> 6 - 2 * o3);
            return i3;
          } }, t2.exports = i2;
        }), x2 = { utf8: { stringToBytes: function(t2) {
          return x2.bin.stringToBytes(unescape(encodeURIComponent(t2)));
        }, bytesToString: function(t2) {
          return decodeURIComponent(escape(x2.bin.bytesToString(t2)));
        } }, bin: { stringToBytes: function(t2) {
          for (var e4 = [], i2 = 0; i2 < t2.length; i2++)
            e4.push(255 & t2.charCodeAt(i2));
          return e4;
        }, bytesToString: function(t2) {
          for (var e4 = [], i2 = 0; i2 < t2.length; i2++)
            e4.push(String.fromCharCode(t2[i2]));
          return e4.join("");
        } } }, T2 = x2, S2 = function(t2) {
          return null != t2 && (E2(t2) || "function" == typeof (e4 = t2).readFloatLE && "function" == typeof e4.slice && E2(e4.slice(0, 0)) || !!t2._isBuffer);
          var e4;
        };
        function E2(t2) {
          return !!t2.constructor && "function" == typeof t2.constructor.isBuffer && t2.constructor.isBuffer(t2);
        }
        function A2() {
        }
        function k2(t2, e4, i2) {
          null != t2 && ("number" == typeof t2 ? this.fromNumber(t2, e4, i2) : this.fromString(t2, null == e4 && "string" != typeof t2 ? 256 : e4));
        }
        function I2() {
          return new k2(null);
        }
        function B2(t2) {
          return L2.charAt(t2);
        }
        function P2(t2, e4) {
          var i2 = R2[t2.charCodeAt(e4)];
          return null == i2 ? -1 : i2;
        }
        function C2(t2) {
          var e4 = I2();
          return e4.fromInt(t2), e4;
        }
        function z2(t2) {
          var e4, i2 = 1;
          return 0 != (e4 = t2 >>> 16) && (t2 = e4, i2 += 16), 0 != (e4 = t2 >> 8) && (t2 = e4, i2 += 8), 0 != (e4 = t2 >> 4) && (t2 = e4, i2 += 4), 0 != (e4 = t2 >> 2) && (t2 = e4, i2 += 2), 0 != (e4 = t2 >> 1) && (t2 = e4, i2 += 1), i2;
        }
        function D2(t2) {
          this.m = t2;
        }
        function M2(t2) {
          this.m = t2, this.mp = t2.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << t2.DB - 15) - 1, this.mt2 = 2 * t2.t;
        }
        c2(function(t2) {
          var e4, i2, r4, o3, n3;
          e4 = w2, i2 = T2.utf8, r4 = S2, o3 = T2.bin, (n3 = function t3(n4, a3) {
            n4.constructor == String ? n4 = a3 && "binary" === a3.encoding ? o3.stringToBytes(n4) : i2.stringToBytes(n4) : r4(n4) ? n4 = Array.prototype.slice.call(n4, 0) : Array.isArray(n4) || (n4 = n4.toString());
            for (var s3 = e4.bytesToWords(n4), c3 = 8 * n4.length, l3 = 1732584193, u3 = -271733879, h3 = -1732584194, p3 = 271733878, f3 = 0; f3 < s3.length; f3++)
              s3[f3] = 16711935 & (s3[f3] << 8 | s3[f3] >>> 24) | 4278255360 & (s3[f3] << 24 | s3[f3] >>> 8);
            s3[c3 >>> 5] |= 128 << c3 % 32, s3[14 + (64 + c3 >>> 9 << 4)] = c3;
            var d3 = t3._ff, _4 = t3._gg, m3 = t3._hh, g3 = t3._ii;
            for (f3 = 0; f3 < s3.length; f3 += 16) {
              var v3 = l3, y3 = u3, b3 = h3, w3 = p3;
              l3 = d3(l3, u3, h3, p3, s3[f3 + 0], 7, -680876936), p3 = d3(p3, l3, u3, h3, s3[f3 + 1], 12, -389564586), h3 = d3(h3, p3, l3, u3, s3[f3 + 2], 17, 606105819), u3 = d3(u3, h3, p3, l3, s3[f3 + 3], 22, -1044525330), l3 = d3(l3, u3, h3, p3, s3[f3 + 4], 7, -176418897), p3 = d3(p3, l3, u3, h3, s3[f3 + 5], 12, 1200080426), h3 = d3(h3, p3, l3, u3, s3[f3 + 6], 17, -1473231341), u3 = d3(u3, h3, p3, l3, s3[f3 + 7], 22, -45705983), l3 = d3(l3, u3, h3, p3, s3[f3 + 8], 7, 1770035416), p3 = d3(p3, l3, u3, h3, s3[f3 + 9], 12, -1958414417), h3 = d3(h3, p3, l3, u3, s3[f3 + 10], 17, -42063), u3 = d3(u3, h3, p3, l3, s3[f3 + 11], 22, -1990404162), l3 = d3(l3, u3, h3, p3, s3[f3 + 12], 7, 1804603682), p3 = d3(p3, l3, u3, h3, s3[f3 + 13], 12, -40341101), h3 = d3(h3, p3, l3, u3, s3[f3 + 14], 17, -1502002290), l3 = _4(l3, u3 = d3(u3, h3, p3, l3, s3[f3 + 15], 22, 1236535329), h3, p3, s3[f3 + 1], 5, -165796510), p3 = _4(p3, l3, u3, h3, s3[f3 + 6], 9, -1069501632), h3 = _4(h3, p3, l3, u3, s3[f3 + 11], 14, 643717713), u3 = _4(u3, h3, p3, l3, s3[f3 + 0], 20, -373897302), l3 = _4(l3, u3, h3, p3, s3[f3 + 5], 5, -701558691), p3 = _4(p3, l3, u3, h3, s3[f3 + 10], 9, 38016083), h3 = _4(h3, p3, l3, u3, s3[f3 + 15], 14, -660478335), u3 = _4(u3, h3, p3, l3, s3[f3 + 4], 20, -405537848), l3 = _4(l3, u3, h3, p3, s3[f3 + 9], 5, 568446438), p3 = _4(p3, l3, u3, h3, s3[f3 + 14], 9, -1019803690), h3 = _4(h3, p3, l3, u3, s3[f3 + 3], 14, -187363961), u3 = _4(u3, h3, p3, l3, s3[f3 + 8], 20, 1163531501), l3 = _4(l3, u3, h3, p3, s3[f3 + 13], 5, -1444681467), p3 = _4(p3, l3, u3, h3, s3[f3 + 2], 9, -51403784), h3 = _4(h3, p3, l3, u3, s3[f3 + 7], 14, 1735328473), l3 = m3(l3, u3 = _4(u3, h3, p3, l3, s3[f3 + 12], 20, -1926607734), h3, p3, s3[f3 + 5], 4, -378558), p3 = m3(p3, l3, u3, h3, s3[f3 + 8], 11, -2022574463), h3 = m3(h3, p3, l3, u3, s3[f3 + 11], 16, 1839030562), u3 = m3(u3, h3, p3, l3, s3[f3 + 14], 23, -35309556), l3 = m3(l3, u3, h3, p3, s3[f3 + 1], 4, -1530992060), p3 = m3(p3, l3, u3, h3, s3[f3 + 4], 11, 1272893353), h3 = m3(h3, p3, l3, u3, s3[f3 + 7], 16, -155497632), u3 = m3(u3, h3, p3, l3, s3[f3 + 10], 23, -1094730640), l3 = m3(l3, u3, h3, p3, s3[f3 + 13], 4, 681279174), p3 = m3(p3, l3, u3, h3, s3[f3 + 0], 11, -358537222), h3 = m3(h3, p3, l3, u3, s3[f3 + 3], 16, -722521979), u3 = m3(u3, h3, p3, l3, s3[f3 + 6], 23, 76029189), l3 = m3(l3, u3, h3, p3, s3[f3 + 9], 4, -640364487), p3 = m3(p3, l3, u3, h3, s3[f3 + 12], 11, -421815835), h3 = m3(h3, p3, l3, u3, s3[f3 + 15], 16, 530742520), l3 = g3(l3, u3 = m3(u3, h3, p3, l3, s3[f3 + 2], 23, -995338651), h3, p3, s3[f3 + 0], 6, -198630844), p3 = g3(p3, l3, u3, h3, s3[f3 + 7], 10, 1126891415), h3 = g3(h3, p3, l3, u3, s3[f3 + 14], 15, -1416354905), u3 = g3(u3, h3, p3, l3, s3[f3 + 5], 21, -57434055), l3 = g3(l3, u3, h3, p3, s3[f3 + 12], 6, 1700485571), p3 = g3(p3, l3, u3, h3, s3[f3 + 3], 10, -1894986606), h3 = g3(h3, p3, l3, u3, s3[f3 + 10], 15, -1051523), u3 = g3(u3, h3, p3, l3, s3[f3 + 1], 21, -2054922799), l3 = g3(l3, u3, h3, p3, s3[f3 + 8], 6, 1873313359), p3 = g3(p3, l3, u3, h3, s3[f3 + 15], 10, -30611744), h3 = g3(h3, p3, l3, u3, s3[f3 + 6], 15, -1560198380), u3 = g3(u3, h3, p3, l3, s3[f3 + 13], 21, 1309151649), l3 = g3(l3, u3, h3, p3, s3[f3 + 4], 6, -145523070), p3 = g3(p3, l3, u3, h3, s3[f3 + 11], 10, -1120210379), h3 = g3(h3, p3, l3, u3, s3[f3 + 2], 15, 718787259), u3 = g3(u3, h3, p3, l3, s3[f3 + 9], 21, -343485551), l3 = l3 + v3 >>> 0, u3 = u3 + y3 >>> 0, h3 = h3 + b3 >>> 0, p3 = p3 + w3 >>> 0;
            }
            return e4.endian([l3, u3, h3, p3]);
          })._ff = function(t3, e5, i3, r5, o4, n4, a3) {
            var s3 = t3 + (e5 & i3 | ~e5 & r5) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._gg = function(t3, e5, i3, r5, o4, n4, a3) {
            var s3 = t3 + (e5 & r5 | i3 & ~r5) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._hh = function(t3, e5, i3, r5, o4, n4, a3) {
            var s3 = t3 + (e5 ^ i3 ^ r5) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._ii = function(t3, e5, i3, r5, o4, n4, a3) {
            var s3 = t3 + (i3 ^ (e5 | ~r5)) + (o4 >>> 0) + a3;
            return (s3 << n4 | s3 >>> 32 - n4) + e5;
          }, n3._blocksize = 16, n3._digestsize = 16, t2.exports = function(t3, i3) {
            if (null == t3)
              throw new Error("Illegal argument " + t3);
            var r5 = e4.wordsToBytes(n3(t3, i3));
            return i3 && i3.asBytes ? r5 : i3 && i3.asString ? o3.bytesToString(r5) : e4.bytesToHex(r5);
          };
        }), l2 = Math, h2 = (u2 = {}).lib = {}, p2 = h2.Base = { extend: function(t2) {
          A2.prototype = this;
          var e4 = new A2();
          return t2 && e4.mixIn(t2), e4.hasOwnProperty("init") || (e4.init = function() {
            e4.$super.init.apply(this, arguments);
          }), (e4.init.prototype = e4).$super = this, e4;
        }, create: function() {
          var t2 = this.extend();
          return t2.init.apply(t2, arguments), t2;
        }, init: function() {
        }, mixIn: function(t2) {
          for (var e4 in t2)
            t2.hasOwnProperty(e4) && (this[e4] = t2[e4]);
          t2.hasOwnProperty("toString") && (this.toString = t2.toString);
        }, clone: function() {
          return this.init.prototype.extend(this);
        } }, f2 = h2.WordArray = p2.extend({ init: function(t2, e4) {
          t2 = this.words = t2 || [], this.sigBytes = null != e4 ? e4 : 4 * t2.length;
        }, toString: function(t2) {
          return (t2 || _3).stringify(this);
        }, concat: function(t2) {
          var e4 = this.words, i2 = t2.words, r4 = this.sigBytes, o3 = t2.sigBytes;
          if (this.clamp(), r4 % 4)
            for (var n3 = 0; n3 < o3; n3++)
              e4[r4 + n3 >>> 2] |= (i2[n3 >>> 2] >>> 24 - n3 % 4 * 8 & 255) << 24 - (r4 + n3) % 4 * 8;
          else if (65535 < i2.length)
            for (n3 = 0; n3 < o3; n3 += 4)
              e4[r4 + n3 >>> 2] = i2[n3 >>> 2];
          else
            e4.push.apply(e4, i2);
          return this.sigBytes += o3, this;
        }, clamp: function() {
          var t2 = this.words, e4 = this.sigBytes;
          t2[e4 >>> 2] &= 4294967295 << 32 - e4 % 4 * 8, t2.length = l2.ceil(e4 / 4);
        }, clone: function() {
          var t2 = p2.clone.call(this);
          return t2.words = this.words.slice(0), t2;
        }, random: function(t2) {
          for (var e4 = [], i2 = 0; i2 < t2; i2 += 4)
            e4.push(4294967296 * l2.random() | 0);
          return new f2.init(e4, t2);
        } }), d2 = u2.enc = {}, _3 = d2.Hex = { stringify: function(t2) {
          for (var e4 = t2.words, i2 = t2.sigBytes, r4 = [], o3 = 0; o3 < i2; o3++) {
            var n3 = e4[o3 >>> 2] >>> 24 - o3 % 4 * 8 & 255;
            r4.push((n3 >>> 4).toString(16)), r4.push((15 & n3).toString(16));
          }
          return r4.join("");
        }, parse: function(t2) {
          for (var e4 = t2.length, i2 = [], r4 = 0; r4 < e4; r4 += 2)
            i2[r4 >>> 3] |= parseInt(t2.substr(r4, 2), 16) << 24 - r4 % 8 * 4;
          return new f2.init(i2, e4 / 2);
        } }, m2 = d2.Latin1 = { stringify: function(t2) {
          for (var e4 = t2.words, i2 = t2.sigBytes, r4 = [], o3 = 0; o3 < i2; o3++)
            r4.push(String.fromCharCode(e4[o3 >>> 2] >>> 24 - o3 % 4 * 8 & 255));
          return r4.join("");
        }, parse: function(t2) {
          for (var e4 = t2.length, i2 = [], r4 = 0; r4 < e4; r4++)
            i2[r4 >>> 2] |= (255 & t2.charCodeAt(r4)) << 24 - r4 % 4 * 8;
          return new f2.init(i2, e4);
        } }, g2 = d2.Utf8 = { stringify: function(t2) {
          try {
            return decodeURIComponent(escape(m2.stringify(t2)));
          } catch (t3) {
            throw new Error("Malformed UTF-8 data");
          }
        }, parse: function(t2) {
          return m2.parse(unescape(encodeURIComponent(t2)));
        } }, v2 = h2.BufferedBlockAlgorithm = p2.extend({ reset: function() {
          this._data = new f2.init(), this._nDataBytes = 0;
        }, _append: function(t2) {
          "string" == typeof t2 && (t2 = g2.parse(t2)), this._data.concat(t2), this._nDataBytes += t2.sigBytes;
        }, _process: function(t2) {
          var e4 = this._data, i2 = e4.words, r4 = e4.sigBytes, o3 = this.blockSize, n3 = r4 / (4 * o3), a3 = (n3 = t2 ? l2.ceil(n3) : l2.max((0 | n3) - this._minBufferSize, 0)) * o3, s3 = l2.min(4 * a3, r4);
          if (a3) {
            for (var c3 = 0; c3 < a3; c3 += o3)
              this._doProcessBlock(i2, c3);
            var u3 = i2.splice(0, a3);
            e4.sigBytes -= s3;
          }
          return new f2.init(u3, s3);
        }, clone: function() {
          var t2 = p2.clone.call(this);
          return t2._data = this._data.clone(), t2;
        }, _minBufferSize: 0 }), h2.Hasher = v2.extend({ cfg: p2.extend(), init: function(t2) {
          this.cfg = this.cfg.extend(t2), this.reset();
        }, reset: function() {
          v2.reset.call(this), this._doReset();
        }, update: function(t2) {
          return this._append(t2), this._process(), this;
        }, finalize: function(t2) {
          return t2 && this._append(t2), this._doFinalize();
        }, blockSize: 16, _createHelper: function(t2) {
          return function(e4, i2) {
            return new t2.init(i2).finalize(e4);
          };
        }, _createHmacHelper: function(t2) {
          return function(e4, i2) {
            return new y2.HMAC.init(t2, i2).finalize(e4);
          };
        } }), y2 = u2.algo = {}, Array.Clear = function(t2, e4, i2) {
          for (var r4 in t2)
            t2[r4] = null;
        }, Array.Copy = function(t2, e4, i2, r4, o3) {
          for (var n3 = t2.slice(e4, e4 + o3), a3 = 0; a3 < n3.length; a3++)
            i2[r4] = n3[a3], r4++;
        }, window.epgis_Int32 = { minValue: -parseInt("10000000000000000000000000000000", 2), maxValue: parseInt("1111111111111111111111111111111", 2), parse: function(t2) {
          if (t2 < this.minValue) {
            for (var e4 = (o3 = new Number(-t2).toString(2)).substr(o3.length - 31, 31), i2 = "", r4 = 0; r4 < e4.length; r4++)
              i2 += "0" == e4.substr(r4, 1) ? "1" : "0";
            return parseInt(i2, 2) + 1;
          }
          if (t2 > this.maxValue) {
            var o3;
            for (e4 = (o3 = Number(t2).toString(2)).substr(o3.length - 31, 31), i2 = "", r4 = 0; r4 < e4.length; r4++)
              i2 += "0" == e4.substr(r4, 1) ? "1" : "0";
            return -(parseInt(i2, 2) + 1);
          }
          return t2;
        }, parseByte: function(t2) {
          if (t2 < 0) {
            for (var e4 = (o3 = new Number(-t2).toString(2)).substr(o3.length - 8, 8), i2 = "", r4 = 0; r4 < e4.length; r4++)
              i2 += "0" == e4.substr(r4, 1) ? "1" : "0";
            return parseInt(i2, 2) + 1;
          }
          if (255 < t2) {
            var o3 = Number(t2).toString(2);
            return parseInt(o3.substr(o3.length - 8, 8), 2);
          }
          return t2;
        } }, b2 = "Microsoft Internet Explorer" == navigator.appName ? (k2.prototype.am = function(t2, e4, i2, r4, o3, n3) {
          for (var a3 = 32767 & e4, s3 = e4 >> 15; 0 <= --n3; ) {
            var c3 = 32767 & this[t2], l3 = this[t2++] >> 15, u3 = s3 * c3 + l3 * a3;
            o3 = ((c3 = a3 * c3 + ((32767 & u3) << 15) + i2[r4] + (1073741823 & o3)) >>> 30) + (u3 >>> 15) + s3 * l3 + (o3 >>> 30), i2[r4++] = 1073741823 & c3;
          }
          return o3;
        }, 30) : "Netscape" != navigator.appName ? (k2.prototype.am = function(t2, e4, i2, r4, o3, n3) {
          for (; 0 <= --n3; ) {
            var a3 = e4 * this[t2++] + i2[r4] + o3;
            o3 = Math.floor(a3 / 67108864), i2[r4++] = 67108863 & a3;
          }
          return o3;
        }, 26) : (k2.prototype.am = function(t2, e4, i2, r4, o3, n3) {
          for (var a3 = 16383 & e4, s3 = e4 >> 14; 0 <= --n3; ) {
            var c3 = 16383 & this[t2], l3 = this[t2++] >> 14, u3 = s3 * c3 + l3 * a3;
            o3 = ((c3 = a3 * c3 + ((16383 & u3) << 14) + i2[r4] + o3) >> 28) + (u3 >> 14) + s3 * l3, i2[r4++] = 268435455 & c3;
          }
          return o3;
        }, 28), k2.prototype.DB = b2, k2.prototype.DM = (1 << b2) - 1, k2.prototype.DV = 1 << b2, k2.prototype.FV = Math.pow(2, 52), k2.prototype.F1 = 52 - b2, k2.prototype.F2 = 2 * b2 - 52;
        for (var L2 = "0123456789abcdefghijklmnopqrstuvwxyz", R2 = new Array(), O2 = "0".charCodeAt(0), F2 = 0; F2 <= 9; ++F2)
          R2[O2++] = F2;
        for (O2 = "a".charCodeAt(0), F2 = 10; F2 < 36; ++F2)
          R2[O2++] = F2;
        for (O2 = "A".charCodeAt(0), F2 = 10; F2 < 36; ++F2)
          R2[O2++] = F2;
        function U2(t2, e4) {
          return t2 & e4;
        }
        function N2(t2, e4) {
          return t2 | e4;
        }
        function j2(t2, e4) {
          return t2 ^ e4;
        }
        function V2(t2, e4) {
          return t2 & ~e4;
        }
        function q2() {
        }
        function Z2(t2) {
          return t2;
        }
        function G2(t2) {
          this.r2 = I2(), this.q3 = I2(), k2.ONE.dlShiftTo(2 * t2.t, this.r2), this.mu = this.r2.divide(t2), this.m = t2;
        }
        D2.prototype.convert = function(t2) {
          return t2.s < 0 || 0 <= t2.compareTo(this.m) ? t2.mod(this.m) : t2;
        }, D2.prototype.revert = function(t2) {
          return t2;
        }, D2.prototype.reduce = function(t2) {
          t2.divRemTo(this.m, null, t2);
        }, D2.prototype.mulTo = function(t2, e4, i2) {
          t2.multiplyTo(e4, i2), this.reduce(i2);
        }, D2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4), this.reduce(e4);
        }, M2.prototype.convert = function(t2) {
          var e4 = I2();
          return t2.abs().dlShiftTo(this.m.t, e4), e4.divRemTo(this.m, null, e4), t2.s < 0 && 0 < e4.compareTo(k2.ZERO) && this.m.subTo(e4, e4), e4;
        }, M2.prototype.revert = function(t2) {
          var e4 = I2();
          return t2.copyTo(e4), this.reduce(e4), e4;
        }, M2.prototype.reduce = function(t2) {
          for (; t2.t <= this.mt2; )
            t2[t2.t++] = 0;
          for (var e4 = 0; e4 < this.m.t; ++e4) {
            var i2 = 32767 & t2[e4], r4 = i2 * this.mpl + ((i2 * this.mph + (t2[e4] >> 15) * this.mpl & this.um) << 15) & t2.DM;
            for (t2[i2 = e4 + this.m.t] += this.m.am(0, r4, t2, e4, 0, this.m.t); t2[i2] >= t2.DV; )
              t2[i2] -= t2.DV, t2[++i2]++;
          }
          t2.clamp(), t2.drShiftTo(this.m.t, t2), 0 <= t2.compareTo(this.m) && t2.subTo(this.m, t2);
        }, M2.prototype.mulTo = function(t2, e4, i2) {
          t2.multiplyTo(e4, i2), this.reduce(i2);
        }, M2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4), this.reduce(e4);
        }, k2.prototype.copyTo = function(t2) {
          for (var e4 = this.t - 1; 0 <= e4; --e4)
            t2[e4] = this[e4];
          t2.t = this.t, t2.s = this.s;
        }, k2.prototype.fromInt = function(t2) {
          this.t = 1, this.s = t2 < 0 ? -1 : 0, 0 < t2 ? this[0] = t2 : t2 < -1 ? this[0] = t2 + this.DV : this.t = 0;
        }, k2.prototype.fromString = function(t2, e4) {
          var i2;
          if (16 == e4)
            i2 = 4;
          else if (8 == e4)
            i2 = 3;
          else if (256 == e4)
            i2 = 8;
          else if (2 == e4)
            i2 = 1;
          else if (32 == e4)
            i2 = 5;
          else {
            if (4 != e4)
              return void this.fromRadix(t2, e4);
            i2 = 2;
          }
          this.t = 0, this.s = 0;
          for (var r4 = t2.length, o3 = false, n3 = 0; 0 <= --r4; ) {
            var a3 = 8 == i2 ? 255 & t2[r4] : P2(t2, r4);
            a3 < 0 ? "-" == t2.charAt(r4) && (o3 = true) : (o3 = false, 0 == n3 ? this[this.t++] = a3 : n3 + i2 > this.DB ? (this[this.t - 1] |= (a3 & (1 << this.DB - n3) - 1) << n3, this[this.t++] = a3 >> this.DB - n3) : this[this.t - 1] |= a3 << n3, (n3 += i2) >= this.DB && (n3 -= this.DB));
          }
          8 == i2 && 0 != (128 & t2[0]) && (this.s = -1, 0 < n3 && (this[this.t - 1] |= (1 << this.DB - n3) - 1 << n3)), this.clamp(), o3 && k2.ZERO.subTo(this, this);
        }, k2.prototype.clamp = function() {
          for (var t2 = this.s & this.DM; 0 < this.t && this[this.t - 1] == t2; )
            --this.t;
        }, k2.prototype.dlShiftTo = function(t2, e4) {
          for (var i2 = this.t - 1; 0 <= i2; --i2)
            e4[i2 + t2] = this[i2];
          for (i2 = t2 - 1; 0 <= i2; --i2)
            e4[i2] = 0;
          e4.t = this.t + t2, e4.s = this.s;
        }, k2.prototype.drShiftTo = function(t2, e4) {
          for (var i2 = t2; i2 < this.t; ++i2)
            e4[i2 - t2] = this[i2];
          e4.t = Math.max(this.t - t2, 0), e4.s = this.s;
        }, k2.prototype.lShiftTo = function(t2, e4) {
          for (var i2 = t2 % this.DB, r4 = this.DB - i2, o3 = (1 << r4) - 1, n3 = Math.floor(t2 / this.DB), a3 = this.s << i2 & this.DM, s3 = this.t - 1; 0 <= s3; --s3)
            e4[s3 + n3 + 1] = this[s3] >> r4 | a3, a3 = (this[s3] & o3) << i2;
          for (s3 = n3 - 1; 0 <= s3; --s3)
            e4[s3] = 0;
          e4[n3] = a3, e4.t = this.t + n3 + 1, e4.s = this.s, e4.clamp();
        }, k2.prototype.rShiftTo = function(t2, e4) {
          e4.s = this.s;
          var i2 = Math.floor(t2 / this.DB);
          if (i2 >= this.t)
            e4.t = 0;
          else {
            var r4 = t2 % this.DB, o3 = this.DB - r4, n3 = (1 << r4) - 1;
            e4[0] = this[i2] >> r4;
            for (var a3 = i2 + 1; a3 < this.t; ++a3)
              e4[a3 - i2 - 1] |= (this[a3] & n3) << o3, e4[a3 - i2] = this[a3] >> r4;
            0 < r4 && (e4[this.t - i2 - 1] |= (this.s & n3) << o3), e4.t = this.t - i2, e4.clamp();
          }
        }, k2.prototype.subTo = function(t2, e4) {
          for (var i2 = 0, r4 = 0, o3 = Math.min(t2.t, this.t); i2 < o3; )
            r4 += this[i2] - t2[i2], e4[i2++] = r4 & this.DM, r4 >>= this.DB;
          if (t2.t < this.t) {
            for (r4 -= t2.s; i2 < this.t; )
              r4 += this[i2], e4[i2++] = r4 & this.DM, r4 >>= this.DB;
            r4 += this.s;
          } else {
            for (r4 += this.s; i2 < t2.t; )
              r4 -= t2[i2], e4[i2++] = r4 & this.DM, r4 >>= this.DB;
            r4 -= t2.s;
          }
          e4.s = r4 < 0 ? -1 : 0, r4 < -1 ? e4[i2++] = this.DV + r4 : 0 < r4 && (e4[i2++] = r4), e4.t = i2, e4.clamp();
        }, k2.prototype.multiplyTo = function(t2, e4) {
          var i2 = this.abs(), r4 = t2.abs(), o3 = i2.t;
          for (e4.t = o3 + r4.t; 0 <= --o3; )
            e4[o3] = 0;
          for (o3 = 0; o3 < r4.t; ++o3)
            e4[o3 + i2.t] = i2.am(0, r4[o3], e4, o3, 0, i2.t);
          e4.s = 0, e4.clamp(), this.s != t2.s && k2.ZERO.subTo(e4, e4);
        }, k2.prototype.squareTo = function(t2) {
          for (var e4 = this.abs(), i2 = t2.t = 2 * e4.t; 0 <= --i2; )
            t2[i2] = 0;
          for (i2 = 0; i2 < e4.t - 1; ++i2) {
            var r4 = e4.am(i2, e4[i2], t2, 2 * i2, 0, 1);
            (t2[i2 + e4.t] += e4.am(i2 + 1, 2 * e4[i2], t2, 2 * i2 + 1, r4, e4.t - i2 - 1)) >= e4.DV && (t2[i2 + e4.t] -= e4.DV, t2[i2 + e4.t + 1] = 1);
          }
          0 < t2.t && (t2[t2.t - 1] += e4.am(i2, e4[i2], t2, 2 * i2, 0, 1)), t2.s = 0, t2.clamp();
        }, k2.prototype.divRemTo = function(t2, e4, i2) {
          var r4 = t2.abs();
          if (!(r4.t <= 0)) {
            var o3 = this.abs();
            if (o3.t < r4.t)
              return null != e4 && e4.fromInt(0), void (null != i2 && this.copyTo(i2));
            null == i2 && (i2 = I2());
            var n3 = I2(), a3 = this.s, s3 = t2.s, c3 = this.DB - z2(r4[r4.t - 1]);
            0 < c3 ? (r4.lShiftTo(c3, n3), o3.lShiftTo(c3, i2)) : (r4.copyTo(n3), o3.copyTo(i2));
            var l3 = n3.t, u3 = n3[l3 - 1];
            if (0 != u3) {
              var h3 = u3 * (1 << this.F1) + (1 < l3 ? n3[l3 - 2] >> this.F2 : 0), p3 = this.FV / h3, f3 = (1 << this.F1) / h3, d3 = 1 << this.F2, _4 = i2.t, m3 = _4 - l3, g3 = null == e4 ? I2() : e4;
              for (n3.dlShiftTo(m3, g3), 0 <= i2.compareTo(g3) && (i2[i2.t++] = 1, i2.subTo(g3, i2)), k2.ONE.dlShiftTo(l3, g3), g3.subTo(n3, n3); n3.t < l3; )
                n3[n3.t++] = 0;
              for (; 0 <= --m3; ) {
                var v3 = i2[--_4] == u3 ? this.DM : Math.floor(i2[_4] * p3 + (i2[_4 - 1] + d3) * f3);
                if ((i2[_4] += n3.am(0, v3, i2, m3, 0, l3)) < v3)
                  for (n3.dlShiftTo(m3, g3), i2.subTo(g3, i2); i2[_4] < --v3; )
                    i2.subTo(g3, i2);
              }
              null != e4 && (i2.drShiftTo(l3, e4), a3 != s3 && k2.ZERO.subTo(e4, e4)), i2.t = l3, i2.clamp(), 0 < c3 && i2.rShiftTo(c3, i2), a3 < 0 && k2.ZERO.subTo(i2, i2);
            }
          }
        }, k2.prototype.invDigit = function() {
          if (this.t < 1)
            return 0;
          var t2 = this[0];
          if (0 == (1 & t2))
            return 0;
          var e4 = 3 & t2;
          return 0 < (e4 = (e4 = (e4 = (e4 = e4 * (2 - (15 & t2) * e4) & 15) * (2 - (255 & t2) * e4) & 255) * (2 - ((65535 & t2) * e4 & 65535)) & 65535) * (2 - t2 * e4 % this.DV) % this.DV) ? this.DV - e4 : -e4;
        }, k2.prototype.isEven = function() {
          return 0 == (0 < this.t ? 1 & this[0] : this.s);
        }, k2.prototype.exp = function(t2, e4) {
          if (4294967295 < t2 || t2 < 1)
            return k2.ONE;
          var i2, r4 = I2(), o3 = I2(), n3 = e4.convert(this), a3 = z2(t2) - 1;
          for (n3.copyTo(r4); 0 <= --a3; )
            e4.sqrTo(r4, o3), 0 < (t2 & 1 << a3) ? e4.mulTo(o3, n3, r4) : (i2 = r4, r4 = o3, o3 = i2);
          return e4.revert(r4);
        }, k2.prototype.toString = function(t2) {
          if (this.s < 0)
            return "-" + this.negate().toString(t2);
          var e4;
          if (16 == t2)
            e4 = 4;
          else if (8 == t2)
            e4 = 3;
          else if (2 == t2)
            e4 = 1;
          else if (32 == t2)
            e4 = 5;
          else {
            if (4 != t2)
              return this.toRadix(t2);
            e4 = 2;
          }
          var i2, r4 = (1 << e4) - 1, o3 = false, n3 = "", a3 = this.t, s3 = this.DB - a3 * this.DB % e4;
          if (0 < a3--)
            for (s3 < this.DB && 0 < (i2 = this[a3] >> s3) && (o3 = true, n3 = B2(i2)); 0 <= a3; )
              s3 < e4 ? (i2 = (this[a3] & (1 << s3) - 1) << e4 - s3, i2 |= this[--a3] >> (s3 += this.DB - e4)) : (i2 = this[a3] >> (s3 -= e4) & r4, s3 <= 0 && (s3 += this.DB, --a3)), 0 < i2 && (o3 = true), o3 && (n3 += B2(i2));
          return o3 ? n3 : "0";
        }, k2.prototype.negate = function() {
          var t2 = I2();
          return k2.ZERO.subTo(this, t2), t2;
        }, k2.prototype.abs = function() {
          return this.s < 0 ? this.negate() : this;
        }, k2.prototype.compareTo = function(t2) {
          var e4 = this.s - t2.s;
          if (0 != e4)
            return e4;
          var i2 = this.t;
          if (0 != (e4 = i2 - t2.t))
            return this.s < 0 ? -e4 : e4;
          for (; 0 <= --i2; )
            if (0 != (e4 = this[i2] - t2[i2]))
              return e4;
          return 0;
        }, k2.prototype.bitLength = function() {
          return this.t <= 0 ? 0 : this.DB * (this.t - 1) + z2(this[this.t - 1] ^ this.s & this.DM);
        }, k2.prototype.mod = function(t2) {
          var e4 = I2();
          return this.abs().divRemTo(t2, null, e4), this.s < 0 && 0 < e4.compareTo(k2.ZERO) && t2.subTo(e4, e4), e4;
        }, k2.prototype.modPowInt = function(t2, e4) {
          var i2 = new (t2 < 256 || e4.isEven() ? D2 : M2)(e4);
          return this.exp(t2, i2);
        }, k2.ZERO = C2(0), k2.ONE = C2(1), q2.prototype.convert = Z2, q2.prototype.revert = Z2, q2.prototype.mulTo = function(t2, e4, i2) {
          t2.multiplyTo(e4, i2);
        }, q2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4);
        }, G2.prototype.convert = function(t2) {
          if (t2.s < 0 || t2.t > 2 * this.m.t)
            return t2.mod(this.m);
          if (t2.compareTo(this.m) < 0)
            return t2;
          var e4 = I2();
          return t2.copyTo(e4), this.reduce(e4), e4;
        }, G2.prototype.revert = function(t2) {
          return t2;
        }, G2.prototype.reduce = function(t2) {
          for (t2.drShiftTo(this.m.t - 1, this.r2), t2.t > this.m.t + 1 && (t2.t = this.m.t + 1, t2.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); t2.compareTo(this.r2) < 0; )
            t2.dAddOffset(1, this.m.t + 1);
          for (t2.subTo(this.r2, t2); 0 <= t2.compareTo(this.m); )
            t2.subTo(this.m, t2);
        }, G2.prototype.mulTo = function(t2, e4, i2) {
          t2.multiplyTo(e4, i2), this.reduce(i2);
        }, G2.prototype.sqrTo = function(t2, e4) {
          t2.squareTo(e4), this.reduce(e4);
        };
        var H2 = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997], W2 = (1 << 26) / H2[H2.length - 1];
        k2.prototype.chunkSize = function(t2) {
          return Math.floor(Math.LN2 * this.DB / Math.log(t2));
        }, k2.prototype.toRadix = function(t2) {
          if (null == t2 && (t2 = 10), 0 == this.signum() || t2 < 2 || 36 < t2)
            return "0";
          var e4 = this.chunkSize(t2), i2 = Math.pow(t2, e4), r4 = C2(i2), o3 = I2(), n3 = I2(), a3 = "";
          for (this.divRemTo(r4, o3, n3); 0 < o3.signum(); )
            a3 = (i2 + n3.intValue()).toString(t2).substr(1) + a3, o3.divRemTo(r4, o3, n3);
          return n3.intValue().toString(t2) + a3;
        }, k2.prototype.fromRadix = function(t2, e4) {
          this.fromInt(0), null == e4 && (e4 = 10);
          for (var i2 = this.chunkSize(e4), r4 = Math.pow(e4, i2), o3 = false, n3 = 0, a3 = 0, s3 = 0; s3 < t2.length; ++s3) {
            var c3 = P2(t2, s3);
            c3 < 0 ? "-" == t2.charAt(s3) && 0 == this.signum() && (o3 = true) : (a3 = e4 * a3 + c3, ++n3 >= i2 && (this.dMultiply(r4), this.dAddOffset(a3, 0), a3 = n3 = 0));
          }
          0 < n3 && (this.dMultiply(Math.pow(e4, n3)), this.dAddOffset(a3, 0)), o3 && k2.ZERO.subTo(this, this);
        }, k2.prototype.fromNumber = function(t2, e4, i2) {
          if ("number" == typeof e4)
            if (t2 < 2)
              this.fromInt(1);
            else
              for (this.fromNumber(t2, i2), this.testBit(t2 - 1) || this.bitwiseTo(k2.ONE.shiftLeft(t2 - 1), N2, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(e4); )
                this.dAddOffset(2, 0), this.bitLength() > t2 && this.subTo(k2.ONE.shiftLeft(t2 - 1), this);
          else {
            var r4 = new Array(), o3 = 7 & t2;
            r4.length = 1 + (t2 >> 3), e4.nextBytes(r4), 0 < o3 ? r4[0] &= (1 << o3) - 1 : r4[0] = 0, this.fromString(r4, 256);
          }
        }, k2.prototype.bitwiseTo = function(t2, e4, i2) {
          for (var r4, o3 = Math.min(t2.t, this.t), n3 = 0; n3 < o3; ++n3)
            i2[n3] = e4(this[n3], t2[n3]);
          if (t2.t < this.t) {
            for (r4 = t2.s & this.DM, n3 = o3; n3 < this.t; ++n3)
              i2[n3] = e4(this[n3], r4);
            i2.t = this.t;
          } else {
            for (r4 = this.s & this.DM, n3 = o3; n3 < t2.t; ++n3)
              i2[n3] = e4(r4, t2[n3]);
            i2.t = t2.t;
          }
          i2.s = e4(this.s, t2.s), i2.clamp();
        }, k2.prototype.changeBit = function(t2, e4) {
          var i2 = k2.ONE.shiftLeft(t2);
          return this.bitwiseTo(i2, e4, i2), i2;
        }, k2.prototype.addTo = function(t2, e4) {
          for (var i2 = 0, r4 = 0, o3 = Math.min(t2.t, this.t); i2 < o3; )
            r4 += this[i2] + t2[i2], e4[i2++] = r4 & this.DM, r4 >>= this.DB;
          if (t2.t < this.t) {
            for (r4 += t2.s; i2 < this.t; )
              r4 += this[i2], e4[i2++] = r4 & this.DM, r4 >>= this.DB;
            r4 += this.s;
          } else {
            for (r4 += this.s; i2 < t2.t; )
              r4 += t2[i2], e4[i2++] = r4 & this.DM, r4 >>= this.DB;
            r4 += t2.s;
          }
          e4.s = r4 < 0 ? -1 : 0, 0 < r4 ? e4[i2++] = r4 : r4 < -1 && (e4[i2++] = this.DV + r4), e4.t = i2, e4.clamp();
        }, k2.prototype.dMultiply = function(t2) {
          this[this.t] = this.am(0, t2 - 1, this, 0, 0, this.t), ++this.t, this.clamp();
        }, k2.prototype.dAddOffset = function(t2, e4) {
          if (0 != t2) {
            for (; this.t <= e4; )
              this[this.t++] = 0;
            for (this[e4] += t2; this[e4] >= this.DV; )
              this[e4] -= this.DV, ++e4 >= this.t && (this[this.t++] = 0), ++this[e4];
          }
        }, k2.prototype.multiplyLowerTo = function(t2, e4, i2) {
          var r4, o3 = Math.min(this.t + t2.t, e4);
          for (i2.s = 0, i2.t = o3; 0 < o3; )
            i2[--o3] = 0;
          for (r4 = i2.t - this.t; o3 < r4; ++o3)
            i2[o3 + this.t] = this.am(0, t2[o3], i2, o3, 0, this.t);
          for (r4 = Math.min(t2.t, e4); o3 < r4; ++o3)
            this.am(0, t2[o3], i2, o3, 0, e4 - o3);
          i2.clamp();
        }, k2.prototype.multiplyUpperTo = function(t2, e4, i2) {
          --e4;
          var r4 = i2.t = this.t + t2.t - e4;
          for (i2.s = 0; 0 <= --r4; )
            i2[r4] = 0;
          for (r4 = Math.max(e4 - this.t, 0); r4 < t2.t; ++r4)
            i2[this.t + r4 - e4] = this.am(e4 - r4, t2[r4], i2, 0, 0, this.t + r4 - e4);
          i2.clamp(), i2.drShiftTo(1, i2);
        }, k2.prototype.modInt = function(t2) {
          if (t2 <= 0)
            return 0;
          var e4 = this.DV % t2, i2 = this.s < 0 ? t2 - 1 : 0;
          if (0 < this.t)
            if (0 == e4)
              i2 = this[0] % t2;
            else
              for (var r4 = this.t - 1; 0 <= r4; --r4)
                i2 = (e4 * i2 + this[r4]) % t2;
          return i2;
        }, k2.prototype.millerRabin = function(t2) {
          var e4 = this.subtract(k2.ONE), i2 = e4.getLowestSetBit();
          if (i2 <= 0)
            return false;
          var r4 = e4.shiftRight(i2);
          H2.length < (t2 = t2 + 1 >> 1) && (t2 = H2.length);
          for (var o3 = I2(), n3 = 0; n3 < t2; ++n3) {
            o3.fromInt(H2[Math.floor(Math.random() * H2.length)]);
            var a3 = o3.modPow(r4, this);
            if (0 != a3.compareTo(k2.ONE) && 0 != a3.compareTo(e4)) {
              for (var s3 = 1; s3++ < i2 && 0 != a3.compareTo(e4); )
                if (0 == (a3 = a3.modPowInt(2, this)).compareTo(k2.ONE))
                  return false;
              if (0 != a3.compareTo(e4))
                return false;
            }
          }
          return true;
        }, k2.prototype.clone = function() {
          var t2 = I2();
          return this.copyTo(t2), t2;
        }, k2.prototype.intValue = function() {
          if (this.s < 0) {
            if (1 == this.t)
              return this[0] - this.DV;
            if (0 == this.t)
              return -1;
          } else {
            if (1 == this.t)
              return this[0];
            if (0 == this.t)
              return 0;
          }
          return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];
        }, k2.prototype.byteValue = function() {
          return 0 == this.t ? this.s : this[0] << 24 >> 24;
        }, k2.prototype.shortValue = function() {
          return 0 == this.t ? this.s : this[0] << 16 >> 16;
        }, k2.prototype.signum = function() {
          return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1;
        }, k2.prototype.toByteArray = function() {
          var t2 = this.t, e4 = new Array();
          e4[0] = this.s;
          var i2, r4 = this.DB - t2 * this.DB % 8, o3 = 0;
          if (0 < t2--)
            for (r4 < this.DB && (i2 = this[t2] >> r4) != (this.s & this.DM) >> r4 && (e4[o3++] = i2 | this.s << this.DB - r4); 0 <= t2; )
              r4 < 8 ? (i2 = (this[t2] & (1 << r4) - 1) << 8 - r4, i2 |= this[--t2] >> (r4 += this.DB - 8)) : (i2 = this[t2] >> (r4 -= 8) & 255, r4 <= 0 && (r4 += this.DB, --t2)), 0 != (128 & i2) && (i2 |= -256), 0 == o3 && (128 & this.s) != (128 & i2) && ++o3, (0 < o3 || i2 != this.s) && (e4[o3++] = i2);
          return e4;
        }, k2.prototype.equals = function(t2) {
          return 0 == this.compareTo(t2);
        }, k2.prototype.min = function(t2) {
          return this.compareTo(t2) < 0 ? this : t2;
        }, k2.prototype.max = function(t2) {
          return 0 < this.compareTo(t2) ? this : t2;
        }, k2.prototype.and = function(t2) {
          var e4 = I2();
          return this.bitwiseTo(t2, U2, e4), e4;
        }, k2.prototype.or = function(t2) {
          var e4 = I2();
          return this.bitwiseTo(t2, N2, e4), e4;
        }, k2.prototype.xor = function(t2) {
          var e4 = I2();
          return this.bitwiseTo(t2, j2, e4), e4;
        }, k2.prototype.andNot = function(t2) {
          var e4 = I2();
          return this.bitwiseTo(t2, V2, e4), e4;
        }, k2.prototype.not = function() {
          for (var t2 = I2(), e4 = 0; e4 < this.t; ++e4)
            t2[e4] = this.DM & ~this[e4];
          return t2.t = this.t, t2.s = ~this.s, t2;
        }, k2.prototype.shiftLeft = function(t2) {
          var e4 = I2();
          return t2 < 0 ? this.rShiftTo(-t2, e4) : this.lShiftTo(t2, e4), e4;
        }, k2.prototype.shiftRight = function(t2) {
          var e4 = I2();
          return t2 < 0 ? this.lShiftTo(-t2, e4) : this.rShiftTo(t2, e4), e4;
        }, k2.prototype.getLowestSetBit = function() {
          for (var t2 = 0; t2 < this.t; ++t2)
            if (0 != this[t2])
              return t2 * this.DB + function(t3) {
                if (0 == t3)
                  return -1;
                var e4 = 0;
                return 0 == (65535 & t3) && (t3 >>= 16, e4 += 16), 0 == (255 & t3) && (t3 >>= 8, e4 += 8), 0 == (15 & t3) && (t3 >>= 4, e4 += 4), 0 == (3 & t3) && (t3 >>= 2, e4 += 2), 0 == (1 & t3) && ++e4, e4;
              }(this[t2]);
          return this.s < 0 ? this.t * this.DB : -1;
        }, k2.prototype.bitCount = function() {
          for (var t2 = 0, e4 = this.s & this.DM, i2 = 0; i2 < this.t; ++i2)
            t2 += function(t3) {
              for (var e5 = 0; 0 != t3; )
                t3 &= t3 - 1, ++e5;
              return e5;
            }(this[i2] ^ e4);
          return t2;
        }, k2.prototype.testBit = function(t2) {
          var e4 = Math.floor(t2 / this.DB);
          return e4 >= this.t ? 0 != this.s : 0 != (this[e4] & 1 << t2 % this.DB);
        }, k2.prototype.setBit = function(t2) {
          return this.changeBit(t2, N2);
        }, k2.prototype.clearBit = function(t2) {
          return this.changeBit(t2, V2);
        }, k2.prototype.flipBit = function(t2) {
          return this.changeBit(t2, j2);
        }, k2.prototype.add = function(t2) {
          var e4 = I2();
          return this.addTo(t2, e4), e4;
        }, k2.prototype.subtract = function(t2) {
          var e4 = I2();
          return this.subTo(t2, e4), e4;
        }, k2.prototype.multiply = function(t2) {
          var e4 = I2();
          return this.multiplyTo(t2, e4), e4;
        }, k2.prototype.divide = function(t2) {
          var e4 = I2();
          return this.divRemTo(t2, e4, null), e4;
        }, k2.prototype.remainder = function(t2) {
          var e4 = I2();
          return this.divRemTo(t2, null, e4), e4;
        }, k2.prototype.divideAndRemainder = function(t2) {
          var e4 = I2(), i2 = I2();
          return this.divRemTo(t2, e4, i2), new Array(e4, i2);
        }, k2.prototype.modPow = function(t2, e4) {
          var i2, r4, o3 = t2.bitLength(), n3 = C2(1);
          if (o3 <= 0)
            return n3;
          i2 = o3 < 18 ? 1 : o3 < 48 ? 3 : o3 < 144 ? 4 : o3 < 768 ? 5 : 6, r4 = new (o3 < 8 ? D2 : e4.isEven() ? G2 : M2)(e4);
          var a3 = new Array(), s3 = 3, c3 = i2 - 1, l3 = (1 << i2) - 1;
          if (a3[1] = r4.convert(this), 1 < i2) {
            var u3 = I2();
            for (r4.sqrTo(a3[1], u3); s3 <= l3; )
              a3[s3] = I2(), r4.mulTo(u3, a3[s3 - 2], a3[s3]), s3 += 2;
          }
          var h3, p3, f3 = t2.t - 1, d3 = true, _4 = I2();
          for (o3 = z2(t2[f3]) - 1; 0 <= f3; ) {
            for (c3 <= o3 ? h3 = t2[f3] >> o3 - c3 & l3 : (h3 = (t2[f3] & (1 << o3 + 1) - 1) << c3 - o3, 0 < f3 && (h3 |= t2[f3 - 1] >> this.DB + o3 - c3)), s3 = i2; 0 == (1 & h3); )
              h3 >>= 1, --s3;
            if ((o3 -= s3) < 0 && (o3 += this.DB, --f3), d3)
              a3[h3].copyTo(n3), d3 = false;
            else {
              for (; 1 < s3; )
                r4.sqrTo(n3, _4), r4.sqrTo(_4, n3), s3 -= 2;
              0 < s3 ? r4.sqrTo(n3, _4) : (p3 = n3, n3 = _4, _4 = p3), r4.mulTo(_4, a3[h3], n3);
            }
            for (; 0 <= f3 && 0 == (t2[f3] & 1 << o3); )
              r4.sqrTo(n3, _4), p3 = n3, n3 = _4, _4 = p3, --o3 < 0 && (o3 = this.DB - 1, --f3);
          }
          return r4.revert(n3);
        }, k2.prototype.modInverse = function(t2) {
          var e4 = t2.isEven();
          if (this.isEven() && e4 || 0 == t2.signum())
            return k2.ZERO;
          for (var i2 = t2.clone(), r4 = this.clone(), o3 = C2(1), n3 = C2(0), a3 = C2(0), s3 = C2(1); 0 != i2.signum(); ) {
            for (; i2.isEven(); )
              i2.rShiftTo(1, i2), e4 ? (o3.isEven() && n3.isEven() || (o3.addTo(this, o3), n3.subTo(t2, n3)), o3.rShiftTo(1, o3)) : n3.isEven() || n3.subTo(t2, n3), n3.rShiftTo(1, n3);
            for (; r4.isEven(); )
              r4.rShiftTo(1, r4), e4 ? (a3.isEven() && s3.isEven() || (a3.addTo(this, a3), s3.subTo(t2, s3)), a3.rShiftTo(1, a3)) : s3.isEven() || s3.subTo(t2, s3), s3.rShiftTo(1, s3);
            0 <= i2.compareTo(r4) ? (i2.subTo(r4, i2), e4 && o3.subTo(a3, o3), n3.subTo(s3, n3)) : (r4.subTo(i2, r4), e4 && a3.subTo(o3, a3), s3.subTo(n3, s3));
          }
          return 0 != r4.compareTo(k2.ONE) ? k2.ZERO : 0 <= s3.compareTo(t2) ? s3.subtract(t2) : s3.signum() < 0 ? (s3.addTo(t2, s3), s3.signum() < 0 ? s3.add(t2) : s3) : s3;
        }, k2.prototype.pow = function(t2) {
          return this.exp(t2, new q2());
        }, k2.prototype.gcd = function(t2) {
          var e4, i2 = this.s < 0 ? this.negate() : this.clone(), r4 = t2.s < 0 ? t2.negate() : t2.clone();
          i2.compareTo(r4) < 0 && (e4 = i2, i2 = r4, r4 = e4);
          var o3 = i2.getLowestSetBit(), n3 = r4.getLowestSetBit();
          if (n3 < 0)
            return i2;
          for (o3 < n3 && (n3 = o3), 0 < n3 && (i2.rShiftTo(n3, i2), r4.rShiftTo(n3, r4)); 0 < i2.signum(); )
            0 < (o3 = i2.getLowestSetBit()) && i2.rShiftTo(o3, i2), 0 < (o3 = r4.getLowestSetBit()) && r4.rShiftTo(o3, r4), 0 <= i2.compareTo(r4) ? (i2.subTo(r4, i2), i2.rShiftTo(1, i2)) : (r4.subTo(i2, r4), r4.rShiftTo(1, r4));
          return 0 < n3 && r4.lShiftTo(n3, r4), r4;
        }, k2.prototype.isProbablePrime = function(t2) {
          var e4, i2 = this.abs();
          if (1 == i2.t && i2[0] <= H2[H2.length - 1]) {
            for (e4 = 0; e4 < H2.length; ++e4)
              if (i2[0] == H2[e4])
                return true;
            return false;
          }
          if (i2.isEven())
            return false;
          for (e4 = 1; e4 < H2.length; ) {
            for (var r4 = H2[e4], o3 = e4 + 1; o3 < H2.length && r4 < W2; )
              r4 *= H2[o3++];
            for (r4 = i2.modInt(r4); e4 < o3; )
              if (r4 % H2[e4++] == 0)
                return false;
          }
          return i2.millerRabin(t2);
        }, k2.prototype.square = function() {
          var t2 = I2();
          return this.squareTo(t2), t2;
        };
        var X2 = function() {
          this.global = window, this.document = document, this.headerEle = document.head || document.getElementsByTagName("head")[0], this._eles = [];
        };
        function K2(t2) {
          return (K2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t3) {
            return typeof t3;
          } : function(t3) {
            return t3 && "function" == typeof Symbol && t3.constructor === Symbol && t3 !== Symbol.prototype ? "symbol" : typeof t3;
          })(t2);
        }
        X2.prototype.createScript = function(t2) {
          var e4 = this, i2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null, r4 = this.document.createElement("script");
          for (var o3 in r4.charset = "utf-8", "string" == typeof t2 && (t2 = { src: t2 }), t2)
            r4.setAttribute(o3, t2[o3]);
          r4.onload = r4.onreadystatechange = function() {
            r4.readyState && "loaded" !== r4.readyState && "complete" !== r4.readyState || (i2 && i2(null, r4), e4.headerEle.removeChild(r4));
          }, r4.onerror = function(t3) {
            i2 && i2(t3);
          }, this._eles.push(r4), this.headerEle.appendChild(r4);
        }, X2.prototype.runScript = function(t2) {
          var e4 = this.document.createElement("script");
          this.headerEle.appendChild(e4), e4.innerHTML = t2;
        }, X2.prototype.createStyle = function(t2) {
          var e4 = this.document.createElement("style");
          e4.innerHTML = t2, this.headerEle.appendChild(e4);
        }, X2.prototype.createLink = function(t2) {
          var e4;
          this.headerEle ? ((e4 = this.document.createElement("link")).setAttribute("rel", "stylesheet"), e4.setAttribute("type", "text/css"), e4.setAttribute("href", t2), this.headerEle.appendChild(e4)) : this.document.write("<link rel='stylesheet' href='" + t2 + "'/>");
        }, X2.prototype.blobURL = function(t2, e4, i2) {
        };
        var Y2 = c2(function(t2, e4) {
          !function(i2, r4) {
            var o3 = "function", n3 = "model", a3 = "name", s3 = "type", c3 = "vendor", l3 = "version", u3 = "architecture", h3 = "console", p3 = "mobile", f3 = "tablet", d3 = "smarttv", _4 = "wearable", m3 = { extend: function(t3, e5) {
              var i3 = {};
              for (var r5 in t3)
                i3[r5] = e5[r5] && e5[r5].length % 2 == 0 ? e5[r5].concat(t3[r5]) : t3[r5];
              return i3;
            }, has: function(t3, e5) {
              return "string" == typeof t3 && -1 !== e5.toLowerCase().indexOf(t3.toLowerCase());
            }, lowerize: function(t3) {
              return t3.toLowerCase();
            }, major: function(t3) {
              return "string" === K2(t3) ? t3.replace(/[^\d\.]/g, "").split(".")[0] : r4;
            }, trim: function(t3) {
              return t3.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
            } }, g3 = { rgx: function(t3, e5) {
              for (var i3, n4, a4, s4, c4, l4 = 0; l4 < e5.length && !s4; ) {
                for (var u4 = e5[l4], h4 = e5[l4 + 1], p4 = i3 = 0; p4 < u4.length && !s4; )
                  if (s4 = u4[p4++].exec(t3))
                    for (n4 = 0; n4 < h4.length; n4++)
                      c4 = s4[++i3], "object" === K2(a4 = h4[n4]) && 0 < a4.length ? 2 == a4.length ? this[a4[0]] = K2(a4[1]) == o3 ? a4[1].call(this, c4) : a4[1] : 3 == a4.length ? this[a4[0]] = K2(a4[1]) !== o3 || a4[1].exec && a4[1].test ? c4 ? c4.replace(a4[1], a4[2]) : r4 : c4 ? a4[1].call(this, c4, a4[2]) : r4 : 4 == a4.length && (this[a4[0]] = c4 ? a4[3].call(this, c4.replace(a4[1], a4[2])) : r4) : this[a4] = c4 || r4;
                l4 += 2;
              }
            }, str: function(t3, e5) {
              for (var i3 in e5)
                if ("object" === K2(e5[i3]) && 0 < e5[i3].length) {
                  for (var o4 = 0; o4 < e5[i3].length; o4++)
                    if (m3.has(e5[i3][o4], t3))
                      return "?" === i3 ? r4 : i3;
                } else if (m3.has(e5[i3], t3))
                  return "?" === i3 ? r4 : i3;
              return t3;
            } }, v3 = { browser: { oldsafari: { version: { "1.0": "/8", 1.2: "/1", 1.3: "/3", "2.0": "/412", "2.0.2": "/416", "2.0.3": "/417", "2.0.4": "/419", "?": "/" } } }, device: { amazon: { model: { "Fire Phone": ["SD", "KF"] } }, sprint: { model: { "Evo Shift 4G": "7373KT" }, vendor: { HTC: "APA", Sprint: "Sprint" } } }, os: { windows: { version: { ME: "4.90", "NT 3.11": "NT3.51", "NT 4.0": "NT4.0", 2e3: "NT 5.0", XP: ["NT 5.1", "NT 5.2"], Vista: "NT 6.0", 7: "NT 6.1", 8: "NT 6.2", 8.1: "NT 6.3", 10: ["NT 6.4", "NT 10.0"], RT: "ARM" } } } }, y3 = { browser: [[/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i], [a3, l3], [/(opios)[\/\s]+([\w\.]+)/i], [[a3, "Opera Mini"], l3], [/\s(opr)\/([\w\.]+)/i], [[a3, "Opera"], l3], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i, /(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i, /(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]*)/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i], [a3, l3], [/(konqueror)\/([\w\.]+)/i], [[a3, "Konqueror"], l3], [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i], [[a3, "IE"], l3], [/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i], [[a3, "Edge"], l3], [/(yabrowser)\/([\w\.]+)/i], [[a3, "Yandex"], l3], [/(Avast)\/([\w\.]+)/i], [[a3, "Avast Secure Browser"], l3], [/(AVG)\/([\w\.]+)/i], [[a3, "AVG Secure Browser"], l3], [/(puffin)\/([\w\.]+)/i], [[a3, "Puffin"], l3], [/(focus)\/([\w\.]+)/i], [[a3, "Firefox Focus"], l3], [/(opt)\/([\w\.]+)/i], [[a3, "Opera Touch"], l3], [/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i], [[a3, "UCBrowser"], l3], [/(comodo_dragon)\/([\w\.]+)/i], [[a3, /_/g, " "], l3], [/(windowswechat qbcore)\/([\w\.]+)/i], [[a3, "WeChat(Win) Desktop"], l3], [/(micromessenger)\/([\w\.]+)/i], [[a3, "WeChat"], l3], [/(brave)\/([\w\.]+)/i], [[a3, "Brave"], l3], [/(qqbrowserlite)\/([\w\.]+)/i], [a3, l3], [/(QQ)\/([\d\.]+)/i], [a3, l3], [/m?(qqbrowser)[\/\s]?([\w\.]+)/i], [a3, l3], [/(baiduboxapp)[\/\s]?([\w\.]+)/i], [a3, l3], [/(2345Explorer)[\/\s]?([\w\.]+)/i], [a3, l3], [/(MetaSr)[\/\s]?([\w\.]+)/i], [a3], [/(LBBROWSER)/i], [a3], [/xiaomi\/miuibrowser\/([\w\.]+)/i], [l3, [a3, "MIUI Browser"]], [/;fbav\/([\w\.]+);/i], [l3, [a3, "Facebook"]], [/safari\s(line)\/([\w\.]+)/i, /android.+(line)\/([\w\.]+)\/iab/i], [a3, l3], [/headlesschrome(?:\/([\w\.]+)|\s)/i], [l3, [a3, "Chrome Headless"]], [/\swv\).+(chrome)\/([\w\.]+)/i], [[a3, /(.+)/, "$1 WebView"], l3], [/((?:oculus|samsung)browser)\/([\w\.]+)/i], [[a3, /(.+(?:g|us))(.+)/, "$1 $2"], l3], [/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i], [l3, [a3, "Android Browser"]], [/(sailfishbrowser)\/([\w\.]+)/i], [[a3, "Sailfish Browser"], l3], [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i], [a3, l3], [/(dolfin)\/([\w\.]+)/i], [[a3, "Dolphin"], l3], [/(qihu|qhbrowser|qihoobrowser|360browser)/i], [[a3, "360 Browser"]], [/((?:android.+)crmo|crios)\/([\w\.]+)/i], [[a3, "Chrome"], l3], [/(coast)\/([\w\.]+)/i], [[a3, "Opera Coast"], l3], [/fxios\/([\w\.-]+)/i], [l3, [a3, "Firefox"]], [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i], [l3, [a3, "Mobile Safari"]], [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i], [l3, a3], [/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [[a3, "GSA"], l3], [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i], [a3, [l3, g3.str, v3.browser.oldsafari.version]], [/(webkit|khtml)\/([\w\.]+)/i], [a3, l3], [/(navigator|netscape)\/([\w\.-]+)/i], [[a3, "Netscape"], l3], [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]*)/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i], [a3, l3]], cpu: [[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i], [[u3, "amd64"]], [/(ia32(?=;))/i], [[u3, m3.lowerize]], [/((?:i[346]|x)86)[;\)]/i], [[u3, "ia32"]], [/windows\s(ce|mobile);\sppc;/i], [[u3, "arm"]], [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i], [[u3, /ower/, "", m3.lowerize]], [/(sun4\w)[;\)]/i], [[u3, "sparc"]], [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i], [[u3, m3.lowerize]]], device: [[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i], [n3, c3, [s3, f3]], [/applecoremedia\/[\w\.]+ \((ipad)/], [n3, [c3, "Apple"], [s3, f3]], [/(apple\s{0,1}tv)/i], [[n3, "Apple TV"], [c3, "Apple"], [s3, d3]], [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(hp).+(tablet)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i], [c3, n3, [s3, f3]], [/(kf[A-z]+)\sbuild\/.+silk\//i], [n3, [c3, "Amazon"], [s3, f3]], [/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i], [[n3, g3.str, v3.device.amazon.model], [c3, "Amazon"], [s3, p3]], [/android.+aft([bms])\sbuild/i], [n3, [c3, "Amazon"], [s3, d3]], [/\((ip[honed|\s\w*]+);.+(apple)/i], [n3, c3, [s3, p3]], [/\((ip[honed|\s\w*]+);/i], [n3, [c3, "Apple"], [s3, p3]], [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i], [c3, n3, [s3, p3]], [/\(bb10;\s(\w+)/i], [n3, [c3, "BlackBerry"], [s3, p3]], [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i], [n3, [c3, "Asus"], [s3, f3]], [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i], [[c3, "Sony"], [n3, "Xperia Tablet"], [s3, f3]], [/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [n3, [c3, "Sony"], [s3, p3]], [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i], [c3, n3, [s3, h3]], [/android.+;\s(shield)\sbuild/i], [n3, [c3, "Nvidia"], [s3, h3]], [/(playstation\s[34portablevi]+)/i], [n3, [c3, "Sony"], [s3, h3]], [/(sprint\s(\w+))/i], [[c3, g3.str, v3.device.sprint.vendor], [n3, g3.str, v3.device.sprint.model], [s3, p3]], [/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i, /(zte)-(\w*)/i, /(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i], [c3, [n3, /_/g, " "], [s3, p3]], [/(nexus\s9)/i], [n3, [c3, "HTC"], [s3, f3]], [/d\/huawei([\w\s-]+)[;\)]/i, /(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i], [n3, [c3, "Huawei"], [s3, p3]], [/android.+(bah2?-a?[lw]\d{2})/i], [n3, [c3, "Huawei"], [s3, f3]], [/(microsoft);\s(lumia[\s\w]+)/i], [c3, n3, [s3, p3]], [/[\s\(;](xbox(?:\sone)?)[\s\);]/i], [n3, [c3, "Microsoft"], [s3, h3]], [/(kin\.[onetw]{3})/i], [[n3, /\./g, " "], [c3, "Microsoft"], [s3, p3]], [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w*)/i, /(XT\d{3,4}) build\//i, /(nexus\s6)/i], [n3, [c3, "Motorola"], [s3, p3]], [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i], [n3, [c3, "Motorola"], [s3, f3]], [/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i], [[c3, m3.trim], [n3, m3.trim], [s3, d3]], [/hbbtv.+maple;(\d+)/i], [[n3, /^/, "SmartTV"], [c3, "Samsung"], [s3, d3]], [/\(dtv[\);].+(aquos)/i], [n3, [c3, "Sharp"], [s3, d3]], [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i], [[c3, "Samsung"], n3, [s3, f3]], [/smart-tv.+(samsung)/i], [c3, [s3, d3], n3], [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i, /sec-((sgh\w+))/i], [[c3, "Samsung"], n3, [s3, p3]], [/sie-(\w*)/i], [n3, [c3, "Siemens"], [s3, p3]], [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]*)/i], [[c3, "Nokia"], n3, [s3, p3]], [/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i], [n3, [c3, "Acer"], [s3, f3]], [/android.+([vl]k\-?\d{3})\s+build/i], [n3, [c3, "LG"], [s3, f3]], [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i], [[c3, "LG"], n3, [s3, f3]], [/(lg) netcast\.tv/i], [c3, n3, [s3, d3]], [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w*)/i, /android.+lg(\-?[\d\w]+)\s+build/i], [n3, [c3, "LG"], [s3, p3]], [/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i], [c3, n3, [s3, f3]], [/android.+(ideatab[a-z0-9\-\s]+)/i], [n3, [c3, "Lenovo"], [s3, f3]], [/(lenovo)[_\s-]?([\w-]+)/i], [c3, n3, [s3, p3]], [/linux;.+((jolla));/i], [c3, n3, [s3, p3]], [/((pebble))app\/[\d\.]+\s/i], [c3, n3, [s3, _4]], [/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i], [c3, n3, [s3, p3]], [/crkey/i], [[n3, "Chromecast"], [c3, "Google"], [s3, d3]], [/android.+;\s(glass)\s\d/i], [n3, [c3, "Google"], [s3, _4]], [/android.+;\s(pixel c)[\s)]/i], [n3, [c3, "Google"], [s3, f3]], [/android.+;\s(pixel( [23])?( xl)?)[\s)]/i], [n3, [c3, "Google"], [s3, p3]], [/android.+;\s(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i, /android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i], [[n3, /_/g, " "], [c3, "Xiaomi"], [s3, p3]], [/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i], [[n3, /_/g, " "], [c3, "Xiaomi"], [s3, f3]], [/android.+;\s(m[1-5]\snote)\sbuild/i], [n3, [c3, "Meizu"], [s3, p3]], [/(mz)-([\w-]{2,})/i], [[c3, "Meizu"], n3, [s3, p3]], [/android.+a000(1)\s+build/i, /android.+oneplus\s(a\d{4})[\s)]/i], [n3, [c3, "OnePlus"], [s3, p3]], [/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i], [n3, [c3, "RCA"], [s3, f3]], [/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i], [n3, [c3, "Dell"], [s3, f3]], [/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i], [n3, [c3, "Verizon"], [s3, f3]], [/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i], [[c3, "Barnes & Noble"], n3, [s3, f3]], [/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i], [n3, [c3, "NuVision"], [s3, f3]], [/android.+;\s(k88)\sbuild/i], [n3, [c3, "ZTE"], [s3, f3]], [/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i], [n3, [c3, "Swiss"], [s3, p3]], [/android.+[;\/]\s*(zur\d{3})\s+build/i], [n3, [c3, "Swiss"], [s3, f3]], [/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i], [n3, [c3, "Zeki"], [s3, f3]], [/(android).+[;\/]\s+([YR]\d{2})\s+build/i, /android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i], [[c3, "Dragon Touch"], n3, [s3, f3]], [/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i], [n3, [c3, "Insignia"], [s3, f3]], [/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i], [n3, [c3, "NextBook"], [s3, f3]], [/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i], [[c3, "Voice"], n3, [s3, p3]], [/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i], [[c3, "LvTel"], n3, [s3, p3]], [/android.+;\s(PH-1)\s/i], [n3, [c3, "Essential"], [s3, p3]], [/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i], [n3, [c3, "Envizen"], [s3, f3]], [/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i], [c3, n3, [s3, f3]], [/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i], [n3, [c3, "MachSpeed"], [s3, f3]], [/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i], [c3, n3, [s3, f3]], [/android.+[;\/]\s*TU_(1491)\s+build/i], [n3, [c3, "Rotor"], [s3, f3]], [/android.+(KS(.+))\s+build/i], [n3, [c3, "Amazon"], [s3, f3]], [/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i], [c3, n3, [s3, f3]], [/\s(tablet|tab)[;\/]/i, /\s(mobile)(?:[;\/]|\ssafari)/i], [[s3, m3.lowerize], c3, n3], [/[\s\/\(](smart-?tv)[;\)]/i], [[s3, d3]], [/(android[\w\.\s\-]{0,9});.+build/i], [n3, [c3, "Generic"]]], engine: [[/windows.+\sedge\/([\w\.]+)/i], [l3, [a3, "EdgeHTML"]], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i], [l3, [a3, "Blink"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i], [a3, l3], [/rv\:([\w\.]{1,9}).+(gecko)/i], [l3, a3]], os: [[/microsoft\s(windows)\s(vista|xp)/i], [a3, l3], [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i, /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i], [a3, [l3, g3.str, v3.os.windows.version]], [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i], [[a3, "Windows"], [l3, g3.str, v3.os.windows.version]], [/\((bb)(10);/i], [[a3, "BlackBerry"], l3], [/(blackberry)\w*\/?([\w\.]*)/i, /(tizen|kaios)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i], [a3, l3], [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i], [[a3, "Symbian"], l3], [/\((series40);/i], [a3], [/mozilla.+\(mobile;.+gecko.+firefox/i], [[a3, "Firefox OS"], l3], [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w*)/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i, /(hurd|linux)\s?([\w\.]*)/i, /(gnu)\s?([\w\.]*)/i], [a3, l3], [/(cros)\s[\w]+\s([\w\.]+\w)/i], [[a3, "Chromium OS"], l3], [/(sunos)\s?([\w\.\d]*)/i], [[a3, "Solaris"], l3], [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i], [a3, l3], [/(haiku)\s(\w+)/i], [a3, l3], [/cfnetwork\/.+darwin/i, /ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i], [[l3, /_/g, "."], [a3, "iOS"]], [/(mac\sos\sx)\s?([\w\s\.]*)/i, /(macintosh|mac(?=_powerpc)\s)/i], [[a3, "Mac OS"], [l3, /_/g, "."]], [/((?:open)?solaris)[\/\s-]?([\w\.]*)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i, /(unix)\s?([\w\.]*)/i], [a3, l3]] }, b3 = function t3(e5, o4) {
              if ("object" === K2(e5) && (o4 = e5, e5 = r4), !(this instanceof t3))
                return new t3(e5, o4).getResult();
              var n4 = e5 || (i2 && i2.navigator && i2.navigator.userAgent ? i2.navigator.userAgent : ""), a4 = o4 ? m3.extend(y3, o4) : y3;
              return this.getBrowser = function() {
                var t4 = { name: r4, version: r4 };
                return g3.rgx.call(t4, n4, a4.browser), t4.major = m3.major(t4.version), t4;
              }, this.getCPU = function() {
                var t4 = { architecture: r4 };
                return g3.rgx.call(t4, n4, a4.cpu), t4;
              }, this.getDevice = function() {
                var t4 = { vendor: r4, model: r4, type: r4 };
                return g3.rgx.call(t4, n4, a4.device), t4;
              }, this.getEngine = function() {
                var t4 = { name: r4, version: r4 };
                return g3.rgx.call(t4, n4, a4.engine), t4;
              }, this.getOS = function() {
                var t4 = { name: r4, version: r4 };
                return g3.rgx.call(t4, n4, a4.os), t4;
              }, this.getResult = function() {
                return { ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS(), device: this.getDevice(), cpu: this.getCPU() };
              }, this.getUA = function() {
                return n4;
              }, this.setUA = function(t4) {
                return n4 = t4, this;
              }, this;
            };
            b3.VERSION = "0.7.21", b3.BROWSER = { NAME: a3, MAJOR: "major", VERSION: l3 }, b3.CPU = { ARCHITECTURE: u3 }, b3.DEVICE = { MODEL: n3, VENDOR: c3, TYPE: s3, CONSOLE: h3, MOBILE: p3, SMARTTV: d3, TABLET: f3, WEARABLE: _4, EMBEDDED: "embedded" }, b3.ENGINE = { NAME: a3, VERSION: l3 }, b3.OS = { NAME: a3, VERSION: l3 }, t2.exports && (e4 = t2.exports = b3), e4.UAParser = b3;
            var w3, x3 = i2 && (i2.jQuery || i2.Zepto);
            x3 && !x3.ua && (w3 = new b3(), x3.ua = w3.getResult(), x3.ua.get = function() {
              return w3.getUA();
            }, x3.ua.set = function(t3) {
              w3.setUA(t3);
              var e5 = w3.getResult();
              for (var i3 in e5)
                x3.ua[i3] = e5[i3];
            });
          }("object" === ("undefined" == typeof window ? "undefined" : K2(window)) ? window : s2);
        }), J2 = window.localStorage, Q2 = function() {
          this.canuse = Object.prototype.hasOwnProperty.call(window, "localStorage");
        };
        Q2.prototype.setItem = function(t2) {
          var e4 = { name: "", value: "", expires: "", startTime: new Date().getTime() }, i2 = Object.assign({}, e4, t2);
          J2.setItem(i2.name, JSON.stringify(i2));
        }, Q2.prototype.getItem = function(t2, i2) {
          var r4 = J2.getItem(t2);
          if (!r4)
            return null;
          var o3 = JSON.parse(r4);
          if (o3.v !== i2)
            return null;
          if (o3.enc !== e3.enc)
            return null;
          var n3 = new Date().getTime() - o3.startTime;
          return n3 > o3.expires || o3.expires != e3.expires || n3 < 0 ? (J2.removeItem(t2), null) : o3.value;
        }, Q2.prototype.removeItem = function(t2) {
          J2.removeItem(t2);
        }, Q2.prototype.clear = function() {
          J2.clear();
        };
        var $2 = new Q2(), tt2 = function(t2, e4) {
          return (Array.isArray(t2) ? t2 : [t2]).filter(function(t3) {
            return $2.getItem("_EPGIS_".concat(t3), e4);
          });
        }, et2 = function(t2, e4) {
          return (Array.isArray(t2) ? t2 : [t2]).filter(function(t3) {
            return !$2.canuse || !$2.getItem("_EPGIS_".concat(t3), e4);
          });
        }, it2 = function(t2) {
          var e4 = [];
          for (var i2 in t2)
            e4.push("".concat(i2, "=").concat(t2[i2]));
          return e4.join("&");
        }, rt2 = new Y2(), ot2 = function() {
          return window.SGMap;
        };
        Array.prototype.filter || (Array.prototype.filter = function(t2) {
          for (var e4 = [], i2 = -1; ++i2 < this.length; )
            t2(this[i2]) && e4.push(this[i2]);
          return e4;
        }), Array.prototype.forEach || (Array.prototype.forEach = function(t2) {
          for (var e4 = -1; ++e4 < this.length; )
            t2(this[e4]);
        }), Array.prototype.includes || (Array.prototype.includes = function(t2) {
          return 0 < this.filter(function(e4) {
            return e4 === t2;
          }).length;
        }), Array.prototype.reduce || (Array.prototype.reduce = function(t2, e4) {
          for (var r4 = e4; ++i < this.length; )
            t2(r4, this[i]);
          return r4;
        }), Array.isArray || (Array.isArray = function(t2) {
          return "Array" === t2.constructor.name;
        }), Object.keys || (Object.keys = function(t2) {
          var e4 = [];
          for (var i2 in t2)
            e4.push(i2);
          return e4;
        }), Function.prototype.bind || (Function.prototype.bind = function(t2) {
          if ("function" != typeof this)
            throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
          var e4 = Array.prototype.slice.call(arguments, 1), i2 = this, r4 = function() {
          }, o3 = function() {
            return i2.apply(this instanceof r4 && t2 ? this : t2, e4.concat(Array.prototype.slice.call(arguments)));
          };
          return r4.prototype = this.prototype, o3.prototype = new r4(), o3;
        });
        var nt2 = function() {
          this._modules = [], this.core = new X2(), this.init();
        };
        nt2.prototype.init = function() {
          window.__jsload = this.__jsload.bind(this);
        }, nt2.prototype.loadModules = function() {
          var t2 = this, i2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : [], r4 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;
          if (!i2 || 0 == i2.length)
            return r4("\u63D2\u4EF6\u5217\u8868\u53C2\u6570\u6709\u8BEF"), false;
          var o3 = { v: e3.version };
          e3.isDev && (o3.dev = 1), $2.canuse && tt2(i2, e3.version).forEach(function(i3) {
            t2.run($2.getItem("_EPGIS_".concat(i3), e3.version).code);
          });
          var n3 = et2(i2, e3.version);
          n3.length && (o3.plugin = n3), o3.plugin ? (o3.access_token = ot2().accessToken, o3.rnd = Math.random(), o3.cb = "__jsload", this._loadCallBack = r4, this.core.createScript("".concat(e3.apiUrl, "/webplugin/?").concat(it2(o3)))) : i2 && i2.length ? r4 && r4(null, i2) : r4 && r4("\u6CA1\u6709\u4F20\u5165\u63D2\u4EF6\u540D\u79F0");
        }, nt2.prototype.__jsload = function(t2) {
          if ("{}" === JSON.stringify(t2))
            this._loadCallBack && this._loadCallBack("\u60A8\u4F7F\u7528\u7684\u63D2\u4EF6\u540D\u79F0\u9519\u8BEF\uFF0C\u6216\u8005\u4E0D\u5B58\u5728\uFF0C\u8BF7\u6392\u67E5SGMap.plugin\u53C2\u6570");
          else if (false === t2.success)
            this._loadCallBack && this._loadCallBack(t2.message);
          else {
            for (var e4 in t2)
              this._parseSinglePlugin(e4, t2[e4]);
            this._loadCallBack && this._loadCallBack(null, Object.keys(t2));
          }
          this._loadCallBack = null;
        }, nt2.prototype._parseSinglePlugin = function(t2, i2) {
          var r4;
          this._modules.includes(t2) ? console.warn("\u63D2\u4EF6".concat(t2, "\u5DF2\u7ECF\u5B58\u5728\uFF0C\u5E76\u4E0D\u4F1A\u91CD\u590D\u6267\u884C\u3002\u8BF7\u6CE8\u610F\u4EE3\u7801\uFF0C\u4E0D\u8981\u91CD\u590D\u52A0\u8F7D\u3002")) : (r4 = { notes: this.getNotes(i2), code: i2 && i2.replace(/\/\*(\s|\S)*\*\//g, "") }, $2.canuse && $2.setItem({ name: "_EPGIS_".concat(t2), value: r4, v: e3.version, expires: e3.expires, enc: e3.enc }), this.run(r4.code), this._modules.push(t2));
        }, nt2.prototype.getRequire = function(t2) {
          var e4 = null;
          return t2 && (e4 = t2.split(" @").reduce(function(t3, e5) {
            var i2 = e5.split(/\s/);
            return 1 < i2.length ? t3[i2[0]] = i2[1] : t3.title = i2[0], t3;
          }, {})), e4 && e4.require ? e4.require.replace(/,{2,}/g, ",").replace(/\s{2,}/g, " ").replace(/\s/g, ",").split(",") : [];
        }, nt2.prototype.getNotes = function(t2) {
          var e4 = null;
          return t2 && (e4 = t2.match(/\/\*([\S\s]*)\*\//)), e4 ? e4[1] : "";
        }, nt2.prototype.run = function(t2) {
          (function(t3) {
            return -1 === t3.indexOf("!function");
          })(t2) && (t2 = function(t3, e4) {
            if (!o2)
              return null;
            var i2 = o2.enc.Utf8.parse("epgisgisaegismapssgcc");
            return a2.decrypt({ ciphertext: o2.enc.Base64.parse(t3) }, i2, { mode: o2.mode.ECB, padding: o2.pad.Pkcs7 }).toString(o2.enc.Utf8);
          }(t2)), new Function("!function(){" + t2 + "}.bind((window||self).SGMap)()")();
        };
        var at2 = new nt2(), st2 = function(t2, e4) {
          if ("string" == typeof t2 && (t2 = t2.split(",")), Promise)
            return new Promise(function(i2, r4) {
              at2.loadModules(t2, function(t3, o3) {
                t3 ? (r4(t3), e4 && e4(t3)) : (i2(o3), e4 && e4(null, o3));
              });
            });
          at2.loadModules(t2, e4);
        };
        return st2.config = e3, st2.Loader = nt2, st2.userAgent = rt2, st2.onError = function(t2) {
          window.onerror = function(e4, i2, r4, o3, n3) {
            t2 && t2(e4, i2, r4, o3, n3 ? n3.stack : null);
          }, window.onunhandledrejection = function(e4) {
            t2 && t2(e4.reason);
          };
        }, st2;
      });
    }), Yo = t.createCommonjsModule(function(e2) {
      var i2 = e2.exports = "undefined" != typeof window && window.Math == Math ? window : void 0 !== t.window && t.window.Math == Math ? t.window : Function("return this")();
      "number" == typeof __g && (__g = i2);
    }), Jo = {}.hasOwnProperty, Qo = function(t2, e2) {
      return Jo.call(t2, e2);
    }, $o = function(t2) {
      try {
        return !!t2();
      } catch (t3) {
        return true;
      }
    }, tn = !$o(function() {
      return 7 != Object.defineProperty({}, "a", { get: function() {
        return 7;
      } }).a;
    }), en = t.createCommonjsModule(function(t2) {
      var e2 = t2.exports = { version: "2.6.12" };
      "number" == typeof __e && (__e = e2);
    }), rn = function(t2) {
      return "object" == typeof t2 ? null !== t2 : "function" == typeof t2;
    }, on = function(t2) {
      if (!rn(t2))
        throw TypeError(t2 + " is not an object!");
      return t2;
    }, nn = Yo.document, an = rn(nn) && rn(nn.createElement), sn = function(t2) {
      return an ? nn.createElement(t2) : {};
    }, cn = !tn && !$o(function() {
      return 7 != Object.defineProperty(sn("div"), "a", { get: function() {
        return 7;
      } }).a;
    }), ln = function(t2, e2) {
      if (!rn(t2))
        return t2;
      var i2, r2;
      if (e2 && "function" == typeof (i2 = t2.toString) && !rn(r2 = i2.call(t2)))
        return r2;
      if ("function" == typeof (i2 = t2.valueOf) && !rn(r2 = i2.call(t2)))
        return r2;
      if (!e2 && "function" == typeof (i2 = t2.toString) && !rn(r2 = i2.call(t2)))
        return r2;
      throw TypeError("Can't convert object to primitive value");
    }, un = Object.defineProperty, hn = { f: tn ? Object.defineProperty : function(t2, e2, i2) {
      if (on(t2), e2 = ln(e2, true), on(i2), cn)
        try {
          return un(t2, e2, i2);
        } catch (t3) {
        }
      if ("get" in i2 || "set" in i2)
        throw TypeError("Accessors not supported!");
      return "value" in i2 && (t2[e2] = i2.value), t2;
    } }, pn = function(t2, e2) {
      return { enumerable: !(1 & t2), configurable: !(2 & t2), writable: !(4 & t2), value: e2 };
    }, fn = tn ? function(t2, e2, i2) {
      return hn.f(t2, e2, pn(1, i2));
    } : function(t2, e2, i2) {
      return t2[e2] = i2, t2;
    }, dn = 0, _n = Math.random(), mn = function(t2) {
      return "Symbol(".concat(void 0 === t2 ? "" : t2, ")_", (++dn + _n).toString(36));
    }, gn = t.createCommonjsModule(function(t2) {
      var e2 = Yo["__core-js_shared__"] || (Yo["__core-js_shared__"] = {});
      (t2.exports = function(t3, i2) {
        return e2[t3] || (e2[t3] = void 0 !== i2 ? i2 : {});
      })("versions", []).push({ version: en.version, mode: "global", copyright: "\xA9 2020 Denis Pushkarev (zloirock.ru)" });
    }), vn = gn("native-function-to-string", Function.toString), yn = t.createCommonjsModule(function(t2) {
      var e2 = mn("src"), i2 = ("" + vn).split("toString");
      en.inspectSource = function(t3) {
        return vn.call(t3);
      }, (t2.exports = function(t3, r2, o2, n2) {
        var a2 = "function" == typeof o2;
        a2 && (Qo(o2, "name") || fn(o2, "name", r2)), t3[r2] !== o2 && (a2 && (Qo(o2, e2) || fn(o2, e2, t3[r2] ? "" + t3[r2] : i2.join(String(r2)))), t3 === Yo ? t3[r2] = o2 : n2 ? t3[r2] ? t3[r2] = o2 : fn(t3, r2, o2) : (delete t3[r2], fn(t3, r2, o2)));
      })(Function.prototype, "toString", function() {
        return "function" == typeof this && this[e2] || vn.call(this);
      });
    }), bn = function(t2) {
      if ("function" != typeof t2)
        throw TypeError(t2 + " is not a function!");
      return t2;
    }, wn = function(t2, e2, i2) {
      if (bn(t2), void 0 === e2)
        return t2;
      switch (i2) {
        case 1:
          return function(i3) {
            return t2.call(e2, i3);
          };
        case 2:
          return function(i3, r2) {
            return t2.call(e2, i3, r2);
          };
        case 3:
          return function(i3, r2, o2) {
            return t2.call(e2, i3, r2, o2);
          };
      }
      return function() {
        return t2.apply(e2, arguments);
      };
    }, xn = function(t2, e2, i2) {
      var r2, o2, n2, a2, s2 = t2 & xn.F, c2 = t2 & xn.G, l2 = t2 & xn.P, u2 = t2 & xn.B, h2 = c2 ? Yo : t2 & xn.S ? Yo[e2] || (Yo[e2] = {}) : (Yo[e2] || {}).prototype, p2 = c2 ? en : en[e2] || (en[e2] = {}), f2 = p2.prototype || (p2.prototype = {});
      for (r2 in c2 && (i2 = e2), i2)
        n2 = ((o2 = !s2 && h2 && void 0 !== h2[r2]) ? h2 : i2)[r2], a2 = u2 && o2 ? wn(n2, Yo) : l2 && "function" == typeof n2 ? wn(Function.call, n2) : n2, h2 && yn(h2, r2, n2, t2 & xn.U), p2[r2] != n2 && fn(p2, r2, a2), l2 && f2[r2] != n2 && (f2[r2] = n2);
    };
    Yo.core = en, xn.F = 1, xn.G = 2, xn.S = 4, xn.P = 8, xn.B = 16, xn.W = 32, xn.U = 64, xn.R = 128;
    var Tn = xn, Sn = t.createCommonjsModule(function(t2) {
      var e2 = mn("meta"), i2 = hn.f, r2 = 0, o2 = Object.isExtensible || function() {
        return true;
      }, n2 = !$o(function() {
        return o2(Object.preventExtensions({}));
      }), a2 = function(t3) {
        i2(t3, e2, { value: { i: "O" + ++r2, w: {} } });
      }, s2 = t2.exports = { KEY: e2, NEED: false, fastKey: function(t3, i3) {
        if (!rn(t3))
          return "symbol" == typeof t3 ? t3 : ("string" == typeof t3 ? "S" : "P") + t3;
        if (!Qo(t3, e2)) {
          if (!o2(t3))
            return "F";
          if (!i3)
            return "E";
          a2(t3);
        }
        return t3[e2].i;
      }, getWeak: function(t3, i3) {
        if (!Qo(t3, e2)) {
          if (!o2(t3))
            return true;
          if (!i3)
            return false;
          a2(t3);
        }
        return t3[e2].w;
      }, onFreeze: function(t3) {
        return n2 && s2.NEED && o2(t3) && !Qo(t3, e2) && a2(t3), t3;
      } };
    }), En = t.createCommonjsModule(function(t2) {
      var e2 = gn("wks"), i2 = Yo.Symbol, r2 = "function" == typeof i2;
      (t2.exports = function(t3) {
        return e2[t3] || (e2[t3] = r2 && i2[t3] || (r2 ? i2 : mn)("Symbol." + t3));
      }).store = e2;
    }), An = hn.f, kn = En("toStringTag"), In = function(t2, e2, i2) {
      t2 && !Qo(t2 = i2 ? t2 : t2.prototype, kn) && An(t2, kn, { configurable: true, value: e2 });
    }, Bn = { f: En }, Pn = hn.f, Cn = function(t2) {
      var e2 = en.Symbol || (en.Symbol = Yo.Symbol || {});
      "_" == t2.charAt(0) || t2 in e2 || Pn(e2, t2, { value: Bn.f(t2) });
    }, zn = {}.toString, Dn = function(t2) {
      return zn.call(t2).slice(8, -1);
    }, Mn = Object("z").propertyIsEnumerable(0) ? Object : function(t2) {
      return "String" == Dn(t2) ? t2.split("") : Object(t2);
    }, Ln = function(t2) {
      if (null == t2)
        throw TypeError("Can't call method on  " + t2);
      return t2;
    }, Rn = function(t2) {
      return Mn(Ln(t2));
    }, On = Math.ceil, Fn = Math.floor, Un = function(t2) {
      return isNaN(t2 = +t2) ? 0 : (t2 > 0 ? Fn : On)(t2);
    }, Nn = Math.min, jn = function(t2) {
      return t2 > 0 ? Nn(Un(t2), 9007199254740991) : 0;
    }, Vn = Math.max, qn = Math.min, Zn = function(t2, e2) {
      return (t2 = Un(t2)) < 0 ? Vn(t2 + e2, 0) : qn(t2, e2);
    }, Gn = function(t2) {
      return function(e2, i2, r2) {
        var o2, n2 = Rn(e2), a2 = jn(n2.length), s2 = Zn(r2, a2);
        if (t2 && i2 != i2) {
          for (; a2 > s2; )
            if ((o2 = n2[s2++]) != o2)
              return true;
        } else
          for (; a2 > s2; s2++)
            if ((t2 || s2 in n2) && n2[s2] === i2)
              return t2 || s2 || 0;
        return !t2 && -1;
      };
    }, Hn = gn("keys"), Wn = function(t2) {
      return Hn[t2] || (Hn[t2] = mn(t2));
    }, Xn = Gn(false), Kn = Wn("IE_PROTO"), Yn = function(t2, e2) {
      var i2, r2 = Rn(t2), o2 = 0, n2 = [];
      for (i2 in r2)
        i2 != Kn && Qo(r2, i2) && n2.push(i2);
      for (; e2.length > o2; )
        Qo(r2, i2 = e2[o2++]) && (~Xn(n2, i2) || n2.push(i2));
      return n2;
    }, Jn = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","), Qn = Object.keys || function(t2) {
      return Yn(t2, Jn);
    }, $n = { f: Object.getOwnPropertySymbols }, ta = { f: {}.propertyIsEnumerable }, ea = Array.isArray || function(t2) {
      return "Array" == Dn(t2);
    }, ia = function(t2) {
      return Object(Ln(t2));
    }, ra = tn ? Object.defineProperties : function(t2, e2) {
      on(t2);
      for (var i2, r2 = Qn(e2), o2 = r2.length, n2 = 0; o2 > n2; )
        hn.f(t2, i2 = r2[n2++], e2[i2]);
      return t2;
    }, oa = Yo.document, na = oa && oa.documentElement, aa = Wn("IE_PROTO"), sa = function() {
    }, ca = function() {
      var t2, e2 = sn("iframe"), i2 = Jn.length;
      for (e2.style.display = "none", na.appendChild(e2), e2.src = "javascript:", (t2 = e2.contentWindow.document).open(), t2.write("<script>document.F=Object<\/script>"), t2.close(), ca = t2.F; i2--; )
        delete ca.prototype[Jn[i2]];
      return ca();
    }, la = Object.create || function(t2, e2) {
      var i2;
      return null !== t2 ? (sa.prototype = on(t2), i2 = new sa(), sa.prototype = null, i2[aa] = t2) : i2 = ca(), void 0 === e2 ? i2 : ra(i2, e2);
    }, ua = Jn.concat("length", "prototype"), ha = { f: Object.getOwnPropertyNames || function(t2) {
      return Yn(t2, ua);
    } }, pa = ha.f, fa = {}.toString, da = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [], _a = { f: function(t2) {
      return da && "[object Window]" == fa.call(t2) ? function(t3) {
        try {
          return pa(t3);
        } catch (t4) {
          return da.slice();
        }
      }(t2) : pa(Rn(t2));
    } }, ma = Object.getOwnPropertyDescriptor, ga = { f: tn ? ma : function(t2, e2) {
      if (t2 = Rn(t2), e2 = ln(e2, true), cn)
        try {
          return ma(t2, e2);
        } catch (t3) {
        }
      if (Qo(t2, e2))
        return pn(!ta.f.call(t2, e2), t2[e2]);
    } }, va = Sn.KEY, ya = ga.f, ba = hn.f, wa = _a.f, xa = Yo.Symbol, Ta = Yo.JSON, Sa = Ta && Ta.stringify, Ea = En("_hidden"), Aa = En("toPrimitive"), ka = {}.propertyIsEnumerable, Ia = gn("symbol-registry"), Ba = gn("symbols"), Pa = gn("op-symbols"), Ca = Object.prototype, za = "function" == typeof xa && !!$n.f, Da = Yo.QObject, Ma = !Da || !Da.prototype || !Da.prototype.findChild, La = tn && $o(function() {
      return 7 != la(ba({}, "a", { get: function() {
        return ba(this, "a", { value: 7 }).a;
      } })).a;
    }) ? function(t2, e2, i2) {
      var r2 = ya(Ca, e2);
      r2 && delete Ca[e2], ba(t2, e2, i2), r2 && t2 !== Ca && ba(Ca, e2, r2);
    } : ba, Ra = function(t2) {
      var e2 = Ba[t2] = la(xa.prototype);
      return e2._k = t2, e2;
    }, Oa = za && "symbol" == typeof xa.iterator ? function(t2) {
      return "symbol" == typeof t2;
    } : function(t2) {
      return t2 instanceof xa;
    }, Fa = function(t2, e2, i2) {
      return t2 === Ca && Fa(Pa, e2, i2), on(t2), e2 = ln(e2, true), on(i2), Qo(Ba, e2) ? (i2.enumerable ? (Qo(t2, Ea) && t2[Ea][e2] && (t2[Ea][e2] = false), i2 = la(i2, { enumerable: pn(0, false) })) : (Qo(t2, Ea) || ba(t2, Ea, pn(1, {})), t2[Ea][e2] = true), La(t2, e2, i2)) : ba(t2, e2, i2);
    }, Ua = function(t2, e2) {
      on(t2);
      for (var i2, r2 = function(t3) {
        var e3 = Qn(t3), i3 = $n.f;
        if (i3)
          for (var r3, o3 = i3(t3), n3 = ta.f, a2 = 0; o3.length > a2; )
            n3.call(t3, r3 = o3[a2++]) && e3.push(r3);
        return e3;
      }(e2 = Rn(e2)), o2 = 0, n2 = r2.length; n2 > o2; )
        Fa(t2, i2 = r2[o2++], e2[i2]);
      return t2;
    }, Na = function(t2) {
      var e2 = ka.call(this, t2 = ln(t2, true));
      return !(this === Ca && Qo(Ba, t2) && !Qo(Pa, t2)) && (!(e2 || !Qo(this, t2) || !Qo(Ba, t2) || Qo(this, Ea) && this[Ea][t2]) || e2);
    }, ja = function(t2, e2) {
      if (t2 = Rn(t2), e2 = ln(e2, true), t2 !== Ca || !Qo(Ba, e2) || Qo(Pa, e2)) {
        var i2 = ya(t2, e2);
        return !i2 || !Qo(Ba, e2) || Qo(t2, Ea) && t2[Ea][e2] || (i2.enumerable = true), i2;
      }
    }, Va = function(t2) {
      for (var e2, i2 = wa(Rn(t2)), r2 = [], o2 = 0; i2.length > o2; )
        Qo(Ba, e2 = i2[o2++]) || e2 == Ea || e2 == va || r2.push(e2);
      return r2;
    }, qa = function(t2) {
      for (var e2, i2 = t2 === Ca, r2 = wa(i2 ? Pa : Rn(t2)), o2 = [], n2 = 0; r2.length > n2; )
        !Qo(Ba, e2 = r2[n2++]) || i2 && !Qo(Ca, e2) || o2.push(Ba[e2]);
      return o2;
    };
    za || (yn((xa = function() {
      if (this instanceof xa)
        throw TypeError("Symbol is not a constructor!");
      var t2 = mn(arguments.length > 0 ? arguments[0] : void 0), e2 = function(i2) {
        this === Ca && e2.call(Pa, i2), Qo(this, Ea) && Qo(this[Ea], t2) && (this[Ea][t2] = false), La(this, t2, pn(1, i2));
      };
      return tn && Ma && La(Ca, t2, { configurable: true, set: e2 }), Ra(t2);
    }).prototype, "toString", function() {
      return this._k;
    }), ga.f = ja, hn.f = Fa, ha.f = _a.f = Va, ta.f = Na, $n.f = qa, tn && yn(Ca, "propertyIsEnumerable", Na, true), Bn.f = function(t2) {
      return Ra(En(t2));
    }), Tn(Tn.G + Tn.W + Tn.F * !za, { Symbol: xa });
    for (var Za = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), Ga = 0; Za.length > Ga; )
      En(Za[Ga++]);
    for (var Ha = Qn(En.store), Wa = 0; Ha.length > Wa; )
      Cn(Ha[Wa++]);
    Tn(Tn.S + Tn.F * !za, "Symbol", { for: function(t2) {
      return Qo(Ia, t2 += "") ? Ia[t2] : Ia[t2] = xa(t2);
    }, keyFor: function(t2) {
      if (!Oa(t2))
        throw TypeError(t2 + " is not a symbol!");
      for (var e2 in Ia)
        if (Ia[e2] === t2)
          return e2;
    }, useSetter: function() {
      Ma = true;
    }, useSimple: function() {
      Ma = false;
    } }), Tn(Tn.S + Tn.F * !za, "Object", { create: function(t2, e2) {
      return void 0 === e2 ? la(t2) : Ua(la(t2), e2);
    }, defineProperty: Fa, defineProperties: Ua, getOwnPropertyDescriptor: ja, getOwnPropertyNames: Va, getOwnPropertySymbols: qa });
    var Xa = $o(function() {
      $n.f(1);
    });
    Tn(Tn.S + Tn.F * Xa, "Object", { getOwnPropertySymbols: function(t2) {
      return $n.f(ia(t2));
    } }), Ta && Tn(Tn.S + Tn.F * (!za || $o(function() {
      var t2 = xa();
      return "[null]" != Sa([t2]) || "{}" != Sa({ a: t2 }) || "{}" != Sa(Object(t2));
    })), "JSON", { stringify: function(t2) {
      for (var e2, i2, r2 = arguments, o2 = [t2], n2 = 1; arguments.length > n2; )
        o2.push(r2[n2++]);
      if (i2 = e2 = o2[1], (rn(e2) || void 0 !== t2) && !Oa(t2))
        return ea(e2) || (e2 = function(t3, e3) {
          if ("function" == typeof i2 && (e3 = i2.call(this, t3, e3)), !Oa(e3))
            return e3;
        }), o2[1] = e2, Sa.apply(Ta, o2);
    } }), xa.prototype[Aa] || fn(xa.prototype, Aa, xa.prototype.valueOf), In(xa, "Symbol"), In(Math, "Math", true), In(Yo.JSON, "JSON", true), Tn(Tn.S, "Object", { create: la }), Tn(Tn.S + Tn.F * !tn, "Object", { defineProperty: hn.f }), Tn(Tn.S + Tn.F * !tn, "Object", { defineProperties: ra });
    var Ka = function(t2, e2) {
      var i2 = (en.Object || {})[t2] || Object[t2], r2 = {};
      r2[t2] = e2(i2), Tn(Tn.S + Tn.F * $o(function() {
        i2(1);
      }), "Object", r2);
    }, Ya = ga.f;
    Ka("getOwnPropertyDescriptor", function() {
      return function(t2, e2) {
        return Ya(Rn(t2), e2);
      };
    });
    var Ja = Wn("IE_PROTO"), Qa = Object.prototype, $a = Object.getPrototypeOf || function(t2) {
      return t2 = ia(t2), Qo(t2, Ja) ? t2[Ja] : "function" == typeof t2.constructor && t2 instanceof t2.constructor ? t2.constructor.prototype : t2 instanceof Object ? Qa : null;
    };
    Ka("getPrototypeOf", function() {
      return function(t2) {
        return $a(ia(t2));
      };
    }), Ka("keys", function() {
      return function(t2) {
        return Qn(ia(t2));
      };
    }), Ka("getOwnPropertyNames", function() {
      return _a.f;
    });
    var ts = Sn.onFreeze;
    Ka("freeze", function(t2) {
      return function(e2) {
        return t2 && rn(e2) ? t2(ts(e2)) : e2;
      };
    });
    var es = Sn.onFreeze;
    Ka("seal", function(t2) {
      return function(e2) {
        return t2 && rn(e2) ? t2(es(e2)) : e2;
      };
    });
    var is = Sn.onFreeze;
    Ka("preventExtensions", function(t2) {
      return function(e2) {
        return t2 && rn(e2) ? t2(is(e2)) : e2;
      };
    }), Ka("isFrozen", function(t2) {
      return function(e2) {
        return !rn(e2) || !!t2 && t2(e2);
      };
    }), Ka("isSealed", function(t2) {
      return function(e2) {
        return !rn(e2) || !!t2 && t2(e2);
      };
    }), Ka("isExtensible", function(t2) {
      return function(e2) {
        return !!rn(e2) && (!t2 || t2(e2));
      };
    });
    var rs = Object.assign, os = !rs || $o(function() {
      var t2 = {}, e2 = {}, i2 = Symbol(), r2 = "abcdefghijklmnopqrst";
      return t2[i2] = 7, r2.split("").forEach(function(t3) {
        e2[t3] = t3;
      }), 7 != rs({}, t2)[i2] || Object.keys(rs({}, e2)).join("") != r2;
    }) ? function(t2, e2) {
      for (var i2 = arguments, r2 = ia(t2), o2 = arguments.length, n2 = 1, a2 = $n.f, s2 = ta.f; o2 > n2; )
        for (var c2, l2 = Mn(i2[n2++]), u2 = a2 ? Qn(l2).concat(a2(l2)) : Qn(l2), h2 = u2.length, p2 = 0; h2 > p2; )
          c2 = u2[p2++], tn && !s2.call(l2, c2) || (r2[c2] = l2[c2]);
      return r2;
    } : rs;
    Tn(Tn.S + Tn.F, "Object", { assign: os });
    var ns = Object.is || function(t2, e2) {
      return t2 === e2 ? 0 !== t2 || 1 / t2 == 1 / e2 : t2 != t2 && e2 != e2;
    };
    Tn(Tn.S, "Object", { is: ns });
    var as = function(t2, e2) {
      if (on(t2), !rn(e2) && null !== e2)
        throw TypeError(e2 + ": can't set as prototype!");
    }, ss = { set: Object.setPrototypeOf || ("__proto__" in {} ? function(t2, e2, i2) {
      try {
        (i2 = wn(Function.call, ga.f(Object.prototype, "__proto__").set, 2))(t2, []), e2 = !(t2 instanceof Array);
      } catch (t3) {
        e2 = true;
      }
      return function(t3, r2) {
        return as(t3, r2), e2 ? t3.__proto__ = r2 : i2(t3, r2), t3;
      };
    }({}, false) : void 0), check: as };
    Tn(Tn.S, "Object", { setPrototypeOf: ss.set });
    var cs = En("toStringTag"), ls = "Arguments" == Dn(function() {
      return arguments;
    }()), us = function(t2) {
      var e2, i2, r2;
      return void 0 === t2 ? "Undefined" : null === t2 ? "Null" : "string" == typeof (i2 = function(t3, e3) {
        try {
          return t3[e3];
        } catch (t4) {
        }
      }(e2 = Object(t2), cs)) ? i2 : ls ? Dn(e2) : "Object" == (r2 = Dn(e2)) && "function" == typeof e2.callee ? "Arguments" : r2;
    }, hs = {};
    hs[En("toStringTag")] = "z", hs + "" != "[object z]" && yn(Object.prototype, "toString", function() {
      return "[object " + us(this) + "]";
    }, true);
    var ps = function(t2, e2, i2) {
      var r2 = void 0 === i2;
      switch (e2.length) {
        case 0:
          return r2 ? t2() : t2.call(i2);
        case 1:
          return r2 ? t2(e2[0]) : t2.call(i2, e2[0]);
        case 2:
          return r2 ? t2(e2[0], e2[1]) : t2.call(i2, e2[0], e2[1]);
        case 3:
          return r2 ? t2(e2[0], e2[1], e2[2]) : t2.call(i2, e2[0], e2[1], e2[2]);
        case 4:
          return r2 ? t2(e2[0], e2[1], e2[2], e2[3]) : t2.call(i2, e2[0], e2[1], e2[2], e2[3]);
      }
      return t2.apply(i2, e2);
    }, fs = [].slice, ds = {}, _s = function(t2, e2, i2) {
      if (!(e2 in ds)) {
        for (var r2 = [], o2 = 0; o2 < e2; o2++)
          r2[o2] = "a[" + o2 + "]";
        ds[e2] = Function("F,a", "return new F(" + r2.join(",") + ")");
      }
      return ds[e2](t2, i2);
    }, ms = Function.bind || function(t2) {
      var e2 = bn(this), i2 = fs.call(arguments, 1), r2 = function() {
        var o2 = i2.concat(fs.call(arguments));
        return this instanceof r2 ? _s(e2, o2.length, o2) : ps(e2, o2, t2);
      };
      return rn(e2.prototype) && (r2.prototype = e2.prototype), r2;
    };
    Tn(Tn.P, "Function", { bind: ms });
    var gs = Function.prototype, vs = /^\s*function ([^ (]*)/;
    "name" in gs || tn && (0, hn.f)(gs, "name", { configurable: true, get: function() {
      try {
        return ("" + this).match(vs)[1];
      } catch (t2) {
        return "";
      }
    } });
    var ys = En("hasInstance"), bs = Function.prototype;
    ys in bs || hn.f(bs, ys, { value: function(t2) {
      if ("function" != typeof this || !rn(t2))
        return false;
      if (!rn(this.prototype))
        return t2 instanceof this;
      for (; t2 = $a(t2); )
        if (this.prototype === t2)
          return true;
      return false;
    } });
    var ws = "	\n\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF", xs = "[" + ws + "]", Ts = RegExp("^" + xs + xs + "*"), Ss = RegExp(xs + xs + "*$"), Es = function(t2, e2, i2) {
      var r2 = {}, o2 = $o(function() {
        return !!ws[t2]() || "\u200B\x85" != "\u200B\x85"[t2]();
      }), n2 = r2[t2] = o2 ? e2(As) : ws[t2];
      i2 && (r2[i2] = n2), Tn(Tn.P + Tn.F * o2, "String", r2);
    }, As = Es.trim = function(t2, e2) {
      return t2 = String(Ln(t2)), 1 & e2 && (t2 = t2.replace(Ts, "")), 2 & e2 && (t2 = t2.replace(Ss, "")), t2;
    }, ks = Es, Is = Yo.parseInt, Bs = ks.trim, Ps = /^[-+]?0[xX]/, Cs = 8 !== Is(ws + "08") || 22 !== Is(ws + "0x16") ? function(t2, e2) {
      var i2 = Bs(String(t2), 3);
      return Is(i2, e2 >>> 0 || (Ps.test(i2) ? 16 : 10));
    } : Is;
    Tn(Tn.G + Tn.F * (parseInt != Cs), { parseInt: Cs });
    var zs = Yo.parseFloat, Ds = ks.trim, Ms = 1 / zs(ws + "-0") != -1 / 0 ? function(t2) {
      var e2 = Ds(String(t2), 3), i2 = zs(e2);
      return 0 === i2 && "-" == e2.charAt(0) ? -0 : i2;
    } : zs;
    Tn(Tn.G + Tn.F * (parseFloat != Ms), { parseFloat: Ms });
    var Ls = ss.set, Rs = function(t2, e2, i2) {
      var r2, o2 = e2.constructor;
      return o2 !== i2 && "function" == typeof o2 && (r2 = o2.prototype) !== i2.prototype && rn(r2) && Ls && Ls(t2, r2), t2;
    }, Os = ha.f, Fs = ga.f, Us = hn.f, Ns = ks.trim, js = Yo.Number, Vs = js, qs = js.prototype, Zs = "Number" == Dn(la(qs)), Gs = "trim" in String.prototype, Hs = function(t2) {
      var e2 = ln(t2, false);
      if ("string" == typeof e2 && e2.length > 2) {
        var i2, r2, o2, n2 = (e2 = Gs ? e2.trim() : Ns(e2, 3)).charCodeAt(0);
        if (43 === n2 || 45 === n2) {
          if (88 === (i2 = e2.charCodeAt(2)) || 120 === i2)
            return NaN;
        } else if (48 === n2) {
          switch (e2.charCodeAt(1)) {
            case 66:
            case 98:
              r2 = 2, o2 = 49;
              break;
            case 79:
            case 111:
              r2 = 8, o2 = 55;
              break;
            default:
              return +e2;
          }
          for (var a2, s2 = e2.slice(2), c2 = 0, l2 = s2.length; c2 < l2; c2++)
            if ((a2 = s2.charCodeAt(c2)) < 48 || a2 > o2)
              return NaN;
          return parseInt(s2, r2);
        }
      }
      return +e2;
    };
    if (!js(" 0o1") || !js("0b1") || js("+0x1")) {
      js = function(t2) {
        var e2 = arguments.length < 1 ? 0 : t2, i2 = this;
        return i2 instanceof js && (Zs ? $o(function() {
          qs.valueOf.call(i2);
        }) : "Number" != Dn(i2)) ? Rs(new Vs(Hs(e2)), i2, js) : Hs(e2);
      };
      for (var Ws, Xs = tn ? Os(Vs) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), Ks = 0; Xs.length > Ks; Ks++)
        Qo(Vs, Ws = Xs[Ks]) && !Qo(js, Ws) && Us(js, Ws, Fs(Vs, Ws));
      js.prototype = qs, qs.constructor = js, yn(Yo, "Number", js);
    }
    var Ys = function(t2, e2) {
      if ("number" != typeof t2 && "Number" != Dn(t2))
        throw TypeError(e2);
      return +t2;
    }, Js = function(t2) {
      var e2 = String(Ln(this)), i2 = "", r2 = Un(t2);
      if (r2 < 0 || r2 == 1 / 0)
        throw RangeError("Count can't be negative");
      for (; r2 > 0; (r2 >>>= 1) && (e2 += e2))
        1 & r2 && (i2 += e2);
      return i2;
    }, Qs = 1 .toFixed, $s = Math.floor, tc = [0, 0, 0, 0, 0, 0], ec = "Number.toFixed: incorrect invocation!", ic = function(t2, e2) {
      for (var i2 = -1, r2 = e2; ++i2 < 6; )
        tc[i2] = (r2 += t2 * tc[i2]) % 1e7, r2 = $s(r2 / 1e7);
    }, rc = function(t2) {
      for (var e2 = 6, i2 = 0; --e2 >= 0; )
        tc[e2] = $s((i2 += tc[e2]) / t2), i2 = i2 % t2 * 1e7;
    }, oc = function() {
      for (var t2 = 6, e2 = ""; --t2 >= 0; )
        if ("" !== e2 || 0 === t2 || 0 !== tc[t2]) {
          var i2 = String(tc[t2]);
          e2 = "" === e2 ? i2 : e2 + Js.call("0", 7 - i2.length) + i2;
        }
      return e2;
    }, nc = function(t2, e2, i2) {
      return 0 === e2 ? i2 : e2 % 2 == 1 ? nc(t2, e2 - 1, i2 * t2) : nc(t2 * t2, e2 / 2, i2);
    };
    Tn(Tn.P + Tn.F * (!!Qs && ("0.000" !== 8e-5 .toFixed(3) || "1" !== 0.9 .toFixed(0) || "1.25" !== 1.255 .toFixed(2) || "1000000000000000128" !== 1000000000000000100 .toFixed(0)) || !$o(function() {
      Qs.call({});
    })), "Number", { toFixed: function(t2) {
      var e2, i2, r2, o2, n2 = Ys(this, ec), a2 = Un(t2), s2 = "", c2 = "0";
      if (a2 < 0 || a2 > 20)
        throw RangeError(ec);
      if (n2 != n2)
        return "NaN";
      if (n2 <= -1e21 || n2 >= 1e21)
        return String(n2);
      if (n2 < 0 && (s2 = "-", n2 = -n2), n2 > 1e-21)
        if (i2 = (e2 = function(t3) {
          for (var e3 = 0, i3 = t3; i3 >= 4096; )
            e3 += 12, i3 /= 4096;
          for (; i3 >= 2; )
            e3 += 1, i3 /= 2;
          return e3;
        }(n2 * nc(2, 69, 1)) - 69) < 0 ? n2 * nc(2, -e2, 1) : n2 / nc(2, e2, 1), i2 *= 4503599627370496, (e2 = 52 - e2) > 0) {
          for (ic(0, i2), r2 = a2; r2 >= 7; )
            ic(1e7, 0), r2 -= 7;
          for (ic(nc(10, r2, 1), 0), r2 = e2 - 1; r2 >= 23; )
            rc(1 << 23), r2 -= 23;
          rc(1 << r2), ic(1, 1), rc(2), c2 = oc();
        } else
          ic(0, i2), ic(1 << -e2, 0), c2 = oc() + Js.call("0", a2);
      return a2 > 0 ? s2 + ((o2 = c2.length) <= a2 ? "0." + Js.call("0", a2 - o2) + c2 : c2.slice(0, o2 - a2) + "." + c2.slice(o2 - a2)) : s2 + c2;
    } });
    var ac = 1 .toPrecision;
    Tn(Tn.P + Tn.F * ($o(function() {
      return "1" !== ac.call(1, void 0);
    }) || !$o(function() {
      ac.call({});
    })), "Number", { toPrecision: function(t2) {
      var e2 = Ys(this, "Number#toPrecision: incorrect invocation!");
      return void 0 === t2 ? ac.call(e2) : ac.call(e2, t2);
    } }), Tn(Tn.S, "Number", { EPSILON: Math.pow(2, -52) });
    var sc = Yo.isFinite;
    Tn(Tn.S, "Number", { isFinite: function(t2) {
      return "number" == typeof t2 && sc(t2);
    } });
    var cc = Math.floor, lc = function(t2) {
      return !rn(t2) && isFinite(t2) && cc(t2) === t2;
    };
    Tn(Tn.S, "Number", { isInteger: lc }), Tn(Tn.S, "Number", { isNaN: function(t2) {
      return t2 != t2;
    } });
    var uc = Math.abs;
    Tn(Tn.S, "Number", { isSafeInteger: function(t2) {
      return lc(t2) && uc(t2) <= 9007199254740991;
    } }), Tn(Tn.S, "Number", { MAX_SAFE_INTEGER: 9007199254740991 }), Tn(Tn.S, "Number", { MIN_SAFE_INTEGER: -9007199254740991 }), Tn(Tn.S + Tn.F * (Number.parseFloat != Ms), "Number", { parseFloat: Ms }), Tn(Tn.S + Tn.F * (Number.parseInt != Cs), "Number", { parseInt: Cs });
    var hc = Math.log1p || function(t2) {
      return (t2 = +t2) > -1e-8 && t2 < 1e-8 ? t2 - t2 * t2 / 2 : Math.log(1 + t2);
    }, pc = Math.sqrt, fc = Math.acosh;
    Tn(Tn.S + Tn.F * !(fc && 710 == Math.floor(fc(Number.MAX_VALUE)) && fc(1 / 0) == 1 / 0), "Math", { acosh: function(t2) {
      return (t2 = +t2) < 1 ? NaN : t2 > 9490626562425156e-8 ? Math.log(t2) + Math.LN2 : hc(t2 - 1 + pc(t2 - 1) * pc(t2 + 1));
    } });
    var dc = Math.asinh;
    Tn(Tn.S + Tn.F * !(dc && 1 / dc(0) > 0), "Math", { asinh: function t2(e2) {
      return isFinite(e2 = +e2) && 0 != e2 ? e2 < 0 ? -t2(-e2) : Math.log(e2 + Math.sqrt(e2 * e2 + 1)) : e2;
    } });
    var _c = Math.atanh;
    Tn(Tn.S + Tn.F * !(_c && 1 / _c(-0) < 0), "Math", { atanh: function(t2) {
      return 0 == (t2 = +t2) ? t2 : Math.log((1 + t2) / (1 - t2)) / 2;
    } });
    var mc = Math.sign || function(t2) {
      return 0 == (t2 = +t2) || t2 != t2 ? t2 : t2 < 0 ? -1 : 1;
    };
    Tn(Tn.S, "Math", { cbrt: function(t2) {
      return mc(t2 = +t2) * Math.pow(Math.abs(t2), 1 / 3);
    } }), Tn(Tn.S, "Math", { clz32: function(t2) {
      return (t2 >>>= 0) ? 31 - Math.floor(Math.log(t2 + 0.5) * Math.LOG2E) : 32;
    } });
    var gc = Math.exp;
    Tn(Tn.S, "Math", { cosh: function(t2) {
      return (gc(t2 = +t2) + gc(-t2)) / 2;
    } });
    var vc = Math.expm1, yc = !vc || vc(10) > 22025.465794806718 || vc(10) < 22025.465794806718 || -2e-17 != vc(-2e-17) ? function(t2) {
      return 0 == (t2 = +t2) ? t2 : t2 > -1e-6 && t2 < 1e-6 ? t2 + t2 * t2 / 2 : Math.exp(t2) - 1;
    } : vc;
    Tn(Tn.S + Tn.F * (yc != Math.expm1), "Math", { expm1: yc });
    var bc = Math.pow, wc = bc(2, -52), xc = bc(2, -23), Tc = bc(2, 127) * (2 - xc), Sc = bc(2, -126), Ec = Math.fround || function(t2) {
      var e2, i2, r2 = Math.abs(t2), o2 = mc(t2);
      return r2 < Sc ? o2 * (r2 / Sc / xc + 1 / wc - 1 / wc) * Sc * xc : (i2 = (e2 = (1 + xc / wc) * r2) - (e2 - r2)) > Tc || i2 != i2 ? o2 * (1 / 0) : o2 * i2;
    };
    Tn(Tn.S, "Math", { fround: Ec });
    var Ac2 = Math.abs;
    Tn(Tn.S, "Math", { hypot: function(t2, e2) {
      for (var i2, r2, o2 = arguments, n2 = 0, a2 = 0, s2 = arguments.length, c2 = 0; a2 < s2; )
        c2 < (i2 = Ac2(o2[a2++])) ? (n2 = n2 * (r2 = c2 / i2) * r2 + 1, c2 = i2) : n2 += i2 > 0 ? (r2 = i2 / c2) * r2 : i2;
      return c2 === 1 / 0 ? 1 / 0 : c2 * Math.sqrt(n2);
    } });
    var kc = Math.imul;
    Tn(Tn.S + Tn.F * $o(function() {
      return -5 != kc(4294967295, 5) || 2 != kc.length;
    }), "Math", { imul: function(t2, e2) {
      var i2 = +t2, r2 = +e2, o2 = 65535 & i2, n2 = 65535 & r2;
      return 0 | o2 * n2 + ((65535 & i2 >>> 16) * n2 + o2 * (65535 & r2 >>> 16) << 16 >>> 0);
    } }), Tn(Tn.S, "Math", { log10: function(t2) {
      return Math.log(t2) * Math.LOG10E;
    } }), Tn(Tn.S, "Math", { log1p: hc }), Tn(Tn.S, "Math", { log2: function(t2) {
      return Math.log(t2) / Math.LN2;
    } }), Tn(Tn.S, "Math", { sign: mc });
    var Ic = Math.exp;
    Tn(Tn.S + Tn.F * $o(function() {
      return -2e-17 != !Math.sinh(-2e-17);
    }), "Math", { sinh: function(t2) {
      return Math.abs(t2 = +t2) < 1 ? (yc(t2) - yc(-t2)) / 2 : (Ic(t2 - 1) - Ic(-t2 - 1)) * (Math.E / 2);
    } });
    var Bc = Math.exp;
    Tn(Tn.S, "Math", { tanh: function(t2) {
      var e2 = yc(t2 = +t2), i2 = yc(-t2);
      return e2 == 1 / 0 ? 1 : i2 == 1 / 0 ? -1 : (e2 - i2) / (Bc(t2) + Bc(-t2));
    } }), Tn(Tn.S, "Math", { trunc: function(t2) {
      return (t2 > 0 ? Math.floor : Math.ceil)(t2);
    } });
    var Pc = String.fromCharCode, Cc = String.fromCodePoint;
    Tn(Tn.S + Tn.F * (!!Cc && 1 != Cc.length), "String", { fromCodePoint: function(t2) {
      for (var e2, i2 = arguments, r2 = [], o2 = arguments.length, n2 = 0; o2 > n2; ) {
        if (e2 = +i2[n2++], Zn(e2, 1114111) !== e2)
          throw RangeError(e2 + " is not a valid code point");
        r2.push(e2 < 65536 ? Pc(e2) : Pc(55296 + ((e2 -= 65536) >> 10), e2 % 1024 + 56320));
      }
      return r2.join("");
    } }), Tn(Tn.S, "String", { raw: function(t2) {
      for (var e2 = arguments, i2 = Rn(t2.raw), r2 = jn(i2.length), o2 = arguments.length, n2 = [], a2 = 0; r2 > a2; )
        n2.push(String(i2[a2++])), a2 < o2 && n2.push(String(e2[a2]));
      return n2.join("");
    } }), ks("trim", function(t2) {
      return function() {
        return t2(this, 3);
      };
    });
    var zc = function(t2) {
      return function(e2, i2) {
        var r2, o2, n2 = String(Ln(e2)), a2 = Un(i2), s2 = n2.length;
        return a2 < 0 || a2 >= s2 ? t2 ? "" : void 0 : (r2 = n2.charCodeAt(a2)) < 55296 || r2 > 56319 || a2 + 1 === s2 || (o2 = n2.charCodeAt(a2 + 1)) < 56320 || o2 > 57343 ? t2 ? n2.charAt(a2) : r2 : t2 ? n2.slice(a2, a2 + 2) : o2 - 56320 + (r2 - 55296 << 10) + 65536;
      };
    }, Dc = {}, Mc = {};
    fn(Mc, En("iterator"), function() {
      return this;
    });
    var Lc = function(t2, e2, i2) {
      t2.prototype = la(Mc, { next: pn(1, i2) }), In(t2, e2 + " Iterator");
    }, Rc = En("iterator"), Oc = !([].keys && "next" in [].keys()), Fc = function() {
      return this;
    }, Uc = function(t2, e2, i2, r2, o2, n2, a2) {
      Lc(i2, e2, r2);
      var s2, c2, l2, u2 = function(t3) {
        if (!Oc && t3 in d2)
          return d2[t3];
        switch (t3) {
          case "keys":
          case "values":
            return function() {
              return new i2(this, t3);
            };
        }
        return function() {
          return new i2(this, t3);
        };
      }, h2 = e2 + " Iterator", p2 = "values" == o2, f2 = false, d2 = t2.prototype, _3 = d2[Rc] || d2["@@iterator"] || o2 && d2[o2], m2 = _3 || u2(o2), g2 = o2 ? p2 ? u2("entries") : m2 : void 0, v2 = "Array" == e2 && d2.entries || _3;
      if (v2 && (l2 = $a(v2.call(new t2()))) !== Object.prototype && l2.next && (In(l2, h2, true), "function" != typeof l2[Rc] && fn(l2, Rc, Fc)), p2 && _3 && "values" !== _3.name && (f2 = true, m2 = function() {
        return _3.call(this);
      }), (Oc || f2 || !d2[Rc]) && fn(d2, Rc, m2), Dc[e2] = m2, Dc[h2] = Fc, o2)
        if (s2 = { values: p2 ? m2 : u2("values"), keys: n2 ? m2 : u2("keys"), entries: g2 }, a2)
          for (c2 in s2)
            c2 in d2 || yn(d2, c2, s2[c2]);
        else
          Tn(Tn.P + Tn.F * (Oc || f2), e2, s2);
      return s2;
    }, Nc = zc(true);
    Uc(String, "String", function(t2) {
      this._t = String(t2), this._i = 0;
    }, function() {
      var t2, e2 = this._t, i2 = this._i;
      return i2 >= e2.length ? { value: void 0, done: true } : (t2 = Nc(e2, i2), this._i += t2.length, { value: t2, done: false });
    });
    var jc = zc(false);
    Tn(Tn.P, "String", { codePointAt: function(t2) {
      return jc(this, t2);
    } });
    var Vc = En("match"), qc = function(t2) {
      var e2;
      return rn(t2) && (void 0 !== (e2 = t2[Vc]) ? !!e2 : "RegExp" == Dn(t2));
    }, Zc = function(t2, e2, i2) {
      if (qc(e2))
        throw TypeError("String#" + i2 + " doesn't accept regex!");
      return String(Ln(t2));
    }, Gc = En("match"), Hc = function(t2) {
      var e2 = /./;
      try {
        "/./"[t2](e2);
      } catch (i2) {
        try {
          return e2[Gc] = false, !"/./"[t2](e2);
        } catch (t3) {
        }
      }
      return true;
    }, Wc = "".endsWith;
    Tn(Tn.P + Tn.F * Hc("endsWith"), "String", { endsWith: function(t2) {
      var e2 = Zc(this, t2, "endsWith"), i2 = arguments.length > 1 ? arguments[1] : void 0, r2 = jn(e2.length), o2 = void 0 === i2 ? r2 : Math.min(jn(i2), r2), n2 = String(t2);
      return Wc ? Wc.call(e2, n2, o2) : e2.slice(o2 - n2.length, o2) === n2;
    } }), Tn(Tn.P + Tn.F * Hc("includes"), "String", { includes: function(t2) {
      return !!~Zc(this, t2, "includes").indexOf(t2, arguments.length > 1 ? arguments[1] : void 0);
    } }), Tn(Tn.P, "String", { repeat: Js });
    var Xc = "".startsWith;
    Tn(Tn.P + Tn.F * Hc("startsWith"), "String", { startsWith: function(t2) {
      var e2 = Zc(this, t2, "startsWith"), i2 = jn(Math.min(arguments.length > 1 ? arguments[1] : void 0, e2.length)), r2 = String(t2);
      return Xc ? Xc.call(e2, r2, i2) : e2.slice(i2, i2 + r2.length) === r2;
    } });
    var Kc = /"/g, Yc = function(t2, e2, i2, r2) {
      var o2 = String(Ln(t2)), n2 = "<" + e2;
      return "" !== i2 && (n2 += " " + i2 + '="' + String(r2).replace(Kc, "&quot;") + '"'), n2 + ">" + o2 + "</" + e2 + ">";
    }, Jc = function(t2, e2) {
      var i2 = {};
      i2[t2] = e2(Yc), Tn(Tn.P + Tn.F * $o(function() {
        var e3 = ""[t2]('"');
        return e3 !== e3.toLowerCase() || e3.split('"').length > 3;
      }), "String", i2);
    };
    Jc("anchor", function(t2) {
      return function(e2) {
        return t2(this, "a", "name", e2);
      };
    }), Jc("big", function(t2) {
      return function() {
        return t2(this, "big", "", "");
      };
    }), Jc("blink", function(t2) {
      return function() {
        return t2(this, "blink", "", "");
      };
    }), Jc("bold", function(t2) {
      return function() {
        return t2(this, "b", "", "");
      };
    }), Jc("fixed", function(t2) {
      return function() {
        return t2(this, "tt", "", "");
      };
    }), Jc("fontcolor", function(t2) {
      return function(e2) {
        return t2(this, "font", "color", e2);
      };
    }), Jc("fontsize", function(t2) {
      return function(e2) {
        return t2(this, "font", "size", e2);
      };
    }), Jc("italics", function(t2) {
      return function() {
        return t2(this, "i", "", "");
      };
    }), Jc("link", function(t2) {
      return function(e2) {
        return t2(this, "a", "href", e2);
      };
    }), Jc("small", function(t2) {
      return function() {
        return t2(this, "small", "", "");
      };
    }), Jc("strike", function(t2) {
      return function() {
        return t2(this, "strike", "", "");
      };
    }), Jc("sub", function(t2) {
      return function() {
        return t2(this, "sub", "", "");
      };
    }), Jc("sup", function(t2) {
      return function() {
        return t2(this, "sup", "", "");
      };
    }), Tn(Tn.S, "Date", { now: function() {
      return new Date().getTime();
    } }), Tn(Tn.P + Tn.F * $o(function() {
      return null !== new Date(NaN).toJSON() || 1 !== Date.prototype.toJSON.call({ toISOString: function() {
        return 1;
      } });
    }), "Date", { toJSON: function(t2) {
      var e2 = ia(this), i2 = ln(e2);
      return "number" != typeof i2 || isFinite(i2) ? e2.toISOString() : null;
    } });
    var Qc = Date.prototype.getTime, $c = Date.prototype.toISOString, tl = function(t2) {
      return t2 > 9 ? t2 : "0" + t2;
    }, el = $o(function() {
      return "0385-07-25T07:06:39.999Z" != $c.call(new Date(-50000000000001));
    }) || !$o(function() {
      $c.call(new Date(NaN));
    }) ? function() {
      if (!isFinite(Qc.call(this)))
        throw RangeError("Invalid time value");
      var t2 = this, e2 = t2.getUTCFullYear(), i2 = t2.getUTCMilliseconds(), r2 = e2 < 0 ? "-" : e2 > 9999 ? "+" : "";
      return r2 + ("00000" + Math.abs(e2)).slice(r2 ? -6 : -4) + "-" + tl(t2.getUTCMonth() + 1) + "-" + tl(t2.getUTCDate()) + "T" + tl(t2.getUTCHours()) + ":" + tl(t2.getUTCMinutes()) + ":" + tl(t2.getUTCSeconds()) + "." + (i2 > 99 ? i2 : "0" + tl(i2)) + "Z";
    } : $c;
    Tn(Tn.P + Tn.F * (Date.prototype.toISOString !== el), "Date", { toISOString: el });
    var il = Date.prototype, rl = il.toString, ol = il.getTime;
    new Date(NaN) + "" != "Invalid Date" && yn(il, "toString", function() {
      var t2 = ol.call(this);
      return t2 == t2 ? rl.call(this) : "Invalid Date";
    });
    var nl = En("toPrimitive"), al = Date.prototype;
    nl in al || fn(al, nl, function(t2) {
      if ("string" !== t2 && "number" !== t2 && "default" !== t2)
        throw TypeError("Incorrect hint");
      return ln(on(this), "number" != t2);
    }), Tn(Tn.S, "Array", { isArray: ea });
    var sl = function(t2, e2, i2, r2) {
      try {
        return r2 ? e2(on(i2)[0], i2[1]) : e2(i2);
      } catch (e3) {
        var o2 = t2.return;
        throw void 0 !== o2 && on(o2.call(t2)), e3;
      }
    }, cl = En("iterator"), ll = Array.prototype, ul = function(t2) {
      return void 0 !== t2 && (Dc.Array === t2 || ll[cl] === t2);
    }, hl = function(t2, e2, i2) {
      e2 in t2 ? hn.f(t2, e2, pn(0, i2)) : t2[e2] = i2;
    }, pl = En("iterator"), fl = en.getIteratorMethod = function(t2) {
      if (null != t2)
        return t2[pl] || t2["@@iterator"] || Dc[us(t2)];
    }, dl = En("iterator"), _l = false;
    try {
      var ml = [7][dl]();
      ml.return = function() {
        _l = true;
      }, Array.from(ml, function() {
        throw 2;
      });
    } catch (t2) {
    }
    var gl = function(t2, e2) {
      if (!e2 && !_l)
        return false;
      var i2 = false;
      try {
        var r2 = [7], o2 = r2[dl]();
        o2.next = function() {
          return { done: i2 = true };
        }, r2[dl] = function() {
          return o2;
        }, t2(r2);
      } catch (t3) {
      }
      return i2;
    };
    Tn(Tn.S + Tn.F * !gl(function(t2) {
      Array.from(t2);
    }), "Array", { from: function(t2) {
      var e2, i2, r2, o2, n2 = ia(t2), a2 = "function" == typeof this ? this : Array, s2 = arguments.length, c2 = s2 > 1 ? arguments[1] : void 0, l2 = void 0 !== c2, u2 = 0, h2 = fl(n2);
      if (l2 && (c2 = wn(c2, s2 > 2 ? arguments[2] : void 0, 2)), null == h2 || a2 == Array && ul(h2))
        for (i2 = new a2(e2 = jn(n2.length)); e2 > u2; u2++)
          hl(i2, u2, l2 ? c2(n2[u2], u2) : n2[u2]);
      else
        for (o2 = h2.call(n2), i2 = new a2(); !(r2 = o2.next()).done; u2++)
          hl(i2, u2, l2 ? sl(o2, c2, [r2.value, u2], true) : r2.value);
      return i2.length = u2, i2;
    } }), Tn(Tn.S + Tn.F * $o(function() {
      function t2() {
      }
      return !(Array.of.call(t2) instanceof t2);
    }), "Array", { of: function() {
      for (var t2 = arguments, e2 = 0, i2 = arguments.length, r2 = new ("function" == typeof this ? this : Array)(i2); i2 > e2; )
        hl(r2, e2, t2[e2++]);
      return r2.length = i2, r2;
    } });
    var vl = function(t2, e2) {
      return !!t2 && $o(function() {
        e2 ? t2.call(null, function() {
        }, 1) : t2.call(null);
      });
    }, yl = [].join;
    Tn(Tn.P + Tn.F * (Mn != Object || !vl(yl)), "Array", { join: function(t2) {
      return yl.call(Rn(this), void 0 === t2 ? "," : t2);
    } });
    var bl = [].slice;
    Tn(Tn.P + Tn.F * $o(function() {
      na && bl.call(na);
    }), "Array", { slice: function(t2, e2) {
      var i2 = jn(this.length), r2 = Dn(this);
      if (e2 = void 0 === e2 ? i2 : e2, "Array" == r2)
        return bl.call(this, t2, e2);
      for (var o2 = Zn(t2, i2), n2 = Zn(e2, i2), a2 = jn(n2 - o2), s2 = new Array(a2), c2 = 0; c2 < a2; c2++)
        s2[c2] = "String" == r2 ? this.charAt(o2 + c2) : this[o2 + c2];
      return s2;
    } });
    var wl = [].sort, xl = [1, 2, 3];
    Tn(Tn.P + Tn.F * ($o(function() {
      xl.sort(void 0);
    }) || !$o(function() {
      xl.sort(null);
    }) || !vl(wl)), "Array", { sort: function(t2) {
      return void 0 === t2 ? wl.call(ia(this)) : wl.call(ia(this), bn(t2));
    } });
    var Tl = En("species"), Sl = function(t2, e2) {
      return new (function(t3) {
        var e3;
        return ea(t3) && ("function" != typeof (e3 = t3.constructor) || e3 !== Array && !ea(e3.prototype) || (e3 = void 0), rn(e3) && null === (e3 = e3[Tl]) && (e3 = void 0)), void 0 === e3 ? Array : e3;
      }(t2))(e2);
    }, El = function(t2, e2) {
      var i2 = 1 == t2, r2 = 2 == t2, o2 = 3 == t2, n2 = 4 == t2, a2 = 6 == t2, s2 = 5 == t2 || a2, c2 = e2 || Sl;
      return function(e3, l2, u2) {
        for (var h2, p2, f2 = ia(e3), d2 = Mn(f2), _3 = wn(l2, u2, 3), m2 = jn(d2.length), g2 = 0, v2 = i2 ? c2(e3, m2) : r2 ? c2(e3, 0) : void 0; m2 > g2; g2++)
          if ((s2 || g2 in d2) && (p2 = _3(h2 = d2[g2], g2, f2), t2)) {
            if (i2)
              v2[g2] = p2;
            else if (p2)
              switch (t2) {
                case 3:
                  return true;
                case 5:
                  return h2;
                case 6:
                  return g2;
                case 2:
                  v2.push(h2);
              }
            else if (n2)
              return false;
          }
        return a2 ? -1 : o2 || n2 ? n2 : v2;
      };
    }, Al = El(0), kl = vl([].forEach, true);
    Tn(Tn.P + Tn.F * !kl, "Array", { forEach: function(t2) {
      return Al(this, t2, arguments[1]);
    } });
    var Il = El(1);
    Tn(Tn.P + Tn.F * !vl([].map, true), "Array", { map: function(t2) {
      return Il(this, t2, arguments[1]);
    } });
    var Bl = El(2);
    Tn(Tn.P + Tn.F * !vl([].filter, true), "Array", { filter: function(t2) {
      return Bl(this, t2, arguments[1]);
    } });
    var Pl = El(3);
    Tn(Tn.P + Tn.F * !vl([].some, true), "Array", { some: function(t2) {
      return Pl(this, t2, arguments[1]);
    } });
    var Cl = El(4);
    Tn(Tn.P + Tn.F * !vl([].every, true), "Array", { every: function(t2) {
      return Cl(this, t2, arguments[1]);
    } });
    var zl = function(t2, e2, i2, r2, o2) {
      bn(e2);
      var n2 = ia(t2), a2 = Mn(n2), s2 = jn(n2.length), c2 = o2 ? s2 - 1 : 0, l2 = o2 ? -1 : 1;
      if (i2 < 2)
        for (; ; ) {
          if (c2 in a2) {
            r2 = a2[c2], c2 += l2;
            break;
          }
          if (c2 += l2, o2 ? c2 < 0 : s2 <= c2)
            throw TypeError("Reduce of empty array with no initial value");
        }
      for (; o2 ? c2 >= 0 : s2 > c2; c2 += l2)
        c2 in a2 && (r2 = e2(r2, a2[c2], c2, n2));
      return r2;
    };
    Tn(Tn.P + Tn.F * !vl([].reduce, true), "Array", { reduce: function(t2) {
      return zl(this, t2, arguments.length, arguments[1], false);
    } }), Tn(Tn.P + Tn.F * !vl([].reduceRight, true), "Array", { reduceRight: function(t2) {
      return zl(this, t2, arguments.length, arguments[1], true);
    } });
    var Dl = Gn(false), Ml = [].indexOf, Ll = !!Ml && 1 / [1].indexOf(1, -0) < 0;
    Tn(Tn.P + Tn.F * (Ll || !vl(Ml)), "Array", { indexOf: function(t2) {
      return Ll ? Ml.apply(this, arguments) || 0 : Dl(this, t2, arguments[1]);
    } });
    var Rl = [].lastIndexOf, Ol = !!Rl && 1 / [1].lastIndexOf(1, -0) < 0;
    Tn(Tn.P + Tn.F * (Ol || !vl(Rl)), "Array", { lastIndexOf: function(t2) {
      if (Ol)
        return Rl.apply(this, arguments) || 0;
      var e2 = Rn(this), i2 = jn(e2.length), r2 = i2 - 1;
      for (arguments.length > 1 && (r2 = Math.min(r2, Un(arguments[1]))), r2 < 0 && (r2 = i2 + r2); r2 >= 0; r2--)
        if (r2 in e2 && e2[r2] === t2)
          return r2 || 0;
      return -1;
    } });
    var Fl = [].copyWithin || function(t2, e2) {
      var i2 = ia(this), r2 = jn(i2.length), o2 = Zn(t2, r2), n2 = Zn(e2, r2), a2 = arguments.length > 2 ? arguments[2] : void 0, s2 = Math.min((void 0 === a2 ? r2 : Zn(a2, r2)) - n2, r2 - o2), c2 = 1;
      for (n2 < o2 && o2 < n2 + s2 && (c2 = -1, n2 += s2 - 1, o2 += s2 - 1); s2-- > 0; )
        n2 in i2 ? i2[o2] = i2[n2] : delete i2[o2], o2 += c2, n2 += c2;
      return i2;
    }, Ul = En("unscopables"), Nl = Array.prototype;
    null == Nl[Ul] && fn(Nl, Ul, {});
    var jl = function(t2) {
      Nl[Ul][t2] = true;
    };
    Tn(Tn.P, "Array", { copyWithin: Fl }), jl("copyWithin");
    var Vl = function(t2) {
      for (var e2 = ia(this), i2 = jn(e2.length), r2 = arguments.length, o2 = Zn(r2 > 1 ? arguments[1] : void 0, i2), n2 = r2 > 2 ? arguments[2] : void 0, a2 = void 0 === n2 ? i2 : Zn(n2, i2); a2 > o2; )
        e2[o2++] = t2;
      return e2;
    };
    Tn(Tn.P, "Array", { fill: Vl }), jl("fill");
    var ql = El(5), Zl = true;
    "find" in [] && Array(1).find(function() {
      Zl = false;
    }), Tn(Tn.P + Tn.F * Zl, "Array", { find: function(t2) {
      return ql(this, t2, arguments.length > 1 ? arguments[1] : void 0);
    } }), jl("find");
    var Gl = El(6), Hl = true;
    "findIndex" in [] && Array(1).findIndex(function() {
      Hl = false;
    }), Tn(Tn.P + Tn.F * Hl, "Array", { findIndex: function(t2) {
      return Gl(this, t2, arguments.length > 1 ? arguments[1] : void 0);
    } }), jl("findIndex");
    var Wl = En("species"), Xl = function(t2) {
      var e2 = Yo[t2];
      tn && e2 && !e2[Wl] && hn.f(e2, Wl, { configurable: true, get: function() {
        return this;
      } });
    };
    Xl("Array");
    var Kl = function(t2, e2) {
      return { value: e2, done: !!t2 };
    }, Yl = Uc(Array, "Array", function(t2, e2) {
      this._t = Rn(t2), this._i = 0, this._k = e2;
    }, function() {
      var t2 = this._t, e2 = this._k, i2 = this._i++;
      return !t2 || i2 >= t2.length ? (this._t = void 0, Kl(1)) : Kl(0, "keys" == e2 ? i2 : "values" == e2 ? t2[i2] : [i2, t2[i2]]);
    }, "values");
    Dc.Arguments = Dc.Array, jl("keys"), jl("values"), jl("entries");
    var Jl = function() {
      var t2 = on(this), e2 = "";
      return t2.global && (e2 += "g"), t2.ignoreCase && (e2 += "i"), t2.multiline && (e2 += "m"), t2.unicode && (e2 += "u"), t2.sticky && (e2 += "y"), e2;
    }, Ql = hn.f, $l = ha.f, tu = Yo.RegExp, eu = tu, iu = tu.prototype, ru = /a/g, ou = /a/g, nu = new tu(ru) !== ru;
    if (tn && (!nu || $o(function() {
      return ou[En("match")] = false, tu(ru) != ru || tu(ou) == ou || "/a/i" != tu(ru, "i");
    }))) {
      tu = function(t2, e2) {
        var i2 = this instanceof tu, r2 = qc(t2), o2 = void 0 === e2;
        return !i2 && r2 && t2.constructor === tu && o2 ? t2 : Rs(nu ? new eu(r2 && !o2 ? t2.source : t2, e2) : eu((r2 = t2 instanceof tu) ? t2.source : t2, r2 && o2 ? Jl.call(t2) : e2), i2 ? this : iu, tu);
      };
      for (var au = function(t2) {
        t2 in tu || Ql(tu, t2, { configurable: true, get: function() {
          return eu[t2];
        }, set: function(e2) {
          eu[t2] = e2;
        } });
      }, su = $l(eu), cu = 0; su.length > cu; )
        au(su[cu++]);
      iu.constructor = tu, tu.prototype = iu, yn(Yo, "RegExp", tu);
    }
    Xl("RegExp");
    var lu = RegExp.prototype.exec, uu = String.prototype.replace, hu = lu, pu = function() {
      var t2 = /a/, e2 = /b*/g;
      return lu.call(t2, "a"), lu.call(e2, "a"), 0 !== t2.lastIndex || 0 !== e2.lastIndex;
    }(), fu = void 0 !== /()??/.exec("")[1];
    (pu || fu) && (hu = function(t2) {
      var e2, i2, r2, o2, n2 = this;
      return fu && (i2 = new RegExp("^" + n2.source + "$(?!\\s)", Jl.call(n2))), pu && (e2 = n2.lastIndex), r2 = lu.call(n2, t2), pu && r2 && (n2.lastIndex = n2.global ? r2.index + r2[0].length : e2), fu && r2 && r2.length > 1 && uu.call(r2[0], i2, function() {
        var t3 = arguments;
        for (o2 = 1; o2 < arguments.length - 2; o2++)
          void 0 === t3[o2] && (r2[o2] = void 0);
      }), r2;
    });
    var du = hu;
    Tn({ target: "RegExp", proto: true, forced: du !== /./.exec }, { exec: du }), tn && "g" != /./g.flags && hn.f(RegExp.prototype, "flags", { configurable: true, get: Jl });
    var _u = /./.toString, mu = function(t2) {
      yn(RegExp.prototype, "toString", t2, true);
    };
    $o(function() {
      return "/a/b" != _u.call({ source: "a", flags: "b" });
    }) ? mu(function() {
      var t2 = on(this);
      return "/".concat(t2.source, "/", "flags" in t2 ? t2.flags : !tn && t2 instanceof RegExp ? Jl.call(t2) : void 0);
    }) : "toString" != _u.name && mu(function() {
      return _u.call(this);
    });
    var gu = zc(true), vu = function(t2, e2, i2) {
      return e2 + (i2 ? gu(t2, e2).length : 1);
    }, yu = RegExp.prototype.exec, bu = function(t2, e2) {
      var i2 = t2.exec;
      if ("function" == typeof i2) {
        var r2 = i2.call(t2, e2);
        if ("object" != typeof r2)
          throw new TypeError("RegExp exec method returned something other than an Object or null");
        return r2;
      }
      if ("RegExp" !== us(t2))
        throw new TypeError("RegExp#exec called on incompatible receiver");
      return yu.call(t2, e2);
    }, wu = En("species"), xu = !$o(function() {
      var t2 = /./;
      return t2.exec = function() {
        var t3 = [];
        return t3.groups = { a: "7" }, t3;
      }, "7" !== "".replace(t2, "$<a>");
    }), Tu = function() {
      var t2 = /(?:)/, e2 = t2.exec;
      t2.exec = function() {
        return e2.apply(this, arguments);
      };
      var i2 = "ab".split(t2);
      return 2 === i2.length && "a" === i2[0] && "b" === i2[1];
    }(), Su = function(t2, e2, i2) {
      var r2 = En(t2), o2 = !$o(function() {
        var e3 = {};
        return e3[r2] = function() {
          return 7;
        }, 7 != ""[t2](e3);
      }), n2 = o2 ? !$o(function() {
        var e3 = false, i3 = /a/;
        return i3.exec = function() {
          return e3 = true, null;
        }, "split" === t2 && (i3.constructor = {}, i3.constructor[wu] = function() {
          return i3;
        }), i3[r2](""), !e3;
      }) : void 0;
      if (!o2 || !n2 || "replace" === t2 && !xu || "split" === t2 && !Tu) {
        var a2 = /./[r2], s2 = i2(Ln, r2, ""[t2], function(t3, e3, i3, r3, n3) {
          return e3.exec === du ? o2 && !n3 ? { done: true, value: a2.call(e3, i3, r3) } : { done: true, value: t3.call(i3, e3, r3) } : { done: false };
        }), c2 = s2[1];
        yn(String.prototype, t2, s2[0]), fn(RegExp.prototype, r2, 2 == e2 ? function(t3, e3) {
          return c2.call(t3, this, e3);
        } : function(t3) {
          return c2.call(t3, this);
        });
      }
    };
    Su("match", 1, function(t2, e2, i2, r2) {
      return [function(i3) {
        var r3 = t2(this), o2 = null == i3 ? void 0 : i3[e2];
        return void 0 !== o2 ? o2.call(i3, r3) : new RegExp(i3)[e2](String(r3));
      }, function(t3) {
        var e3 = r2(i2, t3, this);
        if (e3.done)
          return e3.value;
        var o2 = on(t3), n2 = String(this);
        if (!o2.global)
          return bu(o2, n2);
        var a2 = o2.unicode;
        o2.lastIndex = 0;
        for (var s2, c2 = [], l2 = 0; null !== (s2 = bu(o2, n2)); ) {
          var u2 = String(s2[0]);
          c2[l2] = u2, "" === u2 && (o2.lastIndex = vu(n2, jn(o2.lastIndex), a2)), l2++;
        }
        return 0 === l2 ? null : c2;
      }];
    });
    var Eu = Math.max, Au = Math.min, ku = Math.floor, Iu = /\$([$&`']|\d\d?|<[^>]*>)/g, Bu = /\$([$&`']|\d\d?)/g;
    Su("replace", 2, function(t2, e2, i2, r2) {
      return [function(r3, o3) {
        var n2 = t2(this), a2 = null == r3 ? void 0 : r3[e2];
        return void 0 !== a2 ? a2.call(r3, n2, o3) : i2.call(String(n2), r3, o3);
      }, function(t3, e3) {
        var n2 = r2(i2, t3, this, e3);
        if (n2.done)
          return n2.value;
        var a2 = on(t3), s2 = String(this), c2 = "function" == typeof e3;
        c2 || (e3 = String(e3));
        var l2 = a2.global;
        if (l2) {
          var u2 = a2.unicode;
          a2.lastIndex = 0;
        }
        for (var h2 = []; ; ) {
          var p2 = bu(a2, s2);
          if (null === p2)
            break;
          if (h2.push(p2), !l2)
            break;
          "" === String(p2[0]) && (a2.lastIndex = vu(s2, jn(a2.lastIndex), u2));
        }
        for (var f2, d2 = "", _3 = 0, m2 = 0; m2 < h2.length; m2++) {
          p2 = h2[m2];
          for (var g2 = String(p2[0]), v2 = Eu(Au(Un(p2.index), s2.length), 0), y2 = [], b2 = 1; b2 < p2.length; b2++)
            y2.push(void 0 === (f2 = p2[b2]) ? f2 : String(f2));
          var w2 = p2.groups;
          if (c2) {
            var x2 = [g2].concat(y2, v2, s2);
            void 0 !== w2 && x2.push(w2);
            var T2 = String(e3.apply(void 0, x2));
          } else
            T2 = o2(g2, s2, v2, y2, w2, e3);
          v2 >= _3 && (d2 += s2.slice(_3, v2) + T2, _3 = v2 + g2.length);
        }
        return d2 + s2.slice(_3);
      }];
      function o2(t3, e3, r3, o3, n2, a2) {
        var s2 = r3 + t3.length, c2 = o3.length, l2 = Bu;
        return void 0 !== n2 && (n2 = ia(n2), l2 = Iu), i2.call(a2, l2, function(i3, a3) {
          var l3;
          switch (a3.charAt(0)) {
            case "$":
              return "$";
            case "&":
              return t3;
            case "`":
              return e3.slice(0, r3);
            case "'":
              return e3.slice(s2);
            case "<":
              l3 = n2[a3.slice(1, -1)];
              break;
            default:
              var u2 = +a3;
              if (0 === u2)
                return i3;
              if (u2 > c2) {
                var h2 = ku(u2 / 10);
                return 0 === h2 ? i3 : h2 <= c2 ? void 0 === o3[h2 - 1] ? a3.charAt(1) : o3[h2 - 1] + a3.charAt(1) : i3;
              }
              l3 = o3[u2 - 1];
          }
          return void 0 === l3 ? "" : l3;
        });
      }
    }), Su("search", 1, function(t2, e2, i2, r2) {
      return [function(i3) {
        var r3 = t2(this), o2 = null == i3 ? void 0 : i3[e2];
        return void 0 !== o2 ? o2.call(i3, r3) : new RegExp(i3)[e2](String(r3));
      }, function(t3) {
        var e3 = r2(i2, t3, this);
        if (e3.done)
          return e3.value;
        var o2 = on(t3), n2 = String(this), a2 = o2.lastIndex;
        ns(a2, 0) || (o2.lastIndex = 0);
        var s2 = bu(o2, n2);
        return ns(o2.lastIndex, a2) || (o2.lastIndex = a2), null === s2 ? -1 : s2.index;
      }];
    });
    var Pu = En("species"), Cu = function(t2, e2) {
      var i2, r2 = on(t2).constructor;
      return void 0 === r2 || null == (i2 = on(r2)[Pu]) ? e2 : bn(i2);
    }, zu = Math.min, Du = [].push, Mu = "length", Lu = !$o(function() {
      RegExp(4294967295, "y");
    });
    Su("split", 2, function(t2, e2, i2, r2) {
      var o2;
      return o2 = "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1)[Mu] || 2 != "ab".split(/(?:ab)*/)[Mu] || 4 != ".".split(/(.?)(.?)/)[Mu] || ".".split(/()()/)[Mu] > 1 || "".split(/.?/)[Mu] ? function(t3, e3) {
        var r3 = String(this);
        if (void 0 === t3 && 0 === e3)
          return [];
        if (!qc(t3))
          return i2.call(r3, t3, e3);
        for (var o3, n2, a2, s2 = [], c2 = 0, l2 = void 0 === e3 ? 4294967295 : e3 >>> 0, u2 = new RegExp(t3.source, (t3.ignoreCase ? "i" : "") + (t3.multiline ? "m" : "") + (t3.unicode ? "u" : "") + (t3.sticky ? "y" : "") + "g"); (o3 = du.call(u2, r3)) && !((n2 = u2.lastIndex) > c2 && (s2.push(r3.slice(c2, o3.index)), o3[Mu] > 1 && o3.index < r3[Mu] && Du.apply(s2, o3.slice(1)), a2 = o3[0][Mu], c2 = n2, s2[Mu] >= l2)); )
          u2.lastIndex === o3.index && u2.lastIndex++;
        return c2 === r3[Mu] ? !a2 && u2.test("") || s2.push("") : s2.push(r3.slice(c2)), s2[Mu] > l2 ? s2.slice(0, l2) : s2;
      } : "0".split(void 0, 0)[Mu] ? function(t3, e3) {
        return void 0 === t3 && 0 === e3 ? [] : i2.call(this, t3, e3);
      } : i2, [function(i3, r3) {
        var n2 = t2(this), a2 = null == i3 ? void 0 : i3[e2];
        return void 0 !== a2 ? a2.call(i3, n2, r3) : o2.call(String(n2), i3, r3);
      }, function(t3, e3) {
        var n2 = r2(o2, t3, this, e3, o2 !== i2);
        if (n2.done)
          return n2.value;
        var a2 = on(t3), s2 = String(this), c2 = Cu(a2, RegExp), l2 = a2.unicode, u2 = new c2(Lu ? a2 : "^(?:" + a2.source + ")", (a2.ignoreCase ? "i" : "") + (a2.multiline ? "m" : "") + (a2.unicode ? "u" : "") + (Lu ? "y" : "g")), h2 = void 0 === e3 ? 4294967295 : e3 >>> 0;
        if (0 === h2)
          return [];
        if (0 === s2.length)
          return null === bu(u2, s2) ? [s2] : [];
        for (var p2 = 0, f2 = 0, d2 = []; f2 < s2.length; ) {
          u2.lastIndex = Lu ? f2 : 0;
          var _3, m2 = bu(u2, Lu ? s2 : s2.slice(f2));
          if (null === m2 || (_3 = zu(jn(u2.lastIndex + (Lu ? 0 : f2)), s2.length)) === p2)
            f2 = vu(s2, f2, l2);
          else {
            if (d2.push(s2.slice(p2, f2)), d2.length === h2)
              return d2;
            for (var g2 = 1; g2 <= m2.length - 1; g2++)
              if (d2.push(m2[g2]), d2.length === h2)
                return d2;
            f2 = p2 = _3;
          }
        }
        return d2.push(s2.slice(p2)), d2;
      }];
    });
    var Ru, Ou, Fu, Uu = function(t2, e2, i2, r2) {
      if (!(t2 instanceof e2) || void 0 !== r2 && r2 in t2)
        throw TypeError(i2 + ": incorrect invocation!");
      return t2;
    }, Nu = t.createCommonjsModule(function(t2) {
      var e2 = {}, i2 = {}, r2 = t2.exports = function(t3, r3, o2, n2, a2) {
        var s2, c2, l2, u2, h2 = a2 ? function() {
          return t3;
        } : fl(t3), p2 = wn(o2, n2, r3 ? 2 : 1), f2 = 0;
        if ("function" != typeof h2)
          throw TypeError(t3 + " is not iterable!");
        if (ul(h2)) {
          for (s2 = jn(t3.length); s2 > f2; f2++)
            if ((u2 = r3 ? p2(on(c2 = t3[f2])[0], c2[1]) : p2(t3[f2])) === e2 || u2 === i2)
              return u2;
        } else
          for (l2 = h2.call(t3); !(c2 = l2.next()).done; )
            if ((u2 = sl(l2, p2, c2.value, r3)) === e2 || u2 === i2)
              return u2;
      };
      r2.BREAK = e2, r2.RETURN = i2;
    }), ju = Yo.process, Vu = Yo.setImmediate, qu = Yo.clearImmediate, Zu = Yo.MessageChannel, Gu = Yo.Dispatch, Hu = 0, Wu = {}, Xu = function() {
      var t2 = +this;
      if (Wu.hasOwnProperty(t2)) {
        var e2 = Wu[t2];
        delete Wu[t2], e2();
      }
    }, Ku = function(t2) {
      Xu.call(t2.data);
    };
    Vu && qu || (Vu = function(t2) {
      for (var e2 = arguments, i2 = [], r2 = 1; arguments.length > r2; )
        i2.push(e2[r2++]);
      return Wu[++Hu] = function() {
        ps("function" == typeof t2 ? t2 : Function(t2), i2);
      }, Ru(Hu), Hu;
    }, qu = function(t2) {
      delete Wu[t2];
    }, "process" == Dn(ju) ? Ru = function(t2) {
      ju.nextTick(wn(Xu, t2, 1));
    } : Gu && Gu.now ? Ru = function(t2) {
      Gu.now(wn(Xu, t2, 1));
    } : Zu ? (Fu = (Ou = new Zu()).port2, Ou.port1.onmessage = Ku, Ru = wn(Fu.postMessage, Fu, 1)) : Yo.addEventListener && "function" == typeof postMessage && !Yo.importScripts ? (Ru = function(t2) {
      Yo.postMessage(t2 + "", "*");
    }, Yo.addEventListener("message", Ku, false)) : Ru = "onreadystatechange" in sn("script") ? function(t2) {
      na.appendChild(sn("script")).onreadystatechange = function() {
        na.removeChild(this), Xu.call(t2);
      };
    } : function(t2) {
      setTimeout(wn(Xu, t2, 1), 0);
    });
    var Yu = { set: Vu, clear: qu }, Ju = Yu.set, Qu = Yo.MutationObserver || Yo.WebKitMutationObserver, $u = Yo.process, th = Yo.Promise, eh = "process" == Dn($u);
    function ih(t2) {
      var e2, i2;
      this.promise = new t2(function(t3, r2) {
        if (void 0 !== e2 || void 0 !== i2)
          throw TypeError("Bad Promise constructor");
        e2 = t3, i2 = r2;
      }), this.resolve = bn(e2), this.reject = bn(i2);
    }
    var rh, oh, nh, ah, sh = { f: function(t2) {
      return new ih(t2);
    } }, ch = function(t2) {
      try {
        return { e: false, v: t2() };
      } catch (t3) {
        return { e: true, v: t3 };
      }
    }, lh = Yo.navigator, uh = lh && lh.userAgent || "", hh = function(t2, e2) {
      if (on(t2), rn(e2) && e2.constructor === t2)
        return e2;
      var i2 = sh.f(t2);
      return (0, i2.resolve)(e2), i2.promise;
    }, ph = function(t2, e2, i2) {
      for (var r2 in e2)
        yn(t2, r2, e2[r2], i2);
      return t2;
    }, fh = Yu.set, dh = function() {
      var t2, e2, i2, r2 = function() {
        var r3, o3;
        for (eh && (r3 = $u.domain) && r3.exit(); t2; ) {
          o3 = t2.fn, t2 = t2.next;
          try {
            o3();
          } catch (r4) {
            throw t2 ? i2() : e2 = void 0, r4;
          }
        }
        e2 = void 0, r3 && r3.enter();
      };
      if (eh)
        i2 = function() {
          $u.nextTick(r2);
        };
      else if (!Qu || Yo.navigator && Yo.navigator.standalone)
        if (th && th.resolve) {
          var o2 = th.resolve(void 0);
          i2 = function() {
            o2.then(r2);
          };
        } else
          i2 = function() {
            Ju.call(Yo, r2);
          };
      else {
        var n2 = true, a2 = document.createTextNode("");
        new Qu(r2).observe(a2, { characterData: true }), i2 = function() {
          a2.data = n2 = !n2;
        };
      }
      return function(r3) {
        var o3 = { fn: r3, next: void 0 };
        e2 && (e2.next = o3), t2 || (t2 = o3, i2()), e2 = o3;
      };
    }(), _h = Yo.TypeError, mh = Yo.process, gh = mh && mh.versions, vh = gh && gh.v8 || "", yh = Yo.Promise, bh = "process" == us(mh), wh = function() {
    }, xh = oh = sh.f, Th = !!function() {
      try {
        var t2 = yh.resolve(1), e2 = (t2.constructor = {})[En("species")] = function(t3) {
          t3(wh, wh);
        };
        return (bh || "function" == typeof PromiseRejectionEvent) && t2.then(wh) instanceof e2 && 0 !== vh.indexOf("6.6") && -1 === uh.indexOf("Chrome/66");
      } catch (t3) {
      }
    }(), Sh = function(t2) {
      var e2;
      return !(!rn(t2) || "function" != typeof (e2 = t2.then)) && e2;
    }, Eh = function(t2, e2) {
      if (!t2._n) {
        t2._n = true;
        var i2 = t2._c;
        dh(function() {
          for (var r2 = t2._v, o2 = 1 == t2._s, n2 = 0, a2 = function(e3) {
            var i3, n3, a3, s2 = o2 ? e3.ok : e3.fail, c2 = e3.resolve, l2 = e3.reject, u2 = e3.domain;
            try {
              s2 ? (o2 || (2 == t2._h && Ih(t2), t2._h = 1), true === s2 ? i3 = r2 : (u2 && u2.enter(), i3 = s2(r2), u2 && (u2.exit(), a3 = true)), i3 === e3.promise ? l2(_h("Promise-chain cycle")) : (n3 = Sh(i3)) ? n3.call(i3, c2, l2) : c2(i3)) : l2(r2);
            } catch (t3) {
              u2 && !a3 && u2.exit(), l2(t3);
            }
          }; i2.length > n2; )
            a2(i2[n2++]);
          t2._c = [], t2._n = false, e2 && !t2._h && Ah(t2);
        });
      }
    }, Ah = function(t2) {
      fh.call(Yo, function() {
        var e2, i2, r2, o2 = t2._v, n2 = kh(t2);
        if (n2 && (e2 = ch(function() {
          bh ? mh.emit("unhandledRejection", o2, t2) : (i2 = Yo.onunhandledrejection) ? i2({ promise: t2, reason: o2 }) : (r2 = Yo.console) && r2.error && r2.error("Unhandled promise rejection", o2);
        }), t2._h = bh || kh(t2) ? 2 : 1), t2._a = void 0, n2 && e2.e)
          throw e2.v;
      });
    }, kh = function(t2) {
      return 1 !== t2._h && 0 === (t2._a || t2._c).length;
    }, Ih = function(t2) {
      fh.call(Yo, function() {
        var e2;
        bh ? mh.emit("rejectionHandled", t2) : (e2 = Yo.onrejectionhandled) && e2({ promise: t2, reason: t2._v });
      });
    }, Bh = function(t2) {
      var e2 = this;
      e2._d || (e2._d = true, (e2 = e2._w || e2)._v = t2, e2._s = 2, e2._a || (e2._a = e2._c.slice()), Eh(e2, true));
    }, Ph = function(t2) {
      var e2, i2 = this;
      if (!i2._d) {
        i2._d = true, i2 = i2._w || i2;
        try {
          if (i2 === t2)
            throw _h("Promise can't be resolved itself");
          (e2 = Sh(t2)) ? dh(function() {
            var r2 = { _w: i2, _d: false };
            try {
              e2.call(t2, wn(Ph, r2, 1), wn(Bh, r2, 1));
            } catch (t3) {
              Bh.call(r2, t3);
            }
          }) : (i2._v = t2, i2._s = 1, Eh(i2, false));
        } catch (t3) {
          Bh.call({ _w: i2, _d: false }, t3);
        }
      }
    };
    Th || (yh = function(t2) {
      Uu(this, yh, "Promise", "_h"), bn(t2), rh.call(this);
      try {
        t2(wn(Ph, this, 1), wn(Bh, this, 1));
      } catch (t3) {
        Bh.call(this, t3);
      }
    }, (rh = function(t2) {
      this._c = [], this._a = void 0, this._s = 0, this._d = false, this._v = void 0, this._h = 0, this._n = false;
    }).prototype = ph(yh.prototype, { then: function(t2, e2) {
      var i2 = xh(Cu(this, yh));
      return i2.ok = "function" != typeof t2 || t2, i2.fail = "function" == typeof e2 && e2, i2.domain = bh ? mh.domain : void 0, this._c.push(i2), this._a && this._a.push(i2), this._s && Eh(this, false), i2.promise;
    }, catch: function(t2) {
      return this.then(void 0, t2);
    } }), nh = function() {
      var t2 = new rh();
      this.promise = t2, this.resolve = wn(Ph, t2, 1), this.reject = wn(Bh, t2, 1);
    }, sh.f = xh = function(t2) {
      return t2 === yh || t2 === ah ? new nh(t2) : oh(t2);
    }), Tn(Tn.G + Tn.W + Tn.F * !Th, { Promise: yh }), In(yh, "Promise"), Xl("Promise"), ah = en.Promise, Tn(Tn.S + Tn.F * !Th, "Promise", { reject: function(t2) {
      var e2 = xh(this);
      return (0, e2.reject)(t2), e2.promise;
    } }), Tn(Tn.S + Tn.F * !Th, "Promise", { resolve: function(t2) {
      return hh(this, t2);
    } }), Tn(Tn.S + Tn.F * !(Th && gl(function(t2) {
      yh.all(t2).catch(wh);
    })), "Promise", { all: function(t2) {
      var e2 = this, i2 = xh(e2), r2 = i2.resolve, o2 = i2.reject, n2 = ch(function() {
        var i3 = [], n3 = 0, a2 = 1;
        Nu(t2, false, function(t3) {
          var s2 = n3++, c2 = false;
          i3.push(void 0), a2++, e2.resolve(t3).then(function(t4) {
            c2 || (c2 = true, i3[s2] = t4, --a2 || r2(i3));
          }, o2);
        }), --a2 || r2(i3);
      });
      return n2.e && o2(n2.v), i2.promise;
    }, race: function(t2) {
      var e2 = this, i2 = xh(e2), r2 = i2.reject, o2 = ch(function() {
        Nu(t2, false, function(t3) {
          e2.resolve(t3).then(i2.resolve, r2);
        });
      });
      return o2.e && r2(o2.v), i2.promise;
    } });
    var Ch = function(t2, e2) {
      if (!rn(t2) || t2._t !== e2)
        throw TypeError("Incompatible receiver, " + e2 + " required!");
      return t2;
    }, zh = hn.f, Dh = Sn.fastKey, Mh = tn ? "_s" : "size", Lh = function(t2, e2) {
      var i2, r2 = Dh(e2);
      if ("F" !== r2)
        return t2._i[r2];
      for (i2 = t2._f; i2; i2 = i2.n)
        if (i2.k == e2)
          return i2;
    }, Rh = { getConstructor: function(t2, e2, i2, r2) {
      var o2 = t2(function(t3, n2) {
        Uu(t3, o2, e2, "_i"), t3._t = e2, t3._i = la(null), t3._f = void 0, t3._l = void 0, t3[Mh] = 0, null != n2 && Nu(n2, i2, t3[r2], t3);
      });
      return ph(o2.prototype, { clear: function() {
        for (var t3 = Ch(this, e2), i3 = t3._i, r3 = t3._f; r3; r3 = r3.n)
          r3.r = true, r3.p && (r3.p = r3.p.n = void 0), delete i3[r3.i];
        t3._f = t3._l = void 0, t3[Mh] = 0;
      }, delete: function(t3) {
        var i3 = Ch(this, e2), r3 = Lh(i3, t3);
        if (r3) {
          var o3 = r3.n, n2 = r3.p;
          delete i3._i[r3.i], r3.r = true, n2 && (n2.n = o3), o3 && (o3.p = n2), i3._f == r3 && (i3._f = o3), i3._l == r3 && (i3._l = n2), i3[Mh]--;
        }
        return !!r3;
      }, forEach: function(t3) {
        Ch(this, e2);
        for (var i3, r3 = wn(t3, arguments.length > 1 ? arguments[1] : void 0, 3); i3 = i3 ? i3.n : this._f; )
          for (r3(i3.v, i3.k, this); i3 && i3.r; )
            i3 = i3.p;
      }, has: function(t3) {
        return !!Lh(Ch(this, e2), t3);
      } }), tn && zh(o2.prototype, "size", { get: function() {
        return Ch(this, e2)[Mh];
      } }), o2;
    }, def: function(t2, e2, i2) {
      var r2, o2, n2 = Lh(t2, e2);
      return n2 ? n2.v = i2 : (t2._l = n2 = { i: o2 = Dh(e2, true), k: e2, v: i2, p: r2 = t2._l, n: void 0, r: false }, t2._f || (t2._f = n2), r2 && (r2.n = n2), t2[Mh]++, "F" !== o2 && (t2._i[o2] = n2)), t2;
    }, getEntry: Lh, setStrong: function(t2, e2, i2) {
      Uc(t2, e2, function(t3, i3) {
        this._t = Ch(t3, e2), this._k = i3, this._l = void 0;
      }, function() {
        for (var t3 = this._k, e3 = this._l; e3 && e3.r; )
          e3 = e3.p;
        return this._t && (this._l = e3 = e3 ? e3.n : this._t._f) ? Kl(0, "keys" == t3 ? e3.k : "values" == t3 ? e3.v : [e3.k, e3.v]) : (this._t = void 0, Kl(1));
      }, i2 ? "entries" : "values", !i2, true), Xl(e2);
    } }, Oh = function(t2, e2, i2, r2, o2, n2) {
      var a2 = Yo[t2], s2 = a2, c2 = o2 ? "set" : "add", l2 = s2 && s2.prototype, u2 = {}, h2 = function(t3) {
        var e3 = l2[t3];
        yn(l2, t3, "delete" == t3 || "has" == t3 ? function(t4) {
          return !(n2 && !rn(t4)) && e3.call(this, 0 === t4 ? 0 : t4);
        } : "get" == t3 ? function(t4) {
          return n2 && !rn(t4) ? void 0 : e3.call(this, 0 === t4 ? 0 : t4);
        } : "add" == t3 ? function(t4) {
          return e3.call(this, 0 === t4 ? 0 : t4), this;
        } : function(t4, i3) {
          return e3.call(this, 0 === t4 ? 0 : t4, i3), this;
        });
      };
      if ("function" == typeof s2 && (n2 || l2.forEach && !$o(function() {
        new s2().entries().next();
      }))) {
        var p2 = new s2(), f2 = p2[c2](n2 ? {} : -0, 1) != p2, d2 = $o(function() {
          p2.has(1);
        }), _3 = gl(function(t3) {
          new s2(t3);
        }), m2 = !n2 && $o(function() {
          for (var t3 = new s2(), e3 = 5; e3--; )
            t3[c2](e3, e3);
          return !t3.has(-0);
        });
        _3 || ((s2 = e2(function(e3, i3) {
          Uu(e3, s2, t2);
          var r3 = Rs(new a2(), e3, s2);
          return null != i3 && Nu(i3, o2, r3[c2], r3), r3;
        })).prototype = l2, l2.constructor = s2), (d2 || m2) && (h2("delete"), h2("has"), o2 && h2("get")), (m2 || f2) && h2(c2), n2 && l2.clear && delete l2.clear;
      } else
        s2 = r2.getConstructor(e2, t2, o2, c2), ph(s2.prototype, i2), Sn.NEED = true;
      return In(s2, t2), u2[t2] = s2, Tn(Tn.G + Tn.W + Tn.F * (s2 != a2), u2), n2 || r2.setStrong(s2, t2, o2), s2;
    }, Fh = (Oh("Map", function(t2) {
      return function() {
        return t2(this, arguments.length > 0 ? arguments[0] : void 0);
      };
    }, { get: function(t2) {
      var e2 = Rh.getEntry(Ch(this, "Map"), t2);
      return e2 && e2.v;
    }, set: function(t2, e2) {
      return Rh.def(Ch(this, "Map"), 0 === t2 ? 0 : t2, e2);
    } }, Rh, true), Oh("Set", function(t2) {
      return function() {
        return t2(this, arguments.length > 0 ? arguments[0] : void 0);
      };
    }, { add: function(t2) {
      return Rh.def(Ch(this, "Set"), t2 = 0 === t2 ? 0 : t2, t2);
    } }, Rh), Sn.getWeak), Uh = El(5), Nh = El(6), jh = 0, Vh = function(t2) {
      return t2._l || (t2._l = new qh());
    }, qh = function() {
      this.a = [];
    }, Zh = function(t2, e2) {
      return Uh(t2.a, function(t3) {
        return t3[0] === e2;
      });
    };
    qh.prototype = { get: function(t2) {
      var e2 = Zh(this, t2);
      if (e2)
        return e2[1];
    }, has: function(t2) {
      return !!Zh(this, t2);
    }, set: function(t2, e2) {
      var i2 = Zh(this, t2);
      i2 ? i2[1] = e2 : this.a.push([t2, e2]);
    }, delete: function(t2) {
      var e2 = Nh(this.a, function(e3) {
        return e3[0] === t2;
      });
      return ~e2 && this.a.splice(e2, 1), !!~e2;
    } };
    var Gh = { getConstructor: function(t2, e2, i2, r2) {
      var o2 = t2(function(t3, n2) {
        Uu(t3, o2, e2, "_i"), t3._t = e2, t3._i = jh++, t3._l = void 0, null != n2 && Nu(n2, i2, t3[r2], t3);
      });
      return ph(o2.prototype, { delete: function(t3) {
        if (!rn(t3))
          return false;
        var i3 = Fh(t3);
        return true === i3 ? Vh(Ch(this, e2)).delete(t3) : i3 && Qo(i3, this._i) && delete i3[this._i];
      }, has: function(t3) {
        if (!rn(t3))
          return false;
        var i3 = Fh(t3);
        return true === i3 ? Vh(Ch(this, e2)).has(t3) : i3 && Qo(i3, this._i);
      } }), o2;
    }, def: function(t2, e2, i2) {
      var r2 = Fh(on(e2), true);
      return true === r2 ? Vh(t2).set(e2, i2) : r2[t2._i] = i2, t2;
    }, ufstore: Vh };
    t.createCommonjsModule(function(t2) {
      var e2, i2 = El(0), r2 = Ch, o2 = !Yo.ActiveXObject && "ActiveXObject" in Yo, n2 = Sn.getWeak, a2 = Object.isExtensible, s2 = Gh.ufstore, c2 = function(t3) {
        return function() {
          return t3(this, arguments.length > 0 ? arguments[0] : void 0);
        };
      }, l2 = { get: function(t3) {
        if (rn(t3)) {
          var e3 = n2(t3);
          return true === e3 ? s2(Ch(this, "WeakMap")).get(t3) : e3 ? e3[this._i] : void 0;
        }
      }, set: function(t3, e3) {
        return Gh.def(Ch(this, "WeakMap"), t3, e3);
      } }, u2 = t2.exports = Oh("WeakMap", c2, l2, Gh, true, true);
      r2 && o2 && (e2 = Gh.getConstructor(c2, "WeakMap"), os(e2.prototype, l2), Sn.NEED = true, i2(["delete", "has", "get", "set"], function(t3) {
        var i3 = u2.prototype, r3 = i3[t3];
        yn(i3, t3, function(i4, o3) {
          if (rn(i4) && !a2(i4)) {
            this._f || (this._f = new e2());
            var n3 = this._f[t3](i4, o3);
            return "set" == t3 ? this : n3;
          }
          return r3.call(this, i4, o3);
        });
      }));
    }), Oh("WeakSet", function(t2) {
      return function() {
        return t2(this, arguments.length > 0 ? arguments[0] : void 0);
      };
    }, { add: function(t2) {
      return Gh.def(Ch(this, "WeakSet"), t2, true);
    } }, Gh, false, true);
    for (var Hh, Wh = mn("typed_array"), Xh = mn("view"), Kh = !(!Yo.ArrayBuffer || !Yo.DataView), Yh = Kh, Jh = 0, Qh = "Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(","); Jh < 9; )
      (Hh = Yo[Qh[Jh++]]) ? (fn(Hh.prototype, Wh, true), fn(Hh.prototype, Xh, true)) : Yh = false;
    var $h = { ABV: Kh, CONSTR: Yh, TYPED: Wh, VIEW: Xh }, tp = function(t2) {
      if (void 0 === t2)
        return 0;
      var e2 = Un(t2), i2 = jn(e2);
      if (e2 !== i2)
        throw RangeError("Wrong length!");
      return i2;
    }, ep = t.createCommonjsModule(function(t2, e2) {
      var i2 = ha.f, r2 = hn.f, o2 = Yo.ArrayBuffer, n2 = Yo.DataView, a2 = Yo.Math, s2 = Yo.RangeError, c2 = Yo.Infinity, l2 = o2, u2 = a2.abs, h2 = a2.pow, p2 = a2.floor, f2 = a2.log, d2 = a2.LN2, _3 = tn ? "_b" : "buffer", m2 = tn ? "_l" : "byteLength", g2 = tn ? "_o" : "byteOffset";
      function v2(t3, e3, i3) {
        var r3, o3, n3, a3 = new Array(i3), s3 = 8 * i3 - e3 - 1, l3 = (1 << s3) - 1, _4 = l3 >> 1, m3 = 23 === e3 ? h2(2, -24) - h2(2, -77) : 0, g3 = 0, v3 = t3 < 0 || 0 === t3 && 1 / t3 < 0 ? 1 : 0;
        for ((t3 = u2(t3)) != t3 || t3 === c2 ? (o3 = t3 != t3 ? 1 : 0, r3 = l3) : (r3 = p2(f2(t3) / d2), t3 * (n3 = h2(2, -r3)) < 1 && (r3--, n3 *= 2), (t3 += r3 + _4 >= 1 ? m3 / n3 : m3 * h2(2, 1 - _4)) * n3 >= 2 && (r3++, n3 /= 2), r3 + _4 >= l3 ? (o3 = 0, r3 = l3) : r3 + _4 >= 1 ? (o3 = (t3 * n3 - 1) * h2(2, e3), r3 += _4) : (o3 = t3 * h2(2, _4 - 1) * h2(2, e3), r3 = 0)); e3 >= 8; a3[g3++] = 255 & o3, o3 /= 256, e3 -= 8)
          ;
        for (r3 = r3 << e3 | o3, s3 += e3; s3 > 0; a3[g3++] = 255 & r3, r3 /= 256, s3 -= 8)
          ;
        return a3[--g3] |= 128 * v3, a3;
      }
      function y2(t3, e3, i3) {
        var r3, o3 = 8 * i3 - e3 - 1, n3 = (1 << o3) - 1, a3 = n3 >> 1, s3 = o3 - 7, l3 = i3 - 1, u3 = t3[l3--], p3 = 127 & u3;
        for (u3 >>= 7; s3 > 0; p3 = 256 * p3 + t3[l3], l3--, s3 -= 8)
          ;
        for (r3 = p3 & (1 << -s3) - 1, p3 >>= -s3, s3 += e3; s3 > 0; r3 = 256 * r3 + t3[l3], l3--, s3 -= 8)
          ;
        if (0 === p3)
          p3 = 1 - a3;
        else {
          if (p3 === n3)
            return r3 ? NaN : u3 ? -c2 : c2;
          r3 += h2(2, e3), p3 -= a3;
        }
        return (u3 ? -1 : 1) * r3 * h2(2, p3 - e3);
      }
      function b2(t3) {
        return t3[3] << 24 | t3[2] << 16 | t3[1] << 8 | t3[0];
      }
      function w2(t3) {
        return [255 & t3];
      }
      function x2(t3) {
        return [255 & t3, t3 >> 8 & 255];
      }
      function T2(t3) {
        return [255 & t3, t3 >> 8 & 255, t3 >> 16 & 255, t3 >> 24 & 255];
      }
      function S2(t3) {
        return v2(t3, 52, 8);
      }
      function E2(t3) {
        return v2(t3, 23, 4);
      }
      function A2(t3, e3, i3) {
        r2(t3.prototype, e3, { get: function() {
          return this[i3];
        } });
      }
      function k2(t3, e3, i3, r3) {
        var o3 = tp(+i3);
        if (o3 + e3 > t3[m2])
          throw s2("Wrong index!");
        var n3 = o3 + t3[g2], a3 = t3[_3]._b.slice(n3, n3 + e3);
        return r3 ? a3 : a3.reverse();
      }
      function I2(t3, e3, i3, r3, o3, n3) {
        var a3 = tp(+i3);
        if (a3 + e3 > t3[m2])
          throw s2("Wrong index!");
        for (var c3 = t3[_3]._b, l3 = a3 + t3[g2], u3 = r3(+o3), h3 = 0; h3 < e3; h3++)
          c3[l3 + h3] = u3[n3 ? h3 : e3 - h3 - 1];
      }
      if ($h.ABV) {
        if (!$o(function() {
          o2(1);
        }) || !$o(function() {
          new o2(-1);
        }) || $o(function() {
          return new o2(), new o2(1.5), new o2(NaN), "ArrayBuffer" != o2.name;
        })) {
          for (var B2, P2 = (o2 = function(t3) {
            return Uu(this, o2), new l2(tp(t3));
          }).prototype = l2.prototype, C2 = i2(l2), z2 = 0; C2.length > z2; )
            (B2 = C2[z2++]) in o2 || fn(o2, B2, l2[B2]);
          P2.constructor = o2;
        }
        var D2 = new n2(new o2(2)), M2 = n2.prototype.setInt8;
        D2.setInt8(0, 2147483648), D2.setInt8(1, 2147483649), !D2.getInt8(0) && D2.getInt8(1) || ph(n2.prototype, { setInt8: function(t3, e3) {
          M2.call(this, t3, e3 << 24 >> 24);
        }, setUint8: function(t3, e3) {
          M2.call(this, t3, e3 << 24 >> 24);
        } }, true);
      } else
        o2 = function(t3) {
          Uu(this, o2, "ArrayBuffer");
          var e3 = tp(t3);
          this._b = Vl.call(new Array(e3), 0), this[m2] = e3;
        }, n2 = function(t3, e3, i3) {
          Uu(this, n2, "DataView"), Uu(t3, o2, "DataView");
          var r3 = t3[m2], a3 = Un(e3);
          if (a3 < 0 || a3 > r3)
            throw s2("Wrong offset!");
          if (a3 + (i3 = void 0 === i3 ? r3 - a3 : jn(i3)) > r3)
            throw s2("Wrong length!");
          this[_3] = t3, this[g2] = a3, this[m2] = i3;
        }, tn && (A2(o2, "byteLength", "_l"), A2(n2, "buffer", "_b"), A2(n2, "byteLength", "_l"), A2(n2, "byteOffset", "_o")), ph(n2.prototype, { getInt8: function(t3) {
          return k2(this, 1, t3)[0] << 24 >> 24;
        }, getUint8: function(t3) {
          return k2(this, 1, t3)[0];
        }, getInt16: function(t3) {
          var e3 = k2(this, 2, t3, arguments[1]);
          return (e3[1] << 8 | e3[0]) << 16 >> 16;
        }, getUint16: function(t3) {
          var e3 = k2(this, 2, t3, arguments[1]);
          return e3[1] << 8 | e3[0];
        }, getInt32: function(t3) {
          return b2(k2(this, 4, t3, arguments[1]));
        }, getUint32: function(t3) {
          return b2(k2(this, 4, t3, arguments[1])) >>> 0;
        }, getFloat32: function(t3) {
          return y2(k2(this, 4, t3, arguments[1]), 23, 4);
        }, getFloat64: function(t3) {
          return y2(k2(this, 8, t3, arguments[1]), 52, 8);
        }, setInt8: function(t3, e3) {
          I2(this, 1, t3, w2, e3);
        }, setUint8: function(t3, e3) {
          I2(this, 1, t3, w2, e3);
        }, setInt16: function(t3, e3) {
          I2(this, 2, t3, x2, e3, arguments[2]);
        }, setUint16: function(t3, e3) {
          I2(this, 2, t3, x2, e3, arguments[2]);
        }, setInt32: function(t3, e3) {
          I2(this, 4, t3, T2, e3, arguments[2]);
        }, setUint32: function(t3, e3) {
          I2(this, 4, t3, T2, e3, arguments[2]);
        }, setFloat32: function(t3, e3) {
          I2(this, 4, t3, E2, e3, arguments[2]);
        }, setFloat64: function(t3, e3) {
          I2(this, 8, t3, S2, e3, arguments[2]);
        } });
      In(o2, "ArrayBuffer"), In(n2, "DataView"), fn(n2.prototype, $h.VIEW, true), e2.ArrayBuffer = o2, e2.DataView = n2;
    }), ip = Yo.ArrayBuffer, rp = ep.ArrayBuffer, op = ep.DataView, np = $h.ABV && ip.isView, ap = rp.prototype.slice, sp = $h.VIEW;
    Tn(Tn.G + Tn.W + Tn.F * (ip !== rp), { ArrayBuffer: rp }), Tn(Tn.S + Tn.F * !$h.CONSTR, "ArrayBuffer", { isView: function(t2) {
      return np && np(t2) || rn(t2) && sp in t2;
    } }), Tn(Tn.P + Tn.U + Tn.F * $o(function() {
      return !new rp(2).slice(1, void 0).byteLength;
    }), "ArrayBuffer", { slice: function(t2, e2) {
      if (void 0 !== ap && void 0 === e2)
        return ap.call(on(this), t2);
      for (var i2 = on(this).byteLength, r2 = Zn(t2, i2), o2 = Zn(void 0 === e2 ? i2 : e2, i2), n2 = new (Cu(this, rp))(jn(o2 - r2)), a2 = new op(this), s2 = new op(n2), c2 = 0; r2 < o2; )
        s2.setUint8(c2++, a2.getUint8(r2++));
      return n2;
    } }), Xl("ArrayBuffer"), Tn(Tn.G + Tn.W + Tn.F * !$h.ABV, { DataView: ep.DataView });
    var cp = t.createCommonjsModule(function(t2) {
      if (tn) {
        var e2 = Yo, i2 = $o, r2 = Tn, o2 = $h, n2 = wn, a2 = Uu, s2 = pn, c2 = fn, l2 = ph, u2 = Un, h2 = jn, p2 = tp, f2 = Zn, d2 = ln, _3 = Qo, m2 = us, g2 = rn, v2 = ia, y2 = ul, b2 = la, w2 = $a, x2 = ha.f, T2 = fl, S2 = mn, E2 = En, A2 = El, k2 = Gn, I2 = Cu, B2 = Yl, P2 = Dc, C2 = gl, z2 = Xl, D2 = Vl, M2 = Fl, L2 = hn, R2 = ga, O2 = L2.f, F2 = R2.f, U2 = e2.RangeError, N2 = e2.TypeError, j2 = e2.Uint8Array, V2 = Array.prototype, q2 = ep.ArrayBuffer, Z2 = ep.DataView, G2 = A2(0), H2 = A2(2), W2 = A2(3), X2 = A2(4), K2 = A2(5), Y2 = A2(6), J2 = k2(true), Q2 = k2(false), $2 = B2.values, tt2 = B2.keys, et2 = B2.entries, it2 = V2.lastIndexOf, rt2 = V2.reduce, ot2 = V2.reduceRight, nt2 = V2.join, at2 = V2.sort, st2 = V2.slice, ct2 = V2.toString, lt2 = V2.toLocaleString, ut2 = E2("iterator"), ht2 = E2("toStringTag"), pt2 = S2("typed_constructor"), ft2 = S2("def_constructor"), dt2 = o2.CONSTR, _t2 = o2.TYPED, mt2 = o2.VIEW, gt2 = A2(1, function(t3, e3) {
          return xt2(I2(t3, t3[ft2]), e3);
        }), vt2 = i2(function() {
          return 1 === new j2(new Uint16Array([1]).buffer)[0];
        }), yt2 = !!j2 && !!j2.prototype.set && i2(function() {
          new j2(1).set({});
        }), bt2 = function(t3, e3) {
          var i3 = u2(t3);
          if (i3 < 0 || i3 % e3)
            throw U2("Wrong offset!");
          return i3;
        }, wt2 = function(t3) {
          if (g2(t3) && _t2 in t3)
            return t3;
          throw N2(t3 + " is not a typed array!");
        }, xt2 = function(t3, e3) {
          if (!g2(t3) || !(pt2 in t3))
            throw N2("It is not a typed array constructor!");
          return new t3(e3);
        }, Tt2 = function(t3, e3) {
          return St2(I2(t3, t3[ft2]), e3);
        }, St2 = function(t3, e3) {
          for (var i3 = 0, r3 = e3.length, o3 = xt2(t3, r3); r3 > i3; )
            o3[i3] = e3[i3++];
          return o3;
        }, Et2 = function(t3, e3, i3) {
          O2(t3, e3, { get: function() {
            return this._d[i3];
          } });
        }, At2 = function(t3) {
          var e3, i3, r3, o3, a3, s3, c3 = v2(t3), l3 = arguments.length, u3 = l3 > 1 ? arguments[1] : void 0, p3 = void 0 !== u3, f3 = T2(c3);
          if (null != f3 && !y2(f3)) {
            for (s3 = f3.call(c3), r3 = [], e3 = 0; !(a3 = s3.next()).done; e3++)
              r3.push(a3.value);
            c3 = r3;
          }
          for (p3 && l3 > 2 && (u3 = n2(u3, arguments[2], 2)), e3 = 0, i3 = h2(c3.length), o3 = xt2(this, i3); i3 > e3; e3++)
            o3[e3] = p3 ? u3(c3[e3], e3) : c3[e3];
          return o3;
        }, kt2 = function() {
          for (var t3 = arguments, e3 = 0, i3 = arguments.length, r3 = xt2(this, i3); i3 > e3; )
            r3[e3] = t3[e3++];
          return r3;
        }, It2 = !!j2 && i2(function() {
          lt2.call(new j2(1));
        }), Bt2 = function() {
          return lt2.apply(It2 ? st2.call(wt2(this)) : wt2(this), arguments);
        }, Pt2 = { copyWithin: function(t3, e3) {
          return M2.call(wt2(this), t3, e3, arguments.length > 2 ? arguments[2] : void 0);
        }, every: function(t3) {
          return X2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, fill: function(t3) {
          return D2.apply(wt2(this), arguments);
        }, filter: function(t3) {
          return Tt2(this, H2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0));
        }, find: function(t3) {
          return K2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, findIndex: function(t3) {
          return Y2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, forEach: function(t3) {
          G2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, indexOf: function(t3) {
          return Q2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, includes: function(t3) {
          return J2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, join: function(t3) {
          return nt2.apply(wt2(this), arguments);
        }, lastIndexOf: function(t3) {
          return it2.apply(wt2(this), arguments);
        }, map: function(t3) {
          return gt2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, reduce: function(t3) {
          return rt2.apply(wt2(this), arguments);
        }, reduceRight: function(t3) {
          return ot2.apply(wt2(this), arguments);
        }, reverse: function() {
          for (var t3, e3 = wt2(this).length, i3 = Math.floor(e3 / 2), r3 = 0; r3 < i3; )
            t3 = this[r3], this[r3++] = this[--e3], this[e3] = t3;
          return this;
        }, some: function(t3) {
          return W2(wt2(this), t3, arguments.length > 1 ? arguments[1] : void 0);
        }, sort: function(t3) {
          return at2.call(wt2(this), t3);
        }, subarray: function(t3, e3) {
          var i3 = wt2(this), r3 = i3.length, o3 = f2(t3, r3);
          return new (I2(i3, i3[ft2]))(i3.buffer, i3.byteOffset + o3 * i3.BYTES_PER_ELEMENT, h2((void 0 === e3 ? r3 : f2(e3, r3)) - o3));
        } }, Ct2 = function(t3, e3) {
          return Tt2(this, st2.call(wt2(this), t3, e3));
        }, zt2 = function(t3) {
          wt2(this);
          var e3 = bt2(arguments[1], 1), i3 = this.length, r3 = v2(t3), o3 = h2(r3.length), n3 = 0;
          if (o3 + e3 > i3)
            throw U2("Wrong length!");
          for (; n3 < o3; )
            this[e3 + n3] = r3[n3++];
        }, Dt2 = { entries: function() {
          return et2.call(wt2(this));
        }, keys: function() {
          return tt2.call(wt2(this));
        }, values: function() {
          return $2.call(wt2(this));
        } }, Mt2 = function(t3, e3) {
          return g2(t3) && t3[_t2] && "symbol" != typeof e3 && e3 in t3 && String(+e3) == String(e3);
        }, Lt2 = function(t3, e3) {
          return Mt2(t3, e3 = d2(e3, true)) ? s2(2, t3[e3]) : F2(t3, e3);
        }, Rt2 = function(t3, e3, i3) {
          return !(Mt2(t3, e3 = d2(e3, true)) && g2(i3) && _3(i3, "value")) || _3(i3, "get") || _3(i3, "set") || i3.configurable || _3(i3, "writable") && !i3.writable || _3(i3, "enumerable") && !i3.enumerable ? O2(t3, e3, i3) : (t3[e3] = i3.value, t3);
        };
        dt2 || (R2.f = Lt2, L2.f = Rt2), r2(r2.S + r2.F * !dt2, "Object", { getOwnPropertyDescriptor: Lt2, defineProperty: Rt2 }), i2(function() {
          ct2.call({});
        }) && (ct2 = lt2 = function() {
          return nt2.call(this);
        });
        var Ot2 = l2({}, Pt2);
        l2(Ot2, Dt2), c2(Ot2, ut2, Dt2.values), l2(Ot2, { slice: Ct2, set: zt2, constructor: function() {
        }, toString: ct2, toLocaleString: Bt2 }), Et2(Ot2, "buffer", "b"), Et2(Ot2, "byteOffset", "o"), Et2(Ot2, "byteLength", "l"), Et2(Ot2, "length", "e"), O2(Ot2, ht2, { get: function() {
          return this[_t2];
        } }), t2.exports = function(t3, n3, s3, l3) {
          var u3 = t3 + ((l3 = !!l3) ? "Clamped" : "") + "Array", f3 = "get" + t3, d3 = "set" + t3, _4 = e2[u3], v3 = _4 || {}, y3 = _4 && w2(_4), T3 = {}, S3 = _4 && _4.prototype, E3 = function(t4, e3) {
            O2(t4, e3, { get: function() {
              return function(t5, e4) {
                var i3 = t5._d;
                return i3.v[f3](e4 * n3 + i3.o, vt2);
              }(this, e3);
            }, set: function(t5) {
              return function(t6, e4, i3) {
                var r3 = t6._d;
                l3 && (i3 = (i3 = Math.round(i3)) < 0 ? 0 : i3 > 255 ? 255 : 255 & i3), r3.v[d3](e4 * n3 + r3.o, i3, vt2);
              }(this, e3, t5);
            }, enumerable: true });
          };
          _4 && o2.ABV ? i2(function() {
            _4(1);
          }) && i2(function() {
            new _4(-1);
          }) && C2(function(t4) {
            new _4(), new _4(null), new _4(1.5), new _4(t4);
          }, true) || (_4 = s3(function(t4, e3, i3, r3) {
            var o3;
            return a2(t4, _4, u3), g2(e3) ? e3 instanceof q2 || "ArrayBuffer" == (o3 = m2(e3)) || "SharedArrayBuffer" == o3 ? void 0 !== r3 ? new v3(e3, bt2(i3, n3), r3) : void 0 !== i3 ? new v3(e3, bt2(i3, n3)) : new v3(e3) : _t2 in e3 ? St2(_4, e3) : At2.call(_4, e3) : new v3(p2(e3));
          }), G2(y3 !== Function.prototype ? x2(v3).concat(x2(y3)) : x2(v3), function(t4) {
            t4 in _4 || c2(_4, t4, v3[t4]);
          }), _4.prototype = S3, S3.constructor = _4) : (_4 = s3(function(t4, e3, i3, r3) {
            a2(t4, _4, u3, "_d");
            var o3, s4, l4, f4, d4 = 0, v4 = 0;
            if (g2(e3)) {
              if (!(e3 instanceof q2 || "ArrayBuffer" == (f4 = m2(e3)) || "SharedArrayBuffer" == f4))
                return _t2 in e3 ? St2(_4, e3) : At2.call(_4, e3);
              o3 = e3, v4 = bt2(i3, n3);
              var y4 = e3.byteLength;
              if (void 0 === r3) {
                if (y4 % n3)
                  throw U2("Wrong length!");
                if ((s4 = y4 - v4) < 0)
                  throw U2("Wrong length!");
              } else if ((s4 = h2(r3) * n3) + v4 > y4)
                throw U2("Wrong length!");
              l4 = s4 / n3;
            } else
              l4 = p2(e3), o3 = new q2(s4 = l4 * n3);
            for (c2(t4, "_d", { b: o3, o: v4, l: s4, e: l4, v: new Z2(o3) }); d4 < l4; )
              E3(t4, d4++);
          }), S3 = _4.prototype = b2(Ot2), c2(S3, "constructor", _4));
          var A3 = S3[ut2], k3 = !!A3 && ("values" == A3.name || null == A3.name), I3 = Dt2.values;
          c2(_4, pt2, true), c2(S3, _t2, u3), c2(S3, mt2, true), c2(S3, ft2, _4), (l3 ? new _4(1)[ht2] == u3 : ht2 in S3) || O2(S3, ht2, { get: function() {
            return u3;
          } }), T3[u3] = _4, r2(r2.G + r2.W + r2.F * (_4 != v3), T3), r2(r2.S, u3, { BYTES_PER_ELEMENT: n3 }), r2(r2.S + r2.F * i2(function() {
            v3.of.call(_4, 1);
          }), u3, { from: At2, of: kt2 }), "BYTES_PER_ELEMENT" in S3 || c2(S3, "BYTES_PER_ELEMENT", n3), r2(r2.P, u3, Pt2), z2(u3), r2(r2.P + r2.F * yt2, u3, { set: zt2 }), r2(r2.P + r2.F * !k3, u3, Dt2), S3.toString != ct2 && (S3.toString = ct2), r2(r2.P + r2.F * i2(function() {
            new _4(1).slice();
          }), u3, { slice: Ct2 }), r2(r2.P + r2.F * (i2(function() {
            return [1, 2].toLocaleString() != new _4([1, 2]).toLocaleString();
          }) || !i2(function() {
            S3.toLocaleString.call([1, 2]);
          })), u3, { toLocaleString: Bt2 }), P2[u3] = k3 ? A3 : I3, k3 || c2(S3, ut2, I3);
        };
      } else
        t2.exports = function() {
        };
    });
    cp("Int8", 1, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }), cp("Uint8", 1, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }), cp("Uint8", 1, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }, true), cp("Int16", 2, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }), cp("Uint16", 2, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }), cp("Int32", 4, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }), cp("Uint32", 4, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }), cp("Float32", 4, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    }), cp("Float64", 8, function(t2) {
      return function(e2, i2, r2) {
        return t2(this, e2, i2, r2);
      };
    });
    var lp = (Yo.Reflect || {}).apply, up = Function.apply;
    Tn(Tn.S + Tn.F * !$o(function() {
      lp(function() {
      });
    }), "Reflect", { apply: function(t2, e2, i2) {
      var r2 = bn(t2), o2 = on(i2);
      return lp ? lp(r2, e2, o2) : up.call(r2, e2, o2);
    } });
    var hp = (Yo.Reflect || {}).construct, pp = $o(function() {
      function t2() {
      }
      return !(hp(function() {
      }, [], t2) instanceof t2);
    }), fp = !$o(function() {
      hp(function() {
      });
    });
    Tn(Tn.S + Tn.F * (pp || fp), "Reflect", { construct: function(t2, e2) {
      bn(t2), on(e2);
      var i2 = arguments.length < 3 ? t2 : bn(arguments[2]);
      if (fp && !pp)
        return hp(t2, e2, i2);
      if (t2 == i2) {
        switch (e2.length) {
          case 0:
            return new t2();
          case 1:
            return new t2(e2[0]);
          case 2:
            return new t2(e2[0], e2[1]);
          case 3:
            return new t2(e2[0], e2[1], e2[2]);
          case 4:
            return new t2(e2[0], e2[1], e2[2], e2[3]);
        }
        var r2 = [null];
        return r2.push.apply(r2, e2), new (ms.apply(t2, r2))();
      }
      var o2 = i2.prototype, n2 = la(rn(o2) ? o2 : Object.prototype), a2 = Function.apply.call(t2, n2, e2);
      return rn(a2) ? a2 : n2;
    } }), Tn(Tn.S + Tn.F * $o(function() {
      Reflect.defineProperty(hn.f({}, 1, { value: 1 }), 1, { value: 2 });
    }), "Reflect", { defineProperty: function(t2, e2, i2) {
      on(t2), e2 = ln(e2, true), on(i2);
      try {
        return hn.f(t2, e2, i2), true;
      } catch (t3) {
        return false;
      }
    } });
    var dp = ga.f;
    Tn(Tn.S, "Reflect", { deleteProperty: function(t2, e2) {
      var i2 = dp(on(t2), e2);
      return !(i2 && !i2.configurable) && delete t2[e2];
    } });
    var _p = function(t2) {
      this._t = on(t2), this._i = 0;
      var e2, i2 = this._k = [];
      for (e2 in t2)
        i2.push(e2);
    };
    Lc(_p, "Object", function() {
      var t2, e2 = this._k;
      do {
        if (this._i >= e2.length)
          return { value: void 0, done: true };
      } while (!((t2 = e2[this._i++]) in this._t));
      return { value: t2, done: false };
    }), Tn(Tn.S, "Reflect", { enumerate: function(t2) {
      return new _p(t2);
    } }), Tn(Tn.S, "Reflect", { get: function t2(e2, i2) {
      var r2, o2, n2 = arguments.length < 3 ? e2 : arguments[2];
      return on(e2) === n2 ? e2[i2] : (r2 = ga.f(e2, i2)) ? Qo(r2, "value") ? r2.value : void 0 !== r2.get ? r2.get.call(n2) : void 0 : rn(o2 = $a(e2)) ? t2(o2, i2, n2) : void 0;
    } }), Tn(Tn.S, "Reflect", { getOwnPropertyDescriptor: function(t2, e2) {
      return ga.f(on(t2), e2);
    } }), Tn(Tn.S, "Reflect", { getPrototypeOf: function(t2) {
      return $a(on(t2));
    } }), Tn(Tn.S, "Reflect", { has: function(t2, e2) {
      return e2 in t2;
    } });
    var mp = Object.isExtensible;
    Tn(Tn.S, "Reflect", { isExtensible: function(t2) {
      return on(t2), !mp || mp(t2);
    } });
    var gp = Yo.Reflect, vp = gp && gp.ownKeys || function(t2) {
      var e2 = ha.f(on(t2)), i2 = $n.f;
      return i2 ? e2.concat(i2(t2)) : e2;
    };
    Tn(Tn.S, "Reflect", { ownKeys: vp });
    var yp = Object.preventExtensions;
    Tn(Tn.S, "Reflect", { preventExtensions: function(t2) {
      on(t2);
      try {
        return yp && yp(t2), true;
      } catch (t3) {
        return false;
      }
    } }), Tn(Tn.S, "Reflect", { set: function t2(e2, i2, r2) {
      var o2, n2, a2 = arguments.length < 4 ? e2 : arguments[3], s2 = ga.f(on(e2), i2);
      if (!s2) {
        if (rn(n2 = $a(e2)))
          return t2(n2, i2, r2, a2);
        s2 = pn(0);
      }
      if (Qo(s2, "value")) {
        if (false === s2.writable || !rn(a2))
          return false;
        if (o2 = ga.f(a2, i2)) {
          if (o2.get || o2.set || false === o2.writable)
            return false;
          o2.value = r2, hn.f(a2, i2, o2);
        } else
          hn.f(a2, i2, pn(0, r2));
        return true;
      }
      return void 0 !== s2.set && (s2.set.call(a2, r2), true);
    } }), ss && Tn(Tn.S, "Reflect", { setPrototypeOf: function(t2, e2) {
      ss.check(t2, e2);
      try {
        return ss.set(t2, e2), true;
      } catch (t3) {
        return false;
      }
    } });
    var bp = Gn(true);
    Tn(Tn.P, "Array", { includes: function(t2) {
      return bp(this, t2, arguments.length > 1 ? arguments[1] : void 0);
    } }), jl("includes");
    var wp = En("isConcatSpreadable"), xp = function t2(e2, i2, r2, o2, n2, a2, s2, c2) {
      for (var l2, u2, h2 = n2, p2 = 0, f2 = !!s2 && wn(s2, c2, 3); p2 < o2; ) {
        if (p2 in r2) {
          if (l2 = f2 ? f2(r2[p2], p2, i2) : r2[p2], u2 = false, rn(l2) && (u2 = void 0 !== (u2 = l2[wp]) ? !!u2 : ea(l2)), u2 && a2 > 0)
            h2 = t2(e2, i2, l2, jn(l2.length), h2, a2 - 1) - 1;
          else {
            if (h2 >= 9007199254740991)
              throw TypeError();
            e2[h2] = l2;
          }
          h2++;
        }
        p2++;
      }
      return h2;
    };
    Tn(Tn.P, "Array", { flatMap: function(t2) {
      var e2, i2, r2 = ia(this);
      return bn(t2), e2 = jn(r2.length), i2 = Sl(r2, 0), xp(i2, r2, r2, e2, 0, 1, t2, arguments[1]), i2;
    } }), jl("flatMap");
    var Tp = function(t2, e2, i2, r2) {
      var o2 = String(Ln(t2)), n2 = o2.length, a2 = void 0 === i2 ? " " : String(i2), s2 = jn(e2);
      if (s2 <= n2 || "" == a2)
        return o2;
      var c2 = s2 - n2, l2 = Js.call(a2, Math.ceil(c2 / a2.length));
      return l2.length > c2 && (l2 = l2.slice(0, c2)), r2 ? l2 + o2 : o2 + l2;
    }, Sp = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(uh);
    Tn(Tn.P + Tn.F * Sp, "String", { padStart: function(t2) {
      return Tp(this, t2, arguments.length > 1 ? arguments[1] : void 0, true);
    } });
    var Ep = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(uh);
    Tn(Tn.P + Tn.F * Ep, "String", { padEnd: function(t2) {
      return Tp(this, t2, arguments.length > 1 ? arguments[1] : void 0, false);
    } }), ks("trimLeft", function(t2) {
      return function() {
        return t2(this, 1);
      };
    }, "trimStart"), ks("trimRight", function(t2) {
      return function() {
        return t2(this, 2);
      };
    }, "trimEnd"), Cn("asyncIterator"), Bn.f("asyncIterator"), Tn(Tn.S, "Object", { getOwnPropertyDescriptors: function(t2) {
      for (var e2, i2, r2 = Rn(t2), o2 = ga.f, n2 = vp(r2), a2 = {}, s2 = 0; n2.length > s2; )
        void 0 !== (i2 = o2(r2, e2 = n2[s2++])) && hl(a2, e2, i2);
      return a2;
    } });
    var Ap = ta.f, kp = function(t2) {
      return function(e2) {
        for (var i2, r2 = Rn(e2), o2 = Qn(r2), n2 = o2.length, a2 = 0, s2 = []; n2 > a2; )
          i2 = o2[a2++], tn && !Ap.call(r2, i2) || s2.push(t2 ? [i2, r2[i2]] : r2[i2]);
        return s2;
      };
    }, Ip = kp(false);
    Tn(Tn.S, "Object", { values: function(t2) {
      return Ip(t2);
    } });
    var Bp = kp(true);
    Tn(Tn.S, "Object", { entries: function(t2) {
      return Bp(t2);
    } }), Tn(Tn.P + Tn.R, "Promise", { finally: function(t2) {
      var e2 = Cu(this, en.Promise || Yo.Promise), i2 = "function" == typeof t2;
      return this.then(i2 ? function(i3) {
        return hh(e2, t2()).then(function() {
          return i3;
        });
      } : t2, i2 ? function(i3) {
        return hh(e2, t2()).then(function() {
          throw i3;
        });
      } : t2);
    } });
    var Pp = [].slice, Cp = /MSIE .\./.test(uh), zp = function(t2) {
      return function(e2, i2) {
        var r2 = arguments.length > 2, o2 = !!r2 && Pp.call(arguments, 2);
        return t2(r2 ? function() {
          ("function" == typeof e2 ? e2 : Function(e2)).apply(this, o2);
        } : e2, i2);
      };
    };
    Tn(Tn.G + Tn.B + Tn.F * Cp, { setTimeout: zp(Yo.setTimeout), setInterval: zp(Yo.setInterval) }), Tn(Tn.G + Tn.B, { setImmediate: Yu.set, clearImmediate: Yu.clear });
    for (var Dp = En("iterator"), Mp = En("toStringTag"), Lp = Dc.Array, Rp = { CSSRuleList: true, CSSStyleDeclaration: false, CSSValueList: false, ClientRectList: false, DOMRectList: false, DOMStringList: false, DOMTokenList: true, DataTransferItemList: false, FileList: false, HTMLAllCollection: false, HTMLCollection: false, HTMLFormElement: false, HTMLSelectElement: false, MediaList: true, MimeTypeArray: false, NamedNodeMap: false, NodeList: true, PaintRequestList: false, Plugin: false, PluginArray: false, SVGLengthList: false, SVGNumberList: false, SVGPathSegList: false, SVGPointList: false, SVGStringList: false, SVGTransformList: false, SourceBufferList: false, StyleSheetList: true, TextTrackCueList: false, TextTrackList: false, TouchList: false }, Op = Qn(Rp), Fp = 0; Fp < Op.length; Fp++) {
      var Up, Np = Op[Fp], jp = Rp[Np], Vp = Yo[Np], qp = Vp && Vp.prototype;
      if (qp && (qp[Dp] || fn(qp, Dp, Lp), qp[Mp] || fn(qp, Mp, Np), Dc[Np] = Lp, jp))
        for (Up in Yl)
          qp[Up] || yn(qp, Up, Yl[Up], true);
    }
    t.createCommonjsModule(function(t2) {
      var e2 = function(t3) {
        var e3 = Object.prototype, i2 = e3.hasOwnProperty, r2 = "function" == typeof Symbol ? Symbol : {}, o2 = r2.iterator || "@@iterator", n2 = r2.asyncIterator || "@@asyncIterator", a2 = r2.toStringTag || "@@toStringTag";
        function s2(t4, e4, i3, r3) {
          var o3 = Object.create((e4 && e4.prototype instanceof u2 ? e4 : u2).prototype), n3 = new x2(r3 || []);
          return o3._invoke = function(t5, e5, i4) {
            var r4 = "suspendedStart";
            return function(o4, n4) {
              if ("executing" === r4)
                throw new Error("Generator is already running");
              if ("completed" === r4) {
                if ("throw" === o4)
                  throw n4;
                return { value: void 0, done: true };
              }
              for (i4.method = o4, i4.arg = n4; ; ) {
                var a3 = i4.delegate;
                if (a3) {
                  var s3 = y2(a3, i4);
                  if (s3) {
                    if (s3 === l2)
                      continue;
                    return s3;
                  }
                }
                if ("next" === i4.method)
                  i4.sent = i4._sent = i4.arg;
                else if ("throw" === i4.method) {
                  if ("suspendedStart" === r4)
                    throw r4 = "completed", i4.arg;
                  i4.dispatchException(i4.arg);
                } else
                  "return" === i4.method && i4.abrupt("return", i4.arg);
                r4 = "executing";
                var u3 = c2(t5, e5, i4);
                if ("normal" === u3.type) {
                  if (r4 = i4.done ? "completed" : "suspendedYield", u3.arg === l2)
                    continue;
                  return { value: u3.arg, done: i4.done };
                }
                "throw" === u3.type && (r4 = "completed", i4.method = "throw", i4.arg = u3.arg);
              }
            };
          }(t4, i3, n3), o3;
        }
        function c2(t4, e4, i3) {
          try {
            return { type: "normal", arg: t4.call(e4, i3) };
          } catch (t5) {
            return { type: "throw", arg: t5 };
          }
        }
        t3.wrap = s2;
        var l2 = {};
        function u2() {
        }
        function h2() {
        }
        function p2() {
        }
        var f2 = {};
        f2[o2] = function() {
          return this;
        };
        var d2 = Object.getPrototypeOf, _3 = d2 && d2(d2(T2([])));
        _3 && _3 !== e3 && i2.call(_3, o2) && (f2 = _3);
        var m2 = p2.prototype = u2.prototype = Object.create(f2);
        function g2(t4) {
          ["next", "throw", "return"].forEach(function(e4) {
            t4[e4] = function(t5) {
              return this._invoke(e4, t5);
            };
          });
        }
        function v2(t4, e4) {
          var r3;
          this._invoke = function(o3, n3) {
            function a3() {
              return new e4(function(r4, a4) {
                !function r5(o4, n4, a5, s3) {
                  var l3 = c2(t4[o4], t4, n4);
                  if ("throw" !== l3.type) {
                    var u3 = l3.arg, h3 = u3.value;
                    return h3 && "object" == typeof h3 && i2.call(h3, "__await") ? e4.resolve(h3.__await).then(function(t5) {
                      r5("next", t5, a5, s3);
                    }, function(t5) {
                      r5("throw", t5, a5, s3);
                    }) : e4.resolve(h3).then(function(t5) {
                      u3.value = t5, a5(u3);
                    }, function(t5) {
                      return r5("throw", t5, a5, s3);
                    });
                  }
                  s3(l3.arg);
                }(o3, n3, r4, a4);
              });
            }
            return r3 = r3 ? r3.then(a3, a3) : a3();
          };
        }
        function y2(t4, e4) {
          var i3 = t4.iterator[e4.method];
          if (void 0 === i3) {
            if (e4.delegate = null, "throw" === e4.method) {
              if (t4.iterator.return && (e4.method = "return", e4.arg = void 0, y2(t4, e4), "throw" === e4.method))
                return l2;
              e4.method = "throw", e4.arg = new TypeError("The iterator does not provide a 'throw' method");
            }
            return l2;
          }
          var r3 = c2(i3, t4.iterator, e4.arg);
          if ("throw" === r3.type)
            return e4.method = "throw", e4.arg = r3.arg, e4.delegate = null, l2;
          var o3 = r3.arg;
          return o3 ? o3.done ? (e4[t4.resultName] = o3.value, e4.next = t4.nextLoc, "return" !== e4.method && (e4.method = "next", e4.arg = void 0), e4.delegate = null, l2) : o3 : (e4.method = "throw", e4.arg = new TypeError("iterator result is not an object"), e4.delegate = null, l2);
        }
        function b2(t4) {
          var e4 = { tryLoc: t4[0] };
          1 in t4 && (e4.catchLoc = t4[1]), 2 in t4 && (e4.finallyLoc = t4[2], e4.afterLoc = t4[3]), this.tryEntries.push(e4);
        }
        function w2(t4) {
          var e4 = t4.completion || {};
          e4.type = "normal", delete e4.arg, t4.completion = e4;
        }
        function x2(t4) {
          this.tryEntries = [{ tryLoc: "root" }], t4.forEach(b2, this), this.reset(true);
        }
        function T2(t4) {
          if (t4) {
            var e4 = t4[o2];
            if (e4)
              return e4.call(t4);
            if ("function" == typeof t4.next)
              return t4;
            if (!isNaN(t4.length)) {
              var r3 = -1, n3 = function e5() {
                for (; ++r3 < t4.length; )
                  if (i2.call(t4, r3))
                    return e5.value = t4[r3], e5.done = false, e5;
                return e5.value = void 0, e5.done = true, e5;
              };
              return n3.next = n3;
            }
          }
          return { next: S2 };
        }
        function S2() {
          return { value: void 0, done: true };
        }
        return h2.prototype = m2.constructor = p2, p2.constructor = h2, p2[a2] = h2.displayName = "GeneratorFunction", t3.isGeneratorFunction = function(t4) {
          var e4 = "function" == typeof t4 && t4.constructor;
          return !!e4 && (e4 === h2 || "GeneratorFunction" === (e4.displayName || e4.name));
        }, t3.mark = function(t4) {
          return Object.setPrototypeOf ? Object.setPrototypeOf(t4, p2) : (t4.__proto__ = p2, a2 in t4 || (t4[a2] = "GeneratorFunction")), t4.prototype = Object.create(m2), t4;
        }, t3.awrap = function(t4) {
          return { __await: t4 };
        }, g2(v2.prototype), v2.prototype[n2] = function() {
          return this;
        }, t3.AsyncIterator = v2, t3.async = function(e4, i3, r3, o3, n3) {
          void 0 === n3 && (n3 = Promise);
          var a3 = new v2(s2(e4, i3, r3, o3), n3);
          return t3.isGeneratorFunction(i3) ? a3 : a3.next().then(function(t4) {
            return t4.done ? t4.value : a3.next();
          });
        }, g2(m2), m2[a2] = "Generator", m2[o2] = function() {
          return this;
        }, m2.toString = function() {
          return "[object Generator]";
        }, t3.keys = function(t4) {
          var e4 = [];
          for (var i3 in t4)
            e4.push(i3);
          return e4.reverse(), function i4() {
            for (; e4.length; ) {
              var r3 = e4.pop();
              if (r3 in t4)
                return i4.value = r3, i4.done = false, i4;
            }
            return i4.done = true, i4;
          };
        }, t3.values = T2, x2.prototype = { constructor: x2, reset: function(t4) {
          if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(w2), !t4)
            for (var e4 in this)
              "t" === e4.charAt(0) && i2.call(this, e4) && !isNaN(+e4.slice(1)) && (this[e4] = void 0);
        }, stop: function() {
          this.done = true;
          var t4 = this.tryEntries[0].completion;
          if ("throw" === t4.type)
            throw t4.arg;
          return this.rval;
        }, dispatchException: function(t4) {
          if (this.done)
            throw t4;
          var e4 = this;
          function r3(i3, r4) {
            return a3.type = "throw", a3.arg = t4, e4.next = i3, r4 && (e4.method = "next", e4.arg = void 0), !!r4;
          }
          for (var o3 = this.tryEntries.length - 1; o3 >= 0; --o3) {
            var n3 = this.tryEntries[o3], a3 = n3.completion;
            if ("root" === n3.tryLoc)
              return r3("end");
            if (n3.tryLoc <= this.prev) {
              var s3 = i2.call(n3, "catchLoc"), c3 = i2.call(n3, "finallyLoc");
              if (s3 && c3) {
                if (this.prev < n3.catchLoc)
                  return r3(n3.catchLoc, true);
                if (this.prev < n3.finallyLoc)
                  return r3(n3.finallyLoc);
              } else if (s3) {
                if (this.prev < n3.catchLoc)
                  return r3(n3.catchLoc, true);
              } else {
                if (!c3)
                  throw new Error("try statement without catch or finally");
                if (this.prev < n3.finallyLoc)
                  return r3(n3.finallyLoc);
              }
            }
          }
        }, abrupt: function(t4, e4) {
          for (var r3 = this.tryEntries.length - 1; r3 >= 0; --r3) {
            var o3 = this.tryEntries[r3];
            if (o3.tryLoc <= this.prev && i2.call(o3, "finallyLoc") && this.prev < o3.finallyLoc) {
              var n3 = o3;
              break;
            }
          }
          n3 && ("break" === t4 || "continue" === t4) && n3.tryLoc <= e4 && e4 <= n3.finallyLoc && (n3 = null);
          var a3 = n3 ? n3.completion : {};
          return a3.type = t4, a3.arg = e4, n3 ? (this.method = "next", this.next = n3.finallyLoc, l2) : this.complete(a3);
        }, complete: function(t4, e4) {
          if ("throw" === t4.type)
            throw t4.arg;
          return "break" === t4.type || "continue" === t4.type ? this.next = t4.arg : "return" === t4.type ? (this.rval = this.arg = t4.arg, this.method = "return", this.next = "end") : "normal" === t4.type && e4 && (this.next = e4), l2;
        }, finish: function(t4) {
          for (var e4 = this.tryEntries.length - 1; e4 >= 0; --e4) {
            var i3 = this.tryEntries[e4];
            if (i3.finallyLoc === t4)
              return this.complete(i3.completion, i3.afterLoc), w2(i3), l2;
          }
        }, catch: function(t4) {
          for (var e4 = this.tryEntries.length - 1; e4 >= 0; --e4) {
            var i3 = this.tryEntries[e4];
            if (i3.tryLoc === t4) {
              var r3 = i3.completion;
              if ("throw" === r3.type) {
                var o3 = r3.arg;
                w2(i3);
              }
              return o3;
            }
          }
          throw new Error("illegal catch attempt");
        }, delegateYield: function(t4, e4, i3) {
          return this.delegate = { iterator: T2(t4), resultName: e4, nextLoc: i3 }, "next" === this.method && (this.arg = void 0), l2;
        } }, t3;
      }(t2.exports);
      try {
        regeneratorRuntime = e2;
      } catch (t3) {
        Function("r", "regeneratorRuntime = r")(e2);
      }
    });
    var Zp = t.createCommonjsModule(function(e2) {
      var i2 = e2.exports = "undefined" != typeof window && window.Math == Math ? window : void 0 !== t.window && t.window.Math == Math ? t.window : Function("return this")();
      "number" == typeof __g && (__g = i2);
    }), Gp = t.createCommonjsModule(function(t2) {
      var e2 = t2.exports = { version: "2.6.12" };
      "number" == typeof __e && (__e = e2);
    }), Hp = function(t2, e2, i2) {
      if (function(t3) {
        if ("function" != typeof t3)
          throw TypeError(t3 + " is not a function!");
      }(t2), void 0 === e2)
        return t2;
      switch (i2) {
        case 1:
          return function(i3) {
            return t2.call(e2, i3);
          };
        case 2:
          return function(i3, r2) {
            return t2.call(e2, i3, r2);
          };
        case 3:
          return function(i3, r2, o2) {
            return t2.call(e2, i3, r2, o2);
          };
      }
      return function() {
        return t2.apply(e2, arguments);
      };
    }, Wp = function(t2) {
      return "object" == typeof t2 ? null !== t2 : "function" == typeof t2;
    }, Xp = function(t2) {
      if (!Wp(t2))
        throw TypeError(t2 + " is not an object!");
      return t2;
    }, Kp = function(t2) {
      try {
        return !!t2();
      } catch (t3) {
        return true;
      }
    }, Yp = !Kp(function() {
      return 7 != Object.defineProperty({}, "a", { get: function() {
        return 7;
      } }).a;
    }), Jp = Zp.document, Qp = Wp(Jp) && Wp(Jp.createElement), $p = !Yp && !Kp(function() {
      return 7 != Object.defineProperty(Qp ? Jp.createElement("div") : {}, "a", { get: function() {
        return 7;
      } }).a;
    }), tf = Object.defineProperty, ef = { f: Yp ? Object.defineProperty : function(t2, e2, i2) {
      if (Xp(t2), e2 = function(t3, e3) {
        if (!Wp(t3))
          return t3;
        var i3, r2;
        if ("function" == typeof (i3 = t3.toString) && !Wp(r2 = i3.call(t3)))
          return r2;
        if ("function" == typeof (i3 = t3.valueOf) && !Wp(r2 = i3.call(t3)))
          return r2;
        throw TypeError("Can't convert object to primitive value");
      }(e2), Xp(i2), $p)
        try {
          return tf(t2, e2, i2);
        } catch (t3) {
        }
      if ("get" in i2 || "set" in i2)
        throw TypeError("Accessors not supported!");
      return "value" in i2 && (t2[e2] = i2.value), t2;
    } }, rf = Yp ? function(t2, e2, i2) {
      return ef.f(t2, e2, function(t3, e3) {
        return { enumerable: false, configurable: true, writable: true, value: e3 };
      }(0, i2));
    } : function(t2, e2, i2) {
      return t2[e2] = i2, t2;
    }, of = {}.hasOwnProperty, nf = function(t2, e2) {
      return of.call(t2, e2);
    }, af = function(t2, e2, i2) {
      var r2, o2, n2, a2 = t2 & af.F, s2 = t2 & af.G, c2 = t2 & af.S, l2 = t2 & af.P, u2 = t2 & af.B, h2 = t2 & af.W, p2 = s2 ? Gp : Gp[e2] || (Gp[e2] = {}), f2 = p2.prototype, d2 = s2 ? Zp : c2 ? Zp[e2] : (Zp[e2] || {}).prototype;
      for (r2 in s2 && (i2 = e2), i2)
        (o2 = !a2 && d2 && void 0 !== d2[r2]) && nf(p2, r2) || (n2 = o2 ? d2[r2] : i2[r2], p2[r2] = s2 && "function" != typeof d2[r2] ? i2[r2] : u2 && o2 ? Hp(n2, Zp) : h2 && d2[r2] == n2 ? function(t3) {
          var e3 = function(e4, i3, r3) {
            if (this instanceof t3) {
              switch (arguments.length) {
                case 0:
                  return new t3();
                case 1:
                  return new t3(e4);
                case 2:
                  return new t3(e4, i3);
              }
              return new t3(e4, i3, r3);
            }
            return t3.apply(this, arguments);
          };
          return e3.prototype = t3.prototype, e3;
        }(n2) : l2 && "function" == typeof n2 ? Hp(Function.call, n2) : n2, l2 && ((p2.virtual || (p2.virtual = {}))[r2] = n2, t2 & af.R && f2 && !f2[r2] && rf(f2, r2, n2)));
    };
    af.F = 1, af.G = 2, af.S = 4, af.P = 8, af.B = 16, af.W = 32, af.U = 64, af.R = 128, af(af.G, { global: Zp });
    var sf = Gp.global, cf = t.createCommonjsModule(function(t2) {
      var e2, i2 = (e2 = sf) && e2.__esModule ? e2 : { default: e2 };
      i2.default._babelPolyfill && "undefined" != typeof console && console.warn && console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."), i2.default._babelPolyfill = true;
    });
    t.unwrapExports(cf);
    var lf = { version: "3.0.16.10", supported: e, setRTLTextPlugin: t.setRTLTextPlugin, getRTLTextPluginStatus: t.getRTLTextPluginStatus, Map: ko, NavigationControl: Bo, GeolocateControl: Uo, AttributionControl: go, ScaleControl: Vo, PitchControl: No, FullscreenControl: Go, Popup: Wo, Marker: Lo, Style: Ue, LngLat: t.LngLat, LngLatBounds: t.LngLatBounds, Point: t.Point, MercatorCoordinate: T, Evented: t.Evented, config: t.config$1, get accessToken() {
      return t.config$1.ACCESS_TOKEN;
    }, set accessToken(e2) {
      t.config$1.ACCESS_TOKEN = e2;
    }, get baseApiUrl() {
      return t.config$1.API_URL;
    }, set baseApiUrl(e2) {
      t.config$1.API_URL = e2;
    }, get workerCount() {
      return Lt.workerCount;
    }, set workerCount(t2) {
      Lt.workerCount = t2;
    }, get maxParallelImageRequests() {
      return t.config$1.MAX_PARALLEL_IMAGE_REQUESTS;
    }, set maxParallelImageRequests(e2) {
      t.config$1.MAX_PARALLEL_IMAGE_REQUESTS = e2;
    }, clearStorage: function(e2) {
      t.clearTileCache(e2);
    }, workerUrl: "" }, uf = "3.0.16.10".split(".").slice(0, 2).concat([0]).join(".");
    return Ko.config.version = uf, lf._loader = Ko, lf.ajax = function(e2, i2, r2) {
      if (void 0 === r2 && (r2 = false), e2 = t.formatAjax(e2), Promise && !i2)
        return new Promise(function(i3, o2) {
          void 0 === e2.cache && (e2.cache = false), t.makeRequest(e2, function(t2, e3, n2, a2) {
            t2 ? o2(t2) : i3(r2 ? { data: e3, cacheControl: n2, expires: a2 } : e3);
          });
        });
      t.makeRequest(e2, i2);
    }, lf.tokenTask = new Xo(), lf.plugin = function(t2, e2) {
      return Ko(t2, e2);
    }, lf.version = "3.0.16.10", "" !== lf.config.API_URL ? console.warn("SDK\u4E3ADEV\u7248\u672C\uFF0C\u7248\u672C\u53F73.0.16.10\uFF0C\u90E8\u7F72\u8BF7\u4F7F\u7528\u53D1\u5E03\u7248\u672C\u3002") : t.initApiURI(uf, lf.config), Ko.config.apiUrl = lf.config.API_URL, lf.userAgent = Ko.userAgent, lf;
  });
  return sgmap;
});
const version = 8;
const sprite = "aegis://sprites/aegis/Streets";
const glyphs = "aegis://fonts/aegis/{fontstack}/{range}.pbf";
const sources = {
  epgis: {
    type: "vector",
    url: "aegis://aegis.Streets.zvLK"
  }
};
const layers = [
  {
    type: "background",
    id: "background",
    layout: {
      visibility: "visible"
    },
    paint: {
      "background-color": "#f7f7f7"
    }
  },
  {
    id: "Sea/1",
    type: "fill",
    source: "epgis",
    "source-layer": "Sea",
    maxzoom: 9,
    layout: {},
    paint: {
      "fill-color": "#b2cefe"
    }
  },
  {
    id: "World/1",
    type: "fill",
    source: "epgis",
    "source-layer": "World",
    maxzoom: 7,
    layout: {},
    paint: {
      "fill-color": "#f7f7f7"
    }
  },
  {
    id: "Province",
    type: "fill",
    source: "epgis",
    "source-layer": "Province",
    minzoom: 7,
    layout: {},
    paint: {
      "fill-color": "#f7f7f7"
    }
  },
  {
    id: "SouthIsland_S/1",
    type: "fill",
    source: "epgis",
    "source-layer": "SouthIsland_S",
    maxzoom: 7,
    layout: {},
    paint: {
      "fill-color": "#f7f7f7"
    }
  },
  {
    id: "AOI/Traffic/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#CDEAE9"
    }
  },
  {
    id: "AOI/Building/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#EEEEEE"
    }
  },
  {
    id: "AOI/School/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#D2E8F5"
    }
  },
  {
    id: "AOI/Museum/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      3
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#F4E0D7"
    }
  },
  {
    id: "AOI/Hospital/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      4
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#F8DADA"
    }
  },
  {
    id: "AOI/Shopping/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      5
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#DDD3F1"
    }
  },
  {
    id: "AOI/Park/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      6
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#C6E2B2"
    }
  },
  {
    id: "AOI/Industry/1",
    type: "fill",
    source: "epgis",
    "source-layer": "AOI",
    filter: [
      "==",
      "_symbol",
      7
    ],
    minzoom: 11,
    layout: {},
    paint: {
      "fill-color": "#FDF5E6"
    }
  },
  {
    id: "Green",
    type: "fill",
    source: "epgis",
    "source-layer": "Green",
    minzoom: 7.5,
    layout: {},
    paint: {
      "fill-color": "#C6E2B2"
    }
  },
  {
    id: "WaterLine",
    type: "line",
    source: "epgis",
    "source-layer": "WaterLine",
    minzoom: 10,
    layout: {
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-color": "#b2cefe",
      "line-width": 1.2
    }
  },
  {
    id: "Water",
    type: "fill",
    source: "epgis",
    "source-layer": "Water",
    layout: {},
    paint: {
      "fill-color": "#b2cefe"
    }
  },
  {
    id: "Railway/1",
    type: "line",
    source: "epgis",
    "source-layer": "Railway",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 10,
    layout: {
      "line-join": "round"
    },
    paint: {
      "line-color": "#828282",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        3
      ]
    }
  },
  {
    id: "Railway/0",
    type: "line",
    source: "epgis",
    "source-layer": "Railway",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 10,
    layout: {
      "line-join": "round"
    },
    paint: {
      "line-color": "#FFFFFF",
      "line-dasharray": [
        6,
        6
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        1,
        8,
        2
      ]
    }
  },
  {
    id: "Railway/HighSpeed/1",
    type: "line",
    source: "epgis",
    "source-layer": "Railway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 10,
    layout: {
      "line-join": "round"
    },
    paint: {
      "line-color": "#FF7F7F",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        3
      ]
    }
  },
  {
    id: "Railway/HighSpeed/0",
    type: "line",
    source: "epgis",
    "source-layer": "Railway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 10,
    layout: {
      "line-join": "round"
    },
    paint: {
      "line-color": "#FFFFFF",
      "line-dasharray": [
        6,
        6
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        1,
        8,
        2
      ]
    }
  },
  {
    id: "R_FerryLine",
    type: "line",
    source: "epgis",
    "source-layer": "R_FerryLine",
    minzoom: 12.5,
    layout: {
      "line-join": "round"
    },
    paint: {
      "line-color": "#6699CD",
      "line-dasharray": [
        2,
        2
      ],
      "line-width": 1.2
    }
  },
  {
    id: "R_Pathway/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_Pathway",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 15,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        3,
        16,
        4,
        17,
        7,
        18,
        12,
        19,
        16
      ]
    }
  },
  {
    id: "R_Pathway/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_Pathway",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 15,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        2,
        16,
        2,
        17,
        5,
        18,
        10,
        19,
        14
      ]
    }
  },
  {
    id: "R_Pathway/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_Pathway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 15,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        3,
        16,
        4,
        17,
        7,
        18,
        12,
        19,
        16
      ]
    }
  },
  {
    id: "R_Pathway/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_Pathway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 15,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f0f0f0",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        2,
        16,
        2,
        17,
        5,
        18,
        10,
        19,
        14
      ]
    }
  },
  {
    id: "R_Pathway/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_Pathway",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 15,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        3,
        16,
        4,
        17,
        7,
        18,
        12,
        19,
        16
      ]
    }
  },
  {
    id: "R_Pathway/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_Pathway",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 15,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        2,
        16,
        2,
        17,
        5,
        18,
        10,
        19,
        14
      ]
    }
  },
  {
    id: "R_VillageRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_VillageRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 14,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        4,
        16,
        6,
        17,
        9,
        18,
        14,
        19,
        18
      ]
    }
  },
  {
    id: "R_VillageRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_VillageRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 14,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        2,
        16,
        4,
        17,
        7,
        18,
        12,
        19,
        16
      ]
    }
  },
  {
    id: "R_VillageRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_VillageRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 14,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        4,
        16,
        6,
        17,
        9,
        18,
        14,
        19,
        18
      ]
    }
  },
  {
    id: "R_VillageRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_VillageRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 14,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f0f0f0",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        2,
        16,
        4,
        17,
        7,
        18,
        12,
        19,
        16
      ]
    }
  },
  {
    id: "R_VillageRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_VillageRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 14,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        4,
        16,
        6,
        17,
        9,
        18,
        14,
        19,
        18
      ]
    }
  },
  {
    id: "R_VillageRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_VillageRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 14,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        2,
        16,
        4,
        17,
        7,
        18,
        12,
        19,
        16
      ]
    }
  },
  {
    id: "R_OrdinaryRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_OrdinaryRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 14.5,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        14,
        3,
        15,
        4,
        16,
        6,
        17,
        13,
        18,
        22,
        19,
        38
      ]
    }
  },
  {
    id: "R_OrdinaryRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_OrdinaryRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 14.5,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        14,
        2,
        15,
        3,
        16,
        4,
        17,
        10,
        18,
        20,
        19,
        36
      ]
    }
  },
  {
    id: "R_OrdinaryRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_OrdinaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 14.5,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        14,
        3,
        15,
        4,
        16,
        6,
        17,
        13,
        18,
        22,
        19,
        38
      ]
    }
  },
  {
    id: "R_OrdinaryRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_OrdinaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 14.5,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f0f0f0",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        14,
        2,
        15,
        3,
        16,
        4,
        17,
        10,
        18,
        20,
        19,
        36
      ]
    }
  },
  {
    id: "R_OrdinaryRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_OrdinaryRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 14.5,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        14,
        3,
        15,
        4,
        16,
        6,
        17,
        13,
        18,
        22,
        19,
        38
      ]
    }
  },
  {
    id: "R_OrdinaryRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_OrdinaryRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 14.5,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        14,
        2,
        15,
        3,
        16,
        4,
        17,
        10,
        18,
        20,
        19,
        36
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        2.5,
        15,
        4,
        16,
        8,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        1.5,
        15,
        3,
        16,
        6,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        2.5,
        15,
        4,
        16,
        8,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f0f0f0",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        1.5,
        15,
        3,
        16,
        6,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 12.7,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        2.5,
        15,
        4,
        16,
        8,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 12.7,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        1.5,
        15,
        3,
        16,
        6,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 12.7,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        2.5,
        15,
        4,
        16,
        8,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_SecondaryRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_SecondaryRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 12.7,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        1.5,
        15,
        3,
        16,
        6,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_TownshipRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        4,
        14,
        5,
        15,
        6,
        16,
        9,
        17,
        13,
        18,
        22,
        19,
        38
      ]
    }
  },
  {
    id: "R_TownshipRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        2,
        14,
        3,
        15,
        4,
        16,
        7,
        17,
        11,
        18,
        20,
        19,
        36
      ]
    }
  },
  {
    id: "R_TownshipRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        4,
        14,
        5,
        15,
        6,
        16,
        9,
        17,
        13,
        18,
        22,
        19,
        38
      ]
    }
  },
  {
    id: "R_TownshipRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f0f0f0",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        2,
        14,
        3,
        15,
        4,
        16,
        7,
        17,
        11,
        18,
        20,
        19,
        36
      ]
    }
  },
  {
    id: "R_TownshipRoad/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 10,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        4,
        14,
        5,
        15,
        6,
        16,
        9,
        17,
        13,
        18,
        22,
        19,
        38
      ]
    }
  },
  {
    id: "R_TownshipRoad/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 10,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        2,
        14,
        3,
        15,
        4,
        16,
        7,
        17,
        11,
        18,
        20,
        19,
        36
      ]
    }
  },
  {
    id: "R_TownshipRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 10,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        4,
        14,
        5,
        15,
        6,
        16,
        9,
        17,
        13,
        18,
        22,
        19,
        38
      ]
    }
  },
  {
    id: "R_TownshipRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_TownshipRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 10,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        2,
        14,
        3,
        15,
        4,
        16,
        7,
        17,
        11,
        18,
        20,
        19,
        36
      ]
    }
  },
  {
    id: "R_CountyRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        3,
        12,
        5,
        15,
        7,
        16,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_CountyRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        12,
        3,
        15,
        5,
        16,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_CountyRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        3,
        12,
        5,
        15,
        7,
        16,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_CountyRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f0f0f0",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        12,
        3,
        15,
        5,
        16,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_CountyRoad/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 9,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        3,
        12,
        5,
        15,
        7,
        16,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_CountyRoad/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 9,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        12,
        3,
        15,
        5,
        16,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_CountyRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 9,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#d7d7d7",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        3,
        12,
        5,
        15,
        7,
        16,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_CountyRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_CountyRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 9,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffffff",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        12,
        3,
        15,
        5,
        16,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#DEB887",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 9,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 9,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fff0bb",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 9,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_PrimaryRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_PrimaryRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 9,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fff0bb",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 11,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 11,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        1,
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#DEB887",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        0.5,
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 8,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        1,
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 8,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fff0bb",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        0.5,
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 8,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        1,
        10,
        4,
        11,
        5,
        13,
        7,
        15,
        10,
        17,
        14,
        18,
        24,
        19,
        38
      ]
    }
  },
  {
    id: "R_ProvincialRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ProvincialRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 8,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fff0bb",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        0.5,
        10,
        2,
        11,
        3,
        13,
        5,
        15,
        8,
        17,
        12,
        18,
        22,
        19,
        36
      ]
    }
  },
  {
    id: "R_NationalRoad/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 9,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        3,
        9,
        4,
        11,
        5,
        13,
        7,
        15,
        12,
        17,
        18,
        18,
        28,
        19,
        52
      ]
    }
  },
  {
    id: "R_NationalRoad/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 9,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        1,
        9,
        2,
        11,
        3,
        13,
        5,
        15,
        10,
        17,
        16,
        18,
        26,
        19,
        50
      ]
    }
  },
  {
    id: "R_NationalRoad/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        3,
        9,
        4,
        11,
        5,
        13,
        7,
        15,
        12,
        17,
        18,
        18,
        28,
        19,
        52
      ]
    }
  },
  {
    id: "R_NationalRoad/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#DEB887",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        1,
        9,
        2,
        11,
        3,
        13,
        5,
        15,
        10,
        17,
        16,
        18,
        26,
        19,
        50
      ]
    }
  },
  {
    id: "R_NationalRoad/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 7,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        3,
        9,
        4,
        11,
        5,
        13,
        7,
        15,
        12,
        17,
        18,
        18,
        28,
        19,
        52
      ]
    }
  },
  {
    id: "R_NationalRoad/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 7,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fff0bb",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        1,
        9,
        2,
        11,
        3,
        13,
        5,
        15,
        10,
        17,
        16,
        18,
        26,
        19,
        50
      ]
    }
  },
  {
    id: "R_NationalRoad/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7d78c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        3,
        9,
        4,
        11,
        5,
        13,
        7,
        15,
        12,
        17,
        18,
        18,
        28,
        19,
        52
      ]
    }
  },
  {
    id: "R_NationalRoad/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 7,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fff0bb",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        1,
        9,
        2,
        11,
        3,
        13,
        5,
        15,
        10,
        17,
        16,
        18,
        26,
        19,
        50
      ]
    }
  },
  {
    id: "R_NationalRoad_Simple",
    type: "line",
    source: "epgis",
    "source-layer": "R_NationalRoad_Simple",
    minzoom: 6,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        6,
        "#ffe5a9",
        8,
        "#f7d78c"
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        6,
        1,
        8,
        3
      ]
    }
  },
  {
    id: "R_UrbanHighway/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 11,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        3,
        9,
        4,
        10,
        5,
        13,
        8,
        15,
        12,
        17,
        20,
        18,
        38,
        19,
        72
      ]
    }
  },
  {
    id: "R_UrbanHighway/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 11,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        1,
        9,
        2,
        10,
        3,
        13,
        6,
        15,
        10,
        17,
        18,
        18,
        36,
        19,
        70
      ]
    }
  },
  {
    id: "R_UrbanHighway/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7bf5f",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        3,
        9,
        4,
        10,
        5,
        13,
        8,
        15,
        12,
        17,
        20,
        18,
        38,
        19,
        72
      ]
    }
  },
  {
    id: "R_UrbanHighway/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#CD853F",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        1,
        9,
        2,
        10,
        3,
        13,
        6,
        15,
        10,
        17,
        18,
        18,
        36,
        19,
        70
      ]
    }
  },
  {
    id: "R_UrbanHighway/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 8,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7bf5f",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        3,
        9,
        4,
        10,
        5,
        13,
        8,
        15,
        12,
        17,
        20,
        18,
        38,
        19,
        72
      ]
    }
  },
  {
    id: "R_UrbanHighway/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 8,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fed151",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        1,
        9,
        2,
        10,
        3,
        13,
        6,
        15,
        10,
        17,
        18,
        18,
        36,
        19,
        70
      ]
    }
  },
  {
    id: "R_UrbanHighway/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 8,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f7bf5f",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        3,
        9,
        4,
        10,
        5,
        13,
        8,
        15,
        12,
        17,
        20,
        18,
        38,
        19,
        72
      ]
    }
  },
  {
    id: "R_UrbanHighway/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_UrbanHighway",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 8,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#fed151",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        1,
        9,
        2,
        10,
        3,
        13,
        6,
        15,
        10,
        17,
        18,
        18,
        36,
        19,
        70
      ]
    }
  },
  {
    id: "R_ExpressWay/Construction/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 8,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#a8acb3",
      "line-dasharray": [
        1.66667,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        4,
        10,
        6,
        11,
        8,
        12,
        9,
        13,
        10,
        15,
        13,
        17,
        22,
        18,
        42,
        19,
        80
      ]
    }
  },
  {
    id: "R_ExpressWay/Construction/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 8,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e3e3e3",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        2,
        10,
        4,
        11,
        6,
        12,
        7,
        13,
        8,
        15,
        11,
        17,
        20,
        18,
        40,
        19,
        78
      ]
    }
  },
  {
    id: "R_ExpressWay/Tunel/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f09c3c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        4,
        10,
        6,
        11,
        8,
        12,
        9,
        13,
        10,
        15,
        13,
        17,
        22,
        18,
        42,
        19,
        80
      ]
    }
  },
  {
    id: "R_ExpressWay/Tunel/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#CD853F",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        2,
        10,
        4,
        11,
        6,
        12,
        7,
        13,
        8,
        15,
        11,
        17,
        20,
        18,
        40,
        19,
        78
      ]
    }
  },
  {
    id: "R_ExpressWay/Tunel_1/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 7,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f09c3c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        4,
        10,
        6,
        11,
        8,
        12,
        9,
        13,
        10,
        15,
        13,
        17,
        22,
        18,
        42,
        19,
        80
      ]
    }
  },
  {
    id: "R_ExpressWay/Tunel_1/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 7,
    maxzoom: 13,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffac4d",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        2,
        10,
        4,
        11,
        6,
        12,
        7,
        13,
        8,
        15,
        11,
        17,
        20,
        18,
        40,
        19,
        78
      ]
    }
  },
  {
    id: "R_ExpressWay/Road/1",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#f09c3c",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        7,
        2,
        8,
        4,
        10,
        6,
        11,
        8,
        12,
        9,
        13,
        10,
        15,
        13,
        17,
        22,
        18,
        42,
        19,
        80
      ]
    }
  },
  {
    id: "R_ExpressWay/Road/0",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 7,
    layout: {
      visibility: "visible",
      "line-cap": "square",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#ffac4d",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        8,
        2,
        10,
        4,
        11,
        6,
        12,
        7,
        13,
        8,
        15,
        11,
        17,
        20,
        18,
        40,
        19,
        78
      ]
    }
  },
  {
    id: "R_ExpressWay_Simple",
    type: "line",
    source: "epgis",
    "source-layer": "R_ExpressWay_Simple",
    minzoom: 5,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "bevel"
    },
    paint: {
      "line-opacity": 1,
      "line-color": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        5,
        "#ffac4d",
        8,
        "#f09c3c"
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        5,
        1,
        7,
        2
      ]
    }
  },
  {
    id: "SubwayPolygon",
    type: "fill",
    source: "epgis",
    "source-layer": "SubwayPolygon",
    minzoom: 15,
    layout: {
      visibility: "visible"
    },
    paint: {
      "fill-color": [
        "get",
        "UI_COLOR"
      ],
      "fill-opacity": 0.7
    }
  },
  {
    id: "SubwayLine/plan",
    type: "line",
    source: "epgis",
    "source-layer": "SubwayLine",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 12,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#bebebe",
      "line-dasharray": [
        4,
        4
      ],
      "line-width": 1.2
    }
  },
  {
    id: "SubwayLine/construction",
    type: "line",
    source: "epgis",
    "source-layer": "SubwayLine",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 12,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#bebebe",
      "line-dasharray": [
        4,
        4
      ],
      "line-width": 1.2
    }
  },
  {
    id: "SubwayLine/operation",
    type: "line",
    source: "epgis",
    "source-layer": "SubwayLine",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 10,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": [
        "get",
        "UI_COLOR"
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        11,
        1,
        15,
        3,
        19,
        5
      ]
    }
  },
  {
    id: "Boundary/Province",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      0
    ],
    minzoom: 3,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#989ea6",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": 1
    }
  },
  {
    id: "Boundary/HongKong",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      1
    ],
    minzoom: 3,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#989ea6",
      "line-dasharray": [
        3,
        1.5,
        1.5,
        1.5
      ],
      "line-width": 1
    }
  },
  {
    id: "Boundary/Ceasefire",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      2
    ],
    minzoom: 0,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#989ea6",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": 1
    }
  },
  {
    id: "Boundary/Nation",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      3
    ],
    minzoom: 0,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#eaaeb6",
      "line-width": 1
    }
  },
  {
    id: "Boundary/UndecidedNation",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      4
    ],
    minzoom: 0,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#eaaeb6",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": 1
    }
  },
  {
    id: "Boundary/Dispute",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      5
    ],
    minzoom: 0,
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#eaaeb6",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": 1
    }
  },
  {
    id: "Boundary/UndecidedNationC",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      6
    ],
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e04747",
      "line-dasharray": [
        0.5,
        1
      ],
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        0,
        1,
        4,
        2,
        5,
        3,
        7,
        4
      ]
    }
  },
  {
    id: "Boundary/NationC",
    type: "line",
    source: "epgis",
    "source-layer": "Boundary",
    filter: [
      "==",
      "_symbol",
      7
    ],
    maxzoom: 7,
    layout: {
      visibility: "visible",
      "line-cap": "round",
      "line-join": "round"
    },
    paint: {
      "line-opacity": 1,
      "line-color": "#e04747",
      "line-width": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        0,
        1,
        4,
        2,
        5,
        3,
        7,
        4
      ]
    }
  },
  {
    id: "2d-Building",
    type: "fill",
    source: "epgis",
    "source-layer": "2d-Building",
    minzoom: 16,
    layout: {},
    paint: {
      "fill-color": "#e6e6e6",
      "fill-opacity": 0.7
    }
  },
  {
    id: "Building",
    type: "fill-extrusion",
    source: "epgis",
    "source-layer": "Building",
    minzoom: 16,
    layout: {
      visibility: "visible"
    },
    paint: {
      "fill-extrusion-base": 0,
      "fill-extrusion-height": [
        "get",
        "max_height"
      ],
      "fill-extrusion-opacity": 0.65,
      "fill-extrusion-color": "rgb(255,255,255)"
    }
  },
  {
    id: "SouthIsland",
    type: "symbol",
    source: "epgis",
    "source-layer": "SouthIsland",
    minzoom: 4,
    layout: {
      visibility: "visible",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        4,
        10,
        8,
        11
      ],
      "text-anchor": "center",
      "text-field": "{_name}",
      "text-optional": true
    },
    paint: {
      "text-color": "#62718a",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "AOI/label/label",
    type: "symbol",
    source: "epgis",
    "source-layer": "AOI/label",
    minzoom: 15,
    layout: {
      visibility: "visible",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": 13,
      "text-field": "{_name}",
      "text-optional": true
    },
    paint: {
      "text-color": "#9C9C9C",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1.2
    }
  },
  {
    id: "Railway/label/label",
    type: "symbol",
    source: "epgis",
    "source-layer": "Railway/label",
    minzoom: 14,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": 12
    },
    paint: {
      "text-color": "#606066",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_Pathway/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_Pathway/label",
    minzoom: 16,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        16,
        13,
        18,
        15
      ]
    },
    paint: {
      "text-color": "#6d7073",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_VillageRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_VillageRoad/label",
    minzoom: 15,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        16,
        13,
        18,
        15
      ]
    },
    paint: {
      "text-color": "#6d7073",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_OrdinaryRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_OrdinaryRoad/label",
    minzoom: 15,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        12,
        16,
        13,
        17,
        15,
        18,
        16
      ]
    },
    paint: {
      "text-color": "#6d7073",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_SecondaryRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_SecondaryRoad/label",
    minzoom: 14,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        12,
        14,
        13,
        16,
        15,
        18,
        18
      ]
    },
    paint: {
      "text-color": "#6d7073",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_TownshipRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_TownshipRoad/label",
    minzoom: 14,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        15,
        12,
        16,
        13,
        17,
        15,
        18,
        16
      ]
    },
    paint: {
      "text-color": "#6d7073",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_CountyRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_CountyRoad/label",
    filter: [
      "==",
      "_label_class",
      0
    ],
    minzoom: 14,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        12,
        12,
        14,
        13,
        16,
        15,
        18,
        18
      ]
    },
    paint: {
      "text-color": "#6d7073",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_CountyRoad/label/RouteNO",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_CountyRoad/label",
    filter: [
      "==",
      "_label_class",
      1
    ],
    minzoom: 12,
    layout: {
      visibility: "visible",
      "symbol-placement": "point",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": 10,
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "icon-image": "icons_28_15_150",
      "icon-text-fit": "both",
      "icon-text-fit-padding": [
        9,
        4.5,
        6.5,
        4.5
      ],
      "icon-rotation-alignment": "viewport",
      "text-rotation-alignment": "viewport",
      "text-optional": true
    },
    paint: {
      "text-color": "#4a4a4a",
      "text-halo-color": "#4a4a4a",
      "text-halo-width": 0
    }
  },
  {
    id: "R_PrimaryRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_PrimaryRoad/label",
    minzoom: 13,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        14,
        16,
        15,
        18,
        18
      ]
    },
    paint: {
      "text-color": "#827a70",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_ProvincialRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_ProvincialRoad/label",
    filter: [
      "==",
      "_label_class",
      0
    ],
    minzoom: 12,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        13,
        14,
        16,
        15,
        18,
        18
      ]
    },
    paint: {
      "text-color": "#827a70",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_ProvincialRoad/label/RouteNO",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_ProvincialRoad/label",
    filter: [
      "==",
      "_label_class",
      1
    ],
    minzoom: 11,
    layout: {
      visibility: "visible",
      "symbol-placement": "point",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": 10,
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "icon-image": "icons_28_15_149",
      "icon-text-fit": "both",
      "icon-text-fit-padding": [
        9,
        4.5,
        6.5,
        4.5
      ],
      "icon-rotation-alignment": "viewport",
      "text-rotation-alignment": "viewport",
      "text-optional": true
    },
    paint: {
      "text-color": "#4a4a4a",
      "text-halo-color": "#4a4a4a",
      "text-halo-width": 0
    }
  },
  {
    id: "R_NationalRoad/label/RouteNO",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_NationalRoad/label",
    filter: [
      "==",
      "_label_class",
      0
    ],
    minzoom: 9,
    layout: {
      visibility: "visible",
      "symbol-placement": "point",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": 10,
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "icon-image": "icons_28_15_148",
      "icon-text-fit": "both",
      "icon-text-fit-padding": [
        9,
        4.5,
        6.5,
        4.5
      ],
      "icon-rotation-alignment": "viewport",
      "text-rotation-alignment": "viewport",
      "text-optional": true
    },
    paint: {
      "text-color": "#FFFFFF",
      "text-halo-color": "#ffffff",
      "text-halo-width": 0
    }
  },
  {
    id: "R_NationalRoad/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_NationalRoad/label",
    filter: [
      "==",
      "_label_class",
      1
    ],
    minzoom: 12,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        12,
        11,
        13,
        13,
        14,
        16,
        15,
        18,
        20
      ]
    },
    paint: {
      "text-color": "#606066",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_UrbanHighway/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_UrbanHighway/label",
    minzoom: 12,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        12,
        11,
        13,
        13,
        14,
        16,
        15,
        18,
        20
      ]
    },
    paint: {
      "text-color": "#606066",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "R_ExpressWay/label/RouteNO",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_ExpressWay/label",
    filter: [
      "all",
      [
        "==",
        "_label_class",
        0
      ],
      [
        "==",
        "$type",
        "Point"
      ]
    ],
    minzoom: 8,
    layout: {
      visibility: "visible",
      "symbol-placement": "point",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": 10,
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "icon-image": "icons_28_15_146",
      "icon-text-fit": "both",
      "icon-text-fit-padding": [
        9,
        4.5,
        6.5,
        4.5
      ],
      "icon-rotation-alignment": "viewport",
      "text-rotation-alignment": "viewport",
      "text-optional": true
    },
    paint: {
      "text-color": "#FFFFFF",
      "text-halo-color": "#ffffff",
      "text-halo-width": 0
    }
  },
  {
    id: "R_ExpressWay/label/name",
    type: "symbol",
    source: "epgis",
    "source-layer": "R_ExpressWay/label",
    filter: [
      "==",
      "_label_class",
      1
    ],
    minzoom: 12,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "symbol-spacing": 600,
      "text-field": "{_name}",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-letter-spacing": 0.2,
      "text-optional": true,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        10,
        12,
        11,
        13,
        13,
        14,
        16,
        15,
        18,
        20
      ]
    },
    paint: {
      "text-color": "#606066",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "SubwayLine/label/label",
    type: "symbol",
    source: "epgis",
    "source-layer": "SubwayLine/label",
    minzoom: 13,
    layout: {
      visibility: "visible",
      "symbol-placement": "line",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": 12,
      "text-field": "{_name}",
      "text-optional": true
    },
    paint: {
      "text-color": [
        "get",
        "UI_COLOR"
      ],
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "Village",
    type: "symbol",
    source: "epgis",
    "source-layer": "Village",
    minzoom: 13,
    layout: {
      visibility: "visible",
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "center",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "center",
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#a3a3a3",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "BuildingNO",
    type: "symbol",
    source: "epgis",
    "source-layer": "BuildingNO",
    minzoom: 17,
    layout: {
      visibility: "visible",
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "center",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "center",
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#a3a3a3",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "POI7",
    type: "symbol",
    source: "epgis",
    "source-layer": "POI7",
    minzoom: 18,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#696464",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "POI6",
    type: "symbol",
    source: "epgis",
    "source-layer": "POI6",
    minzoom: 17,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#696464",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "POI5",
    type: "symbol",
    source: "epgis",
    "source-layer": "POI5",
    minzoom: 16,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#696464",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "POI4",
    type: "symbol",
    source: "epgis",
    "source-layer": "POI4",
    minzoom: 15.5,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#696464",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "SubwayExit",
    type: "symbol",
    source: "epgis",
    "source-layer": "SubwayExit",
    minzoom: 15.5,
    layout: {
      visibility: "visible",
      "icon-image": "icons_28_15_152",
      "icon-size": 0.9,
      "text-size": 9,
      "text-field": "{_name}",
      "text-anchor": "center",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "center",
      "text-allow-overlap": true
    },
    paint: {
      "text-color": "#2880e4",
      "text-halo-color": "#ffffff",
      "text-halo-width": 0.6
    }
  },
  {
    id: "POI3",
    type: "symbol",
    source: "epgis",
    "source-layer": "POI3",
    minzoom: 14.5,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#696464",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "POI2",
    type: "symbol",
    source: "epgis",
    "source-layer": "POI2",
    minzoom: 13,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#696464",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "POI1",
    type: "symbol",
    source: "epgis",
    "source-layer": "POI1",
    minzoom: 11,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#696464",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "Street",
    type: "symbol",
    source: "epgis",
    "source-layer": "Street",
    minzoom: 12,
    layout: {
      visibility: "visible",
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "center",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "center",
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#a3a3a3",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "Town",
    type: "symbol",
    source: "epgis",
    "source-layer": "Town",
    minzoom: 9.5,
    maxzoom: 11,
    layout: {
      visibility: "visible",
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "center",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "center",
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#a3a3a3",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "SubwayStation",
    type: "symbol",
    source: "epgis",
    "source-layer": "SubwayStation",
    minzoom: 13,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.9,
      "text-size": 13,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        0
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "icon-color": "#006691",
      "text-color": "#62718a",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "Government",
    type: "symbol",
    source: "epgis",
    "source-layer": "Government",
    minzoom: 11.5,
    layout: {
      visibility: "visible",
      "icon-image": "icons_28_15_105",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#62718a",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "Airport",
    type: "symbol",
    source: "epgis",
    "source-layer": "Airport",
    minzoom: 10,
    layout: {
      visibility: "visible",
      "icon-image": "icons_28_15_53",
      "icon-size": 0.9,
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "bottom",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        1,
        -1
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#3a5c9e",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "County",
    type: "symbol",
    source: "epgis",
    "source-layer": "County",
    minzoom: 8,
    maxzoom: 11.5,
    layout: {
      visibility: "visible",
      "text-size": 12,
      "text-field": "{_name}",
      "text-anchor": "center",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "center",
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "icon-color": "#1C0082",
      "text-color": "#555555",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1
    }
  },
  {
    id: "City",
    type: "symbol",
    source: "epgis",
    "source-layer": "City",
    minzoom: 5,
    maxzoom: 10,
    layout: {
      visibility: "visible",
      "icon-image": "{icon}",
      "icon-size": 0.8,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        5,
        11,
        7,
        13,
        10,
        15
      ],
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        0.5,
        0
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#3C3C3C",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "ProvincialCapital2",
    type: "symbol",
    source: "epgis",
    "source-layer": "ProvincialCapital",
    minzoom: 4,
    maxzoom: 10,
    filter: [
      "in",
      "_name",
      "\u6FB3\u95E8"
    ],
    layout: {
      visibility: "visible",
      "icon-image": "icons_28_15_3",
      "icon-size": 0.9,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        5,
        11,
        7,
        13,
        10,
        15
      ],
      "text-field": "{_name}",
      "text-anchor": "right",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        -0.7,
        0
      ],
      "icon-allow-overlap": true,
      "text-allow-overlap": true
    },
    paint: {
      "text-color": "#252525",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "ProvincialCapital",
    type: "symbol",
    source: "epgis",
    "source-layer": "ProvincialCapital",
    minzoom: 4,
    maxzoom: 10,
    filter: [
      "!in",
      "_name",
      "\u6FB3\u95E8"
    ],
    layout: {
      visibility: "visible",
      "icon-image": "icons_28_15_3",
      "icon-size": 0.9,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        5,
        11,
        7,
        13,
        10,
        15
      ],
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        0.7,
        0
      ],
      "icon-allow-overlap": true,
      "text-allow-overlap": true
    },
    paint: {
      "text-color": "#252525",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  },
  {
    id: "Ociean",
    type: "symbol",
    source: "epgis",
    "source-layer": "Ociean",
    minzoom: 3,
    layout: {
      visibility: "visible",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        4,
        10,
        8,
        13
      ],
      "text-anchor": "center",
      "text-field": "{_name}",
      "text-optional": true
    },
    paint: {
      "text-color": "#2e68c1",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1.6
    }
  },
  {
    id: "Nation",
    type: "symbol",
    source: "epgis",
    "source-layer": "Nation",
    minzoom: 2,
    maxzoom: 3,
    layout: {
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-size": 16,
      "text-anchor": "center",
      "text-field": "{_name}",
      "text-optional": true
    },
    paint: {
      "text-color": "#FF0000",
      "text-halo-color": "#FFFFFF",
      "text-halo-width": 1.6
    }
  },
  {
    id: "Capital",
    type: "symbol",
    source: "epgis",
    "source-layer": "Capital",
    minzoom: 3,
    maxzoom: 10,
    layout: {
      "icon-image": "icons_28_15_2",
      "icon-size": 0.9,
      "text-size": [
        "interpolate",
        [
          "linear"
        ],
        [
          "zoom"
        ],
        4,
        12,
        8,
        14
      ],
      "text-field": "{_name}",
      "text-anchor": "left",
      "icon-anchor": "center",
      "text-font": [
        "Microsoft YaHei Regular"
      ],
      "text-max-width": 8,
      "text-justify": "left",
      "text-offset": [
        0.7,
        0
      ],
      "icon-allow-overlap": false,
      "text-allow-overlap": false
    },
    paint: {
      "text-color": "#252525",
      "text-halo-color": "#ffffff",
      "text-halo-width": 1
    }
  }
];
const id = "Streets.zvLK";
const streets = {
  version,
  sprite,
  glyphs,
  sources,
  layers,
  id
};
const SGMap = window.SGMap;
const TURF = window.turf;
let gyMapResultObj = {};
const gySjmapInit = (type) => {
  type = type || "";
  if (type && gyMapResultObj[type]) {
    return gyMapResultObj[type];
  }
  const getRightZoom = (zoom) => {
    return Math.max(mapOpt.minZoom, Math.min(Number(zoom || 0), mapOpt.maxZoom));
  };
  const formatOpt = () => {
    mapOpt.minZoom = Math.max(1, mapOpt.minZoom);
    mapOpt.maxZoom = Math.min(18, mapOpt.maxZoom);
    mapOpt.zoom = getRightZoom(mapOpt.zoom);
  };
  let map = ref(null);
  let mapOpt = {
    key: "b7b4b226a65935d7962beb4076a16f39",
    sn: "4ecbe00d61a13986bf7a8e1f6c6217e4",
    centerPoint: [116.40531, 39.896884],
    minZoom: 1,
    maxZoom: 18,
    zoom: 16,
    extent: [],
    scrollZoom: true,
    dragRotate: false,
    dragPan: true,
    keyboard: false,
    doubleClickZoom: true,
    bearing: 0,
    pitch: 0,
    styleType: 0,
    localIdeographFontFamily: "Microsoft YoHei"
  };
  let contentId = "";
  let mapFinish = ref(false);
  const init = (id2, opt) => {
    if (!id2) {
      console.error(`not find ${id2}`);
      return;
    }
    initOptions(id2, opt);
    initMap();
  };
  let initOptions = (id2, opt) => {
    contentId = id2;
    mapOpt = Object.assign({}, mapOpt, opt);
    formatOpt();
    let extent = mapOpt.extent || void 0;
    if (extent) {
      let lonlat1 = extent[0];
      let lonlat2 = extent[1];
      if (lonlat1 && lonlat2) {
        mapOpt.extent = new SGMap.LngLatBounds(lonlat1, lonlat2);
      } else {
        mapOpt.extent = void 0;
      }
    }
  };
  const getStyleType = () => {
    if (typeof mapOpt.styleType === "object") {
      let keys = Object.keys(mapOpt.styleType);
      keys.forEach((key) => {
        let obj = streets.layers.find((v) => v.id === key);
        if (obj) {
          obj.paint = Object.assign(obj.paint, mapOpt.styleType[key]);
          if (obj.paint.visibility) {
            obj.layout = {
              "visibility": obj.paint.visibility
            };
            delete obj.paint.visibility;
          }
        }
      });
      return streets;
    } else {
      let styleArr = [
        "aegis://styles/aegis/Streets",
        "aegis://styles/aegis/Satellite512"
      ];
      return styleArr[mapOpt.styleType] || "aegis://styles/aegis/Streets";
    }
  };
  const initMap = () => {
    SGMap.tokenTask.login(mapOpt.key, mapOpt.sn).then(function() {
      map.value = new SGMap.Map({
        container: contentId,
        style: getStyleType(),
        pitch: mapOpt.pitch,
        bearing: mapOpt.bearing,
        zoom: mapOpt.zoom,
        minZoom: mapOpt.minZoom,
        maxZoom: mapOpt.maxZoom,
        center: mapOpt.centerPoint,
        localIdeographFontFamily: mapOpt.localIdeographFontFamily,
        maxBounds: mapOpt.extent,
        scrollZoom: mapOpt.scrollZoom,
        dragPan: mapOpt.dragPan,
        keyboard: mapOpt.keyboard,
        doubleClickZoom: mapOpt.doubleClickZoom
      });
      map.value.on("load", function() {
        mapFinish.value = true;
      });
    });
  };
  const addLayerIndex = () => {
    layerIndex.value = layerIndex.value + 1;
  };
  const setMapMediaArr = (src) => {
    mapMediaArr.value.push(src);
  };
  const destory = () => {
    map.value && map.value.remove();
    map.value = null;
    delete gyMapResultObj[type];
  };
  const layerIndex = ref(0);
  const mapMediaArr = ref([]);
  let result = ref({
    contentId: type,
    map,
    mapFinish,
    init,
    layerIndex,
    getStyleType,
    addLayerIndex,
    mapMediaArr,
    setMapMediaArr,
    destory
  });
  gyMapResultObj[type] = result;
  return result;
};
const gySjmap = (type) => {
  if (gyMapResultObj[type]) {
    return gyMapResultObj[type];
  }
  return gySjmapInit.call(void 0, type);
};
const gySjMap = gySjmap;
let install = (Vue) => {
  if (!install.installed) {
    const _components = Object.keys(components).map(
      (key) => components[key]
    );
    _components.forEach((component) => {
      if ((component.hasOwnProperty("name") || component.hasOwnProperty("__name")) && component.hasOwnProperty("setup")) {
        Vue.component(component.name || component.__name, component);
      }
    });
  }
};
const index = {
  install
};
export {
  GySjmap,
  GySjmapCircle,
  GySjmapDraw,
  GySjmapHeat,
  GySjmapHtml,
  GySjmapImage,
  GySjmapLine,
  GySjmapLonlat,
  GySjmapPolygon,
  GySjmapTask,
  GySjmapText,
  SGMap,
  TURF,
  index as default,
  gySjMap,
  install
};
